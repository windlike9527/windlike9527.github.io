// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: https://codemirror.net/5/LICENSE
(function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){t.defineMode("javascript",function(Qa,x){var m,u,f,Z,L;function r(a,c,b){T=a;aa=b;return c}function F(a,c){var b=a.next();if('"'==b||"'"==b)return c.tokenize=Ra(b),c.tokenize(a,c);if("."==b&&a.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return r("number","number");if("."==b&&a.match(".."))return r("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(b))return r(b);if("\x3d"==b&&a.eat("\x3e"))return r("\x3d\x3e","operator");if("0"==b&&a.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return r("number","number");if(/\d/.test(b))return a.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),r("number","number");if("/"==b){if(a.eat("*"))return c.tokenize=ba,ba(a,c);if(a.eat("/"))return a.skipToEnd(),r("comment","comment");if(wa(a,c,1)){a:for(var d=c=!1;null!=(b=a.next());){if(!c){if("/"==b&&!d)break a;"["==b?d=!0:d&&"]"==b&&(d=!1)}c=!c&&"\\"==b}a.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/);return r("regexp","string-2")}a.eat("\x3d");return r("operator","operator",a.current())}if("`"==b)return c.tokenize=U,U(a,c);if("#"==b&&"!"==a.peek())return a.skipToEnd(),r("meta","meta");if("#"==b&&a.eatWhile(ca))return r("variable","property");if("\x3c"==b&&a.match("!--")||"-"==b&&a.match("-\x3e")&&!/\S/.test(a.string.slice(0,a.start)))return a.skipToEnd(),r("comment","comment");if(xa.test(b))return"\x3e"==b&&c.lexical&&"\x3e"==c.lexical.type||(a.eat("\x3d")?"!"!=b&&"\x3d"!=b||a.eat("\x3d"):/[<>*+\-|&?]/.test(b)&&(a.eat(b),"\x3e"==b&&a.eat(b))),"?"==b&&a.eat(".")?r("."):r("operator","operator",a.current());if(ca.test(b)){a.eatWhile(ca);b=a.current();if("."!=c.lastType){if(ya.propertyIsEnumerable(b))return a=ya[b],r(a.type,a.style,b);if("async"==b&&a.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return r("async","keyword",b)}return r("variable","variable",b)}}function Ra(a){return function(c,b){var d=!1,l;if(da&&"@"==c.peek()&&c.match(Sa))return b.tokenize=F,r("jsonld-keyword","meta");for(;null!=(l=c.next())&&(l!=a||d);)d=!d&&"\\"==l;d||(b.tokenize=F);return r("string","string")}}function ba(a,c){for(var b=!1,d;d=a.next();){if("/"==d&&b){c.tokenize=F;break}b="*"==d}return r("comment","comment")}function U(a,c){for(var b=!1,d;null!=(d=a.next());){if(!b&&("`"==d||"$"==d&&a.eat("{"))){c.tokenize=F;break}b=!b&&"\\"==d}return r("quasi","string-2",a.current())}function oa(a,c){c.fatArrowAt&&(c.fatArrowAt=null);var b=a.string.indexOf("\x3d\x3e",a.start);if(!(0>b)){if(p){var d=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(a.string.slice(a.start,b));d&&(b=d.index)}for(var d=0,f=!1,b=b-1;0<=b;--b){var e=a.string.charAt(b),g="([{}])".indexOf(e);if(0<=g&&3>g){if(!d){++b;break}if(0==--d){"("==e&&(f=!0);break}}else if(3<=g&&6>g)++d;else if(ca.test(e))f=!0;else if(/["'\/`]/.test(e))for(;;--b){if(0==b)return;if(a.string.charAt(b-1)==e&&"\\"!=a.string.charAt(b-2)){b--;break}}else if(f&&!d){++b;break}}f&&!d&&(c.fatArrowAt=b)}}function za(a,c,b,d,f,e){this.indented=a;this.column=c;this.type=b;this.prev=f;this.info=e;null!=d&&(this.align=d)}function Aa(a,c,b,d,e){var l=a.cc;m=a;u=e;f=null;Z=l;L=c;a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);for(;;)if((l.length?l.pop():G?q:v)(b,d)){for(;l.length&&l[l.length-1].lex;)l.pop()();if(f)return f;if(b="variable"==b)a:if(Ba){for(b=a.localVars;b;b=b.next)if(b.name==d){b=!0;break a}for(a=a.context;a;a=a.prev)for(b=a.vars;b;b=b.next)if(b.name==d){b=!0;break a}b=void 0}else b=!1;return b?"variable-2":c}}function g(){for(var a=arguments.length-1;0<=a;a--)Z.push(arguments[a])}function b(){g.apply(null,arguments);return!0}function pa(a,b){for(;b;b=b.next)if(b.name==a)return!0;return!1}function M(a){var b=m;f="def";if(Ba){if(b.context)if("var"==b.lexical.info&&b.context&&b.context.block){var l=Ca(a,b.context);if(null!=l){b.context=l;return}}else if(!pa(a,b.localVars)){b.localVars=new V(a,b.localVars);return}x.globalVars&&!pa(a,b.globalVars)&&(b.globalVars=new V(a,b.globalVars))}}function Ca(a,b){return b?b.block?(a=Ca(a,b.prev))?a==b.prev?b:new W(a,b.vars,!0):null:pa(a,b.vars)?b:new W(b.prev,new V(a,b.vars),!1):null}function ea(a){return"public"==a||"private"==a||"protected"==a||"abstract"==a||"readonly"==a}function W(a,b,l){this.prev=a;this.vars=b;this.block=l}function V(a,b){this.name=a;this.next=b}function H(){m.context=new W(m.context,m.localVars,!1);m.localVars=Ta}function fa(){m.context=new W(m.context,m.localVars,!0);m.localVars=null}function z(){m.localVars=m.context.vars;m.context=m.context.prev}function h(a,b){var c=function(){var c=m,l=c.indented;if("stat"==c.lexical.type)l=c.lexical.indented;else for(var e=c.lexical;e&&")"==e.type&&e.align;e=e.prev)l=e.indented;c.lexical=new za(l,u.column(),a,null,c.lexical,b)};c.lex=!0;return c}function e(){var a=m;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function k(a){function c(e){return e==a?b():";"==a||"}"==e||")"==e||"]"==e?g():b(c)}return c}function v(a,c){return"var"==a?b(h("vardef",c),qa,k(";"),e):"keyword a"==a?b(h("form"),ra,v,e):"keyword b"==a?b(h("form"),v,e):"keyword d"==a?u.match(/^\s*$/,!1)?b():b(h("stat"),N,k(";"),e):"debugger"==a?b(k(";")):"{"==a?b(h("}"),fa,ga,e,z):";"==a?b():"if"==a?("else"==m.lexical.info&&m.cc[m.cc.length-1]==e&&m.cc.pop()(),b(h("form"),ra,v,e,Da)):"function"==a?b(D):"for"==a?b(h("form"),fa,Ea,v,z,e):"class"==a||p&&"interface"==c?(f="keyword",b(h("form","class"==a?a:c),Fa,e)):"variable"==a?p&&"declare"==c?(f="keyword",b(v)):p&&("module"==c||"enum"==c||"type"==c)&&u.match(/^\s*\w/,!1)?(f="keyword","enum"==c?b(Ga):"type"==c?b(Ha,k("operator"),n,k(";")):b(h("form"),A,k("{"),h("}"),ga,e,e)):p&&"namespace"==c?(f="keyword",b(h("form"),q,v,e)):p&&"abstract"==c?(f="keyword",b(v)):b(h("stat"),Ua):"switch"==a?b(h("form"),ra,k("{"),h("}","switch"),fa,ga,e,e,z):"case"==a?b(q,k(":")):"default"==a?b(k(":")):"catch"==a?b(h("form"),H,Va,v,e,z):"export"==a?b(h("stat"),Wa,e):"import"==a?b(h("stat"),Xa,e):"async"==a?b(v):"@"==c?b(q,v):g(h("stat"),q,k(";"),e)}function Va(a){if("("==a)return b(I,k(")"))}function q(a,b){return Ia(a,b,!1)}function y(a,b){return Ia(a,b,!0)}function ra(a){return"("!=a?g():b(h(")"),N,k(")"),e)}function Ia(a,c,l){if(m.fatArrowAt==u.start){var d=l?Ja:Ka;if("("==a)return b(H,h(")"),w(I,")"),e,k("\x3d\x3e"),d,z);if("variable"==a)return g(H,A,k("\x3d\x3e"),d,z)}d=l?O:J;return Ya.hasOwnProperty(a)?b(d):"function"==a?b(D,d):"class"==a||p&&"interface"==c?(f="keyword",b(h("form"),Za,e)):"keyword c"==a||"async"==a?b(l?y:q):"("==a?b(h(")"),N,k(")"),e,d):"operator"==a||"spread"==a?b(l?y:q):"["==a?b(h("]"),$a,e,d):"{"==a?X(ha,"}",null,d):"quasi"==a?g(ia,d):"new"==a?b(ab(l)):b()}function N(a){return a.match(/[;\}\)\],]/)?g():g(q)}function J(a,c){return","==a?b(N):O(a,c,!1)}function O(a,c,l){var d=0==l?J:O,na=0==l?q:y;if("\x3d\x3e"==a)return b(H,l?Ja:Ka,z);if("operator"==a)return/\+\+|--/.test(c)||p&&"!"==c?b(d):p&&"\x3c"==c&&u.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?b(h("\x3e"),w(n,"\x3e"),e,d):"?"==c?b(q,k(":"),na):b(na);if("quasi"==a)return g(ia,d);if(";"!=a){if("("==a)return X(y,")","call",d);if("."==a)return b(bb,d);if("["==a)return b(h("]"),N,k("]"),e,d);if(p&&"as"==c)return f="keyword",b(n,d);if("regexp"==a)return m.lastType=f="operator",u.backUp(u.pos-u.start-1),b(na)}}function ia(a,c){return"quasi"!=a?g():"${"!=c.slice(c.length-2)?b(ia):b(N,cb)}function cb(a){if("}"==a)return f="string-2",m.tokenize=U,b(ia)}function Ka(a){oa(u,m);return g("{"==a?v:q)}function Ja(a){oa(u,m);return g("{"==a?v:y)}function ab(a){return function(c){return"."==c?b(a?db:eb):"variable"==c&&p?b(fb,a?O:J):g(a?y:q)}}function eb(a,c){if("target"==c)return f="keyword",b(J)}function db(a,c){if("target"==c)return f="keyword",b(O)}function Ua(a){return":"==a?b(e,v):g(J,k(";"),e)}function bb(a){if("variable"==a)return f="property",b()}function ha(a,c){if("async"==a)return f="property",b(ha);if("variable"==a||"keyword"==L){f="property";if("get"==c||"set"==c)return b(gb);var e;p&&m.fatArrowAt==u.start&&(e=u.match(/^\s*:\s*/,!1))&&(m.fatArrowAt=u.pos+e[0].length);return b(K)}if("number"==a||"string"==a)return f=da?"property":L+" property",b(K);if("jsonld-keyword"==a)return b(K);if(p&&ea(c))return f="keyword",b(ha);if("["==a)return b(q,P,k("]"),K);if("spread"==a)return b(y,K);if("*"==c)return f="keyword",b(ha);if(":"==a)return g(K)}function gb(a){if("variable"!=a)return g(K);f="property";return b(D)}function K(a){if(":"==a)return b(y);if("("==a)return g(D)}function w(a,c,e){function d(f,l){return(e?-1<e.indexOf(f):","==f)?(f=m.lexical,"call"==f.info&&(f.pos=(f.pos||0)+1),b(function(b,d){return b==c||d==c?g():g(a)},d)):f==c||l==c?b():e&&-1<e.indexOf(";")?g(a):b(k(c))}return function(e,f){return e==c||f==c?b():g(a,d)}}function X(a,c,f){for(var d=3;d<arguments.length;d++)Z.push(arguments[d]);return b(h(c,f),w(a,c),e)}function ga(a){return"}"==a?b():g(v,ga)}function P(a,c){if(p){if(":"==a)return b(n);if("?"==c)return b(P)}}function hb(a,c){if(p&&(":"==a||"in"==c))return b(n)}function La(a){if(p&&":"==a)return u.match(/^\s*\w+\s+is\b/,!1)?b(q,ib,n):b(n)}function ib(a,c){if("is"==c)return f="keyword",b()}function n(a,c){if("keyof"==c||"typeof"==c||"infer"==c||"readonly"==c)return f="keyword",b("typeof"==c?y:n);if("variable"==a||"void"==c)return f="type",b(B);if("|"==c||"\x26"==c)return b(n);if("string"==a||"number"==a||"atom"==a)return b(B);if("["==a)return b(h("]"),w(n,"]",","),e,B);if("{"==a)return b(h("}"),sa,e,B);if("("==a)return b(w(ta,")"),jb,B);if("\x3c"==a)return b(w(n,"\x3e"),n);if("quasi"==a)return g(ua,B)}function jb(a){if("\x3d\x3e"==a)return b(n)}function sa(a){return a.match(/[\}\)\]]/)?b():","==a||";"==a?b(sa):g(Y,sa)}function Y(a,c){if("variable"==a||"keyword"==L)return f="property",b(Y);if("?"==c||"number"==a||"string"==a)return b(Y);if(":"==a)return b(n);if("["==a)return b(k("variable"),hb,k("]"),Y);if("("==a)return g(Q,Y);if(!a.match(/[;\}\)\],]/))return b()}function ua(a,c){return"quasi"!=a?g():"${"!=c.slice(c.length-2)?b(ua):b(n,kb)}function kb(a){if("}"==a)return f="string-2",m.tokenize=U,b(ua)}function ta(a,c){return"variable"==a&&u.match(/^\s*[?:]/,!1)||"?"==c?b(ta):":"==a?b(n):"spread"==a?b(ta):g(n)}function B(a,c){if("\x3c"==c)return b(h("\x3e"),w(n,"\x3e"),e,B);if("|"==c||"."==a||"\x26"==c)return b(n);if("["==a)return b(n,k("]"),B);if("extends"==c||"implements"==c)return f="keyword",b(n);if("?"==c)return b(n,k(":"),n)}function fb(a,c){if("\x3c"==c)return b(h("\x3e"),w(n,"\x3e"),e,B)}function ja(){return g(n,lb)}function lb(a,c){if("\x3d"==c)return b(n)}function qa(a,c){return"enum"==c?(f="keyword",b(Ga)):g(A,P,E,mb)}function A(a,c){if(p&&ea(c))return f="keyword",b(A);if("variable"==a)return M(c),b();if("spread"==a)return b(A);if("["==a)return X(nb,"]");if("{"==a)return X(Ma,"}")}function Ma(a,c){if("variable"==a&&!u.match(/^\s*:/,!1))return M(c),b(E);"variable"==a&&(f="property");return"spread"==a?b(A):"}"==a?g():"["==a?b(q,k("]"),k(":"),Ma):b(k(":"),A,E)}function nb(){return g(A,E)}function E(a,c){if("\x3d"==c)return b(y)}function mb(a){if(","==a)return b(qa)}function Da(a,c){if("keyword b"==a&&"else"==c)return b(h("form","else"),v,e)}function Ea(a,c){if("await"==c)return b(Ea);if("("==a)return b(h(")"),ob,e)}function ob(a){return"var"==a?b(qa,R):"variable"==a?b(R):g(R)}function R(a,c){return")"==a?b():";"==a?b(R):"in"==c||"of"==c?(f="keyword",b(q,R)):g(q,R)}function D(a,c){if("*"==c)return f="keyword",b(D);if("variable"==a)return M(c),b(D);if("("==a)return b(H,h(")"),w(I,")"),e,La,v,z);if(p&&"\x3c"==c)return b(h("\x3e"),w(ja,"\x3e"),e,D)}function Q(a,c){if("*"==c)return f="keyword",b(Q);if("variable"==a)return M(c),b(Q);if("("==a)return b(H,h(")"),w(I,")"),e,La,z);if(p&&"\x3c"==c)return b(h("\x3e"),w(ja,"\x3e"),e,Q)}function Ha(a,c){if("keyword"==a||"variable"==a)return f="type",b(Ha);if("\x3c"==c)return b(h("\x3e"),w(ja,"\x3e"),e)}function I(a,c){"@"==c&&b(q,I);return"spread"==a?b(I):p&&ea(c)?(f="keyword",b(I)):p&&"this"==a?b(P,E):g(A,P,E)}function Za(a,b){return"variable"==a?Fa(a,b):ka(a,b)}function Fa(a,c){if("variable"==a)return M(c),b(ka)}function ka(a,c){if("\x3c"==c)return b(h("\x3e"),w(ja,"\x3e"),e,ka);if("extends"==c||"implements"==c||p&&","==a)return"implements"==c&&(f="keyword"),b(p?n:q,ka);if("{"==a)return b(h("}"),C,e)}function C(a,c){if("async"==a||"variable"==a&&("static"==c||"get"==c||"set"==c||p&&ea(c))&&u.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return f="keyword",b(C);if("variable"==a||"keyword"==L)return f="property",b(la,C);if("number"==a||"string"==a)return b(la,C);if("["==a)return b(q,P,k("]"),la,C);if("*"==c)return f="keyword",b(C);if(p&&"("==a)return g(Q,C);if(";"==a||","==a)return b(C);if("}"==a)return b();if("@"==c)return b(q,C)}function la(a,c){if("!"==c||"?"==c)return b(la);if(":"==a)return b(n,E);if("\x3d"==c)return b(y);a=m.lexical.prev;return g(a&&"interface"==a.info?Q:D)}function Wa(a,c){return"*"==c?(f="keyword",b(va,k(";"))):"default"==c?(f="keyword",b(q,k(";"))):"{"==a?b(w(Na,"}"),va,k(";")):g(v)}function Na(a,c){if("as"==c)return f="keyword",b(k("variable"));if("variable"==a)return g(y,Na)}function Xa(a){return"string"==a?b():"("==a?g(q):"."==a?g(J):g(ma,Oa,va)}function ma(a,c){if("{"==a)return X(ma,"}");"variable"==a&&M(c);"*"==c&&(f="keyword");return b(pb)}function Oa(a){if(","==a)return b(ma,Oa)}function pb(a,c){if("as"==c)return f="keyword",b(ma)}function va(a,c){if("from"==c)return f="keyword",b(q)}function $a(a){return"]"==a?b():g(w(y,"]"))}function Ga(){return g(h("form"),A,k("{"),h("}"),w(qb,"}"),e,e)}function qb(){return g(A,E)}function wa(a,b,e){return b.tokenize==F&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(a.string.slice(0,a.pos-(e||0)))}var S=Qa.indentUnit,Pa=x.statementIndent,da=x.jsonld,G=x.json||da,Ba=!1!==x.trackScope,p=x.typescript,ca=x.wordCharacters||/[\w$\xa1-\uffff]/,ya=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),e=a("keyword b"),d=a("keyword c"),f=a("keyword d"),g=a("operator"),h={type:"atom",style:"atom"};return{"if":a("if"),"while":b,"with":b,"else":e,"do":e,"try":e,"finally":e,"return":f,"break":f,"continue":f,"new":a("new"),"delete":d,"void":d,"throw":d,"debugger":a("debugger"),"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":g,"typeof":g,"instanceof":g,"true":h,"false":h,"null":h,undefined:h,NaN:h,Infinity:h,"this":a("this"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d,await:d}}(),xa=/[+\-*&%=<>!?|~^@]/,Sa=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,T,aa,Ya={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"import":!0,"jsonld-keyword":!0};Z=f=m=null;L=u=void 0;var Ta=new V("this",new V("arguments",null));H.lex=fa.lex=!0;z.lex=!0;e.lex=!0;return{startState:function(a){a={tokenize:F,lastType:"sof",cc:[],lexical:new za((a||0)-S,0,"block",!1),localVars:x.localVars,context:x.localVars&&new W(null,null,!1),indented:a||0};x.globalVars&&"object"==typeof x.globalVars&&(a.globalVars=x.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),oa(a,b));if(b.tokenize!=ba&&a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==T)return c;b.lastType="operator"!=T||"++"!=aa&&"--"!=aa?T:"incdec";return Aa(b,c,T,aa,a)},indent:function(a,b){if(a.tokenize==ba||a.tokenize==U)return t.Pass;if(a.tokenize!=F)return 0;var c=b&&b.charAt(0),d=a.lexical,f;if(!/^\s*else\b/.test(b))for(var g=a.cc.length-1;0<=g;--g){var h=a.cc[g];if(h==e)d=d.prev;else if(h!=Da&&h!=z)break}for(;!("stat"!=d.type&&"form"!=d.type||"}"!=c&&(!(f=a.cc[a.cc.length-1])||f!=J&&f!=O||/^[,\.=+\-*:?[\(]/.test(b)));)d=d.prev;Pa&&")"==d.type&&"stat"==d.prev.type&&(d=d.prev);f=d.type;g=c==f;return"vardef"==f?d.indented+("operator"==a.lastType||","==a.lastType?d.info.length+1:0):"form"==f&&"{"==c?d.indented:"form"==f?d.indented+S:"stat"==f?(c=d.indented,a="operator"==a.lastType||","==a.lastType||xa.test(b.charAt(0))||/[,.]/.test(b.charAt(0)),c+(a?Pa||S:0)):"switch"!=d.info||g||0==x.doubleIndentSwitch?d.align?d.column+(g?0:1):d.indented+(g?0:S):d.indented+(/^(?:case|default)\b/.test(b)?S:2*S)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:G?null:"/*",blockCommentEnd:G?null:"*/",blockCommentContinue:G?null:" * ",lineComment:G?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:G?"json":"javascript",jsonldMode:da,jsonMode:G,expressionAllowed:wa,skipExpression:function(a){Aa(a,"atom","atom","true",new t.StringStream("",2,null))}}});t.registerHelper("wordChars","javascript",/[\w$]/);t.defineMIME("text/javascript","javascript");t.defineMIME("text/ecmascript","javascript");t.defineMIME("application/javascript","javascript");t.defineMIME("application/x-javascript","javascript");t.defineMIME("application/ecmascript","javascript");t.defineMIME("application/json",{name:"javascript",json:!0});t.defineMIME("application/x-json",{name:"javascript",json:!0});t.defineMIME("application/manifest+json",{name:"javascript",json:!0});t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});t.defineMIME("text/typescript",{name:"javascript",typescript:!0});t.defineMIME("application/typescript",{name:"javascript",typescript:!0})});