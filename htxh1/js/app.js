(function(t){function e(e){for(var r,a,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"016f":function(t,e,n){},"01e1":function(t,e,n){},"0213":function(t,e,n){},"0227":function(t,e,n){"use strict";n("9ed9")},"023f":function(t,e,n){"use strict";n("15a2")},"026a":function(t,e,n){},"02ae":function(t,e,n){},"02bc":function(t,e,n){},"0347":function(t,e,n){},"0347d":function(t,e,n){"use strict";n("5c29")},"0369":function(t,e,n){},"03698":function(t,e,n){"use strict";n("02ae")},"0393":function(t,e,n){"use strict";n("4bcc")},"03c4":function(t,e,n){},"0445":function(t,e,n){"use strict";n("3cde")},"04d2":function(t,e,n){"use strict";n("80c9")},"04d8":function(t,e,n){"use strict";n("748f")},"0585":function(t,e,n){},"062b":function(t,e,n){},"068d":function(t,e,n){},"073b":function(t,e,n){"use strict";n("3581")},"0831":function(t,e,n){},"0834":function(t,e,n){},"08f3":function(t,e,n){"use strict";n.d(e,"tb",(function(){return r})),n.d(e,"sb",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"db",(function(){return a})),n.d(e,"eb",(function(){return s})),n.d(e,"cb",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"fb",(function(){return d})),n.d(e,"r",(function(){return h})),n.d(e,"gb",(function(){return f})),n.d(e,"hb",(function(){return m})),n.d(e,"bb",(function(){return b})),n.d(e,"nb",(function(){return g})),n.d(e,"ob",(function(){return w})),n.d(e,"ib",(function(){return x})),n.d(e,"jb",(function(){return k})),n.d(e,"pb",(function(){return C})),n.d(e,"qb",(function(){return S})),n.d(e,"mb",(function(){return T})),n.d(e,"rb",(function(){return O})),n.d(e,"s",(function(){return I})),n.d(e,"lb",(function(){return A})),n.d(e,"ab",(function(){return F})),n.d(e,"kb",(function(){return j})),n.d(e,"V",(function(){return _})),n.d(e,"F",(function(){return M})),n.d(e,"X",(function(){return L})),n.d(e,"a",(function(){return D})),n.d(e,"f",(function(){return P})),n.d(e,"e",(function(){return N})),n.d(e,"m",(function(){return E})),n.d(e,"n",(function(){return R})),n.d(e,"o",(function(){return V})),n.d(e,"M",(function(){return B})),n.d(e,"L",(function(){return H})),n.d(e,"Z",(function(){return U})),n.d(e,"W",(function(){return $})),n.d(e,"t",(function(){return G})),n.d(e,"J",(function(){return W})),n.d(e,"l",(function(){return z})),n.d(e,"u",(function(){return Y})),n.d(e,"I",(function(){return X})),n.d(e,"v",(function(){return K})),n.d(e,"w",(function(){return q})),n.d(e,"p",(function(){return J})),n.d(e,"H",(function(){return Q})),n.d(e,"U",(function(){return Z})),n.d(e,"i",(function(){return tt})),n.d(e,"q",(function(){return et})),n.d(e,"K",(function(){return nt})),n.d(e,"k",(function(){return rt})),n.d(e,"j",(function(){return it})),n.d(e,"g",(function(){return ot})),n.d(e,"O",(function(){return at})),n.d(e,"N",(function(){return st})),n.d(e,"S",(function(){return ct})),n.d(e,"R",(function(){return lt})),n.d(e,"T",(function(){return ut})),n.d(e,"P",(function(){return dt})),n.d(e,"Q",(function(){return ht})),n.d(e,"Y",(function(){return ft})),n.d(e,"h",(function(){return mt})),n.d(e,"A",(function(){return pt})),n.d(e,"B",(function(){return vt})),n.d(e,"x",(function(){return bt})),n.d(e,"y",(function(){return gt})),n.d(e,"E",(function(){return wt})),n.d(e,"z",(function(){return xt})),n.d(e,"C",(function(){return yt})),n.d(e,"D",(function(){return kt})),n.d(e,"G",(function(){return Ct}));n("4bf0"),n("86d1"),n("1918"),n("697b"),n("d77e"),n("b763"),n("36db"),n("8d23");function r(t,e,n){var i;null!==(i=Array.isArray)&&void 0!==i&&i.call(Array,e)?e.forEach((function(e){return r(t,e,n)})):Object.defineProperty(t,e,{enumerable:n})}var i=750,o=38,a="no_section_artboard",s="无Section画板",c={Success:0,NotLogin:1,Err:2,ArgumentErr:3,VCode:4,NotEmailChecked:5},l={WEB:0,ANDROID:1,IOS:2,CUSTOM:3,WE_CHAT_MINI_PROGRAM:4,getClassName:function(t){switch(t){case this.ANDROID:return"android";case this.IOS:return"ios";case this.WE_CHAT_MINI_PROGRAM:return"wx_mp";case this.CUSTOM:return"custom";default:return"web"}}};r(l,"getClassName",!1),window.CALC_PLATFORM_TYPE=l;var u={PX:0,DP:1,PT:2,RPX:3},d={NONE:0,PNG:1,SVG:2,WEBP:4,JPG:8,PDF:16},h={ALL:0,XD:1,SKETCH:2,PHOTOSHOP:4,FIGMA:8,JS_DESIGN:16,ARBOARD_PREVIEW:4096,NETDISK_FILE:8192,ARBOARD_PREVIEW_1X:16384,getAppName:function(t){switch(t){case this.XD:return"Adobe XD";case this.SKETCH:return"Sketch";case this.PHOTOSHOP:return"PhotoShop";case this.FIGMA:return"Figma";default:return"Unknow"}},getAppShortName:function(t){switch(t){case this.XD:return"XD";case this.SKETCH:return"Sketch";case this.PHOTOSHOP:return"PS";case this.FIGMA:return"Figma";default:return"Unknow"}},getFileExt:function(t){switch(t){case this.XD:return".xd";case this.SKETCH:return".sketch";case this.PHOTOSHOP:return".psd";case this.FIGMA:return".fig";default:return".unknow"}}};r(h,["getFileExt","getAppName","getAppShortName"],!1);var f={PASSTHROUGH:"pass-through",NORMAL:"Normal",DARKEN:"Darken",MULTIPLY:"Multiply",COLOR_BURN:"ColorBurn",LIGHTEN:"Lighten",SCREEN:"Screen",COLOR_DODGE:"ColorDodge",OVERLAY:"Overlay",SOFT_LIGHT:"SoftLight",HARD_LIGHT:"HardLight",DIFFERENCE:"Difference",EXCLUSION:"Exclusion",HUE:"Hue",SATURATION:"Saturation",COLOR:"Color",LUMINOSITY:"Luminosity"},m=y(f),p={Thin:100,ExtraLight:200,Light:300,Normal:400,Medium:500,SemiBold:600,Bold:700,ExtraBold:800,Black:900},v=(y(p),{100:"Thin",200:"ExtraLight",300:"Light",400:"Normal",500:"Medium",600:"Semibold",700:"Bold",800:"ExtraBold",900:"Black"}),b=v,g={Layer:0,Group:1,Page:2,Artboard:3,Shape:4,Image:5,ShapePath:6,Text:7,SymbolMaster:8,SymbolInstance:9,HotSpot:10,Slice:11,StyledLayer:12},w={Rectangle:0,Oval:1,Triangle:2,Polygon:3,Star:4,Custom:5},x={left:0,right:1,center:2,justify:3};function y(t){var e={};return Object.keys(t).forEach((function(n){e[t[n]]=n})),e}var k=y(x),C={top:0,center:1,bottom:2},S=y(C),T={Color:0,Gradient:1,Pattern:4},O=(y(T),{Linear:0,Radial:1,Angular:2}),I={None:0,FillColor:1,LinearGradientFill:2,ImageFill:3,RadialGradientFill:4,AngularGradientFill:5,DiamondGradientFill:6,getGradientInfo:function(t){var e,n;switch(t){case I.LinearGradientFill:e="线性",n="linear";break;case I.RadialGradientFill:e="径向",n="radial";break;case I.AngularGradientFill:e="角度",n="angular";break;case I.DiamondGradientFill:e="菱形",n="diamond";break;default:return null}return{name:e,className:n}}};r(I,"getGradientInfo",!1);var A={Center:0,Inside:1,Outside:2,getName:function(t){switch(t){case this.Center:return"中心";case this.Inside:return"内";case this.Outside:return"外";default:return""}}};r(A,"getName",!1);var F={Transparent:0,White:1,Black:2},j={Gaussian:0,Motion:1,Zoom:2,Background:3},_={ArtboardList:0,ArtboardDetail:1,ImageViewer:2},M={Success:0,WebUser_NotLogin:1,Err:2,ArgumentErr:3,VCode:4,NotEmailChecked:5,CloudRank_NotComment:6,CloudRank_SourceFile:7,NotFound:404,NeedUserConfirm:3001,UserNotConfirm:3002},L={None:0,Artboard_Comment:1,Artboard_Reply:2,Artboard_Comment_At:4,Artboard_Reply_At:8},D="allfolders.opened",P="cloudfolders.visible",N="cloudfolders.info",E={Folder:0,File:1,Artboard:2},R={Name:0,Date:1,ArtboardRect:2},V={All:0,Artboard:1},B={Small:0,Normal:1,Big:2},H={Other:0,Url:1,XD:2,Sketch:3,XDPlugin:4,SketchPlugin:5,Word:6,PPT:7,Excel:8,Txt:9,Html:10,Image:11,Pdf:12,Zip:13,AxureExport:14,App:15,Dmg:16,PhotoShop:17,AdobeIllustrator:18,AfterEffects:19,Media:20,AxureSourceFile:21,Figma:22,Font:23,AndroidApp:24,Package:25,Lottie:26,JsDesign:27,PhotoShopPlugin:28,getName:function(t,e){var n;switch(e){case B.Small:n="fs-";break;case B.Big:n="fb-";break;default:n="fn-";break}var r=["other","url","xd","sketch","xd-plugin","sketch-plugin","word","ppt","excel","txt","html","image","pdf","zip","axure-export","app","dmg","photoshop","adobe-illustrator","after-effects","media","axure-source","figma","font","apk","package","lottie",null,"ps-plugin"],i=r[t];return i||(i=r[0]),n+i},isSupportOnlineViewType:function(t,e,n){switch(t){case H.Html:case H.Url:case H.Image:case H.Pdf:case H.AxureExport:case H.Media:case H.Txt:case H.Lottie:return!0}return!(!n||!this.isDocxFile(t,e))||!!this.isTextFile(t,e)},isDocxFile:function(t,e){return t===this.Word&&"string"===typeof e&&/\.docx$/i.test(e)},isMarkdownFile:function(t,e){return this.isTextFile(t)&&"string"===typeof e&&/\.md$/i.test(e)},isTextFile:function(t,e){return t===this.Txt||t===this.Other&&"string"===typeof e&&/\.ps1$/i.test(e)}};r(H,["isSupportOnlineViewType","getName","isDocxFile","isMarkdownFile","isTextFile"],!1);var U={Folder:0,Artboard:1,File:2},$={Normal:0,File:1,Interaction:2},G={Blue:0,Red:1,Green:2,Yellow:3,Purple:4,getName:function(t){switch(t){case this.Red:return"red";case this.Green:return"green";case this.Yellow:return"yellow";case this.Purple:return"purple";default:return"blue"}}};r(G,"getName",!1);var W={Folder_Add:0,Folder_Edit:1,Remove:2,MoveTo:3,Folder_SetPreview:4,Folder_CancelPreview:5,Remove_ArtboardVer:6,Remove_NetdiskFileVer:8,Artboard_Upload:21,NetDisk_LinkAdd:40,NetDisk_LinkEdit:41,NetDisk_FileReName:42,NetDisk_FileUploadCompleted:47,Recycle_RestoreFolder:111,Recycle_RestoreNetdiskFile:113,Recycle_RestoreArtboard:114,RecycleVerControl_RestoreFolder:115,RecycleVerControl_RestoreNetdiskFile:117,RecycleVerControl_RestoreArtboard:118,isRecycleRestoreType:function(t){switch(t){case this.Recycle_RestoreFolder:case this.Recycle_RestoreNetdiskFile:case this.Recycle_RestoreArtboard:case this.RecycleVerControl_RestoreFolder:case this.RecycleVerControl_RestoreNetdiskFile:case this.RecycleVerControl_RestoreArtboard:return!0;default:return!1}},defined:function(t){switch(t){case this.Folder_Add:case this.Folder_Edit:case this.Folder_SetPreview:case this.Folder_CancelPreview:return!0;case this.Remove:case this.MoveTo:case this.Remove_ArtboardVer:case this.Remove_NetdiskFileVer:return!0;case this.Artboard_Upload:return!0;case this.NetDisk_FileUploadCompleted:case this.NetDisk_FileReName:case this.NetDisk_LinkAdd:case this.NetDisk_LinkEdit:return!0;default:return this.isRecycleRestoreType(t)}}},z={Artboard:1,File:2,Folder:4},Y={Change:0,Add:1,Remove:2},X={ALL:-1,Artboard:1,File:2,Folder:4},K={Public:0,PrivateCode:1,SpecifyMembers:2,getName:function(t){switch(t){case this.PrivateCode:return"加密";case this.SpecifyMembers:return"限定访问";default:return"公开"}}};r(K,"getName",!1);var q={None:0,Read:1,ReadWrite:2,OnlyChildFolderVisit:4,Owner:256,ParentOwner:512,Admin:1024,getAuthorityName:function(t){switch(t){case this.Owner:return"所有者";case this.ParentOwner:return"父级所有者";case this.Admin:return"超级管理员";case this.Read:return"可查看";case this.ReadWrite:return"可编辑";case this.OnlyChildFolderVisit:return"-";default:return null}},canChangeAuthority:function(t){switch(t){case this.Admin:case this.ParentOwner:case this.Owner:return!1}return!0}};r(K,["getAuthorityName","canChangeAuthority"],!1);var J={None:0,Tourist:1,Designer:2,Admin:128,getName:function(t){switch(t){case this.Tourist:return"协作者";case this.Designer:return"设计师";case this.Admin:return"超级管理员";default:return"-"}}};r(J,"getName",!1);var Q={Top:1,Middle:2,Bottom:3,getName:function(t){switch(t){case this.Top:return"顶部";case this.Bottom:return"底部";case this.Middle:return"居中";default:return"未知:".concat(t)}}};r(Q,"getName",!1);var Z={Property:0,Comment:1,Slice:2},tt={None:0,Dev:1,getName:function(t){switch(t){case this.Dev:return"待开发";default:return"无"}}};r(tt,"getName",!1);var et={None:0,Favorite:1,getName:function(t){switch(t){case this.Favorite:return"已收藏";default:return"无"}}};r(et,"getName",!1);var nt={None:-1,Document:0,Page:1,Section:2,getClassName:function(t){switch(t){case this.Document:return"nav-doc";case this.Page:return"nav-page";case this.Section:return"nav-section";default:return null}}};r(nt,"getClassName",!1);var rt={None:0,GlobalCloudFolderBoxMenu:1,HelperMenu:2,ArtboardModeMenu:4,SliceBorderLineMenu:8,ArtboardDevMode:16,ArtListMap:32,getSortValues:function(){return Object.keys(rt).map((function(t){return rt[t]})).filter((function(t){return t>0})).sort((function(t,e){var n=t-e;return n>0?1:n<0?-1:0}))},getSortKeys:function(){var t=this;return Object.keys(rt).map((function(e){var n=rt[e];return n===t.None?null:{key:e,value:n}})).filter((function(t){return!!t})).sort((function(t,e){var n=t.value-e.value;return n>0?1:n<0?-1:0})).map((function(t){return t.key}))}};r(rt,["getSortKeys","getSortValues"],!1);var it={TopLeft:0,TopRight:1,Left:2,Right:3,BottomLeft:4,BootomRight:5},ot="-notinit",at={AllItem:1,MyDelete:2,AutoCoverage:4,getName:function(t){switch(t){case this.AllItem:return"全部成员";case this.MyDelete:return"我删除的";case this.AutoCoverage:return"覆盖版本";default:return"-"}},getDesc:function(t){switch(t){case this.AllItem:return"管理员可查看和管理所有用户删除的内容";case this.AutoCoverage:return"显示因版本数超出「cloud.json」配置限制而自动归档的历史版本";case this.MyDelete:return"显示您删除的内容";default:return null}}};r(at,["getName","getDesc"],!1);var st={UserDeleted:1,VersionArchived:2},ct={Name:1,DelTime:2,FileType:3,VersionCount:4,DelUserNick:5,CleanTime:6,getName:function(t){switch(t){case this.Name:return"名称";case this.DelTime:return"删除时间";case this.CleanTime:return"清理时间";case this.FileType:return"类型";case this.VersionCount:return"版本数";case this.DelUserNick:return"操作成员";default:break}}};r(ct,"getName",!1);var lt={Desc:1,Asc:2},ut={None:0,Artboard:1,File:2,Folder:4,SourceFile:8,getName:function(t){switch(t){case this.Folder:return"文件夹";case this.File:return"文件";case this.Artboard:return"画板";case this.SourceFile:return"源文件";case this.None:return"全部";default:break}},getMiniName:function(t){switch(t){case this.Folder:return"文件夹";case this.File:return"文件";case this.Artboard:return"画板";case this.SourceFile:return"源文件";case this.None:return"全部";default:break}}};r(ut,["getName","getMiniName"],!1);var dt={None:0,CanRestoreToOriginal:1,NeedResetFolder:2,CanReNameOrResetFolder:4},ht={None:0,RestoreToOriginal:1,ResetFolder:2,ReName:4},ft={None:0,FavoriteFolder:1,Recent:2,FavoriteArtboard:4},mt={None:0,PreviewFinally_2x:2,PreviewFinally_4x:4,PreviewHDEnableWhenExport:512,checkType:function(t,e){return null!=t&&(t&e)===e}};r(mt,["checkType"],!1);var pt={None:-1,Horizontal:0,Vertical:1,getName:function(t){switch(t){case this.Horizontal:return"横向";case this.Vertical:return"竖向";default:return t}},getCss:function(t){var e,n,r,i,o;switch(t){case this.Horizontal:e="row",n="horizontal",i="→",r="水平",o="垂直";break;case this.Vertical:e="column",n="vertical",i="↓",r="垂直",o="水平";break;default:return null}var a="​​flex-direction";return{name:a,value:e,text:n,icon:i,textCN:r,textCounterCN:o}}};r(pt,["getName","getCss"],!1);var vt={UnKnown:-1,FlexStart:0,Center:1,FlexEnd:2,SpaceBetween:3,SpaceAround:4,SpaceEvenly:5,needGap:function(t){switch(t){case this.FlexStart:case this.Center:case this.FlexEnd:return!0;default:return!1}},getName:function(t){switch(t){case this.FlexStart:return"开始";case this.Center:return"居中";case this.FlexEnd:return"末尾";case this.SpaceBetween:return"两端对齐";case this.SpaceEvenly:return"均匀对齐";case this.SpaceAround:return"分散对齐";default:return t}},getCss:function(t){var e,n,r;switch(t){case this.FlexStart:e="flex-start",n="start",r="开始";break;case this.Center:e="center",n="center",r="居中";break;case this.FlexEnd:e="flex-end",n="end",r="末尾";break;case this.SpaceBetween:e="space-between",n="space-between",r="两端对齐";break;case this.SpaceEvenly:e="space-evenly",n="space-evenly",r="均匀对齐";break;case this.SpaceAround:e="space-around",n="space-around",r="分散对齐";break;default:return null}var i="justify-content";return{name:i,value:e,text:n,textCN:r}}};r(vt,["needGap","getName","getCss"],!1);var bt={UnKnown:-1,FlexStart:0,Center:1,FlexEnd:2,SpaceBetween:3,SpaceAround:4,SpaceEvenly:5,needShowProperty:function(t){switch(t){case this.FlexStart:case this.Center:case this.FlexEnd:case this.SpaceBetween:case this.SpaceAround:case this.SpaceEvenly:return!0;default:return!1}},getName:function(t){switch(t){case this.FlexStart:return"开始";case this.Center:return"居中";case this.FlexEnd:return"末尾";case this.SpaceBetween:return"两端对齐";case this.SpaceEvenly:return"均匀对齐";case this.SpaceAround:return"分散对齐";default:return t}},getCss:function(t){var e,n,r;switch(t){case this.FlexStart:e="flex-start",n="start",r="开始";break;case this.Center:e="center",n="center",r="居中";break;case this.FlexEnd:e="flex-end",n="end",r="末尾";break;case this.SpaceBetween:e="space-between",n="space-between",r="两端对齐";break;case this.SpaceEvenly:e="space-evenly",n="space-evenly",r="均匀对齐";break;case this.SpaceAround:e="space-around",n="space-around",r="分散对齐";break;default:return null}var i="align-content";return{name:i,value:e,text:n,textCN:r}}};r(bt,["needShowProperty","getName","getCss"],!1);var gt={UnKnown:-1,FlexStart:0,Center:1,FlexEnd:2,Baseline:3,getName:function(t){switch(t){case this.FlexStart:return"开始";case this.Center:return"居中";case this.FlexEnd:return"末尾";case this.Baseline:return"基线";default:return t}},getCss:function(t){var e,n,r;switch(t){case this.FlexStart:e="flex-start",n="start",r="开始";break;case this.Center:e="center",n="center",r="居中";break;case this.FlexEnd:e="flex-end",n="end",r="末尾";break;case this.Baseline:e="baseline",n="baseline",r="基线";break;default:return null}var i="align-items";return{name:i,value:e,text:n,textCN:r}}};r(gt,["getName","getCss"],!1);var wt={NO_WRAP:0,WRAP:1,WRAP_REVERSE:2,needShowProperty:function(t,e){switch(t){case this.NO_WRAP:return!!e;case this.WRAP:case this.WRAP_REVERSE:return!0;default:return!1}},needAlignContent:function(t){switch(t){case this.WRAP:case this.WRAP_REVERSE:return!0;default:return!1}},getName:function(t){switch(t){case this.WRAP:return"​​自动换行";case this.WRAP_REVERSE:return"​​反向换行​";case this.NO_WRAP:return"不换行​";default:return t}},getCss:function(t){var e,n,r;switch(t){case this.WRAP:e="wrap",n="wrap",r="​​自动换行";break;case this.WRAP_REVERSE:e="wrap-reverse",n="wrap-reverse",r="​​反向换行​";break;default:return null}var i="flex-wrap";return{name:i,value:e,text:n,textCN:r}}};r(wt,["needShowProperty","needAlignContent","getName","getCss"],!1);var xt={Inherit:-1,FlexStart:0,Center:1,FlexEnd:2,Stretch:3,needShowProperty:function(t){switch(t){case this.FlexStart:case this.Center:case this.FlexEnd:case this.Stretch:return!0;default:return!1}},getName:function(t){switch(t){case this.FlexStart:return"开始";case this.Center:return"居中";case this.FlexEnd:return"末尾";case this.Stretch:return"拉伸";default:return t}},getCss:function(t){var e,n,r;switch(t){case this.FlexStart:e="start",n="start",r="开始";break;case this.Center:e="center",n="center",r="居中";break;case this.FlexEnd:e="end",n="end",r="末尾";break;case this.Stretch:e="stretch",n="stretch",r="拉伸";break}var i="align-self";return{name:i,value:e,text:n,textCN:r}}};r(xt,["needShowProperty","getName","getCss"],!1);var yt={Inherit:-1,FlexStart:0,Center:1,FlexEnd:2,Stretch:3,needShowProperty:function(t){switch(t){case this.FlexStart:case this.Center:case this.FlexEnd:case this.Stretch:return!0;default:return!1}},getName:function(t){switch(t){case this.FlexStart:return"开始";case this.Center:return"居中";case this.FlexEnd:return"末尾";case this.Stretch:return"拉伸";default:return t}},getCss:function(t){var e,n,r;switch(t){case this.FlexStart:e="start",n="start",r="开始";break;case this.Center:e="center",n="center",r="居中";break;case this.FlexEnd:e="end",n="end",r="末尾";break;case this.Stretch:e="stretch",n="stretch",r="拉伸";break}var i="justify-self";return{name:i,value:e,text:n,textCN:r}}};r(yt,["needShowProperty","getName","getCss"],!1);var kt={Unknown:-1,Static:0,Relative:1,Absolute:2,Fixed:3,Sticky:4,needShowProperty:function(t){switch(t){case this.Absolute:case this.Fixed:case this.Sticky:return!0;default:return!1}},getName:function(t){switch(t){case this.Static:return"​​静态定位​";case this.Relative:return"​​相对定位​";case this.Absolute:return"​​绝对定位​​";case this.Fixed:return"​​固定定位​";case this.Sticky:return"​​粘性定位​";default:return t}},getCss:function(t){var e,n,r;switch(t){case this.Relative:e="relative",n="relative",r="​​相对定位​";break;case this.Absolute:e="absolute",n="absolute",r="​​绝对定位​​";break;case this.Fixed:e="fixed",n="fixed",r="​​固定定位​";break;case this.Sticky:e="sticky",n="sticky",r="​​粘性定位​";break}var i="position";return{name:i,value:e,text:n,textCN:r}}};r(kt,["needShowProperty","getName","getCss"],!1);var Ct={None:0,Flex:1,Grid:2}},"0913":function(t,e,n){"use strict";n("f81c")},"098a":function(t,e,n){"use strict";n("a1c7")},"09cf":function(t,e,n){},"0a02":function(t,e,n){"use strict";n("7a40")},"0a5c":function(t,e,n){},"0a87":function(t,e,n){},"0b86":function(t,e,n){},"0c43":function(t,e,n){"use strict";n("651d")},"0c4e":function(t,e,n){"use strict";n("fe87")},"0cf3":function(t,e,n){},"0d20":function(t,e,n){},"0eb7":function(t,e,n){"use strict";n("5bd7")},"0f21":function(t,e,n){},1257:function(t,e,n){"use strict";n("5c30")},1323:function(t,e,n){"use strict";n("2f40")},1375:function(t,e,n){"use strict";n("0a87")},"145a":function(t,e,n){"use strict";n("0b86")},1491:function(t,e,n){"use strict";n("dd0c")},"14c9":function(t,e,n){"use strict";n("f452")},"154a":function(t,e,n){"use strict";n("a9c6")},"15a2":function(t,e,n){},"15ce":function(t,e,n){"use strict";n("f7b6")},1626:function(t,e,n){},"167a":function(t,e,n){},"16d5":function(t,e,n){},"16ed":function(t,e,n){},1701:function(t,e,n){},1779:function(t,e,n){"use strict";n("efcc")},"177e":function(t,e,n){},"178d":function(t,e,n){},1823:function(t,e,n){"use strict";n("ac5a")},1882:function(t,e,n){},"1a6d":function(t,e,n){},"1d45":function(t,e,n){},"1e0f":function(t,e,n){"use strict";n("0a5c")},"1e16":function(t,e,n){"use strict";n("6e2e")},"1e8a":function(t,e,n){},"1f5a":function(t,e,n){},2138:function(t,e,n){"use strict";n("cc70")},"21e0":function(t,e,n){},"222d":function(t,e,n){},2288:function(t,e,n){},2317:function(t,e,n){"use strict";n("09cf")},"233b":function(t,e,n){"use strict";n("eba2")},2413:function(t,e,n){"use strict";n("827e")},2439:function(t,e,n){},2490:function(t,e,n){},"24f8":function(t,e,n){},"25f5":function(t,e,n){},"268e":function(t,e,n){},"26a8":function(t,e,n){},"273d":function(t,e,n){"use strict";n("ad47")},2919:function(t,e,n){"use strict";n("3d8f")},"2a09":function(t,e,n){"use strict";n("4c4f")},"2afb":function(t,e,n){"use strict";n("7544")},"2c33":function(t,e,n){"use strict";n("b1c8")},"2c6a":function(t,e,n){"use strict";n("76ba")},"2cd5c":function(t,e,n){"use strict";n("16ed")},"2d13":function(t,e,n){"use strict";n("6397")},"2d5e":function(t,e,n){"use strict";n("177e")},"2ebc":function(t,e,n){"use strict";n("de42")},"2ec4":function(t,e,n){},"2ec9":function(t,e,n){"use strict";n("3adb")},"2f1e":function(t,e,n){"use strict";n("c2b1")},"2f40":function(t,e,n){},"2fc2":function(t,e,n){"use strict";n("726c")},"30a3":function(t,e,n){},"30be":function(t,e,n){"use strict";n.d(e,"e",(function(){return d})),n.d(e,"a",(function(){return h})),n.d(e,"g",(function(){return f})),n.d(e,"c",(function(){return g})),n.d(e,"f",(function(){return w})),n.d(e,"d",(function(){return x})),n.d(e,"b",(function(){return y})),n.d(e,"h",(function(){return k}));var r=n("9c82"),i=n("a3df"),o=n("0aec"),a=(n("f74c"),n("4bf0"),n("5fb4"),n("86d1"),n("cfdd"),n("80f5")),s=n("fa7d"),c=function(){function t(e,n){Object(r["a"])(this,t),Object(o["a"])(this,"start",0),Object(o["a"])(this,"end",0),null!=e&&null!=n&&(this.start=Math.min(e,n),this.end=Math.max(e,n))}return Object(i["a"])(t,[{key:"length",get:function(){return this.end-this.start}}]),t}(),l=function(t,e){return t.start<=e.start&&t.end>=e.end},u=function(t,e){var n,r;return t.start<=e.start?(n=t,r=e):(n=e,r=t),r.start>=n.start&&r.start<=n.end},d=function(t,e){var n=e.x,r=n+e.width,i=t.x,o=i+t.width,a=e.y,s=a+e.height,c=t.y,l=c+t.height;return!(r<i||r>o)&&(!(n<i||n>o)&&(!(s<c||s>l)&&!(a<c||a>l)))},h=function(){function t(){Object(r["a"])(this,t),Object(o["a"])(this,"width",0),Object(o["a"])(this,"height",0),Object(o["a"])(this,"x",0),Object(o["a"])(this,"y",0)}return Object(i["a"])(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}},{key:"set",value:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this}},{key:"isSame",value:function(t){return null!=t&&f(this,t)}},{key:"isOverlap",value:function(t){return!(this.left>t.right||this.top>t.bottom||t.left>this.right||t.top>this.bottom)}},{key:"isContans",value:function(t){return t.left>=this.left&&t.top>=this.top&&t.left+t.width<=this.left+this.width&&t.top+t.height<=this.top+this.height}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}]),t}(),f=function(t,e){var n,r,i=5;return n=Object(s["r"])(t.x,i),r=Object(s["r"])(e.x,i),n===r&&(n=Object(s["r"])(t.y,i),r=Object(s["r"])(e.y,i),n===r&&(n=Object(s["r"])(t.width,i),r=Object(s["r"])(e.width,i),n===r&&(n=Object(s["r"])(t.height,i),r=Object(s["r"])(e.height,i),n===r)))},m=function(t,e){var n=new h;return n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n.width=Math.max(t.right,e.right)-n.x,n.height=Math.max(t.bottom,e.bottom)-n.y,n},p=function(t,e){for(var n=t.length,r=[],i=0;i<n;i++)for(var o=t[i],a=function(){var n=t[s];if(o!==n){var i=new c(o,n),a=e.find((function(t){return l(i,t)}));a||r.push(i)}},s=i+1;s<n;s++)a();return r},v=0,b=function(t,e,n,r,i,o){var a,s,c,l,d,f;return n?(a="x",s="right",c="width",l="y",d="bottom",f="height"):(a="y",s="bottom",c="height",l="x",d="right",f="width"),e.forEach((function(e){var m,p,b,g,w={start:r[l],end:r[d],length:r[f]},x={start:i[l],end:i[d],length:i[f]};if(u(w,x))m=Math.max(w.start,x.start),p=Math.min(w.end,x.end);else{var y={start:r[a],end:r[s],length:r[c]};u(e,y)?(m=x.start,p=x.end,g=r):(m=w.start,p=w.end,g=i)}var k=m+(p-m)/2,C=new h,S=o(Math.round(100*e.length)/100,n);if(n?(C.height=1,C.width=e.length,C.x=e.start,C.y=k):(C.height=e.length,C.width=1,C.x=k,C.y=e.start),t.push({rect:C,text:S,isHorizintal:n,id:++v}),null!=g){if(b=new h,n){b.width=1;var T,O=Math.min(Math.abs(C.y-g.y),Math.abs(C.y-g.bottom)),I={};[g.x,g.right,C.x,C.right].forEach((function(t){I[t]&&(T=t),I[t]=1})),b.x=T,b.y=C.y>g.y?C.y-O:C.y,b.height=O}else{b.height=1;var A,F=Math.min(Math.abs(C.x-g.x),Math.abs(C.x-g.right)),j={};[g.y,g.bottom,C.y,C.bottom].forEach((function(t){j[t]&&(A=t),j[t]=1})),b.y=A,b.x=C.x>g.x?C.x-F:C.x,b.width=F}t.push({rect:b,isHorizintal:!n,isDashed:!0,id:++v})}})),t},g=function(t,e,n,r){t.right>n.width&&(t.width=n.width-t.x),t.bottom>n.height&&(t.height=n.height-t.y),e.right>n.width&&(e.width=n.width-e.x),e.bottom>n.height&&(e.height=n.height-e.y),t.width=Math.max(t.width,.001),t.height=Math.max(t.height,.001),e.width=Math.max(e.width,.001),e.height=Math.max(e.height,.001);var i=m(t,e),o=Object(a["l"])([i.x,i.right,t.x,t.right,e.x,e.right]),s=Object(a["l"])([i.y,i.bottom,t.y,t.bottom,e.y,e.bottom]),l=[new c(t.x,t.right),new c(e.x,e.right)],u=[new c(t.y,t.bottom),new c(e.y,e.bottom)],d=p(o,l),h=p(s,u),f=[];return b(f,d,!0,t,e,r),b(f,h,!1,t,e,r),f},w=function(t,e){var n=e.x,r=e.x+e.width,i=e.y,o=e.y+e.height,a=t.x,s=t.x+t.width,c=t.y,l=t.y+t.height,u=r<a||n>s||o<c||i>l;return!u},x=function(t,e){if(w(t,e)){var n=new h,r=Math.max(t.x,e.x),i=Math.max(t.y,e.y),o=Math.min(t.x+t.width,e.x+e.width),a=Math.min(t.y+t.height,e.y+e.height),s=o-r,c=a-i;if(!(s<0||c<0))return n.set(r,i,s,c),n}};function y(t,e,n){return null==t||1===e?t:(t*=e,t=Math.round(100*t)/100,n?Math.ceil(t):t)}function k(t){var e,n;if(Object(a["k"])(t)){t.nameLower=null!==(e=null===(n=t.name)||void 0===n?void 0:n.toLowerCase())&&void 0!==e?e:"";var r=t.boundsInParent;if(r&&r.height>0&&r.width>0){var i=375/812,o=185,s=Math.round(o/r.width*r.height),c=Math.round(o/i);r.viewWidth=o,r.viewRealHeight=s,r.viewHeight=Math.min(c,s),r.thumbViewWidth=36,r.thumbViewHeight=Math.round(r.thumbViewWidth/i)}}}},"31a4":function(t,e,n){"use strict";n("d3ec")},"321d":function(t,e,n){"use strict";n("01e1")},3251:function(t,e,n){"use strict";n("bf59")},"338f":function(t,e,n){"use strict";n("f395")},3492:function(t,e,n){},3581:function(t,e,n){},"36b0":function(t,e,n){"use strict";n("9cf3")},"388e":function(t,e,n){},"391d":function(t,e,n){"use strict";n("268e")},"3adb":function(t,e,n){},"3b37":function(t,e,n){},"3cde":function(t,e,n){},"3ce7":function(t,e,n){"use strict";n("64c0")},"3d64":function(t,e,n){},"3d8f":function(t,e,n){},"3e9e":function(t,e,n){},"3fb5":function(t,e,n){"use strict";n("1f5a")},"40a0":function(t,e,n){"use strict";n("7120")},"40ff":function(t,e,n){"use strict";n("bf97")},"44a7":function(t,e,n){"use strict";n("caa5")},"45cf":function(t,e,n){"use strict";n("2288")},4648:function(t,e,n){},"47da":function(t,e,n){"use strict";n("a054")},"4b97":function(t,e,n){},"4bcc":function(t,e,n){},"4c4f":function(t,e,n){},"4c8d":function(t,e,n){"use strict";n("3e9e")},"4d32":function(t,e,n){"use strict";n("bd5b")},"4e0e":function(t,e,n){},"4fc0":function(t,e,n){},5026:function(t,e,n){"use strict";n("ac73")},5207:function(t,e,n){},5282:function(t,e,n){"use strict";n("b92d")},"53b0":function(t,e,n){"use strict";n("4648")},5610:function(t,e,n){"use strict";n("c5eb")},"567c":function(t,e,n){"use strict";n("b63f")},"56d7":function(t,e,n){"use strict";n.r(e);var r=n("0f37"),i=n("6fd1"),o=(n("f4fb"),n("c924"),n("e8ba"),n("1dc6"),n("f74c"),n("4bf0"),n("c018"),n("1a31")),a=n("08f3"),s=(n("697b"),n("f4af")),c=(n("8ee9"),n("86d1"),n("1918"),n("7d65"),n("cfdd"),n("5fb4"),n("bc79"),n("fa7d")),l=n("80f5"),u=n("a027"),d=(n("2eb9"),n("201d"),n("1b7f"),n("ce39"),n("92ea"),n("5a19"),n("d77e"),n("9cd4"),n("b763"),n("af38"),n("fd97"),n("36db"),n("46b4"),n("30be")),h=n("bc8f");function f(t,e,n,r){var i,o="color"===n||"textColor"===n;if(null!=e){var a=e.overrides.find((function(t){if(t.style){var e=t.style[n];return null!=e?t:void 0}}));if(a&&(i=a.style[n],null!=i))return o?{value:i,swatch:a.style["".concat(n,"Swatch")]}:i}return t&&(i=t[n],null!=i)?o?{value:i,swatch:t["".concat(n,"Swatch")]}:i:o?{value:r,swatch:null}:r}function m(t,e){var n,r;if(t){var i=function(t){var n;return t&&t.style?t.styleType!==e?null:null!==(n=t.name)&&void 0!==n?n:null:null},o=null===(n=t.overrides)||void 0===n||null===(n=n.find((function(t){return i(t)})))||void 0===n?void 0:n.name;return null!==(r=o)&&void 0!==r||(o=i(t.share)),o}}function p(t,e,n){var r,i={fill:{},charSpacing:f(t,e,"kerning",null,n),fontFamily:f(t,e,"fontFamily","",n),fontWeight:null!==(r=T[f(t,e,"fontWeight",4,n)])&&void 0!==r?r:400,fontItalic:f(t,e,"fontStyle","",n),fontSize:f(t,e,"fontSize","",n),underline:!!f(t,e,"textUnderline","",n),strikethrough:!!f(t,e,"textStrikethrough","",n)};i.fontStyle=i.fontWeightCss=i.fontWeight.toString(),i.fontItalic?i.fontStyle+=" "+i.fontItalic:i.fontItalic="normal";var o=f(t,e,"textColor","",n);return o.value&&(i.fill.value=Object(h["b"])(o.value),i.fill.swatch=o.swatch),i}function v(t){if(t&&t.type!==a["nb"].Artboard){var e=t.layers;if(!e)return t.type===a["nb"].ShapePath;var n=0,r=[];if(e.forEach((function(t,e){if(t)switch(t.type){case a["nb"].ShapePath:return void(t.markedForExport||n++);case a["nb"].Group:return void(v(t)&&(n++,r.push(e)))}})),n===e.length){n>=7&&(t.layers=[]);for(var i=r.length-1;i>=0;i--){var o=r[i];e.splice(o,1)}return!0}return t.type===a["nb"].ShapePath}}var b=["topLeft","topRight","bottomRight","bottomLeft"];function g(t){if(Object(l["k"])(t)){var e;switch(t.fillType){case a["mb"].Color:var n=t.color;null!=n&&(e={value:Object(h["b"])(n),swatch:t.colorSwatch,layeringType:t.layeringType});break;case a["mb"].Gradient:var r=t.gradient;if(r)switch(r.gradientType){case a["rb"].Linear:var i=r.from,o=r.to,s=r.stops;if(i&&o&&s){var u=[];e={endPoints:[i.x,i.y,o.x,o.y],colorStops:u},s.forEach((function(t){u.push({stop:t.position,color:{value:Object(h["b"])(t.color),swatch:t.colorSwatch}})}))}break;case a["rb"].Radial:0===r.aspectRatio&&(r.aspectRatio=1);var d=r.from,f=r.to,m=Object(c["l"])(d.x,d.y,f.x,f.y,90),p=r.stops;if(d&&f&&p){var v=[],b=d.x,g=d.y,w=Math.sqrt(Math.pow(f.x-b,2)+Math.pow(f.y-g,2));e={endPoints:[d.x,d.y,f.x,f.y],colorStops:v,startX:b,startY:g,gradientRadialTransform:{rotate:m,scaleX:w,scaleY:w*r.aspectRatio,endR:1,startR:0}},p.forEach((function(t){v.push({stop:t.position,color:{value:Object(h["b"])(t.color),swatch:t.colorSwatch}})}))}break;case a["rb"].Angular:var x=r.from,y=r.to,k=90,C=r.stops;if(x&&y&&C){var S,T,O=[],I=.5,A=.5,F=1;e={endPoints:[x.x,x.y,y.x,y.y],colorStops:O,startX:I,startY:A,gradientAngularTransform:{rotate:k,scaleX:F,scaleY:F,endR:1,startR:0}},C.sort((function(t,e){var n=t.position-e.position;return 0===n?0:n>0?1:-1}));var j=C[0],_=null!==(S=null===j||void 0===j?void 0:j.position)&&void 0!==S?S:0;0!=_&&(C.forEach((function(t){t.position-=_})),e.gradientAngularTransform.rotate=k=Object(c["r"])(k+360*_,2));var M=C[C.length-1],L=null!==(T=null===M||void 0===M?void 0:M.position)&&void 0!==T?T:1;L<1&&j&&(null===M||void 0===M?void 0:M.color)!=j.color&&C.push({position:1,color:j.color}),C.forEach((function(t){O.push({stop:t.position,color:{value:Object(h["b"])(t.color),swatch:t.colorSwatch}})}))}break}break;case a["mb"].Pattern:e={assetId:"sketch"};break}return e}}function w(t,e){var n=e.background;if(n&&n.enabled&&n.color&&n.includedInInstance)return!1;var r=e.frame,i=t.frame;if(r.width!==i.width)return!1;if(r.height!==i.height)return!1;var o=e.style;if(!o)return!0;var a=o.opacity;return null==a||a>=1}function x(t,e){var n=e.nodeSharedStyles={overrides:[],share:null},r=t.sharedStyles;if(r){var i=e.overrideSharedStyleIds;if(i&&i.forEach((function(t){var e,i=r[t];i&&(null!==(e=i.id)&&void 0!==e||(i.id=t),n.overrides.push(i))})),e.sharedStyleId){var o=r[e.sharedStyleId];o&&(n.share=o)}}}function y(t){var e,n=t.boxTransform={rotation:0,flippedHorizontally:!1,flippedVertically:!1},r=t.transform;Object(l["k"])(r)&&(null!=r.rotation&&(n.rotation=Object(c["r"])(r.rotation,3)),r.flippedHorizontally&&(n.flippedHorizontally=!0),r.flippedVertically&&(n.flippedVertically=!0));var i=null!==(e=t.name)&&void 0!==e?e:"";if(90===n.rotation||-90===n.rotation||270===n.rotation){if(t.type===a["nb"].ShapePath&&t.shapeType===a["ob"].Custom&&(-1!=i.indexOf("Line")||-1!=i.indexOf("直线")))return void(n.rotation=0);var o=t.frame,s=o.x,u=o.y,d=o.width,h=o.height;if(d===h)return;t._sketchRealStyle={rotation:n.rotation,x:s,y:u,width:d,height:h},t.markedForExport&&(n.rotation=0);var f=(d-h)/2,m=-f;t.frame={x:s+f,y:u+m,width:h,height:d}}}function k(t,e,n){if(!e.markedForExport){var r=t.frame;r={x:0,y:0,width:r.width,height:r.height};var i=e.frame,o=n.globalBounds.x-t.globalBounds.x,a=n.globalBounds.y-t.globalBounds.y,s={x:o+i.x,y:a+i.y,width:i.width,height:i.height};r=Object(d["d"])(r,s),r||(r={x:0,y:0,width:0,height:0});var c={width:r.width,height:r.height,x:r.x-o,y:r.y-a};if(!Object(d["g"])(c,i)){e.frame=c;var l=e.frame.x-i.x,u=e.frame.y-i.y;e._sketchFixedFrame=1,0===l&&0===u||e.layers&&e.layers.forEach((function(t){t.frame.x-=l,t.frame.y-=u}))}}}function C(t,e,n){if(n){if(k(t,e,n),n._sketchFixedFrame&&!e.markedForExport){var r={x:0,y:0,width:n.frame.width,height:n.frame.height};S(r,e)}if(e.hasClippingMask){var i=n.layers;if(i)for(var o=!1,a=e.frame,s=0,c=i.length;s<c;s++){var l=i[s];if(l!==e){if(o){if(l.hasClippingMask)break;if(l.shouldBreakMaskChain)break;l.markedForExport||S(a,l)}}else o=!0}}}}function S(t,e){var n=e.frame,r=n.x,i=n.y,o=Object(d["d"])(t,e.frame);if(o||(o={x:0,y:0,width:0,height:0}),!Object(d["g"])(o,e.frame)){var a=o.x-r,s=o.y-i;e.frame=o,e._sketchFixedFrame=1,0===a&&0===s||e.layers&&e.layers.forEach((function(t){var e=t.frame;e.x-=a,e.y-=s}))}}var T=[100,100,100,200,300,400,500,500,600,700,800,900,900,900,900,900];function O(t,e,n){var r;e.boundsInParent=e.frame,e.guid=e.id,e.visible=!e.hidden,e.children=e.layers;var i=1==t.sk25;y(e),x(t,e);var o=e.nodeSharedStyles,d=e.style,v=new Map;null!==(r=e.layerSN)&&void 0!==r||(e.layerSN=m(o,"Layer")),e.opacity=f(d,o,"opacity",1,v);var w=c["e"][a["hb"][f(d,o,"blendingMode",a["gb"].NORMAL,v)]];w&&(e.blendMode=w);var k=f(d,o,"blur",null,v);if(null!=k)switch(k.blurType){case a["kb"].Gaussian:e.blur={isBackgroundEffect:!1,visible:!0,blurAmount:k.radius};break;case a["kb"].Background:e.blur={isBackgroundEffect:!0,visible:!0,blurAmount:k.radius,saturation:k.saturation};break;case a["kb"].Zoom:var S=k.center;Object(l["k"])(S)&&(e.blur={isZoomEffect:!0,visible:!0,blurAmount:k.radius,center:S});break;case a["kb"].Motion:var T=k.motionAngle;"number"===typeof T&&(e.blur={isMotionEffect:!0,visible:!0,blurAmount:k.radius,motionAngle:T});break}var O=f(d,o,"borders",null,v);O&&O.length>0&&(e.strokeArr=[],O.forEach((function(t){var n=g(t);if(n){var r={strokeEnabled:!0,stroke:n,strokeWidth:t.thickness,strokePosition:t.position},i=f(d,o,"borderOptions",null,v);if(i&&(r.strokeDashArray=i.dashPattern),0===e.strokeArr.length)for(var a in r)e[a]=r[a];e.strokeArr.push(r)}})));var I=f(d,o,"shadows",null,v);I&&I.length>0&&(e.shadowArr=[],I.forEach((function(t){if(t){var n={visible:!0,x:t.x,y:t.y,blur:t.blur,spread:t.spread,color:{value:Object(h["b"])(t.color),swatch:t.colorSwatch}};0===e.shadowArr.length&&(e.shadow=n),e.shadowArr.push(n)}})));var F=f(d,o,"innerShadows",null,v);if(F&&F.length>0&&(e.innerShadowArr=[],F.forEach((function(t){if(t){var n={visible:!0,x:t.x,y:t.y,blur:t.blur,spread:t.spread,color:{value:Object(h["b"])(t.color),swatch:t.colorSwatch}};0===e.innerShadowArr.length&&(e.innerShadow=n),e.innerShadowArr.push(n)}}))),i||e.type!==a["nb"].SymbolMaster&&e.type!==a["nb"].Artboard){var j=f(d,o,"fills",null,v),_=null;Object(l["i"])(j)&&(e.fillArr=[],j.forEach((function(t){t=g(t),t&&(1===t.layeringType||!i&&e.type===a["nb"].Group?_=t:(0===e.fillArr.length&&(e.fillEnabled=!0,e.fill=t),e.fillArr.push({fillEnabled:!0,fill:t})))}))),e.skTintColor=_}if(C(t,e,n),t===e||null==n)e.globalBounds=e.globalDrawBounds=Object(s["a"])({},e.frame);else{var M=n.globalBounds,L=e.frame;e.globalBounds=e.globalDrawBounds={x:M.x+L.x,y:M.y+L.y,width:L.width,height:L.height}}if(!e.types){switch(e.types={GraphicNode:1},e.type){case a["nb"].SymbolInstance:e.types.SymbolInstance=1;break;case a["nb"].Artboard:e.types.Artboard=1;var D=e.background;D&&D.enabled&&D.color&&(e.fillEnabled=!0,e.fill={value:Object(h["b"])(D.color),swatch:D.colorSwatch,includedInExport:D.includedInExport});break;case a["nb"].Group:e.types.Group=1;break;case a["nb"].Text:var P;e.types.Text=1,e.paragraphSpacing=f(d,o,"paragraphSpacing",0,v),e.lineSpacing=f(d,o,"lineHeight",0,v);var N=f(d,o,"alignment",a["ib"].left,v);e.textAlign=a["jb"][N],null==e.textAlign&&(e.textAlign=N);var E=f(d,o,"verticalAlignment",a["pb"].top,v);E!==a["pb"].top&&(e.textVerticalAlign=a["qb"][E]);var R=e.styleRanges=[p(d,o,v)],V=e.textStyles;if(null!==(P=e.charSN)&&void 0!==P||(e.charSN=m(o,"Text")),Object(l["i"])(V)&&V.length>1)for(var B=1;B<V.length;B++){var H=V[B],U=p(H,null,v);R.push(U)}break;case a["nb"].ShapePath:if(e.types.Rectangle=1,!i)switch(e.shapeType){case a["ob"].Rectangle:var $=e.points,G=null;Object(l["i"])($)&&$.length>0&&(G={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},$.forEach((function(t,e){t&&(G[b[e]]=t.cornerRadius)}))),e.cornerRadii=G;break}break}i&&A(e)}e.usedSharedItems=Object(u["a"])(v.values())}var I=["圆角","角(平滑)","角(成角度的)","角(内直角)","角(内弧)"];function A(t){var e,n=null===(e=t.style)||void 0===e?void 0:e.corners;if(Object(l["k"])(n)){var r=n.style,i=n.radii,o=null;if(Object(l["i"])(i)&&i.length>0){if(o={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},1===i.length){var a=i[0];i.splice(1,0,a,a,a)}i.forEach((function(t,e){t&&(o[b[e]]=t)}))}t.cornerRadiiName=I[r],t.cornerRadii=o}}function F(t,e){return!e&&1===t.types.Group||e&&1===t.types.Group&&0===t.groupBehavior}var j=n("a3df"),_=n("9c82"),M=n("0aec"),L=(n("9f22"),n("55b0"),n("c469"),n("dc2e"),n("4437"),n("e328"),n("aa2f"),n("074f"),n("9758"),n("98f8"),n("67f3"),n("fc06"),n("3308"),n("92f9"),n("8f0e"),n("f309"),n("bdd9"),n("18b5"),n("6e6e"),n("8d23"),75),D="quality.jpg",P={None:-1,Brush:0,Line:1,Rectangle:2,Ellipse:3,Text:4,Arrow:5,Image:6,Move:7,Deleted:8,End:9},N=[14,16,18,20,24,28,32,36,48,72],E=36,R={Fine:3,Normal:6,Crude:12},V=[{color:"#545454",border:"#434343",name:"black"},{color:"#ffffff",border:"#cccccc",name:"white"},{color:"#f34e1e",border:"#c23e18",name:"orange"},{color:"#ffc701",border:"#cc9f07",name:"yellow"},{color:"#0ea958",border:"#0d8747",name:"green"},{color:"#417dee",border:"#2b63ce",name:"blue"},{color:"#9847ff",border:"#7e3bd2",name:"purple"},{color:"#d27c2c",border:"#a76323",name:"brown"}],B=function(){function t(e,n){return Object(_["a"])(this,t),Object(M["a"])(this,"_x",0),Object(M["a"])(this,"_y",0),this.x=null!=e?e:0,this.y=null!=n?n:0,this}return Object(j["a"])(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"top",get:function(){return this._y},set:function(t){this._y=t}},{key:"left",get:function(){return this._x},set:function(t){this._x=t}},{key:"toJSON",value:function(){var t=this.x,e=this.y;return{x:t,y:e}}}]),t}(),H=1,U=Object(j["a"])((function t(){Object(_["a"])(this,t),Object(M["a"])(this,"id",0),Object(M["a"])(this,"data",null),Object(M["a"])(this,"blob",null),Object(M["a"])(this,"thumbBlob",null),this.id=H++})),$=Object(j["a"])((function t(){Object(_["a"])(this,t),Object(M["a"])(this,"type",""),Object(M["a"])(this,"thumbType",""),Object(M["a"])(this,"name",""),Object(M["a"])(this,"length",0),Object(M["a"])(this,"thumbLength",0),Object(M["a"])(this,"fold",null),Object(M["a"])(this,"fileName",null),Object(M["a"])(this,"thumbFileName",null),Object(M["a"])(this,"imageSize",null),Object(M["a"])(this,"thumbImageSize",null)}));function G(t){return new Promise((function(e,n){if(t instanceof Image)return e(t);var r,i=!1;"string"===typeof t?r=t:(r=URL.createObjectURL(t),i=!0);var o=function(){i&&URL.revokeObjectURL(r),r=t=void 0};try{var a=new Image;a.onload=function(t){o(),e(t.target)},a.onerror=function(){o(),n("图片加载失败,不支持的图片类型")},a.src=r}catch(s){o(),n(s)}}))}var W="image/jpeg";function z(t,e){return Y.apply(this,arguments)}function Y(){return Y=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,o,a,s,c,l,u,d;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.naturalWidth,o=e.naturalHeight,a=Math.max(Math.ceil(o/i*n),1),t.prev=2,s=document.createElement("canvas"),c=function(t){return t},l=new q(c(n),c(a)),s.width=l.width,s.height=l.height,s.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(s),u=s.getContext("2d"),u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height),u.drawImage(e,0,0,i,o,0,0,l.width,l.height),t.next=16,ut(s,W,.75);case 16:return t.t0=t.sent,t.t1=n,t.t2=a,t.abrupt("return",{blob:t.t0,width:t.t1,height:t.t2});case 20:return t.prev=20,s&&(d=s.parentNode,d&&d.removeChild(s)),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,,20,23]])}))),Y.apply(this,arguments)}function X(t){return K.apply(this,arguments)}function K(){return K=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,o,a,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e instanceof Blob||e instanceof File){t.next=2;break}throw new Error("附件异常,不支持的图片格式");case 2:return t.next=4,G(e);case 4:if(n=t.sent,i=new U,o=new $,i.data=o,o.imageSize=new q(n.naturalWidth,n.naturalHeight),o.type=e.type,o.name=e.name,o.length=e.size,a=300,i.blob=e,!(o.imageSize.width<=a)){t.next=20;break}o.thumbImageSize=o.imageSize,o.thumbLength=0,o.thumbType=o.type,t.next=27;break;case 20:return t.next=22,z(n,a);case 22:s=t.sent,o.thumbImageSize=new q(s.width,s.height),o.thumbLength=s.blob.size,o.thumbType=W,i.thumbBlob=s.blob;case 27:return t.abrupt("return",i);case 28:case"end":return t.stop()}}),t)}))),K.apply(this,arguments)}var q=function(){function t(e,n){return Object(_["a"])(this,t),Object(M["a"])(this,"_width",0),Object(M["a"])(this,"_height",0),this.width=null!=e?e:0,this.height=null!=n?n:0,this}return Object(j["a"])(t,[{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"toJSON",value:function(){var t=this.width,e=this.height;return{width:t,height:e}}}]),t}(),J={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},Q=72,Z=3,tt=450;function et(t,e){null==e&&(e=1);var n=t.toLowerCase();if(!n)return n;J[n]&&(n=J[n]);var r=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i;if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(n)){if(4===n.length){for(var i="#",o=1;o<4;o+=1)i+=n.slice(o,o+1).concat(n.slice(o,o+1));n=i}for(var a=[],s=1;s<7;s+=2)a.push(parseInt("0x"+n.slice(s,s+2)));a.push(e),n="RGBA("+a.join(",")+")"}else n=r.test(n)?n.replace(r,"rgba($1,$2,$3,"+e+")"):n.replace(/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)\s*$/i,"rgba($1,$2,$3,"+e+")");return n}function nt(t,e){return{x:t.x*Math.cos(e)+t.y*Math.sin(e),y:t.y*Math.cos(e)-t.x*Math.sin(e)}}function rt(t,e,n,r){var i,o,a,s=Math.atan((r.x-n.x)/(r.y-n.y)),c=nt(r,-s),l=nt(n,-s),u={x:0,y:0},d={x:0,y:0},h={x:0,y:0},f={x:0,y:0},m=c.y-l.y;switch(t){case R.Fine:m=m>0?6:-6,i=m>0?12:-12,o=m>0?2:-2,a=m>0?4:-4;break;case R.Crude:m=m>0?10:-10,i=m>0?20:-20,o=m>0?6:-6,a=m>0?12:-12;break;default:m=m>0?8:-8,i=m>0?16:-16,o=m>0?4:-4,a=m>0?8:-8}m*=e,i*=e,o*=e,a*=e,u.x=c.x+m,u.y=c.y-i,d.x=c.x-m,d.y=c.y-i,h.x=c.x+o,h.y=c.y-a,f.x=c.x-o,f.y=c.y-a;var p=nt(u,s),v=nt(d,s),b=nt(h,s),g=nt(f,s);return{h1:p,h2:v,h3:b,h4:g}}function it(t){var e=t[t.length-1];if(e){var n=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;t.forEach((function(t){n=Math.min(t.x,n),r=Math.min(t.y,r),i=Math.max(t.x+t.width,i),o=Math.max(t.y+t.height,o)}));var a=new d["a"];return a.x=n,a.y=r,a.width=i-n,a.height=o-r,a}}function ot(t){var e=t[t.length-1];if(e){var n=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;t.forEach((function(t){var e=(new d["a"]).set(t.x,t.y,1,1);n=Math.min(e.x,n),r=Math.min(e.y,r),i=Math.max(e.right,i),o=Math.max(e.bottom,o)}));var a=new d["a"];return a.x=n,a.y=r,a.width=i-n,a.height=o-r,a}}var at=function(){function t(){Object(_["a"])(this,t),Object(M["a"])(this,"action",P.None),Object(M["a"])(this,"startPoint",null),Object(M["a"])(this,"endPoint",null),Object(M["a"])(this,"eventRect",null),Object(M["a"])(this,"color",null),Object(M["a"])(this,"brushSize",0),Object(M["a"])(this,"fontSize",0),Object(M["a"])(this,"text",null),Object(M["a"])(this,"family",null),Object(M["a"])(this,"lineHeight",0),Object(M["a"])(this,"textareaSize",null),Object(M["a"])(this,"points",null),Object(M["a"])(this,"textSplit",null),Object(M["a"])(this,"brushHash",null),Object(M["a"])(this,"dragFrom",-1),Object(M["a"])(this,"dragOn",-1),Object(M["a"])(this,"dragOffset",null),Object(M["a"])(this,"dragTarget",null)}return Object(j["a"])(t,[{key:"getBrushSize",value:function(){var t=this.action,e=this.brushSize;if(t!==P.Brush)return e;switch(e){case R.Crude:return 6;case R.Fine:return 1;default:return 3}}},{key:"makeBrushHash",value:function(t){return"".concat(t.offset.x,"-").concat(t.offset.y,"-").concat(t.scale,"-").concat(t.sceneWidth,"-").concat(t.sceneHeight)}},{key:"getArrowEventRect",value:function(){var t=this.startPoint,e=this.endPoint,n=1,r=rt(this.getBrushSize(),n,t,e);return ot([t,e,r.h1,r.h2,r.h3,r.h4])}},{key:"makePoint",value:function(t){switch(this.action){case P.Arrow:this.eventRect=this.getArrowEventRect();break;case P.Text:var e;t.font="".concat(this.fontSize,"px ").concat(null!==(e=this.family)&&void 0!==e?e:"sans-serif"),this.text=this.text.replace(/\r/g,"");for(var n=this.text,r={},i=0,o=this.textSplit=[],a=0,s=tt,c=n.length,l=this.lineHeight,u=new q(0,0),h=0;h<c;h++){var f=n[h];if("\n"!==f){var m=r[f];m||(m=r[f]=t.measureText(f).width);var p=a+m;p>s?(u.width=Math.max(u.width,a),u.height+=l,a=m,o.push({index:i,length:h-i}),i=h):a=p}else u.width=Math.max(u.width,a),u.height+=l,a=0,o.push({index:i,length:h-i}),i=h+1}u.width=Math.max(u.width,a),i<=c-1&&(u.height+=l,o.push({index:i,length:c-i}));var v=this.startPoint;this.endPoint=new B(v.x+u.width,v.y+u.height);var b=l/2-l/8;this.eventRect=(new d["a"]).set(v.x,v.y-b,u.width,u.height);break;case P.Brush:var g,w=null!==(g=ot(this.points))&&void 0!==g?g:new d["a"],x=this.getBrushSize(),y=Math.ceil(x/2);this.startPoint=new B(w.x-y,w.y-y),this.endPoint=new B(w.right,w.bottom),this.eventRect=(new d["a"]).set(w.x-y,w.y-y,w.width+x,w.height+x),this.brushHash=null;break;default:var k=this.startPoint,C=this.endPoint;if(this.eventRect=new d["a"],k&&C){var S=Math.min(k.x,C.x),T=Math.min(k.y,C.y),O=Math.round(Math.abs(k.x-C.x)),I=Math.round(Math.abs(k.y-C.y));this.eventRect.set(S,T,O,I)}break}}},{key:"isVaildData",value:function(){switch(this.action){case P.Deleted:var t=this.dragTarget;return!!t;case P.Move:var e=this.startPoint,n=this.endPoint,r=this.dragTarget,i=this.dragOffset;return!!r&&(!(!e||!n)&&((e.x!==n.x||e.y!==n.y)&&(this.dragOffset=new B(n.x-e.x+i.x,n.y-e.y+i.y),!0)));case P.Arrow:case P.Ellipse:case P.Rectangle:var o=this.startPoint,a=this.endPoint;return null!=o&&null!=a&&(o.x!==a.x||o.y!==a.y);case P.Text:var s=this.text;return!!s&&(s=s.trim(),s.length>0);case P.Brush:var c=this.points;return!(!Object(l["i"])(c)||c.length<=1);default:return!1}}},{key:"isOverlapPoint",value:function(t,e,n){st.arrow(this,e,n)}}]),t}(),st={arrow:function(t,e,n){var r=t.startPoint,i=t.endPoint;if(r&&i){var o=dt.getCanvasLocation(e,t.startPoint,n),a=dt.getCanvasLocation(e,t.endPoint,n),s=e.scale*e.canvasScale,c=rt(t.getBrushSize(),s,o,a);return{triangle1:{p0:new B(o.x,o.y),p1:new B(c.h3.x,c.h3.y),p2:new B(c.h4.x,c.h4.y)},triangle2:{p0:new B(a.x,a.y),p1:new B(c.h1.x,c.h1.y),p2:new B(c.h2.x,c.h2.y)}}}}},ct=Object(j["a"])((function t(){Object(_["a"])(this,t),Object(M["a"])(this,"offset",null),Object(M["a"])(this,"scale",1),Object(M["a"])(this,"sceneWidth",1),Object(M["a"])(this,"sceneHeight",1),Object(M["a"])(this,"canvasScale",1)}));function lt(t){return new Promise((function(e,n){var r=new Image;r.onload=function(t){e(t.target)},r.onerror=function(){n("画板预览图加载失败")},r.crossOrigin="*",r.src=t}))}function ut(t,e,n){return new Promise((function(r,i){try{t.toBlob((function(t){r(t)}),e,n)}catch(o){i(o)}}))}var dt={_supportCanvasEllipse:-1,get supportCanvasEllipse(){var t=this._supportCanvasEllipse;return-1===t&&(t="function"===typeof CanvasRenderingContext2D.prototype.ellipse?1:0),t},getCanvasLocation:function(t,e,n){var r=new B(e.x-t.offset.x,e.y-t.offset.y);n&&(r.x+=n.x,r.y+=n.y);var i=t.scale*t.canvasScale;return r.x=Math.floor(r.x*i),r.y=Math.floor(r.y*i),r},getCanvasRect:function(t,e,n){var r=(new d["a"]).set(e.x-t.offset.x,e.y-t.offset.y,e.width,e.height);n&&(r.x+=n.x,r.y+=n.y);var i=t.scale*t.canvasScale;return r.x=Math.floor(r.x*i),r.y=Math.floor(r.y*i),r.width=Math.ceil(r.width*i),r.height=Math.ceil(r.height*i),r},getMidPointBtw:function(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}},setStrokeStyle:function(t,e,n,r){t.lineCap=t.lineJoin=null!==r&&void 0!==r?r:"round",t.fillStyle=t.strokeStyle=e.color;var i=e.getBrushSize(),o=Math.ceil(i*n.scale*n.canvasScale);t.lineWidth=o},drawRectangle:function(t,e,n,r,i,o){var a=e.startPoint,s=e.endPoint;if(a&&s){var c=this.getCanvasLocation(n,e.startPoint,o),l=this.getCanvasLocation(n,e.endPoint,o);i?this.drawSelectItem(t,e,n,o):r&&this.drawBackground(t,e,n,o),this.setStrokeStyle(t,e,n);var u=Math.round(t.lineWidth/2),d=Math.min(c.x,l.x)+u,h=Math.min(c.y,l.y)+u,f=Math.max(0,Math.abs(c.x-l.x)-2*u),m=Math.max(0,Math.abs(c.y-l.y)-2*u);t.strokeRect(d,h,f,m),i&&this.drawSelectItemBorder(t,e,n,o)}},drawEllipse:function(t,e,n,r,i,o){var a=e.startPoint,s=e.endPoint;if(a&&s){var c=this.getCanvasLocation(n,e.startPoint,o),l=this.getCanvasLocation(n,e.endPoint,o);i?this.drawSelectItem(t,e,n,o):r&&this.drawBackground(t,e,n,o),this.setStrokeStyle(t,e,n);try{var u=Math.ceil(t.lineWidth/2),d=Math.round(Math.abs(c.x-l.x)/2),h=Math.round(Math.abs(c.y-l.y)/2),f=Math.min(c.x,l.x)+d,m=Math.min(c.y,l.y)+h;if(d=Math.max(0,d-u),h=Math.max(0,h-u),this.supportCanvasEllipse)return t.beginPath(),t.ellipse(f,m,d,h,0*Math.PI/180,0,2*Math.PI),t.closePath(),void t.stroke();t.save();var p=d>h?d:h,v=d/p,b=h/p;t.scale(v,b),t.beginPath(),t.arc(f/v,m/b,p,0,2*Math.PI,!1),t.closePath(),t.stroke(),t.restore()}finally{i&&this.drawSelectItemBorder(t,e,n,o)}}},drawArrow:function(t,e,n,r,i,o){if(t){var a=st.arrow(e,n,o);a&&(i?this.drawSelectItem(t,e,n,o):r&&this.drawBackground(t,e,n,o),this.setStrokeStyle(t,e,n,"buff"),t.beginPath(),t.moveTo(a.triangle1.p0.x,a.triangle1.p0.y),t.lineTo(a.triangle1.p1.x,a.triangle1.p1.y),t.lineTo(a.triangle1.p2.x,a.triangle1.p2.y),t.closePath(),t.fill(),t.beginPath(),t.moveTo(a.triangle2.p0.x,a.triangle2.p0.y),t.lineTo(a.triangle2.p1.x,a.triangle2.p1.y),t.lineTo(a.triangle2.p2.x,a.triangle2.p2.y),t.closePath(),t.fill(),i&&this.drawSelectItemBorder(t,e,n,o))}},drawSelectItem:function(t,e,n,r){return this.drawBackground(t,e,n,r)},drawSelectItemBorder:function(t,e,n,r){if(e.eventRect){var i=this.getCanvasRect(n,e.eventRect,r),o="#1886ff";t.strokeStyle=o,t.lineCap="round";var a=Math.max(Math.ceil(n.scale*n.canvasScale),1);t.lineWidth=a,t.strokeRect(i.x,i.y,i.width,i.height)}},drawBackground:function(t,e,n,r){if(e.eventRect){var i=this.getCanvasRect(n,e.eventRect,r),o="#1886ff";o=et(o,.2),t.fillStyle=o,t.fillRect(i.x,i.y,i.width,i.height)}},drawText:function(t,e,n,r,i,o){var a,s=e.startPoint,c=e.textSplit;if(s&&c){var l=this.getCanvasLocation(n,e.startPoint,o);if(void 0!=t){i?this.drawSelectItem(t,e,n,o):r&&this.drawBackground(t,e,n,o);var u=n.canvasScale*n.scale,d=e.text,h=Math.max(1,Math.round(e.lineHeight*u)),f=new B(l.x,l.y-Math.round(h/4));t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",t.font="".concat(Math.max(1,Math.round(e.fontSize*n.scale)*n.canvasScale),"px ").concat(null!==(a=e.family)&&void 0!==a?a:"sans-serif"),t.fillStyle=e.color,t.textAlign="left",t.textBaseline="top",c.forEach((function(e){if(e.length>0){var n=d.substr(e.index,e.length);t.fillText(n,f.x,f.y)}f.y+=h})),i&&this.drawSelectItemBorder(t,e,n,o)}}},smoothPoints:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e%2===0&&e++;for(var n=Math.floor(e/2),r=[],i=0;i<t.length;i++){for(var o=0,a=0,s=0,c=Math.max(0,i-n);c<=Math.min(t.length-1,i+n);c++)o+=t[c].x,a+=t[c].y,s++;r.push({x:Math.round(o/s),y:Math.round(a/s)})}return r},drawSmoothCurve:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=0;n<e.length-1;n++){var r=e[n],i=e[n+1],o=(r.x+i.x)/2,a=(r.y+i.y)/2;t.quadraticCurveTo(r.x,r.y,o,a)}var s=e[e.length-1];s&&t.quadraticCurveTo(s.x,s.y,s.x,s.y),t.stroke(),t.closePath()},drawBrush:function(t,e,n,r,i,o){var a=this;if(Object(l["i"])(e.points)&&!(e.points.length<=1)){var s=e.points.map((function(t){return a.getCanvasLocation(n,t,o)}));i?this.drawSelectItem(t,e,n,o):r&&this.drawBackground(t,e,n,o),this.setStrokeStyle(t,e,n),this.drawSmoothCurve(t,s),i&&this.drawSelectItemBorder(t,e,n,o),t=null}},save:function(t,e,n,o){var a=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var s,c,u,h,f,m,p,v,b,g,w,x,y,k,C,S,T,O;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(Object(l["j"])(e)){r.next=2;break}throw"artboardPreviewPath is empty";case 2:return r.next=4,lt(e+"?r="+Math.random());case 4:if(s=r.sent,c=o>=n.length-1?n:n.slice(0,o+1),0!==c.length){r.next=8;break}throw"没有截图操作信息";case 8:return u=[],h=[t],c.forEach((function(t){var e,r=t.action;switch(r){case P.Brush:case P.Rectangle:case P.Ellipse:case P.Arrow:case P.Text:var i=a.getHistoryTagetWithDragOn(n,t,o);if(i){if(i.action===P.Deleted)return;e=i.dragOffset}var s=new d["a"];s.set(t.eventRect.x,t.eventRect.y,t.eventRect.width,t.eventRect.height),e&&(s.x+=e.x,s.y+=e.y),u.push({target:t,offset:e}),h.push(s);break}})),f=it(h),m=new B(-f.x,-f.y),r.prev=13,v=2,p=document.createElement("canvas"),b=function(t){return t*v},p.width=b(f.width),p.height=b(f.height),g=500,w=Math.round(f.height/f.width*g),p.style.cssText="top:-10000px;left:0;width:".concat(g,"px;height:").concat(w,"px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;"),document.body.appendChild(p),x=p.getContext("2d"),x.fillStyle="#fafafa",x.fillRect(0,0,b(f.width),b(f.height)),y=new q(s.width,s.height),x.drawImage(s,0,0,y.width,y.height,b(m.x+t.x),b(m.y+t.y),b(t.width),b(t.height)),k=!1,C=!1,S=new ct,S.offset=new B,S.canvasScale=v,S.scale=1,S.sceneWidth=f.width,S.sceneHeight=f.height,T=new B,u.forEach((function(t){var e=t.target;switch(T.x=m.x,T.y=m.y,t.offset&&(T.x+=t.offset.x,T.y+=t.offset.y),e.action){case P.Brush:var n=!1;a.drawBrush(x,e,S,k,C,T,n);break;case P.Rectangle:a.drawRectangle(x,e,S,k,C,T);break;case P.Ellipse:a.drawEllipse(x,e,S,k,C,T);break;case P.Arrow:a.drawArrow(x,e,S,k,C,T);break;case P.Text:a.drawText(x,e,S,k,C,T);break}})),r.next=41,ut(p,"image/jpeg",.75);case 41:return r.abrupt("return",r.sent);case 42:return r.prev=42,p&&(O=p.parentNode,O&&O.removeChild(p)),r.finish(42);case 46:case"end":return r.stop()}}),i,null,[[13,,42,46]])})))()},getHistoryTagetWithDragOn:function(t,e,n){if(null==e)return null;if(e.action===P.Move)return null;var r=e.dragOn;if(-1===r)return e;if(r>n)return e;var i,o=null;while(r<=n){var a=t[r];if(!a)return null;if(a.action!==P.Move&&a.action!==P.Deleted)return null;if(i=r,r=a.dragOn,-1===r)return a;if(r>n)return a;var s=t[r];if(!s)return a;if(s.action!==P.Move&&s.action!==P.Deleted)return a;if(s.dragFrom!==i)return a;o=a}return o}},ht=n("751a"),ft={T:"top",R:"right",B:"bottom",L:"left"},mt={linear:"linear","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out"},pt={goToArtboard:"goToArtboard",overlay:"overlay",goBack:"goBack",speak:"speak",goUrl:"url",replace:"replace",goBackAndCloseAllOverlay:"goBackAndCloseAllOverlay",closeCurrentOverlay:"closeCurrentOverlay",getTypeName:function(t){switch(t){case pt.goBack:case pt.goBackAndCloseAllOverlay:return"返回";case pt.goToArtboard:return"跳转";case pt.closeCurrentOverlay:return"关闭";case pt.replace:return"替换";case pt.goUrl:return"链接";case pt.overlay:return"覆盖";default:return"未知"}}},vt={none:"none",slideFromLeft:"slideFromLeft",slideFromRight:"slideFromRight",slideFromBottom:"slideFromBottom",slideFromTop:"slideFromTop",slideOutFromLeft:"slideOutFromLeft",slideOutFromRight:"slideOutFromRight",slideOutFromBottom:"slideOutFromBottom",slideOutFromTop:"slideOutFromTop",pushFromLeft:"pushFromLeft",pushFromRight:"pushFromRight",pushFromBottom:"pushFromBottom",pushFromTop:"pushFromTop",moveFromLeft:"moveFromLeft",moveFromRight:"moveFromRight",moveFromBottom:"moveFromBottom",moveFromTop:"moveFromTop",moveOutFromLeft:"moveOutFromLeft",moveOutFromRight:"moveOutFromRight",moveOutFromBottom:"moveOutFromBottom",moveOutFromTop:"moveOutFromTop"},bt={tap:"tap",drag:"drag",time:"time",voice:"voice"},gt={CENTER:"CENTER",TOP_LEFT:"TOP_LEFT",TOP_CENTER:"TOP_CENTER",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_CENTER:"BOTTOM_CENTER",BOTTOM_RIGHT:"BOTTOM_RIGHT",MANUAL:"MANUAL"},wt=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=3,Object(ht["fetchGetCloudApi"])(e,{timeout:1e4});case 3:if(n=t.sent,Object(l["k"])(n)){t.next=6;break}throw new Error("无法解析".concat(e,"的返回值:").concat(n));case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function xt(t,e){return"".concat(t,":").concat(e)}function yt(t){var e={};return t.forEach((function(t){var n=t.artboard;e[xt(n.fileType,n.guid)]=n})),e}function kt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Object(l["i"])(t)){var n=yt(t);(Object(l["i"])(e)?e:t).forEach((function(t){Ct(t.artboard,n)}))}}function Ct(t,e){return St.apply(this,arguments)}function St(){return St=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,o,a,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.pathInteraction,o=e.interactionInfo,i){t.next=6;break}return o.fetchState=c["a"].Success,o.errMsg=null,o.data=null,t.abrupt("return");case 6:return o.fetchState=c["a"].Fetching,o.errMsg=null,t.prev=8,t.next=11,wt(i);case 11:a=t.sent,s=e.fileType,It(a,e),Tt(a,s,n),o.data=a,o.fetchState=c["a"].Success,t.next=25;break;case 19:t.prev=19,t.t0=t["catch"](8),o.fetchState=c["a"].Error,o.errMsg=t.t0,o.data=null;case 25:case"end":return t.stop()}}),t,null,[[8,19]])}))),St.apply(this,arguments)}function Tt(t,e,n){return Ot.apply(this,arguments)}function Ot(){return Ot=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){var o,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=null===e||void 0===e?void 0:e.interactions,Object(l["i"])(o)){t.next=3;break}return t.abrupt("return");case 3:a=e.renderInteractions=[],o.forEach((function(t){if(Object(l["k"])(t)&&Object(l["i"])(t.interactions)){var e=t.renderInteractions=[];t.interactions.forEach((function(t){if(Object(l["k"])(t)){switch(t.trigger_type){case bt.tap:break;default:return}switch(t.type){case pt.goBack:case pt.closeCurrentOverlay:case pt.goBackAndCloseAllOverlay:case pt.goUrl:e.push(t);break;case pt.goToArtboard:case pt.overlay:case pt.replace:var r=t.toArtboard;if(!Object(l["j"])(r))return;var o=i[xt(n,r)];t.toArtboardItem=o,e.push(t);break;default:return}var a=t.transition,s=t.animationType;if(s&&!a)switch(a=t.transition={duration:.3,easing:"linear"},s){case vt.slideFromBottom:a.type="slide",a.fromSide="T";break;case vt.slideFromLeft:a.type="slide",a.fromSide="R";break;case vt.slideFromRight:a.type="slide",a.fromSide="L";break;case vt.slideFromTop:a.type="slide",a.fromSide="B";break;default:a.type="dissolve";break}}})),e.length>0&&(t.renderTapInteraction=e.find((function(t){return t.trigger_type===bt.tap})),a.push(t),t.mlIgnoreEvent=!1,t.mlIgnoreLeftSide=!1,t.mlIgnoreScene=!1)}}));case 5:case"end":return t.stop()}}),t)}))),Ot.apply(this,arguments)}function It(t,e){if(Object(l["k"])(t)){var n,r={artScale:null!==(n=pn(e.pageGuid,e.docGuid))&&void 0!==n?n:t.scale,fileType:null},i=t.interactions,o=t.artboardMap;switch(t.docGuid=e.docGuid,t.pluginPlatform){case"xd":r.fileType=a["r"].XD,Object(l["i"])(i)&&i.forEach((function(t){Me(o,t,null,r)}));break;case"figma":r.fileType=a["r"].FIGMA,Me(o,o,null,r),Object(l["i"])(i)&&i.forEach((function(t){t.reactions=t.interactions,delete t.interactions,Me(o,t,null,r)}));break;case"sketch":r.fileType=a["r"].SKETCH;var s={};if(Object(l["i"])(i)&&i.forEach((function(t){s[t.guid]=t})),Object(l["k"])(o)){var c=["boundsInParent","globalBounds","frame","globalDrawBounds","globalBounds","boundsInArtboard","boundSameWithArtboard"],u=function t(e,n){var i;Me(o,e,n,r),null===(i=e.layers)||void 0===i||i.forEach((function(n){n&&(n.parentNode=e,t(n,e))}));var a=s[e.guid];a&&c.forEach((function(t){a[t]=e[t]}))};u(o,null)}break;default:throw new Error("lost pluginPlatform")}}}function At(t,e){var n=new B(t.maxRect.x-t.rect.x,t.maxRect.y-t.rect.y),r=new B(e.maxRect.x-e.rect.x,e.maxRect.y-e.rect.y);return r.x-=n.x,r.y-=n.y,r}function Ft(t,e,n,r,i,o){var c,l=null===e||void 0===e?void 0:e.renderTapInteraction;if(!l)return null;var u,h,f=!1,m=!1;switch(l.type){case pt.goToArtboard:case pt.overlay:c=!1;break;case pt.goBack:case pt.goBackAndCloseAllOverlay:case pt.closeCurrentOverlay:c=!0;break;case pt.goUrl:m=!0;break;default:return null}var p=!0;if(u=Object(s["a"])({},e.boundsInArtboard),c||m)h=Object(s["a"])(Object(s["a"])({},u),{},{width:1,height:1}),h.x+=80+u.width,h.y=h.y+Math.round(u.height/2)-40;else{if(!l.toArtboardItem)return;if(null!==o&&void 0!==o&&o.inSection&&l.toArtboardItem.topSectionId!==o.topSectionId)return;var v=l.toArtboardItem.pageGuid||l.toArtboardItem.docGuid;if(p=r===v,h=Object(s["a"])({},l.toArtboardItem.boundsInParentForList),h.x-=n.x,h.y-=n.y,!p){var b=t.find((function(t){return t.guid===r||t.docGuid===r})),g=t.find((function(t){return t.guid===v||t.docGuid===v}));if(!b)return;if(null!=g){var w=At(b,g);h.x-=w.x,h.y-=w.y}else f=!0,h=Object(s["a"])(Object(s["a"])({},u),{},{width:1,height:1}),h.x+=80+u.width,h.y=h.y+Math.round(u.height/2)-40}}var x=i?0:a["b"],y={width:20,height:20},k=y.width,C=u.x+u.width,S=u.y+x,T=S+Math.round(u.height/2),O=h.x-k,I=h.y+x-5,A=I+Math.round(h.height/2),F=Math.abs(O-C)<y.width;F&&Math.abs(A-T)<2*y.height&&(T=S+Math.round(2*u.height/3)),F&&Math.abs(A-T)<2*y.height&&(A=I+Math.round(h.height/3));var j,_,M,L,D=O-C,P=A-T,N=D>0?1:-1,E=P>0?1:-1;if(1===N)_=T+E*P*.2,j=C+.3*D,L=A-.1*E*P,M=C+.66*D;else{var R=Math.abs(D),V=Math.abs(P);R=Math.max(.3*R,200),V=Math.max(.1*R,80),j=C+R,_=T+E*V,M=O-R,L=A-E*V}var H=(new d["a"]).set(u.x,u.y+x,u.width,u.height),U={start:new B(C,T),p1:new B(j,_),p2:new B(M,L),end:new B(O+1,A)},$=m?"link":f?"otherpage":c?"back":"go",G=$+"_default",W=Object(s["a"])(Object(s["a"])({},y),{},{x:O,y:A-k/2,href:i?void 0:Pt.urls[$],href_default:i?void 0:Pt.urls[G],img:i?Pt.imgs[$]:void 0,img_default:i?Pt.imgs[G]:void 0});return{isBack:c,isOtherPage:f,drawRect:it([(new d["a"]).set(H.x,H.y,H.width,H.height),(new d["a"]).set(U.start.x,U.start.y,1,1),(new d["a"]).set(U.p1.x,U.p1.y,1,1),(new d["a"]).set(U.p2.x,U.p2.y,1,1),(new d["a"]).set(U.end.x,U.end.y,1,1),(new d["a"]).set(W.x,W.y,W.width,W.height)]),nodeRect:H,curve:U,arrowIcon:W,sameParent:p}}function jt(t,e,n,r,i){var o=Ft(t,e,n,r,!1,i);if(!o)return null;var a=o.nodeRect,s=o.curve;return o.nodeRect="M ".concat(a.x," ").concat(a.y," \n  l 0 ").concat(a.height,"\n  l ").concat(a.width," 0\n  l 0 -").concat(a.height,"\n  l -").concat(a.width," 0\n  Z"),o.curve="M ".concat(s.start.x," ").concat(s.start.y,"\n  C ").concat(s.p1.x,",").concat(s.p1.y,"\n    ").concat(s.p2.x,",").concat(s.p2.y,"\n  ").concat(s.end.x," ").concat(s.end.y),o}var _t="#1886FF",Mt="#cdcdda",Lt={otherpage:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g  stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g  transform="translate(-827.000000, -471.000000)">\n              <g  transform="translate(827.000000, 471.000000)">\n                  <rect  fill="#1886FF" x="0" y="0" width="20" height="20" rx="4"></rect>\n                  <g  transform="translate(5.000000, 5.000000)" stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round">\n                      <path d="M3.18917988,0 L1.3,0 C0.582029825,3.53933586e-16 -3.09970593e-16,0.582029825 0,1.3 L0,8.7 C8.79259876e-17,9.41797017 0.582029825,10 1.3,10 L8.7,10 C9.41797017,10 10,9.41797017 10,8.7 L10,6.92115218 L10,6.92115218" ></path>\n                      <polyline  points="5.59135462 1.13732349e-13 10 1.13732349e-13 10 4.53043169"></polyline>\n                      <line x1="4.16417796" y1="5.7565608" x2="10" y2="1.13664457e-13" ></line>\n                  </g>\n              </g>\n          </g>\n      </g>\n  </svg>',link:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-899.000000, -471.000000)">\n              <g transform="translate(899.000000, 471.000000)">\n                  <rect fill="#1886FF" x="0" y="0" width="20" height="20" rx="4"></rect>\n                  <path d="M13.0932433,4 C14.2116336,4.06761548 15.2120028,4.61417394 15.7234275,5.83688719 C16.2517123,7.07650431 16.0100501,8.23723671 15.1108418,9.24019965 C14.4645359,9.93889294 13.7676495,10.6037785 13.0932433,11.2630294 C12.8066207,11.5503952 12.3289163,11.5672991 12.076014,11.2968372 C11.8231117,11.0263752 11.8399719,10.6488555 12.1603148,10.3445858 C12.8234809,9.67970027 13.5035071,9.01481472 14.1610531,8.33865993 C15.1445622,7.31879311 14.7061981,5.70165623 13.3461457,5.34667496 C12.7672804,5.19454014 12.2277554,5.29596336 11.8006315,5.70165623 C11.1037451,6.34963791 10.440579,7.0483312 9.7493127,7.69067825 C9.59757131,7.82590921 9.36152914,7.9442363 9.17044739,7.92733243 C8.6590227,7.89352469 8.40612039,7.27935075 8.76580368,6.90746561 C9.53013069,6.10734911 10.2944577,5.34104034 11.1093652,4.59163544 C11.5814495,4.15213483 12.2446156,4 13.0932433,4 L13.0932433,4 Z M4,12.9308779 C4,12.0800498 4.30348278,11.3306449 4.89920824,10.716471 C5.56237432,10.0346815 6.2255404,9.36979599 6.89994658,8.71054507 C7.22028952,8.38937154 7.61369312,8.37246767 7.8834556,8.64292959 C8.15321807,8.93029537 8.13635791,9.29091126 7.79915482,9.61208479 C7.1528489,10.2600665 6.51216303,10.8855097 5.88271726,11.5334913 C5.1015301,12.3336078 5.06780979,13.4041863 5.78155633,14.1366873 C6.47844272,14.8353806 7.61369312,14.8353806 8.32743966,14.1366873 C8.99060574,13.4887056 9.61443146,12.8463586 10.2607374,12.1983769 C10.6485209,11.8095879 11.2442464,11.9617227 11.3454073,12.4688388 C11.3791276,12.6547814 11.311687,12.9308779 11.1768058,13.0661089 C10.4630592,13.8155138 9.76617285,14.5649187 8.98498569,15.2410735 C8.03519699,16.0749977 6.93366689,16.2102287 5.77593628,15.7031126 C4.69688639,15.2410735 4,14.1535912 4,12.9308779 L4,12.9308779 Z M12.6380192,8.06256339 C12.6042989,8.14708274 12.5537184,8.29921757 12.4356973,8.41754465 C11.1318454,9.74731575 9.83923352,11.0545484 8.51852142,12.3674156 C8.24875894,12.6378775 7.83849518,12.6209736 7.58559287,12.3674156 C7.31583039,12.0969537 7.33269055,11.7363378 7.61931317,11.4320681 L11.4802886,7.55544729 C11.6826104,7.35260085 11.9411328,7.2680815 12.2277554,7.38640859 C12.5031379,7.50473568 12.621159,7.69067825 12.6380192,8.06256339 Z" fill="#FFFFFF" fill-rule="nonzero"></path>\n              </g>\n          </g>\n      </g>\n  </svg>',back:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-827.000000, -447.000000)">\n              <g transform="translate(827.000000, 447.000000)">\n                  <rect fill="#1886FF" x="0" y="0" width="20" height="20" rx="4"></rect>\n                  <g transform="translate(5.000000, 3.999689)" stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round">\n                      <polyline transform="translate(2.988418, 2.988418) rotate(-45.000000) translate(-2.988418, -2.988418) " points="1.01650178 5.1015487 0.875287378 0.875287378 5.1015487 1.01650178"></polyline>\n                      <path d="M0.685919732,3.01908886 L6.50938891,3.01908886 C8.43720018,3.01908886 10,4.58188868 10,6.50969995 C10,8.43751123 8.43720018,10.000311 6.50938891,10.000311 L2.06828362,10.000311 L2.06828362,10.000311"></path>\n                  </g>\n              </g>\n          </g>\n      </g>\n  </svg>',go:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-807.000000, -392.000000)">\n              <g transform="translate(807.000000, 392.000000)">\n                  <path d="M0,0 L16,0 C18.209139,-4.05812251e-16 20,1.790861 20,4 L20,16 C20,18.209139 18.209139,20 16,20 L0,20 L0,20 L0,0 Z" fill="#1886FF" transform="translate(10.000000, 10.000000) scale(-1, 1) translate(-10.000000, -10.000000) "></path>\n                  <polyline stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round" transform="translate(8.000000, 10.000000) scale(-1, 1) rotate(-45.000000) translate(-8.000000, -10.000000) " points="4 14 4 6 12 6"></polyline>\n              </g>\n          </g>\n      </g>\n  </svg>',flowStartIcon:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="16px" height="26px" viewBox="0 0 16 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-232.000000, -323.000000)">\n              <g transform="translate(240.000000, 336.000000) scale(-1, 1) translate(-240.000000, -336.000000) translate(232.000000, 323.000000)">\n                  <path d="M0,0 L16,0 L16,26 L4,26 C1.790861,26 2.705415e-16,24.209139 0,22 L0,0 L0,0 Z" fill="#1886FF" transform="translate(8.000000, 13.000000) scale(-1, 1) translate(-8.000000, -13.000000) "></path>\n                  <path d="M8.04115209,9 L12,12.8990659 L12,13.7290307 L11.012,13.729 L11.0126751,16.7147272 L9.01944469,16.7147272 L9.019,13.729 L7.026,13.729 L7.02621423,16.7147272 L5.03298378,16.7147272 L5.032,13.729 L4,13.7290307 L4,12.8990659 L8.04115209,9 Z" fill="#FFFFFF" transform="translate(8.000000, 12.857364) scale(-1, 1) translate(-8.000000, -12.857364) "></path>\n              </g>\n          </g>\n      </g>\n  </svg>',dev:'<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12.4 7.3999L11.2 14.5999" stroke="#22AB42" stroke-width="1.2"/>\n<path d="M14.7998 7.3999L18.3998 10.6726L14.7998 14.5999" stroke="#22AB42" stroke-width="1.2"/>\n<path d="M7.6 7.3999L4 10.6726L7.6 14.5999" stroke="#22AB42" stroke-width="1.2"/>\n</svg>'};function Dt(t){return t=btoa(t),"data:image/svg+xml;base64,".concat(t)}var Pt={urls:{},imgs:{},sizes:{}};function Nt(t){var e=new Image;Pt.imgs[t]=e,e.onload=function(e){var n,r,i=Pt.sizes[t],o=e.target;i.width=null!==(n=o.naturalWidth)&&void 0!==n?n:o.width,i.height=null!==(r=o.naturalHeight)&&void 0!==r?r:o.height},e.src=Pt.urls[t]}function Et(t){var e=Lt[t];e&&(e=e.replace(new RegExp(_t,"ig"),Mt),Lt["".concat(t,"_default")]=e)}function Rt(t){Pt.urls[t]=Dt(Lt[t]),Pt.sizes[t]=new q}function Vt(t){if(!t)return null;if(!t.flowStart)return null;var e=t.docName,n=t.flowName,r=t.fileType,i=t.pageName;return"原型起始画板\n来自文档: ".concat(e).concat(a["r"].getFileExt(r)).concat(Object(l["j"])(i)?"/".concat(i):"").concat(Object(l["j"])(n)?"\n自定义标签名: ".concat(n):"")}["otherpage","go","back","link"].forEach((function(t){Et(t)})),Object.keys(Lt).forEach((function(t){Rt(t),Nt(t)}));var Bt=n("43c1");function Ht(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.width<=n||e.height<=n)r?t.fillRect(e.x,e.y,e.width,e.height):t.strokeRect(e.x,e.y,e.width,e.height);else{if(t.beginPath(),"function"===typeof t.roundRect)t.roundRect(e.x,e.y,e.width,e.height,n);else{var i=new B(e.x+n,e.y),o=new B(e.x+e.width,e.y),a=new B(e.x+e.width,e.y+e.height),s=new B(e.x,e.y+e.height),c=new B(e.x,e.y);t.moveTo(i.x,i.y),t.arcTo(o.x,o.y,a.x,a.y,n),t.arcTo(a.x,a.y,s.x,s.y,n),t.arcTo(s.x,s.y,c.x,c.y,n),t.arcTo(c.x,c.y,i.x,i.y,n)}r?t.fill():t.stroke()}}var Ut=new Map;function $t(t,e,n){var r="".concat(e,":").concat(n),i=Ut.get(r);if(null!=i)return i;var o=t.measureText(n),a=o.width,s=o.fontBoundingBoxAscent,c=o.fontBoundingBoxDescent,l=s+c;return("number"!==typeof l||isNaN(l))&&(l=e),i={width:a,height:l},Ut.set(r,i),i}function Gt(t,e,n,r){var i;if((null!==(i=null===n||void 0===n?void 0:n.length)&&void 0!==i?i:0)<1)return{text:"",maxHeight:0};t.font="".concat(e,"px Arial");var o=".",a=$t(t,e,o).width,s=0,c=0;r-=Math.ceil(3*a);for(var l=0,u=n.length;l<u;l++){var d=n[l],h=$t(t,e,d);if(s+=h.width,c=Math.max(c,h.height),s>=r)return l<u-1?{text:n.substring(0,l)+"...",maxHeight:c}:{text:n.substring(0,l),maxHeight:c}}return{text:n,maxHeight:c}}function Wt(t,e,n,r){try{t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high"}catch(i){}}function zt(t,e,n){var r;e.guid||(e.guid=e.id),Kt(e);var i=e.x,o=e.y,a=e.width,s=e.height;if(!e.absoluteBoundingBox){if(n){var l=n.globalBounds,u=l.x,d=l.y;i+=u,o+=d}e.absoluteBoundingBox=e.absoluteRenderBounds={x:i,y:o,width:a,height:s}}if(e.globalBounds=e.absoluteBoundingBox,e.globalDrawBounds=null!==(r=e.absoluteRenderBounds)&&void 0!==r?r:e.absoluteBoundingBox,e.boundsInParent=t==e?e.absoluteBoundingBox:{x:i,y:o,width:a,height:s},e.blendMode){var h=c["e"][e.blendMode];h&&(e.blendMode=h)}se(t,e),Qt(t,e),qt(e,n),ce(e),ie(e),oe(e),le(e),ue(e),te(e),ee(t,e)}var Yt={isMask:!1,layoutAlign:"INHERIT",constrainProportions:!1,layoutPositioning:"AUTO",layoutGrow:0,blendMode:"PASS_THROUGH"},Xt=Object.keys(Yt);function Kt(t){Xt.forEach((function(e){void 0===t[e]&&(t[e]=Yt[e])}));var e=t.textSegments,n=Object(l["i"])(e);if(n&&e.length>0){var r=e[0];r&&de.forEach((function(e){void 0===t[e]&&(t[e]=r[e])}))}}function qt(t,e){if(e&&t.isMask){t.mlIgnoreScene=!0;var n=e.children;if(n&&!(n.length<1))for(var r=!1,i=t.absoluteBoundingBox,o=0,a=n.length;o<a;o++){var s=n[o];if(s!==t){if(r){if(s.isMask)break;if(!s.markedForExport){var c=s.absoluteBoundingBox,l=Object(d["d"])(c,i);l&&(Object(d["g"])(l,c)||(c.x=l.x,c.y=l.y,c.width=l.width,c.height=l.height))}}}else r=!0}}}function Jt(t){if(!t)return null;var e;while(null!=(e=t.parentNode)){var n=e,r=n.clipsContent;if(r)return e;t=e}return null}function Qt(t,e){var n;if(!e.markedForExport){var r=null!==(n=Jt(e))&&void 0!==n?n:t,i=e.absoluteBoundingBox,o=Object(d["d"])(i,r.absoluteBoundingBox);o&&(Object(d["g"])(o,i)||(i.x=o.x,i.y=o.y,i.width=o.width,i.height=o.height))}}function Zt(t){switch(t){case"BOTTOM":case"TOP":case"RIGHT":return t=t.substring(0,1),"B"===t?t="T":"T"===t&&(t="B"),t;default:return"L"}}function te(t){var e=t.reactions;if(Object(l["i"])(e)){var n=[];e.forEach((function(t){if(Object(l["k"])(t)){var e=t.action,r=t.trigger;if(Object(l["k"])(e)&&Object(l["k"])(r)){var i=r.delay,o=r.type;switch(o){case"MOUSE_DOWN":case"MOUSE_UP":case"ON_CLICK":o=bt.tap;break;default:return void("number"!==typeof i&&(i=0))}var a,s=e.type,c=e.frameGuid,u=e.frameId,d=e.navigation,f=e.transition,m=e.overlayBackground,p=e.overlayBackgroundInteraction,v=e.overlayPositionType,b=e.url;if(Object(l["j"])(b)&&!/https?:\/\//i.test(b)&&(b="http://"+b),Object(l["k"])(m))try{m=Object(h["i"])(Object(h["a"])(m)).value}catch(B){}switch(s){case"BACK":s=pt.goBackAndCloseAllOverlay;break;case"CLOSE":s=pt.closeCurrentOverlay;break;case"URL":s=pt.goUrl;break;case"NODE":if(!Object(l["j"])(c))return;switch(d){case"NAVIGATE":s=pt.goToArtboard;break;case"OVERLAY":s=pt.overlay;break;case"SWAP":s=pt.replace;break;default:return}break;default:return}if(Object(l["k"])(f)){var g,w,x=f.type,y=f.easing,k=f.duration,C=f.direction,S=!1;switch(x){case"MOVE_IN":g=Zt(C),x="move";break;case"MOVE_OUT":g=Zt(C),x="move_out";break;case"PUSH":g=Zt(C),x="push";break;case"SLIDE_IN":g=Zt(C),x="slide";break;case"SLIDE_OUT":g=Zt(C),x="slide_out";break;default:a=null,x="dissolve";break}if(Object(l["k"])(y)){var T=y.type,O=y.easingFunctionCubicBezier;switch(T){case"CUSTOM_CUBIC_BEZIER":w="cubic-bezier(".concat(O.x1,",").concat(O.y1,",").concat(O.x2,",").concat(O.y2,")"),S=!0;break;case"CUSTOM_SPRING":case"GENTLE":case"QUICK":case"BOUNCY":case"SLOW":w="ease-in-out",S=!0;break;case"EASE_IN_BACK":var I=.58,A=-.25,F=1,j=.42;w="cubic-bezier(".concat(I,", ").concat(A,", ").concat(F,", ").concat(j,")"),S=!0;break;case"EASE_OUT_BACK":var _=0,M=.58,L=.42,D=1.25;w="cubic-bezier(".concat(_,", ").concat(M,", ").concat(L,", ").concat(D,")"),S=!0;break;case"EASE_IN_AND_OUT_BACK":var P=.58,N=-.25,E=.42,R=1.25;w="cubic-bezier(".concat(P,", ").concat(N,", ").concat(E,", ").concat(R,")"),S=!0;break;case"EASE_IN":case"EASE_IN_AND_OUT":case"EASE_OUT":case"LINEAR":w=T.toLowerCase().replace(/_/g,"-").replace(/-and/g,"");break}}x&&(a={type:x,duration:k,fromSide:g,customEasing:S,easing:w})}var V={trigger_type:o,type:s,delay:i,toArtboard:c,toArtboardFigmaId:u,transition:a,overlayBackground:m,overlayBackgroundInteraction:p,overlayPositionType:v};s===pt.goUrl&&(V.toUrl=b),n.push(V)}}})),n.length>0&&(t.interactions=n)}}function ee(t,e){var n=e.types={GraphicNode:1},r=t.sharedStyles;switch(e.type){case"FRAME":t===e?n.Artboard=1:n.Group=1,e.clipsContent||(n.GroupVisibleOutChild=1);break;case"GROUP":n.Group=1;break;case"LINE":n.Line=1;break;case"TEXT":n.Text=1,he(e,r);break;case"VECTOR":n.Path=1;break;case"COMPONENT":case"COMPONENT_SET":case"INSTANCE":n.Group=1,e.clipsContent||(n.GroupVisibleOutChild=1),"INSTANCE"===e.type&&(n.FigmaInstance=1,void 0===e.isExposedInstance&&(e.isExposedInstance=!1));break;case"BOOLEAN_OPERATION":n.Group=1;var i=e.children;(null===i||void 0===i?void 0:i.length)>0&&i.forEach((function(t){if(t){var e=t.fills;e&&e.length>0&&e.splice(0)}}));break;case"RECTANGLE":n.Rectangle=1;break}}function ne(t){if(t){var e=4;t.cssStyle={data:{},style:{},render:{},nameSize:{}};var n=t.fills;if(Object(l["i"])(n)){n=t.fills=n.map((function(t){var e,n=!(null===(e=t)||void 0===e||!e.fromPage);return t=re(t),t&&(t.fromPage=n),t})).filter((function(t){return!!t}));var r=function(e){var n,r=!(null===(n=e)||void 0===n||!n.fromPage);return e=Object(h["l"])(e,!1,!1,t,null),e&&(e.fromPage=r),e},i=t.cssStyle.data.background=n.map(r).filter((function(t){return!!t})),o=i.find((function(t){return t&&!t.fromPage}));if(!o){var s=r({value:4282400832});s&&i.push(s)}if(n=t.cssStyle.data.background,n.length>0){var u,f=[];n.forEach((function(t){switch(t.type){case a["s"].FillColor:var n=Object(h["j"])(t.color);f.push({color:n,image:"linear-gradient(0deg,".concat(n,",").concat(n,")"),render:function(t,r,i){t.fillStyle=n,Ht(t,(new d["a"]).set(i(r.x),i(r.y),i(r.width),i(r.height)),i(e))}});break;case a["s"].RadialGradientFill:case a["s"].DiamondGradientFill:u="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),f.push({image:u,scaleX:Object(c["jb"])(t.scaleX),scaleY:Object(c["jb"])(t.scaleY),startX:Object(c["jb"])(t.startX),startY:Object(c["jb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["jb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=this.scaleX,o=this.scaleY,a=this.startX,s=this.startY,c=this.colorStops,l=Math.round(i*n.width),u=Math.round(o*n.height),h=n.x+Math.round(a*n.width),f=n.y+Math.round(s*n.height),m=t.createRadialGradient(h,f,0,h,f,Math.max(l,u));c.forEach((function(t){m.addColorStop(t.stop,t.color)})),t.fillStyle=m,Ht(t,n,r(e))}});break;case a["s"].AngularGradientFill:u="conic-gradient(from ".concat(t.angle," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),f.push({image:u,angle:parseFloat(t.angle),startX:Object(c["jb"])(t.startX),startY:Object(c["jb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["jb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=this.colorStops,o=this.angle,a=this.startX,s=this.startY;a=n.x+a*n.width,s=n.y+s*n.height;var c=t.createConicGradient((o-90)*Math.PI/180,a,s);i.forEach((function(t){c.addColorStop(t.stop,t.color)})),t.fillStyle=c,Ht(t,n,r(e))}});break;case a["s"].LinearGradientFill:u="linear-gradient(".concat(t.angle,",").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),f.push({image:u,endPoints:t.endPoints,colorStops:t.colorStops.map((function(t){var e=Object(c["jb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=Object(Bt["a"])(this.endPoints,4),o=i[0],a=i[1],s=i[2],c=i[3],l=this.colorStops;o=Math.round(n.x+o*n.width),a=Math.round(n.y+a*n.height),s=Math.round(n.x+s*n.width),c=Math.round(n.y+c*n.height);var u=t.createLinearGradient(o,a,s,c);l.forEach((function(t){u.addColorStop(t.stop,t.color)})),t.fillStyle=u,Ht(t,n,r(e))}});break;case a["s"].ImageFill:break}}));var m=f.length;m>0&&(u=f.map((function(t,e){var n=0===e;return n&&t.color?t.color:t.image})).reverse().join(","),t.cssStyle.render.backgrounds=f,t.cssStyle.style.background=u)}}}}function re(t){var e,n;if(Object(l["i"])(t)){var r=[];return t.forEach((function(t){t=re(t),t&&r.push(t)})),r}if(!t.visible)return null;var i={blendMode:null!==(e=c["e"][t.blendMode])&&void 0!==e?e:t.blendMode};switch(t.type){case"SOLID":var o=t.color;if(!o)return null;i.value=Object(h["a"])(o,t.opacity),i.swatch=t.colorSwatch;break;case"IMAGE":return i.imageFill=!0,i;case"GRADIENT_LINEAR":var a=t.gradientStops,s=t.opacity,u=t.gradientParams;if(!a||!u)return null;var d=u.start,f=u.end;if(!d||!f)return null;"number"===typeof u.cssAngle&&(i.angle=Object(c["r"])(u.cssAngle,2)+"deg");var m=i.colorStops=[];a.forEach((function(t){m.push({stop:t.position,color:{value:Object(h["a"])(t.color,s),swatch:t.colorSwatch}})})),i.endPoints=[d[0],d[1],f[0],f[1]];break;case"GRADIENT_RADIAL":case"GRADIENT_ANGULAR":case"GRADIENT_DIAMOND":var p=t.gradientStops,v=t.opacity,b=t.gradientParams;if(!p||!b)return null;var g,w=b.radius,x=b.center;if(!w||!x)return;switch(t.type){case"GRADIENT_RADIAL":g="gradientRadialTransform",b.cssAngle=Object(c["r"])((null!==(n=b.rotation)&&void 0!==n?n:0)+90,2);break;case"GRADIENT_ANGULAR":var y,k;g="gradientAngularTransform";var C=p[0],S=null!==(y=null===C||void 0===C?void 0:C.position)&&void 0!==y?y:0;0!=S&&(p.forEach((function(t){t.position-=S})),b.cssAngle+=Object(c["r"])(360*S,2));var T=p[p.length-1],O=null!==(k=null===T||void 0===T?void 0:T.position)&&void 0!==k?k:1;O<1&&C&&(null===T||void 0===T?void 0:T.color)!=C.color&&p.push({position:1,color:C.color});break;case"GRADIENT_DIAMOND":g="gradientDiamondTransform";break}i[g]={rotate:b.cssAngle,scaleX:w[0],scaleY:w[1],endR:1,startR:0},i.startX=x[0],i.startY=x[1],i.endPoints=[0,0,0,0];var I=i.colorStops=[];return p.forEach((function(t){I.push({stop:t.position,color:{value:Object(h["a"])(t.color,v),swatch:t.colorSwatch}})})),i}return i}function ie(t){var e=t.rotation,n=t.markedForExport;null==e||0===e||n||(e=Object(c["r"])(e,2),e=-e,t.boxTransform={rotation:e,flippedHorizontally:!1,flippedVertically:!1})}function oe(t){var e,n,r,i=t.strokeWeight,o=t.strokeTopWeight,s=t.strokeBottomWeight,c=t.strokeLeftWeight,u=t.strokeRightWeight,d=t.strokeAlign,h=t.strokes,f=t.dashPattern,m=[];switch(d){case"INSIDE":e=a["lb"].Inside;break;case"OUTSIDE":e=a["lb"].Outside;break;default:e=a["lb"].Center;break}if(null!=o&&o===s&&o===c&&o===u?(n=o,r=null):(n=null!==i&&void 0!==i?i:o,null!=o&&(r=[o,u,s,c])),Object(l["i"])(h)&&h.length>0&&h.forEach((function(t){if(t&&t.visible){var i=re(t);i&&m.push({stroke:i,strokePosition:e,strokeEnabled:!0,strokeWidth:n,strokeWidths:r,strokeDashArray:f})}})),m.length>0){var p=m[0];t.strokeArr=m,t.stroke=p.stroke,t.strokeEnabled=p.strokeEnabled,t.strokeWidth=p.strokeWidth,t.strokeWidthArr=p.strokeWidthArr,t.strokePosition=p.strokePosition,t.strokeDashArray=p.strokeDashArray}}function ae(t,e){if(!t||!e)return null;var n=t[e];return n?n.name:null}function se(t,e){var n=t.sharedStyles;e.fillSN=ae(n,e.fillStyleId),e.strokeSN=ae(n,e.strokeStyleId),e.effectSN=ae(n,e.effectStyleId),e.charSN=ae(n,e.textStyleId)}function ce(t){var e=t.fills;if(e&&0!==e.length){var n=[];e.forEach((function(t){t&&t.visible&&(t=re(t),t&&n.unshift({fill:t,fillEnabled:!0}))})),n.length>0&&(t.fillArr=n,t.fillEnabled=!0,t.fill=n[0].fill)}}function le(t){var e=t.cornerRadius,n=t.bottomLeftRadius,r=t.bottomRightRadius,i=t.topLeftRadius,o=t.topRightRadius;0!==e&&("number"===typeof e&&(void 0===n&&(n=e),void 0===r&&(r=e),void 0===i&&(i=e),void 0===o&&(o=e)),void 0!==n&&void 0!==r&&void 0!==i&&void 0!==o&&(t.cornerRadii={bottomLeft:n,bottomRight:r,topLeft:i,topRight:o}))}function ue(t){var e=t.effects;if(Object(l["i"])(e)&&0!==e.length){var n=[],r=[],i=[];e.forEach((function(t){if(t&&t.visible)switch(t.type){case"BACKGROUND_BLUR":t.radius>=0&&n.push({visible:!0,blurAmount:t.radius,isBackgroundEffect:!0});break;case"LAYER_BLUR":t.radius>=0&&n.push({visible:!0,blurAmount:t.radius,isBackgroundEffect:!1});break;case"DROP_SHADOW":var e,o,a,s,l;r.push({visible:!0,x:null!==(e=null===(o=t.offset)||void 0===o?void 0:o.x)&&void 0!==e?e:0,y:null!==(a=null===(s=t.offset)||void 0===s?void 0:s.y)&&void 0!==a?a:0,blur:t.radius,spread:t.spread,showShadowBehindNode:t.showShadowBehindNode,color:{value:Object(h["a"])(t.color),swatch:t.colorSwatch},blendMode:null!==(l=c["e"][t.blendMode])&&void 0!==l?l:t.blendMode});break;case"INNER_SHADOW":var u,d,f,m,p;i.push({visible:!0,x:null!==(u=null===(d=t.offset)||void 0===d?void 0:d.x)&&void 0!==u?u:0,y:null!==(f=null===(m=t.offset)||void 0===m?void 0:m.y)&&void 0!==f?f:0,blur:t.radius,spread:t.spread,showShadowBehindNode:t.showShadowBehindNode,color:{value:Object(h["a"])(t.color),swatch:t.colorSwatch},blendMode:null!==(p=c["e"][t.blendMode])&&void 0!==p?p:t.blendMode});break}})),n.length>0&&(t.blurs=n),r.length>0&&(t.shadowArr=r,t.shadow=r[0]),i.length>0&&(t.innerShadowArr=i,t.innerShadow=i[0])}}var de=["fontSize","fontName","fontWeight","textDecoration","textCase","lineHeight","letterSpacing","fills","textStyleId","fillStyleId","listOptions","indentation","hyperlink"];function he(t,e){var n,r,i,o;t.text=t.characters;var a=t.lineHeight;if(a)if("number"===typeof a)t.lineSpacing=a;else switch(a.unit){case"AUTO":t.lineSpacing=0;break;case"PIXELS":t.lineSpacing=a.value;break;case"PERCENT":t.lineSpacing=Object(c["r"])(a.value,3)+"%";break}else t.lineSpacing=0;t.textAlign=null!==(n=null===(r=t.textAlignHorizontal)||void 0===r?void 0:r.toLowerCase())&&void 0!==n?n:"left";var s=null!==(i=null===(o=t.textAlignVertical)||void 0===o?void 0:o.toLowerCase())&&void 0!==i?i:"top";"top"!==s&&(t.textVerticalAlign=s);var u=[],d=t.charSN,f=t.textSegments,m=t.fillSN;Object(l["i"])(f)&&f.forEach((function(n){var r,i=null!==(r=re(n.fills))&&void 0!==r?r:[];i.reverse();var o={fill:i.length>0?i[i.length-1]:{},fills:i,fillSN:m,figmaFills:i.length>0?i.map((function(e){return Object(h["l"])(e,!0,!1,t,null)})):void 0,textCase:n.textCase,charSpacing:n.letterSpacing&&0!==n.letterSpacing.value?"PIXELS"===n.letterSpacing.unit?n.letterSpacing.value:n.letterSpacing.value+"%":null,fontFamily:n.fontName.family,fontWeight:n.fontWeight,fontItalic:/italic/i.test(n.fontName.style)?"italic":"normal",fontSize:n.fontSize,underline:"UNDERLINE"===n.textDecoration,strikethrough:"STRIKETHROUGH"===n.textDecoration,charSN:ae(e,n.textStyleId)};null!=d&&o.charSN===d&&(o.charSN=void 0),o.text=n.characters,o.length=n.characters.length,null==o.fontWeight&&(o.fontWeight=400),o.fontWeightCss=o.fontWeight.toString(),o.fontStyle=o.fontWeight.toString(),o.fontItalic?o.fontStyle+=" "+o.fontItalic:o.fontItalic="normal",u.push(o)})),t.styleRanges=u}function fe(t){switch(t){case"MIN":return a["B"].FlexStart;case"MAX":return a["B"].FlexEnd;case"CENTER":return a["B"].Center;case"SPACE_BETWEEN":return a["B"].SpaceBetween;case"SPACE_AROUND":return a["B"].SpaceAround;case"SPACE_EVENLY":return a["B"].SpaceEvenly;default:return t}}function me(t){switch(t){case"MIN":return a["x"].FlexStart;case"MAX":return a["x"].FlexEnd;case"CENTER":return a["x"].Center;case"SPACE_BETWEEN":return a["x"].SpaceBetween;case"SPACE_AROUND":return a["x"].SpaceAround;case"SPACE_EVENLY":return a["x"].SpaceEvenly;case"AUTO":return null;default:return t}}function pe(t){switch(t){case"MIN":return a["y"].FlexStart;case"MAX":return a["y"].FlexEnd;case"CENTER":return a["y"].Center;case"BASELINE":return a["y"].Baseline;default:return t}}function ve(t){switch(t){case"WRAP_REVERSE":return a["E"].WRAP_REVERSE;case"WRAP":return a["E"].WRAP;case"NO_WRAP":return a["E"].NO_WRAP;default:return t}}function be(t){switch(t){case"MIN":return a["z"].FlexStart;case"CENTER":return a["z"].Center;case"MAX":return a["z"].FlexEnd;case"STRETCH":return a["z"].Stretch;case"INHERIT":return a["z"].Inherit;default:return t}}function ge(t){switch(t){case"MIN":return a["C"].FlexStart;case"CENTER":return a["C"].Center;case"MAX":return a["C"].FlexEnd;case"STRETCH":return a["C"].Stretch;case"INHERIT":return a["C"].Inherit;default:return t}}function we(t){switch(t){case"AUTO":return a["D"].Static;case"ABSOLUTE":return a["D"].Absolute;case"FIXED":return a["D"].Fixed;case"RELATIVE":return a["D"].Relative;case"STICKY":return a["D"].Sticky;default:return t}}function xe(t){if(null==t)return!1;var e=t.inferredAutoLayout,n=t.layoutMode;return("HORIZONTAL"===n||"VERTICAL"===n)&&Object(l["k"])(e)}function ye(t){if(null==t)return!1;var e=t.layoutMode;return"GRID"===e}function ke(t,e){if(!t)return null;var n=t.paddingBottom,r=t.paddingLeft,i=t.paddingRight,o=t.paddingTop;if((null==n||null==r||null==i||null==o)&&xe(t)){var a,s,c,l,u=t.inferredAutoLayout;if(u)null!==(a=n)&&void 0!==a||(n=u.paddingBottom),null!==(s=r)&&void 0!==s||(r=u.paddingLeft),null!==(c=i)&&void 0!==c||(i=u.paddingRight),null!==(l=o)&&void 0!==l||(o=u.paddingTop)}var d=null===e||void 0===e?void 0:e(o,{isHorizintal:!1}),h=null===e||void 0===e?void 0:e(n,{isHorizintal:!1}),f=null===e||void 0===e?void 0:e(r,{isHorizintal:!0}),m=null===e||void 0===e?void 0:e(i,{isHorizintal:!0}),p=0!==o||0!==r||0!==n||0!==i;return{topOrigin:o,top:d,rightOrigin:i,right:m,bottomOrigin:n,bottom:h,leftOrigin:r,left:f,usePadding:p}}function Ce(t){if(t){var e=4;t.cssStyle={data:{},style:{},render:{},nameSize:{}};var n=t.fill,r=t.fillEnabled,i=t.fills=r&&Object(l["k"])(n)?[n]:[];if(Object(l["i"])(i)){var o=function(e){return e=Object(h["l"])(e,!1,!1,t,null),e.fromPage=!1,e},s=t.cssStyle.data.background=i.map(o).filter((function(t){return!!t})),u=s.find((function(t){return t&&!t.fromPage}));if(!u){var f=o({value:4282400832});f&&s.push(f)}if(i=t.cssStyle.data.background,i.length>0){var m,p=[];i.forEach((function(t){switch(t.type){case a["s"].FillColor:var n=Object(h["j"])(t.color);p.push({color:n,image:"linear-gradient(0deg,".concat(n,",").concat(n,")"),render:function(t,r,i){t.fillStyle=n,Ht(t,(new d["a"]).set(i(r.x),i(r.y),i(r.width),i(r.height)),i(e))}});break;case a["s"].RadialGradientFill:case a["s"].DiamondGradientFill:m="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),p.push({image:m,scaleX:Object(c["jb"])(t.scaleX),scaleY:Object(c["jb"])(t.scaleY),startX:Object(c["jb"])(t.startX),startY:Object(c["jb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["jb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=this.scaleX,o=this.scaleY,a=this.startX,s=this.startY,c=this.colorStops,l=Math.round(i*n.width),u=Math.round(o*n.height),h=n.x+Math.round(a*n.width),f=n.y+Math.round(s*n.height),m=t.createRadialGradient(h,f,0,h,f,Math.max(l,u));c.forEach((function(t){m.addColorStop(t.stop,t.color)})),t.fillStyle=m,Ht(t,n,r(e))}});break;case a["s"].AngularGradientFill:m="conic-gradient(from ".concat(t.angle," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),p.push({image:m,angle:parseFloat(t.angle),startX:Object(c["jb"])(t.startX),startY:Object(c["jb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["jb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=this.colorStops,o=this.angle,a=this.startX,s=this.startY;a=n.x+a*n.width,s=n.y+s*n.height;var c=t.createConicGradient((o-90)*Math.PI/180,a,s);i.forEach((function(t){c.addColorStop(t.stop,t.color)})),t.fillStyle=c,Ht(t,n,r(e))}});break;case a["s"].LinearGradientFill:m="linear-gradient(".concat(t.angle,",").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),p.push({image:m,endPoints:t.endPoints,colorStops:t.colorStops.map((function(t){var e=Object(c["jb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=Object(Bt["a"])(this.endPoints,4),o=i[0],a=i[1],s=i[2],c=i[3],l=this.colorStops;o=Math.round(n.x+o*n.width),a=Math.round(n.y+a*n.height),s=Math.round(n.x+s*n.width),c=Math.round(n.y+c*n.height);var u=t.createLinearGradient(o,a,s,c);l.forEach((function(t){u.addColorStop(t.stop,t.color)})),t.fillStyle=u,Ht(t,n,r(e))}});break;case a["s"].ImageFill:break}}));var v=p.length;v>0&&(m=p.map((function(t,e){var n=0===e;return n&&t.color?t.color:t.image})).reverse().join(","),t.cssStyle.render.backgrounds=p,t.cssStyle.style.background=m)}}}}window.addEventListener("error",(function(t){var e=t.filename;if(e){var n=e.match(/marklion_artboard_id=(\w+)/);if(n&&(n=n[1],n)){e=e.replace(/\\/g,"/");var r=e.indexOf("/res/");-1!==r&&(e=e.substr(r+1)),r=e.indexOf("?"),-1!==r&&(e=e.substr(0,r)),e=decodeURIComponent(e);var i=Se[n];i&&i(!1,"画板数据加载失败「".concat(e,"」"))}}}),!0),window.marklion_artboard=function(t,e){var n=null,r=null;if(arguments.length>2&&(n=arguments[0],t=arguments[1],e=arguments[2],arguments.length>3&&(r=arguments[3])),null!=t){var i=t._marklionBack,o=t._marklionCallId;if(i&&o){if(t._marklionBack=null,t._marklionCallId=null,Se[o]=null,Object(l["i"])(n)){var a=n;n={},a.forEach((function(t){if(Object(l["k"])(t)){var e=t.name;Object(l["j"])(e)&&(n[e.toLowerCase()]=t.value)}}))}else if(Object(l["k"])(n)){var s=n;n={},Object.keys(s).forEach((function(t){n[t.toLowerCase()]=s[t]}))}i(!0,{artboard:e,linked:n,sizeMap:r})}}};var Se={},Te=1;function Oe(t){return new Promise((function(e,n){var r=document.createElement("script"),i=function(t){t&&null!=t.parentNode&&setTimeout((function(){t&&null!=t.parentNode&&(t.parentNode.removeChild(t),t=null)}),200)};r._marklionBack=function(t,o){r._marklionBack=null,r._marklionCallId=null,t?e(o):n(o),i(r),r=null},r.addEventListener("error",(function(e){var n=e.target._marklionBack;n&&n(!1,"画板数据加载失败「".concat(t,"」"))})),r.addEventListener("load",(function(t){i(t.target)}));var o="marklion_".concat(Date.now(),"_").concat(Te++);r._marklionCallId=o,r.src=t+"?marklion_artboard_id="+o,Se[o]=r._marklionBack,document.body.appendChild(r)}))}function Ie(t,e,n,r,i){void 0===t.markedForExport&&(t.markedForExport=!1),null==t.mlOutputTime&&(t.mlOutputTime=Date.now());var o=null!==r&&void 0!==r?r:n;if(n){var a,s,u,d,h,f,m,p,v,b,g,w,x,y,k,C,S,T,O,I;t.cid=n.cid,null!==(a=t.parentId)&&void 0!==a||(t.parentId=n.parentId),t.comments=n.comments,t.replies=n.replies,t.commentUpdateTime=n.commentUpdateTime,null!==(s=t.versionCount)&&void 0!==s||(t.versionCount=n.versionCount);var A=o.boundsInParent||o.frame,F=t.boundsInParent||t.frame;A&&F&&(c["V"].inCloudMode?(F.x=A.x,F.y=A.y,F.width=A.width,F.height=A.height):(F.x=A.x,F.y=A.y)),t.scale=o.scale,null!==(u=t.apm)&&void 0!==u||(t.apm=o.apm),null!==(d=t.flowStart)&&void 0!==d||(t.flowStart=null!==(h=o.flowStart)&&void 0!==h&&h),null!==(f=t.flowName)&&void 0!==f||(t.flowName=null!==(m=o.flowName)&&void 0!==m?m:""),null!==(p=t.sectionId)&&void 0!==p||(t.sectionId=null!==(v=o.sectionId)&&void 0!==v?v:null),null!==(b=t.sectionInfo)&&void 0!==b||(t.sectionInfo=null!==(g=o.sectionInfo)&&void 0!==g?g:null),null!==(w=t.topSectionId)&&void 0!==w||(t.topSectionId=null!==(x=o.topSectionId)&&void 0!==x?x:null),null!==(y=t.topSectionInfo)&&void 0!==y||(t.topSectionInfo=null!==(k=o.topSectionInfo)&&void 0!==k?k:null),null!==(C=t.pageGuid)&&void 0!==C||(t.pageGuid=o.pageGuid),null!==(S=t.docName)&&void 0!==S||(t.docName=o.docName),null!==(T=t.pageName)&&void 0!==T||(t.pageName=o.pageName),null!==(O=t.fileType)&&void 0!==O||(t.fileType=o.fileType),null!==(I=t.lastVersionId)&&void 0!==I||(t.lastVersionId=o.lastVersionId),t.resNodeCount=o.resNodeCount,t.pathData=o.pathData,t.pathPreview=o.pathPreview,t.pathPreviewWebp=o.pathPreviewWebp,t.pathInteraction=o.pathInteraction,t.pathPreviewMini=o.pathPreviewMini,t.updaterName=o.updaterName,t.updateTimeTimes=o.updateTimeTimes,t.docGuid=o.docGuid,t.interactionInfo=o.interactionInfo,t.boundsInParentForList=o.boundsInParentForList,o.name&&(t.name=o.name)}else c["V"].inCloudMode&&(t.interactionInfo={fetchState:c["a"].Normal,data:null,errMsg:null});c["V"].inCloudMode?(t.artboardPreviewPng=t.pathPreview,t.artboardPreviewWebp=t.pathPreviewWebp,t.artboardPreviewThumbPng=t.pathPreviewMini,t.artboardPreviewJS=null):t.artboardPath&&(t.artboardPath="res/".concat(encodeURIComponent(t.artboardPath)),t.artboardPreviewPng=t.artboardPath+"/preview.png",t.artboardPreviewWebp=null,t.artboardPreviewJS=t.artboardPath+"/preview.js",t.artboardPreviewThumbPng=t.artboardPath+"/preview.mini.png");var j=t.mlConfig;j||(j=t.mlConfig={});var _=j.scalesObj={};if(j.linked=e||{},j.sizeMap=i||{},Object(l["i"])(j.scales)){j.scales.forEach((function(t){_[t]=1}));var M=null;[2,3,1.5,1,4].forEach((function(t){null==M&&1===_[t]&&(M=t)})),j.previewScalePath=M?1===M?"":"@".concat(M,"x"):""}}var Ae=function(t){if(t){var e=t.guid;if(e)if(t.markedForExport){var n="".concat(c["V"].documentGuid,"_").concat(e),r=Object(c["K"])(n,!1);t.mlCustomName=Object(c["Q"])(r)}else t.mlCustomName=null}};function Fe(t,e,n){n.mlUserSelectDown=!1,e.push(n);var r=n.mlConfig;r||(r=n.mlConfig={});var i=t.artboardPath;if(Object(c["Y"])(t)){var o="".concat(n.exportPath).concat(t.mlConfig.previewScalePath,".png");r.pngPreview=Object(c["A"])(t,"".concat(i,"/png/"),o)}else if(Object(c["ab"])(t)){var a="".concat(n.exportPath).concat(t.mlConfig.previewScalePath,".webp");r.pngPreview=Object(c["A"])(t,"".concat(i,"/png/"),a)}else if(Object(c["Z"])(t)){var s="".concat(n.exportPath,".svg");r.svgPreview=Object(c["A"])(t,"".concat(i,"/svg/"),s)}else if(Object(c["X"])(t)){var l="".concat(n.exportPath,".pdf");r.pdfPreview=Object(c["A"])(t,"".concat(i,"/svg/"),l)}}function je(t){if(t){var e=t;while(null!=(e=e.parentNode))if(e.maskGroup)return e}}function _e(t,e){if(e!==t&&1!==e.types.Artboard&&!e.markedForExport){var n=je(e);if(n){var r=n.globalBounds,i=e.globalBounds;if(!Object(d["e"])(r,i)){var o=Object(d["d"])(r,i);o||(o=new d["a"]);var a=i.x-o.x,s=i.y-o.y,c=e.boundsInArtboard,l=e.boundsInParent;c&&(c.x-=a,c.y-=s,c.width=o.width,c.height=o.height),l&&(l.x-=a,l.y-=s,l.width=o.width,l.height=o.height),i.x=o.x,i.y=o.y,i.width=o.width,i.height=o.height}}}}function Me(t,e,n,r){var i,o;void 0===e.markedForExport&&(e.markedForExport=!1),r||(r=t.mlConfig);var s=null!==(i=null===(o=r)||void 0===o?void 0:o.fileType)&&void 0!==i?i:null;switch(null==s&&(s=a["r"].XD),s){case a["r"].FIGMA:zt(t,e,n);break;case a["r"].SKETCH:O(t,e,n);break;case a["r"].XD:switch(e.strokePosition){case"inside":e.strokePosition=a["lb"].Inside;break;case"outside":e.strokePosition=a["lb"].Outside;break;case"center":e.strokePosition=a["lb"].Center;break}var c=e.styleRanges;if(Object(l["i"])(c)&&c.length>0){var d=new Set;if(c.forEach((function(t){var e=t.fontStyle,n=t.charSN;if(d.add(null!==n&&void 0!==n?n:null),Object(l["j"])(e)){var r=/(?:\s|^)(thin|hairline|extralight|ultralight|light|regular|book|roman|medium|semibold|demibold|black|heavy|extrabold|ultrabold|bold|bolder|lighter|medium|\d+w?)(?:\s|$)/i.exec(e);if(r)switch(t.fontWeight=r[1],t.fontWeight.toLowerCase()){case"thin":case"hairline":t.fontWeightCss="100";break;case"ultralight":case"extralight":t.fontWeightCss="200";break;case"light":t.fontWeightCss="300";break;case"regular":case"book":case"roman":case"normal":t.fontWeight="normal",t.fontWeightCss="400";break;case"medium":t.fontWeightCss="500";break;case"semibold":case"demibold":t.fontWeightCss="600";break;case"bold":t.fontWeightCss="700";break;case"extrabold":case"ultrabold":t.fontWeightCss="800";break;case"black":case"heavy":t.fontWeightCss="900";break;default:/^\d+w$/i.test(t.fontWeight)?t.fontWeightCss=t.fontWeight.substr(0,t.fontWeight.length-1):t.fontWeightCss=t.fontWeight;break}else t.fontWeight="Normal",t.fontWeightCss="400";r=/(?:\s|^)(italic|oblique)(?:\s|$)/i.exec(e),t.fontItalic=r?r[1].toLowerCase():"normal"}else t.fontWeight="Normal",t.fontWeightCss="400",t.fontItalic="normal"})),!e.charSN&&1===d.size&&c.length>1){var h=Object(u["a"])(d)[0];h&&(e.charSN=h)}}_e(t,e);break}Le(t,e,r)}function Le(t,e,n){var r,i=t.globalBounds;r=e.markedForExport?e.globalDrawBounds:e.globalBounds;var o=r.x-i.x,a=r.y-i.y,s=r.width,l=r.height;if(c["V"].inCloudMode){e.boundsInArtboardOrigin=(new d["a"]).set(o,a,s,l);var u=n?n.artScale:1;(null==u||u<=0)&&(u=1),1!==u&&(o=Object(d["b"])(o,u,!1),a=Object(d["b"])(a,u,!1),s=Object(d["b"])(r.width,u,e.markedForExport),l=Object(d["b"])(r.height,u,e.markedForExport))}e.boundsInArtboard=(new d["a"]).set(o,a,s,l),e.boundSameWithArtboard=t!==e&&e.boundsInArtboard.isSame(t.boundsInArtboard)}function De(t,e,n,r,i){var o=n.children||n.layers;o.forEach((function(o){if(o)if(o.parentNode=n,Me(t,o,n),Ae(o),o.markedForExport){if(Fe(t,i,o),e.push(o),r.push(o),Object(l["i"])(o.children||o.layers)){var a=[];De(t,e,o,a,i),o.children&&(o.children=a),o.layers&&(o.layers=a)}}else Object(l["i"])(o.children||o.layers)&&De(t,e,o,r,i),o.children=o.layers=null}))}function Pe(t,e,n,r){if(!r.markedForExport){var i=r.types;if(1!==i.Text&&(t||!xe(r)&&!ye(r))&&(!t||!r.groupLayout)){var o=!0===e.sk25,s=r.opacity;if(0!=s||null!=r.shadow||null!=r.innerShadow||null!=r.fill&&r.fillEnabled||null!=r.stroke&&r.strokeEnabled){var c=F(r,o);if(t){if(!Object(d["f"])(e.boundsInArtboard,r.boundsInArtboard))return r.mlIgnoreEvent=!0,void(r.mlIgnoreLeftSide=!0);if((c||r.type===a["nb"].SymbolMaster)&&w(n,r))return void(r.mlIgnoreEvent=!0);if(c&&1==s&&null==r.shadow&&null==r.innerShadow&&(null==r.stroke||!r.strokeEnabled)&&(null==r.fill||!r.fillEnabled||r.fill.value))return void(r.mlIgnoreEvent=!0)}(!r.boundSameWithArtboard||!c&&(1!==i.Path||null!=r.fill&&r.fillEnabled))&&(1!==s||1!==i.Path&&r.type!==a["nb"].HotSpot&&1!==i.RepeatGrid&&(!c||r.maskGroup||i.FigmaInstance)&&(1!==i.SymbolInstance||r.maskGroup)||null!=r.shadow||null!=r.innerShadow||null!=r.fill&&r.fillEnabled||null!=r.stroke&&r.strokeEnabled)&&(1!==s||1!==i.Rectangle||null!=r.shadow||null!=r.innerShadow||null!=r.fill&&r.fillEnabled||null!=r.stroke&&r.strokeEnabled||!n||n.mlIgnoreEvent||!Object(d["g"])(n.boundsInArtboard,r.boundsInArtboard))||(r.mlIgnoreEvent=!0)}else r.mlIgnoreEvent=!0}}}function Ne(t,e,n,r,i,o){Me(n,t,i),Ae(t);var a=t.markedForExport;a&&Fe(n,r,t);var s=t.children||t.layers;if(Object(l["i"])(s))if(a){var c=[];De(n,e,t,c,r),t.children=c}else s.forEach((function(i){i.parentNode=t,e.push(i);try{Ne(i,e,n,r,t,o),Pe(o,n,t,i)}finally{i.mlIgnoreEvent&&!i.mlIgnoreLeftSide&&(i.mlIgnoreLeftSide=!i.children||0===i.children.length)}}))}function Ee(t){var e=0;while(null!=(t=t.parentNode))if(e++,t.types.Artboard)break;return e}var Re=function(t,e){return new Promise((function(n,r){if(t.isLoaded)return n(t);if(t.isFetching)return r(t);var i=t.artboard,s=t.artboardVerData,u=null!==s&&void 0!==s?s:i,h=!!s,f=u.pathData||u.artboardPath+"/data.js";t.isLoaded=!1,t.isFetching=!0,t.isError=!1;var m=t.loadedCache[f];Object(l["k"])(m)?requestAnimationFrame((function(){var e=m.childs,r=m.exportNodes,i=m.artboard;h?t.artboardVerData=i:t.artboard=i,t.childs=e,t.exportNodes=r,t.isLoaded=!0,t.isFetching=!1,t.isError=!1,n(t)})):Oe(f).then((function(r){var u,m,p=r.artboard,b=r.linked,g=r.sizeMap,w=null!==(u=null===(m=p.mlConfig)||void 0===m?void 0:m.fileType)&&void 0!==u?u:a["r"].XD,x=w===a["r"].SKETCH;x&&v(p),Ie(p,b,i,s,g);var y=[p],k=[];Ne(p,y,p,k,null,x),Object(d["h"])(p),h?t.artboardVerData=p:t.artboard=p,p.nodeDepthIndex=0;var C=[],S=y.length,T=S-1,O={interactions:[]};if(y.forEach((function(t,e){if(o["a"].set(t,"nodeDepthIndex",Ee(t)),Object(l["i"])(t.interactions)&&O.interactions.push(t),0!==e&&t.markedForExport&&!(e>=T)){for(var n=-1,r=e+1;r<=T;r++){var i=y[r];if(!i)break;if(i.markedForExport||!i.boundsInArtboard||!i.boundsInArtboard.isSame(t.boundsInArtboard))break;n=r}-1!==n&&C.push({from:e,to:n})}})),c["V"].inCloudMode){var I=yt(e);Tt(O,w,I)}C.length>0&&C.forEach((function(t){var e=t.from,n=t.to,r=y[e],i=y[n];y[e]=i,y[n]=r})),t.childs=y,t.exportNodes=k,t.isLoaded=!0,t.isFetching=!1,t.isError=!1,t.loadedCache[f]={childs:y,exportNodes:k,artboard:p},n(t)})).catch((function(e){t.isLoaded=!0,t.isError=!0,t.isFetching=!1,t.loadErrMsg=e,console.error("artboard load error",e),r(t)}))}))};function Ve(t){t=Object(u["a"])(t);var e={};return t.forEach((function(t){var n=e[t.docGuid];n||(n=e[t.docGuid]=[]),n.push(t)})),Object.keys(e).forEach((function(n){var r=e[n];if(1!==r.length||r[0].type!==a["K"].Document){var i=r[0],o=i.docGuid,s=i.docName,u=i.fileType,h=[],f=[],m=new Set,p=new Set;if(r.forEach((function(t){t.arts.forEach((function(t){var e,n=null!==(e=t.artboard.guid)&&void 0!==e?e:t.artboard.cid;m.has(n)||(m.add(n),h.push(t))})),Object(l["i"])(t.sections)&&t.sections.length>0&&t.sections.forEach((function(t){var e=t.guid;p.has(e)||(p.add(e),f.push(t))}))})),c["V"].inCloudMode){if(t.find((function(t){return t.type===a["K"].Document&&t.guid===o})))return;var v={arts:h,guid:o,name:s,fileType:u,docFullName:s,sortText:"".concat(s,":").concat(o),docGuid:o,docName:s,pageGuid:void 0,pageName:void 0,docSeparator:!0,sections:f,type:a["K"].Document};v.maxRect=Object(c["C"])(h,f),v.rect=(new d["a"]).set(0,0,v.maxRect.width,v.maxRect.height),t.push(v)}}else r[0].docSeparator=!0})),t.sort((function(t,e){return Object(c["hb"])(t.sortText,e.sortText)})),t}function Be(t,e,n,r){var i=r.orderDesc,o=r.sortType;if(o===a["n"].Date)t.sort((function(t,r){n===a["m"].Artboard&&(t=t.artboard,r=r.artboard);var o=t[e]>r[e]?1:-1;return i?-o:o}));else if(o===a["n"].ArtboardRect&&n===a["m"].Artboard){var s={},l=[];t.forEach((function(t){var e=t.artboard,n=e.docName,r=e.docGuid,i=e.pageGuid,o=e.pageName,a=i||r||"",c=o||n||"",u=s[a];u||(u=s[a]={arts:[],guid:a,name:c,fileType:e.fileType,docFullName:"".concat(n).concat(o?"/".concat(o):""),sortText:"".concat(n,":").concat(r).concat(o?"/".concat(o,":").concat(i):""),docGuid:r,docName:n},l.push(u)),u.arts.push(e)})),s=null;var u=function(t,e){var n=t.boundsInParent||t.frame,r=e.boundsInParent||e.frame;if(t.updateTimeTimes>0&&e.updateTimeTimes>0){var i=(new d["a"]).set(n.x,n.y,n.width,n.height),o=(new d["a"]).set(r.x,r.y,r.width,r.height);if(i.isOverlap(o)){var a=t.updateTimeTimes-e.updateTimeTimes;if(Math.abs(a)>1500){if(a>0)return 1;if(a<0)return-1}}}var s=n.y,c=r.y,l=s-c;if(l>100)return 1;if(l<-100)return-1;var u=n.x,h=r.x,f=u-h;return 0===f?0===l?0:l>0?1:-1:f>0?1:-1};l.sort((function(t,e){var n=Object(c["hb"])(t.sortText,e.sortText);return i?-n:n}));var h=0,f={};l.forEach((function(t){t.arts.sort((function(t,e){var n=u(t,e);return i?-n:n})),t.arts.forEach((function(t){f[t.cid]=h++}))})),t.sort((function(t,e){return f[t.artboard.cid]-f[e.artboard.cid]>0?1:-1}))}else t.sort((function(t,e){n===a["m"].Artboard&&(t=t.artboard,e=e.artboard);var r=Object(c["hb"])(t.name,e.name);return i?-r:r}))}function He(t,e,n,r){var i=r.orderDesc,o=r.sortType;t.sort((function(t,r){return n===a["m"].Artboard&&(t=t.artboard,r=r.artboard),t.rootId!==r.rootId||t.deepCount!==r.deepCount?0:(s=o===a["n"].Date?t[e]>r[e]?1:-1:Object(c["hb"])(t.name,r.name),i?-s:s);var s}))}function Ue(t,e){Object(l["i"])(t.subFolders)?(t.subFolders.forEach((function(t){null==t.customStatus&&(t.customStatus=a["q"].None),null==t.customStatusUpdateTimes&&(t.customStatusUpdateTimes=0)})),Be(t.subFolders,"updateTimes",a["m"].Folder,e)):t.subFolders=[],Object(l["i"])(t.subFiles)?(t.subFiles.forEach((function(t){t.name=t.fileName+t.fileExt})),Be(t.subFiles,"updateTimeTimes",a["m"].File,e)):t.subFiles=[]}function $e(t){var e,n;if(!t)return null;var r=t,i=r.parent;while(i)t=i,i=i.parent;return null!==(n=(e=t).name)&&void 0!==n||(e.name="Untitled Section"),t}function Ge(t){var e=t.artboardSections,n=t.artboards;Object(l["k"])(e)&&(Object.keys(e).forEach((function(t){var n=Object(c["wb"])(e[t]);Object(l["k"])(n)?e[t]=n:delete e[t]})),Object(l["i"])(n)&&n.forEach((function(t){var n,r;if(t){var i=t.sectionId,o=t.fileType;if(i){var a=e["".concat(o,":").concat(i)];t.sectionInfo=a||null}else t.sectionId=t.sectionInfo=null;t.topSectionInfo=$e(t.sectionInfo),t.topSectionId=null!==(n=null===(r=t.topSectionInfo)||void 0===r?void 0:r.guid)&&void 0!==n?n:null}})))}function We(t){c["V"].docsMinScale={},t.forEach((function(t){ze(t.artboard)}))}function ze(t){var e=t.boundsInParent,n=t.scale,r=t.docGuid,i=t.pageGuid;if(e&&(("number"!==typeof n||n<=0)&&(n=1),1!==n)){var o=i||r,a=c["V"].docsMinScale[o];null==a&&(a=1),a>n&&(c["V"].docsMinScale[o]=n)}}function Ye(t,e){var n=t.artboard,r=e.artboard,i=n.boundsInParentForList||n.boundsInParent||n.frame,o=r.boundsInParentForList||r.boundsInParent||r.frame;if(n.updateTimeTimes>0&&r.updateTimeTimes>0){var a=(new d["a"]).set(i.x,i.y,i.width,i.height),s=(new d["a"]).set(o.x,o.y,o.width,o.height);if(a.isOverlap(s)){var c=n.updateTimeTimes-r.updateTimeTimes;if(Math.abs(c)>1500){if(c>0)return 1;if(c<0)return-1}}}var l=i.y,u=o.y,h=l-u;if(h>100)return 1;if(h<-100)return-1;var f=i.x,m=o.x,p=f-m;return 0===p?0===h?0:h>0?1:-1:p>0?1:-1}function Xe(t,e){if(!Object(l["k"])(t))return!1;var n=t.fills,r=t.ver,i=t.types,o=t.fill;return 1===(null===i||void 0===i?void 0:i.Section)||!("number"!==typeof r||r<1)&&(e===a["r"].XD?Object(l["k"])(o):!(!Object(l["i"])(n)||n.length<1)&&null!=n.find((function(t){return!(!Object(l["k"])(t)||!t.visible)})))}function Ke(t,e){if(t.splice(0),c["V"].inCloudMode){var n={},r=function(e,r,i,o,s,c,l,u,d,h){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:void 0,m=n[o];return m||(m=n[o]={arts:[],guid:o,name:i,fileType:r,docFullName:d,sortText:h,docGuid:u,docName:l,pageGuid:c,pageName:s,sections:[],type:e,docSeparator:e===a["K"].Document,no_section_artboard:f},t.push(m),m)},i={},o=function(t,e,n,r){if(t){if(r){var i=t.findIndex((function(t){return t.guid===e}));-1!=i&&t.splice(i,1)}t.push(n)}};e.forEach((function(t){var e=t.artboard,n=e.docName,c=e.docGuid,d=e.pageGuid,h=e.pageName,f=e.sectionId,m=e.sectionInfo,p=e.topSectionId,v=e.topSectionInfo,b=e.updateTimeTimes,g=e.fileType,w=d||c||"",x=h||n||"",y="".concat(n).concat(h?"/".concat(h):""),k="".concat(n,":").concat(c).concat(h?"/".concat(h,":").concat(d):"");vn(e);var C,S=r(Object(l["j"])(d)?a["K"].Page:a["K"].Document,g,x,w,h,d,n,c,y,k);if(S.arts.push(t),p&&Object(l["k"])(v))C=r(a["K"].Section,g,v.name,v.guid,h,d,n,c,"".concat(y,"/").concat(v.name),"".concat(k,"/").concat(v.name,":").concat(v.guid)),C.arts.push(t);else{var T="".concat(S.guid,".").concat(a["db"]),O=a["eb"],I=S.type===a["K"].Page?S.guid:"",A=S.type===a["K"].Page?S.name:"";C=r(a["K"].Section,g,O,T,A,I,n,c,"".concat(y,"/").concat(O),"".concat(k,"/￿").concat(O,":").concat(T),!0),C.arts.push(t)}if(f&&Xe(m,g)){var F=i[w];F||(F=i[w]={});var j=!F[f],_=!j&&F[f]<b;if(j||_){var M;if(F[f]=b,1===(null===(M=m.types)||void 0===M?void 0:M.Section))return o(S.sections,f,m,_),void o(C.sections,f,m,_);var L=m.frame,D=m.parent,P=m.fills,N=m.page;Object(l["i"])(P)||(P=m.fills=[]);while(null!=D){var E,R=D,V=R.frame,B=R.fills;if(Object(l["k"])(V)&&(L.x+=V.x,L.y+=V.y),Object(l["i"])(B))(E=P).unshift.apply(E,Object(u["a"])(B));D=D.parent}Object(l["k"])(N)&&Object(l["i"])(N.fills)&&N.fills.forEach((function(t){Object(l["k"])(t)&&(t=Object(s["a"])(Object(s["a"])({},t),{},{fromPage:!0}),P.unshift(t))})),m.boundsInArtboard=m.boundsInParent=L,m.pageGuid=d,m.docGuid=c,m.types={Section:1},vn(m),g===a["r"].XD?Ce(m):ne(m),o(S.sections,f,m,_),o(C.sections,f,m,_)}}}));for(var h=t.reduce((function(t,e){var n,r=e.docGuid,i=e.pageGuid,o=e.type,s=e.no_section_artboard;if(o!==a["K"].Section)return t;if(!0===s)return t;var c="".concat(r,":").concat(i);return t[c]=(null!==(n=t[c])&&void 0!==n?n:0)+1,t}),{}),f=t.length-1;f>=0;f--){var m,p=t[f],v=p.docGuid,b=p.pageGuid,g=p.type,w=p.arts,x=p.sections,y=p.no_section_artboard;g===a["K"].Section&&y&&0===(null!==(m=h["".concat(v,":").concat(b)])&&void 0!==m?m:0)?t.splice(f,1):(w.sort(Ye),p.maxRect=Object(c["C"])(w,x),p.rect=(new d["a"]).set(0,0,p.maxRect.width,p.maxRect.height))}t.sort((function(t,e){return Object(c["hb"])(t.sortText,e.sortText)}))}else{if(e.forEach((function(t){var e=t.artboard;e.boundsInParentForList=e.boundsInParent})),c["V"].fileType==a["r"].SKETCH||c["V"].fileType==a["r"].FIGMA){var k={},C=c["V"].documentName,S=c["V"].documentGuid;return e.forEach((function(e){var n=e.artboard,r=n.pageGuid||"",i=n.pageName||C||"",o=k[r];o||(o=k[r]=[],t.push({arts:o,guid:r,name:i,fileType:c["V"].fileType,docFullName:i,sortText:"".concat(i,":").concat(r),docGuid:S,docName:C,type:n.pageGuid?a["K"].Page:a["K"].Document})),o.push(e)})),k=null,t.forEach((function(t){t.arts.sort(Ye),t.maxRect=Object(c["C"])(t.arts,null),t.rect=(new d["a"]).set(0,0,t.maxRect.width,t.maxRect.height)})),void t.sort((function(t,e){return Object(c["hb"])(t.sortText,e.sortText)}))}e.sort(Ye);var T=c["V"].documentName,O=c["V"].documentGuid,I=O||"",A=T||"",F=a["r"].XD,j={arts:e,guid:I,name:A,fileType:F,docFullName:"".concat(T).concat(a["r"].getFileExt(F)),sortText:"".concat(T,":").concat(O),docGuid:O,docName:T};j.arts.sort(Ye),j.maxRect=Object(c["C"])(j.arts,null),j.rect=(new d["a"]).set(0,0,j.maxRect.width,j.maxRect.height),t.push(j)}}function qe(t){var e=1;while(t){var n=t,r=n.opacity;null==r&&(r=1),e*=r,t=t.parentNode}return e}function Je(t){return null==t&&(t=1),Math.round(100*t)+"%"}function Qe(t){var e;if(!t)return"";var n=null!==(e=t.artboardCount+t.folderCount+t.fileCount)&&void 0!==e?e:0,r="number"===typeof t.fileCount,i="共 ".concat(n," 项");n>0&&(i+="：".concat(t.artboardCount," 画板，").concat(r?"".concat(t.fileCount," 文件，"):"").concat(t.folderCount," 文件夹"));var o="".concat(t.name,"\n").concat(i).concat(t.updateTimes?"\n最后更新：".concat(Object(l["c"])(t.updateTimes)):"");return o}function Ze(t){var e,n,r;return t?(null!==(e=t.artboardCount)&&void 0!==e?e:0)+(null!==(n=t.folderCount)&&void 0!==n?n:0)+(null!==(r=t.fileCount)&&void 0!==r?r:0):0}function tn(t){if(!t)return"";var e=(null===t||void 0===t?void 0:t.fileType)===a["L"].Url;return"".concat(t.name,"\n文件大小: ").concat(Object(c["zb"])(t.fileSize)).concat(e?"\n链接到: ".concat(t.webLoc):"","\n提交者: ").concat(t.updaterName,"\n提交于: ").concat(Object(l["c"])(t.updateTimeTimes)).concat(t.versionCount>0?"\n版本总数: ".concat(t.versionCount):"")}function en(t){if(!t)return"";var e=t.comments,n=t.replies,r=t.updaterName,i=t.name,o=t.updateTimeTimes,a=t.versionCount,s=(null!==e&&void 0!==e?e:0)+(null!==n&&void 0!==n?n:0);return"".concat(i,"\n提交者: ").concat(r,"\n提交于: ").concat(Object(l["c"])(o)).concat(a>0?"\n版本总数: ".concat(a):"").concat(s>0?"\n评论总数: ".concat(s):"")}function nn(t){if(!t)return"";var e=t.updaterName,n=t.updateTimeTimes,r=t.updateTimes;return"".concat(Object(l["b"])(null!==n&&void 0!==n?n:r)," ").concat(e)}function rn(t){if(!t)return"";var e=t.updateTimeTimes,n=t.updateTimes;return Object(l["b"])(null!==e&&void 0!==e?e:n)}function on(t,e){var n="";return e&&(n="".concat(t.updaterName," 提交于 ").concat(Object(l["b"])(t.updateTimeTimes),",")),"".concat(n,"双击查看 ").concat(t.name," 标注详情")}function an(t){if(!t)return"";var e=t.updaterName,n=t.name,r=t.updateTimeTimes,i=t.updaterEmail,o=t.lastVersionId;return"".concat(n,"\n提交者: ").concat(e).concat(i?"(".concat(i,")"):"","\n提交于: ").concat(Object(l["c"])(r)).concat(o>0?"\n画板版本: ".concat(o):"")}function sn(t){var e;if(!t)return"";var n=t.updaterName,r=t.name,i=t.updateTimeTimes,o=t.updaterEmail,a=t.lastVersionId,s=t.verId;return null!==(e=s)&&void 0!==e||(s=a),"".concat(r,"\n提交者: ").concat(n).concat(o?"(".concat(o,")"):"","\n提交于: ").concat(Object(l["c"])(i)).concat(s>0?"\n文件版本: ".concat(s):"")}function cn(t){return{artboard:t,childs:[],exportNodes:[],loadErrMsg:null,isLoaded:!1,isFetching:!1,isError:!1,mlUserSelectDown:!0,removed:!1,loadedCache:{},customStatus:a["i"].None,customStatusUpdateTimes:0,historyArtboards:null,artboardVerData:null}}function ln(t){var e=[];if(Object(l["i"])(t)&&t.length>0){var n=new Map,r=t.filter((function(t){return!t.parent}));t.forEach((function(t){if(t.parent){var e=t.parent.guid;n.has(e)||n.set(e,[]),n.get(e).push(t)}}));var i=function t(e,r){r.push(e);var i=n.get(e.guid)||[];i.forEach((function(e){return t(e,r)}))};r.forEach((function(t){return i(t,e)}))}return e}function un(t,e,n){if(!t)return!1;var r=t.docGuid,i=t.pageGuid,o=t.topSectionId;return n?null==o&&(r===e||i===e):r===e||i===e||o===e}function dn(t){var e=!1,n=a["db"];return Object(l["j"])(t)&&t.endsWith(".".concat(n))&&(t=t.substring(0,t.length-(n.length+1)),e=!0),{onlyNoSectionArtboard:e,filterDocumentGuid:t}}function hn(t){var e,n;if(Object(l["k"])(t)){var r=t.users,i=t.historyFiles,o=t.file,s=t.curVerId;Object(l["k"])(o)||console.error("error file data",t),Object(l["k"])(r)||(r=t.users={}),Object(l["i"])(i)||(i=t.historyFiles=[]);var u,d,h=function(t){if(t){var e=t.updaterId,n=r[e];n&&(t.updater=n,t.updaterName=n.nickName,t.updaterEmail=n.email)}};if(h(o),o.name="".concat(o.fileName).concat(null!==(e=o.fileExt)&&void 0!==e?e:""),null!==(n=o.verId)&&void 0!==n||(o.verId=o.lastVersionId),null==s||!(s>0))null!==(u=t.curVerId)&&void 0!==u||(t.curVerId=null!==(d=o.verId)&&void 0!==d?d:0);i.forEach((function(t){var e,n;h(t),o&&(t.name=o.name,t.fileExt=o.fileExt,t.fileName=o.fileName,t.parentId=o.parentId,t.versionCount=o.versionCount,null!==(e=t.viewUrl)&&void 0!==e||(t.viewUrl=Object(c["ob"])(null!==(n=o.viewUrl)&&void 0!==n?n:"",t.verId)),t.lastVersionId=t.verId,t.previewImage||(t.previewImage=t.fileType===a["L"].Url?null:t.previewPath),t.webLoc||(t.webLoc=t.fileType===a["L"].Url?t.previewPath:null))}))}}var fn={count:0,loaded:0,resolve:null,initdata:[],artboards:null,defaultArtboardGuid:"",permission:!0,fileInfo:null,renderMode:a["W"].Normal,folderNotFound:!1,folderInSpecify:!1,cloudNeedLogin:!1,cloudIsLogin:!1,cloudNickName:null,cloudUserEmail:null,cloudUserId:0,cloudUserIsDesigner:!1,cloudUserIsOwner:!1,cloudUserKey:null,cloudName:null,cloudKey:null,cloudVersion:null,cloudFolderUpdateTimes:null,cloudUserFolderSpecifyMemberAuthority:a["w"].ReadWrite,documents:[]};function mn(t){if(fn.loaded+=1,t&&t({current:fn.loaded,count:fn.count}),fn.loaded>=fn.count){var e=fn.resolve;e&&(fn.resolve=null,Ke(fn.documents,fn.initdata),e())}}function pn(t,e){var n=t||e||"",r=c["V"].docsMinScale[n];return null==r&&(r=1),r}function vn(t){var e,n=pn(t.pageGuid,t.docGuid),r=t.boundsInParent;r&&(e=Object(s["a"])({},r)),e&&1!==n&&n>0&&(e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.ceil(e.width*n),e.height=Math.ceil(e.height*n)),t.boundsInParentForList=e}function bn(t,e){var n={count:0,loaded:0,resolve:null,artboards:null,defaultArtboardGuid:"",permission:!0,fileInfo:null,folderNotFound:!1,folderInSpecify:!1,cloudNeedLogin:!1,cloudIsLogin:!1,cloudNickName:null,cloudUserEmail:null,cloudUserId:0,cloudUserIsDesigner:!1,cloudUserIsOwner:!1,cloudUserKey:null,cloudName:null,cloudKey:null,cloudVersion:null};fn.documents.splice(0),fn.initdata.splice(0),Object.keys(n).forEach((function(t){fn[t]=n[t]})),Object(l["k"])(t)||(t={artboards:[],guid:"No Data",name:"No Data",config:{guid:"",scales:[1,1.5,2,3,4],compressPNG:!0,supportFileProtocol:!1,platform:0}}),null==t.fileType&&(t.fileType=a["r"].XD);var r,i=t.cloudData;if(c["V"].docsMinScale={},c["V"].initTitle=document.title,c["V"].inCloudMode=Object(l["k"])(i),c["V"].fileType=t.fileType,c["V"].inCloudMode){var o;c["V"].documentGuid=i.folderId.toString(),c["V"].documentName=i.folderName,c["V"].config={guid:c["V"].documentGuid,scales:[1,1.5,2,3,4],compressPNG:!0,supportFileProtocol:!0,platform:0},fn.defaultArtboardGuid=i.artboardGuid,fn.parentFolder=i.parent,fn.currentFolderId=i.folderId;var s,u,d=i.fileInfo,h=null;if(d&&(h={file:d,users:i.users,historyFiles:i.fileVers,curVerId:i.verId},hn(h)),fn.fileInfo=h,fn.renderMode=null!==(o=i.renderMode)&&void 0!==o?o:a["W"].Normal,c["V"].cloudFolderId=i.folderId,fn.permission=i.permission,fn.folderNotFound=i.folderNotFound,fn.folderInSpecify=i.folderInSpecify,fn.cloudNeedLogin=i.needLogin,fn.cloudIsLogin=i.isLogin,fn.cloudNickName=i.nickName,fn.cloudUserEmail=i.email,fn.cloudUserId=i.userId,fn.cloudUserIsDesigner=i.isDesigner,fn.cloudUserIsOwner=!!i.isOwner,c["V"].userKey=fn.cloudUserKey=i.userKey,fn.cloudName=i.cloudName,c["V"].cloudKey=fn.cloudKey=i.cloudKey,fn.cloudVersion=i.cloudVersion,Object(l["k"])(i.folderInfo))r=i.folderInfo.artboards,fn.cloudFolderUpdateTimes=i.folderInfo.updateTimes,fn.cloudUserFolderSpecifyMemberAuthority=null!==(s=i.folderInfo.userSpecifyMemberAuthority)&&void 0!==s?s:a["w"].ReadWrite,fn.subFolders=i.folderInfo.folders,fn.subFiles=i.folderInfo.files,Ge(i.folderInfo);else fn.cloudUserFolderSpecifyMemberAuthority=null!==(u=i.usma)&&void 0!==u?u:a["w"].ReadWrite}else switch(c["V"].userKey=null,c["V"].cloudKey=null,c["V"].documentGuid=t.guid,c["V"].documentName=t.name,c["V"].config=t.config,t.fileType){case a["r"].SKETCH:case a["r"].FIGMA:var f=t.pages;r=[],Object(l["i"])(f)&&f.forEach((function(t){t&&Object(l["i"])(t.artboards)&&t.artboards.forEach((function(e){e&&(e.pageGuid=t.guid,e.pageName=t.name,r.push(e))}))}));break;default:r=t.artboards;break}Ue(fn,e),Object(l["i"])(r)||(r=[]),fn.artboards=r,fn.count=r.length}var gn={dataInit:bn,get inCloudMode(){return c["V"].inCloudMode},get documentName(){return c["V"].documentName},get documentGuid(){return c["V"].documentGuid},get config(){return c["V"].config},get permission(){return fn.permission},get cloudNeedLogin(){return fn.cloudNeedLogin},get cloudIsLogin(){return fn.cloudIsLogin},get cloudNickName(){return fn.cloudNickName},get cloudUserEmail(){return fn.cloudUserEmail},get cloudUserId(){return fn.cloudUserId},get cloudUserIsDesigner(){return fn.cloudUserIsDesigner},get cloudUserIsOwner(){return fn.cloudUserIsOwner},get cloudUserKey(){return fn.cloudUserKey},get cloudName(){return fn.cloudName},get cloudKey(){return fn.cloudKey},get cloudVersion(){return fn.cloudVersion},get documentArtboards(){return fn.initdata},get documents(){return fn.documents},cloud:{get folderInSpecify(){return fn.folderInSpecify},get folderNotFound(){return fn.folderNotFound},get defaultArtboardGuid(){return fn.defaultArtboardGuid},get parentFolder(){return fn.parentFolder},get currentFolderId(){return fn.currentFolderId},get subFolders(){return fn.subFolders},get subFiles(){return fn.subFiles},get renderMode(){return fn.renderMode},get fileInfo(){return fn.fileInfo},get folderUpdateTimes(){return fn.cloudFolderUpdateTimes},get userFolderSpecifyMemberAuthority(){return fn.cloudUserFolderSpecifyMemberAuthority}},allArtboardLoadChecked:function(t){return new Promise((function(e){0!==fn.count?(fn.resolve=e,fn.artboards.forEach((function(e){Ie(e),Object(d["h"])(e);var n=cn(e);if(fn.initdata.push(n),c["V"].inCloudMode)return ze(e),void mn(t);Re(n,[]).catch((function(t){var e=fn.initdata.findIndex((function(e){return e===t}));-1!==e&&fn.initdata.splice(e,1)})).finally((function(){mn(t)}))}))):e()}))}};n("e5b3");var wn,xn=n("7736"),yn={device:{android:/([ ;/)(,]|^)Android([ ;/)(,]|$)/i,iphone:/([ ;/)(,]|^)iPhone([ ;/)(,]|$)/i,ipad:/([ ;/)(,]|^)ipad([ ;/)(,]|$)/i,ios:/([ ;/)(,]|^)ios([ ;/)(,]|$)/i,macos:/([ ;/)(,]|^)mac os([ ;/)(,]|$)/i,windows:/([ ;/)(,]|^)Windows([ ;/)(,]|$)/i,linux:/([ ;/)(,]|^)linux([ ;/)(,]|$)/i},maker:{mot:/([ ;/)(,]|^)mot([ ;/)(,]|$)/i},browser:{uc:/([ ;/)(,]|^)(UCBrowser|UCWEB)([ ;/)(,]|$)/i,safria:/([ ;/)(,]|^)Safari([ ;/)(,]|$)/i,aol:/([ ;/)(,]|^)aol([ ;/)(,]|$)/i,arora:/([ ;/)(,]|^)Arora([ ;/)(,]|$)/i,qqbrowser:/([ ;/)(,]|^)QQBrowser([ ;/)(,]|$)/i,mqqbrowser:/([ ;/)(,]|^)mQQBrowser([ ;/)(,]|$)/i,chrome:/([ ;/)(,]|^)(?:chrome|CriOS)([ ;/)(,]|$)/i,qq:/([ ;/)(,]|^)qq([ ;/)(,]|$)/i,microMessenger:/([ ;/)(,]|^)MicroMessenger([ ;/)(,]|$)/i,sogouMobileBrowser:/([ ;/)(,]|^)sogouMobileBrowser([ ;/)(,]|$)/i,baidubrowser:/([ ;/)(,]|^)baidubrowser([ ;/)(,]|$)/i,weibo:/([ ;/)(,]|^)weibo([ ;/)(,]|$)/i,firefox:/([ ;/)(,]|^)Firefox([ ;/)(,]|$)/i,baiduboxapp:/([ ;/)(,]|^)baiduboxapp([ ;/)(,]|$)/i,msie:/(?:[ ;/)(,]|^)(?:msie|rv)\s*:?\s*([\d.]+)/i,Edge:/(?:[ ;/)(,]|^)(?:Edge)\s*:?\s*([\d.]+)/i}},kn={safria:"Safria",firefox:"Firefox"},Cn=function(t){if(!t)return"";var e=yn.browser;if(e.uc.test(t))return"UC浏览器";if(e.aol.test(t))return"AOL";if(e.Edge.test(t))return"Edge";if(e.arora.test(t))return"Arora";if(e.sogouMobileBrowser.test(t))return"搜狗浏览器";if(e.baidubrowser.test(t))return"百度浏览器";if(e.baiduboxapp.test(t))return"手机百度";if(e.weibo.test(t))return"微博客户端";if(e.microMessenger.test(t))return yn.device.windows.test(t)||e.qqbrowser.test(t)?"微信电脑端":"微信手机端";if(e.qq.test(t))return"手机QQ";if(e.mqqbrowser.test(t))return"QQ浏览器";if(e.firefox.test(t))return kn.firefox;if(e.chrome.test(t))return"Chrome";if(e.safria.test(t))return kn.safria;var n=e.msie.exec(t);return n?"IE"+n[1]:"Other"},Sn={android:"Android",iPhone:"iPhone",iPad:"iPad",iOS:"iOS",macOS:"macOS",windows:"Windows",linux:"Linux",other:"Other"},Tn=function(t){if(t){var e=yn.device;if(e.android.test(t))return{name:Sn.android,type:"android"};if(e.iphone.test(t))return{name:Sn.iPhone,type:"ios"};if(e.ipad.test(t))return{name:Sn.iPad,type:"ios"};if(e.ios.test(t))return{name:Sn.iOS,type:"ios"};if(e.macos.test(t))return{name:Sn.macOS,type:"ios"};if(e.windows.test(t))return{name:Sn.windows,type:"windows"};if(e.linux.test(t))return{name:Sn.linux,type:"linux"}}return{name:Sn.other,type:"other"}},On=function(t){if(void 0!==wn)return t(wn),void(t=null);var e=new Image,n=function(r){e.onerror=e.onload=null;var i=!(!r||"load"!==r.type)&&1==e.width;wn=i?In.Support:In.NotSupport,n=e=null,t(wn),t=null};e.onerror=n,e.onload=n,e.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="},In={Checking:0,NotSupport:1,Support:2},An=!1,Fn=function(){var t=navigator.userAgent,e=Tn(t),n=Cn(t);switch(An=n===kn.firefox,e.name){case Sn.macOS:case Sn.iPhone:case Sn.iPad:case Sn.iOS:break;default:return!1}return n===kn.safria}(),jn=An,_n=Object(j["a"])((function t(){Object(_["a"])(this,t),Object(M["a"])(this,"X",0),Object(M["a"])(this,"Y",0),Object(M["a"])(this,"Width",0),Object(M["a"])(this,"Height",0),Object(M["a"])(this,"Down",null),Object(M["a"])(this,"Right",null),Object(M["a"])(this,"Used",!1)})),Mn=function(){function t(e,n){if(Object(_["a"])(this,t),Object(M["a"])(this,"Root",null),Object(M["a"])(this,"Margin",0),this.Margin=n,null!=e){e=Object(u["a"])(e);var r=0;e.forEach((function(t){r=Math.max(t.rect.width,r)})),e.unshift({rect:(new d["a"]).set(0,0,r,-n)});var i=e.length,o=null,a=null,s=0,c=0,l=2*n;if(!(i>0)){var h=this.Root=new _n;return h.Width=l,h.Height=l,h.X=n,void(h.Y=n)}a=e[0],s=a.rect.width+l,c=a.rect.height+l;var f=this.Root=new _n;f.Width=s,f.Height=c,f.X=n,f.Y=n;for(var m=0;m<i;m++){a=e[m],s=a.rect.width+n,c=a.rect.height+n,o=this.findNode(this.Root,s,c);var p=null;p=null!=o?this.splitNode(o,s,c):this.growNode(s,c),p&&(a.rect.x=p.X-n,a.rect.y=p.Y-n,a.rect.width=p.Width-n,a.rect.height=p.Height-n)}}}return Object(j["a"])(t,[{key:"compareMaxSide",value:function(t,e){var n;return n=this.compareMax_WH(t,e),0!=n?n>0?1:-1:(n=this.compareHeight_Width(t,e),0!=n?n>0?1:-1:1)}},{key:"compareMax_WH",value:function(t,e){var n=Math.max(e.rect.width,e.rect.height)-Math.max(t.rect.width,t.rect.height);return n}},{key:"compareHeight_Width",value:function(t,e){var n=this.compareHeight(t,e);return 0!=n?n>0?1:-1:this.compareWidth(t,e)}},{key:"compareWidth",value:function(t,e){return e.rect.width-t.rect.width}},{key:"compareHeight",value:function(t,e){return e.rect.height-t.rect.height}},{key:"findNode",value:function(t,e,n){if(null==t)return null;if(t.Used){var r=this.findNode(t.Right,e,n);return null!=r?r:this.findNode(t.Down,e,n)}return e<=t.Width&&n<=t.Height?t:null}},{key:"splitNode",value:function(t,e,n){t.Used=!0;var r=t.Right=new _n;r.X=t.X+e,r.Y=t.Y,r.Width=t.Width-e,r.Height=n;var i=t.Down=new _n;return i.X=t.X,i.Y=t.Y+n,i.Width=t.Width,i.Height=t.Height-n,t}},{key:"growNode",value:function(t,e){var n=!1;t<=this.Root.Width&&(n=!0);var r=!1;e<=this.Root.Height&&(r=!0);var i=r&&this.Root.Height>=this.Root.Width+t,o=n&&this.Root.Width>=this.Root.Height+e;return i?this.growRight(t,e):o?this.growDown(t,e):r?this.growRight(t,e):n?this.growDown(t,e):null}},{key:"growRight",value:function(t,e){var n=this.Root,r=this.Root=new _n;r.Used=!0,r.Width=n.Width+t,r.Height=n.Height,r.Y=this.Margin,r.X=this.Margin,r.Down=n;var i=r.Right=new _n;i.X=n.Width,i.Width=t,i.Height=n.Height,i.Y=this.Margin;var o=this.findNode(this.Root,t,e);return null!=o?this.splitNode(o,t,e):null}},{key:"growDown",value:function(t,e){var n=this.Root,r=this.Root=new _n;r.Used=!0,r.Width=n.Width,r.Height=n.Height+e,r.Y=this.Margin,r.X=this.Margin,this.Root.Right=n;var i=this.Root.Down=new _n;i.Y=n.Height,i.Width=n.Width,i.Height=e,i.X=this.Margin;var o=this.findNode(this.Root,t,e);return null!=o?this.splitNode(o,t,e):null}}]),t}(),Ln=Object(j["a"])((function t(e){var n=e.name,r=void 0===n?null:n,i=e.list,o=void 0===i?null:i;Object(_["a"])(this,t),Object(M["a"])(this,"name",null),Object(M["a"])(this,"list",null),Object(M["a"])(this,"type",Dn.Group),this.name=r,this.list=o})),Dn={Group:0,Web:1,Mobile:2,Custom:3},Pn=Object(j["a"])((function t(e){var n=e.name,r=void 0===n?null:n,i=e.width,o=void 0===i?0:i,a=e.height,s=void 0===a?0:a,c=e.type,l=void 0===c?Dn.Mobile:c,u=e.hasBangs,d=void 0!==u&&u,h=e.iosDynamicIsland,f=void 0!==h&&h;Object(_["a"])(this,t),Object(M["a"])(this,"name",null),Object(M["a"])(this,"type",Dn.Mobile),Object(M["a"])(this,"width",0),Object(M["a"])(this,"height",0),Object(M["a"])(this,"hasBangs",!1),Object(M["a"])(this,"iosDynamicIsland",!1),this.name=r,this.type=l,this.width=o,this.height=s,this.hasBangs=d,this.iosDynamicIsland=f})),Nn=[new Pn({name:"Web",type:Dn.Web}),new Ln({name:"iPhone",list:[new Pn({name:"iPhone 16 Pro Max",width:440,height:956,hasBangs:!1,iosDynamicIsland:!0}),new Pn({name:"iPhone 15 Pro Max/16 Plus",width:430,height:932,hasBangs:!1,iosDynamicIsland:!0}),new Pn({name:"iPhone 16 Pro",width:402,height:874,hasBangs:!1,iosDynamicIsland:!0}),new Pn({name:"iPhone 15 Pro/16",width:393,height:852,hasBangs:!1,iosDynamicIsland:!0}),new Pn({name:"iPhone 13 Pro Max",width:428,height:926,hasBangs:!0}),new Pn({name:"iPhone 13 Pro",width:428,height:844,hasBangs:!0}),new Pn({name:"iPhone XR",width:414,height:896,hasBangs:!0}),new Pn({name:"iPhone X",width:375,height:812,hasBangs:!0}),new Pn({name:"iPhone 8 plus",width:414,height:736}),new Pn({name:"iPhone SE",width:375,height:667})]}),new Ln({name:"Android",list:[new Pn({name:"Google Pixel 6 Pro",width:412,height:891}),new Pn({name:"OnePlus 9 Pro",width:412,height:919}),new Pn({name:"HuaWei Mate40 Pro",width:448,height:924}),new Pn({name:"XiaoMi 11",width:412,height:915}),new Pn({name:"Oppo 11",width:360,height:780}),new Pn({name:"Vivo 11",width:360,height:760})]}),new Pn({name:"iPad",width:768,height:1024}),new Pn({name:"自定义尺寸",type:Dn.Custom})],En=function(){for(var t="iPhone X",e=0,n=Nn.length;e<n;e++){var r=Nn[e];if(r)switch(r.type){case Dn.Group:var i,o=null===(i=r.list)||void 0===i?void 0:i.find((function(e){return(null===e||void 0===e?void 0:e.name)===t}));if(o)return o;break;default:if(r.name===t)return r}}return null}(),Rn=function(){function t(){Object(_["a"])(this,t),Object(M["a"])(this,"historyList",[]),Object(M["a"])(this,"historyIndex",0),Object(M["a"])(this,"onpopstate",null),l["g"]&&this.pushState(null)}return Object(j["a"])(t,[{key:"length",get:function(){return l["g"]?Math.min(this.historyList.length,this.historyIndex+1):history.length}},{key:"state",get:function(){if(l["g"]){var t=this.historyList[this.historyIndex];return t?t.state:null}return history.state}},{key:"href",get:function(){if(l["g"]){var t,e=this.historyList[this.historyIndex];return e&&(null!==(t=e.href)&&void 0!==t)?t:""}return location.href}},{key:"replaceState",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(l["g"]){var r=this.historyList,i=this.historyIndex,o=r.length;if(i!=o-1&&r.splice(i+1),n||(n=location.href),r.length>0){var a=r[r.length-1];a.state=t,a.href=n}else r.push({state:t,href:n});this.historyIndex=r.length-1}else n&&history.replaceState(t,e,n)}},{key:"pushState",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(l["g"]){var r=this.historyList,i=this.historyIndex,o=r.length;return i!=o-1&&r.splice(i+1),n||(n=location.href),r.push({state:t,href:n}),void(this.historyIndex=r.length-1)}n&&history.pushState(t,e,n)}},{key:"go",value:function(t){if(l["g"]){if(0===t)return;var e=this.historyList,n=this.historyIndex,r=this.onpopstate,i=e.length,o=t>0?Math.min(n+t,i-1):Math.max(0,n+t);if(n===o)return;this.historyIndex=o;var a=e[o];r&&r({state:a.state,marklion_href:a.href})}else history.go(t)}}]),t}(),Vn=new Rn;function Bn(t,e){if(c["V"].inCloudMode&&Object(l["i"])(e)){var n={};e.forEach((function(t){t&&(t.boundsInParentForList=t.boundsInParent,Ie(t),Object(d["h"])(t),n[t.cid]=t)}));var r=[];return t.forEach((function(t,e){if(t){var i=t.artboard;if(i){var o=i.cid,s=i.updateTimeTimes,c=i.versionCount,u=i.topSectionId,d=i.boundsInParent,h=n[o];if(h){var f=h.updateTimeTimes,m=h.versionCount,p=h.topSectionId,v=h.boundsInParent;s===f&&c===m&&u===p?Object(l["k"])(d)&&Object(l["k"])(v)&&(d.x!==v.x||d.y!==v.y)&&r.push({type:a["u"].Change,art:t,newArtboard:h,index:e,changeFromLocation:!0}):r.push({type:a["u"].Change,art:t,newArtboard:h,index:e}),delete n[o]}else r.unshift({type:a["u"].Remove,art:t,index:e})}}})),Object.keys(n).forEach((function(t){r.push({type:a["u"].Add,newArtboard:n[t]})})),r}}var Hn={SPACE:{filedetail:"filedetail"}},Un={};function $n(t,e,n,r){var i=Un[t];i||(i=Un[t]={});var o={diff:r,time:Date.now(),value:n};i[e]=o}function Gn(t,e){var n=Un[t];n&&(null!=e?delete n[e]:delete Un[t])}function Wn(t,e){var n=Un[t];if(!n)return null;var r=n[e];if(!r)return null;var i=r.time,o=Date.now(),a=o-i;return a<=0||a>=r.diff?(delete n[e],null):r.value}function zn(t){return"cloud_recents:".concat(t)}function Yn(t){return t?"guide.n-".concat(t):"guide.n"}function Xn(){var t=+Object(c["K"])(Yn(),!1);(isNaN(t)||"number"!==typeof t)&&(t=a["k"].None);var e=a["k"].None;return t>=0&&Object.keys(a["k"]).forEach((function(n){var r=a["k"][n];r!==a["k"].None&&(t&r)===r&&(e|=r)})),e}function Kn(t){var e=Yn();0==t?Object(c["mb"])(e):Object(c["rb"])(e,t.toString())}var qn={_steps:null,get steps(){var t=this._steps;return null==t&&(t=this._steps=Xn()),t},finishStep:function(t){var e=this.steps;e|=t,this._steps=e,Kn(e)},removeStep:function(t){var e=this.steps;e|=t,e^=t,this._steps=e,Kn(e)}};o["a"].use(xn["a"]);var Jn,Qn=!1;function Zn(){if(c["V"].inCloudMode&&history.pushState){var t=function(t){var e,n,r,i,o=t.state,a=t.marklion_href;if(Object(l["k"])(o))e=o.artboardGuid,n=o.nodeGuid,r=o.filterDocumentGuid,i=o.curArtboardExtral;else{var s=a||window.location.href,u=/\/(?:file|interaction)?viewer\/(\d+)(?:\/([\w-]+)(?:\/([\w-]+)\/)?)?/.exec(s);u?(e=u[2],n=u[3]):(n=null,e=null),r=Object(c["kb"])("filterDoc")}if("none"!==r&&Object(l["j"])(r)){if(r){var d=or.state.sortDocumentsWithSketchDocument.find((function(t){return t.guid===r}));if(d){var h=dn(r),f=or.state.documentArtboards.find((function(t){var n=t.artboard;return n.guid===e&&un(n,h.filterDocumentGuid,h.onlyNoSectionArtboard)}));e&&!f&&(r=null)}else r=null}}else r=null;var m=null,p=null;e&&(m=or.state.documentArtboards.find((function(t){return t.artboard.guid===e})),m&&n&&(p=m.childs.find((function(t){return t.guid===n})))),Qn=!0,setTimeout((function(){Qn=!1}),50),m!=or.state.curArtboard&&or.commit("curArtboard",{artboard:m,extral:i}),p!=or.state.curNode&&or.commit("curNode",p),r!=or.state.filterDocumentGuid&&or.commit("setFilterDocumentGuid",r)};Vn.onpopstate=t,window.addEventListener("popstate",t)}}function tr(){var t=or.state,e=t.cloudNeedLogin,n=t.inCloudMode,r=t.cloudIsLogin,i=t.cloud,o=t.curArtboard,s=t.cloudName,l=t.permission,u="";if(n){if(e&&!r);else if(i.folderInSpecify)u+="没有访问权限 - ";else if(i.folderNotFound)u+="链接已失效 - ";else if(i.renderMode==a["W"].File){if(null!=i.fileInfo){var d=i.fileInfo,h=d.file,f=d.curVerId;u+="".concat(null===h||void 0===h?void 0:h.name).concat(f>0&&h&&h.verId!==f?"(#".concat(f,")"):""," - ")}else l&&(u+="文件不存在 - ");u+="".concat(c["V"].documentName," - ")}else u+=o?"".concat(o.artboard.name," - ").concat(c["V"].documentName," - "):"".concat(c["V"].documentName," - ");s&&(u+="".concat(s," - "))}else u+=o?"".concat(o.artboard.name," - ").concat(c["V"].documentName," - "):"".concat(c["V"].documentName," - ");document.title=u+c["V"].initTitle}function er(t){if(Object(l["j"])(t)){var e=or.state,n=e.inCloudMode,r=e.cloud;n&&r.renderMode===a["W"].File&&(tr(),Vn.replaceState(null,null,t))}}function nr(t){t.allArtboardLoadChecked?(clearTimeout(Jn),Jn=setTimeout((function(){rr(t),tr()}),33)):tr()}function rr(t){var e=t.curArtboard,n=t.filterDocumentGuid,r=t.curArtboardExtral;if(c["V"].inCloudMode){if(t.cloudNeedLogin&&!t.cloudIsLogin||!t.permission)return;if(!history.pushState)return;if(Qn)return;var i,o,s=!1;switch(t.cloud.renderMode){case a["W"].File:i="fileviewer";break;case a["W"].Interaction:i="interactionviewer";break;default:i="viewer",s=!0;break}i="/".concat(i,"/").concat(c["V"].cloudFolderId,"/"),e&&(o=e.artboard.guid,i+="".concat(encodeURIComponent(o),"/"));var u=!1,d=function(t,e){i+="".concat(u?"&":"?").concat(t,"=").concat(encodeURIComponent(e)),u=!0};n&&d("filterDoc",n);var h=Vn.href;if(h.indexOf(i)===h.length-i.length)return;var f={artboardGuid:o,nodeGuid:null,filterDocumentGuid:n,curArtboardExtral:r};if(s){var m=/\/(?:file|interaction)?viewer\/(\d+)(?:\/([\w-]+)(?:\/([\w-]+)\/)?)?/.exec(h),p={folderId:null,artboardGuid:null,filterDocumentGuid:null};if(m&&(p.folderId=+m[1],p.artboardGuid=m[2],p.filterDocumentGuid=Object(c["kb"])("filterDoc",h),"none"!==p.filterDocumentGuid&&Object(l["j"])(p.filterDocumentGuid)||(p.filterDocumentGuid=null),p.folderId===c["V"].cloudFolderId&&p.artboardGuid===f.artboardGuid&&p.filterDocumentGuid===f.filterDocumentGuid))return void Vn.replaceState(f,null,i)}t.replaceInteractionCurrentState?(t.replaceInteractionCurrentState=!1,Vn.replaceState(f,null,i)):Vn.pushState(f,null,i)}else{var v,b="#";if(e&&(v=e.artboard.guid,b+="/artboard/".concat(v)),location.hash!==b){var g=/^#\/artboard\/([\w-]+)/.exec(location.hash),w={artboardGuid:null};if(g&&history.replaceState&&(w.artboardGuid=g[1],w.artboardGuid===v))return void history.replaceState(null,null,"".concat(location.origin).concat(location.pathname).concat(location.search).concat(b));location.hash=b}}}function ir(t){var e;if(!t)return null;var n=t.cid;return null!==(e=or.state.documentArtboards.find((function(t){var e;return(null===t||void 0===t||null===(e=t.artboard)||void 0===e?void 0:e.cid)===n})))&&void 0!==e?e:null}var or=new xn["a"].Store({state:{automaticSync:{autoGetFolderPrecisKey:0},beginnerGuide:{steps:a["k"].None,rects:{}},winRect:{left:0,top:0,width:0,height:0},webViewHidden:Object(c["fb"])(),webViewFocus:!0,webViewStateTimes:0,folderPrecis:{changeArtboards:[],showArtboardLogNow:0},config:null,allArtboardLoadChecked:!1,replaceInteractionCurrentState:!1,artboardLoadProgress:{current:0,count:1},documentGuid:null,documentName:null,curArtboard:null,curArtboardExtral:null,curNode:null,clickedNode:null,enterNode:null,enterArtboard:null,documentArtboards:[],renderDocumentArtboards:[],documents:[],sortDocumentsWithSketchDocument:[],renderDocuments:[],filterDocumentGuid:null,isSupportWebp:In.Checking,netdiskUploader:{linkbox:{visible:!1,data:null},filebox:{visible:!1,parentId:0}},scale:{artboard:1,list:1,resetList:0,resetArtboard:0,resetCenterWithRect:null,resetCenterArtboard:null},setting:{color:{items:["rgba","hex","ahex","hexa","hsla"],current:0},numberAutoRound:!1,exportBoxBackground:a["ab"].Transparent},platform:{type:a["c"].WEB,customUnit:a["d"].PX,customDocWidth:0},unitTemplate:{template:"",enable:!1},androidUseMipmap:"1"===Object(c["K"])("androidUseMipmap",!1),textTip:{visible:!1,text:"",handle:0},inArtboardMultDownMode:!1,inOutput:!1,artboardMenu:{visible:!1,x:0,y:0,artboard:null},helper:{visible:!1,handle:0},inCloudMode:!1,permission:!0,cloudNeedLogin:!1,cloudIsLogin:!1,cloudNickName:null,cloudUserEmail:null,cloudUserId:0,cloudUserIsDesigner:!1,cloudUserIsOwner:!1,cloudUserKey:null,cloudName:null,cloudKey:null,cloudVersion:null,cloudListSort:{sortType:a["n"].Name,orderDesc:!1},cloud:{folderNotFound:!1,folderInSpecify:!1,defaultArtboardGuid:"",parentFolder:null,currentFolderId:0,subFolders:[],subFiles:[],allFoldersBoxVisible:!1,renderMode:a["W"].Normal,fileInfo:null,folderUpdateTimes:null,userFolderSpecifyMemberAuthority:a["w"].ReadWrite,refreshRecents:{favoriteFolder:0,favoriteArtboard:0}},resetScaleSceneCenter:null,selectArtboardChanged:null,artRenderInCanvasMode:!0,artShowInListMode:!1,showArtListMap:!0,noviceGuide:{artShowInListMode:!1},artboardShowInteractionLine:!0,rightNavType:a["U"].Property,rightNavTypePropertyClicked:0,commentOnlyCurrentVerArtboard:!1,artboardCommentVisible:!1,pointCommentShowAlways:!1,sliceBorderLineHide:!1,editComment:{drawing:!1,instance:null,drawInfo:{action:P.None,histories:[],historyIndex:-1,historyIndexChanges:0,colorIndex:2,fontSize:E,brushSize:R.Normal,selectItem:null,enterItem:null},pointInfo:{preventPoint:{x:0,y:0,enable:!1},point:{x:0,y:0,enable:!1,pointIndex:0},instance:null}},imageViewer:{visible:!1,imgList:null,scale:0,currentIndex:0,resetScale:0},commentEditorVisibleId:0,userNotify:{cloudList:{},visible:!1,location:{top:120,right:0},sysTipIds:{},commentUpdateStates:{},cloudUsersByCloud:{}},autoIntoInfo:{commentId:0,commentArtboardId:0,isReply:!1},artboardDetail:{sliceScrollNode:null,initedScale:!1,leftSideVisible:"0"!==Object(c["K"])("leftside.visible",!1),artboardVerListVisible:!1,fetchState:c["a"].Normal,errorText:"",refreshDataTicks:0,comments:null,commentUsers:null,maxPointIndex:0,selectComment:null,notScrollList:!1,interactionSet:{hoverGuid:"",headerVisible:"0"!==Object(c["K"])("interaction.header.visible",!1),history:[],verticalAlign:a["H"].Middle,backgroundColor:"#f5f5f5",rectAlwaysVisible:"0"!==Object(c["K"])("interaction.rect-always-visible",!1),pcDeviceSet:{name:"Web",type:Dn.Web,width:0,height:0,isHorizontal:!1,hasBangs:!1,iosDynamicIsland:!1},overlayArtboards:[],gobackArtboard:null,gotoArtboard:null,goOverlayArtboard:null}},mobileInteraction:{listFetchState:c["a"].Normal,listConfig:{sortType:a["n"].Name,orderDesc:!1,renderType:a["o"].All},searchText:"",controlVisible:!1,mobileSize:{width:0,height:0},scrollYCache:{}},netdiskFileUploadDatas:{},netdiskFileVerListVisible:!1},mutations:{refreshRecents:function(t,e){var n=t.cloud.refreshRecents;switch(e){case a["Y"].FavoriteFolder:n.favoriteFolder=Date.now();break;case a["Y"].FavoriteArtboard:n.favoriteArtboard=Date.now();break}},autoGetFolderPrecisKey:function(t){t.automaticSync.autoGetFolderPrecisKey=Date.now()},netdiskFileVerListVisible:function(t,e){t.netdiskFileVerListVisible=e},setBeginnerGuideRect:function(t,e){var n=e.step,r=e.rect,i=t.beginnerGuide.rects;o["a"].set(i,n,r)},setRightNavTypePropertyClicked:function(t){t.rightNavTypePropertyClicked=Date.now()},setRightNavType:function(t,e){var n=!1;switch(e){case a["U"].Comment:n=!0;break;case a["U"].Slice:break;default:e=a["U"].Property;break}t.rightNavType=e,n?t.artboardCommentVisible=!0:t.artboardDetail.selectComment&&(t.artboardDetail.selectComment=null)},setFolderSubFile:function(t,e){if(t.inCloudMode&&Object(l["k"])(e)){var n=e.files,r=e.folderUpdateTimes;if(Object(l["i"])(n)){var i=t.cloud.subFiles,o=t.cloudListSort,a=t.cloud,s={};i.forEach((function(t,e){s[t.viewUrl]=e})),n.forEach((function(t){var e=s[t.viewUrl];if(null==e)i.push(t);else{var n=i[e];Object.keys(n).forEach((function(e){n[e]=t[e]}))}})),Ue({subFiles:i,subFolders:[]},o),r>0&&(a.folderUpdateTimes=r)}}},removeArtboard:function(t,e){if(t.inCloudMode&&Object(l["j"])(e)){var n=t.documentArtboards,r=t.documents,i=-1,o=n.find((function(t,n){var r;return(null===t||void 0===t||null===(r=t.artboard)||void 0===r?void 0:r.guid)===e&&(i=n,!0)}));if(-1!==i){o.removed=!0,n.splice(i,1);var a=!1;We(n),Ke(r,n),t.sortDocumentsWithSketchDocument=Ve(r);var s=t.filterDocumentGuid;s&&!r.find((function(t){return t.docGuid===s||t.pageGuid===s||t.guid===s}))?this.commit("setFilterDocumentGuid",null):this.commit("setRenderDocuments"),a&&this.commit("setScale",{reset:!0}),kt(n)}}},setFolderPrecis:function(t,e){if(t.inCloudMode&&Object(l["k"])(e)){e.folders||(e.folders=[]),e.artboards||(e.artboards=[]),e.files||(e.files=[]);var n=e.updateTimes,r=e.userSpecifyMemberAuthority,i=e.name,o=t.cloud,s=t.documentArtboards,h=t.documents;if(null!=n){o.folderUpdateTimes=n,t.documentName=i,null!=r&&(o.userFolderSpecifyMemberAuthority=r);var f=o.renderMode,m=o.subFolders,p=o.subFiles;if(f===a["W"].Normal){m.splice(0);var v={subFolders:e.folders,subFiles:e.files};Ue(v,t.cloudListSort),Ge(e),v.subFolders.length>0&&m.push.apply(m,Object(u["a"])(v.subFolders)),p.splice(0),v.subFiles.length>0&&p.push.apply(p,Object(u["a"])(v.subFiles))}var b=Bn(s,e.artboards),g=[];if((null===b||void 0===b?void 0:b.length)>0){var w,x,y,k=null===(w=t.curArtboard)||void 0===w?void 0:w.artboard;k&&(y=k.cid),null!==(x=y)&&void 0!==x||(y=0);var C=t.folderPrecis.changeArtboards,S={};C.forEach((function(t){S[t.cid]=1}));var T=!1,O=["versionCount","sectionId","sectionInfo","topSectionId","topSectionInfo"];b.forEach((function(t){var e,n,r,i,o,c=null!==(e=t.newArtboard)&&void 0!==e?e:null===(n=t.art)||void 0===n?void 0:n.artboard;switch(c&&(r=c.cid,i=c.guid,o=c.name,Gn("comment",r),r>0&&!S[r]&&(S[r]=1,C.push({cid:r,guid:i,name:o}))),t.type){case a["u"].Change:var l=t.art,u=t.newArtboard,h=t.changeFromLocation,f=l.artboard.updateTimeTimes===u.updateTimeTimes;if(f&&!h){O.forEach((function(t){l.artboard[t]=u[t]}));break}if(!T){var m=l.artboard,p=m.scale,v=m.boundsInParent,b=u.scale,w=u.boundsInParent;p==b&&Object(d["g"])(v,w)||(T=!0)}var x=y===l.artboard.cid&&null!=l.artboardVerData;x||(l.isError=!1,l.isFetching=!1,l.isLoaded=!1,l.loadErrMsg=null),l.artboard=u,l.removed=!1,g.push(l);break;case a["u"].Remove:var k=t.index,I=t.art;I.removed=!0,s.splice(k,1),T=!0;break;case a["u"].Add:var A=t.newArtboard,F=cn(A);s.push(F),T=!0,g.push(F);break}})),C.sort((function(t,e){return Object(c["hb"])(t.name,e.name)})),We(s),Ke(h,s),t.sortDocumentsWithSketchDocument=Ve(h);var I=t.filterDocumentGuid;I&&!h.find((function(t){return t.docGuid===I||t.pageGuid===I||t.guid===I}))?this.commit("setFilterDocumentGuid",null):this.commit("setRenderDocuments"),T&&this.commit("setScale",{reset:!0}),kt(s,g)}}}},setWebViewFocus:function(t,e){t.webViewFocus=e,e&&(t.webViewStateTimes=Date.now()),ar()},setWebViewHidden:function(t,e){t.webViewHidden=e,e||(t.webViewStateTimes=Date.now()),ar()},setCloudListSortConfig:function(t,e){var n="cloudlist-item-sort",r=t.cloudListSort,i=t.cloud,o=!1;if(Object(l["k"])(e)){if(e.sortType===r.sortType&&null==e.orderDesc)e.orderDesc=!r.orderDesc;else if(e.sortType!==r.sortType&&null==e.orderDesc)switch(e.sortType){case a["n"].Date:e.orderDesc=!0;break;default:e.orderDesc=!1;break}}else Object(c["mb"])(n),o=!0,e={sortType:a["n"].Name,orderDesc:!1};Object.keys(e).forEach((function(t){void 0!==r[t]&&(r[t]=e[t])})),Ue(i,r),o||Object(c["rb"])(n,r)},setMobileInteractionListConfig:function(t,e){var n="m-interaction-list-config",r=t.mobileInteraction.listConfig,i=!1;Object(l["k"])(e)||(Object(c["mb"])(n),i=!0,e={sortType:a["n"].Name,orderDesc:!1,renderType:a["o"].All}),Object.keys(e).forEach((function(t){void 0!==r[t]&&(r[t]=e[t])})),i||Object(c["rb"])(n,r)},setPCDeviceSet:function(t,e){if(Object(l["k"])(e)){var n=t.artboardDetail.interactionSet.pcDeviceSet;if(Object.keys(n).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n.type===Dn.Mobile){var r=Math.max(n.width,n.height),i=Math.min(n.width,n.height);n.isHorizontal?(n.width=r,n.height=i):(n.width=i,n.height=r)}else n.type===Dn.Custom&&(n.isHorizontal=n.width>n.height);Object(c["rb"])("interaction.pcdeviceset",n)}},setInteractionRectAlwaysVisible:function(t,e){t.artboardDetail.interactionSet.rectAlwaysVisible!==e&&(t.artboardDetail.interactionSet.rectAlwaysVisible=e,Object(c["rb"])("interaction.rect-always-visible",e?"1":"0"))},setInteractionBackground:function(t,e){t.artboardDetail.interactionSet.backgroundColor!==e&&(t.artboardDetail.interactionSet.backgroundColor=e,Object(c["rb"])("interaction.background",e))},setInteractionHeaderVisible:function(t,e){t.artboardDetail.interactionSet.headerVisible!==e&&(t.artboardDetail.interactionSet.headerVisible=e,Object(c["rb"])("interaction.header.visible",e?"1":"0"))},setInteractionArtboard:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o,u,d,h,f,m,p,v,b,g,w,x,y,k,C,S,T,O,I,A,F,j,_,M,L,D,P,N;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:if(o=t.artboardDetail.interactionSet,!(o.gotoArtboard||o.gobackArtboard||o.goOverlayArtboard)){r.next=5;break}return r.abrupt("return");case 5:u=o.overlayArtboards,d=null,h=t.cloud.renderMode===a["W"].Interaction,f=e.type,f!==pt.overlay||h||(f=pt.goToArtboard),m=h&&(l["f"]||o.pcDeviceSet.type!==Dn.Web),r.t0=f,r.next=r.t0===pt.replace?14:r.t0===pt.closeCurrentOverlay?38:r.t0===pt.goBackAndCloseAllOverlay?54:r.t0===pt.goBack?60:r.t0===pt.goToArtboard?88:r.t0===pt.overlay?110:r.t0===pt.goUrl?128:131;break;case 14:if(d=ir(e.toArtboardItem),d){r.next=19;break}return n.commit("Tip_showTextTip",{text:"目标画板未上传到私有云"}),r.abrupt("return");case 19:if(0!==u.length){r.next=28;break}if(d.artboard.cid!==(null===(p=t.curArtboard)||void 0===p||null===(p=p.artboard)||void 0===p?void 0:p.cid)){r.next=23;break}return n.commit("Tip_showTextTip",{text:"目标画板和当前画板是同一个画板"}),r.abrupt("return");case 23:return t.replaceInteractionCurrentState=!0,e=Object(s["a"])({},e),e.type=pt.goToArtboard,n.commit("setInteractionArtboard",e),r.abrupt("return");case 28:if(v=u[u.length-1],v.visible=!0,v.renderTapInteraction=e,v.artboard=d,!m){r.next=37;break}return o.goOverlayArtboard={renderTapInteraction:e,fromArtboard:d},r.next=36,Object(c["yb"])(1e3*((null===(b=e.transition)||void 0===b?void 0:b.duration)||0));case 36:o.goOverlayArtboard=null;case 37:return r.abrupt("break",133);case 38:if(h){r.next=41;break}return n.commit("Tip_showTextTip",{text:"关闭当前最顶部遮罩层"}),r.abrupt("return");case 41:if(0!==u.length){r.next=44;break}return n.commit("Tip_showTextTip",{text:"当前画板不是以遮罩层的形式打开的,关闭遮罩的命令无效"}),r.abrupt("return");case 44:if(g=u[u.length-1],!g.visible){r.next=52;break}if(g.visible=!1,!m){r.next=52;break}return o.goOverlayArtboard={renderTapInteraction:g.renderTapInteraction,fromArtboard:ir(e.toArtboardItem)},r.next=51,Object(c["yb"])(1e3*((null===(w=g.renderTapInteraction.transition)||void 0===w?void 0:w.duration)||0));case 51:o.goOverlayArtboard=null;case 52:return u.splice(u.length-1),r.abrupt("return");case 54:if(h){r.next=57;break}return n.commit("Tip_showTextTip",{text:"返回到原型的上一个画板"}),r.abrupt("return");case 57:return u.length>0&&u.splice(0),n.commit("setInteractionArtboard",{type:pt.goBack}),r.abrupt("return");case 60:if(h){r.next=63;break}return n.commit("Tip_showTextTip",{text:"返回到原型的上一个画板"}),r.abrupt("return");case 63:if(!(u.length>0)){r.next=71;break}if(x=u[u.length-1],!x.visible){r.next=69;break}return x.visible=!1,r.next=69,Object(c["yb"])(1e3*((null===(y=x.renderTapInteraction.transition)||void 0===y?void 0:y.duration)||.3));case 69:return u.splice(0),r.abrupt("return");case 71:if(null!=Vn.state){r.next=74;break}return n.commit("Tip_showTextTip",{text:"没有可返回的上一个画板"}),r.abrupt("return");case 74:if(Vn.go(-1),k=t.curArtboardExtral,!Object(l["k"])(k)){r.next=87;break}if(C=k.renderTapInteraction,S=k.fromArtboard,!C||!S){r.next=87;break}if(!m){r.next=87;break}return o.gotoArtboard=null,o.goOverlayArtboard=null,o.gobackArtboard={renderTapInteraction:C,fromArtboard:t.curArtboard},r.next=86,Object(c["yb"])(1e3*((null===(T=C.transition)||void 0===T?void 0:T.duration)||.3));case 86:o.gobackArtboard=null;case 87:return r.abrupt("break",133);case 88:if(d=ir(e.toArtboardItem),d){r.next=92;break}return n.commit("Tip_showTextTip",{text:"目标画板未上传到私有云"}),r.abrupt("return");case 92:if(I=d.artboard.cid,I!==(null===(O=t.curArtboard)||void 0===O?void 0:O.artboard.cid)){r.next=96;break}return n.commit("Tip_showTextTip",{text:"目标画板和当前画板是同一个画板"}),r.abrupt("return");case 96:if(A=t.mobileInteraction.scrollYCache,delete A[I],e=Object(s["a"])({},e),delete e.toArtboardItem,!m){r.next=108;break}return o.gobackArtboard=null,o.goOverlayArtboard=null,o.gotoArtboard={renderTapInteraction:e,fromArtboard:d},r.next=107,Object(c["yb"])(1e3*((null===(F=e.transition)||void 0===F?void 0:F.duration)||.3));case 107:o.gotoArtboard=null;case 108:return n.commit("curArtboard",{artboard:d,extral:{renderTapInteraction:e,fromArtboard:t.curArtboard}}),r.abrupt("break",133);case 110:if(d=ir(e.toArtboardItem),d){r.next=115;break}return n.commit("Tip_showTextTip",{text:"目标画板未上传到私有云"}),r.abrupt("return");case 115:if(e=Object(s["a"])({},e),delete e.toArtboardItem,!(u.length>0)){r.next=121;break}if(M=u[u.length-1],(null===(j=M.artboard)||void 0===j?void 0:j.cid)!==(null===(_=d.artboard)||void 0===_?void 0:_.cid)){r.next=121;break}return r.abrupt("return");case 121:if(u.push({artboard:d,renderTapInteraction:e,visible:!0}),!m){r.next=127;break}return o.goOverlayArtboard={renderTapInteraction:e,fromArtboard:d},r.next=126,Object(c["yb"])(1e3*((null===(L=e.transition)||void 0===L?void 0:L.duration)||.3));case 126:o.goOverlayArtboard=null;case 127:return r.abrupt("break",133);case 128:return D=e,P=D.toUrl,P?(N=window.open(P),N.opener=null):n.commit("Tip_showTextTip",{text:"无法跳转网址,因为网址参数丢失了"}),r.abrupt("return");case 131:return n.commit("Tip_showTextTip",{text:"未知的原型操作,无法跳转"}),r.abrupt("return");case 133:case"end":return r.stop()}}),i)})))()},setRenderDocuments:function(t){var e,n=t.filterDocumentGuid,r=t.documents,i=t.inCloudMode;e=Object(l["j"])(n)?r.filter((function(t){return t.guid===n||t.docGuid===n||t.pageGuid===n})):t.documents;var o=e.reduce((function(t,e){return t.add("".concat(e.type,":").concat(e.guid)),t}),new Set);e=e.filter((function(t){switch(t.type){case void 0:return!i;case a["K"].Document:return!0;case a["K"].Page:return!o.has("".concat(a["K"].Document,":").concat(t.docGuid));case a["K"].Section:return!o.has("".concat(a["K"].Document,":").concat(t.docGuid))&&!o.has("".concat(a["K"].Page,":").concat(t.pageGuid))}return!1})),e.forEach((function(e){e.maxRect=Object(c["C"])(e.arts,t.inCloudMode?e.sections:null),e.rect=(new d["a"]).set(0,0,e.maxRect.width,e.maxRect.height),Object(l["i"])(e.sections)&&(e.sections=ln(e.sections))})),e.length>1&&(new Mn(e,150),e.forEach((function(t){t.rect.width=t.maxRect.width,t.rect.height=t.maxRect.height}))),t.renderDocuments=e;var s=[],u=new Set;e.forEach((function(t){t&&Object(l["i"])(t.arts)&&t.arts.forEach((function(t){var e,n,r=null!==(e=null!==(n=t.artboard.guid)&&void 0!==n?n:t.artboard.cid)&&void 0!==e?e:null;r&&!u.has(r)&&(u.add(r),s.push(t))}))})),t.renderDocumentArtboards=s},setFilterDocumentGuid:function(t,e){if(t.filterDocumentGuid!=e){if(t.filterDocumentGuid=e,this.commit("setRenderDocuments"),e){var n=t.curArtboard;if(n){var r=n.artboard,i=r.docGuid,o=r.pageGuid,a=r.topSectionId;if(i!==e&&o!==e&&a!==e){var s=t.renderDocumentArtboards[0];return void this.commit("curArtboard",{artboard:s})}}}nr(t)}},setAllFoldersBoxVisible:function(t,e){t.cloud.allFoldersBoxVisible=e,e?Object(c["tb"])(a["f"],"1"):Object(c["nb"])(a["f"])},leftSideVisible:function(t,e){t.artboardDetail.leftSideVisible!==e&&(t.artboardDetail.leftSideVisible=e,Object(c["rb"])("leftside.visible",e?"1":"0"))},pointCommentShowAlways:function(t,e){t.pointCommentShowAlways=e,Object(c["rb"])("point-comment-showalways",e?"1":"0")},sliceBorderLineHide:function(t,e){t.sliceBorderLineHide=e,Object(c["rb"])("slice-border-line-hide",e?"1":"0")},artboardCommentVisible:function(t,e){t.artboardCommentVisible=e},setSelectComment:function(t,e){e=e||{};var n=e,r=n.comment,i=n.notScrollList,a=n.openEditor,s=t.artboardDetail;r&&(t.artboardCommentVisible=!0),s.notScrollList=!!i,a&&(null===r||void 0===r?void 0:r.id)>0&&o["a"].set(r,"autoOpenEditor",!0),s.selectComment=r},setCommentEditorVisibleId:function(t,e){t.commentEditorVisibleId=e},setImageViewer:function(t,e){var n=t.imageViewer;Object(l["k"])(e)&&Object(l["i"])(e.imgList)&&e.imgList.length>0?(n.imgList=e.imgList.map((function(t){return{imgSrc:t,width:0,height:0}})),n.currentIndex="number"===typeof e.currentIndex&&e.currentIndex>=0&&e.currentIndex<e.imgList.length?e.currentIndex:0,n.visible=!0):(n.currentIndex=0,n.visible=!1,n.imgList=null)},startDraw:function(t,e){var n=t.editComment;n.drawing||(n.instance=e,n.drawing=!0)},artboardShowInteractionLine:function(t,e){Object(c["rb"])("list-interaction-line",e?"1":"0"),t.artboardShowInteractionLine=e},showArtListMap:function(t,e){Object(c["rb"])("art-list-map",e?"1":"0"),t.showArtListMap=e},artShowInListMode:function(t,e){Object(c["rb"])("art-in-list",e?"1":"0"),location.reload(!0),setTimeout((function(){t.artShowInListMode=e}),1e3)},artRenderInCanvasMode:function(t,e){Object(c["rb"])("list-view-mode",e?"1":"0"),c["gb"].paused=!e,location.reload(!0),setTimeout((function(){t.artRenderInCanvasMode=e}),1e3)},selectArtboardChanged:function(t,e){t.selectArtboardChanged=e},resetScaleSceneCenter:function(t,e){t.resetScaleSceneCenter=e},isSupportWebp:function(t,e){t.isSupportWebp=e},artboardLoadProgress:function(t,e){if(Object(l["k"])(e)){var n=e.current,r=e.count;t.artboardLoadProgress.current=n,t.artboardLoadProgress.count=r}},allArtboardLoadChecked:function(t,e){t.allArtboardLoadChecked=e},setHelperVisible:function(t,e){var n=t.helper;clearTimeout(n.handle),e?n.visible=!0:n.handle=setTimeout((function(){n.visible=!1}),50)},setInOutput:function(t,e){t.inOutput=e},setAndroidUseMipmap:function(t,e){t.androidUseMipmap!==e&&(t.androidUseMipmap=e,Object(c["rb"])("androidUseMipmap",e?"1":"0"))},setArtboardMenu:function(t,e){if(Object(l["k"])(e)){var n=e.visible,r=e.x,i=e.y,o=e.artboard,a=t.artboardMenu;null!=r&&(a.x=Math.max(0,r)),null!=i&&(a.y=Math.max(0,i)),null!=n&&(a.visible=n),!1===n?a.artboard=null:null!=o&&(a.artboard=o)}},setInArtboardMultDownMode:function(t,e){t.inArtboardMultDownMode=e},Tip_showTextTip:function(t,e){var n=e.second,r=void 0===n?5:n,i=e.text,o=t.textTip;o.visible=!0,o.text=i,clearTimeout(o.handle),r>0&&(o.handle=setTimeout((function(t){clearTimeout(t.handle),t.handle=0,t.visible=!1}),1e3*r,o))},Tip_hideTextTip:function(t){var e=t.textTip;e.visible=!1,clearTimeout(e.handle),e.handle=0},setUnitTemplate:function(t,e){var n=e.enable,r=e.template,i=e.fromInited,o=e.guid,a=t.unitTemplate;if((a.enable!=n||a.template!=r)&&(a.enable=n,Object(l["j"])(r)||(r="rem(%num%)"),a.template=r,!i)){var s="unittemplate.".concat(o);a.enable||"rem(%num%)"!=a.template?Object(c["rb"])(s,a):Object(c["mb"])(s)}},setPlatform:function(t,e){var n=e.type,r=e.customUnit,i=e.customDocWidth,o=e.fromInited,s=e.guid,l=t.platform,u=!1;if(null!==n){var d;switch(n){case a["c"].ANDROID:case a["c"].IOS:case a["c"].CUSTOM:case a["c"].WE_CHAT_MINI_PROGRAM:d=n;break;default:d=a["c"].WEB;break}d!==l.type&&(u=!0,l.type=d)}if(null!=r&&null!=i){switch(u=!0,r){case a["d"].DP:case a["d"].PT:case a["d"].RPX:l.customUnit=r;break;default:l.customUnit=a["d"].PX;break}"number"===typeof i&&isFinite(i)&&!isNaN(i)&&i>=1?l.customDocWidth=Math.round(i):l.customDocWidth=0}if(u&&!o){var h="platform.".concat(s);Object(c["rb"])(h,l)}},resetCenterWithRect:function(t,e){t.scale.resetCenterWithRect=e},resetCenterArtboard:function(t,e){t.scale.resetCenterArtboard=e},setScale:function(t,e){if(Object(l["k"])(e)){var n=e.artboard,r=e.list,i=e.reset;null!=n&&(t.scale.artboard=Object(c["z"])(!1,n)),null!=r&&(t.scale.list=Object(c["z"])(!0,r)),!0===i&&(null==t.curArtboard?t.scale.resetList=Date.now():t.scale.resetArtboard=Date.now())}},exportBoxBackgroundType:function(t,e){t.setting.exportBoxBackground=e,Object(c["rb"])("export-box-background",e)},setInteractionArtboardVerticalAlign:function(t,e){t.artboardDetail.interactionSet.verticalAlign=e,Object(c["rb"])("interaction-vertical-align",e)},setNumberAutoRound:function(t,e){t.setting.numberAutoRound=e,Object(c["rb"])("number-auto-round",e?"1":"0")},setSettingColor:function(t,e){var n=t.setting.color;(e<0||e>=n.items.length)&&(e=0),n.current=e,Object(c["rb"])("colortype",e)},setCurArtboardVer:function(t,e){var n;if(Object(l["k"])(e)){var r=e.verId,i=e.noTipWhenCurrentVer,o=t.curArtboard,a=t.curArtboard,s=a.artboard,c=a.historyArtboards;if(r>0&&((null===(n=o.artboardVerData)||void 0===n?void 0:n.lastVersionId)===r||null==o.artboardVerData&&(null===s||void 0===s?void 0:s.lastVersionId)===r))!0!==i&&this.commit("Tip_showTextTip",{text:"当前画板版本已经是#".concat(r)});else{if(!c)return this.commit("Tip_showTextTip",{text:"无法切换到画板版本#".concat(r,",画板版本信息尚未加载")});var u;if(o.artboard.lastVersionId===r)u=null;else{var d=null===c||void 0===c?void 0:c.find((function(t){var e;return(null!==(e=null===t||void 0===t?void 0:t.lastVersionId)&&void 0!==e?e:t.verId)===r}));if(!d)return void this.commit("Tip_showTextTip",{text:"画板版本#".concat(r," 不存在,可能已经被删除")});u=d}o.isError=!1,o.isFetching=!1,o.isLoaded=!1,o.loadErrMsg=null,o.artboardVerData=u,this.commit("Tip_showTextTip",{text:"已切换到画板版本#".concat(r)})}}},curArtboard:function(t,e){var n;e||(e={});var r=e,i=r.artboard,o=r.extral;Object(l["k"])(i)||(i=null);var a=!1;if(null!==(n=i)&&void 0!==n&&n.artboardVerData&&(i.artboardVerData=null,a=!0,i.isError=!1,i.isFetching=!1,i.isLoaded=!1,i.loadErrMsg=null),t.curArtboard!==i){if(i){var s,u=t.filterDocumentGuid,d=null!==(s=i.artboard)&&void 0!==s?s:{},h=d.docGuid,f=d.pageGuid,m=d.topSectionId;u&&h!==u&&f!==u&&m!==u&&this.commit("setFilterDocumentGuid",null)}if(t.curArtboard=i,t.curArtboardExtral=null!==o&&void 0!==o?o:null,t.curNode=null,t.artboardDetail.interactionSet.overlayArtboards.splice(0),nr(t),null!=i&&i.isLoaded){var p=i.artboard;if(Object(l["k"])(p)){var v=p.mlConfig;if(Object(l["k"])(v)&&"number"===typeof v.platform){var b=Object(c["G"])(p.docGuid,v.platform);this.commit("setPlatform",b)}var g=Object(c["U"])(p.docGuid);this.commit("setUnitTemplate",g)}}}else a&&this.commit("Tip_showTextTip",{text:"已切换到画板版本#".concat(i.artboard.lastVersionId)})},curNode:function(t,e){Object(l["k"])(e)||(e=null),t.curNode=e,nr(t)},clickedNode:function(t,e){t.clickedNode=e},enterNode:function(t,e){t.enterNode=e},enterArtboard:function(t,e){t.enterArtboard=e},setCloudNickName:function(t,e){t.cloudNickName=e},setMyState:function(t,e){Object(l["k"])(e)&&(t.permission=e.permission,t.cloudNeedLogin=e.needLogin,t.cloudIsLogin=e.isLogin,t.cloudNickName=e.nickName,t.cloudUserEmail=e.email,t.cloudUserId=e.userId,t.cloudUserIsDesigner=e.isDesigner,t.cloudUserIsOwner=!!e.isOwner,c["V"].userKey=t.cloudUserKey=e.userKey,t.cloudName=e.cloudName,t.cloudVersion=e.cloudVersion)},setUserLogout:function(t){t.cloudIsLogin=!1,t.cloudNickName="",t.cloudUserEmail="",t.cloudUserId=0,t.cloudUserIsDesigner=!1,t.cloudUserIsOwner=!1,c["V"].userKey=t.cloudUserKey=""},setDocument:function(t,e){var n=e.documentName,r=e.documentArtboards,i=e.documentGuid,o=e.config,a=e.permission,s=e.inCloudMode,u=e.cloud,d=e.documents,h=e.cloudNeedLogin,f=e.cloudIsLogin,m=e.cloudNickName,p=e.cloudUserEmail,v=e.cloudUserId,b=e.cloudUserIsDesigner,g=e.cloudUserIsOwner,w=e.cloudUserKey,x=e.cloudName,y=e.cloudKey,k=e.cloudVersion;t.documentArtboards=r,t.documents=d,t.sortDocumentsWithSketchDocument=Ve(d),t.documentName=n,t.documentGuid=i,t.config=o,t.permission=a,t.cloudNeedLogin=h,t.cloudIsLogin=f,t.cloudNickName=m,t.cloudUserEmail=p,t.cloudUserId=v,t.cloudUserIsDesigner=b,t.cloudUserIsOwner=g,c["V"].userKey=t.cloudUserKey=w,t.cloudName=x,t.cloudKey=y,t.cloudVersion=k,t.inCloudMode=s,c["V"].cloudVersion=k;var C=t.cloud;Object(l["k"])(u)&&Object.keys(u).forEach((function(t){C[t]=u[t]})),this.commit("setRenderDocuments");var S=Object(c["G"])(i,o.platform);this.commit("setPlatform",S);var T=Object(c["U"])(i);this.commit("setUnitTemplate",T),tr()}},actions:{}});function ar(){var t=or.state.artboardDetail.interactionSet,e=Object(c["K"])("interaction.background",!1)||"#f5f5f5";t.backgroundColor!==e&&(t.backgroundColor=e)}function sr(){var t=parseInt(Object(c["K"])("colortype",!1));if(!(isNaN(t)||!isFinite(t)||t<0)){var e=or.state.setting.color;t<e.items.length&&(e.current=t)}}function cr(){var t="1"===Object(c["K"])("number-auto-round",!1);t&&(or.state.setting.numberAutoRound=!0)}function lr(){var t=+Object(c["K"])("interaction-vertical-align",!1);switch(t){case a["H"].Bottom:case a["H"].Top:case a["H"].Middle:break;default:t=a["H"].Middle;break}or.state.artboardDetail.interactionSet.verticalAlign=t}function ur(){var t=+Object(c["K"])("export-box-background",!1);switch(t){case a["ab"].Black:case a["ab"].Transparent:break;default:t=a["ab"].Transparent}t!==a["ab"].Transparent&&(or.state.setting.exportBoxBackground=t)}function dr(){var t=Object(c["K"])("list-interaction-line");switch(t){case"0":or.state.artboardShowInteractionLine=!1;break;default:or.state.artboardShowInteractionLine=!0;break}}function hr(){var t=Object(c["K"])("list-view-mode");switch(t){case"0":or.state.artRenderInCanvasMode=!1;break;default:or.state.artRenderInCanvasMode=!0;break}}function fr(){var t=Object(c["K"])("art-in-list");switch(t){case"1":or.state.artShowInListMode=!0;break;case"0":or.state.artShowInListMode=!1;break;default:or.state.artShowInListMode=!1,or.state.noviceGuide.artShowInListMode=!0;break}}function mr(){var t=Object(c["K"])("art-list-map");switch(t){case"0":or.state.showArtListMap=!1;break;default:or.state.showArtListMap=!0;break}}function pr(){var t=Object(c["K"])("interaction.pcdeviceset",!0);if(Object(l["k"])(t)){!t.hasBangs||"iPhone 14 Pro Max"!==t.name&&"iPhone 14 Pro"!==t.name||(t.hasBangs=!1,t.iosDynamicIsland=!0);var e=or.state.artboardDetail.interactionSet.pcDeviceSet;Object.keys(e).forEach((function(n){var r=t[n];void 0!==r&&(e[n]=r)}))}else{var n=En;n&&or.commit("setPCDeviceSet",En)}}function vr(){var t=Object(c["K"])("point-comment-showalways");switch(t){case"0":or.state.pointCommentShowAlways=!1;break;default:or.state.pointCommentShowAlways=!0;break}}function br(){var t=Object(c["K"])("slice-border-line-hide");switch(t){case"1":or.state.sliceBorderLineHide=!0;break;default:or.state.sliceBorderLineHide=!1;break}}function gr(){var t=or.state.mobileInteraction.listConfig,e=Object(c["K"])("m-interaction-list-config",!0);Object(l["k"])(e)||(e={}),t.sortType=function(t){switch(t){case a["n"].ArtboardRect:case a["n"].Date:return t;default:return a["n"].Name}}(e.sortType),t.orderDesc=!!e.orderDesc,t.renderType=function(t){switch(t){case a["o"].Artboard:return t;default:return a["o"].All}}(e.renderType)}function wr(){var t;function e(){var n=or.state,r=n.webViewHidden,i=n.webViewFocus,o=document.hasFocus();o!==i&&or.commit("setWebViewFocus",o),clearTimeout(t),r||setTimeout(e,200)}document.addEventListener("visibilitychange",(function(){var t=or.state.webViewHidden,n=Object(c["fb"])();t!=n&&or.commit("setWebViewHidden",n),e()}),!1),e()}function xr(){var t=or.state.cloudListSort,e=Object(c["K"])("cloudlist-item-sort",!0);Object(l["k"])(e)||(e={}),t.sortType=function(t){switch(t){case a["n"].ArtboardRect:case a["n"].Date:return t;default:return a["n"].Name}}(e.sortType),t.orderDesc=!!e.orderDesc}function yr(){function t(){var t=or.state.winRect;t.width=window.innerWidth,t.height=window.innerHeight}window.addEventListener("resize",t),t()}function kr(){}function Cr(){or.state.beginnerGuide.steps=qn.steps}var Sr=or;function Tr(){wr(),ar(),Zn(),sr(),cr(),ur(),hr(),fr(),mr(),pr(),dr(),vr(),br(),gr(),lr(),yr(),kr(),Cr()}var Or=function(){var t=this,e=t._self._c;return e("section",{ref:"main",attrs:{id:"main"}},[!t.cloudNeedLogin||t.cloudIsLogin?e("div",{staticClass:"loading",class:{on:!t.allArtboardLoadChecked,local:!t.inCloudMode}},[t._v("正在加载画板数据中("+t._s(t.artboardLoadProgressText)+"),请稍后...")]):t._e(),t.cloudNeedLogin&&!t.cloudIsLogin?e("CloudNeedLoginTip"):t.allArtboardLoadChecked?[e("Header"),e("main",[e("FolderNav"),t.cloudFolderNotFound?e("EmptyData",{attrs:{text:t.cloudFolderErrorText,showLoginBtn:t.cloudFolderInSpecify}}):t.permission?t.isEmptyFolder?e("EmptyData",{attrs:{text:t.emptyText}}):t.inNetDiskFileMode?e("NetDiskFileMain"):t.inArtboardMode?e("ArtboardInfo"):t._e():e("Authority",{attrs:{include:!0}}),e("keep-alive",[t.cloudFolderNotFound||!t.permission||t.isEmptyArtboardData||t.inArtboardMode||t.inNetDiskFileMode||t.artShowInListMode?t._e():e("ArtboardList")],1),e("InOutputTip"),e("ArtboardListItemMenu")],1)]:t._e(),t.inNetDiskFileMode?t._e():e("SafariWebpTip"),t.inNetDiskFileMode?t._e():e("ImageViewer"),e("Tip"),e("AutomaticSync"),e("ChangeArtboardsTip"),e("BeginnerGuide")],2)},Ir=[],Ar=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"beginner-guide"},[e("Mark",{attrs:{rect:t.maskRect}}),e("div",{staticClass:"guide-box",class:t.guideBoxClass,style:t.guidBoxStyle},[t.currentStep===t.enumSteps.GlobalCloudFolderBoxMenu?e("div",{staticClass:"guide-popcloudfolder"},[e("div",{staticClass:"bg"}),t._m(0)]):t.currentStep===t.enumSteps.HelperMenu?e("div",{staticClass:"guide-helper"},[t._m(1)]):t.currentStep===t.enumSteps.ArtListMap?e("div",{staticClass:"guide-artlistmap"},[t._m(2)]):t.currentStep===t.enumSteps.ArtboardModeMenu?e("div",{staticClass:"guide-artrendermode"},[t.artShowInListMode?[e("div",{staticClass:"bg-art"}),t._m(3)]:[e("div",{staticClass:"bg-list"}),t._m(4)]],2):t.currentStep===t.enumSteps.SliceBorderLineMenu?e("div",{staticClass:"guide-slide-borderline"},[e("div",{staticClass:"bg"}),t._m(5)]):t.currentStep===t.enumSteps.ArtboardDevMode?e("div",{staticClass:"guide-artboard-dev"},[e("div",{staticClass:"bg"}),t._m(6)]):t._e(),e("div",{staticClass:"btns"},[e("div"),e("div",{staticClass:"btn",on:{click:function(e){return t.clickHideCurrentStep()}}},[t._v("我知道了")])])])],1):t._e()},Fr=[function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("显示文件夹树")]),e("dd",[t._v("点击可显示文件夹树，快速浏览所有文件夹或内容，快速搜索特定文件或文件夹。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("快捷操作指南")]),e("dd",[t._v("点击此处可查看常用快捷键和操作方法，帮助您更高效地使用标记狮。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("画板地图")]),e("dd",[t._v("点击此处可在菜单中重新开启画板地图。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("画布视图")]),e("dd",[t._v("点击按钮可切换为以画板为主的画布视图，与设计软件中画板位置一致。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("宫格视图")]),e("dd",[t._v("点击按钮可切换为宫格视图，画板、文件夹和文件整齐排列，方便浏览和管理文件。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("隐藏切图虚线框")]),e("dd",[t._v("点击更多按钮可隐藏切图虚线框，隐藏后[标注]模式下切图图层边缘不会再标识虚线框。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("标记画板为待开发")]),e("dd",[t._v("选中画板右键单击可将画板标记为[待开发]状态、便于快速找到所需画板。")])])}],jr=function(){var t=this,e=t._self._c;return e("svg",{staticStyle:{"pointer-events":"none"},attrs:{width:t.winRect.width,height:t.winRect.height,viewBox:t.viewBox}},[e("defs",[e("mask",{attrs:{id:"hole"}},[e("rect",{attrs:{width:"100%",height:"100%",fill:"white"}}),e("rect",{attrs:{x:t.rect.x,y:t.rect.y,width:t.rect.width,height:t.rect.height,rx:"4",ry:"4",fill:"black"}})])]),e("rect",{attrs:{width:"100%",height:"100%",fill:"rgba(0,0,0,0.6)",mask:"url(#hole)"}})])},_r=[],Mr={computed:{viewBox:function(){var t=this.winRect;return"0 0 ".concat(t.width," ").concat(t.height)},winRect:function(){return this.$store.state.winRect}},props:{rect:Object}},Lr=Mr,Dr=n("829d"),Pr=Object(Dr["a"])(Lr,jr,_r,!1,null,null,null),Nr=Pr.exports,Er={components:{Mark:Nr},methods:{clickHideCurrentStep:function(){qn.finishStep(this.currentStep),this.beginnerGuide.steps=qn.steps}},computed:{guidBoxStyle:function(){var t=this.maskRect,e=t.x,n=t.y,r=t.width,i=t.height,o=t.direction,s=this.winRect,c=10;n+=i+c;var l,u,d=25;switch(o){case a["j"].TopRight:case a["j"].Right:l=Math.round(s.width-e-r/2-d)+"px";break;case a["j"].Left:u=e+r+c+"px",n-=i+d-c;break;default:l=void 0,u=e+Math.round(r/2-d)+"px";break}return{top:n+"px",left:u,right:l}},guideBoxClass:function(){var t=this.visible,e=this.maskRect.direction;if(!t)return null;switch(e){case a["j"].TopRight:return"in-topright";case a["j"].Left:return"in-left";case a["j"].Right:return"in-right";default:return null}},visible:function(){var t=this.maskRect;return t.width>0&&t.height>0},maskRect:function(){var t;return null!==(t=this.currentRect)&&void 0!==t?t:{x:0,y:0,width:0,height:0,direction:a["j"].TopLeft}},beginnerGuide:function(){return this.$store.state.beginnerGuide},steps:function(){return this.beginnerGuide.steps},currentStep:function(){var t=this.steps,e=this.beginnerGuide.rects,n=this.orderStepList,r=n.find((function(n){if((t&n)===n)return!1;var r=e[n];return!(!r||0===r.width||0===r.height)}));return null!==r&&void 0!==r?r:a["k"].None},currentRect:function(){var t,e=this.beginnerGuide.rects,n=this.currentStep;return n===a["k"].None?null:null!==(t=e[n])&&void 0!==t?t:null},enumSteps:function(){return a["k"]},winRect:function(){return this.$store.state.winRect}},data:function(){return{orderStepList:a["k"].getSortValues()}},created:function(){}},Rr=Er,Vr=(n("87fc"),Object(Dr["a"])(Rr,Ar,Fr,!1,null,"64734533",null)),Br=Vr.exports,Hr=function(){var t=this,e=t._self._c;return t.visible?e("div"):t._e()},Ur=[],$r={notSupportRecycle:function(t){return Object(c["o"])("6.0.7890.0",t)},notSupportNetDiskFileVersion:function(t){return Object(c["o"])("6.0.7890.0",t)},notSupportSourceFilePreviewImg:function(t){return Object(c["o"])("5.2.6290.0",t)},notSupportAiPrompt:function(t){return Object(c["o"])("5.3.6840.0",t)},notSupportRecentData:function(t){return!Object(c["o"])(t,"7.0.8222.0")},notSupportSourceFile:function(t){return Object(c["o"])("1.2.1989.0",t)},notSupportArtboardComment:function(t){return Object(c["o"])("1.3.2470.0",t)},notSupportGetFolders:function(t){return Object(c["o"])("1.5.2772.0",t)},notSupportNetDisk:function(t){return Object(c["o"])("1.6.3656.0",t)},notSupportInteraction:function(t){return Object(c["o"])("1.6.3656.0",t)},notSupportWebItemSearch:function(t){return Object(c["o"])("1.6.3656.0",t)},notSupportPublicCloudShowComment:function(t){return Object(c["o"])("1.6.3656.0",t)},notSupportPdfResource:function(t){return Object(c["o"])("5.1.5868.0",t)},notSupportSetFolderColor:function(t){return Object(c["o"])("2.1.4376.0",t)},notSupportFolderLog:function(t){return Object(c["o"])("2.1.4376.0",t)},notSupportFolderSpecifyMember:function(t){return Object(c["o"])("3.0.5050.0",t)},notSupportNetDiskFileWebUpload:function(t){return Object(c["o"])("3.0.5050.0",t)},supportPreviewButNeedAddTypePage:function(t){return Object(c["o"])(t,"6.0.7890")&&Object(c["o"])("6.0.7891",t)},supportPreviewAddTypePage:function(t){return Object(c["o"])(t,"6.0.7890")},previewTxtNeedAddTypePage:function(t){return Object(c["o"])("6.0.7890",t)},supportPreviewAnyFile:function(){return!1},supportRecent:function(t){return Object(c["o"])(t,"6.0.7890.1")},supportDocxPreview:function(t){var e=Object(c["o"])(t,"6.0.7890"),n=!!e&&Object(c["o"])("6.0.7891",t);return{support:e,needAddTypePage:n}},supportPreviewHD:function(t){return Object(c["o"])(t,"6.0.7891")}},Gr=1e4,Wr={methods:{autoGetCurrentFolderFavoriteStatusLater:function(){clearTimeout(this.autoGetCurrentFolderFavoriteStatusHandler),this.autoGetCurrentFolderFavoriteStatusHandler=setTimeout(this.autoGetCurrentFolderFavoriteStatus,500)},autoGetCurrentFolderFavoriteStatus:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,s,c,l,u,d,h,f,m,p,v,b;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.cloudIsLogin,i=t.documentArtboards,o=t.cloudCurrentFolderId,s=t.autoGetCurrentFolderFavoriteStatusHandler,c=t.inCloudViewerMode,l=t.notSupportArtboardStatusVersion,u=t.cloudSubFolders,clearTimeout(s),!l){e.next=4;break}return e.abrupt("return");case 4:if(c&&(0!==i.length||0!==u.length)){e.next=6;break}return e.abrupt("return");case 6:if(!t.webViewHidden&&t.webViewFocus){e.next=8;break}return e.abrupt("return");case 8:if(d={status:a["i"].None,recentTimes:0},h={status:a["q"].None,recentTimes:0},n){e.next=15;break}return u.forEach((function(t){t.customStatus=h.status,t.customStatusUpdateTimes=h.recentTimes})),i.forEach((function(t){t.customStatus=d.status,t.customStatusUpdateTimes=d.recentTimes})),e.abrupt("return");case 15:return e.prev=15,e.next=18,t.getUserFolderRecentsAsync(o,!0,"auto-get-user-folder-recents");case 18:f=e.sent,m=f.favArtboards,p=f.favFolders,v=new Set,b=new Set,u.forEach((function(t){var e,n=null!==t&&void 0!==t?t:{},r=n.id;if(r){var i=null!==(e=p[r])&&void 0!==e?e:h;i.status===t.customStatus&&t.customStatusUpdateTimes===i.recentTimes||(t.customStatus=i.status,t.customStatusUpdateTimes=i.recentTimes,v.add(r))}})),i.forEach((function(t){var e,n,r,i=null!==(e=null===t||void 0===t?void 0:t.artboard)&&void 0!==e?e:{},o=i.id,a=i.cid;if(null!==(n=a)&&void 0!==n||(a=o),a){var s=null!==(r=m[a])&&void 0!==r?r:d;s.status===t.customStatus&&t.customStatusUpdateTimes===s.recentTimes||(t.customStatus=s.status,t.customStatusUpdateTimes=s.recentTimes,b.add(a))}})),v.size>0&&t.$store.commit("refreshRecents",a["Y"].FavoriteFolder),b.size>0&&t.$store.commit("refreshRecents",a["Y"].FavoriteArtboard),e.next=33;break;case 30:e.prev=30,e.t0=e["catch"](15);case 33:return e.prev=33,t.autoGetCurrentFolderFavoriteStatusHandler=setTimeout((function(){t.autoGetCurrentFolderFavoriteStatus()}),Gr),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[15,30,33,36]])})))()},autoGetFolderPrecis:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(clearTimeout(t.autoGetFolderPrecisHandler),t.inCloudMode){e.next=3;break}return e.abrupt("return");case 3:if(!t.cloudFolderNotFound){e.next=5;break}return e.abrupt("return");case 5:if(!t.cloudIsLogin){e.next=7;break}return e.abrupt("return");case 7:if(!t.inNetDiskFileMode){e.next=9;break}return e.abrupt("return");case 9:if(e.prev=9,!t.webViewHidden&&t.webViewFocus){e.next=12;break}return e.abrupt("return");case 12:return t.lastAutoGetTime=Date.now(),e.next=16,t.getFolderPrecis(t.cloudCurrentFolderId,t.folderUpdateTimes);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](9);case 21:return e.prev=21,t.autoGetFolderPrecisHandler=setTimeout((function(){t.autoGetFolderPrecis()}),Gr),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[9,18,21,24]])})))()},autoCheckCloudNotify:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,c,u,d,h,f;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(clearTimeout(t.autoCheckCloudNotifyHandler),t.inCloudMode&&t.cloudIsLogin){e.next=3;break}return e.abrupt("return");case 3:if(e.prev=3,!t.webViewHidden&&t.webViewFocus){e.next=6;break}return e.abrupt("return");case 6:return o=t.cloudKey,a=t.userNotifyCloudList[o],s=0,c=null!==(n=t.sysTipIds[o])&&void 0!==n?n:0,u=null!==(i=t.curArtboardId)&&void 0!==i?i:0,a&&(s=null!==(d=null===(h=a.list[0])||void 0===h?void 0:h.id)&&void 0!==d?d:0),t.lastAutoGetTime=Date.now(),e.prev=14,e.next=17,t.getCloudNotifies(s,u,t.cloudCurrentFolderId,t.folderUpdateTimes);case 17:if(f=e.sent,Object(l["i"])(f)){e.next=20;break}return e.abrupt("return");case 20:if(f=f.filter((function(t){return t.id>c&&!t.readed})),0!==f.length){e.next=23;break}return e.abrupt("return");case 23:e.next=28;break;case 26:e.prev=26,e.t0=e["catch"](14);case 28:e.next=32;break;case 30:e.prev=30,e.t1=e["catch"](3);case 32:return e.prev=32,t.checkUpdateCloudUsers(),t.autoCheckCloudNotifyHandler=setTimeout((function(){t.autoCheckCloudNotify()}),Gr),e.finish(32);case 36:case"end":return e.stop()}}),e,null,[[3,30,32,36],[14,26]])})))()},checkUpdateCloudUsers:function(){var t=this;clearTimeout(this.checkUpdateCloudUsersHandler);var e=this.cloudUsersByCloudData,n=e.userListState,o=e.needUpdate;if(o){var a=Object(c["K"])("getcloudusers",!0);Object(l["k"])(a)||(a={});var s=a,u=s.time,d=s.state;d===n&&u>0&&Math.abs(Date.now()-u)<18e4||(this.checkUpdateCloudUsersHandler=setTimeout(Object(i["a"])(Object(r["a"])().mark((function e(){var i,o,a,s,u;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(c["rb"])("getcloudusers",{time:Date.now(),state:n}),e.prev=1,e.next=4,t.cryptoMarklionWeb2("getcloudusers",{userListState:n},1e4);case 4:i=e.sent,Object(l["k"])(i.data)&&(o=i.data,a=o.cloudUserListNeedUpdate,s=o.cloudUserListState,u=o.cloudUserListTimes,t.updateCloudUsersByCloud({needUpdate:a,userListState:s,times:u})),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])}))),100))}},autoResetWebViewStateTimes:function(){var t=this;clearTimeout(this.autoResetWebViewStateTimesHandler);try{if(this.webViewHidden)return;var e=this.webViewStateTimes,n=Date.now(),r=Math.abs(n-e),i=3e5;r>=i&&(this.$store.state.webViewStateTimes=n)}catch(o){}finally{this.autoResetWebViewStateTimesHandler=setTimeout((function(){t.autoResetWebViewStateTimes()}),Gr)}}},computed:{autoGetFolderPrecisKey:function(){return this.automaticSync.autoGetFolderPrecisKey},automaticSync:function(){return this.$store.state.automaticSync},notSupportArtboardStatusVersion:function(){return $r.notSupportAiPrompt(this.cloudVersion)},folderUpdateTimes:function(){return this.inCloudMode?this.$store.state.cloud.folderUpdateTimes:0},cloudUsersByCloudData:function(){var t;return null!==(t=this.$store.state.userNotify.cloudUsersByCloud[this.cloudKey])&&void 0!==t?t:{}},sysTipIds:function(){return this.$store.state.userNotify.sysTipIds},userNotifyCloudList:function(){return this.$store.state.userNotify.cloudList}},watch:{autoGetFolderPrecisKey:function(t){t>0&&(this.automaticSync.autoGetFolderPrecisKey=0,this.autoGetFolderPrecisHandler=setTimeout(this.autoGetFolderPrecis,1e3),this.autoCheckCloudNotifyHandler=setTimeout(this.autoCheckCloudNotify,1e3))},webViewFocus:function(t){if(t){var e=Date.now()-this.lastAutoGetTime;e>=Gr&&(this.autoCheckCloudNotify(),this.autoGetFolderPrecis(),this.autoGetCurrentFolderFavoriteStatusLater(),this.autoResetWebViewStateTimes())}},webViewHidden:function(t){if(!t){var e=Date.now()-this.lastAutoGetTime;e>=Gr&&(this.autoCheckCloudNotify(),this.autoGetFolderPrecis(),this.autoGetCurrentFolderFavoriteStatusLater(),this.autoResetWebViewStateTimes())}},cloudIsLogin:function(){this.autoCheckCloudNotify(),this.autoGetFolderPrecis(),this.autoGetCurrentFolderFavoriteStatusLater()}},data:function(){return{visible:!1,checkUpdateCloudUsersHandler:0,autoCheckCloudNotifyHandler:0,autoGetFolderPrecisHandler:0,lastAutoGetTime:0,autoGetCurrentFolderFavoriteStatusHandler:0,autoResetWebViewStateTimesHandler:0}},beforeDestroy:function(){clearTimeout(this.autoCheckCloudNotifyHandler),clearTimeout(this.autoGetFolderPrecisHandler),clearTimeout(this.checkUpdateCloudUsersHandler),clearTimeout(this.autoGetCurrentFolderFavoriteStatusHandler),clearTimeout(this.autoResetWebViewStateTimesHandler)},created:function(){this.autoCheckCloudNotifyHandler=setTimeout(this.autoCheckCloudNotify,1e3),this.autoGetFolderPrecisHandler=setTimeout(this.autoGetFolderPrecis,1e3),this.autoResetWebViewStateTimesHandler=setTimeout(this.autoResetWebViewStateTimes,1e4),this.autoGetCurrentFolderFavoriteStatusLater()}},zr=Wr,Yr=Object(Dr["a"])(zr,Hr,Ur,!1,null,null,null),Xr=Yr.exports,Kr=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"change-artboards-tip"},[e("div",{staticClass:"box"},[t._v("发现"+t._s(t.changeArtboardsCount)+"个画板有更新"),e("a",{staticClass:"btn-review-log",attrs:{href:"javascript:;"},on:{click:t.clickShowLog}},[t._v("查看日志")]),e("a",{staticClass:"btn-close",attrs:{href:"javascript:;"},on:{click:t.clearChangeArtboards}})])]):t._e()},qr=[],Jr={methods:{clickShowLog:function(){var t=this;requestAnimationFrame((function(){t.folderPrecis.showArtboardLogNow=Date.now()})),this.clearChangeArtboards()},clearChangeArtboards:function(){this.changeArtboards.splice(0)}},computed:{visible:function(){return this.changeArtboardsCount>0},changeArtboardsCount:function(){return this.changeArtboards.length},folderPrecis:function(){return this.$store.state.folderPrecis},changeArtboards:function(){return this.folderPrecis.changeArtboards}}},Qr=Jr,Zr=(n("9fec"),Object(Dr["a"])(Qr,Kr,qr,!1,null,"3cef9beb",null)),ti=Zr.exports,ei=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-main"},[t.EnumNetDiskFileType.Pdf===t.fileType?e("ViewPdf"):t.EnumNetDiskFileType.Media===t.fileType?e("ViewMedia"):t.EnumNetDiskFileType.Image===t.fileType?e("ViewImage"):t.EnumNetDiskFileType.Lottie===t.fileType?e("ViewLottie"):t.isDocx?e("ViewDocx"):t.isMarkdown?e("ViewMarkdown"):t.isTextFile?e("ViewText"):e("ViewBase")],1)},ni=[],ri=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-docx"},[e("ImageViewer",{attrs:{canClose:!0}}),t.fetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[e("b",[t._v("文档打开中...")]),e("span",{domProps:{textContent:t._s("".concat(t.fetchData.current,"/").concat(t.fetchData.total))}})]),e("div",{staticClass:"percentage"},[e("p",{style:{width:t.fetchData.percentage}})])])]):t.isError?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v(t._s(t.errorText))])]):t._e(),e("div",{ref:"container",staticClass:"container"})],1)},ii=[],oi=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"image-viewer"},[e("div",{staticClass:"header"},[e("div",{staticClass:"control"},[e("div",{staticClass:"btn-prev",class:{disable:0===t.imgList.length||t.currentIndex<1},on:{click:t.clickPrev}}),e("ScaleControl",{attrs:{type:t.EnumScaleType.ImageViewer}}),e("div",{staticClass:"btn-next",class:{disable:0===t.imgList.length||t.currentIndex>=t.imgList.length-1},on:{click:t.clickNext}}),t.canClose?e("div",{staticClass:"line"}):t._e(),t.canClose?e("div",{staticClass:"btn-close",attrs:{title:"关闭 (Esc)"},on:{click:t.clickHide}}):t._e()],1)]),e("div",{staticClass:"main"},[e("ZoomContainer",{attrs:{type:t.EnumScaleType.ImageViewer}})],1)]):t._e()},ai=[],si=function(){var t=this,e=t._self._c;return e("section",{staticClass:"scale-control",class:{light:t.lightTheme}},[e("a",{staticClass:"btn-zoom btn-zoom-out",attrs:{href:"javascript:;"},on:{click:function(e){return t.setScaleZoomOut()}}}),e("span",{staticClass:"text"},[e("a",{attrs:{href:"javascript:;",title:"设置缩放为100%"},on:{click:function(e){return t.setScale(1)}}},[t._v(t._s(t.scaleText))])]),e("a",{staticClass:"btn-zoom btn-zoom-in",attrs:{href:"javascript:;"},on:{click:function(e){return t.setScaleZoomIn()}}}),e("a",{staticClass:"btn-scene-reset",attrs:{href:"javascript:;",title:"重置场景比例和偏移信息"},on:{click:t.clickResetScene}})])},ci=[],li=(n("d064"),n("fe80")),ui={methods:{clickResetScene:function(){switch(this.type){case a["V"].ArtboardList:case a["V"].ArtboardDetail:this.$store.commit("setScale",{reset:!0});break;case a["V"].ImageViewer:this.resetImageViewerScale();break}},quickKey:function(t){var e=t.code||t.key;switch(e){case"-":case"Minus":var n=t.ctrlKey||t.metaKey;n&&(this.setScaleZoomOut(),t.preventDefault());break;case"=":case"Equal":var r=t.ctrlKey||t.metaKey;r&&(this.setScaleZoomIn(),t.preventDefault());break}},setScaleZoomOut:function(){var t=this.scale,e=Math.max(.3*t,.25);e=Math.min(2,e);var n=t-e;this.setScale(Object(c["L"])(t,n))},setScaleZoomIn:function(){var t=this.scale,e=Math.max(.3*t,.25);e=Math.min(2,e);var n=t+e;this.setScale(Object(c["L"])(t,n))},setScale:function(t){var e=this.type,n=this.scale;switch(t=Object(c["z"])(e===a["V"].ArtboardList,t),e){case a["V"].ArtboardList:this.setScaleList(t),this.resetScaleSceneCenter(t,n);break;case a["V"].ArtboardDetail:this.setScaleArtboard(t),this.resetScaleSceneCenter(t,n);break;case a["V"].ImageViewer:this.setScaleImageViewer(t);break}},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})}},computed:{lightTheme:function(){return this.type===a["V"].ImageViewer},EnumScaleType:function(){return a["V"]},scale:function(){switch(this.type){case a["V"].ArtboardList:return this.scaleList;case a["V"].ArtboardDetail:return this.scaleArtboard;case a["V"].ImageViewer:return this.scaleImageViewer;default:return 0}},scaleText:function(){var t=li["a"].mul(this.scale,100).toFixed(1);return-1!=t.indexOf(".0")&&(t=t.replace(".0","")),t+"%"}},created:function(){window.addEventListener("keydown",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey)},props:{type:Number}},di=ui,hi=(n("6bdc"),Object(Dr["a"])(di,si,ci,!1,null,"7fbfd448",null)),fi=hi.exports,mi=function(){var t=this,e=t._self._c;return e("section",{ref:"$info",staticClass:"zoom-container",on:{dragstart:function(t){t.preventDefault()},click:function(e){return e.target!==e.currentTarget?null:t.clickZoomContainer(e)},mousedown:function(e){return t.mousedownZoomContainer(e)}}},[t.inCloudMode&&t.inArtboardInfoMode?e("DrawView",{attrs:{sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneX:t.sceneX,sceneY:t.sceneY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY,scale:t.scale}}):t._e(),t.cloudArtInfoMode?e("section",{staticClass:"zoom-box info-canvas"},[e("CanvasModeArtboardInfo",{attrs:{dragging:t.dragging,scale:t.scale,sceneX:t.sceneX+t.infoCanvasOffset.x,sceneY:t.sceneY+t.infoCanvasOffset.y,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneScaleKeepX:t.sceneScaleKeepX,sceneScaleKeepY:t.sceneScaleKeepY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY}})],1):t._e(),e("section",{staticClass:"zoom-box",style:t.zoomBoxOffset,on:{click:function(e){return e.target!==e.currentTarget?null:t.clickZoomContainer(e)}}},[t.cloudArtListMode?e("CanvasModeArtboardList",{ref:"$instance",attrs:{dragging:t.dragging,scale:t.scale,sceneX:t.sceneX,sceneY:t.sceneY,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneScaleKeepX:t.sceneScaleKeepX,sceneScaleKeepY:t.sceneScaleKeepY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY}}):t.type===t.EnumScaleType.ArtboardList?e("ArtboardList",{ref:"$instance",attrs:{dragging:t.dragging,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight}}):t.inArtboardInfoMode?e("ArtboardInfo",{ref:"$instance",attrs:{dragging:t.dragging,scaling:t.scaling,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight}}):t.inImageViewerMode?e("ViewerBox",{ref:"$instance",attrs:{sceneX:t.sceneX,sceneY:t.sceneY,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight},on:{setConfig:t.setConfig}}):t._e()],1),t.inCloudMode&&t.inArtboardInfoMode?e("CommentPoints",{attrs:{sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneX:t.sceneX,sceneY:t.sceneY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY,scale:t.scale*t.calcArtScale},on:{setConfig:t.setConfig}}):t._e(),t.type===t.EnumScaleType.ArtboardList&&t.showArtListMap?e("ArtboardPreviewsMap",{attrs:{cloudArtListMode:t.cloudArtListMode,sceneX:t.sceneX,sceneY:t.sceneY,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneScale:t.scale},on:{setRectToCenter:t.setRectToCenter}}):t._e()],1)},pi=[],vi=(n("5adb"),function(){var t=this,e=t._self._c;return e("div",{ref:"box",staticClass:"artboard-previews",style:t.canvasStyle,attrs:{"no-wheel":"1"},on:{mousedown:function(e){return e.stopPropagation(),t.mousedownCanvas.apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("canvas",{ref:"canvas",attrs:{width:t.canvasWidth,height:t.canvasHeight}}),e("canvas",{ref:"canvasRect",attrs:{width:t.canvasWidth,height:t.canvasHeight}}),e("ContextMenu",{ref:"contextMenu"},[e("dl",{staticClass:"contextmenu-box",on:{mousedown:function(t){t.stopPropagation()}}},[e("dd",{on:{click:t.clickHideArtListMap}},[t._v("关闭地图")])])])],1)}),bi=[],gi=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"contextmenu",staticClass:"r-contextmenu",style:t.menuStyle},[t._t("default")],2):t._e()},wi=[],xi={methods:{resetOffset:function(){if(this.visible){var t=window,e=t.innerWidth,n=t.innerHeight,r=this.$refs.contextmenu;if(r){var i=r.getBoundingClientRect(),o=e-i.width-3,a=n-i.height-3;this.clientX>o&&(this.clientX=o),this.clientY>a&&(this.clientY=a)}}},$show:function(t,e){clearTimeout(this.handle),this.clientX=t,this.clientY=e,this.showTime=Date.now(),this.visible=!0},$hide:function(){this.visible=!1},autoHide:function(t){var e=this,n=t.type,r=t.button;"mouseup"===n&&0!==r||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.$hide()}),67))}},computed:{autoResetOffsetKey:function(){var t=this.showTime,e=this.visible;return e?"1:".concat(t):""},menuStyle:function(){var t=this.clientX,e=this.clientY;return"left:".concat(t,"px;top:").concat(e,"px;")}},watch:{visible:function(t){clearTimeout(this.handle),window.removeEventListener("contextmenu",this.autoHide,!0),window.removeEventListener("mouseup",this.autoHide,!0),t&&(window.addEventListener("contextmenu",this.autoHide,!0),window.addEventListener("mouseup",this.autoHide,!0))},autoResetOffsetKey:function(t){var e=this;""!==t&&this.$nextTick((function(){e.resetOffset()}))}},data:function(){return{clientX:0,clientY:0,visible:!1,showTime:0,handle:0}},beforeDestroy:function(){this.$hide()}},yi=xi,ki=(n("40ff"),Object(Dr["a"])(yi,gi,wi,!1,null,"f762bbe0",null)),Ci=ki.exports,Si={components:{ContextMenu:Ci},methods:{onContextmenu:function(t){var e;null===(e=this.$refs.contextMenu)||void 0===e||e.$show(t.clientX,t.clientY)},clickHideArtListMap:function(){this.$store.commit("showArtListMap",!1);var t=document.querySelector("header>div.set>div.user-info");if(t){var e=t.getBoundingClientRect(),n=e.x,r=e.y,i=e.width,o=e.height;r-=4,o+=8,this.setBeginnerGuideRect(a["k"].ArtListMap,{x:n,y:r,width:i,height:o,direction:a["j"].TopRight})}},resetCanvasSmoothing:function(){var t=this.$refs,e=t.canvas,n=t.canvasRect,r=this.canvasScale,i=e.getContext("2d");i&&Wt(i,1,r,2),i=n.getContext("2d"),i&&Wt(i,1,r,2)},_drawSectionBackground:function(t,e){t.fillStyle="rgba(141, 149, 158, 1)";var n=this.sceneInfo,r=n.sceneX,i=n.sceneY,o=n.scale,a=e.x,s=e.y,c=e.width,l=e.height;t.fillRect(r+Math.round(a*o),i+Math.round(s*o),Math.round(c*o),Math.round(l*o))},_drawArtboardBackground:function(t,e){t.fillStyle="#fff";var n=this.sceneInfo,r=n.sceneX,i=n.sceneY,o=n.scale,a=e.x,s=e.y,c=e.width,l=e.height;a=r+Math.round(a*o),s=i+Math.round(s*o),c=Math.round(c*o),l=Math.round(l*o),t.fillRect(a,s,c,l)},_draw:function(){var t=this;cancelAnimationFrame(this.handle),this.sceneDelayTimes.artboard=Date.now();var e=this.$refs.canvas;if(e){var n=e.getContext("2d");this.drawAllTime=Date.now();var r=this.canvasWidth,i=this.canvasHeight;n.clearRect(0,0,r,i);var o=this.artboards,a=this.sections;a.forEach((function(e){t._drawSectionBackground(n,e.rect)})),o.forEach((function(e){t._drawArtboardBackground(n,e.rect)}))}},draw:function(){this.handle=requestAnimationFrame(this._draw)},mouseupCanvas:function(){var t;null===(t=this.$refs.box)||void 0===t||t.removeEventListener("mousemove",this.mousedownCanvas),window.removeEventListener("mouseup",this.mouseupCanvas)},mousemoveCanvas:function(t){var e=this.parseMousePointToScene(t);e.width=1,e.height=1,this.$emit("setRectToCenter",e)},mousedownCanvas:function(t){var e;if(0===t.button){null===(e=this.$refs.box)||void 0===e||e.addEventListener("mousemove",this.mousedownCanvas),window.addEventListener("mouseup",this.mouseupCanvas);var n=this.parseMousePointToScene(t);n.width=1,n.height=1,this.$emit("setRectToCenter",n)}},drawLightRect:function(){cancelAnimationFrame(this.drawLightRectHandle);var t=this.$refs.canvasRect,e=this.canvasWidth,n=this.canvasHeight;if(t){var r=t.getContext("2d"),i=this.lightRectDrawRect;i?(this.lightRectDrawRect=null,r.clearRect(i.x-1,i.y-1,i.width+2,i.height+2)):r.clearRect(0,0,e,n),r.strokeStyle="rgba(255, 120, 0, 1)",r.lineWidth=1;var o=this.boxRect;o=o.toJSON(),o.x+=.5,o.y+=.5,Ht(r,o,2,!1),this.lightRectDrawRect=o}},drawLightRectLater:function(){cancelAnimationFrame(this.drawLightRectHandle),this.drawLightRectHandle=requestAnimationFrame(this.drawLightRect)},drawAllDelay:function(){var t=this,e=Date.now();e-this.drawAllTime>=100?(this.drawAllTime=e,clearTimeout(this.handleDrawAllDelay),this.draw(),this.drawLightRectLater()):(clearTimeout(this.handleDrawAllDelay),this.handleDrawAllDelay=setTimeout((function(){clearTimeout(t.handleDrawAllDelay),t.draw(),t.drawLightRectLater()}),66.67))},parseMousePointToScene:function(t){var e=t.layerX,n=t.layerY,r=this.sceneInfo,i=this.canvasScale;return e=Math.round((e*i-r.sceneX)/r.scale),n=Math.round((n*i-r.sceneY)/r.scale),{x:e,y:n}}},computed:{rect:function(){var t=this.renderDocuments,e=t.map((function(t){return{artboard:{boundsInParent:t.rect}}})),n=Object(c["C"])(e);return n},boxRect:function(){var t=this.sceneInfo,e=this.sceneWidth,n=this.sceneHeight,r=this.sceneScale,i=this.sceneX,o=this.sceneY,a=this.cloudArtListMode,s=(new d["a"]).set(-i/r,-o/r,e/r,n/r);if(s.x=Math.round(s.x*t.scale),s.y=Math.round(s.y*t.scale),s.width=Math.round(s.width*t.scale),s.height=Math.round(s.height*t.scale),s.x+=t.sceneX,s.y+=t.sceneY,!a){var c=this.rect;s.x-=Math.round((e/r-c.width)/2*t.scale),s.y-=Math.round((n/r-c.height)/2*t.scale)}return s},sceneInfo:function(){var t=this.rect,e=this.canvasWidth,n=this.canvasHeight,r=.85,i=t.width>0?e/t.width*r:1,o=t.height>0?n/t.height*r:1,a=Math.min(i,o),s=Math.round(t.x*a),c=Math.round(t.y*a);return s+=Math.round((e-a*t.width)/2),c+=Math.round((n-a*t.height)/2),{scale:a,sceneY:c,sceneX:s,scaleBox:r}},sections:function(){var t=[],e=this.renderDocuments;return Object(l["i"])(e)?(e.forEach((function(e){var n=e.maxRect.x-e.rect.x,r=e.maxRect.y-e.rect.y,i=e.sections;Object(l["i"])(i)&&i.forEach((function(e){var i,o=null!==(i=e.boundsInParentForList)&&void 0!==i?i:e.boundsInParent,a={rect:{x:Math.floor(o.x-n),y:Math.floor(o.y-r),width:Math.ceil(o.width),height:Math.ceil(o.height)},section:e};t.push(a)}))})),t):t},artboards:function(){var t=[],e=this.renderDocuments;return Object(l["i"])(e)?(e.forEach((function(e){var n=e.maxRect.x-e.rect.x,r=e.maxRect.y-e.rect.y,i=e.arts;Object(l["i"])(i)&&i.forEach((function(e){var i,o=e.artboard;if(o){var a=null!==(i=o.boundsInParentForList)&&void 0!==i?i:o.boundsInParent,s={rect:{x:Math.floor(a.x-n),y:Math.floor(a.y-r),width:Math.ceil(a.width),height:Math.ceil(a.height)},artboard:e};t.push(s)}}))})),t):t},resetSmoothKey:function(){var t=this.canvasScale;return"".concat(t)},canvasScale:function(){return Object(c["O"])()},canvasWidth:function(){return 180*this.canvasScale},canvasHeight:function(){return 130*this.canvasScale},canvasStyle:function(){var t=this.canvasWidth,e=this.canvasHeight,n=this.canvasScale;return{width:Math.round(t/n)+"px",height:Math.round(e/n)+"px"}},winRect:function(){return this.$store.state.winRect},reDrawRectKey:function(){var t=this.sceneWidth,e=this.sceneHeight,n=this.sceneX,r=this.sceneY,i=this.sceneScale;return"".concat(t,"x").concat(e,"x").concat(n,"x").concat(r,"x").concat(i)},reDrawArtKey:function(){var t=this.canvasWidth,e=this.canvasHeight;return"".concat(t,"x").concat(e)}},watch:{resetSmoothKey:function(){this.resetCanvasSmoothing()},reDrawRectKey:function(){this.drawLightRectLater()},reDrawArtKey:function(){this.draw()},artboards:function(){this.draw(),this.drawLightRectLater()},sections:function(){this.draw(),this.drawLightRectLater()}},props:{sceneWidth:Number,sceneHeight:Number,sceneScale:Number,sceneY:Number,sceneX:Number,cloudArtListMode:Boolean},data:function(){return{handle:0,drawLightRectHandle:0,handleDrawAllDelay:0,drawAllTime:0,sceneDelayTimes:{artboard:0},lightRectDrawRect:null}},mounted:function(){this.resetCanvasSmoothing(),this.drawAllDelay()}},Ti=Si,Oi=(n("787f"),Object(Dr["a"])(Ti,vi,bi,!1,null,"128b3c62",null)),Ii=Oi.exports,Ai=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"draw-view"},[e("DrawControl"),e("canvas",{ref:"canvas_history",class:{move:t.inElementMoveState},attrs:{width:t.sceneWidth*t.canvasScale,height:t.sceneHeight*t.canvasScale},on:{mousedown:t.onMouseDown,mousemove:t.onMouseMoveInCanvas,dragstart:function(t){t.preventDefault()}}}),e("canvas",{ref:"canvas_current",staticClass:"current",attrs:{width:t.sceneWidth*t.canvasScale,height:t.sceneHeight*t.canvasScale}}),e("div",{staticClass:"input"},[t.isCurrentInTextMode?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentDrawData.text,expression:"currentDrawData.text"}],ref:"input",style:t.textareaStyle,attrs:{spellcheck:"false"},domProps:{value:t.currentDrawData.text},on:{input:[function(e){e.target.composing||t.$set(t.currentDrawData,"text",e.target.value)},t.resetTextareaSize],keydown:t.onInputKeyDown,mousedown:function(t){t.stopPropagation()}}}):t._e()])],1):t._e()},Fi=[],ji=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"draw-control-box"},[e("div",{staticClass:"draw-control",class:{black:t.artboardDetailSkin},on:{mousedown:function(t){t.stopPropagation()}}},[e("ul",[e("li",{staticClass:"tool_move",class:{on:t.drawAction===t.EnumDrawAction.Move},attrs:{title:"选择对象"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Move)}}}),e("li",{staticClass:"tool_pen",class:{on:t.drawAction===t.EnumDrawAction.Brush},attrs:{title:"画笔"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Brush)}}}),e("li",{staticClass:"tool_text",class:{on:t.drawAction===t.EnumDrawAction.Text},attrs:{title:"文本输入"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Text)}}}),e("li",{staticClass:"tool_rectangle",class:{on:t.drawAction===t.EnumDrawAction.Rectangle},attrs:{title:"矩形"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Rectangle)}}}),e("li",{staticClass:"tool_ellipse",class:{on:t.drawAction===t.EnumDrawAction.Ellipse},attrs:{title:"椭圆"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Ellipse)}}}),e("li",{staticClass:"tool_arrow",class:{on:t.drawAction===t.EnumDrawAction.Arrow},attrs:{title:"箭头"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Arrow)}}})]),e("ul",[e("li",{staticClass:"his_prev",class:{off:0===t.historyCount||t.historyIndex<0},attrs:{title:"回退到上一步"},on:{click:t.clickHistoryPrev}}),e("li",{staticClass:"his_next",class:{off:0===t.historyCount||t.historyIndex>=t.historyCount-1},attrs:{title:"前进到下一步"},on:{click:t.clickHistoryNext}})]),e("ul",[e("li",{staticClass:"sys_save",attrs:{title:"保存截图"},on:{click:t.clickSave}}),e("li",{staticClass:"sys_cancel",attrs:{title:"取消截图"},on:{click:t.clickCancel}})])]),t.subControlVisible?e("div",{staticClass:"draw-control-sub",class:{black:t.artboardDetailSkin},on:{mousedown:function(t){t.stopPropagation()}}},[e("div",{staticClass:"box"},[t.drawAction===t.EnumDrawAction.Text?e("div",{staticClass:"font-size"},[e("div",{staticClass:"select"},[e("div",{staticClass:"select-text",class:{on:t.fontSizeSelectOpen},on:{click:function(e){t.fontSizeSelectOpen=!t.fontSizeSelectOpen}}},[t._v(t._s(t.drawInfo.fontSize)+"px")]),t.fontSizeSelectOpen?e("ul",{staticClass:"select-list",on:{mousewheel:function(t){t.stopPropagation()},DOMMouseScroll:function(t){t.stopPropagation()}}},t._l(t.DrawFontSize,(function(n,r){return e("li",{key:r,staticClass:"select-item",class:{on:n===t.drawInfo.fontSize},on:{click:function(e){return t.clickFontSize(n)}}},[t._v(t._s(n)+"px")])})),0):t._e()])]):e("ul",{staticClass:"brush-size"},t._l(t.EnumBrushSizeType,(function(n,r){return e("li",{key:r,class:[r,t.drawInfo.brushSize===n?"on":""],on:{click:function(e){t.drawInfo.brushSize=n}}})})),0),e("ul",{staticClass:"colors"},t._l(t.DrawColors,(function(n,r){return e("li",{key:r,class:{on:t.drawInfo.colorIndex===r},on:{click:function(e){t.drawInfo.colorIndex=r}}},[e("span",{style:{borderColor:n.border,backgroundColor:n.color}})])})),0)])]):t._e()]):t._e()},_i=[],Mi=".webp",Li=[".jpeg",".jpg",".gif",".png",Mi,".bmp"],Di=10485760,Pi=5;function Ni(t,e,n,r,i){if(Object(l["k"])(t)&&r){Object(l["j"])(n)&&Ri(t,n),0===e.id&&(e.id=t.userId);var o=i[e.id];o?Object.keys(e).forEach((function(t){o[t]=e[t]})):o=i[e.id]=e,t.user=o;var a=0===r.id;return a||(0!=t.replyUserId&&(o=i[t.replyUserId],t.replyUser=o||null),t.parent=r),t.atUsers={},Object(l["i"])(t.atUserIds)&&t.atUserIds.forEach((function(e){t.atUsers[e]=i[e]})),r.comments.push(t),t}}function Ei(t,e,n){Object(l["k"])(t)||(t={});var r=t,i=r.list,o=r.users;o||(o=null!==n&&void 0!==n?n:{});var a=Object(l["j"])(e);return Object(l["i"])(i)?i.forEach((function(t){Object(l["k"])(t)&&(t.user=o[t.userId],t.replyUser=null,t.atUsers={},Object(l["i"])(t.atUserIds)&&t.atUserIds.forEach((function(e){t.atUsers[e]=o[e]})),Object(l["i"])(t.comments)&&t.comments.forEach((function(n){n.parent=t,n.user=o[n.userId],n.replyUser=o[n.replyUserId],n.atUsers={},Object(l["i"])(n.atUserIds)&&n.atUserIds.forEach((function(t){n.atUsers[t]=o[t]})),a&&Ri(n,e)})),a&&Ri(t,e))})):i=[],i}function Ri(t,e){var n=t.attachMents;if(Object(l["i"])(n))for(var r=0,i=n.length;r<i;r++){var o=n[r];if(o){var a=o.fold;a&&"/"===a[0]&&(o.fold=e+a.substr(1))}}else t.attachMents=[]}var Vi={methods:{clickHistoryPrev:function(){var t=this.historyIndex,e=this.drawInfo;t<0||(t-=1,e.historyIndex=t,e.historyIndexChanges=Date.now())},clickHistoryNext:function(){var t=this.historyIndex,e=this.drawInfo,n=this.histories;t>=n.length-1||(t+=1,e.historyIndex=t,e.historyIndexChanges=Date.now())},clickCleanHistory:function(){this.histories.splice(0),this.drawInfo.historyIndex=-1},clickFontSize:function(t){this.drawInfo.fontSize=t},clickDrawAction:function(t){var e;switch(this.drawAction===t&&(t=P.None),t){case P.Move:e="进入拖拽模式,可拖动对象,选中后可按delete键删除";break}e&&this.showTextTip(e),this.drawInfo.action=t},clickSave:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t.saving){e.next=2;break}return e.abrupt("return");case 2:if(-1!==t.historyIndex&&0!==t.histories.length){e.next=5;break}return t.alert({text:"没有修改信息,无法保存"}),e.abrupt("return");case 5:if(n=t.curArtboardVerData,i=t.rect,n){e.next=9;break}return t.showTextTip("画板信息异常,无法找到画板信息"),e.abrupt("return");case 9:return e.prev=9,t.saving=!0,e.next=13,dt.save(i,t.pathPreview,t.histories,t.historyIndex);case 13:if(a=e.sent,a&&!(a.size<1)){e.next=17;break}return t.alert({text:"保存信息失败,请联系我们反馈该问题"}),e.abrupt("return");case 17:if(!(a.size>Di)){e.next=20;break}return t.alert({text:"保存信息失败,图片大小「".concat(Object(c["zb"])(a.size),"」太大,不能超过「").concat(Object(c["zb"])(Di),"」")}),e.abrupt("return");case 20:a.name="userdraw.jpg",a.lastModified=Date.now(),a.lastModifiedDate=new Date(a.lastModified),null===(o=t.editComment.instance)||void 0===o||o.addAttachMent(a).then((function(){t.showTextTip("图片已添加到评论附件列表")})).catch((function(e){t.showTextTip(e)})),t.editComment.drawing=!1,e.next=30;break;case 27:e.prev=27,e.t0=e["catch"](9),t.showTextTip(e.t0);case 30:return e.prev=30,t.saving=!1,e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[9,27,30,33]])})))()},clickCancel:function(){this.saving=!1,this.editComment.drawing=!1},hideFontSizeSelectLater:function(){this.fontSizeSelectOpen=!1}},computed:{artboardScale:function(){var t,e=null===(t=this.curArtboardVerData)||void 0===t?void 0:t.scale;return e>0?e:1},rect:function(){var t,e=this.curArtboardVerData,n=this.artboardScale,r=null!==(t=null===e||void 0===e?void 0:e.boundsInParent)&&void 0!==t?t:new d["a"];return(new d["a"]).set(0,0,Math.round(r.width*n),Math.round(r.height*n))},curArtboardVerData:function(){var t,e=this.curArtboard;return null!==(t=null===e||void 0===e?void 0:e.artboardVerData)&&void 0!==t?t:null===e||void 0===e?void 0:e.artboard},pathPreview:function(){var t,e=this.curArtboardVerData;return e?(this.isSupportWebp&&(t=e.pathPreviewWebp),t||(t=e.pathPreview),t):null},isSupportWebp:function(){return this.$store.state.isSupportWebp===In.Support},DrawFontSize:function(){return N},EnumBrushSizeType:function(){return R},DrawColors:function(){return V},artboardDetailSkin:function(){return this.$store.state.artboardDetailSkin},drawInfo:function(){return this.editComment.drawInfo},EnumDrawAction:function(){return P},drawAction:function(){return this.drawInfo.action},historyIndex:function(){return this.drawInfo.historyIndex},historyCount:function(){return this.histories.length},histories:function(){return this.drawInfo.histories},subControlVisible:function(){var t=this.drawAction;return t!==P.None&&t!==P.Move},visible:function(){return this.editComment.drawing}},watch:{fontSizeSelectOpen:function(t){var e=this;clearTimeout(this.fontSizeHandle),t?this.fontSizeHandle=setTimeout((function(){window.addEventListener("click",e.hideFontSizeSelectLater)}),66.67):window.removeEventListener("click",this.hideFontSizeSelectLater)}},beforeDestroy:function(){clearTimeout(this.fontSizeHandle),window.removeEventListener("click",this.hideFontSizeSelectLater)},data:function(){return{fontSizeSelectOpen:!1,fontSizeHandle:0,saving:!1}}},Bi=Vi,Hi=(n("3fb5"),Object(Dr["a"])(Bi,ji,_i,!1,null,"3ea6f6ce",null)),Ui=Hi.exports;n("e466");function $i(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(){n("read error")},r.readAsText(t)}))}function Gi(t,e){return Wi.apply(this,arguments)}function Wi(){return Wi=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,o,a,s,c,l,u,d,h,f,m,p;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$i(e);case 2:if(s=t.sent,c=new DOMParser,l=c.parseFromString(s,"image/svg+xml"),u=null!==(i=null===l||void 0===l?void 0:l.documentElement)&&void 0!==i?i:null===l||void 0===l?void 0:l.rootElement,d=null!==(o=null===u||void 0===u||null===(a=u.viewBox)||void 0===a?void 0:a.baseVal)&&void 0!==o?o:{},h=d.width,f=d.height,!("number"!==typeof h||"number"!==typeof f||h<=0||f<=0)){t.next=9;break}throw"error svg";case 9:if(m=+u.getAttribute("width"),p=+u.getAttribute("height"),!(m>0&&p>0)){t.next=13;break}return t.abrupt("return",e);case 13:return(isNaN(m)||m<=0)&&(m=n),(isNaN(p)||p<=0)&&(p=Math.round(m/h*f)),u.setAttribute("width",m),u.setAttribute("height",p),t.abrupt("return",new Blob([u.outerHTML],{type:"image/svg+xml"}));case 18:case"end":return t.stop()}}),t)}))),Wi.apply(this,arguments)}function zi(t,e,n,r,i){return Yi.apply(this,arguments)}function Yi(){return Yi=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,o,a){var s,c,l,u,d,h,f,m,p,v,b,g;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return t.prev=1,t.next=4,Gi(e,n);case 4:e=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](1);case 9:return t.next=11,new Promise((function(t,r){var i=URL.createObjectURL(e),o=new Image;o.onerror=function(t){var e=t.target;e.onerror=e.onload=null,i&&URL.revokeObjectURL(i),r("img load error")},o.onload=function(e){var n=e.target;n.onerror=n.onload=null,i&&URL.revokeObjectURL(i),t(n)},o.width=n,o.src=i}));case 11:return l=t.sent,u=null!==(s=l.naturalWidth)&&void 0!==s?s:l.width,d=null!==(c=l.naturalHeight)&&void 0!==c?c:l.height,h=n/u,m="function"===typeof window.OffscreenCanvas,t.prev=16,f=m?new window.OffscreenCanvas(10,10):document.createElement("canvas"),m||(f.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(f)),p=f.getContext("2d"),t.next=22,yo(l,f,p,m,h,i);case 22:if(v=t.sent,o){t.next=25;break}return t.abrupt("return",v);case 25:return t.next=27,new Promise((function(t,e){var n=new FileReader;n.addEventListener("load",(function(e){t(e.target.result)})),n.addEventListener("error",(function(){e("blob转换成base64失败")})),n.readAsDataURL(v)}));case 27:return v=t.sent,b=Math.max(Math.round(d*h),1),t.abrupt("return",new Blob(['<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'.concat(n,'" height="').concat(b,'" viewBox="0 0 ').concat(n," ").concat(b,'"><image width="').concat(n,'" height="').concat(b,'" xlink:href="').concat(v,'"/></svg>')],{type:"image/svg+xml"}));case 30:return t.prev=30,f&&(g=f.parentNode,g&&g.removeChild(f)),f=null,t.finish(30);case 34:case"end":return t.stop()}}),t,null,[[1,7],[16,,30,34]])}))),Yi.apply(this,arguments)}var Xi=Object(ht["createLoadGlobalLibraryFunc"])("zip","zip-full.min.js"),Ki=function(){function t(){Object(_["a"])(this,t)}return Object(j["a"])(t,null,[{key:"getSketchFileImgPreviewAsync",value:function(){var e=Object(i["a"])(Object(r["a"])().mark((function e(n,i){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.geZipFileImgPreviewAsync(n,i,["previews/preview.png"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"getXDFileImgPreviewAsync",value:function(){var e=Object(i["a"])(Object(r["a"])().mark((function e(n,i){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.geZipFileImgPreviewAsync(n,i,["preview.png","thumbnail.png"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"getFigmaFileImgPreviewAsync",value:function(){var e=Object(i["a"])(Object(r["a"])().mark((function e(n,i){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.geZipFileImgPreviewAsync(n,i,["thumbnail.png"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"geZipFileImgPreviewAsync",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){var o,a,s,u,d,h,f,m,p,v;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n.file=null,t.next=4,Xi.loadAsync();case 4:return o=t.sent,a=null,s=new o.ZipReader(new o.BlobReader(e)),u=!1,t.prev=8,t.next=11,s.getEntries();case 11:if(d=t.sent,!(d.length<1)){t.next=14;break}return t.abrupt("return",!1);case 14:h={},f={},i.forEach((function(t){f[t]=1})),d.forEach((function(t){var e,n=null===(e=t.filename)||void 0===e?void 0:e.toLowerCase();Object(l["j"])(n)&&f[n]&&(h[n]=t)})),p=0;case 19:if(!(p<i.length)){t.next=27;break}if(v=i[p],m=h[v],!m){t.next=24;break}return t.abrupt("break",27);case 24:p++,t.next=19;break;case 27:if(m){t.next=29;break}return t.abrupt("return",!1);case 29:return t.next=31,m.getData(new o.BlobWriter);case 31:a=t.sent;case 32:return t.prev=32,u||s.close(),t.finish(32);case 35:if(null!=a){t.next=37;break}return t.abrupt("return",!1);case 37:return t.next=39,zi(a,c["g"],.6,!1,!1);case 39:return n.file=t.sent,t.abrupt("return",null!=n.file);case 43:return t.prev=43,t.t0=t["catch"](0),t.abrupt("return",!1);case 46:case"end":return t.stop()}}),t,null,[[0,43],[8,,32,35]])})));function e(e,n,r){return t.apply(this,arguments)}return e}()}]),t}(),qi=function(){function t(){Object(_["a"])(this,t),Object(M["a"])(this,"files",[]),Object(M["a"])(this,"ZipLib",null)}return Object(j["a"])(t,[{key:"init",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Xi.loadAsync();case 2:this.ZipLib=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,o,a,s,l;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.files.length){t.next=2;break}throw"文件列表为空";case 2:return i=this.ZipLib,o=new i.BlobWriter,a=new i.ZipWriter(o),s=!1,t.prev=6,t.next=9,this.fetch(a,n);case 9:return t.next=11,a.close();case 11:return s=!0,t.next=14,o.getData();case 14:return l=t.sent,Object(c["w"])(e,l),t.abrupt("return","success");case 19:throw t.prev=19,t.t0=t["catch"](6),s||a.close(),t.t0;case 23:case"end":return t.stop()}}),t,this,[[6,19]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"fetch",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,o,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=this.ZipLib,o=this.files.splice(0,1)[0],void 0!==o){t.next=4;break}return t.abrupt("return");case 4:if(!o.isPdf||!n){t.next=10;break}return t.next=7,n(o.resSrc,o.scale,o.isPdf);case 7:a=t.sent,t.next=20;break;case 10:return t.next=12,Object(c["x"])(o.resSrc,o.base64ResSrc);case 12:if(a=t.sent,"string"!==typeof a){t.next=16;break}t.next=20;break;case 16:if(!n){t.next=20;break}return t.next=19,n(a,o.scale,o.isPdf);case 19:a=t.sent;case 20:return t.next=22,e.add(o.filename,"string"===typeof a?new i.Data64URIReader(a):new i.BlobReader(a));case 22:return t.next=24,this.fetch(e,n);case 24:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"addFile",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.files.push({filename:t,resSrc:e,base64ResSrc:n,scale:r,isPdf:i})}}]),t}(),Ji=n("5945");n("4809"),n("f0fe"),n("a5cb"),n("dc4c"),n("1a43"),n("b048"),n("216f"),n("2276"),n("20b4"),n("97a5"),n("d3c5"),n("0274"),n("c88e"),n("a932"),n("4c0c"),n("b0cc"),n("9b5a"),n("db09"),n("85bf"),n("aedb"),n("1bf9"),n("e38e"),n("684f"),n("1afe"),n("37d6"),n("601e"),n("b510"),n("6b16"),n("d80c"),n("60bd"),n("d569"),n("36e7");function Qi(t){return Zi.apply(this,arguments)}function Zi(){return Zi=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(ht["createFetch"])(e,{method:"GET"});case 2:n=t.sent,t.t0=n.status,t.next=200===t.t0?6:500===t.t0||403===t.t0?10:404===t.t0?14:15;break;case 6:return t.next=8,n.text();case 8:return i=t.sent,t.abrupt("return",Object(c["q"])(i));case 10:return t.next=12,n.text();case 12:throw o=t.sent,"[".concat(n.status,"] ").concat(o);case 14:throw"[404] 资源不存在";case 15:throw"请求失败:".concat(e);case 16:case"end":return t.stop()}}),t)}))),Zi.apply(this,arguments)}var to={ANDROID_MIPMAP:[{name:"mdpi",minname:"mdpi",scale:1,filepath:"mipmap-mdpi/{$name$}.png",resname:"{$name$}.png",errorField:"exportErrPng"},{name:"hdpi",minname:"hdpi",scale:1.5,filepath:"mipmap-hdpi/{$name$}.png",resname:"{$name$}@1.5x.png",errorField:"exportErrPng@1.5x"},{name:"xhdpi",minname:"xhdpi",scale:2,filepath:"mipmap-xhdpi/{$name$}.png",resname:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"xxhdpi",minname:"xxhdpi",scale:3,filepath:"mipmap-xxhdpi/{$name$}.png",resname:"{$name$}@3x.png",errorField:"exportErrPng@3x"},{name:"xxxhdpi",minname:"xxxhdpi",scale:4,filepath:"mipmap-xxxhdpi/{$name$}.png",resname:"{$name$}@4x.png",errorField:"exportErrPng@4x"}],ANDROID:[{name:"mdpi",minname:"mdpi",scale:1,filepath:"drawable-mdpi/{$name$}.png",resname:"{$name$}.png",errorField:"exportErrPng"},{name:"hdpi",minname:"hdpi",scale:1.5,filepath:"drawable-hdpi/{$name$}.png",resname:"{$name$}@1.5x.png",errorField:"exportErrPng@1.5x"},{name:"xhdpi",minname:"xhdpi",scale:2,filepath:"drawable-xhdpi/{$name$}.png",resname:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"xxhdpi",minname:"xxhdpi",scale:3,filepath:"drawable-xxhdpi/{$name$}.png",resname:"{$name$}@3x.png",errorField:"exportErrPng@3x"},{name:"xxxhdpi",minname:"xxxhdpi",scale:4,filepath:"drawable-xxxhdpi/{$name$}.png",resname:"{$name$}@4x.png",errorField:"exportErrPng@4x"}],IOS:[{name:"标准尺寸 @1x",scale:1,filepath:"{$name$}.png",errorField:"exportErrPng"},{name:"视网膜 @2x",scale:2,filepath:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"高清视网膜 @3x",scale:3,filepath:"{$name$}@3x.png",errorField:"exportErrPng@3x"}],WEB:[{name:"Web @1x",scale:1,filepath:"{$name$}.png",errorField:"exportErrPng"},{name:"Web @2x",scale:2,filepath:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"Web @3x",scale:3,filepath:"{$name$}@3x.png",errorField:"exportErrPng@3x"}],WeChatMiniProgram:[{name:"标准尺寸 @1x",scale:1,filepath:"{$name$}.png",errorField:"exportErrPng"},{name:"视网膜 @2x",scale:2,filepath:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"高清视网膜 @3x",scale:3,filepath:"{$name$}@3x.png",errorField:"exportErrPng@3x"}]},eo={name:"SVG",scale:1,filepath:"{$name$}.svg",errorField:"exportErrSvg"},no={name:"PDF",scale:1,filepath:"{$name$}.pdf",errorField:"exportErrPdf"},ro=[{scale:1,ext:".png"},{scale:1,ext:".svg"},{scale:2,ext:"@2x.png"},{scale:3,ext:"@3x.png"},{scale:4,ext:"@4x.png"},{scale:1.5,ext:"@1.5x.png"}],io=function(t,e,n,r,i,o,s,c){if(r)return[{value:eo,enabled:!0}];if(i)return[{value:no,enabled:!0}];var l;switch(e){case a["c"].ANDROID:l=n?to.ANDROID_MIPMAP:to.ANDROID;break;case a["c"].IOS:l=to.IOS;break;case a["c"].WE_CHAT_MINI_PROGRAM:l=to.WeChatMiniProgram;break;default:l=to.WEB;break}var u=To(t,c),d=u.mlConfig.scalesObj;return l.map((function(t){return{value:t,enabled:o&&1===t.scale||s&&1===t.scale||!o&&!s&&1===d[t.scale]}}))},oo=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){var o,a,s,u,d,h,f,m,p,v,b,g,w,x;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=To(n,i),Object(c["m"])(o)){t.next=3;break}return t.abrupt("return");case 3:if(Object(l["i"])(e)&&0!==e.length){t.next=5;break}throw"至少需要选中一个节点才能激活下载";case 5:if(a=Object(c["X"])(o),a){t.next=8;break}throw"设计狮没有为该画板导出「PDF」格式的切图";case 8:if(s=0,u={},d=[],e.forEach((function(t){if(Object(l["k"])(t)&&t.markedForExport){var e=Object(c["M"])(t);if(Object(l["j"])(e)){var n=Object(c["Q"])(e),r=no.filepath;r=r.replace("{$name$}",n);var i=u[r];if(i){var o=++i.index;r=no.filepath,r=r.replace("{$name$}","".concat(n,"(").concat(o,")"))}else u[r]={index:0};d.push({filepath:r,node:t,nodeName:e}),s+=1}}})),0!==d.length){t.next=16;break}throw"至少需要选中一个节点才能激活下载";case 16:if(1!==d.length){t.next=25;break}return h=d[0],f=h.node,m=h.nodeName,p=jo(o,f),v=p.png,b=p.base64Png,g="".concat(m,".pdf"),t.next=22,Object(c["u"])(g,v,b);case 22:return t.abrupt("return",t.sent);case 25:return w=new qi,t.next=28,w.init();case 28:return d.forEach((function(t){var e=t.node,n=t.filepath,r=jo(o,e),i=r.png,a=r.base64Png;w.addFile(n,i,a)})),x=1===s?d[0].nodeName:o.name,t.next=32,w.start("pdf_".concat(x,".zip"));case 32:return t.abrupt("return",t.sent);case 33:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();function ao(t,e,n){return so.apply(this,arguments)}function so(){return so=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){var o,a,s,u;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=To(n,i),Object(c["m"])(o)){t.next=3;break}return t.abrupt("return");case 3:if(Object(l["k"])(e)&&e.markedForExport){t.next=5;break}return t.abrupt("return");case 5:return a=Fo(o,e),s=a.png,u=a.base64Png,t.abrupt("return",Qi(null!==s&&void 0!==s?s:u));case 7:case"end":return t.stop()}}),t)}))),so.apply(this,arguments)}var co=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){var o,a,s,u,d,h,f,m,p,v,b,g,w,x;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=To(n,i),Object(c["m"])(o)){t.next=3;break}return t.abrupt("return");case 3:if(Object(l["i"])(e)&&0!==e.length){t.next=5;break}throw"至少需要选中一个节点才能激活下载";case 5:if(a=Object(c["Z"])(o),a){t.next=8;break}throw"设计狮没有为该画板导出「SVG」格式的切图";case 8:if(s=0,u={},d=[],e.forEach((function(t){if(Object(l["k"])(t)&&t.markedForExport){var e=Object(c["M"])(t);if(Object(l["j"])(e)){var n=Object(c["Q"])(e),r=eo.filepath;r=r.replace("{$name$}",n);var i=u[r];if(i){var o=++i.index;r=eo.filepath,r=r.replace("{$name$}","".concat(n,"(").concat(o,")"))}else u[r]={index:0};d.push({filepath:r,node:t,nodeName:e}),s+=1}}})),0!==d.length){t.next=16;break}throw"至少需要选中一个节点才能激活下载";case 16:if(1!==d.length){t.next=25;break}return h=d[0],f=h.node,m=h.nodeName,p=Fo(o,f),v=p.png,b=p.base64Png,g="".concat(m,".svg"),t.next=22,Object(c["u"])(g,v,b);case 22:return t.abrupt("return",t.sent);case 25:return w=new qi,t.next=28,w.init();case 28:return d.forEach((function(t){var e=t.node,n=t.filepath,r=Fo(o,e),i=r.png,a=r.base64Png;w.addFile(n,i,a)})),x=1===s?d[0].nodeName:o.name,t.next=32,w.start("svg_".concat(x,".zip"));case 32:return t.abrupt("return",t.sent);case 33:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();function lo(t){return uo.apply(this,arguments)}function uo(){return uo=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,o,a,s,l,u,d;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,n){var r=new Image;r.onerror=function(t){var e=t.target;e.onerror=e.onload=null,n("img load error")},r.onload=function(e){var n=e.target;n.onerror=n.onload=null,t(n)},r.src=e}));case 2:if(i=t.sent,o=null!==(n=i.naturalWidth)&&void 0!==n?n:i.width,a=c["g"]/o,!(a>=1)){t.next=7;break}return t.abrupt("return",e);case 7:return l="function"===typeof window.OffscreenCanvas,t.prev=8,s=l?new window.OffscreenCanvas(10,10):document.createElement("canvas"),l||(s.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(s)),u=s.getContext("2d"),t.next=14,bo(i,s,u,l,a);case 14:return t.abrupt("return",t.sent);case 15:return t.prev=15,s&&(d=s.parentNode,d&&d.removeChild(s)),s=null,t.finish(15);case 19:case"end":return t.stop()}}),t,null,[[8,,15,19]])}))),uo.apply(this,arguments)}function ho(t){if(!t)throw new Error("artboard is null");var e=t.boundsInArtboard,n=t.boundsInParent,r=t.mlConfig,i=t.scale;if(e){var o=e.width,a=e.height;return{width:o,height:a}}if(n){var s,c,l=n.width,u=n.height,h=null!==(s=null!==(c=null===r||void 0===r?void 0:r.artScale)&&void 0!==c?c:i)&&void 0!==s?s:1;if(l=Object(d["b"])(l,h,!1),u=Object(d["b"])(u,h,!1),isNaN(l)||isNaN(u))throw new Error("artboard size error,bounds=".concat(JSON.stringify(n),",scale=").concat(h));return{width:l,height:u}}throw new Error("try get artboard size failed")}function fo(t,e,n,r){return mo.apply(this,arguments)}function mo(){return mo=Object(i["a"])(Object(r["a"])().mark((function t(e,n,o,a){var s,l,u,d,h,f=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=f.length>4&&void 0!==f[4]?f[4]:2,Object(c["m"])(a)){t.next=3;break}return t.abrupt("return");case 3:return c["V"].inCloudMode&&(u=ho(a),d=u.width,h=u.height,d=Math.ceil(d*s),h=Math.ceil(h*s),l=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,o,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i="function"===typeof window.OffscreenCanvas,t.prev=1,n=i?new window.OffscreenCanvas(10,10):document.createElement("canvas"),i||(n.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(n)),o=n.getContext("2d"),t.next=7,wo(e,n,o,i,d,h);case 7:return t.abrupt("return",t.sent);case 8:return t.prev=8,n&&(a=n.parentNode,a&&a.removeChild(n)),n=null,t.finish(8);case 12:case"end":return t.stop()}}),t,null,[[1,,8,12]])})));return function(e){return t.apply(this,arguments)}}()),t.abrupt("return",Object(c["u"])(e,n,o,l));case 5:case"end":return t.stop()}}),t)}))),mo.apply(this,arguments)}function po(t,e,n){return vo.apply(this,arguments)}function vo(){return vo=Object(i["a"])(Object(r["a"])().mark((function t(e,n,o){var a,s,u,d,h,f,m,p,v,b,g,w,x;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(l["i"])(n)&&0!==n.length){t.next=2;break}throw"至少需要选中一个画板才能激活下载";case 2:if(o*=2,a=[],s={},n.forEach((function(t){if(Object(c["m"])(t)){var e=Object(c["Q"])(t.name),n=e,r=s[n],i=t.artboardPreviewPng,u=Object(l["j"])(i)&&/\.webp$/i.test(i)?".webp":".png",d=t.artboardPreviewJS;if(r){var h=++r.index;n="".concat(e,"(").concat(h,")")}else s[n]={index:0};var f="".concat(e).concat(1===o?"":"@".concat(o,"x")).concat(u);n+=u,a.push({filename:n,pngurl:i,jsurl:d,artboard:t,filenameAlone:f})}})),0!==a.length){t.next=10;break}throw"至少需要选中一个画板才能激活下载";case 10:if(1!==a.length){t.next=17;break}return u=a[0],d=u.filenameAlone,h=u.pngurl,f=u.jsurl,m=u.artboard,t.next=14,fo(d,h,f,m,o);case 14:return t.abrupt("return",t.sent);case 17:return p=new qi,t.next=20,p.init();case 20:return a.forEach((function(t){var e=t.filename,n=t.pngurl,r=t.jsurl,i=t.artboard,a=ho(i),s=a.width,c=a.height;s=Math.ceil(s*o),c=Math.ceil(c*o),p.addFile(e,n,r,{width:s,height:c})})),t.prev=21,c["V"].inCloudMode&&(g="function"===typeof window.OffscreenCanvas,v=g?new window.OffscreenCanvas(10,10):document.createElement("canvas"),g||(v.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(v)),w=v.getContext("2d"),b=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=n.width,o=n.height,t.next=3,wo(e,v,w,g,i,o);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),t.next=25,p.start(e+".zip",b);case 25:return t.abrupt("return",t.sent);case 26:return t.prev=26,v&&(x=v.parentNode,x&&x.removeChild(v)),v=null,t.finish(26);case 30:case"end":return t.stop()}}),t,null,[[21,,26,30]])}))),vo.apply(this,arguments)}function bo(t,e,n,r,i){return go.apply(this,arguments)}function go(){return go=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,o,a){var s,c,l,u,d,h,f=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=f.length>5&&void 0!==f[5]?f[5]:.7,1!==a){t.next=3;break}return t.abrupt("return",e);case 3:return t.next=5,G(e);case 5:if(c=t.sent,l=c.naturalWidth||c.width,u=c.naturalHeight||c.height,d=Math.round(l*a),h=Math.round(u*a),n.width=d,n.height=h,i.drawImage(c,0,0,l,u,0,0,d,h),!o||!n.convertToBlob){t.next=17;break}return t.next=16,n.convertToBlob({type:"image/png",quality:s});case 16:return t.abrupt("return",t.sent);case 17:return t.next=19,ut(n,"image/png",s);case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t)}))),go.apply(this,arguments)}function wo(t,e,n,r,i,o){return xo.apply(this,arguments)}function xo(){return xo=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,o,a,s){var c,l,u,d,h=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c=h.length>6&&void 0!==h[6]?h[6]:.7,t.next=3,G(e);case 3:if(l=t.sent,u=l.naturalWidth||l.width,d=l.naturalHeight||l.height,Math.abs(u-a)<=5&&(a=u),Math.abs(d-s)<=5&&(s=d),u!==a||d!==s){t.next=11;break}return t.abrupt("return",e);case 11:if(n.width=a,n.height=s,i.drawImage(l,0,0,u,d,0,0,a,s),!o||!n.convertToBlob){t.next=18;break}return t.next=17,n.convertToBlob({type:"image/png",quality:c});case 17:return t.abrupt("return",t.sent);case 18:return t.next=20,ut(n,"image/png",c);case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t)}))),xo.apply(this,arguments)}function yo(t,e,n,r,i){return ko.apply(this,arguments)}function ko(){return ko=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,o,a){var s,c,l,u,d,h,f=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=f.length>5&&void 0!==f[5]?f[5]:.7,t.next=3,G(e);case 3:if(c=t.sent,l=c.naturalWidth||c.width,u=c.naturalHeight||c.height,d=Math.round(l*a),h=Math.round(u*a),n.width=d,n.height=h,i.drawImage(c,0,0,l,u,0,0,d,h),!o||!n.convertToBlob){t.next=15;break}return t.next=14,n.convertToBlob({type:"image/png",quality:s});case 14:return t.abrupt("return",t.sent);case 15:return t.next=17,ut(n,"image/png",s);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)}))),ko.apply(this,arguments)}function Co(t,e,n,r,i){return So.apply(this,arguments)}function So(){return So=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,o,a){var s,c,l;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,G(e);case 2:if(s=t.sent,c=s.naturalWidth||s.width,l=s.naturalHeight||s.height,n.width=c,n.height=l,i.fillStyle="#fff",i.fillRect(0,0,c,l),i.drawImage(s,0,0,c,l,0,0,c,l),!o||!n.convertToBlob){t.next=14;break}return t.next=13,n.convertToBlob({type:"image/jpeg",quality:a});case 13:return t.abrupt("return",t.sent);case 14:return t.next=16,ut(n,"image/jpeg",a);case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t)}))),So.apply(this,arguments)}function To(t,e){var n,r;if(!t)return null;var i=t.artboardVerData,o=t.artboard;return e||(i=null),null!==(n=null!==(r=i)&&void 0!==r?r:o)&&void 0!==n?n:null}var Oo=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,o,s,u,d,h){var f,m,p,v,b,g,w,x,y,k,C,S,T,O,I,A,F,j,_,M,L,D,P,N,E,R,V;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(f=To(u,h),Object(c["m"])(f)){t.next=3;break}return t.abrupt("return");case 3:if(Object(l["i"])(s)&&0!==s.length){t.next=5;break}throw"至少需要选中一个节点才能激活下载";case 5:if(Object(l["k"])(o)){t.next=7;break}throw"至少需要选中一个图片规格才能激活下载";case 7:if(!Object(c["Y"])(f)){t.next=11;break}m=a["fb"].PNG,t.next=24;break;case 11:if(!Object(c["ab"])(f)){t.next=15;break}m=a["fb"].WEBP,t.next=24;break;case 15:if(!Object(c["Z"])(f)){t.next=19;break}m=a["fb"].SVG,t.next=24;break;case 19:if(!Object(c["X"])(f)){t.next=23;break}m=a["fb"].PDF,t.next=24;break;case 23:throw"设计狮没有为该画板导出任何格式的切图";case 24:if(p=m===a["fb"].SVG,v=m===a["fb"].PDF,b=[],p||v?o[1]&&b.push(1):(g=f.mlConfig.scalesObj,Object.keys(o).forEach((function(t){g[t]&&o[t]&&b.push(t)}))),0!==b.length){t.next=30;break}throw"至少需要选中一个图片规格才能激活下载";case 30:if(w=io(u,e,n,!1,!1,p,v,h),x=[],y={},k={},b.forEach((function(t){var e=w.find((function(e){return e.enabled&&e.value.scale==t}));if(null==e)throw"意外的程序性异常,丢失downloadType";y[t]=e.value.filepath})),C=!p&&!v&&m===a["fb"].WEBP,S=0,s.forEach((function(t){if(Object(l["k"])(t)&&t.markedForExport){var e=Object(c["M"])(t);if(Object(l["j"])(e)){var n=Object(c["Q"])(e);b.forEach((function(r){var i=y[r];i=i.replace("{$name$}",n).replace(/\.(png|svg|pdf)$/i,".jpg");var o=k[i];if(o){var a=++o.index;i=y[r],i=i.replace("{$name$}","".concat(n,"(").concat(a,")")).replace(/\.(png|svg|pdf)$/i,".jpg")}else k[i]={index:0};x.push({filepath:i,node:t,scale:r,nodeName:e})})),S+=1}}})),0!==x.length){t.next=40;break}throw"至少需要选中一个节点才能激活下载";case 40:if(O="function"===typeof window.OffscreenCanvas,t.prev=41,T=O?new window.OffscreenCanvas(10,10):document.createElement("canvas"),O||(T.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(T)),I=T.getContext("2d"),1!==x.length){t.next=56;break}if(A=x[0],F=A.node,j=A.scale,_=A.nodeName,M=v?jo(f,F):p?Fo(f,F):Ao(f,F,j,C),L=M.png,D=M.base64Png,P=Object(c["H"])(e,j,_,a["fb"].JPG),!v){t.next=51;break}return t.abrupt("return",Object(c["t"])(P,L,d,[j]));case 51:return t.next=53,Object(c["v"])(P,L,D,function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co(e,T,I,O,d);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 53:return t.abrupt("return",t.sent);case 56:return N=new qi,t.next=59,N.init();case 59:x.forEach((function(t){var e=t.node,n=t.scale,r=t.filepath,i=v?jo(f,e):p?Fo(f,e):Ao(f,e,n,C),o=i.png,a=i.base64Png;N.addFile(r,o,a,n,v)})),E=1===S?x[0].nodeName:f.name,t.t0=e,t.next=t.t0===a["c"].ANDROID?64:t.t0===a["c"].IOS?66:t.t0===a["c"].WE_CHAT_MINI_PROGRAM?68:70;break;case 64:return R="android_",t.abrupt("break",72);case 66:return R="ios_",t.abrupt("break",72);case 68:return R="wxmp_",t.abrupt("break",72);case 70:return R="web_",t.abrupt("break",72);case 72:return t.next=74,N.start(R+E+".zip",function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i){t.next=4;break}return t.next=3,Object(Ji["a"])(e,d,[n]);case 3:return t.abrupt("return",t.sent[0]);case 4:return t.next=6,Co(e,T,I,O,d);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}());case 74:return t.abrupt("return",t.sent);case 75:return t.prev=75,T&&(V=T.parentNode,V&&V.removeChild(T)),T=null,t.finish(75);case 79:case"end":return t.stop()}}),t,null,[[41,,75,79]])})));return function(e,n,r,i,o,a,s){return t.apply(this,arguments)}}(),Io=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,o,s,u,d){var h,f,m,p,v,b,g,w,x,y,k,C,S,T,O,I,A,F,j,_;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(h=To(s,d),Object(c["m"])(h)){t.next=3;break}return t.abrupt("return");case 3:if(Object(l["i"])(o)&&0!==o.length){t.next=5;break}throw"至少需要选中一个节点才能激活下载";case 5:if(Object(l["k"])(i)){t.next=7;break}throw"至少需要选中一个图片规格才能激活下载";case 7:if(!u){t.next=13;break}if(f=Object(c["ab"])(h),f){t.next=11;break}throw"设计狮没有为该画板导出「WEBP」格式的切图";case 11:t.next=16;break;case 13:if(f=Object(c["Y"])(h),f){t.next=16;break}throw"设计狮没有为该画板导出「PNG」格式的切图";case 16:if(m=[],p=h.mlConfig.scalesObj,Object.keys(i).forEach((function(t){p[t]&&i[t]&&m.push(t)})),0!==m.length){t.next=21;break}throw"至少需要选中一个图片规格才能激活下载";case 21:if(v=io(s,e,n,!1,!1,!1,!1,d),b=[],g={},w={},m.forEach((function(t){var e=v.find((function(e){return e.enabled&&e.value.scale==t}));if(null==e)throw"意外的程序性异常,丢失downloadType";g[t]=e.value.filepath})),x=0,o.forEach((function(t){if(Object(l["k"])(t)&&t.markedForExport){var e=Object(c["M"])(t);if(Object(l["j"])(e)){var n=Object(c["Q"])(e);m.forEach((function(r){var i=g[r];i=i.replace("{$name$}",n),u&&(i=i.replace(/\.png$/i,".webp"));var o=w[i];if(o){var a=++o.index;i=g[r],i=i.replace("{$name$}","".concat(n,"(").concat(a,")")),u&&(i=i.replace(/\.png$/i,".webp"))}else w[i]={index:0};b.push({filepath:i,node:t,scale:r,nodeName:e})})),x+=1}}})),0!==b.length){t.next=32;break}throw"至少需要选中一个节点才能激活下载";case 32:if(1!==b.length){t.next=41;break}return y=b[0],k=y.node,C=y.scale,S=y.nodeName,T=Ao(h,k,C,u),O=T.png,I=T.base64Png,A=Object(c["H"])(e,C,S,u?a["fb"].WEBP:a["fb"].PNG),t.next=38,Object(c["u"])(A,O,I);case 38:return t.abrupt("return",t.sent);case 41:return F=new qi,t.next=44,F.init();case 44:b.forEach((function(t){var e=t.node,n=t.scale,r=t.filepath,i=Ao(h,e,n,u),o=i.png,a=i.base64Png;F.addFile(r,o,a)})),j=1===x?b[0].nodeName:h.name,t.t0=e,t.next=t.t0===a["c"].ANDROID?49:t.t0===a["c"].IOS?51:t.t0===a["c"].WE_CHAT_MINI_PROGRAM?53:55;break;case 49:return _="android_",t.abrupt("break",57);case 51:return _="ios_",t.abrupt("break",57);case 53:return _="wxmp_",t.abrupt("break",57);case 55:return _="web_",t.abrupt("break",57);case 57:return t.next=59,F.start(_+j+".zip");case 59:return t.abrupt("return",t.sent);case 60:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o,a,s){return t.apply(this,arguments)}}(),Ao=function(t,e,n,r){if(!t||!e)return{};var i,o=t.artboardPath,a=e.exportPath,s=Object(c["R"])(n),l=r?".webp":".png",u=Object(c["A"])(t,"".concat(o,"/png/"),"".concat(a).concat(s).concat(l));return i=r?u.replace(/\/png\/(.*)\.webp$/,"/base64/$1.webp.js"):u.replace(/\/png\/(.*)\.png$/,"/base64/$1.js"),{png:u,base64Png:i}},Fo=function(t,e){if(!t||!e)return{};var n=t.artboardPath,r=e.exportPath,i=Object(c["A"])(t,"".concat(n,"/svg/"),"".concat(r,".svg")),o=i.replace(/\/svg\/(.*)\.svg$/,"/base64/$1@svg.js");return{png:i,base64Png:o}},jo=function(t,e){if(!t||!e)return{};var n=t.artboardPath,r=e.exportPath,i=Object(c["A"])(t,"".concat(n,"/svg/"),"".concat(r,".pdf")),o=i.replace(/\/svg\/(.*)\.pdf$/,"/base64/$1@pdf.js");return{png:i,base64Png:o}},_o={components:{DrawControl:Ui},methods:{onCanvasKeyDown:function(t){var e=t.keyCode,n=t.target;if(n){var r=n.tagName;if("INPUT"!==r&&"TEXTAREA"!==r){var i=n,o=document.documentElement;while(null!=i&&i!=o){if(i.isContentEditable)return;i=i.parentNode}if(46===e||8===e){var a=this.drawInfo,s=this.histories,c=this.historyIndex,l=a.selectItem;if(!l)return;a.selectItem=null;var u=new at;u.action=P.Deleted,u.dragTarget=l,u.drawOffset=new B,u.makePoint(),u.isVaildData(),c<s.length-1&&s.splice(c+1),s.push(u),a.historyIndex=s.length-1;var d=u.dragTarget,h=s.findIndex((function(t){return t===d}));if(-1===h)console.error("异常信息,无法找到原始数据",u);else{var f=0;while(-1!==f){if(f=s.findIndex((function(t){return t.action===P.Move&&t.dragFrom===h})),-1===f)break;var m=s[f];d.dragOn=f,h=f,d=m}u.dragFrom=h,d.dragOn=s.length-1}this.drawAll()}}}},getCanvasDrawNum:function(t){return Math.round(t*this.canvasScale)},getLocation:function(t){var e=t.pageX,n=t.pageY,r=t.sceneX,i=t.sceneY,o=t.scale,a=t.sceneWidth,s=t.sceneHeight,c=e,l=n,u=this.sceneOffsetX,d=this.sceneOffsetY,h=this.rect,f=(a-h.width*o)/2,m=(s-h.height*o)/2;return c-=u,l-=d,c-=f,l-=m,c-=r,l-=i,c=Math.round(c/o),l=Math.round(l/o),new B(c,l)},saveTextToHistory:function(){if(this.isCurrentInTextMode){var t=this.currentDrawData;if(t.isVaildData()){t.makePoint(this.getCurrentContext(),this.currentSceneInfo);var e=this.histories,n=this.historyIndex;n<e.length-1&&e.splice(n+1),e.push(t),this.drawInfo.historyIndex=e.length-1,this.drawHistories(t)}return this.currentDrawData=null,!0}return!1},getHistoryTagetWithDragFrom:function(t){if(null==t)return null;if(t.action!==P.Move)return null;var e=t.dragFrom;if(-1===e)return null;var n=this.histories;while(-1!==e){var r=n[e];if(!r)return null;if(r.action!==P.Move)return r;if(e=r.dragFrom,-1===e)return null}},getHistoryByPointExact:function(t){for(var e=this.histories,n=Math.min(this.historyIndex+1,e.length),r=(new d["a"]).set(t.x,t.y,1,1),i=n-1;i>=0;i--){var o=e[i],a=this.getRectOverlapDrawData(r,e,o,i);if(null!=a)return a}return null},getHistoryByPoint:function(t){for(var e=this.histories,n=Math.min(this.historyIndex+1,e.length),r=(new d["a"]).set(t.x,t.y,1,1),i=n-1;i>=0;i--){var o=e[i],a=this.getRectOverlapDrawData(r,e,o,i);if(null!=a)return a}return null},getRectOverlapDrawData:function(t,e,n,r){var i,o=n.action,a=null!==(i=n.dragOffset)&&void 0!==i?i:new B;if(o===P.Deleted)return null;if(o===P.Move){if(-1!==n.dragOn){var s=e[n.dragOn];if(s&&(s.action===P.Move||s.action===P.Deleted)&&s.dragFrom===r)return null}var c=this.getHistoryTagetWithDragFrom(n);if(!c)return null;var l=c.eventRect;if(!l)return null;var u=(new d["a"]).set(l.x+a.x,l.y+a.y,l.width,l.height);if(u.isOverlap(t))return{target:c,offset:a}}else{var h=dt.getHistoryTagetWithDragOn(e,n,this.historyIndex);if(h&&h.action===P.Deleted)return null;h||(h=n);var f,m=n.eventRect;if(h===n)return m&&m.isOverlap(t)?{target:h,offset:new B}:null;a=null!==(f=h.dragOffset)&&void 0!==f?f:new B;var p=(new d["a"]).set(m.x+a.x,m.y+a.y,m.width,m.height);if(p.isOverlap(t))return{target:n,offset:a}}return null},onMouseMoveInCanvas:function(t){var e=this.currentDrawData,n=this.drawInfo,r=this.inDrawAndNotMove,i=this.histories,o=this.moveInfo,a=n.action;if(a===P.Move&&!e&&0!==i.length){var s=this.inMacOS?t.metaKey:t.ctrlKey;if(!r||!s){o.pageX=t.pageX,o.pageY=t.pageY,o.scale=this.scale,o.sceneX=this.sceneX,o.sceneY=this.sceneY,o.sceneWidth=this.sceneWidth,o.sceneHeight=this.sceneHeight;var c=this.getLocation(o),l=this.getHistoryByPointExact(c),u=n.enterItem,d=null===l||void 0===l?void 0:l.target;u!=d&&(n.enterItem=d,this.drawAll())}}},onMouseDown:function(t){var e=this.inMacOS?t.metaKey:t.ctrlKey,n=this.startInfo,r=this.inDrawAndNotMove,i=this.drawAction,o=this.drawInfo;if(r){if(e)return;t.stopPropagation()}if(i!==P.Text||!this.saveTextToHistory()){switch(i){case P.Move:case P.Brush:case P.Text:case P.Rectangle:case P.Ellipse:case P.Arrow:n.pageX=t.pageX,n.pageY=t.pageY,n.scale=this.scale,n.sceneX=this.sceneX,n.sceneY=this.sceneY,n.sceneWidth=this.sceneWidth,n.sceneHeight=this.sceneHeight;break;default:return}var a=this.getLocation(n),s=new at;if(i===P.Move){var c=this.getHistoryByPoint(a);if(null==c)return void(o.selectItem&&(o.selectItem=null,this.drawAll()));if(c.action===P.Deleted)return;s.dragTarget=c.target,s.dragOffset=c.offset}switch(this.currentDrawData=s,s.action=i,s.color=this.currentColor.color,i!==P.Move&&this.cleanCurrent(),i){case P.Move:s.startPoint=s.endPoint=a,this.drawHistories(),this.drawCurrent();break;case P.Brush:s.brushSize=this.currentBrushSize,s.points=[a];break;case P.Rectangle:case P.Ellipse:case P.Arrow:s.brushSize=this.currentBrushSize,s.startPoint=a;break;case P.Text:return s.startPoint=a,s.text="",s.fontSize=this.currentFontSize,s.lineHeight=s.fontSize+2,s.textareaSize=new q(Q,s.lineHeight),void(s.family=l["e"]?'-apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n\t\t"Helvetica Neue", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"':'-apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", "PingFang SC", "Hiragino Sans GB",\n\t\t\t"Helvetica Neue", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"')}window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)}},onMouseMove:function(t){var e=this.currentDrawData;if(e){var n=e.action;if(n!==P.Text){var r=this.getCurrentContext();if(r){var i=this.getLocation({pageX:t.pageX,pageY:t.pageY,scale:this.scale,sceneX:this.sceneX,sceneY:this.sceneY,sceneWidth:this.sceneWidth,sceneHeight:this.sceneHeight}),o=this.currentSceneInfo;switch(n){case P.Move:e.endPoint=i,this.drawCurrent();break;case P.Brush:e.points.push(i),this.cleanCurrent(r),dt.drawBrush(r,e,o,!1,!1,null);break;case P.Rectangle:e.endPoint&&this.cleanCurrent(r),e.endPoint=i,dt.drawRectangle(r,e,o);break;case P.Ellipse:e.endPoint&&this.cleanCurrent(r),e.endPoint=i,dt.drawEllipse(r,e,o);break;case P.Arrow:e.endPoint&&this.cleanCurrent(r),e.endPoint=i,dt.drawArrow(r,e,o);break;default:return}}}}},onMouseUp:function(t){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp);var e=this.currentDrawData;this.currentDrawData=null;var n=this.drawInfo;if(e&&e.isVaildData()){e.makePoint();var r=this.histories,i=this.historyIndex;if(i<r.length-1&&r.splice(i+1),r.push(e),n.historyIndex=r.length-1,e.action===P.Move){var o=e.dragTarget,a=r.findIndex((function(t){return t===o}));if(-1===a)console.error("异常信息,无法找到原始数据",e);else{var s=0;while(-1!==s){if(s=r.findIndex((function(t){return t.action===P.Move&&t.dragFrom===a})),-1===s)break;var c=r[s];o.dragOn=s,a=s,o=c}e.dragFrom=a,o.dragOn=r.length-1}n.selectItem=this.getDrawDataFromMouse(t)}this.drawHistories(e.action===P.Move?null:e),this.cleanCurrent()}else e.action===P.Move&&(n.selectItem=this.getDrawDataFromMouse(t),this.drawHistories(),this.cleanCurrent())},getDrawDataFromMouse:function(t){var e=this.getLocation({pageX:t.pageX,pageY:t.pageY,scale:this.scale,sceneX:this.sceneX,sceneY:this.sceneY,sceneWidth:this.sceneWidth,sceneHeight:this.sceneHeight}),n=this.getHistoryByPointExact(e);return null===n||void 0===n?void 0:n.target},getDrawTarget:function(){},drawHistories:function(t){var e,n=this.getHistoryContext();if(n){var r,i=!t,o=this.histories,a=this.historyIndex,s=this.drawInfo;if(i){if(n.clearRect(0,0,this.getCanvasDrawNum(this.sceneWidth),this.getCanvasDrawNum(this.sceneHeight)),-1===a)return;if(r=a>=o.length-1?o:o.slice(0,a+1),0===r.length)return}else r=[t];var c=this.currentSceneInfo,l=null===(e=this.currentDrawData)||void 0===e?void 0:e.dragTarget;r.forEach((function(t){if(t!==l){var e,r=s.action===P.Move,i=r&&t==s.enterItem,u=r&&t==s.selectItem,d=t.action;switch(d){case P.Brush:case P.Rectangle:case P.Ellipse:case P.Arrow:case P.Text:var h=dt.getHistoryTagetWithDragOn(o,t,a);if(h){if(h.action===P.Deleted)return;e=h.dragOffset}break}switch(d){case P.Brush:var f=!1;dt.drawBrush(n,t,c,i,u,e,f);break;case P.Rectangle:dt.drawRectangle(n,t,c,i,u,e);break;case P.Ellipse:dt.drawEllipse(n,t,c,i,u,e);break;case P.Arrow:dt.drawArrow(n,t,c,i,u,e);break;case P.Text:dt.drawText(n,t,c,i,u,e);break;default:return}}}))}},cleanCurrent:function(t){(t||(t=this.getCurrentContext(),t))&&t.clearRect(0,0,this.getCanvasDrawNum(this.sceneWidth),this.getCanvasDrawNum(this.sceneHeight))},drawCurrent:function(){var t=this.currentDrawData;if(t){var e=this.getCurrentContext();if(e){this.cleanCurrent(e);var n=this.currentSceneInfo,r=t.action,i=r!==P.Move,o=!i;switch(r){case P.Move:var a=t.dragTarget;if(!a)return;var s=t.startPoint,c=t.endPoint,l=t.dragOffset;if(!s||!c)return;var u=new B(c.x-s.x+l.x,c.y-s.y+l.y);switch(a.action){case P.Brush:var d=!1;dt.drawBrush(e,a,n,i,o,u,d);break;case P.Rectangle:dt.drawRectangle(e,a,n,i,o,u);break;case P.Ellipse:dt.drawEllipse(e,a,n,i,o,u);break;case P.Arrow:dt.drawArrow(e,a,n,i,o,u);break;case P.Text:dt.drawText(e,a,n,i,o,u);break}break;case P.Brush:dt.drawBrush(e,t,n,!1,!1,null);break;case P.Rectangle:dt.drawRectangle(e,t,n);break;case P.Ellipse:dt.drawEllipse(e,t,n);break;case P.Arrow:dt.drawArrow(e,t,n);break;default:return}}}},getHistoryContext:function(){var t=this.$refs.canvas_history;if(t){var e=t.getContext("2d");return e}},getCurrentContext:function(){var t=this.$refs.canvas_current;if(t){var e=t.getContext("2d");return e}},drawAll:function(){var t=this;this.visible&&(cancelAnimationFrame(this.handleDraw),this.handleDraw=requestAnimationFrame((function(){try{t.drawCurrent(),t.drawHistories()}finally{}})))},measureTextSize:function(t,e,n){var r,i=this.currentSceneInfo,o=i.scale;o=1;var a=Math.max(12,Math.round(e.fontSize*o*1e3)/1e3);t.font="".concat(a,"px ").concat(null!==(r=e.family)&&void 0!==r?r:"sans-serif");for(var s=e.lineHeight,c=n||e.text,l=new q(0,s),u=0,d=Math.round(tt*o),h={},f=0,m=c.length;f<m;f++){var p=c[f];if("\n"!==p){if("\r"!==p){var v=h[p];v||(v=h[p]=Math.ceil(t.measureText(p).width));var b=u+v+1;b>d?(l.width=Math.max(u,l.width),l.height+=s,u=v):u=b}}else l.width=Math.max(u,l.width),u=0,l.height+=s}return l.width=Math.ceil(Math.max(u,l.width)/o),l},resetTextareaSize:function(){var t=this.currentDrawData;if(t&&t.action===P.Text){var e=this.$refs.input;if(e){var n=this.getCurrentContext();if(n){var r=this.measureTextSize(n,t,e.value);r.width=Math.max(r.width,Q),t.textareaSize=r}}}},onInputKeyDown:function(t){var e=t.keyCode;switch(e){case 27:this.isCurrentInTextMode&&(this.currentDrawData=null)}},resetData:function(){this.currentDrawData=null;var t=this.drawInfo,e=this.histories;e.splice(0),t.historyIndex=-1,t.action=P.None}},watch:{inElementSelect:function(t){t?window.addEventListener("keydown",this.onCanvasKeyDown):window.removeEventListener("keydown",this.onCanvasKeyDown)},artboardInComment:function(t){t||(this.editComment.drawing=!1)},historyIndexChanges:function(){this.drawAll()},visible:function(t){t&&this.resetData()},curArtboardId:function(){this.editComment.drawing=!1},"curArtboardVerData.lastVersionId":function(){this.editComment.drawing=!1},currentFontSize:function(t){var e=this;if(this.isCurrentInTextMode){var n=this.currentDrawData;n&&(n.fontSize=t,n.lineHeight=n.fontSize+2,requestAnimationFrame((function(){e.resetTextareaSize();var t=e.$refs.input;t&&t.focus()})))}},scale:function(){var t=this;requestAnimationFrame((function(){t.resetTextareaSize()}))},currentColor:function(t){var e=this;if(this.isCurrentInTextMode){var n=this.currentDrawData;n&&(n.color=t.color,requestAnimationFrame((function(){var t=e.$refs.input;t&&t.focus()})))}},isCurrentInTextMode:function(t){var e=this;t&&this.$nextTick((function(){requestAnimationFrame((function(){var t=e.$refs.input;t&&t.focus()}))}))},drawAction:function(t,e){if(e===P.Text&&this.saveTextToHistory(),e===P.Move||t===P.Move){var n=this.drawInfo;n.enterItem=n.selectItem=null,this.drawAll()}},"histories.length":function(t,e){t<e&&this.drawAll()},currentSceneInfo:function(){this.drawAll()}},computed:{inElementSelect:function(){var t=this.drawInfo,e=t.action;return e===P.Move&&null!=t.selectItem},inElementMoveState:function(){var t=this.drawInfo,e=t.action;return e===P.Move&&null!=t.enterItem},historyIndexChanges:function(){return this.drawInfo.historyIndexChanges},isCurrentInTextMode:function(){var t=this.currentDrawData;return t&&t.action===P.Text},currentSceneInfo:function(){var t=new ct,e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,o=this.sceneHeight,a=this.canvasScale,s=this.sceneOffsetX,c=this.sceneOffsetY,l=this.getLocation({pageX:s,pageY:c,sceneX:e,sceneY:n,scale:r,sceneWidth:i,sceneHeight:o});return t.offset=l,t.scale=r,t.canvasScale=a,t.sceneWidth=i,t.sceneHeight=o,t},currentBrushSize:function(){return this.drawInfo.brushSize},currentFontSize:function(){return this.drawInfo.fontSize},textareaStyleLeft:function(){var t=this.currentSceneInfo,e=this.currentDrawData;return Math.round((e.startPoint.x-t.offset.x-Z)*this.scale)},textareaStyle:function(){if(this.isCurrentInTextMode){var t=this.currentDrawData,e=this.currentSceneInfo,n=this.scale,r=Math.max(1,Math.round(t.lineHeight*n)),i=Math.max(1,Math.round(t.fontSize*n*1e3)/1e3),o=1,a=12;return i<a&&(o=i/a,i=a),{backgroundColor:this.currentTextBackgroundColor,borderColor:this.currentColor.color,color:this.currentColor.color,fontSize:i+"px",transform:"scale(".concat(o.toFixed(5),")"),lineHeight:r+"px",left:this.textareaStyleLeft+"px",top:Math.round((t.startPoint.y-e.offset.y-t.lineHeight/2-Z+1)*n)+"px",padding:Math.round(Z*n)+"px",height:Math.max(1,Math.round(t.textareaSize.height*n))+"px",width:Math.max(1,Math.round((t.textareaSize.width+2)*n/o))+"px"}}},currentTextBackgroundColor:function(){var t=this.currentColor.color,e=this.drawAction;return e===P.Text&&(t=et(t,.2)),t},currentColor:function(){var t;return null!==(t=V[this.drawInfo.colorIndex])&&void 0!==t?t:V[0]},artboardDetail:function(){return this.$store.state.artboardDetail},curArtboardVerData:function(){return To(this.curArtboard,this.inCloudViewerArtboardInfoMode)},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardScale:function(){var t,e=null===(t=this.curArtboardVerData)||void 0===t?void 0:t.scale;return e>0?e:1},rect:function(){var t,e=this.curArtboardVerData,n=this.artboardScale,r=null!==(t=null===e||void 0===e?void 0:e.boundsInParent)&&void 0!==t?t:new d["a"];return(new d["a"]).set(0,0,Math.round(r.width*n),Math.round(r.height*n))},inDrawAndNotMove:function(){var t=this.drawAction;switch(t){case P.None:return!1;default:return!0}},drawInfo:function(){return this.editComment.drawInfo},EnumDrawAction:function(){return P},drawAction:function(){return this.drawInfo.action},histories:function(){return this.drawInfo.histories},historyIndex:function(){return this.drawInfo.historyIndex},visible:function(){return this.editComment.drawing}},data:function(){return{handleDraw:0,canvasScale:Object(c["O"])(),startInfo:{pageX:0,pageY:0,sceneX:0,sceneY:0,scale:1,sceneWidth:0,sceneHeight:0},moveInfo:{pageX:0,pageY:0,sceneX:0,sceneY:0,scale:1,sceneWidth:0,sceneHeight:0},currentDrawData:null}},props:{sceneWidth:Number,sceneHeight:Number,sceneX:Number,sceneY:Number,sceneOffsetX:Number,sceneOffsetY:Number,scale:Number},created:function(){this.resetData()},beforeDestroy:function(){this.editComment.drawing=!1,cancelAnimationFrame(this.handleDraw),window.removeEventListener("keydown",this.onCanvasKeyDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)}},Mo=_o,Lo=(n("a551"),Object(Dr["a"])(Mo,Ai,Fi,!1,null,"7c38f04f",null)),Do=Lo.exports,Po=function(){var t=this,e=t._self._c;return e("div",{ref:"box",staticClass:"viewer-box",style:t.style,on:{contextmenu:function(t){t.preventDefault()}}},[t.fetchState===t.FetchState.Fetching?e("div",{staticClass:"loading"},[t._v("图片加载中...")]):t.fetchState===t.FetchState.Error?e("div",{staticClass:"error"},[t._v(" 图片加载失败,"),e("a",{attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v("重新加载")])]):t._e(),e("img",{directives:[{name:"show",rawName:"v-show",value:t.fetchState===t.FetchState.Success,expression:"fetchState===FetchState.Success"}],staticClass:"preview",attrs:{src:t.currentImgShowSrc},on:{load:t.onImgLoad,error:t.onImgError}})])},No=[],Eo={methods:{clickReload:function(){this.fetchState=c["a"].Fetching,this.randomUrl=Date.now()},clickZoomContainer:function(){},canEmitEvent:function(){return this.fetchState===c["a"].Success},onSceneResize:function(t,e,n){var r=this.canScale&&0!==this.scale;if(!r||n){var i=this.rect;if(i&&0!==t&&0!==e){var o=i.width/t,a=i.height/e,s=Math.max(o,a);0!==s&&(s=.92/s,s>2&&(s=2),this.setScaleImageViewer(s))}}},onImgLoad:function(t){var e=this.currentImg;if(e){var n=t.target;if(n){this.fetchState=c["a"].Success;var r=this.currentImgSrcBlobUrl||this.currentImgSrc,i=n.src;-1!==i.indexOf(r)&&(e.width=n.naturalWidth,e.height=n.naturalHeight),this.resetImageViewerScale(),this.disposeBlobUrl()}}},onImgError:function(){this.fetchState=c["a"].Error,this.disposeBlobUrl()},disposeBlobUrl:function(t){var e=this.currentImgSrcBlobUrl;e&&(URL.revokeObjectURL(e),t&&(this.currentImgSrcBlobUrl=null))},createBlobUrl:function(t){(t instanceof File||t instanceof Blob)&&(this.currentImgSrcBlobUrl=URL.createObjectURL(t))}},computed:{FetchState:function(){return c["a"]},rect:function(){if(this.canScale){var t=this.currentImg;return(new d["a"]).set(0,0,t.width,t.height)}},canScale:function(){var t=this.currentImg;return!!t&&(0!==t.width||0!==t.height)},imgList:function(){return this.imageViewer.imgList},currentIndex:function(){return this.imageViewer.currentIndex},currentImg:function(){var t=this.imgList;return t?t[this.currentIndex]:null},currentImgSrc:function(){var t,e;return null!==(t=null===(e=this.currentImg)||void 0===e?void 0:e.imgSrc)&&void 0!==t?t:""},currentImgShowSrc:function(){var t=this.currentImgSrcBlobUrl||this.currentImgSrc;if(!t)return t;var e=this.randomUrl;return 0===e?t:"".concat(t,"?r=").concat(e)},imageViewer:function(){return this.$store.state.imageViewer},scale:function(){return this.scaleImageViewer},style:function(){var t=this.scale,e=this.currentImg;return e?this.fetchState!==c["a"].Success?{transform:"translate3d(".concat(-this.sceneX,"px, ").concat(-this.sceneY,"px, 1px)")}:{width:Math.ceil(e.width*t)+"px",height:Math.ceil(e.height*t)+"px"}:null}},watch:{currentImgSrc:function(t){this.disposeBlobUrl(!0),this.fetchState=c["a"].Fetching,this.randomUrl=0,this.$emit("setConfig",{sceneX:0,sceneY:0}),this.createBlobUrl(t)}},data:function(){return{fetchState:c["a"].Normal,randomUrl:0,currentImgSrcBlobUrl:""}},props:{sceneWidth:Number,sceneHeight:Number,sceneX:Number,sceneY:Number},beforeDestroy:function(){this.disposeBlobUrl(!0)},created:function(){var t=this.currentImgSrc;t&&(this.fetchState=c["a"].Fetching,this.createBlobUrl(t))}},Ro=Eo,Vo=(n("0c4e"),Object(Dr["a"])(Ro,Po,No,!1,null,"ff3b7fe6",null)),Bo=Vo.exports,Ho=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"commentPoints",staticClass:"comment-points",class:{prevent:t.preventPointEnable,"in-drawing":t.inDrawing},on:{mousedown:t.onMouseDownInScene}},[t._l(t.renderPointComments,(function(n){return e("CommentPointItem",{key:n.id,attrs:{comment:n,text:n.pointIndex,pointX:n.pointX,pointY:n.pointY,sceneInfo:t.currentSceneInfo,artboardRect:t.rect},on:{onLocationChange:t.onLocationChangeComment,setConfig:t.setConfig}})})),t.pointInfo.point.enable?e("CommentPointItem",{attrs:{comment:null,text:t.nextPointIndex,pointX:t.pointInfo.point.x,pointY:t.pointInfo.point.y,sceneInfo:t.currentSceneInfo,artboardRect:t.rect},on:{onLocationChange:t.onLocationChangeEditor,setConfig:t.setConfig}}):t._e(),t.preventPointEnable?e("CommentPointItem",{attrs:{comment:null,text:t.nextPointIndex,pointX:t.pointInfo.preventPoint.x,pointY:t.pointInfo.preventPoint.y,prevent:!0,artboardRect:t.rect,sceneInfo:t.currentSceneInfo}}):t._e()],2):t._e()},Uo=[],$o=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"comment-point",class:{prevent:t.prevent,on:t.isSelectCurrent,canMove:t.canMove},style:t.style},[e("div",{staticClass:"text",class:{on:t.isSelectCurrent},on:{mousedown:function(e){return e.stopPropagation(),t.onMouseDown.apply(null,arguments)},click:t.onClick}},[t._v(t._s(t.text))]),t.comment&&t.popMsg.visible?e("CommentPointItemCommentContent",{attrs:{comment:t.comment,popMsg:t.popMsg},on:{clickGoComment:t.setSelectComment,clickIgnore:t.ignoreThisClickPopMsg}}):t._e()],1):t._e()},Go=[],Wo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-detail",on:{"!click":function(e){return t.clickIgnore.apply(null,arguments)}}},[e("div",{staticClass:"content"},[e("div",{staticClass:"summary"},[e("span",{domProps:{innerHTML:t._s(t.summaryHTML)}})]),t.attachMentImgs.length>0?e("ul",{staticClass:"attachments"},t._l(t.attachMentImgs,(function(n,r){return e("li",{key:r,on:{click:function(e){return e.preventDefault(),t.clickAttach(n)}}},[e("BlobImage",{attrs:{image:n.preview}})],1)})),0):t._e(),e("div",{staticClass:"date"},[t.artboardVer?e("span",{staticClass:"artboard-ver",attrs:{title:"评论的画板版本#".concat(t.comment.artboardVer)},domProps:{textContent:t._s(t.artboardVer)},on:{click:function(e){return t.setCurArtboardVer(t.comment.artboardVer)}}}):t._e(),t._v(t._s(t.comment.dateStr))])]),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[e("UserFace2",{attrs:{self:t.isSelfComment,tourist:t.isTourist,title:t.userFaceTitle,text:t.userFaceText}}),e("span",{staticClass:"name-value",attrs:{title:t.userFaceTitle}},[t._v(t._s(t.userNickName))])],1),e("a",{attrs:{href:"javascript:;"},on:{click:t.clickGoComment}},[t._v("回复")])])])},zo=[],Yo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"image"},[t.loadState===t.FetchState.Fetching?e("div",{staticClass:"loading"}):t.loadState===t.FetchState.Error?e("div",{staticClass:"error",attrs:{title:"图片加载失败"}}):t._e(),t.localUrl&&t.loadState!==t.FetchState.Error?e("img",{class:{on:t.loadState===t.FetchState.Success},attrs:{src:t.localUrl},on:{load:t.onImageLoad,error:t.onImgError}}):t._e()])},Xo=[],Ko={methods:{onImageLoad:function(){this.loadState=c["a"].Success,this.disposeBlobUrl()},onImgError:function(){this.loadState=c["a"].Error,this.disposeBlobUrl()},loadImage:function(){var t=this.image;if(t){if(Object(l["j"])(t))return this.localUrl=t,void(this.loadState=c["a"].Fetching);this.loadState=c["a"].Fetching;try{this.localUrl=URL.createObjectURL(t)}catch(e){this.loadState=c["a"].Error,this.localUrl=""}}},disposeBlobUrl:function(){var t=this.localUrl;t&&0===t.indexOf("blob:")&&URL.revokeObjectURL(t)},unloadImage:function(){var t=this.localUrl;t&&0===t.indexOf("blob:")&&(URL.revokeObjectURL(t),this.localUrl="",this.loadState=c["a"].Normal)}},computed:{FetchState:function(){return c["a"]}},watch:{image:function(){this.unloadImage(),this.loadImage()}},beforeDestroy:function(){this.unloadImage()},created:function(){this.loadImage()},data:function(){return{localUrl:"",loadState:c["a"].Normal}},props:{image:{type:[File,Blob,String]}}},qo=Ko,Jo=(n("1491"),Object(Dr["a"])(qo,Yo,Xo,!1,null,"a98298fc",null)),Qo=Jo.exports,Zo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userface",class:{self:t.self,tourist:t.tourist},attrs:{title:t.title}},[t._v(" "+t._s(t.text)+" ")])},ta=[],ea={props:{title:String,text:String,self:Boolean,tourist:Boolean}},na=ea,ra=(n("4d32"),Object(Dr["a"])(na,Zo,ta,!1,null,"1eb5422f",null)),ia=ra.exports,oa=[{name:"solve",text:"确认",enumValue:7},{name:"lookat",text:"看这",enumValue:8},{name:"great",text:"哇",enumValue:9},{name:"compare",text:"对比",enumValue:10},{name:"zhenbang",text:"赞",enumValue:6},{name:"aixin",text:"爱心",enumValue:1},{name:"wenhao",text:"问号",enumValue:4},{name:"666",text:"666",enumValue:11},{name:"tanhao",text:"惊叹",enumValue:3},{name:"zantong",text:"+1",enumValue:5},{name:"haode",text:"OK",enumValue:2},{name:"tuding",text:"图钉",enumValue:12}],aa={};function sa(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if(t.length<=e)return t;var n="...",r=e-n.length,i=t.substring(0,r)+n;return i}oa.forEach((function(t){aa[t.text]=t,t.texts&&t.texts.forEach((function(e){aa[e]=t}))}));var ca=Object(c["pb"])();function la(t,e){var n=t.index++;return t[n]=e,"\\--".concat(ca,"-{map:").concat(n,"}--\\")}function ua(t,e){return"string"!==typeof e?e:fa(e).replace(/\\--([\w]+)-{map:(\d+)}--\\/gi,(function(e,n,r){var i;return n!==ca?e:null!==(i=t[r])&&void 0!==i?i:""}))}function da(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(l["j"])(e)?e.replace(/\[([^\]]{1,4})\]/g,(function(e,r){var i=aa[r];return i?n?"":la(t,'<span class="icon-emoji emoji-'.concat(i.name,'"></span>')):e})):e}function ha(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.replace(/https?:\/\/([\w-]+\.)+[\w-]+(:\d+)?(\/[\w-+./?%&=#]*)?/gi,(function(e){var r=e;return n&&(r=sa(e)),la(t,'<a class="out-link" target="_blank" title="'.concat(e,'" href="').concat(e,'">').concat(r,"</a>"))}))}function fa(t){return t.replace(/[&<>"']/g,(function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return t}}))}function ma(t){if(!Object(l["j"])(t))return t;var e={index:0};return ua(e,ha(e,t,!0))}function pa(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Object(l["j"])(t)?(r=r||{index:0},n||(t=da(r,t),t=ha(r,t)),Object(l["k"])(e)&&(t=t.replace(/\[@uid:(\d+);\]/g,(function(t,i){var o=e[i];if(!o)return t;var a=fa(o.nickName);return n?"@".concat(a):la(r,'<span class="at-user-item" title="'.concat(a,"(").concat(o.email,')">@').concat(a,"</span>"))}))),ua(r,t)):t}var va={components:{UserFace2:ia,BlobImage:Qo},methods:{clickGoComment:function(){this.$emit("clickGoComment",this.comment,!0)},clickIgnore:function(){this.$emit("clickIgnore")},setCommentEditorVisibleId:function(t){this.$store.commit("setCommentEditorVisibleId",t)},clickAttach:function(t){var e=this.attachMentImgs.map((function(t){return t.imgSrc})),n=e.findIndex((function(e){return e===t.imgSrc}));-1===n&&(n=0),this.$store.commit("setImageViewer",{imgList:e,currentIndex:n})}},computed:{isReply:function(){var t=this.comment;return!!t&&0!==t.commentId},artboardVer:function(){var t=this.comment.artboardVer,e=this.isReply;return null==t||e?null:"#".concat(t)},summaryHTML:function(){return pa(this.comment.summary,this.comment.atUsers)},users:function(){var t;return null!==(t=this.$store.state.artboardDetail.commentUsers)&&void 0!==t?t:{}},selectComment:function(){return this.$store.state.artboardDetail.selectComment},attachMentImgs:function(){var t,e=null===(t=this.comment)||void 0===t?void 0:t.attachMents,n=[];return e?(e.forEach((function(t){if(t){var e=t.thumbFileName||t.fileName;e&&n.push({imgSrc:t.fold+t.fileName,preview:t.fold+e})}})),n):n},userFaceTitle:function(){var t=this.comment;if(!t)return null;var e=t.user;return e?"".concat(e.nickName,"(").concat(e.email,")"):null},userNickName:function(){var t=this.comment;if(!t)return"-";var e=t.user;if(!e)return"-";var n=e.nickName;return n||"-"},isSelfComment:function(){var t=this.comment;if(!t)return!1;var e=t.user;return!!e&&e.userKey===this.cloudUserKey},isTourist:function(){var t=this.comment;if(!t)return!1;var e=t.user;if(!e)return!1;switch(e.authority){case a["p"].Admin:case a["p"].Designer:return!1}return!0},userFaceText:function(){var t=this.userNickName;return t[t.length-1]}},props:{popMsg:Object,comment:Object}},ba=va,ga=(n("4c8d"),Object(Dr["a"])(ba,Wo,zo,!1,null,"607c677e",null)),wa=ga.exports,xa=300,ya=227,ka=270,Ca={components:{CommentPointItemCommentContent:wa},methods:{onMouseDown:function(t){this.moving=!1,window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp);var e=this.moveData;e.startX=t.clientX,e.startY=t.clientY},onMouseMove:function(t){var e=this.moveData;e.endX=t.clientX,e.endY=t.clientY,!this.moving&&(Math.abs(e.endX-e.startX)>=3||Math.abs(e.endY-e.startY)>=3)&&(this.moving=!0,this.canMove||this.showTextTip("只能移动自己发表的评注,请联系评论发布者或管理员")),this.canMove||(e.endX=e.startX,e.endY=e.startY)},onMouseUp:function(t){var e=this;window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp);var n=this.moveData,r=this.moving,i=this.canMove;if(i){if(r&&!this.prevent){n.endX=t.clientX,n.endY=t.clientY;var o=new B(this.pointX,this.pointY);if(!this.prevent){var a=this.moveData;o=dt.getCanvasLocation(this.sceneInfo,o),this.moving&&(o.left+=a.endX-a.startX,o.top+=a.endY-a.startY)}requestAnimationFrame((function(){e.$emit("onLocationChange",e.comment,o.x,o.y)}))}}else requestAnimationFrame((function(){e.moving=!1}))},onClick:function(){var t=this,e=this.comment,n=this.moving;if(!n)if(e){if(this.pointCommentShowAlways&&!this.artboardInComment)return void setTimeout((function(){var e=t.popMsg;e.ignoreThisClick=!1,e.visible=!0,t.pointInView||t.movePointToSceneCenter()}),10);this.setSelectComment(e)}else{this.showTextTip("待提交的评论评注"),this.artboardInComment||this.$store.commit("setRightNavType",a["U"].Comment);var r=300;this.artboardCommentVisible&&(r=50),this.$store.commit("artboardCommentVisible",!0),setTimeout((function(){var e=t.pointInfo.instance;e&&e.focus()}),r)}},setSelectComment:function(t,e){this.artboardInComment||this.$store.commit("setRightNavType",a["U"].Comment),this.$store.commit("setSelectComment",{comment:t,openEditor:e})},movePointToSceneCenter:function(){var t=this.sceneInfo,e=this.artboardRect,n=this.pointX,r=this.pointY,i=t.scale,o=(e.width/2-n)*i,a=(e.height/2-r)*i;this.$emit("setConfig",{sceneX:o,sceneY:a})},ignoreThisClickPopMsg:function(){var t=this.popMsg;t.ignoreThisClick=!0},hidePopMsg:function(){var t=this.popMsg;this.moving||(clearTimeout(t.handleHide),t.handleHide=setTimeout((function(){t.ignoreThisClick?t.ignoreThisClick=!1:t.visible=!1}),50))}},beforeDestroy:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("click",this.popMsg.hidePopMsg,!0),clearTimeout(this.popMsg.handleHide)},computed:{pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},commentVisible:function(){return this.artboardInComment&&this.artboardCommentVisible},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},leftVisible:function(){return this.$store.state.artboardDetail.leftSideVisible},pointInfo:function(){return this.$store.state.editComment.pointInfo},isSelectCurrent:function(){var t=this.comment,e=this.selectComment;return e===t&&null!=t},selectComment:function(){return this.$store.state.artboardDetail.selectComment},canMove:function(){return!this.prevent&&(this.isSelfComment||this.cloudUserIsOwner)},isSelfComment:function(){var t=this.comment;if(!t)return!0;var e=t.user;return!!e&&e.userKey===this.cloudUserKey},pointInView:function(){var t=this.location,e=this.pointRadius/2,n=this.sceneInfo,r=n.sceneWidth,i=n.sceneHeight,o=(new d["a"]).set(e,e,r-2*e,i-2*e);this.leftVisible&&(o.x+=ya),this.commentVisible?o.width-=xa:this.artboardInComment||(this.curNode&&(o.width-=xa),o.width-=ka,o.width+=2*e);var a=(new d["a"]).set(t.x,t.y,1,1);return a.isOverlap(o)},visible:function(){if(this.prevent)return!0;if(this.isSelectCurrent)return!0;if(this.moving)return!0;var t=this.location,e=2*this.pointRadius,n=this.sceneInfo,r=n.sceneWidth,i=n.sceneHeight,o=(new d["a"]).set(0,0,r,i),a=(new d["a"]).set(t.x-e,t.y-e,2*e,2*e);return a.isOverlap(o)},location:function(){var t=new B(this.pointX,this.pointY);if(!this.prevent){var e=this.moveData,n=this.sceneInfo;t=dt.getCanvasLocation(n,t),this.moving&&(t.left+=e.endX-e.startX,t.top+=e.endY-e.startY)}return t},style:function(){var t=this.location,e=this.pointRadius;return{top:t.top-e+"px",left:t.left-e+"px"}}},watch:{"popMsg.visible":function(t){t?window.addEventListener("click",this.hidePopMsg,!0):window.removeEventListener("click",this.hidePopMsg,!0)},artboardInComment:function(t){t&&(this.popMsg.visible=!1)},isSelectCurrent:function(t){t&&(this.pointInView||this.movePointToSceneCenter())},pointX:function(){this.moving=!1},pointY:function(){this.moving=!1}},props:{artboardRect:{type:Object,default:null},sceneInfo:{type:Object,default:null},comment:{type:Object,default:null},text:[String,Number],pointX:Number,pointY:Number,prevent:{type:Boolean,default:!1}},data:function(){return{popMsg:{visible:!1,handleHide:0,ignoreThisClick:!1},pointRadius:15,moving:!1,moveData:{startX:0,startY:0,endX:0,endY:0}}}},Sa=Ca,Ta=(n("d00b"),Object(Dr["a"])(Sa,$o,Go,!1,null,"b1fbea4a",null)),Oa=Ta.exports,Ia={components:{CommentPointItem:Oa},methods:{setConfig:function(t){this.$emit("setConfig",t)},onLocationChangeComment:function(t,e,n){var o=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var a,s,c,u,d,h,f;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:if(a=o.getLocation({pageX:e+o.sceneOffsetX,pageY:n+o.sceneOffsetY}),a.x!==t.pointX||a.y!==t.pointY){r.next=5;break}return r.abrupt("return");case 5:return t.pointX=a.x,t.pointY=a.y,s=t.id,c=t.artboardId,u=t.commentId,d=t.pointX,h=t.pointY,r.prev=8,r.next=11,o.fetchPostCloudApi("setcommentpointbyweb",{body:{id:s,commentId:u,artboardId:c,pointEnable:!0,pointX:d,pointY:h}});case 11:if(f=r.sent,Object(l["k"])(f)){r.next=14;break}return r.abrupt("return");case 14:if(f.success){r.next=16;break}throw new Error(f.errMsg);case 16:r.next=21;break;case 18:r.prev=18,r.t0=r["catch"](8),o.showTextTip("移动评注失败:".concat(r.t0));case 21:case"end":return r.stop()}}),i,null,[[8,18]])})))()},onLocationChangeEditor:function(t,e,n){var r=this.pointInfo.point,i=this.getLocation({pageX:e+this.sceneOffsetX,pageY:n+this.sceneOffsetY});i.x===r.x&&i.y===r.y||(r.x=i.x,r.y=i.y)},getLocation:function(t){var e=t.pageX,n=t.pageY,r=e,i=n,o=this.sceneOffsetX,a=this.sceneOffsetY,s=this.rect,c=this.sceneX,l=this.sceneY,u=this.scale,d=this.sceneWidth,h=this.sceneHeight,f=(d-s.width*u)/2,m=(h-s.height*u)/2;return r-=o,i-=a,r-=f,i-=m,r-=c,i-=l,r=Math.round(r/u),i=Math.round(i/u),new B(r,i)},onMouseMove:function(t){if(this.preventPointEnable){var e=this.pointInfo.preventPoint;e.x=t.clientX,e.y=t.clientY}},onMouseDownInScene:function(t){if(this.preventPointEnable){var e=this.getLocation({pageX:t.clientX,pageY:t.clientY}),n=this.pointInfo,r=n.point,i=n.preventPoint,o=n.instance;i.enable=!1,r.pointIndex=this.nextPointIndex,r.enable=!0,r.x=e.x,r.y=e.y,requestAnimationFrame((function(){o&&o.focus()}))}},onMouseDown:function(){var t=this.pointInfo.preventPoint;t.enable=!1}},watch:{nextPointIndex:function(t){var e=this.pointInfo.point;e.enable&&(e.pointIndex=t)},preventPointEnable:function(t){t?(window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mousedown",this.onMouseDown)):(window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mousedown",this.onMouseDown))}},computed:{initedScale:function(){return this.artboardDetail.initedScale},currentSceneInfo:function(){var t=new ct,e=this.scale,n=this.sceneWidth,r=this.sceneHeight,i=this.sceneOffsetX,o=this.sceneOffsetY,a=this.getLocation({pageX:i,pageY:o});return t.offset=a,t.scale=e,t.canvasScale=1,t.sceneWidth=n,t.sceneHeight=r,t},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardDetail:function(){return this.$store.state.artboardDetail},curArtboardVerData:function(){var t,e=this.curArtboard,n=this.artboard;return null!==(t=null===e||void 0===e?void 0:e.artboardVerData)&&void 0!==t?t:n},rect:function(){var t,e=this.curArtboardVerData,n=this.calcArtScale,r=null!==(t=null===e||void 0===e?void 0:e.boundsInArtboard)&&void 0!==t?t:new d["a"],i=r.width,o=r.height;return n>0&&(i=Math.round(i/n),o=Math.round(o/n)),(new d["a"]).set(0,0,i,o)},preventPointEnable:function(){return this.pointInfo.preventPoint.enable},pointInfo:function(){return this.$store.state.editComment.pointInfo},comments:function(){return this.$store.state.artboardDetail.comments},maxPointIndex:function(){return this.$store.state.artboardDetail.maxPointIndex},nextPointIndex:function(){var t=this.pointComments,e=this.maxPointIndex;if(e>0)return e+1;var n=t[t.length-1];return n?n.pointIndex+1:1},commentOnlyCurrentVerArtboard:function(){return!this.notSupportArtboardVerCloudVersion&&this.$store.state.commentOnlyCurrentVerArtboard},pointComments_onlyCurrentVer:function(){var t,e,n=this.artboardVerId;return null!==(t=null===(e=this.pointComments)||void 0===e?void 0:e.filter((function(t){return t.artboardVer===n})))&&void 0!==t?t:[]},renderPointComments:function(){var t=this.pointComments,e=this.pointComments_onlyCurrentVer,n=this.commentOnlyCurrentVerArtboard;return n?e:null!==t&&void 0!==t?t:[]},artboardVerId:function(){var t,e;return null!==(t=null===(e=this.curArtboardVerData)||void 0===e?void 0:e.lastVersionId)&&void 0!==t?t:0},pointComments:function(){var t=[],e=this.comments;return Object(l["i"])(e)?(e.forEach((function(e){Object(l["k"])(e)&&(e.pointEnable&&t.push(e),Object(l["i"])(e.comments)&&e.comments.forEach((function(e){Object(l["k"])(e)&&e.pointEnable&&t.push(e)})))})),t.sort((function(t,e){var n=t.pointIndex,r=e.pointIndex;return n===r&&(n=t.id,r=e.id),n>r?1:-1})),t):t},visible:function(){var t=this.sceneWidth,e=this.sceneHeight,n=this.rect;return 0!==t&&0!==e&&0!==n.width&&0!==n.height&&(this.artboardInComment||!this.inMultDownMode&&this.pointCommentShowAlways)},inDrawing:function(){var t=this.$store.state.editComment;return t.drawing},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},notSupportArtboardVerCloudVersion:function(){return $r.notSupportAiPrompt(this.cloudVersion)}},props:{sceneWidth:Number,sceneHeight:Number,sceneX:Number,sceneY:Number,sceneOffsetX:Number,sceneOffsetY:Number,scale:Number},beforeDestroy:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mousedown",this.onMouseDown)},created:function(){0}},Aa=Ia,Fa=(n("2919"),Object(Dr["a"])(Aa,Ho,Uo,!1,null,"1a757b93",null)),ja=Fa.exports,_a=function(){var t=this,e=t._self._c;return e("section",{ref:"box",staticClass:"art-info",class:{dragging:t.dragging,scaling:t.scaling,canvas:t.useCanvasMode,figma:t.isFigmaArtboard},style:t.style,on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},click:t.clickInfoBox}},[e("div",{staticClass:"info",on:{click:function(e){t.currentClickInInfo=!0}}},[e("div",{staticClass:"name",attrs:{title:t.title}},[t.curArtboardLoadedVerData.lastVersionId?e("div",{staticClass:"ver",domProps:{textContent:t._s(t.verShowtext)},on:{click:t.clickShowVerList}}):t._e(),e("div",{staticClass:"text",domProps:{textContent:t._s(t.curArtboardLoadedVerData.name)}})]),t.artboardInDevStatus?e("div",{staticClass:"dev"}):t._e()]),t.useCanvasMode?t._e():[e("img",{staticClass:"preview",class:{loading:t.imgLoading},attrs:{src:t.artboardPreviewPng},on:{load:t.onImgLoad,error:t.onImgError}}),t.imgLoading?e("div",{staticClass:"img-loading"},[e("div",{staticClass:"loading"},[t._v("正在加载画板预览图...")])]):t._e()],t.artboardInComment||t.scaling?t._e():[e("NodeItem",{attrs:{parentRect:t.parentRect,item:t.curArtboardLoadedVerData,shiftKey:t.shiftKey}}),t._l(t.exportNodes,(function(t,n){return e("SliceTip",{key:"".concat(n,"+").concat(t.guid),attrs:{node:t}})})),e("NodeInfoCurrent"),e("NodeIntersectInfo",{attrs:{width:t.rect.width,height:t.rect.height}})]],2)},Ma=[],La=function(){var t=this,e=t._self._c;return t.visibleMax?e("div",{staticClass:"node-item-wrap",class:{master:t.visibleOutChild},style:t.style},[t.item.mlIgnoreEvent?t._e():e("div",{staticClass:"node-item",on:{click:function(e){return e.stopPropagation(),t.clickNode.apply(null,arguments)},mouseenter:function(e){return e.stopPropagation(),t.mouseEnterNode.apply(null,arguments)},mouseleave:function(e){return e.stopPropagation(),t.mouseLeaveNode.apply(null,arguments)}}}),t._l(t.children,(function(n,r){return e("NodeItem",{key:"".concat(r,"_").concat(n.guid),attrs:{parentRect:t.item.boundsInArtboard,item:n,shiftKey:t.shiftKey}})}))],2):t.visibleMin?e("div",{staticClass:"node-item-wrap on",class:{hotspot:t.isHotSpot},style:t.style,on:{click:function(e){return e.stopPropagation(),t.clickNode.apply(null,arguments)},mouseenter:function(e){return e.stopPropagation(),t.mouseEnterNode.apply(null,arguments)},mouseleave:function(e){return e.stopPropagation(),t.mouseLeaveNode.apply(null,arguments)}}}):t._e()},Da=[],Pa={name:"NodeItem",methods:{mouseLeaveNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(null)},mouseEnterNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(this.item)},getNodesFromPoint:function(t){var e=t.target;if(e){var n,r=t.offsetX;null==r?(r=t.layerX,n=t.layerY):n=t.offsetY;var i=this.scale;r/=i,n/=i;var o="".concat(r,"_").concat(n),a=this.cachePointNodes;if(a.key===o)return a.nodes;var s=this.item.boundsInArtboard,c=(new d["a"]).set(s.x+r,s.y+n,1,1),l=this.curArtboard.childs,u=[];return l.forEach((function(t){if(t&&t.visible&&!t.mlIgnoreEvent){var e=t.boundsInArtboard;if(e.width<=2||e.height<=2){var n=e,r=n.x,i=n.y,o=n.width,a=n.height;e=(new d["a"]).set(r,i,o,a),e.width<=2&&(e.width+=2,e.x-=1),e.height<=2&&(e.height+=2,e.y-=1)}Object(d["f"])(e,c)&&u.push(t)}})),a.key=o,a.nodes=u,u}},clickNode:function(t){var e=this.item;if(this.inMultDownMode)e.markedForExport&&(e.mlUserSelectDown=!e.mlUserSelectDown);else{var n=this.curNode,r=!1;if(null!=n&&this.shiftKey&&(n=this.enterNode,r=!0),null!=n&&this.clickedNode===e&&Math.abs(this.clickPageX-t.pageX)<2&&Math.abs(this.clickPageY-t.pageY)<2){var i=this.getNodesFromPoint(t),o=i.findIndex((function(t){return t===n}));if(-1===o)o=i.length-1;else{var a=n.boundsInArtboard;while(o--&&o>=0){var s=i[o],c=s.boundsInArtboard;if(!Object(d["g"])(c,a)||s.markedForExport||s.renderTapInteraction||1===s.types.Artboard||1!==s.types.GraphicNode&&1!==s.types.Group&&1!==s.types.SymbolMaster&&1!==s.types.SymbolInstance||s.fillEnabled||s.strokeEnable||s.shadow||s.innerShadow)break}o<0&&(o=i.length-1)}var l=i[o];n=l||e}else n=e;this.clickPageX=t.pageX,this.clickPageY=t.pageY,r?this.setEnterNode(n):this.setCurNode(n),this.setClickedNode(e)}}},computed:{visibleOutChild:function(){var t;return 1===(null===(t=this.item.types)||void 0===t?void 0:t.GroupVisibleOutChild)},children:function(){return this.item.children||[]},visibleMax:function(){return this.visible&&this.children.length>0},visibleMin:function(){return!this.visibleMax&&this.visible&&!this.item.mlIgnoreEvent&&!this.item.mlIgnoreScene},visible:function(){var t=this.item;return!!t&&(!!t.visible&&!t.mlIgnoreLeftSide)},isHotSpot:function(){var t=this.item;return!!t&&t.type===a["nb"].HotSpot},scale:function(){return this.scaleArtboard},style:function(){var t=this.item.boundsInArtboard,e=this.parentRect,n=this.scale,r=Math.ceil(Math.max(1,t.width*n)),i=Math.ceil(Math.max(1,t.height*n)),o=Math.round((t.y-e.y)*n),a=Math.round((t.x-e.x)*n);return r<3&&(r+=2,a-=1),i<3&&(i+=2,o-=1),{top:o+"px",left:a+"px",width:r+"px",height:i+"px"}}},props:{item:Object,shiftKey:Boolean,parentRect:Object},data:function(){return{clickPageX:0,clickPageY:0,cachePointNodes:{nodes:null,key:""}}}},Na=Pa,Ea=(n("eb67"),Object(Dr["a"])(Na,La,Da,!1,null,"99582a32",null)),Ra=Ea.exports,Va=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"node-info-current",class:{"only-enter":null==t.curNode},style:t.showNodeStyle},[t.curNode?t._l(t.borRadios,(function(n){return e("div",{key:n,class:["bor bor-"+n],style:t.borderStyle})})):t._e(),t.showNodeSize?[e("div",{staticClass:"item width",style:t.nodeWidthStyle},[e("span",[t._v(t._s(t.nodeRect.showWidth))])]),e("div",{staticClass:"item height",style:t.nodeHeightStyle},[e("span",[t._v(t._s(t.nodeRect.showHeight))])])]:t._e()],2):t._e()},Ba=[],Ha={computed:{showNodeSize:function(){var t=this.curNode,e=this.enterNode;return t?!e||e===t:!!e},nodeRect:function(){if(!this.showNodeSize)return{width:0,height:0,top:0,left:0};var t=this.showNode,e=t.boundsInArtboard,n=this.scaleArtboard,r=t.markedForExport,i={width:Math.ceil(e.width*n),height:Math.ceil(e.height*n),left:Math.floor(e.x*n),top:Math.floor(e.y*n),showWidth:this.getCalcPlatformValue(e.width,{markedForExport:r,isHorizintal:!0}),showHeight:this.getCalcPlatformValue(e.height,{markedForExport:r,isHorizintal:!1})};return i},nodeWidthStyle:function(){var t=this.nodeRect;return{left:Math.ceil(t.width/2)+"px"}},nodeHeightStyle:function(){var t=this.nodeRect;return{left:t.width+1+"px",top:Math.ceil(t.height/2)+"px"}},borderStyle:function(){var t=this.borderWidth;return"width:".concat(t,";height:").concat(t,";")},borderWidth:function(){var t=2.3*this.scaleArtboard+3;return t=Math.round(t),t+"px"},borRadios:function(){return[0,1,2,3]},visible:function(){if(this.inMultDownMode)return!1;var t=this.showNode;return!!t},showNode:function(){var t=this.curNode;return t||(t=this.enterNode),t},showNodeStyle:function(){var t=this.showNode;if(t){var e=t.boundsInArtboard,n=this.scaleArtboard;return{top:Math.floor(e.y*n)+"px",left:Math.floor(e.x*n)+"px",width:Math.ceil(Math.max(1,e.width)*n)+"px",height:Math.ceil(Math.max(1,e.height)*n)+"px"}}}}},Ua=Ha,$a=(n("c67e"),Object(Dr["a"])(Ua,Va,Ba,!1,null,"13682106",null)),Ga=$a.exports,Wa=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"node-info"},[e("div",{staticClass:"enter-item-box",style:t.enterNodeStyle}),t._l(t.markLines,(function(n){return e("div",{key:n.id,staticClass:"item",class:{horizintal:n.isHorizintal,vertical:!n.isHorizintal,dashed:n.isDashed},style:t.getMarkStyle(n)},[n.text?e("span",[t._v(t._s(n.text))]):t._e()])}))],2):t._e()},za=[],Ya={methods:{getMarkStyle:function(t){var e=this.scale,n=this.markScale;0===n&&(n=1),e/=n;var r,i,o=t.rect,a={top:Math.floor(o.top*e)+"px",left:Math.floor(o.left*e)+"px"};return t.isHorizintal?(r="height",i="width"):(r="width",i="height"),a[r]=o[r]+"px",a[i]=Math.ceil(o[i]*e)+"px",a},refreshMarkLines:function(){var t=this;if(!this.visible)return[];var e=this.curNode,n=this.enterNode,r=e.boundsInArtboard,i=n.boundsInArtboard,o=(new d["a"]).set(r.x,r.y,r.width,r.height),a=(new d["a"]).set(i.x,i.y,i.width,i.height),s={width:this.getCalcValue(this.width),height:this.getCalcValue(this.height)},c=e.markedForExport;o.x=this.getCalcValue(o.x),o.y=this.getCalcValue(o.y),o.width=this.getCalcValue(o.width,c),o.height=this.getCalcValue(o.height,c);var l=n.markedForExport;return a.x=this.getCalcValue(a.x),a.y=this.getCalcValue(a.y),a.width=this.getCalcValue(a.width,l),a.height=this.getCalcValue(a.height,l),this.markScale=this.getCalcRectScale(),Object(d["c"])(o,a,s,(function(e,n){return t.getCalcUnitTemplateValue(e,!1,n)}))}},watch:{curNode:function(){this.markLines=this.refreshMarkLines()},enterNode:function(){this.markLines=this.refreshMarkLines()},visible:function(t){t&&(this.markLines=this.refreshMarkLines())}},computed:{enterNodeStyle:function(){var t=this.enterNode;if(t){var e=t.boundsInArtboard,n=this.scaleArtboard;return{top:Math.floor(e.y*n)+"px",left:Math.floor(e.x*n)+"px",width:Math.ceil(Math.max(1,e.width)*n)+"px",height:Math.ceil(Math.max(1,e.height)*n)+"px"}}},scale:function(){return this.scaleArtboard},visible:function(){return!this.inMultDownMode&&null!=this.curNode&&null!=this.enterNode&&this.enterNode!==this.curNode}},props:{width:Number,height:Number},data:function(){return{markScale:1,markLines:[]}},mounted:function(){this.markLines=this.refreshMarkLines()}},Xa=Ya,Ka=(n("40a0"),Object(Dr["a"])(Xa,Wa,za,!1,null,"7e7e35ee",null)),qa=Ka.exports,Ja=function(){var t=this,e=t._self._c;return t.visibleSelected?e("div",{staticClass:"slice-tip",class:{out:!t.inArtboard||t.inMultDownMode},style:t.style,on:{click:function(e){return e.stopPropagation(),t.clickSliceTipSelected(!1)}}},[e("div",{staticClass:"name",attrs:{title:"点击取消选择\n".concat(t.nodeName)}},[t._v(" "+t._s(t.nodeName)+" ")])]):t.visibleMin?e("div",{staticClass:"slice-tip-min",class:{off:!t.inMultDownMode&&(t.curNode==t.node||t.enterNode==t.node),out:!t.inArtboard||t.inMultDownMode},style:t.style,on:{click:function(e){return t.clickSliceTipSelected(!0)}}}):t._e()},Qa=[],Za={methods:{clickSliceTipSelected:function(t){this.inMultDownMode&&this.inArtboard&&(this.node.mlUserSelectDown=t,this.artboardDetail.sliceScrollNode=this.node)}},computed:{artboardDetail:function(){return this.$store.state.artboardDetail},sliceBorderLineHide:function(){return this.$store.state.sliceBorderLineHide},visibleMin:function(){var t=this.inMultDownMode,e=this.sliceBorderLineHide,n=this.inArtboard;return t||!e&&n},visibleSelected:function(){var t=this.inMultDownMode,e=this.node;return t&&e.mlUserSelectDown},nodeName:function(){return Object(c["M"])(this.node)},style:function(){var t=this.node.boundsInArtboard,e=this.scaleArtboard;return{top:Math.floor(t.y*e)+"px",left:Math.floor(t.x*e)+"px",width:Math.ceil(Math.max(1,t.width)*e)+"px",height:Math.ceil(Math.max(1,t.height)*e)+"px"}},inArtboard:function(){var t=this.node.boundsInArtboard,e=Object(d["f"])(t,this.curArtboardLoadedVerData.boundsInArtboard);return e}},props:{node:Object}},ts=Za,es=(n("7eb1"),Object(Dr["a"])(ts,Ja,Qa,!1,null,"a1aa3b96",null)),ns=es.exports,rs={components:{NodeItem:Ra,NodeIntersectInfo:qa,NodeInfoCurrent:Ga,SliceTip:ns},methods:{clickShowVerList:function(){this.artboardDetail.artboardVerListVisible=!0},onImgLoad:function(){this.imgState=c["a"].Success},onImgError:function(){this.imgState=c["a"].Error},setSelectComment:function(t){this.$store.commit("setSelectComment",t)},onContextmenu:function(t){var e=this,n=t.pageX,r=t.pageY,i=this.curArtboard;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:r,artboard:i})}))},setArtboardCommentVisible:function(t){this.$store.commit("artboardCommentVisible",t)},clickInfoBox:function(){this.currentClickInInfo?this.currentClickInInfo=!1:(this.setSelectComment(null),this.setArtboardCommentVisible(!0))},clickZoomContainer:function(){this.artboardInComment?(this.setSelectComment(null),this.setArtboardCommentVisible(!1)):this.inMultDownMode||this.setCurNode(null)},onSceneResize:function(t,e,n){if(!this.initedScale||n){var r=this.rect;if(r&&0!==t&&0!==e){var i=r.width/t,o=r.height/e,a=Math.max(i,o);0!==a&&(this.artboardDetail.initedScale=!0,this.setScaleArtboard(.92/a))}}},quickKey:function(t){this.shiftKey=t.shiftKey}},computed:{artboardDetail:function(){return this.$store.state.artboardDetail},initedScale:function(){return this.artboardDetail.initedScale},verShowtext:function(){var t,e=this.curArtboardLoadedVerData,n=this.curArtboard;return e&&n?"".concat(e.lastVersionId===(null===(t=n.artboard)||void 0===t?void 0:t.lastVersionId)?"最新":"历史","版本 #").concat(e.lastVersionId):null},title:function(){return en(this.curArtboardLoadedVerData)},artboardInDevStatus:function(){var t=this.curArtboard,e=this.inCloudViewerMode;return e&&t.customStatus===a["i"].Dev},isFigmaArtboard:function(){return this.fileType===a["r"].FIGMA},fileType:function(){var t,e,n=this.artboard;return null!==(t=null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)&&void 0!==t?t:n.fileType},artRenderInCanvasMode:function(){return this.$store.state.artRenderInCanvasMode},useCanvasMode:function(){return this.inCloudMode&&this.artRenderInCanvasMode},imgLoading:function(){return this.imgState===c["a"].Fetching},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},exportNodes:function(){var t=this.curArtboard;if(!t)return[];var e=t.exportNodes;return e||[]},rect:function(){var t=this.parentRect,e=a["b"]/2;if(!t)return new d["a"];var n=t.x+t.width,r=t.y+t.height;return(new d["a"]).set(0,-e,n,r+e)},parentRect:function(){var t,e,n,r=this.curArtboardLoadedVerData,i=this.artboard;return null!==(t=null!==(e=null!==(n=r.boundsInArtboard)&&void 0!==n?n:null===i||void 0===i?void 0:i.boundsInArtboard)&&void 0!==e?e:r.boundsInParent)&&void 0!==t?t:null},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardPreviewPng:function(){var t,e=this.inCloudMode,n=this.curArtboardLoadedVerData;return e&&this.isSupportWebp&&(t=n.artboardPreviewWebp,t)?t:(t=n.artboardPreviewPng,e?t:"".concat(t,"?").concat(n.mlOutputTime))},isSupportWebp:function(){return this.$store.state.isSupportWebp===In.Support},style:function(){var t=this.useCanvasMode,e=this.curArtboardLoadedVerData,n=this.scale,r=this.parentRect,i=null!==r&&void 0!==r?r:{width:0,height:0},o="none";return!t&&e.fillEnabled&&e.fill&&!1===e.fill.includedInExport&&(o=Object(h["i"])(e.fill.value).value),{background:o,width:Math.ceil(i.width*n)+"px",height:Math.ceil(i.height*n)+"px"}},scale:function(){return this.scaleArtboard}},watch:{artboardPreviewPng:function(t){t&&(this.imgState=c["a"].Fetching)},curArtboardLoadedVerData:function(){this.artboardDetail.initedScale=!1}},data:function(){return{imgState:c["a"].Normal,previewImage:null,shiftKey:!1,currentClickInInfo:!1}},props:{sceneWidth:Number,sceneHeight:Number,dragging:Boolean,scaling:Boolean},created:function(){window.addEventListener("keydown",this.quickKey),window.addEventListener("keyup",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey),window.removeEventListener("keyup",this.quickKey);var t=this.previewImage;t&&(t.src=null,t=null)}},is=rs,os=(n("53b0"),Object(Dr["a"])(is,_a,Ma,!1,null,"02af240c",null)),as=os.exports,ss=function(){var t=this,e=t._self._c;return e("section",{ref:"box",staticClass:"art-list",class:{dragging:t.dragging},style:t.style},[e("div",{staticClass:"box-size",style:t.boxSize}),t._l(t.renderDocuments,(function(n){return e("div",{key:n.guid,staticClass:"art-doc"},[n.sections?t._l(n.sections,(function(r){return e("SectionItem",{key:n.guid+r.guid,attrs:{sectionItem:r,maxRect:{x:n.maxRect.x-n.rect.x+t.rect.x,y:n.maxRect.y-n.rect.y+t.rect.y}}})})):t._e(),t._l(n.arts,(function(r){return e("ArtboardListItem",{key:n.guid+r.artboard.guid,attrs:{item:r,maxRect:{x:n.maxRect.x-n.rect.x+t.rect.x,y:n.maxRect.y-n.rect.y+t.rect.y}}})}))],2)}))],2)},cs=[],ls=function(){var t=this,e=t._self._c;return e("section",{ref:"$item",staticClass:"item",class:{on:t.selected,figma:t.isFigmaArtboard},style:t.style},[e("div",{staticClass:"info"},[e("div",{staticClass:"name",attrs:{title:t.title}},[e("div",{staticClass:"text",domProps:{textContent:t._s(t.artboard.name)}})]),t.artboardInDevStatus?e("div",{staticClass:"dev"}):t._e()]),e("div",{staticClass:"img",style:t.imgStyle,attrs:{title:t.goInfoTip},on:{mouseenter:t.onMouseEnter,dblclick:function(e){return t.dlbClickArtboard()},click:t.clickArtboard,mouseleave:t.onMouseLevel,contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[t.artboard.flowStart?e("div",{staticClass:"interaction-home"}):t._e(),t.errorText?e("div",{staticClass:"error"},[t._v(t._s(t.errorText))]):e("img",{attrs:{src:t.artboardPreviewPng}})]),t.interactionVisible?e("artboard-item-interactions",{attrs:{renderInteractions:t.renderInteractions,item:t.item}}):t._e()],1)},us=[],ds=function(){var t=this,e=t._self._c;return t.visible?e("svg",{staticClass:"artboard-interaction-list",class:{light:t.light}},[t._l(t.arrows,(function(n){return[e("path",{key:n.key+"_rect",class:t.getPathCls(n,"rect"),attrs:{d:n.item.nodeRect}}),e("path",{key:n.key+"_line",class:t.getPathCls(n,"line"),attrs:{d:n.item.curve}}),e("image",{key:n.key+"_arrow_icon",attrs:{x:n.item.arrowIcon.x,y:n.item.arrowIcon.y,width:n.item.arrowIcon.width,height:n.item.arrowIcon.height,href:t.isLightArrow(n)?n.item.arrowIcon.href:n.item.arrowIcon.href_default}})]}))],2):t._e()},hs=[],fs={methods:{isLightArrow:function(t){var e,n=this.enterArtboard,r=this.light;return!!r||null!=t.toArtboardItem&&null!=n&&(null===(e=n.artboard)||void 0===e?void 0:e.cid)===t.toArtboardItem.cid},getPathCls:function(t,e){var n,r=[];e&&(Object(l["i"])(e)||(e=[e]),r.push.apply(r,Object(u["a"])(e)));var i=this.enterArtboard;return null!=t.toArtboardItem&&null!=i&&(null===(n=i.artboard)||void 0===n?void 0:n.cid)===t.toArtboardItem.cid&&r.push("light"),r}},computed:{light:function(){var t=this.enterArtboard,e=this.item;return t===e},enterArtboard:function(){return this.$store.state.enterArtboard},visible:function(){return!this.inArtboardMultDownMode&&this.arrows.length>0},arrows:function(){var t=[],e=this.item.artboard,n=this.renderDocuments,r=this.filterDocumentType,i=r===a["K"].Section,o=e.pageGuid||e.docGuid,s=e.boundsInParentForList;return this.renderInteractions.forEach((function(r){var a,c=jt(n,r,s,o,{inSection:i,topSectionId:e.topSectionId});c&&t.push({item:c,key:r.guid,toArtboardItem:null===(a=r.renderTapInteraction)||void 0===a?void 0:a.toArtboardItem})})),t}},props:{renderInteractions:Array,item:Object}},ms=fs,ps=(n("dbb2"),Object(Dr["a"])(ms,ds,hs,!1,null,"63ff2ae6",null)),vs=ps.exports,bs={components:{ArtboardItemInteractions:vs},methods:{onMouseEnter:function(){this.$store.commit("enterArtboard",this.item)},onMouseLevel:function(){this.$store.commit("enterArtboard",null)},onContextmenu:function(t){var e=this,n=t.pageX,r=t.pageY,i=this.item;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:r,artboard:i})}))},dlbClickArtboard:function(){clearTimeout(this.tipHandle),this.inArtboardMultDownMode||(this.hideTextTip(),this.setCurArtboard(this.item))},clickArtboard:function(){var t=this;clearTimeout(this.tipHandle),this.inArtboardMultDownMode?this.item.mlUserSelectDown=!this.item.mlUserSelectDown:this.tipHandle=setTimeout((function(){t.showTextTip(t.goInfoTip2,7)}),200)},loadedImage:function(t){if(null==t)return this.imgErrored=!0,void(this.imgLoaded=!1);this.imgErrored=!1,this.imgLoaded=!0},loadImage:function(){var t=this.artboardPreviewPng;t&&(this.imgErrored=!1,this.imgLoaded=!1,c["gb"].add(t,this.loadedImage))}},beforeDestroy:function(){clearTimeout(this.tipHandle),c["gb"].remove(this.artboardPreviewPng,this.loadedImage)},created:function(){this.loadImage()},watch:{artboardPreviewPng:function(t,e){this.imgErrored=!1,c["gb"].remove(e,this.loadedImage),this.loadImage()}},computed:{title:function(){return en(this.artboard)},artboardInDevStatus:function(){var t=this.item,e=this.inCloudViewerMode;return e&&t.customStatus===a["i"].Dev},isFigmaArtboard:function(){return this.fileType===a["r"].FIGMA},fileType:function(){var t,e,n=this.artboard;return null!==(t=null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)&&void 0!==t?t:n.fileType},artboardShowInteractionLine:function(){return this.$store.state.artboardShowInteractionLine},renderInteractions:function(){var t;if(!this.inCloudMode)return null;var e=this.item.artboard.interactionInfo;if(!e)return null;if(e.fetchState!==c["a"].Success)return null;var n=null===(t=e.data)||void 0===t?void 0:t.renderInteractions;return Object(l["i"])(n)&&n.length>0?n:null},interactionVisible:function(){return this.artboardShowInteractionLine&&!!this.renderInteractions},errorText:function(){return this.imgErrored?"画板预览图加载失败":this.imgLoaded?null:"预览图加载中..."},outlineWidth:function(){if(this.inArtboardMultDownMode)return Math.ceil(3/this.scaleList)+"px"},selected:function(){return this.inArtboardMultDownMode&&this.item.mlUserSelectDown},goInfoTip2:function(){return on(this.item.artboard,this.inCloudMode)},goInfoTip:function(){if(this.inArtboardMultDownMode)return"单击选中/取消选中";var t=this.item.artboard;return this.inCloudMode?en(t):"双击查看 ".concat(t.name," 标注详情")},style:function(){var t=a["b"]/2,e=this.artboard.boundsInParentForList,n=this.maxRect,r=Math.floor(e.y-n.y-t),i=Math.floor(e.x-n.x),o=Math.ceil(e.width),s=Math.ceil(e.height+t);return"top:".concat(r,"px;left:").concat(i,"px;width:").concat(o,"px;height:").concat(s,"px;")},imgStyle:function(){var t=this.artboard.boundsInParentForList;return"height:".concat(t.height,"px;outline-width:").concat(this.outlineWidth)},artboardPreviewPng:function(){var t,e=this.inCloudMode,n=this.artboard;return e&&this.isSupportWebp&&(t=n.artboardPreviewWebp,t)?t:(t=n.artboardPreviewPng,e?t:"".concat(t,"?").concat(n.mlOutputTime))},isSupportWebp:function(){return this.$store.state.isSupportWebp===In.Support},artboard:function(){return this.item.artboard}},data:function(){return{tipHandle:0,imgErrored:!1,imgLoaded:!1}},props:{item:Object,maxRect:Object}},gs=bs,ws=(n("a3c1"),Object(Dr["a"])(gs,ls,us,!1,null,"0e8c1f04",null)),xs=ws.exports,ys=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section-item",style:t.style},[e("div",{staticClass:"title"},[t._v(t._s(t.sectionItem.name))])])},ks=[],Cs={computed:{style:function(){var t,e,n=this.sectionItem,r=0,i=n.boundsInParentForList,o=this.maxRect,a=Math.floor(i.y-o.y-r)+"px",c=Math.floor(i.x-o.x)+"px",l=Math.ceil(i.width)+"px",u=Math.ceil(i.height+r)+"px";return Object(s["a"])(Object(s["a"])({},null!==(t=null===(e=n.cssStyle)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),{},{top:a,left:c,width:l,height:u})}},props:{maxRect:Object,sectionItem:Object}},Ss=Cs,Ts=(n("2a09"),Object(Dr["a"])(Ss,ys,ks,!1,null,"29c65c03",null)),Os=Ts.exports,Is={components:{ArtboardListItem:xs,SectionItem:Os},methods:{quickKey:function(t){if(!this.inArtboardMode){var e=t.keyCode||t.which;switch(e){case 112:case 113:case 114:t.preventDefault();break}}},onSceneResize:function(t,e,n){if(!this.initScale||n){var r=this.rect;if(r&&0!==t&&0!==e){this.initScale=!0;var i=r.width/t,o=r.height/e,a=Math.max(i,o);if(0!==a){a=.96/a;var s=this.scale;this.setScaleList(a),a=this.scale,this.resetScaleSceneCenter(a,s)}}}},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})}},created:function(){window.addEventListener("keydown",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey)},data:function(){return{initScale:!1}},computed:{rect:function(){var t=a["b"],e=this.renderDocuments,n=[];e.forEach((function(t){n.push({artboard:{boundsInParent:t.rect}})}));var r=Object(c["C"])(n);return r.y-=t,r.height+=t,r},scale:function(){return this.scaleList},style:function(){var t=this.rect;if(t)return{transform:"scale(".concat(this.scale,") translate3d(0,0,0)")}},boxSize:function(){var t=this.rect;if(t)return{width:t.width+"px",height:t.height+"px"}}},props:{sceneWidth:Number,sceneHeight:Number,dragging:Boolean}},As=Is,Fs=(n("d069"),Object(Dr["a"])(As,ss,cs,!1,null,"2b7891f6",null)),js=Fs.exports,_s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"canvas-box",attrs:{title:t.mouseenterArtboardTitle},on:{mousemove:t.onMouseMove,mouseleave:t.onMouseLeave,dblclick:t.dblClickCanvas,click:t.clickCanvas,contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[t.sectionVisible?e("canvas",{ref:"canvasSection",style:t.canvasStyleSection,attrs:{width:t.canvasWidth,height:t.canvasHeight}}):t._e(),e("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:t.canvasWidth,height:t.canvasHeight}}),t.mouseenterArtboardStyle?e("div",{staticClass:"artboard-hover",style:t.mouseenterArtboardStyle}):t._e()])},Ms=[],Ls={methods:{getInViewerInteractions:function(){var t=[];if(!this.artboardShowInteractionLine)return t;var e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,o=this.sceneHeight,a=this.artboardInteractions,c=this.mouseenterArtboard;if(0===r||0===i||0===o)return t;var u=(new d["a"]).set(-e/r,-n/r,i/r,o/r);return Object.keys(a).forEach((function(e){if("_length__"!==e){var n=a[e];Object(l["i"])(n)&&0!==n.length&&n.forEach((function(e){var n,r,i=Object(s["a"])({},e.canvasData.drawRect);i.x+=e.art.rect.x,i.y+=e.art.rect.y,e.isEnter=null!=c&&(c===e.art||(null===(n=e.toArtboardItem)||void 0===n?void 0:n.cid)===(null===(r=c.artboard)||void 0===r||null===(r=r.artboard)||void 0===r?void 0:r.cid));var o=Object(d["f"])(i,u);o&&t.push(e)}))}})),t.sort((function(t,e){return t.isEnter&&e.isEnter?0:t.isEnter?1:e.isEnter?-1:0})),t},attachImgs:function(t,e){var n=this;Object(l["i"])(t)&&(e?t.forEach((function(t){c["gb"].add(t.imgSrc,n.imgLoaded,t),c["gb"].add(t.miniImgSrc,n.miniImgLoaded,t)})):t.forEach((function(t){c["gb"].remove(t.imgSrc,n.imgLoaded,t),c["gb"].remove(t.miniImgSrc,n.miniImgLoaded,t),t.img=null,t.loaded=!1})))},getRenderInteractions:function(t){var e;if(!this.inCloudMode)return null;var n=t.interactionInfo;if(!n)return null;if(n.fetchState!==c["a"].Success)return null;var r=null===(e=n.data)||void 0===e?void 0:e.renderInteractions;return Object(l["i"])(r)&&r.length>0?r:null},onContextmenu:function(t){var e=this,n=this.mouseenterArtboard;if(n){var r=t.pageX,i=t.pageY;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:r,y:i,artboard:n.artboard})}))}},dblClickCanvas:function(){var t=this.mouseenterArtboard,e=this.inArtboardMultDownMode;!e&&t&&(clearTimeout(this.tipHandle),this.hideTextTip(),this.setCurArtboard(t.artboard))},clickCanvas:function(){var t=this,e=Math.abs(Date.now()-this.draggingTime);if(!(e<66)){clearTimeout(this.tipHandle);var n=this.mouseenterArtboard,r=this.inArtboardMultDownMode;if(n){if(r)return n.artboard.mlUserSelectDown=!n.artboard.mlUserSelectDown,void this.draw(n,!0);var i=n.artboard;this.tipHandle=setTimeout((function(){t.showTextTip(t.goInfoTip2(i),7)}),200)}}},goInfoTip2:function(t){return on(t.artboard,this.inCloudMode)},onMouseMove:function(t){var e=this.mouseLoc;e.x=t.layerX,e.y=t.layerY,null==e.x&&(e.x=t.pageX-this.sceneOffsetX,e.y=t.pageY-this.sceneOffsetY)},onMouseLeave:function(){var t=this.mouseLoc;t.x=t.y=-10},quickKey:function(t){var e=t.keyCode||t.which;switch(e){case 112:case 113:case 114:t.preventDefault();break}},drawAllDelay:function(){var t=this,e=Date.now();e-this.drawAllTime>=100?(this.drawAllTime=e,clearTimeout(this.handleDrawAllDelay),this.draw(null,!0)):(clearTimeout(this.handleDrawAllDelay),this.handleDrawAllDelay=setTimeout((function(){clearTimeout(t.handleDrawAllDelay),t.draw(null,!0)}),66.67))},drawSection:function(t,e){var n=this;if(t||e)requestAnimationFrame((function(){n._drawSection(t,e)}));else{var r=this.sceneInfoSection,i=this.sceneWidth,o=this.sceneHeight,a=r.sceneWidth!==i||r.sceneHeight!==o||Date.now()-this.sceneDelayTimes.section>100?1:0;if(a)return clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection),void(this.handleSection=requestAnimationFrame((function(){n._drawSection(t)})));clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection),this.sceneDelayHandleSection=setTimeout((function(){cancelAnimationFrame(n.handleSection),n.handleSection=requestAnimationFrame((function(){n._drawSection(t)}))}),33)}},draw:function(t,e){var n=this;if(t||e)requestAnimationFrame((function(){n._draw(t,e)}));else{var r=this.sceneInfo,i=this.sceneWidth,o=this.sceneHeight,a=this.inArtboardMultDownMode,s=r.sceneWidth!==i||r.sceneHeight!==o||Date.now()-this.sceneDelayTimes.artboard>100?1:0;if(s||a!=r.inArtboardMultDownMode)return clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),void(this.handle=requestAnimationFrame((function(){n._draw(t)})));clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),this.sceneDelayHandle=setTimeout((function(){cancelAnimationFrame(n.handle),n.handle=requestAnimationFrame((function(){n._draw(t)}))}),33)}},getRectSections:function(t){var e=[],n=null===t||void 0===t?void 0:t.rect;if(!n)return e;n=(new d["a"]).set(n.x,n.y,n.width,n.height);var r=this.inViewerSections;return r.forEach((function(t){var r=(new d["a"]).set(t.rect.x,t.rect.y,t.rect.width,t.rect.height);r.isOverlap(n)&&e.push(t)})),e},getRectArtboards:function(t){var e,n=this,r=[],i=null===t||void 0===t?void 0:t.rect;if(!i)return r;i=(new d["a"]).set(i.x,i.y,i.width,i.height),t.artboard.artboard.flowStart&&(e=this.getFlowStartIconRect(t),e=(new d["a"]).set(e.x,e.y,e.width,e.height));var o=this.inViewerArtboards;return o.forEach((function(t){var o=(new d["a"]).set(t.rect.x,t.rect.y,t.rect.width,t.rect.height);if(o.isOverlap(i))r.push(t);else if(e&&e.isOverlap(o))r.push(t);else if(t.artboard.artboard.flowRect){var a=n.getFlowStartIconRect(t);if(a=(new d["a"]).set(a.x,a.y,a.width,a.height),a.isOverlap(i))return void r.push(t);if(e&&e.isOverlap(a))return void r.push(t)}})),r},resetCanvasSmoothing:function(){var t=this.$refs,e=t.canvas,n=t.canvasSection,r=this.scale,i=this.canvasScale;[n,e].forEach((function(t){if(t){var e=t.getContext("2d");e&&Wt(e,r,i,2)}}))},_drawSection:function(t,e){var n=this;clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection),this.sceneDelayTimes.section=Date.now();var r=this.sceneX,i=this.sceneY,o=this.scale,a=this.sceneWidth,s=this.sceneHeight,c=this.sceneInfoSection,l=this.drawInfoSection;if(c.sceneX=r,c.sceneY=i,c.scale=o,c.sceneWidth=a,c.sceneHeight=s,0!==o&&0!==a&&0!==s){var u=!t,h=!(l.scale===o&&l.sceneX===r&&l.sceneY===i&&l.sceneWidth===a&&l.sceneHeight===s);if(!u||h||e){var f=this.$refs.canvasSection;if(f){l.scale=o,l.sceneX=r,l.sceneY=i,l.sceneWidth=a,l.sceneHeight=s;var m,p=f.getContext("2d"),v=!1;u||h?(this.drawAllTimeSection=Date.now(),p.clearRect(0,0,this.getCanvasDrawNum(a),this.getCanvasDrawNum(s)),m=this.inViewerSections,v=!0):m=this.getRectSections(t);var b=(new d["a"]).set(-r,-i,a,s),g=(new d["a"]).set(b.x/o,b.y/o,b.width/o,b.height/o);!v&&m.forEach((function(t){n._cleanBackgroundSection(p,t,b,o)})),m.forEach((function(t){n._drawSectionItem(p,b,g,o,t)}))}}}},_draw:function(t,e){var n=this;clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),this.sceneDelayTimes.artboard=Date.now();var r=this.sceneX,i=this.sceneY,o=this.scale,a=this.sceneWidth,s=this.sceneHeight,c=this.sceneInfo,l=this.inArtboardMultDownMode;if(c.sceneX=r,c.sceneY=i,c.scale=o,c.sceneWidth=a,c.sceneHeight=s,c.inArtboardMultDownMode=l,0!==o&&0!==a&&0!==s){var u=this.drawInfo,h=!t,f=!(u.scale===o&&u.sceneX===r&&u.sceneY===i&&u.sceneWidth===a&&u.sceneHeight===s&&u.inArtboardMultDownMode===l);if(!h||f||e){var m=this.$refs.canvas;if(m){u.scale=o,u.sceneX=r,u.sceneY=i,u.sceneWidth=a,u.sceneHeight=s,u.inArtboardMultDownMode=l;var p,v=m.getContext("2d"),b=!1;h||f?(this.drawAllTime=Date.now(),v.clearRect(0,0,this.getCanvasDrawNum(a),this.getCanvasDrawNum(s)),p=this.inViewerArtboards,b=!0):p=this.getRectArtboards(t);var g=(new d["a"]).set(-r,-i,a,s),w=(new d["a"]).set(g.x/o,g.y/o,g.width/o,g.height/o),x=Math.max(2,Math.min(6,Math.ceil(3*o)));!b&&p.forEach((function(t){n._cleanBackground(v,t,g,o)}));var y=this.artboardShowInteractionLine&&!l;if(p.forEach((function(t){n._drawArtboard(v,g,w,o,t,l,x)})),y){var k=this.getInViewerInteractions();k.forEach((function(t){var e=t.canvasData.drawRect,r=t.art.rect,i=(new d["a"]).set(r.x+e.x,r.y+e.y,e.width,e.height),a=Object(d["f"])(i,w);a&&n._drawInteraction(v,t.art,t,g,w,o)}))}}}}},_cleanBackgroundSection:function(t,e,n,r){var i=this._getScaleRect(e.rect.x,e.rect.y,e.rect.width,e.rect.height,n,r),o=Math.round(this.titleHeight*r);t.clearRect(this.getCanvasDrawNum(i.x),this.getCanvasDrawNum(i.y-o),this.getCanvasDrawNum(i.width),this.getCanvasDrawNum(i.height+o))},_cleanBackground:function(t,e,n,r){var i=this._getScaleRect(e.rect.x,e.rect.y,e.rect.width,e.rect.height,n,r),o=Math.round(this.titleHeight*r);t.clearRect(this.getCanvasDrawNum(i.x),this.getCanvasDrawNum(i.y-o),this.getCanvasDrawNum(i.width),this.getCanvasDrawNum(i.height+o));var a=e.artboard.artboard.flowStart;a&&(i=this.getFlowStartIconRect(e),i=this._getScaleRect(i.x,i.y,i.width,i.height,n,r),t.clearRect(this.getCanvasDrawNum(i.x),this.getCanvasDrawNum(i.y),this.getCanvasDrawNum(i.width),this.getCanvasDrawNum(i.height)))},getFlowStartIconRect:function(t){var e=t.rect,n=e.x,r=e.y;n-=16;var i=16,o=26;return{x:n,y:r,width:i,height:o}},_drawSectionBackground:function(t,e,n,r){var i=this,o=n.cssStyle,a=n.name,s=null===o||void 0===o?void 0:o.render.backgrounds,c=function(t){return i.getCanvasDrawNum(t)};if(s){var l=s.length-1;s.forEach((function(n,i){try{l===i&&(t.shadowBlur=Math.max(5*r,5),t.shadowColor="rgba(24, 134, 255, 0.08)"),n.render&&n.render(t,e,c),l===i&&(t.shadowBlur=0,t.shadowColor="")}catch(o){}}))}if(a){var u=Math.round(this.titleHeight*r),h=Math.min(Math.max(2,Math.round(14*r)),24);if(h<4)return;t.font="".concat(this.getCanvasDrawNum(h),"px Arial");var f=o.nameSize[h];if(null==f){var m=t.measureText(a),p=m.width;f=o.nameSize[h]={width:p}}var v=Math.round(.1*f.width),b=Math.ceil(2*v+f.width),g=this.getCanvasDrawNum(3*r),w=this.getCanvasDrawNum(Math.min(2*h,u-g)),x=this.getCanvasDrawNum(e.x),y=this.getCanvasDrawNum(e.y)-w-g;t.fillStyle="#404040",Ht(t,(new d["a"]).set(x,y,b,w),5),t.fillStyle="#fff",t.textAlign="left",t.textBaseline="middle",t.fillText(a,x+v,y+w/2,this.getCanvasDrawNum(e.width))}},_drawArtboardBackground:function(t,e,n,r,i,o){var s=Math.round(this.titleHeight*i),c=o===a["r"].FIGMA;c?(t.lineWidth=Math.max(1*i,1),t.strokeStyle="rgba(166,169,180, 0.1)",t.strokeRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height))):t.clearRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height));var l=r===a["i"].Dev,u={width:0,height:0,naturalWidth:0,naturalHeight:0};if(l){var d=Pt.imgs.dev,h=Pt.sizes.dev;d&&(u.width=this.getCanvasDrawNum(i*h.width),u.height=this.getCanvasDrawNum(i*h.height),u.naturalWidth=h.width,u.naturalHeight=h.height,t.drawImage(d,0,0,u.naturalWidth,u.naturalHeight,this.getCanvasDrawNum(e.x+e.width-u.width),this.getCanvasDrawNum(e.y-s/2)-Math.round(u.height/2),u.width,u.height))}if(n){var f=this.getCanvasDrawNum(Math.min(Math.max(2,Math.round(12*i)),1024));if(f>3){t.fillStyle="#71717a",t.textAlign="left",t.textBaseline="middle",t.font="".concat(f,"px Arial");var m=this.getCanvasDrawNum(e.width)-(u.width>0?u.width+5:0),p=Gt(t,f,n,m);t.fillText(p.text,this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y-s/2))}}u.img=null},_drawArtboardText:function(t,e,n){t.textAlign="center",t.font="".concat(this.getCanvasDrawNum(Math.min(Math.max(6,Math.min(n.width,n.height)/15),36)),"px Arial"),t.fillText(e,this.getCanvasDrawNum(Math.floor(n.x+n.width/2)),this.getCanvasDrawNum(Math.ceil(n.y+n.height/2)),this.getCanvasDrawNum(n.width))},_getScaleRect:function(t,e,n,r,i,o){var a={x:t,y:e,width:n,height:r};return a.x=a.x*o-i.x,a.y=a.y*o-i.y,a.width=a.width*o,a.height=a.height*o,a},_drawInteraction:function(t,e,n,r,i,o){var a=e.rect,c="#1886ff",l="#cdcdda",u="rgba(24, 134, 255, 0.05)",h=n.canvasData,f=n.isEnter;t.lineWidth=1,t.lineWidth=.5;var m=Object(s["a"])({},h.nodeRect);m.x+=a.x,m.y+=a.y,Object(d["f"])(m,i)&&(t.setLineDash([5,2]),t.lineDashOffset=2,m=this._getScaleRect(m.x,m.y,m.width,m.height,r,o),f&&(t.fillStyle=u,t.fillRect(this.getCanvasDrawNum(m.x),this.getCanvasDrawNum(m.y),this.getCanvasDrawNum(m.width),this.getCanvasDrawNum(m.height))),t.fillStyle=t.strokeStyle=f?c:l,t.strokeRect(this.getCanvasDrawNum(m.x),this.getCanvasDrawNum(m.y),this.getCanvasDrawNum(m.width),this.getCanvasDrawNum(m.height))),t.strokeStyle=f?c:l,t.lineWidth=Math.max(Math.min(2*o,2),.5),t.setLineDash([]),t.lineDashOffset=0;var p=h.curve;m=(new d["a"]).set(p.start.x+a.x,p.start.y+a.y,1,1),t.beginPath(),m=this._getScaleRect(m.x,m.y,m.width,m.height,r,o),t.moveTo(this.getCanvasDrawNum(m.x),this.getCanvasDrawNum(m.y));var v=this._getScaleRect(p.p1.x+a.x,p.p1.y+a.y,1,1,r,o),b=this._getScaleRect(p.p2.x+a.x,p.p2.y+a.y,1,1,r,o),g=this._getScaleRect(p.end.x+a.x,p.end.y+a.y,1,1,r,o);t.bezierCurveTo(this.getCanvasDrawNum(v.x),this.getCanvasDrawNum(v.y),this.getCanvasDrawNum(b.x),this.getCanvasDrawNum(b.y),this.getCanvasDrawNum(g.x),this.getCanvasDrawNum(g.y)),t.stroke();var w=h.arrowIcon;m=(new d["a"]).set(w.x+a.x,w.y+a.y,w.width,w.height);var x=f?w.img:w.img_default;Object(d["f"])(m,i)&&x&&(m=this._getScaleRect(m.x,m.y,m.width,m.height,r,o),t.drawImage(x,0,0,w.width,w.height,this.getCanvasDrawNum(m.x),this.getCanvasDrawNum(m.y),this.getCanvasDrawNum(m.width),this.getCanvasDrawNum(m.height)))},_drawSectionItem:function(t,e,n,r,i){var o=Object(d["f"])(i.rect,n);if(o){var a=this._getScaleRect(i.rect.x,i.rect.y,i.rect.width,i.rect.height,e,r);this._drawSectionBackground(t,a,i.section,r)}},_drawArtboard:function(t,e,n,r,i,o,a){var s,c,l=Object(d["f"])(i.rect,n);if(l){var u=this._getScaleRect(i.rect.x,i.rect.y,i.rect.width,i.rect.height,e,r);this._drawArtboardBackground(t,u,i.artboard.artboard.name,i.artboard.customStatus,r,null!==(s=null===(c=i.artboard.artboard.mlConfig)||void 0===c?void 0:c.fileType)&&void 0!==s?s:i.artboard.artboard.fileType);var h=i.miniImgSize,f=i.miniImg,m=i.img,p=this.isDrawMiniImg(i);if(p)t.drawImage(f,0,0,h.width,h.height,this.getCanvasDrawNum(u.x),this.getCanvasDrawNum(u.y),this.getCanvasDrawNum(u.width),this.getCanvasDrawNum(u.height));else if(i.loaded)if(m){var v=i.imgSize;t.drawImage(m,0,0,v.width,v.height,this.getCanvasDrawNum(u.x),this.getCanvasDrawNum(u.y),this.getCanvasDrawNum(u.width),this.getCanvasDrawNum(u.height))}else this._drawArtboardText(t,"预览图加载失败",u);else this._drawArtboardText(t,"画板预览图加载中...",u);var b=i.artboard.artboard.flowStart;if(b){var g=Pt.imgs.flowStartIcon,w=Pt.sizes.flowStartIcon;g&&(u=this.getFlowStartIconRect(i),u=this._getScaleRect(u.x,u.y,u.width,u.height,e,r),t.drawImage(g,0,0,w.width,w.height,this.getCanvasDrawNum(u.x),this.getCanvasDrawNum(u.y),this.getCanvasDrawNum(u.width),this.getCanvasDrawNum(u.height)))}if(o&&i.artboard.mlUserSelectDown){var x=Math.round(a/2);t.strokeStyle="#1886ff",t.setLineDash([]),t.lineDashOffset=2,t.lineWidth=this.getCanvasDrawNum(a),t.strokeRect(this.getCanvasDrawNum(u.x+x),this.getCanvasDrawNum(u.y+x),this.getCanvasDrawNum(u.width-a),this.getCanvasDrawNum(u.height-a))}}},getCanvasDrawNum:function(t){return Math.round(t*this.canvasScale)},isDrawMiniImg:function(t){return t.miniLoaded&&t.loaded&&t.miniImg&&t.img&&2*t.miniImgSize.width/3>this.scale*t.rect.width},imgLoaded:function(t,e){if(e.loaded=!0,e.img=t,t){var n=e.imgSize;n.width=t.width,n.height=t.height;var r=this.isDrawMiniImg(e);if(r&&!e.miniLoaded)return}this.drawAllDelay(e)},miniImgLoaded:function(t,e){if(e.miniLoaded=!0,e.miniImg=t,t){var n=e.miniImgSize;n.width=t.width,n.height=t.height;var r=this.isDrawMiniImg(e);if(!r&&e.loaded&&e.img)return}this.drawAllDelay(e)},onSceneResize:function(t,e,n){if(!this.initScale||n){var r=this.rect;if(r&&0!==t&&0!==e){this.initScale=!0;var i=r.width/t,o=r.height/e,a=Math.max(i,o);if(0!==a){a=.96/a;var s=this.scale;this.setScaleList(a),a=this.scale,this.resetScaleSceneCenter(a,s)}}}},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})}},computed:{resetSmoothKey:function(){var t=this.sectionVisible,e=this.scale,n=this.canvasScale;return"".concat(e,"-").concat(n,"-").concat(t)},reDrawKey:function(){var t=this.scale,e=this.sceneX,n=this.sceneY,r=this.sceneWidth,i=this.sceneHeight;return"".concat(t,"-").concat(e,"x").concat(n,"-").concat(r,"x").concat(i)},sectionVisible:function(){return this.sections.length>0},artboardInteractions:function(){var t=this,e={_length__:0},n=this.artboards,r=this.renderDocuments,i=this.filterDocumentType,o=i===a["K"].Section;return n.forEach((function(n){var i=n.artboard.artboard,a=i.boundsInParentForList,s=i.pageGuid||i.docGuid,c=i.topSectionId,l=t.getRenderInteractions(i),u=[];l&&l.forEach((function(t){var e,i=Ft(r,t,a,s,!0,{inSection:o,topSectionId:c});i&&u.push({art:n,canvasData:i,key:t.guid,toArtboardItem:null===(e=t.renderTapInteraction)||void 0===e?void 0:e.toArtboardItem,isEnter:!1})})),u.length>0&&(e[i.cid]=u,e._length__++)})),e},selectNodeCount:function(){var t=0;return this.renderDocumentArtboards.forEach((function(e){e.mlUserSelectDown&&(t+=1)})),t},mouseenterArtboardTitle:function(){var t=this.mouseenterArtboard,e=this.inArtboardMultDownMode;if(t){if(e)return"单击选中/取消选中";var n=t.artboard.artboard;return this.inCloudMode?en(n):"双击查看 ".concat(n.name," 标注详情")}},mouseenterArtboardStyle:function(){var t=this.canvasStyle;if(t)return null;var e=this.mouseenterArtboard;if(!e)return null;var n=this.sceneX,r=this.sceneY,i=this.scale,o=e.rect,a={};a.left=Math.floor(o.x*i+n)+"px",a.top=Math.floor(o.y*i+r)+"px",a.width=Math.ceil(o.width*i)+"px",a.height=Math.ceil(o.height*i)+"px";var s=Math.min(20,Math.max(5,Math.round(6*i)));return a.webkitBoxShadow=a.boxShadow="0 0 ".concat(s,"px rgba(24, 134, 255, 0.3)"),a},canvasWidth:function(){var t=this.sceneWidth,e=this.canvasScale;return t*e},canvasHeight:function(){var t=this.sceneHeight,e=this.canvasScale;return t*e},canvasStyleSection:function(){var t=this.sceneInfoSection;if(0!==t.scale){var e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,o=this.sceneHeight,a=Math.round(e-t.sceneX),s=Math.round(n-t.sceneY),c=r/t.scale;if(0!==a||0!==s||1!==c||t.sceneWidth!==i||t.sceneHeight!==o){var l={transform:""};return 1!==c?(a=t.sceneX/t.scale*r-e,s=t.sceneY/t.scale*r-n,a=-Math.round(a),s=-Math.round(s),l.transform+="translate3d(".concat(a,"px, ").concat(s,"px, 0px) scale(").concat(c.toFixed(5),")")):0===a&&0===s||(l.transform+=" translate3d(".concat(a,"px, ").concat(s,"px, 0px)")),l}}},canvasStyle:function(){var t=this.sceneInfo;if(0!==t.scale){var e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,o=this.sceneHeight,a=Math.round(e-t.sceneX),s=Math.round(n-t.sceneY),c=r/t.scale;if(0!==a||0!==s||1!==c||t.sceneWidth!==i||t.sceneHeight!==o){var l={transform:""};return 1!==c?(a=t.sceneX/t.scale*r-e,s=t.sceneY/t.scale*r-n,a=-Math.round(a),s=-Math.round(s),l.transform+="translate3d(".concat(a,"px, ").concat(s,"px, 0px) scale(").concat(c.toFixed(5),")")):0===a&&0===s||(l.transform+=" translate3d(".concat(a,"px, ").concat(s,"px, 0px)")),l}}},rect:function(){var t=this.titleHeight,e=this.renderDocuments,n=[];e.forEach((function(t){n.push({artboard:{boundsInParent:t.rect}})}));var r=Object(c["C"])(n);return r.y-=t,r.height+=t,r},isSupportWebp:function(){return this.$store.state.isSupportWebp===In.Support},artboardShowInteractionLine:function(){return this.$store.state.artboardShowInteractionLine},mouseenterArtboard:function(){if(this.dragging)return null;var t=this.mouseLoc,e=this.scale,n=this.sceneX,r=this.sceneY,i=this.inViewerArtboards,o=i.length;if(0===o)return null;for(var a=(new d["a"]).set((t.x-n)/e,(t.y-r)/e,1,1),s=o-1;s>=0;s--){var c=i[s];if(Object(d["f"])(c.rect,a))return c}return null},inViewerSections:function(){var t=[],e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,o=this.sceneHeight,a=this.sections;if(0===r||0===i||0===o)return t;var s=(new d["a"]).set(-e/r,-n/r,i/r,o/r);return a.forEach((function(e){var n=Object(d["f"])(e.rect,s);n&&t.push(e)})),t},inViewerArtboards:function(){var t=[],e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,o=this.sceneHeight,a=this.artboards;if(0===r||0===i||0===o)return t;var s=(new d["a"]).set(-e/r,-n/r,i/r,o/r);return a.forEach((function(e){var n=Object(d["f"])(e.rect,s);n&&t.push(e)})),t},sections:function(){var t=[],e=this.renderDocuments;return Object(l["i"])(e)?(e.forEach((function(e){var n=e.maxRect.x-e.rect.x,r=e.maxRect.y-e.rect.y,i=e.sections;Object(l["i"])(i)&&i.forEach((function(e){var i,o=null!==(i=e.boundsInParentForList)&&void 0!==i?i:e.boundsInParent,a={rect:{x:Math.floor(o.x-n),y:Math.floor(o.y-r),width:Math.ceil(o.width),height:Math.ceil(o.height)},section:e};t.push(a)}))})),t):t},artboards:function(){var t=[],e=this.renderDocuments;if(!Object(l["i"])(e))return t;var n=this.isSupportWebp;return e.forEach((function(e){var r=e.maxRect.x-e.rect.x,i=e.maxRect.y-e.rect.y,o=e.arts;Object(l["i"])(o)&&o.forEach((function(e){var o,a=e.artboard;if(a){var s,c=null!==(o=a.boundsInParentForList)&&void 0!==o?o:a.boundsInParent;n&&(s=a.pathPreviewWebp),s||(s=a.pathPreview);var l=a.pathPreviewMini,u={rect:{x:Math.floor(c.x-r),y:Math.floor(c.y-i),width:Math.ceil(c.width),height:Math.ceil(c.height)},imgSrc:s,imgSize:{width:0,height:0},img:null,miniImgSrc:l,miniImgSize:{width:0,height:0},miniImg:null,miniLoaded:!1,loaded:!1,artboard:e};t.push(u)}}))})),t},selectArtboardChanged:function(){return this.$store.state.selectArtboardChanged},customStatusKey:function(){return this.inViewerArtboards.map((function(t){return"".concat(t.artboard.artboard.cid,":").concat(t.artboard.customStatus)})).join(":")}},watch:{mouseenterArtboard:function(t,e){if(!this.dragging&&this.artboardShowInteractionLine&&this.artboardInteractions._length__>0){var n=null===t||void 0===t?void 0:t.artboard.artboard.cid,r=null===e||void 0===e?void 0:e.artboard.artboard.cid;n!==r&&this.draw(null,!0)}},artboardShowInteractionLine:function(){this.draw(null,!0)},artboardInteractions:function(){this.artboardShowInteractionLine&&this.drawAllDelay()},selectArtboardChanged:function(t){var e=this;t&&0!==t.length&&(t.length>10?this.draw(null,!0):this.inViewerArtboards.forEach((function(n){var r=n.artboard.artboard.guid;t[r]&&e.draw(n)})))},dragging:function(){this.draggingTime=Date.now()},sections:function(){this.drawSection(null,!0)},artboards:function(t,e){var n={},r={};null===e||void 0===e||e.forEach((function(t){var e,r=null===t||void 0===t||null===(e=t.artboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.guid;r&&(n[r]=t)})),null===t||void 0===t||t.forEach((function(t){var e,n=null===t||void 0===t||null===(e=t.artboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.guid;n&&(r[n]=t)}));var i=null===e||void 0===e?void 0:e.filter((function(t){var e,n=null===t||void 0===t||null===(e=t.artboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.guid;return!r[n]})),o=null===t||void 0===t?void 0:t.filter((function(t){var e,r=null===t||void 0===t||null===(e=t.artboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.guid,i=n[r];if(!i)return!0;var o=i.miniImg,a=i.miniLoaded,s=i.miniImgSrc,c=i.img,l=i.loaded,u=i.imgSrc,d=i.imgSize,h=i.miniImgSize,f=t.miniImgSrc,m=t.imgSrc;return!a||!l||s!==f||u!==m||(t.miniImg=o,t.miniLoaded=!0,t.miniImgSize=h,t.img=c,t.loaded=!0,t.imgSize=d,!1)}));this.attachImgs(i,!1),this.attachImgs(o,!0)},resetSmoothKey:function(){this.resetCanvasSmoothing()},reDrawKey:function(){this.drawSection(),this.draw()},customStatusKey:function(){this.draw(null,!0)},inArtboardMultDownMode:function(){this.draw()}},data:function(){return{handleDrawAllDelay:0,drawAllTime:0,drawAllTimeSection:0,canvasScale:Object(c["O"])(),mouseLoc:{x:-10,y:-10},drawInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0},sceneInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0},drawInfoSection:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0},sceneInfoSection:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0},sceneDelayTimes:{artboard:0,section:0},sceneDelayHandle:-1,sceneDelayHandleSection:-1,titleHeight:a["b"],initScale:!1,handle:0,handleSection:-1,context:null,useOffscreen:!1,worker:null,workerInited:!1,tipHandle:0,draggingTime:0}},beforeDestroy:function(){clearTimeout(this.tipHandle),clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection),clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),window.removeEventListener("keydown",this.quickKey),this.attachImgs(this.artboards,!1)},mounted:function(){this.resetCanvasSmoothing()},created:function(){window.addEventListener("keydown",this.quickKey),this.attachImgs(this.artboards,!0)},props:{scale:Number,sceneX:Number,sceneY:Number,sceneWidth:Number,sceneHeight:Number,dragging:Boolean,sceneScaleKeepX:Number,sceneScaleKeepY:Number,sceneOffsetX:Number,sceneOffsetY:Number}},Ds=Ls,Ps=(n("d75d"),Object(Dr["a"])(Ds,_s,Ms,!1,null,"4d03dac8",null)),Ns=Ps.exports,Es=function(){var t=this,e=t._self._c;return e("div",{staticClass:"canvas-box"},[e("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:t.sceneWidth*t.canvasScale,height:t.sceneHeight*t.canvasScale}})])},Rs=[],Vs={methods:{draw:function(t,e){var n=this;if(t||e)requestAnimationFrame((function(){n._draw(t,e)}));else{var r=this.sceneInfo,i=this.sceneWidth,o=this.sceneHeight,a=r.sceneWidth!==i||r.sceneHeight!==o?1:0;if(a)return clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),void(this.handle=requestAnimationFrame((function(){n._draw(t)})));clearTimeout(this.sceneDelayHandle),this.sceneDelayHandle=setTimeout((function(){cancelAnimationFrame(n.handle),n.handle=requestAnimationFrame((function(){n._draw(t)}))}),33)}},resetCanvasSmoothing:function(){var t=this.$refs.canvas,e=this.scale,n=this.canvasScale;[t].forEach((function(t){if(t){var r=t.getContext("2d");r&&Wt(r,e,n,2)}}))},_draw:function(t,e){var n=this;clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle);var r=this.sceneX,i=this.sceneY,o=this.scale,a=this.sceneWidth,s=this.sceneHeight,c=this.sceneInfo;if(c.sceneX=r,c.sceneY=i,c.scale=o,c.sceneWidth=a,c.sceneHeight=s,0!==o&&0!==a&&0!==s){var l=this.drawInfo,u=!t,h=!(l.scale===o&&l.sceneX===r&&l.sceneY===i&&l.sceneWidth===a&&l.sceneHeight===s);if(!u||h||e){var f=this.$refs.canvas;if(f){l.scale=o,l.sceneX=r,l.sceneY=i,l.sceneWidth=a,l.sceneHeight=s;var m,p=f.getContext("2d"),v=!1;u||h?(p.clearRect(0,0,this.getCanvasDrawNum(a),this.getCanvasDrawNum(s)),m=this.inViewerArtboards,v=!0):m=[t];var b=(new d["a"]).set(-r,-i,a,s),g=(new d["a"]).set(b.x/o,b.y/o,b.width/o,b.height/o),w=Math.max(2,Math.min(6,Math.ceil(3*this.scale)));p.strokeStyle="#1886ff",p.lineWidth=this.getCanvasDrawNum(w),m.forEach((function(t){n._drawArtboard(p,b,g,o,t,v,w)}))}}}},_drawArtboardBackground:function(t,e,n,r,i){var o,s,c,l=null,u=Math.round(this.titleHeight*i);n||t.clearRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y-u),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height+u));var d=!0;if(r.fill&&r.fillEnabled){var f=r.fill,m=f.value,p=f.includedInExport;d=p,!p&&m&&(c=Object(h["i"])(m).value)}var v=null!==(o=null===(s=r.mlConfig)||void 0===s?void 0:s.fileType)&&void 0!==o?o:r.fileType,b=v===a["r"].FIGMA;c||d||b||(c="#fff"),c&&(t.fillStyle=c,t.fillRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height))),t.fillStyle="#a6a9b4",t.textAlign="left",t.textBaseline="bottom",t.font="".concat(this.getCanvasDrawNum(Math.min(Math.max(2,14*i),24)),"px Arial"),l&&t.fillText(l,this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(Math.round(e.y-Math.min(u/2,8*i))),this.getCanvasDrawNum(e.width))},_drawArtboardText:function(t,e,n){t.textAlign="center",t.font="".concat(this.getCanvasDrawNum(Math.min(Math.max(6,Math.min(n.width,n.height)/15),36)),"px Arial"),t.fillText(e,this.getCanvasDrawNum(Math.floor(n.x+n.width/2)),this.getCanvasDrawNum(Math.ceil(n.y+n.height/2)),this.getCanvasDrawNum(n.width))},_drawArtboard:function(t,e,n,r,i,o){var a=Object(d["f"])(i.rect,n);if(a){var s=Object.assign({},i.rect);s.x=Math.round(s.x*r-e.x),s.y=Math.round(s.y*r-e.y),s.width=Math.round(s.width*r),s.height=Math.round(s.height*r);var c=To(i.artboard,this.inCloudViewerArtboardInfoMode);this._drawArtboardBackground(t,s,o,c,r);var l=i.miniImgSize,u=i.miniImg,h=i.img,f=this.isDrawMiniImg(i);if(f)t.drawImage(u,0,0,l.width,l.height,this.getCanvasDrawNum(s.x),this.getCanvasDrawNum(s.y),this.getCanvasDrawNum(s.width),this.getCanvasDrawNum(s.height));else if(i.loaded)if(h){var m=i.imgSize;t.drawImage(h,0,0,m.width,m.height,this.getCanvasDrawNum(s.x),this.getCanvasDrawNum(s.y),this.getCanvasDrawNum(s.width),this.getCanvasDrawNum(s.height))}else this._drawArtboardText(t,"预览图加载失败",s);else this._drawArtboardText(t,"画板预览图加载中...",s)}},getCanvasDrawNum:function(t){return Math.round(t*this.canvasScale)},isDrawMiniImg:function(t){return t.miniLoaded&&t.loaded&&t.miniImg&&t.img&&2*t.miniImgSize.width/3>this.scale*t.rect.width},imgLoaded:function(t,e){if(e.loaded=!0,e.img=t,t){var n=e.imgSize;n.width=t.width,n.height=t.height;var r=this.isDrawMiniImg(e);if(r&&!e.miniLoaded)return}this.draw(e)},miniImgLoaded:function(t,e){if(e.miniLoaded=!0,e.miniImg=t,t){var n=e.miniImgSize;n.width=t.width,n.height=t.height;var r=this.isDrawMiniImg(e);if(!r&&e.loaded&&e.img)return}this.draw(e)},attachImgs:function(t,e){var n=this;Object(l["i"])(t)&&(e?t.forEach((function(t){c["gb"].add(t.imgSrc,n.imgLoaded,t),c["gb"].add(t.miniImgSrc,n.miniImgLoaded,t)})):t.forEach((function(t){c["gb"].remove(t.imgSrc,n.imgLoaded,t),c["gb"].remove(t.miniImgSrc,n.miniImgLoaded,t),t.img=null,t.loaded=!1})))}},computed:{artboard:function(){return To(this.curArtboard,this.inCloudViewerArtboardInfoMode)},canvasStyle:function(){var t=this.sceneInfo;if(0!==t.scale){var e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,o=this.sceneHeight,a=Math.round(e-t.sceneX),s=Math.round(n-t.sceneY),c=r/t.scale;if(0!==a||0!==s||1!==c||t.sceneWidth!==i||t.sceneHeight!==o){var l={transform:""};return 1!==c?(a=t.sceneX/t.scale*r-e,s=t.sceneY/t.scale*r-n,a=-Math.round(a),s=-Math.round(s),l.transform+="translate3d(".concat(a,"px, ").concat(s,"px, 0px) scale(").concat(c.toFixed(5),")")):0===a&&0===s||(l.transform+=" translate3d(".concat(a,"px, ").concat(s,"px, 0px)")),l}}},rect:function(){var t=this.titleHeight,e=this.artboard,n=e.boundsInArtboard;return(new d["a"]).set(0,0-t,n.width,n.height+t)},isSupportWebp:function(){return this.$store.state.isSupportWebp===In.Support},inViewerArtboards:function(){var t=[],e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,o=this.sceneHeight,a=this.artboards;if(0===r||0===i||0===o)return t;var s=(new d["a"]).set(-e/r,-n/r,i/r,o/r);return a.forEach((function(e){var n=Object(d["f"])(e.rect,s);n&&t.push(e)})),t},artboards:function(){var t=[],e=this.isSupportWebp,n=this.curArtboard,r=this.inCloudViewerArtboardInfoMode;return n?(function(n){var i=To(n,r);if(i){var o=i.boundsInArtboard;if(o){var a;e&&(a=i.pathPreviewWebp),a||(a=i.pathPreview);var s=i.pathPreviewMini,c={rect:{x:0,y:0,width:Math.ceil(o.width),height:Math.ceil(o.height)},imgSrc:a,imgSize:{width:0,height:0},img:null,miniImgSrc:s,miniImgSize:{width:0,height:0},miniImg:null,miniLoaded:!1,loaded:!1,artboard:n};t.push(c)}}}(n),t):t},refreshKey:function(){var t=this.scale,e=this.sceneX,n=this.sceneY,r=this.sceneWidth,i=this.sceneHeight;return"".concat(t,":").concat(e,":").concat(n,":").concat(r,":").concat(i)},resetSmoothKey:function(){var t=this.scale,e=this.canvasScale;return"".concat(t,"-").concat(e)}},watch:{resetSmoothKey:function(){this.resetCanvasSmoothing()},dragging:function(){this.draggingTime=Date.now()},artboards:function(t,e){this.attachImgs(e,!1),this.attachImgs(t,!0)},refreshKey:function(){this.draw()}},data:function(){return{canvasScale:Object(c["O"])(),mouseLoc:{x:-10,y:-10},drawInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0},sceneInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0},sceneDelayHandle:-1,titleHeight:0,handle:0,draggingTime:0}},beforeDestroy:function(){this.attachImgs(this.artboards,!1)},mounted:function(){this.resetCanvasSmoothing()},created:function(){this.attachImgs(this.artboards,!0)},props:{scale:Number,sceneX:Number,sceneY:Number,sceneWidth:Number,sceneHeight:Number,dragging:Boolean,sceneScaleKeepX:Number,sceneScaleKeepY:Number,sceneOffsetX:Number,sceneOffsetY:Number}},Bs=Vs,Hs=(n("d039"),Object(Dr["a"])(Bs,Es,Rs,!1,null,"7f96169a",null)),Us=Hs.exports,$s={passive:!1},Gs={passive:!1,capture:!0},Ws={x:0,y:0,sceneX:0,sceneY:0},zs={components:{ArtboardInfo:as,ArtboardList:js,CanvasModeArtboardList:Ns,CanvasModeArtboardInfo:Us,ViewerBox:Bo,DrawView:Do,CommentPoints:ja,ArtboardPreviewsMap:Ii},created:function(){var t=this;window.addEventListener("wheel",this.mouseWheel,$s),window.addEventListener("resize",this.resizeNextTick,$s),this.$nextTick((function(){(t.type===a["V"].ArtboardDetail||t.allArtboardLoadChecked)&&(t.resize(),t.resetSceneLocation())}))},beforeDestroy:function(){var t=document.documentElement;t.removeEventListener("mousemove",this.mouseMove,Gs),t.removeEventListener("mouseup",this.mouseUp,Gs),window.removeEventListener("wheel",this.mouseWheel,$s),window.removeEventListener("resize",this.resizeNextTick,$s),clearTimeout(this.scalingChangeHandle)},watch:{resetCenterWithRect:function(t){t&&(this.type===a["V"].ArtboardList&&this.setRectToCenterAndScale(t),this.$store.commit("resetCenterWithRect",null))},resetCenterArtboard:function(t){t&&(this.type!==a["V"].ArtboardList||this.artShowInListMode||this.setArtboardToCenterAndScale(t),this.$store.commit("resetCenterArtboard",null))},"imageViewer.resetScale":function(){this.inImageViewerMode&&this.resetSceneLocation()},scale:function(){this.changeInfoCanvasOffset(),this.setScaling()},sceneWidth:function(){this.changeInfoCanvasOffset()},sceneHeight:function(){this.changeInfoCanvasOffset()},rightNavType:function(){this.resizeNextTick()},resetScaleSceneCenter:function(t){var e,n;t&&(e=Math.round(this.sceneOffsetX+this.sceneWidth/2),n=Math.round(this.sceneOffsetY+this.sceneHeight/2),this.resetScaleScene(e,n,t.oldScale,t.newScale))},curArtboard:function(t){null==t?this.type===a["V"].ArtboardList&&this.resetSceneLocation():this.type===a["V"].ArtboardDetail&&this.resetSceneLocation()},curArtboardLoadedVerData:function(t){t&&this.type===a["V"].ArtboardDetail&&this.resetSceneLocation()},resetList:function(){this.type===a["V"].ArtboardList&&this.resetSceneLocation()},resetArtboard:function(){this.type===a["V"].ArtboardDetail&&this.resetSceneLocation()},filterDocumentGuid:function(){this.type===a["V"].ArtboardList&&this.resetSceneLocation()},allArtboardLoadChecked:function(t){this.type===a["V"].ArtboardList&&t&&this.resizeNextTick()}},computed:{rightNavType:function(){return this.$store.state.rightNavType},imageViewer:function(){return this.$store.state.imageViewer},inImageViewerMode:function(){return this.type===a["V"].ImageViewer},EnumScaleType:function(){return a["V"]},artRenderInCanvasMode:function(){return this.$store.state.artRenderInCanvasMode},resetScaleSceneCenter:function(){return this.$store.state.resetScaleSceneCenter},cloudArtListMode:function(){return this.type===a["V"].ArtboardList&&this.useCanvasMode},cloudArtInfoMode:function(){return this.inArtboardInfoMode&&this.useCanvasMode},useCanvasMode:function(){return this.inCloudMode&&this.artRenderInCanvasMode},zoomBoxOffset:function(){return this.cloudArtListMode?null:{transform:"translate3d(".concat(this.sceneX,"px,").concat(this.sceneY,"px,1px)")}},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},scale:function(){switch(this.type){case a["V"].ArtboardList:return this.scaleList;case a["V"].ArtboardDetail:return this.scaleArtboard;case a["V"].ImageViewer:return this.scaleImageViewer;default:return 0}},resetList:function(){return this.$store.state.scale.resetList},resetCenterArtboard:function(){return this.$store.state.scale.resetCenterArtboard},resetCenterWithRect:function(){return this.$store.state.scale.resetCenterWithRect},resetArtboard:function(){return this.$store.state.scale.resetArtboard},inArtboardInfoMode:function(){return this.type===a["V"].ArtboardDetail}},data:function(){return{infoCanvasOffset:{x:0,y:0},sceneX:0,sceneY:0,sceneWidth:0,sceneHeight:0,sceneOffsetX:0,sceneOffsetY:0,dragging:!1,scaling:!1,sceneScaleKeepX:0,sceneScaleKeepY:0,draggedNotclick:!1,scalingChangeHandle:0}},props:{type:Number},methods:{setScaling:function(){var t=this;clearTimeout(this.scalingChangeHandle),this.scaling=!0,this.scalingChangeHandle=setTimeout((function(){t.scaling=!1}),360)},changeInfoCanvasOffset:function(){var t=this.cloudArtInfoMode,e=this.infoCanvasOffset;if(t){var n=this.getInfoCanvasOffset();e.x=n.x,e.y=n.y}},getInfoCanvasOffset:function(){var t=this.scale,e=this.childRect(),n={};return e?(n.x=-(e.width/2+e.x/2)*t+this.sceneWidth/2,n.y=-(e.height/2+e.y/2)*t+this.sceneHeight/2):n.x=n.y=0,n},setConfig:function(t){if(Object(l["k"])(t)){var e=t.scale,n=t.sceneX,r=t.sceneY;"number"===typeof e&&this.setScale(e),"number"===typeof n&&(this.sceneX=n),"number"===typeof r&&(this.sceneY=r)}},resetSceneLocation:function(){if(this.resize(!0),this.sceneX=this.sceneY=0,this.cloudArtListMode){var t=this.getInfoCanvasOffset();this.sceneX=t.x,this.sceneY=t.y}else this.cloudArtInfoMode&&this.changeInfoCanvasOffset()},mouseMove:function(t){t.preventDefault();var e=t.clientX-Ws.x,n=t.clientY-Ws.y;this.sceneX=Math.round(Ws.sceneX+e),this.sceneY=Math.round(Ws.sceneY+n),!this.dragging&&(Math.abs(e)>=3||Math.abs(n)>=3)&&(this.dragging=!0,this.draggedNotclick=!0)},mouseUp:function(t){t.preventDefault(),this.dragging&&Object(c["lb"])(),this.dragging=!1;var e=document.documentElement;e.removeEventListener("mousemove",this.mouseMove,Gs),e.removeEventListener("mouseup",this.mouseUp,Gs)},mousedownZoomContainer:function(t){if(0===t.button){this.draggedNotclick=!1,this.dragging=!1,Ws.x=t.clientX,Ws.y=t.clientY,Ws.sceneX=this.sceneX,Ws.sceneY=this.sceneY;var e=document.documentElement;e.addEventListener("mousemove",this.mouseMove,Gs),e.addEventListener("mouseup",this.mouseUp,Gs)}},setScale:function(t){var e=this.scale;switch(t=Object(c["L"])(e,t),this.type){case a["V"].ArtboardList:this.setScaleList(t);break;case a["V"].ArtboardDetail:this.setScaleArtboard(t);break;case a["V"].ImageViewer:this.setScaleImageViewer(t);break}},clickZoomContainer:function(t){var e=this.$refs.$instance;if(e)if(this.draggedNotclick)this.draggedNotclick=!1;else{var n=e.clickZoomContainer;n&&n(t)}},inBox:function(t){var e=this.$refs.$info;if(!e)return!0;while(null!=t){if(t===e)return!0;t=t.parentNode}return!1},canEmitEvent:function(t,e){var n=t.target;e.target=n;var r=this.$refs.$instance;if(!r)return!1;var i=r.canEmitEvent;return!(i&&!i(e))&&(!!e.isScale||this.inBox(n))},childRect:function(){var t=this.$refs.$instance;if(t){var e=t.rect;return e?e.toJSON():null}},canEmitWindowEvent:function(){switch(this.type){case a["V"].ArtboardList:if(this.inArtboardMode)return!1;break;case a["V"].ArtboardDetail:if(!this.inArtboardMode)return!1;break;case a["V"].ImageViewer:return!0}return!0},resizeNextTick:function(t){var e=this;this.$nextTick((function(){e.resize(t)}))},resize:function(t){if(this.canEmitWindowEvent()){var e=!0===t,n=this.$refs.$info;if(n){var r=n.getBoundingClientRect();this.sceneWidth=r.width,this.sceneHeight=r.height,this.sceneOffsetX=r.left,this.sceneOffsetY=r.top;var i=this.$refs.$instance;if(i){var o=i.onSceneResize;o&&o(this.sceneWidth,this.sceneHeight,e)}}}},setArtboardToCenterAndScale:function(t){var e=this;if(t){var n=t.docGuid,r=t.pageGuid,i=t.name,o=t.topSectionId,a=this.filterDocumentGuid;a&&n!==a&&r!==a&&o!==a&&this.$store.commit("setFilterDocumentGuid",null),this.$nextTick((function(){var n,r=e.renderDocuments;r.find((function(e){var r,i=e.maxRect.x-e.rect.x,o=e.maxRect.y-e.rect.y,a=null===(r=e.arts)||void 0===r?void 0:r.find((function(e){return e.artboard.cid===t.cid}));if(a){var s,c=a.artboard,l=null!==(s=c.boundsInParentForList)&&void 0!==s?s:c.boundsInParent;return n=(new d["a"]).set(Math.floor(l.x-i),Math.floor(l.y-o),Math.ceil(l.width),Math.ceil(l.height)),!0}})),n?(e.setRectToCenterAndScale(n),e.showTextTip("已定位到画板「".concat(i,"」"))):e.showTextTip("无法定位到画板「".concat(i,"」"))}))}},setRectToCenterAndScale:function(t){if(t){var e=this.sceneWidth,n=this.sceneHeight,r=this.cloudArtListMode;if(0!==e&&0!==n){var i=t,o=i.x,s=i.y,c=i.width,l=i.height,u=a["b"],d=c/e,h=(l+u)/n,f=Math.max(d,h);if(0!==f){f=.96/f,this.setScale(f),f=this.scale,t=this.childRect();var m=new B;m.x-=(c/2+o)*f,m.y-=(l/2+s)*f,r?(m.x+=e/2,m.y+=n/2+u/2):(m.x+=t.width/2*f,m.y+=t.height/2*f,m.x=-(c/2+o-t.width/2)*f,m.y=-(l/2+s-t.height/2+u/2)*f),this.sceneX=Math.round(m.x),this.sceneY=Math.round(m.y)}}}},setRectToCenter:function(t){if(t){var e=this.sceneWidth,n=this.sceneHeight,r=this.cloudArtListMode;if(0!==e&&0!==n){var i=t,o=i.x,s=i.y,c=i.width,l=i.height,u=a["b"],d=this.scale;t=this.childRect();var h=new B;h.x-=(c/2+o)*d,h.y-=(l/2+s)*d,r?(h.x+=e/2,h.y+=n/2+u/2):(h.x+=t.width/2*d,h.y+=t.height/2*d,h.x=-(c/2+o-t.width/2)*d,h.y=-(l/2+s-t.height/2+u/2)*d),this.sceneX=Math.round(h.x),this.sceneY=Math.round(h.y)}}},getBoxLocation:function(t,e,n,r){var i=0,o=0,a=r.width,s=r.height,c=(new d["a"]).set(this.sceneOffsetX+this.sceneX,this.sceneOffsetY+this.sceneY,this.sceneWidth,this.sceneHeight);if(this.cloudArtListMode)return t-=this.sceneOffsetX,e-=this.sceneOffsetY,i=this.sceneX,o=this.sceneY,t-=i,e-=o,a*=n,s*=n,{x:t/a,y:e/s};a*=n,s*=n,i=c.x,o=c.y,i+=c.width/2,o+=c.height/2,i-=a/2,o-=s/2;var l=(new d["a"]).set(i,o,a,s);return 0!==l.width&&0!==l.height?(t-=l.x,e-=l.y,t/=l.width,e/=l.height,{x:t,y:e}):void 0},resetScaleScene:function(t,e,n,r){var i=this.$refs.$instance;if(i){var o=this.childRect(),a=this.getBoxLocation(t,e,n,o);if(a){var s=this.getBoxLocation(t,e,r,o);if(s){this.sceneScaleKeepX=t-this.sceneOffsetX,this.sceneScaleKeepY=e-this.sceneOffsetY;var c=s.x-a.x,l=s.y-a.y,u=c*o.width*r,d=l*o.height*r;this.sceneX+=Math.round(u),this.sceneY+=Math.round(d)}}}},mouseWheel:function(t){var e;if(this.canEmitWindowEvent()){var n=t.ctrlKey||t.metaKey,r=t.shiftKey;if("1"!==(null===(e=t.target)||void 0===e?void 0:e.getAttribute("no-wheel"))&&this.inBox(t.target))if(this.canEmitEvent(t,{isScale:n,isMove:!n})){t.preventDefault();var i=t.deltaX,o=t.deltaY,a=t.deltaMode;if(0===a){var s=Math.abs(i),c=Math.abs(o),l=c>50&&o===Math.ceil(o),u=o>0?-1:1,d=t.altKey?5:1;if(n){var h,f=this.scale;h=f<.1?.01:f<=.2?.03:f<=.3?.05:.11,l||(h*=Math.min(1,c/10));var m=f+u*h*d,p=m-f;if(0===p)return;this.setScale(m),this.resetScaleScene(t.pageX,t.pageY,f,this.scale)}else if(l&&0===i)this[r?"sceneX":"sceneY"]+=Math.round(50*u*d);else{var v=i<0?1:0===i?0:-1,b=o<0?1:0===o?0:-1;v*=Math.min(2.5,s/10),b*=Math.min(2.5,c/10),0!==v&&(this.sceneX+=Math.round(10*v*d)),0!==b&&(this.sceneY+=Math.round(10*b*d))}}}else n&&t.preventDefault();else n&&t.preventDefault()}}}},Ys=zs,Xs=(n("e343"),Object(Dr["a"])(Ys,mi,pi,!1,null,"03db231e",null)),Ks=Xs.exports,qs={components:{ZoomContainer:Ks,ScaleControl:fi},methods:{clickHide:function(){this.canClose&&this.$store.commit("setImageViewer",null)},clickPrev:function(){var t=this.currentIndex-1;t<0&&(t=0),this.imageViewer.currentIndex=t,this.imageViewer.resetScale=Date.now()},clickNext:function(){var t=this.currentIndex+1,e=this.imgList.length-1;t>=e&&(t=e),this.imageViewer.currentIndex=t,this.imageViewer.resetScale=Date.now()},onKeyup:function(t){var e=t.keyCode||t.which;27===e&&this.clickHide()}},computed:{EnumScaleType:function(){return a["V"]},visible:function(){return this.imageViewer.visible&&Object(l["i"])(this.imgList)},imgList:function(){return this.imageViewer.imgList},currentIndex:function(){return this.imageViewer.currentIndex},imageViewer:function(){return this.$store.state.imageViewer}},props:{canClose:{type:Boolean,default:!0}},beforeDestroy:function(){window.removeEventListener("keyup",this.onKeyup,!0)},created:function(){window.addEventListener("keyup",this.onKeyup,!0)}},Js=qs,Qs=(n("45cf"),Object(Dr["a"])(Js,oi,ai,!1,null,"42f20b58",null)),Zs=Qs.exports,tc={jszip:Object(ht["createLoadGlobalLibraryFunc"])("JSZip","jszip.min.js",!1),docx:Object(ht["createLoadGlobalLibraryFunc"])("docx","docx-preview.min.js")};function ec(t,e,n,r){return nc.apply(this,arguments)}function nc(){return nc=Object(i["a"])(Object(r["a"])().mark((function t(e,n,o,a){var s,c,l,u;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Object(ht["fetchWithProgress"])(n,o,a),Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tc.jszip.loadAsync();case 2:return t.next=4,tc.docx.loadAsync();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))()]);case 2:return s=t.sent,c=Object(Bt["a"])(s,2),l=c[0],u=c[1],t.next=8,u.renderAsync(l,e);case 8:case"end":return t.stop()}}),t)}))),nc.apply(this,arguments)}var rc={components:{ImageViewer:Zs},computed:{fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error},curVerId:function(){return this.curFileInfo.curVerId}},methods:{getImgUrl:function(t){var e,n,r=t.tagName.toUpperCase();return"IMG"===r?t.src:"IMAGE"===r?null!==(e=t.getAttribute("href"))&&void 0!==e?e:null===(n=t.href)||void 0===n?void 0:n.baseVal:null},tryRemoveBlobUrl:function(){var t=this;try{var e=this.$refs.container;if(!e)return;var n=Object(u["a"])(e.querySelectorAll("img,image")).map((function(e){return t.getImgUrl(e)})).filter((function(t){return Object(l["j"])(t)&&0===t.indexOf("blob:")}));n.forEach((function(t){URL.revokeObjectURL(t)}))}catch(r){}},initListener:function(t){var e=this.$refs.container;e&&e[t?"addEventListener":"removeEventListener"]("click",this.checkImageEvent)},checkImageEvent:function(t){var e,n=null!==(e=t.target)&&void 0!==e?e:t.srcElement;if(n){var r=this.getImgUrl(n);Object(l["j"])(r)&&this.viewImage(r)}},viewImage:function(t){Object(l["j"])(t)&&this.$store.commit("setImageViewer",{imgList:[t],currentIndex:0})},loadDataAsync:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,a,s;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.curNetDiskFile,o=e.curFileDownloadUrl,a=e.fetchData,e.fetchState=c["a"].Fetching,e.errorText=null,n.prev=3,n.next=6,ec(e.$refs.container,o,(function(t){if(Object(l["k"])(t)){var e=t.percentage,n=void 0===e?"":e,r=t.total,i=void 0===r?"":r,o=t.current,s=void 0===o?"":o;a.total=i,a.percentage=n,a.current=s}}),null!==(s=i.fileSize)&&void 0!==s?s:-1);case 6:e.fetchState=c["a"].Success,t&&e.$nextTick((function(){e.resetScroll()})),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](3),e.errorText="文档加载失败: ".concat(n.t0.toString()),e.fetchState=c["a"].Error;case 14:case"end":return n.stop()}}),n,null,[[3,10]])})))()},resetScroll:function(){var t=this.$refs.container;t&&(t.scrollTop=t.scrollLeft=0)}},data:function(){return{fetchState:c["a"].Normal,errorText:null,fetchData:{percentage:"",current:"",total:""}}},watch:{curVerId:function(){var t,e;this.tryRemoveBlobUrl(),null===(t=this.$refs.container)||void 0===t||null===(e=t.replaceChildren)||void 0===e||e.call(t),this.loadDataAsync()}},mounted:function(){this.initListener(!0),this.loadDataAsync()},beforeDestroy:function(){this.initListener(!1),this.$store.commit("setImageViewer",null),this.tryRemoveBlobUrl()}},ic=rc,oc=(n("0a02"),Object(Dr["a"])(ic,ri,ii,!1,null,"1af9f7f2",null)),ac=oc.exports,sc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-pdf"},[e("object",{staticClass:"object",attrs:{data:t.curFileViewUrl,type:t.contentType}},[t._v(" 当前浏览器不支持预览PDF文件,请下载PDF到本地查看:"),e("a",{attrs:{href:t.curFileDownloadUrl}},[t._v("下载 PDF")])])])},cc=[],lc={computed:{curVerId:function(){return this.curFileInfo.curVerId}},data:function(){return{contentType:Fn?null:"application/pdf"}}},uc=lc,dc=(n("1257"),Object(Dr["a"])(uc,sc,cc,!1,null,"7d80c280",null)),hc=dc.exports,fc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-media"},[e("video",{staticClass:"video",attrs:{src:t.curFileViewUrl,autoplay:"",controls:""}},[t._v(" 当前浏览器不支持预览媒体文件,请下载到本地查看:"),e("a",{attrs:{href:t.curFileDownloadUrl}},[t._v("下载 媒体文件")])])])},mc=[],pc={computed:{curVerId:function(){return this.curFileInfo.curVerId}}},vc=pc,bc=(n("b35d"),Object(Dr["a"])(vc,fc,mc,!1,null,"910f16aa",null)),gc=bc.exports,wc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-image"},[e("ImageViewer",{attrs:{canClose:!1}})],1)},xc=[],yc={components:{ImageViewer:Zs},methods:{initImage:function(){this.$store.commit("setImageViewer",{imgList:[this.curFileViewUrl],currentIndex:0})}},computed:{curVerId:function(){return this.curFileInfo.curVerId}},watch:{curVerId:function(){this.initImage()}},created:function(){this.initImage()}},kc=yc,Cc=(n("76ef"),Object(Dr["a"])(kc,wc,xc,!1,null,"7de1a754",null)),Sc=Cc.exports,Tc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-lottie"},[t.lottieError||t.lottieIniting?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在加载lottie文件...",errorText:"lottie文件加载失败,请刷新重试",isLoading:t.lottieIniting,isError:t.lottieError,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t._e(),e("div",{ref:"lottiebox",staticClass:"lottie-box",class:{off:t.lottieError||t.lottieIniting},style:t.lottieBoxStyle})])},Oc=[],Ic=function(){var t=this,e=t._self._c;return t.isLoading?e("div",{staticClass:"n-loading",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"text"},[t._v(t._s(t.loadText))])]):t.isError?e("div",{staticClass:"n-error",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"text"},[t._v(t._s(t.errorText))]),t.reLoadText?e("div",[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v(t._s(t.reLoadText))])]):t._e(),t.showCustomService&&t.canShowContactUs?e("div",[e("a",{staticClass:"contactus",attrs:{href:"javascript:;"},on:{click:t.clickContactUS}},[t._v("联系我们")])]):t._e()]):t._e()},Ac=[],Fc={methods:{clickReload:function(){this.$emit("reload")},clickContactUS:function(){this.setContactUsVisible(!0)}},props:{isLoading:Boolean,loadText:{type:String,default:"数据加载中..."},isError:Boolean,errorText:{validator:function(){return!0}},reLoadText:{type:String,default:"重新加载"},showCustomService:{type:Boolean,default:!1}}},jc=Fc,_c=(n("7970"),Object(Dr["a"])(jc,Ic,Ac,!1,null,"6bfca491",null)),Mc=_c.exports,Lc=Object(ht["createLoadGlobalLibraryFunc"])(["bodymovin","lottie"],"lottie.min.js"),Dc=function(t,e,n,r,i){"string"===typeof r&&(r=+r),"string"===typeof i&&(i=+i);var o=0,a=0,s=e/n,c=r/i;s!==c&&(s>c?(o=Math.ceil((e-c*n)/2),e-=o):s<c&&(a=Math.ceil((n-e/c)/2),n-=a));for(var l=Math.floor(e/6),u=Math.floor(n/6),d=!0,h=o;h<e;h+=l)for(var f=a;f<n;f+=u){var m=Object(Bt["a"])(t.getImageData(h,f,1,1).data,4),p=m[0],v=m[1],b=m[2],g=m[3];if(0!==p||255!==v||0!==b||255!==g){d=!1;break}}return d},Pc={_data:{},clear:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._data,n=Object.keys(e);t>0&&t>n.length||(n.forEach((function(t){try{var n=e[t];if(n&&n.lottie){try{n.lottie.pause()}catch(r){}try{n.lottie.destroy()}catch(r){}n.lottie=null}}catch(r){}})),delete this._data,this._data={})},_getId:function(t){var e,n,r,i=t.viewUrl,o=t.fileName,a=t.verId,s=t.lastVersionId;i&&(n=null!==(r=Object(c["J"])(i))&&void 0!==r?r:i);return n=null!==(e=n)&&void 0!==e?e:o,"lottie-".concat(t.parentId,"-").concat(n,":").concat(null!==a&&void 0!==a?a:s)},unbind:function(t){var e=this._getId(t),n=this._data[e];if(n){var r=n.lottie;try{r.stop(),r.wrapper=null}catch(i){try{r.destroy()}catch(i){}delete this._data[e]}}},remove:function(t){var e=this._getId(t),n=this._data[e];if(n){var r=n.lottie;if(r){try{r.pause()}catch(i){}try{r.destroy()}catch(i){}}delete this._data[e]}},get:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new Promise((function(i,o){try{var a=n._getId(e),s=n._data[a];if(s&&s.fetchState!==c["a"].Error){var l=s.lottie;if(l.container){var u=!1;return l.wrapper!==t&&(l.wrapper=t,t.appendChild(l.container),l.resize(),u=!0),l.play(),i({lottie:l,resized:u})}}var d=e.viewUrl;Lc.loadAsync().then((function(s){var l=s.loadAnimation({container:t,path:"".concat(d,"?type=res"),renderer:r,loop:!0,autoplay:!0,name:a,rendererSettings:{}});l.setSubframe(!1);var u=n._data[a]={lottie:l,fetchState:c["a"].Fetching},h=function(){if(u){if(h&&(l.removeEventListener("drawnFrame",h),h=null),f&&(l.removeEventListener("data_failed",f),f=null),"canvas"===r){var s=t.querySelector("canvas");if(s){var d=s.width,m=s.height,p=s.getContext("2d",{willReadFrequently:!0}),v=l.animationData,b=Dc(p,d,m,v.w,v.h);if(b){try{l.pause()}catch(g){}try{l.destroy()}catch(w){}return l=null,void n.get(t,e,"svg").then(i).catch(o)}}}i({lottie:u.lottie,resized:!0}),u.fetchState=c["a"].Success,u=a=null}},f=function(){u&&(h&&(l.removeEventListener("drawnFrame",h),h=null),f&&(l.removeEventListener("data_failed",f),f=null),u.fetchState=c["a"].Error,delete n._data[a],o(new Error("lottie data failed")),u=a=null)};l.addEventListener("drawnFrame",h),l.addEventListener("data_failed",f)})).catch((function(t){o(t)}))}catch(h){o(h)}}))}};function Nc(){var t,e=c["g"];function n(){var t=document.createElement("div");return t.style.cssText="width:1px!important;height:1px!important;position:absolute!important;z-index: -1!important;top:0;left:0;overflow: hidden!important;pointer-events: none!important;",document.body.appendChild(t),t}function o(t){var e,n,r=null!==(e=null===(n=t.animationData)||void 0===n?void 0:n.fr)&&void 0!==e?e:30,i=t.totalFrames;if(0==i)return[];var o=Math.round(i/r*4);if(o<=1)return[0,i-1];var a=6;o>a&&(o=a);var s=Math.ceil(i/(o-1)),c=[],l=0;do{c.push(l),l+=s}while(l<i);return c.length<o&&c.push(i-1),c}function a(t,e,n,r,i,o,a,s,c,l){return new Promise((function(u,d){l&&(a=t);var h=function(){a.toBlob((function(t){u(t)}),"image/png")},f=function(){e.removeEventListener("drawnFrame",f),f=null;try{if(l){if(r<2){s||(s=a.getContext("2d",{willReadFrequently:!0}));var n=Math.floor(i/8),u=Math.floor(o/8);i-=n,o-=u;for(var m=!0,p=n;p<i;p+=n)for(var v=u;v<o;v+=u){var b=Object(Bt["a"])(s.getImageData(p,v,1,1).data,4),g=b[0],w=b[1],x=b[2],y=b[3];if(0!==g||255!==w||0!==x||255!==y){m=!1;break}}m&&d("canvas not good")}h()}else{var k=function(){S&&URL.revokeObjectURL(S),S=void 0},C=new Blob([t.outerHTML],{type:"image/svg+xml;charset=utf-8"}),S=URL.createObjectURL(C);c.onload=function(t){s.clearRect(0,0,i,o),s.drawImage(t.target,0,0,i,o),k(),h()},c.onerror=function(){k(),d("load svg to image failed")},c.src=S}}catch(T){d(T)}};e.currentFrame!==n?(e.addEventListener("drawnFrame",f),e.goToAndStop(n,!0)):f()}))}return function(){var s=Object(i["a"])(Object(r["a"])().mark((function s(u){var d,h,f,m=arguments;return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(d=m.length>1&&void 0!==m[1]?m[1]:"canvas",null!=u){s.next=3;break}throw"file missing";case 3:return h=document.createElement("div"),h.style.cssText="width: ".concat(e,"px;"),t||(t=n(e)),t.appendChild(h),s.next=9,Lc.loadAsync();case 9:return f=s.sent,s.next=12,new Promise((function(n,s){var m="lottie-g-".concat(Object(c["pb"])()),p=URL.createObjectURL(u),v=f.loadAnimation({container:h,path:p,renderer:d,loop:!1,autoplay:!1,name:m,rendererSettings:{id:m}});v.setSubframe(!1);var b="canvas"===d;function g(){w||(w=!0,p&&(URL.revokeObjectURL(p),p=null),v&&(v.destroy(),v=null),h&&(t.removeChild(h),h=null))}var w=!1;function x(t){return y.apply(this,arguments)}function y(){return y=Object(i["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n(e);case 1:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}function k(){return C.apply(this,arguments)}function C(){return C=Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:s("failed");case 1:case"end":return t.stop()}}),t)}))),C.apply(this,arguments)}v.addEventListener("data_failed",(function(){w||(g(),k())})),v.addEventListener("DOMLoaded",Object(i["a"])(Object(r["a"])().mark((function t(){var i,c,d,f,m,p,y,C,S,T,O,I,A;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!w){t.next=2;break}return t.abrupt("return");case 2:t.prev=2,i=v.animationData,c=i.w,d=i.h,f=Math.ceil(d/c*e),h.style.height=f+"px",v.resize(),m=h.querySelector(b?"canvas":"svg"),p=o(v),b||(C=document.createElement("canvas"),C.width=e,C.height=f,S=C.getContext("2d",{willReadFrequently:!0}),T=new Image(e,f)),O=0;case 12:if(!(O<p.length)){t.next=21;break}return I=p[O],t.next=16,a(m,v,I,O,e,f,C,S,T,b);case 16:A=t.sent,y?y.size<A.size&&(y=A):y=A;case 18:O++,t.next=12;break;case 21:if(C=S=T=void 0,y){t.next=26;break}return k(),t.abrupt("return");case 26:return t.next=28,x(y);case 28:y=null,t.next=36;break;case 32:t.prev=32,t.t0=t["catch"](2),"canvas not good"===t.t0?l(u,"svg").then(n).catch(s):k();case 36:return t.prev=36,g(),t.finish(36);case 39:case"end":return t.stop()}}),t,null,[[2,32,36,39]])}))))}));case 12:return s.abrupt("return",s.sent);case 13:case"end":return s.stop()}}),s)})));function l(t){return s.apply(this,arguments)}return l}()}var Ec=Nc(),Rc={components:{NetworkLoading:Mc},methods:{clickReload:function(){window.location.reload()},resize:function(){var t=this;this.$nextTick((function(){var e=t.$lottie;null===e||void 0===e||e.resize()}))},initLottie:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.lottieIniting&&!t.$lottie){e.next=2;break}return e.abrupt("return");case 2:return t.lottieLoadState=c["a"].Fetching,t.$lottie=null,e.prev=4,e.next=7,Pc.get(t.$refs.lottiebox,t.curNetDiskFile);case 7:n=e.sent,i=n.lottie,t.$lottie=i,t.lottieSize=t.getLottieSize(i),t.lottieLoadState=c["a"].Success,e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](4),t.lottieSize=new q,t.lottieLoadState=c["a"].Error;case 18:case"end":return e.stop()}}),e,null,[[4,14]])})))()},getLottieSize:function(t){var e=new q(0,0);if(!t)return e;var n=t.animationData;if(!n)return e;var r=n.w,i=n.h;return"string"===typeof r&&(r=+r),"string"===typeof i&&(i=+i),e.width=r,e.height=i,e}},computed:{lottieError:function(){return this.lottieLoadState===c["a"].Error},lottieIniting:function(){return this.lottieLoadState===c["a"].Fetching},lottieBoxStyle:function(){var t=this.lottieSize;return{width:t.width>0?t.width+"px":"100%",height:t.height>0?t.height+"px":"100%"}},curVerId:function(){return this.curFileInfo.curVerId}},watch:{lottieSize:function(){this.resize()},webViewHidden:function(t){var e=this.$lottie;e&&(t?e.pause():e.play())},curNetDiskFile:function(t,e){var n=this;e&&(Pc.remove(e),this.$lottie=null),this.$nextTick((function(){n.initLottie()}))}},data:function(){return{lottieLoadState:c["a"].Normal,lottieSize:new q}},beforeDestroy:function(){window.removeEventListener("resize",this.resize),Pc.unbind(this.curNetDiskFile),this.$lottie=null},mounted:function(){var t=this;this.$nextTick((function(){t.initLottie()}))},created:function(){window.addEventListener("resize",this.resize)}},Vc=Rc,Bc=(n("2413"),Object(Dr["a"])(Vc,Tc,Oc,!1,null,"00087742",null)),Hc=Bc.exports,Uc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-base"},[e("div",{staticClass:"img",class:{mini:t.notPreviewImage}},[t.notPreviewImage?e("div",{staticClass:"icon-netdiskfile",class:t.iconCls}):t._e(),e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.previewImage},on:{resize:t.onPreviewImgResize}})],1),e("div",{staticClass:"name",domProps:{textContent:t._s(t.fileName)}}),e("div",{staticClass:"info"},[t.verDataNotFound?e("div",{staticClass:"ver",domProps:{textContent:t._s("不存在版本 #".concat(t.curFileInfo.curVerId))}}):t.fileInfo?[t.fileInfo.verId?e("div",{staticClass:"ver",domProps:{textContent:t._s(t.fileInfo.verId)}}):t._e(),e("div",{staticClass:"size",domProps:{textContent:t._s(t.fileInfo.fileSize)}}),e("div",{staticClass:"time",attrs:{title:t.fileInfo.updateTimeTitle},domProps:{textContent:t._s(t.fileInfo.updateTimeText)}}),e("div",{staticClass:"updater",domProps:{textContent:t._s(t.fileInfo.updater)}})]:t._e()],2),e("div",{staticClass:"btns"},[e("div",{staticClass:"button noborder",on:{click:function(e){return t.clickVerList()}}},[t._v("查看历史版本")]),t.urlLink?e("a",{staticClass:"button light",attrs:{href:t.urlLink,target:"_blank"}},[t._v("打开链接")]):e("div",{staticClass:"button light",on:{click:function(e){return t.clickDownloadNetDiskFile(t.curNetDiskFile)}}},[t._v("下载文件")])])])},$c=[],Gc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"preview",style:t.imgStyle},[t.imgSrc?e("img",{directives:[{name:"show",rawName:"v-show",value:!t.errored,expression:"!errored"}],staticClass:"img",attrs:{src:t.imgSrc},on:{error:t.onError,load:t.onLoad}}):t._e()])},Wc=[],zc={methods:{onLoad:function(t){var e=t.target;this.width=e.naturalWidth,this.height=e.naturalHeight,this.$emit("resize",this.width,this.height)},onError:function(){this.errored||(this.errored=!0)}},watch:{pathPreview:function(){this.errored=!1}},computed:{imgStyle:function(){var t=this.imgHeight;return t>0?"height:".concat(t,"px;"):null},imgSrc:function(){var t=this.pathPreview;return t}},data:function(){return{errored:!1,width:0,height:0}},props:{pathPreview:String,imgHeight:Number}},Yc=zc,Xc=(n("145a"),Object(Dr["a"])(Yc,Gc,Wc,!1,null,"1bd115e0",null)),Kc=Xc.exports,qc={components:{ArtboardPreviewImg:Kc},methods:{clickVerList:function(){this.$store.commit("netdiskFileVerListVisible",!0)},onPreviewImgResize:function(t,e){var n=this.imgSize;n.width=t,n.height=e}},computed:{fileName:function(){return this.curFileInfo.name},verDataNotFound:function(){var t=this.curFileInfo,e=t.renderFile,n=t.inVerData;return n&&!e},notPreviewImage:function(){var t=this.imgSize;return 0===t.width&&0===t.height},fileInfo:function(){var t=this.curNetDiskFile;if(!t)return null;var e={fileSize:Object(c["zb"])(t.fileSize),updater:t.updaterName,updateTimeText:Object(l["d"])(t.updateTimeTimes),updateTimeTitle:Object(l["c"])(t.updateTimeTimes)};return t.verId>0&&(e.verId="#".concat(t.verId)),e},urlLink:function(){var t,e=this.curNetDiskFile;return e&&e.fileType===a["L"].Url?null!==(t=e.previewPath)&&void 0!==t?t:e.webLoc:null},previewImage:function(){var t,e=this.curNetDiskFile;return e?(null!==(t=e.previewImage)&&void 0!==t?t:e.fileType===a["L"].Url)?null:e.previewPath:null},fileType:function(){var t,e,n=this.curFileInfo,r=n.renderFile,i=n.mainFile;return null!==(t=null!==(e=null===r||void 0===r?void 0:r.fileType)&&void 0!==e?e:i.fileType)&&void 0!==t?t:a["L"].Other},iconCls:function(){var t=this.fileType;return a["L"].getName(t,a["M"].Big)}},created:function(){},data:function(){return{imgSize:{width:0,height:0}}}},Jc=qc,Qc=(n("da5a"),Object(Dr["a"])(Jc,Uc,$c,!1,null,"4ba33741",null)),Zc=Qc.exports,tl=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-docx"},[e("ImageViewer",{attrs:{canClose:!0}}),t.fetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[e("b",[t._v("文档打开中...")]),e("span",{domProps:{textContent:t._s("".concat(t.fetchData.current,"/").concat(t.fetchData.total))}})]),e("div",{staticClass:"percentage"},[e("p",{style:{width:t.fetchData.percentage}})])])]):t.isError?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v(t._s(t.errorText))])]):t._e(),e("div",{ref:"container",staticClass:"container"},[e("div",{staticClass:"markdown-box markdown-reset",domProps:{innerHTML:t._s(t.fetchData.markdownHTML)}})])],1)},el=[],nl={codemirror:Object(ht["createLoadGlobalLibraryFunc"])("CodeMirror","codemirror/codemirror.min.js"),modemeta:Object(ht["createLoadGlobalLibraryFunc"])(null,"codemirror/mode/meta.min.js")},rl=!1,il={},ol=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=il[e],n||(n=il[e]=Object(ht["createLoadGlobalLibraryFunc"])(null,"codemirror/mode/".concat(e,"/").concat(e,".min.js"))),t.prev=2,t.next=5,n.loadAsync();case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.t0=t["catch"](2),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}();function al(t,e){if(!t)return null;if(!Object(l["j"])(e))return null;var n=e.toLowerCase(),r=t.modeInfo;if(!Object(l["i"])(r))return null;var i=r.find((function(t){var r;return!!t&&(t.mode===e||((null===(r=t.name)||void 0===r?void 0:r.toLowerCase())===n||(t.mime==n||(!(!Object(l["i"])(t.alias)||-1===t.alias.findIndex((function(t){return(null===t||void 0===t?void 0:t.toLocaleLowerCase())===n})))||(!(!Object(l["i"])(t.mimes)||-1===t.mimes.findIndex((function(t){return t===n})))||!(!Object(l["i"])(t.ext)||-1===t.ext.findIndex((function(t){return t===n}))))))))}));if(!i){var o=/\+(xml|json)$/.exec(n);o&&(i=t.findModeByMIME("application/".concat(o[1])))}return i}function sl(t,e){return cl.apply(this,arguments)}function cl(){return cl=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,o,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(l["k"])(n)||(n={}),t.next=3,ll(n.mode,n.theme);case 3:return i=t.sent,o=i.mode,a=i.CodeMirror,delete n.mode,t.abrupt("return",a(e,Object(s["a"])(Object(s["a"])({lineNumbers:!0,gutters:["CodeMirror-linenumbers"],lineWrapping:!0,readOnly:!0,cursorBlinkRate:-1,dragDrop:!1},n),{},{mode:null!==o&&void 0!==o?o:null})));case 8:case"end":return t.stop()}}),t)}))),cl.apply(this,arguments)}function ll(t,e){return ul.apply(this,arguments)}function ul(){return ul=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(rl){t.next=12;break}return t.next=3,Object(ht["loadCssFileAsync"])("codemirror/codemirror.css");case 3:if(!n||"default"===n){t.next=11;break}return t.prev=4,t.next=7,Object(ht["loadCssFileAsync"])("codemirror/theme/".concat(n,".css"));case 7:t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](4);case 11:rl=!0;case 12:return t.next=14,nl.codemirror.loadAsync();case 14:return i=t.sent,window.CodeMirror=i,t.prev=16,t.next=19,nl.modemeta.loadAsync();case 19:if(e=null===(o=al(i,e))||void 0===o?void 0:o.mode,e){t.next=22;break}return t.abrupt("return",{CodeMirror:i,mode:e});case 22:return t.next=24,ol(e);case 24:t.prev=24,window.CodeMirror=void 0;try{delete window.CodeMirror}catch(r){}return t.finish(24);case 28:return t.abrupt("return",{CodeMirror:i,mode:e});case 29:case"end":return t.stop()}}),t,null,[[4,9],[16,,24,28]])}))),ul.apply(this,arguments)}n("b7a2");var dl=n("751a"),hl=dl.createLoadGlobalLibraryFunc,fl=dl.fetchWithProgress,ml=hl("DOMPurify","purify.min.js"),pl=hl("marked","marked.min.js");function vl(t,e,n){return bl.apply(this,arguments)}function bl(){return bl=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){var o,a,s,l,u,d;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([fl(e,n,i),ml.loadAsync(),pl.loadAsync()]);case 2:return o=t.sent,a=Object(Bt["a"])(o,3),s=a[0],l=a[1],u=a[2],t.next=9,Object(c["j"])(s);case 9:return d=t.sent,t.abrupt("return",l.sanitize(u.parse(d)));case 11:case"end":return t.stop()}}),t)}))),bl.apply(this,arguments)}function gl(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"language-";if(null==t)return null;var r=null===(e=Object(u["a"])(t.classList).find((function(t){return Object(l["j"])(t)&&t.startsWith(n)})))||void 0===e?void 0:e.substring(n.length);return r||null}var wl,xl,yl={components:{ImageViewer:Zs},computed:{fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error},curVerId:function(){return this.curFileInfo.curVerId}},methods:{parseHightlightCode:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,o,a,s,c;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$refs.container,n){e.next=3;break}return e.abrupt("return");case 3:if(o=n.querySelectorAll('pre code[class^="language-"]'),0!==o.length){e.next=6;break}return e.abrupt("return");case 6:a=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=(null!==(n=e.textContent)&&void 0!==n?n:"").replace(/\r?\n$/,""),Object(l["j"])(i)){t.next=3;break}return t.abrupt("return");case 3:return o=gl(e),t.next=6,sl((function(t){var n=e.parentNode;n.insertBefore(t,e),n.removeChild(e);var r=n.classList;r.add("cm-wrapper"),r.add("cm-mode-".concat(o))}),{value:i,mode:o,lineNumbers:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=0;case 8:if(!(s<o.length)){e.next=15;break}return c=o[s],e.next=12,a(c);case 12:s++,e.next=8;break;case 15:case"end":return e.stop()}}),e)})))()},getImgUrl:function(t){var e,n,r=t.tagName.toUpperCase();return"IMG"===r?t.src:"IMAGE"===r?null!==(e=t.getAttribute("href"))&&void 0!==e?e:null===(n=t.href)||void 0===n?void 0:n.baseVal:null},tryRemoveBlobUrl:function(){var t=this;try{var e=this.$refs.container;if(!e)return;var n=Object(u["a"])(e.querySelectorAll("img,image")).map((function(e){return t.getImgUrl(e)})).filter((function(t){return Object(l["j"])(t)&&0===t.indexOf("blob:")}));n.forEach((function(t){URL.revokeObjectURL(t)}))}catch(r){}},initListener:function(t){var e=this.$refs.container;e&&e[t?"addEventListener":"removeEventListener"]("click",this.checkImageEvent)},checkImageEvent:function(t){var e,n=null!==(e=t.target)&&void 0!==e?e:t.srcElement;if(n){var r=this.getImgUrl(n);Object(l["j"])(r)&&this.viewImage(r)}},viewImage:function(t){Object(l["j"])(t)&&this.$store.commit("setImageViewer",{imgList:[t],currentIndex:0})},loadDataAsync:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.curNetDiskFile,i=t.curFileDownloadUrl,o=t.fetchData,t.fetchState=c["a"].Fetching,t.errorText=null,e.prev=3,e.next=6,vl(i,(function(t){if(Object(l["k"])(t)){var e=t.percentage,n=void 0===e?"":e,r=t.total,i=void 0===r?"":r,a=t.current,s=void 0===a?"":a;o.total=i,o.percentage=n,o.current=s}}),null!==(a=n.fileSize)&&void 0!==a?a:-1);case 6:o.markdownHTML=e.sent,t.fetchState=c["a"].Success,t.$nextTick((function(){t.parseHightlightCode()})),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](3),t.errorText="文档加载失败: ".concat(e.t0.toString()),t.fetchState=c["a"].Error;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))()}},data:function(){return{fetchState:c["a"].Normal,errorText:null,fetchData:{percentage:"",current:"",total:"",markdownHTML:""}}},watch:{curVerId:function(){this.loadDataAsync()}},mounted:function(){this.initListener(!0),this.loadDataAsync()},beforeDestroy:function(){this.initListener(!1),this.$store.commit("setImageViewer",null),this.tryRemoveBlobUrl()}},kl=yl,Cl=(n("c93c"),Object(Dr["a"])(kl,tl,el,!1,null,"3b8ee8ae",null)),Sl=Cl.exports,Tl=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-docx"},[t.fetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[e("b",[t._v("文档打开中...")]),e("span",{domProps:{textContent:t._s("".concat(t.fetchData.current,"/").concat(t.fetchData.total))}})]),e("div",{staticClass:"percentage"},[e("p",{style:{width:t.fetchData.percentage}})])])]):t.isError?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v(t._s(t.errorText))])]):t._e(),e("div",{staticClass:"container"},[t.fetchData.textHTML?e("CodeMirror",{attrs:{value:t.fetchData.textHTML,mode:t.codemirrorMode}}):t._e()],1)])},Ol=[],Il=function(){var t=this,e=t._self._c;return e("div",{ref:"container",class:["cm-wrapper","cm-mode-".concat(t.mode)]})},Al=[],Fl={methods:{initEditor:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.$refs.container,a=t.value,s=t.mode,o){e.next=3;break}return e.abrupt("return");case 3:return s=null!==(n=s)&&void 0!==n?n:null,a=null!==(i=a)&&void 0!==i?i:"",e.next=7,sl((function(t){o.appendChild(t)}),{value:a,mode:s});case 7:t.$curEditor=e.sent;case 9:case"end":return e.stop()}}),e)})))()},disposeEditor:function(){var t=this.$curEditor;if(t){var e;if(t.setValue(""),t.clearHistory(),t.display&&(e=t.display.wrapper)){var n=e.parentNode;n&&(n.removeChild(e),n=null),e=null}this.$curEditor=null}}},watch:{value:function(t){var e;null!==(e=t)&&void 0!==e||(t="");var n=this.$curEditor;n&&(n.setValue(t),n.clearHistory())}},mounted:function(){var t=this;this.$nextTick((function(){t.initEditor()}))},beforeDestroy:function(){this.disposeEditor()},props:{mode:{type:String,default:null},value:String}},jl=Fl,_l=Object(Dr["a"])(jl,Il,Al,!1,null,null,null),Ml=_l.exports,Ll={components:{CodeMirror:Ml},computed:{fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error},codemirrorMode:function(){var t,e=this.curNetDiskFile;if(!e)return null;var n=(null!==(t=e.fileExt)&&void 0!==t?t:Object(c["I"])(null===e||void 0===e?void 0:e.name)).toLowerCase();return n.length>1&&"."===n[0]&&(n=n.substring(1)),"mjs"!==n&&"cjs"!==n||(n="js"),n},curVerId:function(){return this.curFileInfo.curVerId}},methods:{loadDataAsync:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.curNetDiskFile,i=t.curFileDownloadUrl,o=t.fetchData,t.fetchState=c["a"].Fetching,t.errorText=null,o.textHTML=null,e.prev=4,e.next=7,Object(ht["fetchTextWithProgress"])(i,(function(t){if(Object(l["k"])(t)){var e=t.percentage,n=void 0===e?"":e,r=t.total,i=void 0===r?"":r,a=t.current,s=void 0===a?"":a;o.total=i,o.percentage=n,o.current=s}}),null!==(a=n.fileSize)&&void 0!==a?a:-1);case 7:o.textHTML=e.sent,t.fetchState=c["a"].Success,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](4),t.errorText="文档加载失败: ".concat(e.t0.toString()),t.fetchState=c["a"].Error;case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))()}},data:function(){return{fetchState:c["a"].Normal,errorText:null,fetchData:{percentage:"",current:"",total:"",textHTML:""}}},watch:{curVerId:function(){this.loadDataAsync()}},mounted:function(){this.loadDataAsync()}},Dl=Ll,Pl=(n("ea97"),Object(Dr["a"])(Dl,Tl,Ol,!1,null,"3daec040",null)),Nl=Pl.exports,El={components:{ViewPdf:hc,ViewMedia:gc,ViewImage:Sc,ViewLottie:Hc,ViewDocx:ac,ViewMarkdown:Sl,ViewText:Nl,ViewBase:Zc},computed:{EnumNetDiskFileType:function(){return a["L"]},fileType:function(){var t,e=this.curNetDiskFile;return null!==(t=null===e||void 0===e?void 0:e.fileType)&&void 0!==t?t:a["L"].Other},fileExtOrName:function(){var t,e=this.curNetDiskFile;return null!==(t=null===e||void 0===e?void 0:e.fileExt)&&void 0!==t?t:null===e||void 0===e?void 0:e.name},isDocx:function(){var t=this.fileType,e=this.fileExtOrName;return a["L"].isDocxFile(t,e)},isMarkdown:function(){var t=this.fileType,e=this.fileExtOrName;return a["L"].isMarkdownFile(t,e)},isTextFile:function(){var t=this.isMarkdown,e=this.fileType,n=this.fileExtOrName;return!t&&a["L"].isTextFile(e,n)}},created:function(){}},Rl=El,Vl=(n("9779"),Object(Dr["a"])(Rl,ei,ni,!1,null,"f5874068",null)),Bl=Vl.exports,Hl=function(){var t=this,e=t._self._c;return e("div",{staticClass:"needlogin-tip",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"logo"}),e("div",{staticClass:"box"},[e("div",{staticClass:"container"},[e("div",{staticClass:"cloudname"},[t._v("您正在访问"),e("b",[t._v(t._s(t.title))])]),e("div",{staticClass:"text"},[t._v("请先登录验证权限")]),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.goCloudLogin}},[t._v("立即登录")])])])])])},Ul=[],$l={computed:{title:function(){var t=this.cloudName;return t||"标记狮设计协作平台私有云服务"}}},Gl=$l,Wl=(n("fa0c"),Object(Dr["a"])(Gl,Hl,Ul,!1,null,"5f420963",null)),zl=Wl.exports,Yl=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"menu",staticClass:"menu",style:t.menuStyle,on:{contextmenu:function(t){t.preventDefault()}}},[t.inCloudViewerMode&&!t.notSupportArtboardStatusVersion?e("div",{staticClass:"menu-item",domProps:{textContent:t._s(t.artboardInDevStatus?"取消标记":"标记为待开发")},on:{click:t.clickSetArtboardStatus}}):t._e(),e("div",{staticClass:"menu-item",on:{click:t.clickGoArtboardSlice}},[t._v("查看全部切图")]),t.inCloudMode?e("div",{staticClass:"menu-item sub",attrs:{not_auto_hide:""},on:{mouseenter:function(e){return t.resetContextMenuSubInLeft()}}},[t._v(" 下载预览图 "),e("div",{ref:"submenu",staticClass:"sub-menu",class:{"in-left":t.contextMenuSubInLeft}},[t.isSupportPreviewHDCloudVersion?e("div",{staticClass:"menu-item",class:{off:t.notPreview4},on:{click:function(e){return t.clickDownPreview(4)}}},[t._v("@4x预览图")]):t._e(),e("div",{staticClass:"menu-item",on:{click:function(e){return t.clickDownPreview(2)}}},[t._v("@2x预览图")]),t.inCloudMode?e("div",{staticClass:"menu-item",on:{click:function(e){return t.clickDownPreview(1)}}},[t._v("@1x预览图")]):t._e()])]):e("div",{staticClass:"menu-item",on:{click:function(e){return t.clickDownPreview(2)}}},[t._v("下载预览图")]),t.inCloudMode&&t.cloudUserIsDesigner?e("div",{staticClass:"menu-item",class:{off:t.fileReadOnly,light:!t.fileReadOnly},on:{click:t.clickRemoveItem}},[t._v("删除")]):t._e()]):t._e()},Xl=[],Kl={methods:{resetContextMenuSubInLeft:function(){var t=this;this.contextMenuSubInLeft=!1,this.$nextTick((function(){var e=t.$refs.submenu;if(e){var n=window,r=n.innerWidth,i=e.getBoundingClientRect(),o=r-i.width-3;t.contextMenuSubInLeft=i.left>o}}))},clickSetArtboardStatus:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,s,c;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.notSupportArtboardStatusVersion,i=t.artboardInDevStatus,o=t.artboard,!n){e.next=3;break}return e.abrupt("return");case 3:return s=i?a["i"].None:a["i"].Dev,e.prev=4,e.next=7,t.setUserFavoriteArtboard(o.artboard,s);case 7:c=e.sent,o.customStatus=c.status,o.customStatusUpdateTimes=c.updateTimes,t.$store.commit("refreshRecents",a["Y"].FavoriteArtboard),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](4),-1===(null===e.t0||void 0===e.t0?void 0:e.t0.toString().indexOf(" aborted "))&&t.showTextTip(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})))()},clickRemoveItem:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,c,l,u,d;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.artboard,i=t.cloudNotSupportEdit,o=t.cloudVersion,a=t.fileReadOnly,s=t.cloudCurrentFolderId,c=t.cloudUserIsDesigner,n){e.next=3;break}return e.abrupt("return");case 3:if(!i){e.next=6;break}return t.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(o,"),请先升级私有云部署包")),e.abrupt("return");case 6:if(l=n.artboard,u=l.guid,d=l.name,!a&&c){e.next=10;break}return t.showTextTip("您没有权限删除画板「".concat(d,"」")),e.abrupt("return");case 10:return e.next=12,t.confirm({title:"删除确认",text:"确认要删除画板「".concat(d,"」吗?")});case 12:if(e.sent){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,t.removeCloudItem({parentId:s,artboardGuid:u});case 16:if(!e.sent){e.next=18;break}t.$store.commit("removeArtboard",u);case 18:case"end":return e.stop()}}),e)})))()},clickDownPreview:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,a,s,c,l,u;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=e.artboard,a=e.inArtboardMode,s=e.inCloudViewerMode,c=e.notPreview4,o){n.next=3;break}return n.abrupt("return");case 3:if(u=o,o=u.artboard,l=u.artboardVerData,s&&a||(l=null),o=null!==(i=l)&&void 0!==i?i:o,o){n.next=10;break}return n.abrupt("return");case 10:if(!c||4!==t){n.next=12;break}return n.abrupt("return",e.showTextTip("画板「".concat(o.name,"」导出标注时未勾选「高清导出」,无法下载@4x预览图")));case 12:return e.setInOutput(!0),n.prev=13,n.next=17,fo("".concat(o.name).concat(1===t?"":"@".concat(t,"x"),".png"),o.artboardPreviewPng,o.artboardPreviewJS,o,t);case 17:n.next=23;break;case 19:n.prev=19,n.t0=n["catch"](13),e.showTextTip(n.t0);case 23:return n.prev=23,e.setInOutput(!1),n.finish(23);case 26:case"end":return n.stop()}}),n,null,[[13,19,23,26]])})))()},clickGoArtboardSlice:function(){this.setCurArtboard(this.artboard),this.$store.commit("setRightNavType",a["U"].Slice)},hideContextmenu:function(t){var e=this,n=t.type,r=t.button,i=t.target;"mouseup"===n&&2===r||(clearTimeout(this.handle),null!==i&&void 0!==i&&i.hasAttribute("not_auto_hide")||(this.handle=setTimeout((function(){e.$store.commit("setArtboardMenu",{visible:!1})}),120)))},fixedLocation:function(){var t=this;this.$nextTick((function(){if(t.visible){var e=t.$refs.menu,n=t.artboardMenu,r=n.x,i=n.y,o=t.location;if(e){var a=window,s=a.innerWidth,c=a.innerHeight,l=e.offsetWidth,u=e.offsetHeight,d=s-l-5,h=c-u-5;o.left=Math.min(r,d)+"px",o.top=Math.min(i,h)+"px"}}}))}},watch:{resetLocationKey:function(){this.fixedLocation()},"artboardMenu.x":function(){clearTimeout(this.handle)},"artboardMenu.y":function(){clearTimeout(this.handle)},"artboardMenu.artboard":function(t){null!=t&&clearTimeout(this.handle)},visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},created:function(){this.visible&&(window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0))},beforeDestroy:function(){clearTimeout(this.handle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)},data:function(){return{contextMenuSubInLeft:!1,needOpen:!1,handle:0,location:{top:null,left:0}}},computed:{notPreview4:function(){var t,e,n=this.artboard,r=this.inCloudViewerMode,i=this.inArtboardMode;if(!n)return!0;var o=n;return n=o.artboard,e=o.artboardVerData,r&&i||(e=null),n=null!==(t=e)&&void 0!==t?t:n,n?!a["h"].checkType(n.apm,a["h"].PreviewFinally_4x):void 0},isSupportPreviewHDCloudVersion:function(){return this.inCloudMode&&$r.supportPreviewHD(this.cloudVersion)},notSupportArtboardStatusVersion:function(){return $r.notSupportAiPrompt(this.cloudVersion)},artboardInDevStatus:function(){var t=this.artboard,e=this.inCloudViewerMode;return e&&t.customStatus===a["i"].Dev},resetLocationKey:function(){var t=this.artboardMenu,e=this.visible;return"".concat(e,":").concat(t.x,":").concat(t.y)},visible:function(){var t=this.artboardMenu,e=t.artboard,n=t.visible;return n&&!!e},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!0}return!1},fileReadOnly:function(){return this.cloudNotSupportEdit||!this.canChangeFile},cloudNotSupportEdit:function(){return $r.notSupportNetDiskFileWebUpload(this.cloudVersion)},artboard:function(){return this.artboardMenu.artboard},menuStyle:function(){var t=this.location;return t},artboardMenu:function(){return this.$store.state.artboardMenu}}},ql=Kl,Jl=(n("15ce"),Object(Dr["a"])(ql,Yl,Xl,!1,null,"d98dd7b2",null)),Ql=Jl.exports,Zl=function(){var t=this,e=t._self._c;return t.tipVisible?e("div",{staticClass:"pop-tip-text"},[e("p",[t._v(t._s(t.tipText)),e("span",{staticClass:"btn-close",on:{click:function(e){return t.hideTextTip()}}},[t._v("我知道了")])])]):t._e()},tu=[],eu={computed:{tipText:function(){return this.$store.state.textTip.text},tipVisible:function(){return this.$store.state.textTip.visible}}},nu=eu,ru=(n("2d13"),Object(Dr["a"])(nu,Zl,tu,!1,null,"5c4bb38c",null)),iu=ru.exports,ou=function(){var t=this,e=t._self._c;return t.visibleMin?e("FolderNavMini",{attrs:{isSupportNetDiskFile:t.isSupportNetDiskFile,miniFoldersOpen:t.miniFoldersOpen},on:{clickMiniFoldersOpen:t.clickMiniFoldersOpen}}):t.visible?e("FolderNavMax",{attrs:{isSupportNetDiskFile:t.isSupportNetDiskFile,subFilesOpen:t.subFilesOpen&&!t.inArtboardMultDownMode,subFoldersOpen:t.subFoldersOpen&&!t.inArtboardMultDownMode,subArtboardsOpen:t.subArtboardsOpen||t.inArtboardMultDownMode},on:{clickSubFoldersOpen:t.clickSubFoldersOpen,clickSubFilesOpen:t.clickSubFilesOpen,clickSubArtboardsOpen:t.clickSubArtboardsOpen}}):t._e()},au=[],su=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-folders",class:{allfolders:t.allFoldersBoxVisible}},[e("div",{staticClass:"header"},[e("div",{staticClass:"name"}),e("div",{staticClass:"m"},[e("FolderNavSortMenu"),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",attrs:{type:"text",placeholder:"搜索当前文件夹",maxlength:"50",spellcheck:"false"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t.searchText?e("a",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:t.clickClearSearchText}}):t._e()])],1)]),e("div",{ref:"$list",staticClass:"list",class:{usetab:t.needShowFile},on:{scroll:t.onListScroll}},[t.needShowFile?e("div",{staticClass:"list-tab",class:{on:t.subFoldersOpen}},[e("span",{on:{click:t.clickSubFoldersOpen}},[t._v("文件夹("+t._s(t.renderCloudSubFolders.length)+")")])]):t._e(),t.hasSubFolders?e("div",{ref:"$folders",staticClass:"list-item",class:{off:!t.folderListVisible},style:{height:t.renderFolderHeight+"px"}},[e("div",{staticClass:"list-box",class:{scrolling:t.scrolling},style:{"padding-top":t.renderFolderLazyList.paddingTop}},t._l(t.renderFolderLazyList.items,(function(n){return e("FoldNavFolderItem",{key:n.id,attrs:{isSupportNetDiskFile:t.isSupportNetDiskFile,folder:n},on:{contextMenuFolder:t.contextMenuFolder}})})),1)]):t._e(),t.needShowFile&&!t.hasSubFolders||t.inRootAndNotSearchFound?e("div",{directives:[{name:"show",rawName:"v-show",value:t.subFoldersOpen||t.inRootAndNotSearchFound,expression:"subFoldersOpen||inRootAndNotSearchFound"}],staticClass:"empty"},[t._v(t._s(t.hasSearchText?"未找到包含 “".concat(t.searchText,"” 的文件夹"):"没有文件夹"))]):t._e(),t.artShowInListMode&&t.needShowFile&&t.documentArtboards.length>0?[e("div",{staticClass:"list-tab",class:{on:t.subArtboardsOpen}},[e("span",{on:{click:t.clickSubArtboardsOpen}},[t._v("画板("+t._s(t.renderCloudSubArtboards.length)+")")])]),t.hasSubArtboards?e("div",{ref:"$artboards",staticClass:"list-item",class:{off:!t.subArtboardsOpen},style:{height:t.renderArtboardHeight+"px"}},[e("div",{staticClass:"list-box",class:{scrolling:t.scrolling},style:{"padding-top":t.renderArtboardLazyList.paddingTop}},t._l(t.renderArtboardLazyList.items,(function(n){return e("FoldNavArtboardItem",{key:n.artboard.cid,attrs:{item:n,lightArtboardId:t.lightArtboardId}})})),1)]):e("div",{directives:[{name:"show",rawName:"v-show",value:t.subArtboardsOpen,expression:"subArtboardsOpen"}],staticClass:"empty"},[t._v(t._s(t.hasSearchText?"未找到包含 “".concat(t.searchText,"” 的画板"):"当前文件夹不存在画板"))])]:t._e(),t.needShowFile?e("div",{staticClass:"list-tab",class:{on:t.subFilesOpen}},[e("span",{on:{click:t.clickSubFilesOpen}},[t._v("文件("+t._s(t.renderCloudSubFiles.length)+")")])]):t._e(),t.needShowFile&&t.hasSubFiles?e("div",{ref:"$files",staticClass:"list-item",class:{off:!t.subFilesOpen},style:{height:t.renderFileHeight+"px"}},[e("div",{staticClass:"list-box",class:{scrolling:t.scrolling},style:{"padding-top":t.renderFileLazyList.paddingTop}},t._l(t.renderFileLazyList.items,(function(n){return e("FoldNavFileItem",{key:n.viewUrl,attrs:{file:n},on:{contextMenuFile:t.contextMenuFile}})})),1)]):t.needShowFile?e("div",{directives:[{name:"show",rawName:"v-show",value:t.subFilesOpen,expression:"subFilesOpen"}],staticClass:"empty"},[t._v(t._s(t.hasSearchText?"未找到包含 ".concat(t.searchText," 的文件"):"没有文件"))]):t._e()],2),e("FileItemContextMenu",{attrs:{fileContextMenuData:t.fileContextMenuData}}),e("FolderItemContextMenu",{attrs:{folderContextMenuData:t.folderContextMenuData}}),t.artShowInListMode?e("MultArtboardDownload"):t._e()],1)},cu=[],lu=function(){var t=this,e=t._self._c;return t.inArtboardMultDownMode&&t.exportNodeCount?e("section",{staticClass:"mult-download"},[e("div",{staticClass:"text"},[0!==t.exportNodeCount?e("Checkbox",{attrs:{text:"全选",selected:t.allSelected},on:{click:t.clickAllSelectBtn}}):t._e(),e("div",{staticClass:"info"},[t._v("已选中"+t._s(t.selectNodeCount)+"/"+t._s(t.exportNodeCount)+"个画板")])],1),e("div",{staticClass:"btns"},[t.inCloudMode?e("Select",{attrs:{options:t.previewScaleSelectOptions},on:{changed:t.onPreviewScaleSelectChanged}}):t._e(),e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickDownSelectAll()}}},[t._v("下载")]),e("a",{staticClass:"btn-close",attrs:{href:"javascript:;"},on:{click:function(e){return t.setInArtboardMultDownMode(!1)}}})],1)]):t._e()},uu=[],du=function(){var t=this,e=t._self._c;return e("dl",{staticClass:"select",class:{expandUp:t.expandUp||t.showDDInTop}},[e("dt",{class:{on:t.visible,light:t.light},attrs:{title:t.title},on:{click:function(e){e.stopPropagation(),t.visible=!t.visible}}},[t._v(t._s(t.selectName))]),t.visible?e("dd",[e("ul",{ref:"ul"},t._l(t.options,(function(n,r){return e("li",{key:r,class:{on:t.selected===n,disabled:n.disabled},attrs:{title:n.title},on:{click:function(e){return t.clickOption(n)}}},[t._v(t._s(n.name))])})),0)]):t._e()])},hu=[],fu={methods:{checkRect:function(){var t=this,e=this.visible,n=this.expandUp;e&&(n||(this.showDDInTop=!1,this.$nextTick((function(){var e=t.$refs.ul;if(e){var n=e.getBoundingClientRect(),r=window.innerHeight-t.checkShowUpFixedHeight,i=n.bottom;i>r&&(t.showDDInTop=!0)}}))))},clickOption:function(t){if(Object(l["k"])(t)){var e=this.selected;e!==t&&(null!=e&&(e.selected=!1),t.selected=!0,this.visible=!1,this.$emit("changed",t))}},onVisibleClick:function(){var t=this;requestAnimationFrame((function(){t.visible=!1}))}},watch:{visible:function(t){t?(this.checkRect(),window.addEventListener("click",this.onVisibleClick,!0)):window.removeEventListener("click",this.onVisibleClick,!0)}},computed:{title:function(){var t=this.selected;return t&&t.title||""},selectName:function(){var t=this.selected;return t?t.name:""},selected:function(){var t=this.options,e=t.find((function(t){return Object(l["k"])(t)&&t.selected}));return null==e&&(e=t[0]),e}},beforeDestroy:function(){window.removeEventListener("click",this.onVisibleClick,!0)},data:function(){return{visible:!1,showDDInTop:!1}},props:{options:Array,expandUp:{default:!1,type:Boolean},checkShowUpFixedHeight:{default:0,type:Number},light:Boolean}},mu=fu,pu=(n("ec86"),Object(Dr["a"])(mu,du,hu,!1,null,"25850174",null)),vu=pu.exports,bu=function(){var t=this,e=t._self._c;return e("label",{staticClass:"checkbox",class:{on:t.selected},on:{click:t.click}},[t.text?e("i",[t._v(t._s(t.text))]):t._e()])},gu=[],wu={props:{text:String,selected:Boolean},methods:{click:function(){this.$emit("click",!this.selected)}}},xu=wu,yu=Object(Dr["a"])(xu,bu,gu,!1,null,null,null),ku=yu.exports,Cu={components:{Checkbox:ku,Select:vu},methods:{onPreviewScaleSelectChanged:function(t){Object(l["k"])(t)&&(this.exportScale=t.value,Object(c["rb"])("artboard.previews.scale",this.exportScale))},clickAllSelectBtn:function(t){t=!this.allSelected&&(this.exportNodeCount,!0);var e={length:0};this.renderDocumentArtboards.forEach((function(n){n.mlUserSelectDown!==t&&(n.mlUserSelectDown=t,e[n.artboard.guid]=1,e.length++)})),this.$store.commit("selectArtboardChanged",e)},clickDownSelectAll:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.exportNodeCount){e.next=3;break}return t.showTextTip("当前文件夹不存在画板"),e.abrupt("return");case 3:return t.setInOutput(!0),e.prev=4,e.next=7,po(t.documentName,t.selectArtboards,t.exportScale);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](4),t.showTextTip(e.t0);case 12:return e.prev=12,t.setInOutput(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[4,9,12,15]])})))()}},computed:{previewScaleSelectOptions:function(){var t=this.exportScale,e=[{value:1,name:"2x",selected:1===t,disabled:!1}];return this.inCloudMode&&(e.push({value:.5,name:"1x",selected:.5===t,disabled:!1}),$r.supportPreviewHD(this.cloudVersion)&&e.unshift({value:2,name:"4x",selected:2===t,disabled:!1,title:"若导出时未勾选「高清导出」,将使用@2x预览图放大后保存"})),e},allSelected:function(){return 0!==this.exportNodeCount&&this.exportNodeCount===this.selectNodeCount},selectNodeCount:function(){var t=0;return this.renderDocumentArtboards.forEach((function(e){e.mlUserSelectDown&&(t+=1)})),t},selectArtboards:function(){var t=this.renderDocumentArtboards,e=[];return t.forEach((function(t){t.mlUserSelectDown&&e.push(t.artboard)})),e},exportNodeCount:function(){return this.renderDocumentArtboards.length}},data:function(){return{exportScale:1}},created:function(){var t=1;if(this.inCloudMode)switch(t=Object(c["K"])("artboard.previews.scale",!1),t){case"0.5":case"2":case"1":t=parseFloat(t);break;default:t=1;break}this.exportScale=t}},Su=Cu,Tu=(n("c768"),Object(Dr["a"])(Su,lu,uu,!1,null,"c972f98c",null)),Ou=Tu.exports,Iu=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"menu",staticClass:"fileitem-contextmenu",style:t.menuStyle,on:{contextmenu:function(e){return e.preventDefault(),t.hideContextmenu.apply(null,arguments)}}},[t.canOnlineView?e("div",{on:{click:function(e){return t.clickNetDiskFile(t.file,!0)}}},[t._v("查看详情")]):t._e(),t.supportFileVersionList?e("ContextmenuFileVersion",{attrs:{file:t.file},on:{setInConfirm:t.setInConfirm,setNotCloseThisTime:t.setNotCloseThisTime,onFileRemoved:t.onFileRemoved}}):t._e(),e("div",{on:{click:function(e){return t.copyNetdiskFileViewUrl(t.file)}}},[t._v("复制链接")]),e("div",{on:{click:function(e){return t.clickDownloadNetDiskFile(t.file)}}},[t._v("下载文件")]),t.isUrlFile?e("div",{class:{off:t.fileReadOnly},on:{click:t.clickEditNetDiskLink}},[t._v("编辑链接")]):t._e(),e("div",{class:{off:t.fileReadOnly},on:{click:t.clickFileReName}},[t._v("重命名")]),e("div",{class:{light:!0,off:t.fileReadOnly},on:{click:t.clickRemoveItem}},[t._v("删除")])],1):t._e()},Au=[],Fu=function(){var t=this,e=t._self._c;return t.fileSecId?e("div",{staticClass:"artboard-version-info",class:{on:t.listVisible,"in-left":t.listLocation.inLeft,"in-bottom":t.listLocation.inBottom},on:{mouseenter:function(e){return t.setVisible(!0)},mouseleave:function(e){return t.setVisible(!1)}}},[e("div",{staticClass:"btn-file-verison",on:{click:function(e){return t.clickMenu()}}},[t._v("历史版本")]),e("FileVersionList",{ref:"list",attrs:{visible:t.listVisible,readonlyCurrentFolder:t.fileReadOnly,fileInfo:t.fileInfo,curVerId:t.curVerId,versionCount:t.fileVersionCount,fetchState:t.fetchState,errorText:t.errorText},on:{verRemoved:t.verRemoved,clickVerItem:t.clickVerItem,setInConfirm:t.setInConfirm}})],1):t._e()},ju=[],_u=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"file-version-list",on:{click:function(e){t.notClickClose=!0}}},[t.isError?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取版本信息...",errorText:t.errorText,isLoading:t.fetching,isError:t.isError,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t.fetching||t.fileInfo?[e("div",{staticClass:"base"},[e("div",{staticClass:"tab"},[t._v("最新版本")]),e("FileVersionItem",{attrs:{fetching:t.fetching,readonlyCurrentFolder:t.readonlyCurrentFolder,verData:t.mainFile,selected:t.lastVersionSelected},on:{clickRemoveVerItem:t.clickRemoveVerItem,clickVerItem:t.clickVerItem}}),e("div",{staticClass:"tab",domProps:{textContent:t._s("历史版本".concat(t.fetching?"":"(".concat(t.histories.length,")")))}})],1),t.histories.length>0?e("div",{staticClass:"list"},[e("LazyList",{ref:"lazyList",attrs:{list:t.histories,lineHeight:t.itemLineHeight},scopedSlots:t._u([{key:"default",fn:function(n){return t.fetching||n.item?e("FileVersionItem",{key:n.item?"".concat(n.item.verId,":").concat(n.item.viewUrl):"index:".concat(n.index),attrs:{fetching:t.fetching,readonlyCurrentFolder:t.readonlyCurrentFolder,verData:n.item,selected:n.item&&t.curVerId===n.item.verId},on:{clickRemoveVerItem:t.clickRemoveVerItem,clickVerItem:t.clickVerItem}}):t._e()}}],null,!0)})],1):e("div",{staticClass:"empty"})]:t._e()],2):t._e()},Mu=[],Lu=function(){var t=this,e=t._self._c;return e("div",{ref:"lazyList",staticClass:"common-lazy-list",on:{scroll:t.onBoxScroll}},[e("div",{staticClass:"real-height",style:{height:t.boxRealHeight}},[e("div",{staticClass:"front",style:t.frontStyle},[t._l(t.showList,(function(e,n){return t._t("default",null,{index:n,realIndex:e.realIndex,item:e.item})}))],2)])])},Du=[],Pu={methods:{scrollToTop:function(){var t=this.$refs.lazyList;if(!t)return!1;t.scrollTop=0},scrollTo:function(t){if("function"!==typeof t)return!1;var e=this.list,n=this.$refs.lazyList,r=this.lineHeight,i=this.boxHeight,o=this.boxScrollTop;if(!n)return!1;var a=e.findIndex(t);if(-1===a)return!1;var s=r*a,c=(new d["a"]).set(0,o,100,i),l=(new d["a"]).set(0,s,100,r);return c.isContans(l)||(s-=i/2-r/2,n.scrollTop=s),!0},resetBoxData:function(){var t=this;this.$nextTick((function(){var e=t.$refs.lazyList;e&&(t.boxHeight=e.offsetHeight,t.boxScrollTop=e.scrollTop)}))},onBoxScroll:function(){var t=this.$refs.lazyList;t&&(this.boxScrollTop=t.scrollTop)}},computed:{boxRealHeight:function(){return this.list.length*this.lineHeight+2+"px"},frontStyle:function(){var t=this.showList,e=this.lineHeight,n=0;return t.length>0&&(n=t[0].realIndex*e),{"margin-top":n+"px"}},showList:function(){var t=this.list,e=this.preloadCount,n=this.lineHeight,r=this.boxScrollTop,i=this.boxHeight,o=e*n,a=new d["a"],s=(new d["a"]).set(0,r-o,100,i+2*o);return t.map((function(t,e){return a.set(0,e*n,100,n),Object(d["f"])(a,s)?{item:t,realIndex:e}:null})).filter((function(t){return null!=t}))},winRectChangeKey:function(){var t=this.winRect;return"".concat(t.width,"x").concat(t.height)},winRect:function(){return this.$store.state.winRect}},watch:{winRectChangeKey:function(){this.resetBoxData()}},mounted:function(){this.resetBoxData()},beforeDestroy:function(){},props:{list:Array,lineHeight:Number,preloadCount:{type:Number,default:1}},data:function(){return{boxScrollTop:0,boxHeight:0}}},Nu=Pu,Eu=(n("0eb7"),Object(Dr["a"])(Nu,Lu,Du,!1,null,"1c34f551",null)),Ru=Eu.exports,Vu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-version-item",class:{on:t.selected,"skeleton-loading":t.fetching},attrs:{title:t.userFaceTitle},on:{click:t.clickItem}},[e("div",{staticClass:"date skeleton-sub-r",domProps:{textContent:t._s(t.dateStr)}}),e("div",{staticClass:"user"},[t.fetching?e("div",{staticClass:"userface skeleton-sub-r"}):t._e(),e("div",{staticClass:"name skeleton-sub-r",domProps:{textContent:t._s(t.userNickName)}})]),e("div",{staticClass:"ver skeleton-sub-r",domProps:{textContent:t._s(t.verId)}}),t.cloudIsLogin?e("div",{staticClass:"btn-del",class:{off2:!t.canRemove},attrs:{title:t.canRemove?"删除该版本":t.userCanEdit?"您没有权限删除该版本":"您没有权限删除其他成员提交的文件版本"},on:{click:t.clickDelVer}}):t._e()])},Bu=[],Hu={methods:{clickDelVer:function(){this.$emit("clickRemoveVerItem",this.verData)},clickItem:function(t){var e;null!==(e=t.target)&&void 0!==e&&e.classList.contains("btn-del")||this.$emit("clickVerItem",this.verData)}},computed:{userCanEdit:function(){var t;return this.cloudUserIsDesigner||(null===(t=this.verData)||void 0===t?void 0:t.updaterId)===this.cloudUserId},canRemove:function(){var t=this.fetching,e=this.cloudIsLogin,n=this.readonlyCurrentFolder;return!(!e||t)&&(!n&&this.userCanEdit)},verId:function(){var t,e=this.verData,n=this.fetching;if(n)return" ";if(!e)return"";var r=e.verId,i=e.lastVersionId;return null!==(t=r)&&void 0!==t||(r=i),r>0?"#".concat(r):"null"},dateStr:function(){var t=this.verData,e=this.fetching;return e?" ":Object(l["b"])(t.updateTimeTimes,this.webViewStateTimes)},userFaceTitle:function(){var t=this.verData,e=this.fetching;return e?" ":t?sn(t):null},userNickName:function(){var t=this.verData,e=this.fetching;if(e)return" ";if(!t)return"-";var n=t.updaterName;return n||"-"}},props:{readonlyCurrentFolder:Boolean,verData:Object,selected:Boolean,fetching:Boolean}},Uu=Hu,$u=(n("273d"),Object(Dr["a"])(Uu,Vu,Bu,!1,null,"307b60a4",null)),Gu=$u.exports,Wu={components:{FileVersionItem:Gu,LazyList:Ru,NetworkLoading:Mc},methods:{setInConfirm:function(t){this.inConfirm=t,this.$emit("setInConfirm",t)},clickReload:function(){this.artboardDetail.refreshDataTicks=Date.now()},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.inConfirm||(t.notClickClose?t.notClickClose=!1:t.setVisible(!1))}),50)},confirmAction:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.setInConfirm(!0),n.next=3,t();case 3:return i=n.sent,n.next=6,Object(c["yb"])(30);case 6:return e.setInConfirm(!1),n.abrupt("return",i);case 8:case"end":return n.stop()}}),n)})))()},clickRemoveVerItem:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var o,a,s,u,d,h,f,m,p,v,b;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return o=e.readonlyCurrentFolder,a=e.cloudUserIsDesigner,s=e.cloudUserId,u=t.verId,d=t.viewUrl,h=t.parentId,f=t.updaterId,n.prev=5,n.next=8,e.checkLoginThrow();case 8:if(n.sent){n.next=10;break}return n.abrupt("return");case 10:if(a||f===s){n.next=13;break}return e.showTextTip("您没有权限删除其他成员提交的文件版本"),n.abrupt("return");case 13:if(!o){n.next=15;break}return n.abrupt("return",e.showTextTip("您没有权限删除文件版本#".concat(u)));case 15:return e.setInConfirm(!1),n.next=18,e.confirmAction(Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.confirm({text:"确认要删除文件版本 #".concat(u," 吗?")});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))));case 18:return n.next=20,n.sent;case 20:if(n.sent){n.next=22;break}return n.abrupt("return");case 22:return p=new FormData,v=Object(c["J"])(d),p.append("secId",v),p.append("verId",u),p.append("parentId",h),n.next=29,e.fetchPostCloudApi("removefileverbyweb",{body:p});case 29:if(b=n.sent,Object(l["k"])(b)){n.next=32;break}throw new Error("返回值异常:".concat(b));case 32:if(b.success){n.next=34;break}throw new Error(b.errMsg);case 34:e.showTextTip(null!==(m=b.errMsg)&&void 0!==m?m:"文件版本#".concat(u," 已删除")),e.$emit("verRemoved",v,u),Gn(Hn.SPACE.filedetail,v),e.$store.commit("autoGetFolderPrecisKey"),n.next=43;break;case 40:n.prev=40,n.t0=n["catch"](5),e.showTextTip(n.t0);case 43:case"end":return n.stop()}}),n,null,[[5,40]])})))()},clickVerItem:function(t){this.$emit("clickVerItem",t)},scrollToSelectFileVer:function(){var t,e=this.curVerId,n=this.lastVersionSelected,r=this.fetching;!r&&!n&&e>0&&(null===(t=this.$refs.lazyList)||void 0===t||t.scrollTo((function(t){return(null===t||void 0===t?void 0:t.verId)===e})))},setVisible:function(t){this.$emit("setVisible",t)}},beforeDestroy:function(){this.setVisible(!1),window.removeEventListener("click",this.closeSelf,!0),clearTimeout(this.closeHandle)},watch:{visible:function(t){var e=this;t?(requestAnimationFrame((function(){e.$nextTick((function(){e.scrollToSelectFileVer()}))})),window.addEventListener("click",this.closeSelf,!0)):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},computed:{fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error},artboardDetail:function(){return this.$store.state.artboardDetail},lastVersionSelected:function(){var t=this.mainFile,e=this.curVerId;return e>0&&e===(null===t||void 0===t?void 0:t.verId)},mainFile:function(){var t;return this.fetching?null:null===(t=this.fileInfo)||void 0===t?void 0:t.file},histories:function(){var t,e;return this.fetching?this.versionCount>1?[null]:[]:null!==(t=null===(e=this.fileInfo)||void 0===e?void 0:e.historyFiles)&&void 0!==t?t:[]},itemLineHeight:function(){return 85}},data:function(){return{notClickClose:!1,closeHandle:0,inConfirm:!1}},created:function(){},props:{versionCount:{type:Number,default:0},readonlyCurrentFolder:Boolean,curVerId:Number,fetchState:Number,errorText:{validator:function(){return!0}},fileInfo:[Object,null],visible:Boolean}},zu=Wu,Yu=(n("154a"),Object(Dr["a"])(zu,_u,Mu,!1,null,"62ee3e16",null)),Xu=Yu.exports,Ku={components:{FileVersionList:Xu},methods:{setInConfirm:function(t){this.inConfirm=t,this.$emit("setInConfirm",t)},clickMenu:function(){this.setVisible(!0),this.setNotCloseThisTime(!0)},setNotCloseThisTime:function(t){this.$emit("setNotCloseThisTime",t)},onFileRemoved:function(t){this.$emit("onFileRemoved",t)},verRemoved:function(t,e){if(e>0){var n=this.fileInfo,r=this.file;if(n){var i,o=Object(c["J"])(null===(i=n.file)||void 0===i?void 0:i.viewUrl);if(o===t){var a,s,l=n.file,u=n.historyFiles;if(l.verId===e){var d;if(0===(null!==(d=null===u||void 0===u?void 0:u.length)&&void 0!==d?d:0))return void this.onFileRemoved(t);l=n.file=null===u||void 0===u?void 0:u[0]}else{var h,f=null!==(h=null===u||void 0===u?void 0:u.find((function(t){return t.verId===e})))&&void 0!==h?h:-1;if(-1===f)return;u.splice(f,1)}l.versionCount=1+(null!==(a=null===u||void 0===u?void 0:u.length)&&void 0!==a?a:0);var m=Object(c["J"])(null===r||void 0===r?void 0:r.viewUrl);m===t&&e===(null!==(s=r.lastVersionId)&&void 0!==s?s:r.verId)&&(["fileSize","verId","fileSize","fileType","previewImage","updateTimeTimes","updaterId","updaterName","versionCount"].forEach((function(t){r[t]=l[t]})),r.lastVersionId=r.verId)}}}},clickVerItem:function(t){t&&this.clickNetDiskFile(t,!0)},setVisible:function(t){this.listVisible=t},reloadHistoryList:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,u,d,h,f,m,p,v;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.fileSecId,i=t.fileUpdateTimes,o=t.fileVersionCount,a=t.fetchState,s=t.curFetchKey,u=t.fetchKey,n){e.next=3;break}return e.abrupt("return");case 3:if(a!==c["a"].Fetching||s!==u){e.next=5;break}return e.abrupt("return");case 5:if(t.fetchKey=s,t.fetchState=c["a"].Fetching,t.errorText=null,e.prev=9,m=Wn(Hn.SPACE.filedetail,n),!(m&&i>0&&(null===(d=m.file)||void 0===d?void 0:d.updateTimeTimes)===i&&o>0&&(null===(h=m.file)||void 0===h?void 0:h.versionCount)===o)){e.next=14;break}return t.fileInfo=m,e.abrupt("return");case 14:return p=new FormData,p.append("secid",n),e.next=18,t.fetchPostCloudApi("GetNetDiskFileDataByWeb",{body:p});case 18:if(v=e.sent,v.success){e.next=21;break}throw new Error(null!==(f=v.errMsg)&&void 0!==f?f:"请求发生错误");case 21:if(v=v.data,Object(l["k"])(v)){e.next=24;break}throw new Error("返回值异常:".concat(v));case 24:hn(v),t.fetchKey===t.curFetchKey&&(t.fileInfo=v,$n(Hn.SPACE.filedetail,n,v,6e4)),e.next=32;break;case 28:e.prev=28,e.t0=e["catch"](9),t.fetchKey===t.curFetchKey&&(t.errorText=e.t0,t.fetchState=c["a"].Error);case 32:return e.prev=32,t.fetchState===c["a"].Fetching&&t.fetchKey===t.curFetchKey&&(t.fetchState=c["a"].Success),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[9,28,32,35]])})))()},resetLocation:function(){var t=this,e=this.listVisible,n=this.listLocation;e&&(n.inLeft=!1,n.inBottom=!1,this.$nextTick((function(){var e=t.$refs.list,n=t.listLocation;if(e){var r=e.$el;if(r){var i=r.getBoundingClientRect(),o=window,a=o.innerWidth,s=o.innerHeight,c=a-i.width-3,l=s-i.height-3;i.x>c&&(n.inLeft=!0),i.y>l&&(n.inBottom=!0)}}})))}},computed:{resetLocationKey:function(){var t=this.fetchState,e=this.listVisible;return e?"".concat(t):null},curFetchKey:function(){var t=this.fileSecId,e=this.fileUpdateTimes;return t?"".concat(t,":").concat(e):null},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},fileUpdateTimes:function(){var t;return null!==(t=this.file.updateTimeTimes)&&void 0!==t?t:0},fileVersionCount:function(){var t;return null!==(t=this.file.versionCount)&&void 0!==t?t:0},fileSecId:function(){var t;return Object(c["J"])(null===(t=this.file)||void 0===t?void 0:t.viewUrl)},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!0}return!1},fileReadOnly:function(){return this.cloudNotSupportEdit||!this.canChangeFile},cloudNotSupportEdit:function(){return $r.notSupportNetDiskFileWebUpload(this.cloudVersion)},artboardDetail:function(){return this.$store.state.artboardDetail},curVerId:function(){return-1},refreshKey:function(){var t=this.listVisible,e=this.fileSecId;return t&&e?"".concat(e,":").concat(t):null}},watch:{refreshKey:function(t){t&&this.reloadHistoryList()},resetLocationKey:function(t){var e=this;t&&this.$nextTick((function(){e.resetLocation()}))}},beforeDestroy:function(){this.listVisible=!1},created:function(){},props:{file:Object},data:function(){return{listVisible:!1,listLocation:{inLeft:!1,inBottom:!1},fetchState:c["a"].Normal,fetchKey:"",errorText:null,fileInfo:null,inConfirm:!1}}},qu=Ku,Ju=(n("ae76"),Object(Dr["a"])(qu,Fu,ju,!1,null,"5e886e76",null)),Qu=Ju.exports,Zu={components:{ContextmenuFileVersion:Qu},methods:{setInConfirm:function(t){this.confirming=t},setNotCloseThisTime:function(t){this.notCloseThisTime=t?Date.now():0},clickEditNetDiskLink:function(){var t,e=this.linkbox,n=this.file,r=this.cloudNotSupportEdit,i=this.cloudVersion,o=this.userCanEdit,a=this.fileReadOnly;n&&(r?this.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(i,"),请先升级私有云部署包")):o?a?this.showTextTip("您没有权限编辑当前文件夹中的链接"):(e.data={id:n.id,link:null!==(t=n.webLoc)&&void 0!==t?t:"",name:n.fileName,parentId:n.parentId,secId:Object(c["J"])(n.viewUrl)},e.visible=!0):this.showTextTip("您无法编辑其他成员提交的网盘链接"))},clickRemoveItem:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,l;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.file,i=t.cloudNotSupportEdit,o=t.userCanEdit,a=t.cloudVersion,s=t.fileReadOnly,n){e.next=3;break}return e.abrupt("return");case 3:if(!i){e.next=6;break}return t.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(a,"),请先升级私有云部署包")),e.abrupt("return");case 6:if(o){e.next=9;break}return t.showTextTip("您没有权限删除其他成员提交的文件"),e.abrupt("return");case 9:if(!s){e.next=12;break}return t.showTextTip("您没有权限删除文件「".concat(n.name,"」")),e.abrupt("return");case 12:return e.next=14,t.confirm({title:"删除确认",text:"确认要删除文件「".concat(n.name,"」吗?")});case 14:if(e.sent){e.next=16;break}return e.abrupt("return");case 16:return l=Object(c["J"])(n.viewUrl),e.next=19,t.removeCloudItem({parentId:t.cloudCurrentFolderId,fileSecId:l});case 19:if(!e.sent){e.next=21;break}t.onFileRemoved(l);case 21:case"end":return e.stop()}}),e)})))()},onFileRemoved:function(t){var e=this.cloudSubFiles,n=e.findIndex((function(e){return Object(c["J"])(e.viewUrl)===t}));-1!==n&&e.splice(n,1);var r=this.file,i=this.visible;if(i){var o=Object(c["J"])(null===r||void 0===r?void 0:r.viewUrl);o===t&&(this.fileContextMenuData.visible=!1,this.notCloseThisTime=0)}},clickFileReName:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,u,d,h;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.file,i=t.cloudNotSupportEdit,o=t.userCanEdit,a=t.cloudVersion,s=t.fileReadOnly,n){e.next=3;break}return e.abrupt("return");case 3:if(!i){e.next=6;break}return t.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(a,"),请先升级私有云部署包")),e.abrupt("return");case 6:if(o){e.next=9;break}return t.showTextTip("您没有权限重命名其他成员提交的文件"),e.abrupt("return");case 9:if(!s){e.next=12;break}return t.showTextTip("您没有权限重命名当前文件夹中的文件"),e.abrupt("return");case 12:return e.prev=12,e.next=15,t.prompt({title:"重命名文件",text:n.fileName,placeholder:"请输入新的文件名",beforeYes:function(e){return!!Object(l["j"])(e.trim())&&(!/[\\/:*?"<>|]/.test(e)||(t.showTextTip("文件名含有非法字符,请修正文件名"),!1))},maxLength:256,noText:"取消",yesText:"确认"});case 15:u=e.sent.trim(),e.next=21;break;case 18:return e.prev=18,e.t0=e["catch"](12),e.abrupt("return");case 21:if(e.prev=21,Object(l["j"])(u)){e.next=24;break}throw new Error("请输入新的文件名");case 24:if(u!==n.fileName){e.next=26;break}throw"文件名无变更";case 26:return d=new FormData,d.append("secId",Object(c["J"])(n.viewUrl)),d.append("fileName",u),e.next=31,t.fetchPostCloudApi("netdiskfilerenamebyweb",{timeout:1e4,body:d});case 31:if(h=e.sent,Object(l["k"])(h)){e.next=34;break}throw new Error("返回值异常,无法解析数据:".concat(h));case 34:if(h.success){e.next=36;break}throw new Error(h.errMsg);case 36:t.showTextTip("文件「".concat(u,"」重命名成功")),h=h.data,t.$store.commit("setFolderSubFile",{files:[h.data],folderUpdateTimes:h.folderUpdateTimes}),e.next=44;break;case 41:e.prev=41,e.t1=e["catch"](21),t.showTextTip(e.t1);case 44:case"end":return e.stop()}}),e,null,[[12,18],[21,41]])})))()},checkLocaltionLater:function(t){if(this.visible&&(!this.locFixing||t)){this.setNotCloseThisTime(!0);var e=this.x,n=this.y,r=this.fileContextMenuData,i=this.boxSize,o=window.innerWidth,a=window.innerHeight,s=3,c=3,l=o-i.width-3,u=a-i.height-3;e>l?(this.locFixing=!0,r.x=l):e<s&&(this.locFixing=!0,r.x=s),n>u&&(this.locFixing=!0,r.y=u),n<c&&(this.locFixing=!0,r.y=c)}},hideContextmenu:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("mouseup"!==t.type||2!==t.button){n.next=2;break}return n.abrupt("return");case 2:return clearTimeout(e.handle),n.next=5,Object(c["yb"])(1);case 5:if(!e.confirming){n.next=7;break}return n.abrupt("return");case 7:if(!(Date.now()-e.notCloseThisTime<30)){n.next=10;break}return e.notCloseThisTime=0,n.abrupt("return");case 10:e.handle=setTimeout((function(){e.fileContextMenuData.visible=!1}),120);case 11:case"end":return n.stop()}}),n)})))()},resetBoxSize:function(){var t=this;this.visible&&this.$nextTick((function(){var e=t.$refs.menu,n=t.boxSize;if(e){var r=e.getBoundingClientRect();n.width=r.width,n.height=r.height}}))}},watch:{"boxSize.height":function(){this.checkLocaltionLater(!0)},canOnlineView:function(){this.resetBoxSize()},x:function(){clearTimeout(this.handle),this.checkLocaltionLater()},y:function(){clearTimeout(this.handle),this.checkLocaltionLater()},file:function(t){null!=t&&clearTimeout(this.handle)},visible:function(t){t?(clearTimeout(this.handle),this.setNotCloseThisTime(!0),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0),this.resetBoxSize()):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))},locFixing:function(t){var e=this;clearTimeout(this.locFixingHandle),t&&(this.locFixingHandle=setTimeout((function(){e.locFixing=!1}),50))}},beforeDestroy:function(){clearTimeout(this.handle),clearTimeout(this.locFixingHandle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)},mounted:function(){this.visible&&(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)),this.resetBoxSize(),this.checkLocaltionLater()},props:{fileContextMenuData:Object},data:function(){return{handle:0,locFixing:!1,locFixingHandle:0,boxSize:{width:0,height:0},confirming:!1,notCloseThisTime:!1}},computed:{supportFileVersionList:function(){return!$r.notSupportNetDiskFileVersion(this.cloudVersion)},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!0}return!1},netdiskUploader:function(){return this.$store.state.netdiskUploader},linkbox:function(){return this.netdiskUploader.linkbox},isUrlFile:function(){return this.file.fileType===a["L"].Url},canOnlineView:function(){return this.isNetdiskFileCanOnlineView(this.file)},visible:function(){return this.fileContextMenuData.visible&&this.file},file:function(){return this.fileContextMenuData.file},x:function(){return this.fileContextMenuData.x},y:function(){return this.fileContextMenuData.y},fileReadOnly:function(){return!this.userCanEdit||this.cloudNotSupportEdit||!this.canChangeFile},userCanEdit:function(){return this.cloudUserIsDesigner||this.file.updaterId===this.cloudUserId},cloudNotSupportEdit:function(){return $r.notSupportNetDiskFileWebUpload(this.cloudVersion)},menuStyle:function(){return{top:this.y+"px",left:this.x+"px"}}}},td=Zu,ed=(n("2317"),Object(Dr["a"])(td,Iu,Au,!1,null,"49985046",null)),nd=ed.exports,rd=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"menu",staticClass:"folderitem-contextmenu",style:t.menuStyle,on:{contextmenu:function(t){t.preventDefault()}}},[e("div",{class:{off:!t.supportRecents},domProps:{textContent:t._s(t.isFavoriteFolder?"取消收藏":"收藏")},on:{click:function(e){return t.clickFolderFavorite(t.folder)}}}),e("div",{on:{click:function(e){return t.clickGoFolder(t.folder)}}},[t._v("打开文件夹")]),e("div",{on:{click:function(e){return t.copyViewUrl(t.folder)}}},[t._v("复制链接")])]):t._e()},id=[],od={methods:{clickFolderFavorite:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(!t.fetching){n.next=4;break}return n.abrupt("return");case 4:if(e.supportRecents){n.next=6;break}return n.abrupt("return",e.showTextTip("私有云部署包版本「".concat(e.cloudVersion,"」过低,请先升级私有云部署包")));case 6:return t.fetching=!0,t.loadingText=t.customStatus===a["q"].Favorite?"取消收藏中...":"收藏文件夹中...",n.prev=9,n.next=12,e.setUserFavoriteFolder(t,t.customStatus===a["q"].Favorite?a["q"].None:a["q"].Favorite);case 12:i=n.sent,i&&(t.customStatus=i.status,t.customStatusUpdateTimes=i.updateTimes,e.$store.commit("refreshRecents",a["Y"].FavoriteFolder)),n.next=19;break;case 16:n.prev=16,n.t0=n["catch"](9),-1===(null===n.t0||void 0===n.t0?void 0:n.t0.toString().indexOf(" aborted "))&&e.showTextTip(n.t0);case 19:return n.prev=19,t.fetching=!1,n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[9,16,19,22]])})))()},checkLocaltionLater:function(t){if(this.visible&&(!this.locFixing||t)){var e=this.x,n=this.y,r=this.folderContextMenuData,i=this.boxSize,o=window.innerWidth,a=window.innerHeight,s=3,c=3,l=o-i.width-3,u=a-i.height-3;e>l?(this.locFixing=!0,r.x=l):e<s&&(this.locFixing=!0,r.x=s),n>u&&(this.locFixing=!0,r.y=u),n<c&&(this.locFixing=!0,r.y=c)}},clickGoFolder:function(t){Object(c["W"])(t.id)},copyViewUrl:function(t){var e=Object(c["E"])(t.id,!0);Object(c["q"])(e)?this.showTextTip("链接已复制到剪切板"):this.showTextTip("链接复制到剪切板失败")},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.folderContextMenuData.visible=!1}),120))},resetBoxSize:function(){var t=this;this.visible&&this.$nextTick((function(){var e=t.$refs.menu,n=t.boxSize;if(e){var r=e.getBoundingClientRect();n.width=r.width,n.height=r.height}}))}},watch:{"boxSize.height":function(){this.checkLocaltionLater(!0)},x:function(){clearTimeout(this.handle),this.checkLocaltionLater()},y:function(){clearTimeout(this.handle),this.checkLocaltionLater()},folder:function(t){null!=t&&clearTimeout(this.handle)},visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0),this.resetBoxSize()):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))},locFixing:function(t){var e=this;clearTimeout(this.locFixingHandle),t&&(this.locFixingHandle=setTimeout((function(){e.locFixing=!1}),50))}},beforeDestroy:function(){clearTimeout(this.handle),clearTimeout(this.locFixingHandle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)},mounted:function(){this.visible&&(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)),this.resetBoxSize(),this.checkLocaltionLater()},props:{folderContextMenuData:Object},data:function(){return{handle:0,locFixing:!1,locFixingHandle:0,boxSize:{width:0,height:0}}},computed:{supportRecents:function(){return!$r.notSupportRecentData(this.cloudVersion)},isFavoriteFolder:function(){return this.folder.customStatus===a["q"].Favorite},visible:function(){return this.folderContextMenuData.visible&&this.folder},folder:function(){return this.folderContextMenuData.folder},x:function(){return this.folderContextMenuData.x},y:function(){return this.folderContextMenuData.y},menuStyle:function(){return{top:this.y+"px",left:this.x+"px"}}}},ad=od,sd=(n("81ab"),Object(Dr["a"])(ad,rd,id,!1,null,"918d6a66",null)),cd=sd.exports,ld=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item max",class:t.itemClass,attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},click:function(e){return t.clickGoFolder(t.folder)}}},[t.hasMultPreview?e("div",{staticClass:"imgs"},t._l(t.folder.pathPreviews,(function(t,n){return e("FolderItemIcon",{key:n,attrs:{pathPreview:t,mini:!0}})})),1):t.hasPreview?e("div",{staticClass:"img"},[e("FolderItemIcon",{attrs:{pathPreview:t.folder.pathPreviews[0],mini:!1}})],1):t._e(),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("div",{staticClass:"name-info"},[t.isFavoriteFolder?e("div",{staticClass:"fav",attrs:{title:"已收藏"}}):t._e(),e("div",{staticClass:"t",domProps:{textContent:t._s(t.folder.name)}})]),t.isFolderSharePrivateCode?e("div",{staticClass:"lock-max"}):t._e(),t.isFolderShareSpecifyMembers?e("div",{staticClass:"share-sm-max"}):t._e()]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},ud=[],dd=function(){var t=this,e=t._self._c;return t.isNetDiskIcon?e("div",{staticClass:"preview folder-fileicon",class:{max:!t.mini}},[e("div",{staticClass:"img icon-netdiskfile",class:t.iconCls})]):e("ArtboardPreviewImg",{attrs:{pathPreview:t.pathPreview,imgHeight:0}})},hd=[],fd={components:{ArtboardPreviewImg:Kc},computed:{iconCls:function(){return a["L"].getName(this.netdiskFileType,this.mini?a["M"].Normal:a["M"].Big)},netdiskFileType:function(){var t=this.pathPreview;if(!Object(l["j"])(t))return null;var e=/^netdisk:\/\/(\d+)\//.exec(t);return e?+e[1]:null},isNetDiskIcon:function(){return"number"===typeof this.netdiskFileType}},props:{pathPreview:String,mini:Boolean}},md=fd,pd=(n("5c3c"),Object(Dr["a"])(md,dd,hd,!1,null,"4628005e",null)),vd=pd.exports,bd={components:{FolderItemIcon:vd},methods:{onContextmenu:function(t){this.$emit("contextMenuFolder",t,this.folder)},clickGoFolder:function(t){Object(c["W"])(t.id)}},computed:{isFavoriteFolder:function(){return this.folder.customStatus===a["q"].Favorite},useTimeSort:function(){return this.$store.state.cloudListSort.sortType===a["n"].Date},info:function(){var t=this.folder.updateTimes,e=this.folder,n=this.useTimeSort,r=this.webViewStateTimes;return n?Object(l["b"])(t,r):"共".concat(Ze(e),"项")},isFolderSharePrivateCode:function(){return this.folder.shareMode===a["v"].PrivateCode},isFolderShareSpecifyMembers:function(){return this.folder.shareMode===a["v"].SpecifyMembers},itemClass:function(){var t=this.folder,e=this.isFolderSharePrivateCode,n=this.isFolderShareSpecifyMembers,r={};if(e?r.private=1:n&&(r["share-sm"]=1),null!=t.color){var i=a["t"].getName(t.color);i&&(r[i]=1)}return r},title:function(){return Qe(this.folder)},hasPreview:function(){var t=this.folder;return Object(l["i"])(t.pathPreviews)&&t.pathPreviews.length>0},hasMultPreview:function(){var t=this.folder;return this.hasPreview&&0===t.previewArtboardId&&t.pathPreviews.length>1}},props:{folder:Object,isSupportNetDiskFile:Boolean}},gd=bd,wd=(n("7226"),Object(Dr["a"])(gd,ld,ud,!1,null,"517f9f82",null)),xd=wd.exports,yd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item max",class:{"non-mask":t.isLottieFile},attrs:{title:t.itemTitle},on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},mouseenter:function(e){t.mouseenter=!0},mouseleave:t.onMouseOutImg}},[e("div",{ref:"img",staticClass:"img",class:{mini:t.isMiniImage,lottie:t.isLottieFile,mouseenter:t.mouseenter,lottieloading:t.lottieLoading},on:{click:function(e){return t.clickNetDiskFile(t.file)}}},[0===t.imgSize.width&&0===t.imgSize.height?e("div",{staticClass:"icon-netdiskfile",class:t.iconCls}):t._e(),t.imgVisible?e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.file.previewImage},on:{resize:t.onPreviewImgResize}}):t._e(),t.isLottieFile?e("div",{ref:"lottiebox",staticClass:"lottie-box"}):t._e()],1),t.imgVisible&&t.thumbImgVisible?e("div",{directives:[{name:"show",rawName:"v-show",value:t.mouseenter,expression:"mouseenter"}],staticClass:"thumbimg",style:t.thumbImgStyle,on:{mouseenter:function(e){t.mouseInThumb=!0},mouseleave:function(e){t.mouseInThumb=!1},mousemove:t.onMouseMoveImg}},[e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.file.previewImage}})],1):t._e(),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("span",{staticClass:"pre"},[e("span",[t._v(t._s(t.file.fileName))])]),e("span",{staticClass:"ext"},[t._v(t._s(t.fileExt))])]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},kd=[],Cd={components:{ArtboardPreviewImg:Kc},methods:{onPreviewImgResize:function(t,e){var n=this.imgSize;n.width=t,n.height=e},onMouseOutImg:function(){this.imgScrollTop=0,this.mouseenter=!1},onMouseMoveImg:function(t){var e=this.file;if(e&&this.viewHeight>0&&this.viewHeight<this.viewRealHeight){var n=t.layerY,r=n/this.thumbViewHeight,i=.2,o=.2;r=r<=i?0:r>=1-o?1:(r-i)/(1-o-i);var a=this.viewRealHeight-this.viewHeight,s=Math.round(r*a);this.imgScrollTop=s}},onContextmenu:function(t){this.$emit("contextMenuFile",t,this.file)},initLottie:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLottieFile){e.next=2;break}return e.abrupt("return");case 2:if(!t.lottieLoading&&!t.lottie){e.next=4;break}return e.abrupt("return");case 4:return t.lottieLoadState=c["a"].Fetching,e.prev=5,e.next=8,Pc.get(t.$refs.lottiebox,t.file);case 8:n=e.sent,i=n.lottie,t.lottie=i,t.lottieLoadState=c["a"].Success,e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](5),t.lottieLoadState=c["a"].Error;case 17:case"end":return e.stop()}}),e,null,[[5,14]])})))()}},watch:{"file.updateTimeTimes":function(t){if(t){Pc.remove(this.file);var e=this.lottie;e&&(e.destroy(),this.lottie=null),this.lottieLoadState=c["a"].Normal,this.mouseenter&&this.initLottie()}},mouseenter:function(t){var e=this.lottie;t?e?e.play():this.initLottie():null===e||void 0===e||e.stop()},imgScrollTop:function(t){var e=this.$refs.img;e&&e.scrollTo({top:t,behavior:0===t?"smooth":"instant"})}},computed:{info:function(){return nn(this.file,this.webViewStateTimes)},lottieLoading:function(){return this.lottieLoadState===c["a"].Fetching},lottieLoadSuccess:function(){return this.lottieLoadState===c["a"].Success},isLottieFile:function(){var t=this.file,e=t.fileType;return e===a["L"].Lottie},imgVisible:function(){var t=this.fileRect,e=this.viewRect;return!!window||!(!t||!e)&&t.isOverlap(e)},fileExt:function(){var t,e,n=this.file;if(!n)return null;var r=null!==(t=null===(e=n.fileExt)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"";return"."===r[0]&&(r=r.substr(1)),r},iconCls:function(){var t=this.file;return t?a["L"].getName(t.fileType,a["M"].Big):null},isMiniPreviewFile:function(){var t=this.file,e=t.fileType;switch(e){case a["L"].XD:case a["L"].Sketch:case a["L"].Figma:case a["L"].PhotoShop:return!0}return!1},isMiniImage:function(){var t=this.imgSize,e=this.boxWidth,n=this.boxHeight,r=this.isLottieFile,i=this.isMiniPreviewFile;if(r)return!0;if(i)return!0;if(0===t.width)return!0;if(t.width<=e)return!0;if(t.height<=n)return!0;var o=e/t.width*t.height;return o<=n},viewWidth:function(){var t=this.imgSize.width,e=this.boxWidth;return this.isMiniImage?Math.min(e,t):e},viewHeight:function(){if(this.isMiniImage)return this.imgSize.height;var t=1,e=this.viewWidth,n=this.viewRealHeight,r=Math.round(e/t);return Math.min(r,n)},viewRealHeight:function(){var t=this.viewWidth,e=this.imgSize;return 0==e.width||0==e.height?0:Math.round(t/e.width*e.height)},thumbViewHeight:function(){var t=this.viewRealHeight;if(0==t)return 0;var e=375/812,n=this.viewWidth/t;n=Math.max(e,n);var r=this.thumbViewWidth,i=Math.round(r/n);return i},thumbImgStyle:function(){return{width:this.thumbViewWidth+"px",height:this.thumbViewHeight+"px"}},thumbImgVisible:function(){if(!this.imgVisible)return!1;if(this.isMiniImage)return!1;var t=this.file;if(!t)return!1;var e=this.viewHeight,n=this.boxHeight;return e>0&&e<this.imgSize.height&&n<this.viewRealHeight},itemTitle:function(){return tn(this.file)}},beforeDestroy:function(){this.isLottieFile&&(Pc.unbind(this.file),this.lottie=null)},data:function(){return{mouseenter:!1,imgScrollTop:0,mouseInThumb:!1,imgSize:{width:0,height:0},thumbViewWidth:36,boxWidth:185,boxHeight:185,lottie:null,lottieLoadState:c["a"].Normal}},props:{file:Object}},Sd=Cd,Td=(n("a803"),Object(Dr["a"])(Sd,yd,kd,!1,null,"467016a3",null)),Od=Td.exports,Id=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item",class:t.itemClass,attrs:{title:t.itemTitle},on:{click:t.clickSelect,contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},mouseenter:function(e){t.mouseenter=!0},mouseleave:t.onMouseOutImg}},[t.fetching?e("div",{staticClass:"loading"},[t._v(t._s(t.loadingText))]):t._e(),t.artboard.flowStart?e("div",{staticClass:"interaction-home",attrs:{title:t.interactionHomeTitle}}):t._e(),e("div",{ref:"img",staticClass:"img",style:{height:t.artboard.boundsInParent.viewHeight+"px"}},[t.imageSrc?e("ArtboardPreviewImg",{attrs:{imgHeight:t.imgRealHeight,pathPreview:t.imageSrc}}):t._e()],1),t.tipVisible?e("div",{staticClass:"count-tip"},[t.commentReplyCount>0?e("div",{staticClass:"comment-count",attrs:{title:t.commentReplyTitle}}):t._e()]):t._e(),t.thumbImgVisible?e("div",{directives:[{name:"show",rawName:"v-show",value:t.mouseenter,expression:"mouseenter"}],staticClass:"thumbimg",style:t.thumbImgStyle,on:{mouseenter:function(e){t.mouseInThumb=!0},mouseleave:function(e){t.mouseInThumb=!1},mousemove:t.onMouseMoveImg}},[t.imageSrc?e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.imageSrc}}):t._e()],1):t._e(),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("span",{staticClass:"t",domProps:{textContent:t._s(t.artboard.name)}}),t.artboardInDevStatus?e("span",{staticClass:"dev",attrs:{title:"待开发"}}):t._e()]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},Ad=[],Fd={components:{ArtboardPreviewImg:Kc},methods:{onMouseOutImg:function(){this.imgScrollTop=0,this.mouseenter=!1},onMouseMoveImg:function(t){if(this.viewModeMax){var e=this.artboard;if(e){var n=e.boundsInParent;if(n.viewHeight>0&&n.viewHeight<n.viewRealHeight){var r=t.layerY,i=r/n.thumbViewHeight,o=.2,a=.2;i=i<=o?0:i>=1-a?1:(i-o)/(1-a-o);var s=n.viewRealHeight-n.viewHeight,c=Math.round(i*s);this.imgScrollTop=c}}}},onContextmenu:function(t){var e=this,n=t.pageX,r=t.pageY,i=this.item;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:r,artboard:i})}))},clickSelect:function(){this.inArtboardMultDownMode?this.item.mlUserSelectDown=!this.item.mlUserSelectDown:(this.hideTextTip(),this.setCurArtboard(this.item))},checkImage:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.pathPreviewMini,i=t.pathPreview,o=t.artboard,!n){e.next=4;break}return t.imageSrc=n,e.abrupt("return");case 4:if(e.prev=4,s=o.pathPreviewBlob,s){e.next=15;break}return e.next=9,lo(i);case 9:if(s=e.sent,"string"!==typeof s){e.next=14;break}return o.pathPreviewMini=s,t.imageSrc=s,e.abrupt("return");case 14:o.pathPreviewBlob=s;case 15:a=URL.createObjectURL(s),t.imageSrc=a,e.next=25;break;case 19:return e.prev=19,e.t0=e["catch"](4),o.pathPreviewMini=i,t.imageSrc=i,e.abrupt("return");case 25:return e.prev=25,a&&t.$nextTick((function(){setTimeout((function(){try{URL.revokeObjectURL(a)}catch(t){}}),600)})),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,19,25,28]])})))()}},watch:{pathPreviewWebp:function(t){var e=this;t&&!this.pathPreviewMini&&this.$nextTick((function(){e.checkImage()}))},pathPreview:function(t){var e=this;t&&!this.pathPreviewMini&&this.$nextTick((function(){e.checkImage()}))},pathPreviewMini:function(){var t=this;this.$nextTick((function(){t.checkImage()}))},imgScrollTop:function(t){var e=this.$refs.img;e&&e.scrollTo({top:t,behavior:0===t?"smooth":"instant"})}},computed:{artboardInDevStatus:function(){var t=this.item,e=this.inCloudViewerMode;return e&&t.customStatus===a["i"].Dev},light:function(){var t=this.lightArtboardId,e=this.artboard;return t>0&&(null===e||void 0===e?void 0:e.cid)===t},selected:function(){return this.inArtboardMultDownMode&&this.item.mlUserSelectDown},tipVisible:function(){return this.commentReplyCount>0},interactionHomeTitle:function(){return Vt(this.artboard)},commentReplyCount:function(){var t,e,n=this.artboard;return n&&null!==(t=null!==(e=n.comments)&&void 0!==e?e:0+n.replies)&&void 0!==t?t:0},itemTitle:function(){return this.mouseInThumb?null:en(this.artboard)},commentReplyTitle:function(){var t=this.commentReplyCount;return 0==t?null:"".concat(t," 条评论")},thumbImgVisible:function(){if(!this.viewModeMax)return!1;var t=this.artboard;if(!t)return!1;var e=t.boundsInParent;return e.viewHeight>0&&e.viewHeight<e.viewRealHeight},thumbImgStyle:function(){var t=this.artboard;if(t){var e=t.boundsInParent;return{width:e.thumbViewWidth+"px",height:e.thumbViewHeight+"px"}}},itemClass:function(){var t={},e=this.viewModeMax,n=this.selected,r=this.light;return t[e?"max":"min"]=1,n&&(t.selected=1),r&&(t.light=1),t},isSupportWebp:function(){return this.$store.state.isSupportWebp===In.Support},pathPreview:function(){var t=this.artboard,e=this.isSupportWebp,n=this.pathPreviewMini;return t?n||(e?t.pathPreviewWebp:null)||t.pathPreview:null},pathPreviewMini:function(){return this.artboard?this.artboard.pathPreviewMini:null},imgRealHeight:function(){if(!this.viewModeMax)return 0;var t=this.artboard;if(!t)return 0;var e=t.boundsInParent;return e.viewHeight>0&&e.viewHeight<e.viewRealHeight?e.viewRealHeight:0},imgStyle:function(){var t=this.artboard;if(t){var e=t.boundsInParent;return"width:".concat(e.viewWidth,"px;height:").concat(e.viewHeight,"px;")}},info:function(){return nn(this.artboard,this.webViewStateTimes)},artboard:function(){return this.item.artboard}},data:function(){return{loadingText:"",fetching:!1,imgScrollTop:0,mouseenter:!1,mouseInThumb:!1,viewModeMax:!0,imageSrc:null}},mounted:function(){this.checkImage()},props:{item:Object,multipleMode:Boolean,lightArtboardId:Number}},jd=Fd,_d=(n("2ebc"),Object(Dr["a"])(jd,Id,Ad,!1,null,"516404a9",null)),Md=_d.exports,Ld=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-list-sort-menu"},[e("div",{staticClass:"sort-order",class:{desc:!t.orderDesc},attrs:{title:t.orderDesc?"切换为升序":"切换为降序"},on:{click:function(e){return t.clickOrderDesc(!t.orderDesc)}}}),e("div",{staticClass:"sort-mode"},[t.mini?t._e():e("span",{staticClass:"name",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickOrderDesc(!t.orderDesc)}}},[t._v("按"+t._s(t.sortType===t.EnumCloudListSortType.Name?"名称":t.sortType===t.EnumCloudListSortType.Date?"时间":"坐标")+"排序")]),e("div",{staticClass:"options"},[e("div",{class:{on:t.sortType===t.EnumCloudListSortType.Name||!t.supportRectSort&&t.sortType===t.EnumCloudListSortType.ArtboardRect},on:{click:function(e){return t.clickSortType(t.EnumCloudListSortType.Name)}}},[t._v("名称排序")]),e("div",{class:{on:t.sortType===t.EnumCloudListSortType.Date},on:{click:function(e){return t.clickSortType(t.EnumCloudListSortType.Date)}}},[t._v("时间排序")]),t.supportRectSort?e("div",{class:{on:t.sortType===t.EnumCloudListSortType.ArtboardRect},attrs:{title:"1.画板列表按画板在文档中的坐标从上到下,从左到右排序\n2.文件夹和文件按名称排序"},on:{click:function(e){return t.clickSortType(t.EnumCloudListSortType.ArtboardRect)}}},[t._v("坐标排序")]):t._e(),e("p",{staticClass:"line"}),e("div",{class:{on:!t.orderDesc},on:{click:function(e){return t.clickOrderDesc(!1)}}},[t._v("升序")]),e("div",{class:{on:t.orderDesc},on:{click:function(e){return t.clickOrderDesc(!0)}}},[t._v("降序")])])])])},Dd=[],Pd={methods:{clickSortType:function(t){this.$store.commit("setCloudListSortConfig",{sortType:t})},clickOrderDesc:function(t){this.$store.commit("setCloudListSortConfig",{orderDesc:t})}},computed:{EnumCloudListSortType:function(){return a["n"]},cloudListSort:function(){return this.$store.state.cloudListSort},sortType:function(){return this.cloudListSort.sortType},orderDesc:function(){return this.cloudListSort.orderDesc}},data:function(){return{optionsVisible:!1}},props:{mini:{type:Boolean,default:!1},supportRectSort:{type:Boolean,default:!0}}},Nd=Pd,Ed=(n("0393"),Object(Dr["a"])(Nd,Ld,Dd,!1,null,"4d98de7b",null)),Rd=Ed.exports,Vd=200,Bd={folderMax:{margin:{top:20,right:20,bottom:20,left:2},width:192,height:198},fileMax:{margin:{top:20,right:23,bottom:20,left:6},width:185,height:233},artboardMax:{margin:{top:20,right:23,bottom:20,left:6},width:185,height:0,textHeight:48}},Hd={components:{FoldNavFolderItem:xd,FoldNavFileItem:Od,FoldNavArtboardItem:Md,FileItemContextMenu:nd,MultArtboardDownload:Ou,FolderNavSortMenu:Rd,FolderItemContextMenu:cd},methods:{onListScroll:function(t){this.scrollY=t.target.scrollTop},getRenderLazyList:function(t,e,n,r,i){var o={items:[],rects:[],startIndex:-1,paddingTop:"0px"};if(!r||!t)return o;if(e.length!==n.length)return o;for(var a=-1,s=0,c=n.length;s<c;s++){var l=e[s],u=t.isOverlap(l);if(-1===o.startIndex&&u)o.startIndex=s;else if(i&&-1!==o.startIndex&&!u)break;u&&(a=s)}var d=e[o.startIndex];if(d&&o.startIndex>0)for(var h=o.startIndex-1;h>=0;h--){var f=e[h];if(d.y!=f.y)break;o.startIndex=h}var m=Bd.folderMax;if(-1!=o.startIndex){o.items=n.slice(o.startIndex,a+1),o.rects=e.slice(o.startIndex,a+1);var p=o.rects[0];o.paddingTop=p.y-m.margin.top+"px"}return o},onResize:function(){this.resetArtboardsBoundingClientRect("onResize")},resetArtboardsBoundingClientRectDelay:function(t){var e=this;cancelAnimationFrame(this.handle_resetArtboardsBoundingClientRect),this.handle_resetArtboardsBoundingClientRect=requestAnimationFrame((function(){e.resetArtboardsBoundingClientRect(t+".delay")}))},resetArtboardsBoundingClientRect:function(t){var e=this;cancelAnimationFrame(this.handle_resetArtboardsBoundingClientRect);var n=this.viewRect;n.width=window.innerWidth,n.height=window.innerHeight,this.$nextTick((function(){var t=e.$refs.$list,n=e.$refs.$files,r=e.$refs.$artboards,i=e.$refs.$folders;if(t){var o=t.getBoundingClientRect(),a=e.listBoundingClientRect;a.x=o.x,a.y=o.y,a.width=o.width,a.height=o.height;var s=a.y;if(i){var c=i.getBoundingClientRect();if(0!==c.height||0!==c.width){var l=e.foldersBoundingClientRect;l.x=c.x,l.y=c.y,l.width=c.width,l.height=c.height,l.marginTop=c.y-s}}if(n){var u=n.getBoundingClientRect();if(0!==u.height||0!==u.width){var d=e.filesBoundingClientRect;d.x=u.x,d.y=u.y,d.width=u.width,d.height=u.height,d.marginTop=u.y-s}}if(r){var h=r.getBoundingClientRect();if(0!==h.height||0!==h.width){var f=e.artboardsBoundingClientRect;f.x=h.x,f.y=h.y,f.width=h.width,f.height=h.height,f.marginTop=h.y-s}}}}))},clickClearSearchText:function(){this.searchText=""},contextMenuFolder:function(t,e){var n=t.pageX,r=t.pageY,i=this.folderContextMenuData;requestAnimationFrame((function(){i.x=n,i.y=r,i.folder=e,i.visible=!0}))},contextMenuFile:function(t,e){var n=t.pageX,r=t.pageY,i=this.fileContextMenuData;requestAnimationFrame((function(){i.x=n,i.y=r,i.file=e,i.visible=!0}))},clickSubFoldersOpen:function(){this.$emit("clickSubFoldersOpen")},clickSubFilesOpen:function(){this.$emit("clickSubFilesOpen")},clickSubArtboardsOpen:function(){this.$emit("clickSubArtboardsOpen")},getArtboardViewRect:function(t){if(!t)return null;var e=this.renderArtboardRects,n=this.renderArtboardsWithCurrentPage;return e[n.findIndex((function(e){var n;return(null===e||void 0===e||null===(n=e.artboard)||void 0===n?void 0:n.cid)===t}))]},cleanLightArtboardId:function(){this.lightArtboardId=0},setArtboardToCenterAndLight:function(t){var e=this,n=t.docGuid,r=t.pageGuid,i=t.name,o=t.topSectionId,a=this.filterDocumentGuid;a&&n!==a&&r!==a&&o!==a&&this.$store.commit("setFilterDocumentGuid",null),this.subArtboardsOpen||this.clickSubArtboardsOpen(),this.$nextTick((function(){var n=e.getArtboardViewRect(t.cid);if(!n)return e.showTextTip("无法定位到画板「".concat(i,"」"));var r=n.y,o=n.height,a=e.scrollY,s=e.artboardsBoundingClientRect,c=s.marginTop+a,l=e.listBoundingClientRect.height,u=r+c+o/2-l/2;e.lightArtboardId=t.cid;var d=e.$refs.$list;d&&(d.scrollTop=u),e.showTextTip("已定位到画板「".concat(i,"」"))}))}},watch:{lightArtboardId:function(t){var e=this;t>0?requestAnimationFrame((function(){window.addEventListener("mousedown",e.cleanLightArtboardId,!0)})):window.removeEventListener("mousedown",this.cleanLightArtboardId,!0)},resetCenterArtboard:function(t){this.artShowInListMode&&t&&(this.setArtboardToCenterAndLight(t),this.$store.commit("resetCenterArtboard",null))},renderArtboardViewRect:function(){var t=this.artboardsBoundingClientRect.height;0==t&&this.resetArtboardsBoundingClientRectDelay("renderArtboardViewRect")},renderFolderHeight:function(){this.resetArtboardsBoundingClientRectDelay("renderFolderHeight")},renderArtboardHeight:function(){this.resetArtboardsBoundingClientRectDelay("renderArtboardHeight")},subFoldersOpen:function(){this.resetArtboardsBoundingClientRect("subFoldersOpen")},subFilesOpen:function(){this.resetArtboardsBoundingClientRect("subFilesOpen")},subArtboardsOpen:function(){this.resetArtboardsBoundingClientRect("subArtboardsOpen")},allFoldersBoxVisible:function(){this.resetArtboardsBoundingClientRect("allFoldersBoxVisible")},"renderCloudSubFolders.length":function(){this.resetArtboardsBoundingClientRectDelay("renderCloudSubFolders.length")},"renderCloudSubFiles.length":function(){this.resetArtboardsBoundingClientRectDelay("'renderCloudSubFiles.length")},"renderCloudSubArtboards.length":function(){this.resetArtboardsBoundingClientRectDelay("'renderCloudSubArtboards.length")},renderFolderViewRect:function(){var t=this.foldersBoundingClientRect.height;0==t&&this.resetArtboardsBoundingClientRectDelay("renderFolderViewRect")},renderFileViewRect:function(){var t=this.filesBoundingClientRect.height;0==t&&this.resetArtboardsBoundingClientRectDelay("renderFileViewRect")},scrollY:function(){var t=this;this.resetArtboardsBoundingClientRectDelay("scrollY"),clearTimeout(this.scrollingHandle),this.scrolling=!0,this.scrollingHandle=setTimeout((function(){t.scrolling=!1}),100)}},computed:{inRootAndNotSearchFound:function(){var t=this.inCloudMode&&0==this.cloudCurrentFolderId;return t&&this.hasSearchText&&!this.hasSubFolders},folderListVisible:function(){var t=this.subFoldersOpen,e=this.needShowFile;return t||!e},resetCenterArtboard:function(){return this.$store.state.scale.resetCenterArtboard},renderArtboardsWithCurrentPage:function(){var t=this.renderCloudSubArtboards,e=this.filterDocumentGuid;if(!Object(l["j"])(e))return t;var n=dn(e);return t.filter((function(t){var e=t.artboard;return un(e,n.filterDocumentGuid,n.onlyNoSectionArtboard)}))},renderArtboardHeight:function(){var t=this.renderArtboardRects,e=t.length;if(0==e)return 0;for(var n=t[e-1],r=n.y,i=n.bottom,o=e-2;o>=0;o--){var a=t[o];if(a.y!==r)break;i=Math.max(i,a.bottom)}var s=Bd.artboardMax;return i+s.margin.bottom},renderFileHeight:function(){var t=this.renderFileRects,e=t.length;if(0==e)return 0;for(var n=t[e-1],r=n.y,i=n.bottom,o=e-2;o>=0;o--){var a=t[o];if(a.y!==r)break;i=Math.max(i,a.bottom)}var s=Bd.fileMax;return i+s.margin.bottom},renderFolderHeight:function(){var t=this.renderFolderRects,e=t.length;if(0==e)return 0;for(var n=t[e-1],r=n.y,i=n.bottom,o=e-2;o>=0;o--){var a=t[o];if(a.y!==r)break;i=Math.max(i,a.bottom)}var s=Bd.folderMax;return i+s.margin.bottom},renderFolderViewRect:function(){var t=this.viewRect,e=this.foldersBoundingClientRect,n=Object(d["d"])(t,e);return n&&(n.x=0,e.y>0?n.y-=e.y:n.y-=e.marginTop),n},renderFileViewRect:function(){var t=this.viewRect,e=this.filesBoundingClientRect,n=Object(d["d"])(t,e);return n&&(n.x=0,e.y>0?n.y-=e.y:n.y-=e.marginTop),n},renderArtboardViewRect:function(){var t=this.viewRect,e=this.artboardsBoundingClientRect,n=Object(d["d"])(t,e);return n&&(n.x=0,e.y>0?n.y-=e.y:n.y-=e.marginTop),n},renderFolderLazyList:function(){var t=this.renderFolderViewRect,e=this.renderFolderRects,n=this.renderCloudSubFolders,r=this.folderListVisible;return this.getRenderLazyList(t,e,n,r,!0)},renderFileLazyList:function(){var t=this.renderFileViewRect,e=this.renderFileRects,n=this.renderCloudSubFiles,r=this.subFilesOpen;return this.getRenderLazyList(t,e,n,r,!0)},renderArtboardLazyList:function(){var t=this.renderArtboardViewRect,e=this.renderArtboardRects,n=this.renderArtboardsWithCurrentPage,r=this.subArtboardsOpen;return this.getRenderLazyList(t,e,n,r,!1)},renderFolderRects:function(){var t=this.renderCloudSubFolders,e=this.foldersBoundingClientRect;if(0===e.width)return[];var n={x:0,y:0,width:e.width,height:e.height},r=[],i=Bd.folderMax,o=i.margin.left,a=o,s=i.margin.top,c=Math.floor(n.width/Vd);return t.forEach((function(t,e){var n=new d["a"];n.set(a,s,i.width,i.height),r.push((new d["a"]).set(n.x,n.y,n.width,n.height)),n.x=n.right+i.margin.left+i.margin.right,1===c||e>0&&(e+1)%c===0?(s+=i.height,s+=i.margin.top+i.margin.bottom,a=o):a=n.x})),r},renderFileRects:function(){var t=this.renderCloudSubFiles,e=this.filesBoundingClientRect;if(0===e.width)return[];var n={x:0,y:0,width:e.width,height:e.height},r=[],i=Bd.fileMax,o=i.margin.left,a=o,s=i.margin.top,c=Math.floor(n.width/Vd);return t.forEach((function(t,e){var n=new d["a"];n.set(a,s,i.width,i.height),r.push((new d["a"]).set(n.x,n.y,n.width,n.height)),n.x=n.right+i.margin.left+i.margin.right,1===c||e>0&&(e+1)%c===0?(s+=i.height,s+=i.margin.top+i.margin.bottom,a=o):a=n.x})),r},renderArtboardRects:function(){var t=this.renderArtboardsWithCurrentPage,e=this.artboardsBoundingClientRect;if(0===e.width)return[];var n={x:0,y:0,width:e.width,height:e.height},r=[],i=Bd.artboardMax,o=i.margin.left,a=o,s=i.margin.top,c=Math.floor(n.width/Vd),l=0;return t.forEach((function(t,e){var n=new d["a"];if(0===i.height){var u=t.artboard.boundsInParent.viewHeight;void 0===u&&(Object(d["h"])(t.artboard),u=t.artboard.boundsInParent.viewHeight);var h=i.textHeight+u;isNaN(h)&&(h=i.textHeight),n.set(a,s,i.width,h),l=Math.max(l,n.height)}else n.set(a,s,i.width,i.height);r.push((new d["a"]).set(n.x,n.y,n.width,n.height)),n.x=n.right+i.margin.left+i.margin.right,1===c||e>0&&(e+1)%c===0?(0===i.height?(s+=l,l=0):s+=i.height,s+=i.margin.top+i.margin.bottom,a=o):a=n.x})),r},hasSearchText:function(){return Object(l["j"])(this.searchText)},needShowFile:function(){return this.inCloudMode&&this.cloudCurrentFolderId>0},renderCloudSubFolders:function(){var t=this.cloudSubFolders,e=this.hasSearchText,n=this.searchText;return t&&0!==t.length?e?(n=n.toLowerCase(),t.filter((function(t){var e,r,i=null!==(e=null===(r=t.name)||void 0===r?void 0:r.toLowerCase())&&void 0!==e?e:"";return-1!==i.indexOf(n)}))):t:[]},renderCloudSubFiles:function(){var t=this.cloudSubFiles,e=this.hasSearchText,n=this.searchText;return t&&0!==t.length?e?(n=n.toLowerCase(),t.filter((function(t){var e,r,i=null!==(e=null===(r=t.name)||void 0===r?void 0:r.toLowerCase())&&void 0!==e?e:"";return-1!==i.indexOf(n)}))):t:[]},cloudListSort:function(){return this.$store.state.cloudListSort},sortRenderDocumentArtboards:function(){var t=this.renderDocumentArtboards,e=this.cloudListSort;return t=Object(u["a"])(t),Be(t,"updateTimeTimes",a["m"].Artboard,e),t},renderCloudSubArtboards:function(){var t=this.sortRenderDocumentArtboards,e=this.hasSearchText,n=this.searchText;return t&&0!==t.length?e?(n=n.toLowerCase(),t.filter((function(t){var e,r,i=null!==(e=null===(r=t.artboard)||void 0===r||null===(r=r.name)||void 0===r?void 0:r.toLowerCase())&&void 0!==e?e:"";return-1!==i.indexOf(n)}))):t:[]},hasSubFolders:function(){return this.renderCloudSubFolders.length>0},hasSubFiles:function(){return this.renderCloudSubFiles.length>0},hasSubArtboards:function(){return this.renderCloudSubArtboards.length>0}},data:function(){return{lightArtboardId:0,scrollY:0,scrolling:!1,scrollingHandle:0,handle_resetArtboardsBoundingClientRect:0,viewRect:{x:0,y:0,width:0,height:0},listBoundingClientRect:{x:0,y:0,width:0,height:0},foldersBoundingClientRect:{x:0,y:0,width:0,height:0,marginTop:0},filesBoundingClientRect:{x:0,y:0,width:0,height:0,marginTop:0},artboardsBoundingClientRect:{x:0,y:0,width:0,height:0,marginTop:0},fileContextMenuData:{visible:!1,x:0,y:0,file:null},folderContextMenuData:{visible:!1,x:0,y:0,folder:null},searchText:""}},props:{subFoldersOpen:Boolean,subFilesOpen:Boolean,subArtboardsOpen:Boolean,isSupportNetDiskFile:Boolean},created:function(){window.addEventListener("resize",this.onResize)},mounted:function(){this.resetArtboardsBoundingClientRect("mounted")},beforeDestroy:function(){cancelAnimationFrame(this.handle_resetArtboardsBoundingClientRect),clearTimeout(this.scrollingHandle),window.removeEventListener("resize",this.onResize)}},Ud=Hd,$d=(n("0c43"),Object(Dr["a"])(Ud,su,cu,!1,null,"37d65722",null)),Gd=$d.exports,Wd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-nav",class:{on:t.miniFoldersOpen,allfolders:t.allFoldersBoxVisible}},[e("dl",{staticClass:"subfolders",class:{on:t.miniFoldersOpen}},[e("dt",{on:{click:function(e){return e.target!==e.currentTarget?null:t.clickMiniFoldersOpen.apply(null,arguments)}}},[e("div",{staticClass:"title",on:{click:t.clickMiniFoldersOpen}},[t._v("文件夹/文件"),e("span",{staticClass:"count"},[t._v(t._s(t.totalCount))])]),t.miniFoldersOpen?e("div",{staticClass:"c"},[e("div",{staticClass:"search",class:{on:t.inSearchMode}},[e("div",{staticClass:"btn-search",attrs:{title:"搜索当前文件夹"},on:{click:t.showSearch}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",attrs:{type:"text",maxlength:"50",spellcheck:"false"},domProps:{value:t.searchText},on:{blur:t.onSearchInputBlur,input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t.hasSearchText?e("div",{staticClass:"btn-clear",on:{click:t.clickClearSearchText}}):t._e()]),e("FolderNavSortMenu",{attrs:{mini:!0,supportRectSort:!1}})],1):t._e()]),e("dd",{ref:"box",class:{"on-scroll":t.hasScroll},on:{scroll:t.onScroll,mousewheel:t.onMouseWheel}},[t.hasSearchText&&0===t.miniRenderList.length?e("div",{staticClass:"empty"},[t._v("未找到包含 “"+t._s(t.searchText)+"” 的子文件夹或文件")]):t._e(),e("div",{staticClass:"brace",class:{off:t.miniListOpt.mousewheelTimes>0},style:t.braceStyle},[e("div",{staticClass:"front",style:{paddingTop:t.miniFrontMarginTop}},[t._l(t.lazyMiniRenderList,(function(n){return[n.isFolder?e("FolderNavSubFolderItem",{key:n.key,attrs:{folder:n.item,isSupportNetDiskFile:t.isSupportNetDiskFile},on:{contextMenuFolder:t.contextMenuFolder}}):t._e(),n.isFile?e("FolderNavSubFileItem",{key:n.key,attrs:{file:n.item},on:{contextMenuFile:t.contextMenuFile}}):t._e()]}))],2)])])]),e("FileItemContextMenu",{attrs:{fileContextMenuData:t.fileContextMenuData}}),e("FolderItemContextMenu",{attrs:{folderContextMenuData:t.folderContextMenuData}})],1)},zd=[],Yd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-item",class:t.itemClass,attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},click:function(e){return t.clickGoFolder()}}},[e("div",{staticClass:"icon"}),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t.isFavoriteFolder?e("div",{staticClass:"fav",attrs:{title:"已收藏"}}):t._e(),e("div",{staticClass:"t",domProps:{textContent:t._s(t.folder.name)}})]),e("div",{staticClass:"art-count"},[t._v(t._s(t.info))])])])},Xd=[],Kd={methods:{onContextmenu:function(t){this.$emit("contextMenuFolder",t,this.folder)},clickGoFolder:function(){Object(c["W"])(this.folder.id)}},computed:{isFavoriteFolder:function(){return this.folder.customStatus===a["q"].Favorite},useTimeSort:function(){return this.$store.state.cloudListSort.sortType===a["n"].Date},info:function(){var t=this.folder.updateTimes,e=this.folder,n=this.useTimeSort,r=this.webViewStateTimes;return n?Object(l["b"])(t,r):"共".concat(Ze(e),"项")},itemClass:function(){var t=this.folder,e={};if(t.shareMode===a["v"].PrivateCode?e.private=1:t.shareMode===a["v"].SpecifyMembers&&(e["share-sm"]=1),null!=t.color){var n=a["t"].getName(t.color);n&&(e[n]=1)}return e},countText:function(){var t,e=this.folder;return e.artboardCount+(null!==(t=e.fileCount)&&void 0!==t?t:0)+e.folderCount},title:function(){return Qe(this.folder)}},props:{folder:Object,isSupportNetDiskFile:Boolean}},qd=Kd,Jd=(n("1375"),Object(Dr["a"])(qd,Yd,Xd,!1,null,"27f85505",null)),Qd=Jd.exports,Zd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"file-item",attrs:{title:t.title},on:{click:function(e){return t.clickNetDiskFile(t.file)},contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("div",{ref:"img",staticClass:"img"},[0===t.imgSize.width&&0===t.imgSize.height?e("div",{staticClass:"icon-netdiskfile",class:t.iconCls}):t._e(),e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.file.previewImage},on:{resize:t.onPreviewImgResize}})],1),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("span",{staticClass:"pre"},[e("span",[t._v(t._s(t.file.fileName)+".")])]),e("span",{staticClass:"ext"},[t._v(t._s(t.fileExt))])]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},th=[],eh={components:{ArtboardPreviewImg:Kc},methods:{onPreviewImgResize:function(t,e){var n=this.imgSize;n.width=t,n.height=e},onContextmenu:function(t){this.$emit("contextMenuFile",t,this.file)}},computed:{info:function(){return rn(this.file,this.webViewStateTimes)},fileExt:function(){var t,e,n=this.file;if(!n)return null;var r=null!==(t=null===(e=n.fileExt)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"";return"."===r[0]&&(r=r.substring(1)),r},iconCls:function(){var t=this.file;return t?a["L"].getName(t.fileType,a["M"].Normal):null},title:function(){return tn(this.file)}},props:{file:Object},data:function(){return{imgSize:{width:0,height:0}}}},nh=eh,rh=(n("ad48"),Object(Dr["a"])(nh,Zd,th,!1,null,"bda402d4",null)),ih=rh.exports,oh={components:{FileItemContextMenu:nd,FolderItemContextMenu:cd,FolderNavSubFolderItem:Qd,FolderNavSubFileItem:ih,FolderNavSortMenu:Rd},methods:{contextMenuFolder:function(t,e){var n=t.pageX,r=t.pageY,i=this.folderContextMenuData;requestAnimationFrame((function(){i.x=n,i.y=r,i.folder=e,i.visible=!0}))},contextMenuFile:function(t,e){var n=t.pageX,r=t.pageY,i=this.fileContextMenuData;requestAnimationFrame((function(){i.x=n,i.y=r,i.file=e,i.visible=!0}))},onMouseWheel:function(t){var e;this.miniListOpt.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onScroll:function(t){this.miniListOpt.scrollTop=t.target.scrollTop},resize:function(){if(this.useMiniList){var t=this.$refs.box;if(t){var e=this.miniListOpt;e.boxHeight=t.offsetHeight}}},onSearchInputBlur:function(){var t=this;clearTimeout(this.searchHandle),this.searchHandle=setTimeout((function(){t.searchInputfocus=!1}),100)},clickClearSearchText:function(){this.searchText="",this.showSearch()},showSearch:function(){var t=this;clearTimeout(this.searchHandle),this.searchInputfocus=!0,this.$nextTick((function(){var e;null===(e=t.$refs.searchInput)||void 0===e||e.focus()}))},clickMiniFoldersOpen:function(){this.$emit("clickMiniFoldersOpen",!this.miniFoldersOpen)}},computed:{totalCount:function(){var t,e,n,r,i=null!==(t=null===(e=this.cloudSubFolders)||void 0===e?void 0:e.length)&&void 0!==t?t:0,o=null!==(n=null===(r=this.cloudSubFiles)||void 0===r?void 0:r.length)&&void 0!==n?n:0;return"(".concat(i+o,")")},lazyMiniRenderList:function(){var t=this.miniRenderList,e=this.lazyMiniStartIndex,n=this.lazyMiniLength;return t.slice(e,e+n)},lazyMiniStartIndex:function(){var t=this.miniRenderList,e=this.miniListOpt,n=e.scrollTop,r=e.itemHeight,i=e.boxHeight,o=t.length-Math.floor(i/r);return Math.max(0,Math.min(o,Math.floor(n/r)-1))},lazyMiniLength:function(){var t=this.miniRenderList,e=this.lazyMiniStartIndex,n=this.miniListOpt,r=n.boxHeight,i=n.itemHeight;return Math.min(t.length-e,Math.ceil(r/i)+2)},miniFrontMarginTop:function(){return this.lazyMiniStartIndex*this.miniListOpt.itemHeight+"px"},miniBoxRealHeight:function(){return this.miniListOpt.itemHeight*this.miniRenderList.length},braceStyle:function(){return{height:this.miniBoxRealHeight+"px"}},hasScroll:function(){return this.miniListOpt.boxHeight<this.miniBoxRealHeight},useMiniList:function(){return 0!==this.renderDocumentArtboards.length},miniRenderList:function(){var t=this.cloudSubFolders,e=this.cloudSubFiles,n=this.hasSearchText,r=this.searchText,i=[];return r=n?r.toLowerCase():null,t&&t.forEach((function(t){var e,o;n&&-1==(null!==(e=null===(o=t.name)||void 0===o?void 0:o.toLowerCase())&&void 0!==e?e:"").indexOf(r)||i.push({isFolder:!0,item:t,key:"ml_folder_".concat(t.id)})})),e&&e.forEach((function(t){var e,o,a;n&&-1==(null!==(e=null===(o=t.name)||void 0===o?void 0:o.toLowerCase())&&void 0!==e?e:"").indexOf(r)||i.push({isFile:!0,item:t,key:"ml_file_".concat(null!==(a=t.id)&&void 0!==a?a:t.viewUrl)})})),i},inSearchMode:function(){return this.searchInputfocus||this.hasSearchText},hasSearchText:function(){return Object(l["j"])(this.searchText)}},watch:{"miniListOpt.mousewheelTimes":function(t){var e=this;clearTimeout(this.miniListOpt.mousewheelHandle),t&&(this.miniListOpt.mousewheelHandle=setTimeout((function(){e.miniListOpt.mousewheelTimes=!1}),200))},miniFoldersOpen:function(t){var e=this;t||(this.searchText=""),this.$nextTick((function(){e.resize()}))}},props:{isSupportNetDiskFile:Boolean,miniFoldersOpen:Boolean},data:function(){return{searchHandle:0,folderContextMenuData:{visible:!1,x:0,y:0,folder:null},fileContextMenuData:{visible:!1,x:0,y:0,file:null},searchText:"",searchInputfocus:!1,miniListOpt:{scrollTop:0,boxHeight:0,mousewheelTimes:0,mousewheelHandle:0,itemHeight:68}}},beforeDestroy:function(){clearTimeout(this.searchHandle),clearTimeout(this.miniListOpt.mousewheelHandle),window.removeEventListener("resize",this.resize)},created:function(){window.addEventListener("resize",this.resize)},mounted:function(){var t=this;this.$nextTick((function(){t.resize()}))}},ah=oh,sh=(n("79c5"),Object(Dr["a"])(ah,Wd,zd,!1,null,"266e830c",null)),ch=sh.exports,lh={components:{FolderNavMax:Gd,FolderNavMini:ch},methods:{clickSubFoldersOpen:function(){this.inArtboardMultDownMode||(this.subFoldersOpen=!this.subFoldersOpen,Object(c["rb"])("subfolderopen",this.subFoldersOpen?"1":"0"))},clickSubFilesOpen:function(){this.inArtboardMultDownMode||(this.subFilesOpen=!this.subFilesOpen,Object(c["rb"])("subFilesOpen",this.subFilesOpen?"1":"0"))},clickSubArtboardsOpen:function(){this.inArtboardMultDownMode&&this.subArtboardsOpen||(this.subArtboardsOpen=!this.subArtboardsOpen,Object(c["rb"])("subartboardsopen",this.subArtboardsOpen?"1":"0"))},clickMiniFoldersOpen:function(t){this.miniFoldersOpen=t}},computed:{useMiniList:function(){return!this.artShowInListMode&&0!==this.renderDocumentArtboards.length},isSupportNetDiskFile:function(){return this.inCloudMode&&!$r.notSupportNetDisk(this.cloudVersion)},visible:function(){return this.inCloudMode&&!this.inArtboardMode&&!this.cloudFolderNotFound&&(this.hasSubFolders||this.hasSubFiles||this.artShowInListMode&&this.hasSubArtboards)},visibleMin:function(){return this.visible&&this.useMiniList},hasSubFolders:function(){var t=this.cloudSubFolders;return t&&t.length>0},hasSubFiles:function(){var t=this.cloudSubFiles;return t&&t.length>0},hasSubArtboards:function(){return this.renderDocumentArtboards.length>0},cloudListSort:function(){return this.$store.state.cloudListSort}},watch:{visible:function(t){t||(this.miniFoldersOpen=!1)}},data:function(){var t="0"!==Object(c["K"])("subfolderopen",!1),e="0"!==Object(c["K"])("subFilesOpen",!1),n="0"!==Object(c["K"])("subartboardsopen",!1),r=!1;return{subFoldersOpen:t,subFilesOpen:e,subArtboardsOpen:n,miniFoldersOpen:r}}},uh=lh,dh=(n("2c6a"),Object(Dr["a"])(uh,ou,au,!1,null,"ae3e71d0",null)),hh=dh.exports,fh=function(){var t=this,e=t._self._c;return t.tipVisible?e("div",{staticClass:"pop-tip-text"},[e("p",[e("span",{staticClass:"loading"}),t._v(" "+t._s(t.tipText)+" ")])]):t._e()},mh=[],ph={computed:{tipText:function(){return"正在导出切图资源中,请稍后..."},tipVisible:function(){return this.$store.state.inOutput}}},vh=ph,bh=(n("597f"),Object(Dr["a"])(vh,fh,mh,!1,null,"960b11d8",null)),gh=bh.exports,wh=function(){var t=this,e=t._self._c;return e("header",[e("PathNav"),!t.setVisible||!t.inArtboardMode&&t.artShowInListMode?e("div"):e("div",{staticClass:"view-mode"},[e("div",{staticClass:"container"},[e("BtnContainerColor"),e("ScaleControl",{attrs:{type:t.inArtboardMode?1:0}})],1)]),e("div",{staticClass:"set"},[t.setVisible?[t.inArtboardMode?t._e():e("div",{staticClass:"btn-download",class:{on:t.inArtboardMultDownMode},attrs:{title:"批量下载画板预览图"},on:{click:function(e){return t.setInArtboardMultDownMode(!t.inArtboardMultDownMode)}}}),t.canShowUpload?e("BtnUpload"):t._e(),t.inCloudMode&&!t.inArtboardMode?e("BtnArtRenderMode"):t._e(),t.inCloudMode&&!t.inArtboardMode||t.canShowUpload?e("div",{staticClass:"line line-left"}):t._e(),e("div",{ref:"btnHelp",staticClass:"helper",class:{on:t.helperVisible},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickHelper(!t.helperVisible)}}},[e("Helper")],1),t.inCloudMode?e("BtnGoInteraction"):t._e(),t.inCloudMode&&t.inArtboardMode?e("ArtboardVersion"):t._e()]:t.inCloudMode&&!t.cloudFolderNotFound&&t.permission&&t.canShowUpload?[e("BtnUpload"),e("div",{staticClass:"line line-left"})]:t._e(),t.curNetDiskFile&&t.curFileDownloadUrl?e("div",{staticClass:"btn-download",attrs:{title:"下载文件"},on:{click:function(e){return t.clickDownloadNetDiskFile(t.curNetDiskFile)}}}):t._e(),t.inNetDiskFileMode&&t.curFileInfo?e("HeaderBtnFileVersion"):t._e(),t.canShowLog?e("CloudFolderLogs"):t._e(),t.inCloudMode&&t.cloudIsLogin?e("UserNotifyButton"):t._e(),e("UserInfo",{attrs:{setVisible:t.setVisible}})],2),t.inCloudMode?e("UserNotify"):t._e()],1)},xh=[],yh=function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn-container-color"},[e("a",{staticClass:"btn-color",style:{backgroundColor:t.backgroundColor},attrs:{href:"javascript:;",title:"设置预览场景背景色"},on:{click:function(e){t.boxVisible=!t.boxVisible}}}),t.boxVisible?e("div",{staticClass:"box"},[e("h5",{attrs:{"data-unhide":"1"}},[t._v("场景背景色")]),e("div",{staticClass:"list",attrs:{"data-unhide":"1"}},[e("div",{staticClass:"item item-color-picker",class:{on:t.usedColorPicker},attrs:{"data-unhide":"1"},on:{click:function(e){return t.clickColorPicker()}}},[e("input",{ref:"colorPicker",attrs:{title:"自定义背景色","data-unhide":"1",type:"color"},on:{input:t.onColorPickerChange}})]),e("div",{staticClass:"line",attrs:{"data-unhide":"1"}}),t._l(t.recommendedColors,(function(n,r){return e("div",{key:r,staticClass:"item",class:{on:t.backgroundColor===n},style:{"background-color":n},attrs:{"data-unhide":"1"},on:{click:function(e){return t.clickRecommendColor(n)}}})}))],2)]):t._e()])},kh=[],Ch={methods:{onColorPickerChange:function(t){var e,n=null===(e=t.target)||void 0===e?void 0:e.value;n&&this.clickRecommendColor(n)},clickColorPicker:function(){var t=this.$refs.colorPicker;t&&(t.value=this.backgroundColor)},clickRecommendColor:function(t){this.$store.commit("setInteractionBackground",t)},hideContextmenu:function(t){var e,n=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),"1"!==(null===(e=t.target)||void 0===e?void 0:e.getAttribute("data-unhide"))&&(this.handle=setTimeout((function(){n.boxVisible=!1}),100)))}},watch:{boxVisible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},computed:{recommendedColors:function(){return["#000000","#282828","#ffffff","#eeeeee","#f5f5f5"]},usedColorPicker:function(){var t=this.recommendedColors,e=this.backgroundColor;return!t.find((function(t){return t===e}))},backgroundColor:function(){return this.interactionSet.backgroundColor},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet}},data:function(){return{handle:0,boxVisible:!1}},beforeDestroy:function(){window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0),clearTimeout(this.handle)}},Sh=Ch,Th=(n("c2cb"),Object(Dr["a"])(Sh,yh,kh,!1,null,"6dc98455",null)),Oh=Th.exports,Ih=function(){var t=this,e=t._self._c;return t.notSupportArtboardVerCloudVersion?t._e():e("div",{staticClass:"artboard-version-info"},[e("div",{staticClass:"btn-art-verison",class:{on:t.artboardDetail.artboardVerListVisible},attrs:{title:"查看历史版本"},on:{click:function(e){t.artboardDetail.artboardVerListVisible=!t.artboardDetail.artboardVerListVisible}}}),e("ArtboardVersionList",{ref:"artboardVersionList",attrs:{readonlyCurrentFolder:t.fileReadOnly,artboardVerId:t.artboardVerId,notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion},on:{artboardVerRemove:t.artboardVerRemove}})],1)},Ah=[],Fh=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"artboard-version-list",on:{click:function(e){t.notClickClose=!0}}},[t.isError?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取版本信息...",errorText:t.artboardDetail.errorText,isLoading:t.fetching,isError:t.isError,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t.fetching||t.artboardDetailData?[e("div",{staticClass:"base"},[e("div",{staticClass:"tab"},[t._v("最新版本")]),e("ArtboardVersionItem",{attrs:{fetching:t.fetching,notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion,readonlyCurrentFolder:t.readonlyCurrentFolder,artboardVerData:t.fetching?null:t.artboardDetailData.artboard,selected:t.lastVersionSelected,artboardDetailData:t.fetching?null:t.artboardDetailData},on:{artboardVerRemove:t.artboardVerRemove,setInConfirm:t.setInConfirm}}),e("div",{staticClass:"tab",domProps:{textContent:t._s("历史版本".concat(t.fetching?"":"(".concat(t.histories.length,")")))}})],1),t.histories.length>0?e("div",{staticClass:"list"},[e("LazyList",{ref:"lazyList",attrs:{list:t.histories,lineHeight:t.itemLineHeight},scopedSlots:t._u([{key:"default",fn:function(n){return e("ArtboardVersionItem",{key:n.item?"".concat(n.item.lastVersionId,":").concat(n.item.id):"i-".concat(n.index),attrs:{fetching:t.fetching,notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion,readonlyCurrentFolder:t.readonlyCurrentFolder,artboardVerData:t.fetching?null:n.item,selected:!t.fetching&&t.artboardVerId===n.item.lastVersionId,artboardDetailData:t.fetching?null:t.artboardDetailData},on:{artboardVerRemove:t.artboardVerRemove,setInConfirm:t.setInConfirm}})}}],null,!1,2780817675)})],1):t.notSupportArtboardVerCloudVersion?e("div",{staticClass:"cloudversion-tip",domProps:{textContent:t._s("私有云部署包版本过低(".concat(t.currentCloudVersion,"),请更新私有云部署包"))}}):e("div",{staticClass:"empty"})]:t._e()],2):t._e()},jh=[],_h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-version-item",class:{on:t.selected,"skeleton-loading":t.fetching},attrs:{title:t.userFaceTitle},on:{click:t.clickItem}},[e("div",{staticClass:"date skeleton-sub-r",domProps:{textContent:t._s(t.dateStr)}}),e("div",{staticClass:"user"},[t.fetching?e("div",{staticClass:"userface skeleton-sub-r"}):t._e(),e("div",{staticClass:"name skeleton-sub-r",domProps:{textContent:t._s(t.userNickName)}})]),e("div",{staticClass:"ver skeleton-sub-r",domProps:{textContent:t._s(t.artboardVerId)}}),t.fetching||t.notSupportArtboardVerCloudVersion||t.readonlyCurrentFolder||!t.cloudUserIsDesigner?t._e():e("div",{staticClass:"btn-del",attrs:{title:"删除该版本"},on:{click:t.clickDelArtboardVer}})])},Mh=[],Lh={methods:{setInConfirm:function(t){this.$emit("setInConfirm",t)},clickDelArtboardVer:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,c,u,d,h,f,m;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.artboardVerData,i=t.readonlyCurrentFolder,o=t.parentId,a=t.cloudUserIsDesigner,n){e.next=3;break}return e.abrupt("return");case 3:return s=n.lastVersionId,c=n.name,u=n.guid,e.prev=4,e.next=7,t.checkLoginThrow();case 7:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:if(!i&&a){e.next=11;break}return e.abrupt("return",t.showTextTip("您没有权限删除画板「".concat(c,"」")));case 11:return h="确认要删除画板版本#".concat(s," 吗?"),t.setInConfirm(!0),e.next=15,t.confirm({text:h,title:"删除确认"});case 15:if(e.sent){e.next=17;break}return e.abrupt("return");case 17:return f=new FormData,f.append("guid",u),f.append("verId",s),f.append("parentId",o),e.next=23,t.fetchPostCloudApi("removeartboardverbyweb",{body:f});case 23:if(m=e.sent,Object(l["k"])(m)){e.next=26;break}throw new Error("返回值异常:".concat(m));case 26:if(m.success){e.next=28;break}throw new Error(m.errMsg);case 28:t.showTextTip(null!==(d=m.errMsg)&&void 0!==d?d:"已删除画板版本#".concat(s)),t.$emit("artboardVerRemove",s),e.next=35;break;case 32:e.prev=32,e.t0=e["catch"](4),t.showTextTip(e.t0);case 35:return e.prev=35,t.setInConfirm(!1),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[4,32,35,38]])})))()},clickItem:function(t){var e;null!==(e=t.target)&&void 0!==e&&e.classList.contains("btn-del")||this.setCurArtboardVer(this.artboardVerData.lastVersionId)}},computed:{parentId:function(){return this.cloudCurrentFolderId},artboardVerId:function(){var t=this.artboardVerData,e=this.fetching;return e?"":t.lastVersionId?"#".concat(t.lastVersionId):"null"},dateStr:function(){var t=this.artboardVerData,e=this.fetching;return e?"":Object(l["b"])(t.updateTimeTimes,this.webViewStateTimes)},userFaceTitle:function(){var t=this.artboardVerData,e=this.fetching;return e?"":t?an(t):null},userNickName:function(){var t=this.artboardVerData,e=this.fetching;if(e)return"";if(!t)return"-";var n=t.updaterName;return n||"-"}},props:{notSupportArtboardVerCloudVersion:Boolean,readonlyCurrentFolder:Boolean,artboardVerData:Object,selected:Boolean,artboardDetailData:Object,fetching:Boolean}},Dh=Lh,Ph=(n("1779"),Object(Dr["a"])(Dh,_h,Mh,!1,null,"8a35cb34",null)),Nh=Ph.exports,Eh={components:{ArtboardVersionItem:Nh,LazyList:Ru,NetworkLoading:Mc},methods:{setInConfirm:function(t){this.inConfirm=t},clickReload:function(){this.artboardDetail.refreshDataTicks=Date.now()},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.inConfirm||(t.notClickClose?t.notClickClose=!1:t.setVisible(!1))}),50)},artboardVerRemove:function(t){this.$emit("artboardVerRemove",t)},scrollToSelectArtboardVer:function(){var t,e=this.artboardVerId,n=this.lastVersionSelected;!n&&e>0&&(null===(t=this.$refs.lazyList)||void 0===t||t.scrollTo((function(t){return(null===t||void 0===t?void 0:t.lastVersionId)===e})))},setVisible:function(t){this.artboardDetail.artboardVerListVisible=t}},beforeDestroy:function(){this.setVisible(!1),window.removeEventListener("click",this.closeSelf,!0),clearTimeout(this.closeHandle)},watch:{visible:function(t){var e=this;t?(requestAnimationFrame((function(){e.$nextTick((function(){e.scrollToSelectArtboardVer()}))})),window.addEventListener("click",this.closeSelf,!0)):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},computed:{fetching:function(){return this.fetchDetailState===c["a"].Fetching},isError:function(){return this.fetchDetailState===c["a"].Error},artboardDetailData:function(){var t=this.curArtboard;if(!t)return null;var e=t.artboard,n=t.historyArtboards;return n?{artboard:e,historyArtboards:n}:null},versionCount:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.versionCount)&&void 0!==t?t:0},fetchDetailState:function(){return this.artboardDetail.fetchState},artboardDetail:function(){return this.$store.state.artboardDetail},visible:function(){var t=this.artboardDetail;return t.artboardVerListVisible},lastVersionSelected:function(){var t,e=this.curArtboard,n=this.artboardVerId,r=this.fetching;return!r&&(n===(null===e||void 0===e||null===(t=e.artboard)||void 0===t?void 0:t.lastVersionId)||0===n)},histories:function(){var t,e;return this.fetching?this.versionCount>1?[null]:[]:null!==(t=null===(e=this.curArtboard)||void 0===e?void 0:e.historyArtboards)&&void 0!==t?t:[]},itemLineHeight:function(){return 85}},data:function(){return{notClickClose:!1,closeHandle:0,inConfirm:!1}},created:function(){},props:{readonlyCurrentFolder:Boolean,artboardVerId:Number,notSupportArtboardVerCloudVersion:Boolean}},Rh=Eh,Vh=(n("1323"),Object(Dr["a"])(Rh,Fh,jh,!1,null,"1f094879",null)),Bh=Vh.exports,Hh={components:{ArtboardVersionList:Bh},methods:{artboardVerRemove:function(t){if(!("number"!==typeof t||isNaN(t)||t<1)){var e=this.curArtboard,n=this.artboardVerId,r=this.artboard;if(e&&r){var i=n===t,o=e.historyArtboards;if(r.lastVersionId===t){if(0===o.length)return void this.$store.commit("removeArtboard",r.guid);var a=o.splice(0,1)[0];i&&(e.isError=!1,e.isFetching=!1,e.isLoaded=!1,e.loadErrMsg=null),e.artboard=a}else{var s=null===o||void 0===o?void 0:o.findIndex((function(e){var n;return(null!==(n=null===e||void 0===e?void 0:e.lastVersionId)&&void 0!==n?n:e.verId)===t}));if(-1===s)return;o.splice(s,1),r.versionCount=1+o.length}i&&this.setCurArtboardVer(r.lastVersionId)}}},reloadHistoryList:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,c,u,h,f,m,p,v;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.curArtboard,n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=4,s=new FormData,c=n.artboard.cid,s.append("artboardid",c),e.next=10,t.fetchPostCloudApi("GetArtboardVerListByWeb",{body:s});case 10:if(u=e.sent,u.success){e.next=13;break}return e.abrupt("return");case 13:if(u=u.data,Object(l["k"])(u)){e.next=16;break}return e.abrupt("return");case 16:Object(l["k"])(u.users)||(u.users={}),Object(l["i"])(u.historyArtboards)?u.historyArtboards.forEach((function(t){Ie(t),Object(d["h"])(t),ze(t)})):u.historyArtboards=[],h=function(t){if(!(!Object(l["k"])(t)||Object(l["j"])(t.updaterEmail)&&Object(l["j"])(t.updaterName))){var e=u.users[t.updaterId];e&&(t.updaterEmail=e.email,t.updaterName=e.nickName)}},f=null!==(i=u.artboard.cid)&&void 0!==i?i:u.artboard.id,u.artboard.cid=f,null!==(a=(o=u.artboard).boundsInArtboard)&&void 0!==a||(o.boundsInArtboard=null),u.historyArtboards.forEach((function(t){var e;h(t),t.cid=f,null!==(e=t.boundsInArtboard)&&void 0!==e||(t.boundsInArtboard=null),null==t.lastVersionId&&(t.lastVersionId=t.verId)})),h(u.artboard),f===c&&(n.historyArtboards=u.historyArtboards,m=n.artboardVerData,null!=m&&(p=m.lastVersionId,-1==u.historyArtboards.findIndex((function(t){return t.lastVersionId===p}))&&t.setCurArtboardVer(u.artboard.lastVersionId))),v=Wn("comment",c),v&&(v.artboard=u.artboard,v.historyArtboards=u.historyArtboards),e.next=32;break;case 29:e.prev=29,e.t0=e["catch"](4);case 32:case"end":return e.stop()}}),e,null,[[4,29]])})))()}},computed:{artboardVerChangeKey:function(){var t=this.artboard;return t?"".concat(t.updateTimeTimes,":").concat(t.versionCount):null},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardVerId:function(){var t,e;return null!==(t=null===(e=this.curArtboardLoadedVerData)||void 0===e?void 0:e.lastVersionId)&&void 0!==t?t:0},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!0}return!1},fileReadOnly:function(){return this.cloudNotSupportEdit||!this.canChangeFile},cloudNotSupportEdit:function(){return $r.notSupportNetDiskFileWebUpload(this.cloudVersion)},notSupportArtboardVerCloudVersion:function(){return $r.notSupportAiPrompt(this.cloudVersion)},artboardDetail:function(){return this.$store.state.artboardDetail}},watch:{artboardVerChangeKey:function(t){t&&this.reloadHistoryList()}},created:function(){this.reloadHistoryList()}},Uh=Hh,$h=(n("f2ac"),Object(Dr["a"])(Uh,Ih,Ah,!1,null,"1977c3f9",null)),Gh=$h.exports,Wh=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdisk-upload"},[e("div",{staticClass:"btn-netdisk-upload",class:{off:t.cannotUseNetDisk},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickOpenNetDiskUploadBox.apply(null,arguments)}}},[e("ul",[e("li",{staticClass:"btn-upload-file",on:{click:t.clickOpenNetDiskUploadBox}},[t._v("上传文件")]),e("li",{staticClass:"btn-upload-link",on:{click:t.clickAddNetDiskLink}},[t._v("添加链接")])])]),t.linkbox.visible?e("LinkEdit",{attrs:{link:t.linkbox},on:{onFileChanged:t.onFileChanged}}):t._e(),e("FileUpload",{attrs:{filebox:t.filebox},on:{onFileChanged:t.onFileChanged}})],1)},zh=[],Yh=(n("21b8"),function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"pop-box cloudfile-linkedit",on:{mousedown:function(t){t.stopPropagation()}}},[e("div",{staticClass:"box"},[e("a",{staticClass:"sys-close",attrs:{href:"javascript:;",title:"取消操作"},on:{click:t.clickCloseBox}}),e("h5",[t._v(t._s(t.isAdd?"添加":"编辑")+"链接")]),e("h6",[t._v(t._s(t.isAdd?"添加一个":"编辑")+"链接以便从标记狮访问它")]),e("div",{staticClass:"form"},[e("div",{staticClass:"title"},[t._v("链接名称")]),e("UserInput",{ref:"name",attrs:{defaultBorder:!0,placeholder:"请输入链接名称",target:"inp-name",initValue:t.linkData.name,maxLength:100},on:{change:t.onNameChange}}),e("div",{staticClass:"title"},[t._v("链接地址")]),e("UserInput",{ref:"link",attrs:{defaultBorder:!0,placeholder:"请输入链接地址,以https://、http:// 或 ftp:// 开头",target:"inp-link",initValue:t.linkData.link,maxLength:8192},on:{change:t.onLinkChange}})],1),e("div",{staticClass:"btns"},[e("a",{staticClass:"btn-cancel",attrs:{href:"javascript:;"},on:{click:t.clickCloseBox}},[t._v("取消")]),e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.clickSave}},[t._v(t._s(t.submitFetching?"提交中...":"确定"))])])])]):t._e()}),Xh=[],Kh=function(){var t=this,e=t._self._c;return e("div",{staticClass:"input",class:t.cls},["checkbox"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:"checkbox"},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{blur:t.blur,focus:t.focus,change:function(e){var n=t.value,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.value=n.concat([o])):a>-1&&(t.value=n.slice(0,a).concat(n.slice(a+1)))}else t.value=i}}}):"radio"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:"radio"},domProps:{checked:t._q(t.value,null)},on:{blur:t.blur,focus:t.focus,change:function(e){t.value=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:t.type},domProps:{value:t.value},on:{blur:t.blur,focus:t.focus,input:function(e){e.target.composing||(t.value=e.target.value)}}}),t.showVerify?e("img",{staticClass:"verifycode",attrs:{src:t.verifySrc,title:"点击刷新验证码"},on:{click:function(e){return t.clickVerifyCode()}}}):t.showPwd?e("span",{staticClass:"pwd-mode",class:{"in-text":t.pwdModeInText},on:{click:function(e){t.pwdModeInText=!t.pwdModeInText}}}):t.showPhoneCode?e("a",{staticClass:"button btn-phoneCodeSend",class:{off:!t.phoneCodeBtnEnable,light:t.phoneCodeBtnEnable},attrs:{href:"javascript:;"},on:{click:t.sendPhoneCode}},[t._v(t._s(t.phoneCodeBtnText))]):t._e()])},qh=[],Jh={methods:{sendPhoneCode:function(){this.$emit("sendPhoneCode")},setFocus:function(){var t=this.$refs.input;t&&t.focus()},setValue:function(t){"string"===typeof t&&(this.value=t)},clearAndFocus:function(){this.value="",this.setFocus()},refreshCode:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.ticks=Date.now(),t.value="";case 2:case"end":return e.stop()}}),e)})))()},clickVerifyCode:function(t){var e=this.ticks,n=Date.now(),r=n-e;r<500&&r>=0||(this.ticks=n,this.value="",!0!==t&&this.setFocus())},focus:function(){this.focused=!0},blur:function(){this.focused=!1}},watch:{showVerify:function(t){t&&this.refreshCode()},value:function(t){this.$emit("change",t)}},props:{target:String,initValue:String,placeholder:String,maxLength:Number,defaultBorder:Boolean,phoneCodeBtnText:String,phoneCodeBtnEnable:Boolean},computed:{autocomplete:function(){return"password"===this.type?"new-password":"off"},type:function(){return"pwd2"===this.target||"pwd3"===this.target?"password":this.showPwd?this.pwdModeInText?"text":"password":"text"},verifySrc:function(){return"".concat(c["f"],"router/verifycode.ashx?r=").concat(this.ticks)},showPwd:function(){return"pwd"===this.target},showVerify:function(){return"verify"===this.target},showPhoneCode:function(){return"phoneCode"===this.target},cls:function(){var t=[],e=this.target;return e&&t.push(e),this.focused&&t.push("focused"),this.defaultBorder&&t.push("default-bor"),t}},created:function(){this.value=this.initValue,this.showVerify&&this.refreshCode()},data:function(){return{pwdModeInText:!1,focused:!1,value:"",ticks:Date.now()}}},Qh=Jh,Zh=(n("023f"),Object(Dr["a"])(Qh,Kh,qh,!1,null,"474237c6",null)),tf=Zh.exports,ef={components:{UserInput:tf},methods:{clickSave:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,c,u;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.submitFetching){e.next=2;break}return e.abrupt("return");case 2:if(n=t.linkData,n.name=n.name.trim(),n.link=n.link.trim(),i=t.isAdd,Object(l["j"])(n.name)){e.next=11;break}return t.showTextTip("链接名称不能为空,请输入链接名称"),o=t.$refs.name,o&&o.setFocus(),e.abrupt("return");case 11:if(Object(l["j"])(n.link)){e.next=16;break}return t.showTextTip("链接地址不能为空,请输入链接地址"),a=t.$refs.link,a&&a.setFocus(),e.abrupt("return");case 16:if(/^(?:ftp|http|https):\/\/.+$/.test(n.link)){e.next=21;break}return t.showTextTip("请输入合法的链接地址,以https://、http:// 或 ftp:// 开头"),s=t.$refs.link,s&&(null===s||void 0===s||s.setFocus()),e.abrupt("return");case 21:if(i){e.next=27;break}if(c=t.link.data||{},c.name!==n.name||c.link!==n.link){e.next=27;break}return t.showTextTip("链接信息未发生变更"),t.clickCloseBox(),e.abrupt("return");case 27:return t.submitFetching=!0,e.prev=28,e.next=31,t.fetchPostCloudApi("setnetdisklinkbyweb",{timeout:1e4,body:n});case 31:if(u=e.sent,Object(l["k"])(u)){e.next=34;break}return e.abrupt("return");case 34:if(u.success){e.next=37;break}return t.showTextTip(u.errMsg),e.abrupt("return");case 37:u=u.data,t.$emit("onFileChanged",{files:[u.data],folderUpdateTimes:u.folderUpdateTimes,isAdd:i}),t.clickCloseBox(),t.showTextTip("".concat(i?"添加":"编辑","链接成功")),e.next=46;break;case 43:e.prev=43,e.t0=e["catch"](28),t.showTextTip("".concat(i?"添加":"编辑","链接失败:").concat(e.t0));case 46:return e.prev=46,t.submitFetching=!1,e.finish(46);case 49:case"end":return e.stop()}}),e,null,[[28,43,46,49]])})))()},onNameChange:function(t){this.linkData.name=t},onLinkChange:function(t){this.linkData.link=t},clickCloseBox:function(){var t=this.link;t.data=null,t.visible=!1}},computed:{isAdd:function(){return 0==this.linkData.id&&!Object(l["j"])(this.linkData.secId)},visible:function(){return this.link.visible}},data:function(){return{submitFetching:!1,linkData:null}},props:{link:Object},created:function(){this.linkData=Object.assign({},this.link.data||{id:0,name:"",link:"",parentId:0,secId:""})}},nf=ef,rf=(n("5ccb"),Object(Dr["a"])(nf,Yh,Xh,!1,null,"4ab12b2e",null)),of=rf.exports,af=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"pop-box cloudfile-upload",on:{mousedown:function(t){t.stopPropagation()},drop:function(t){t.preventDefault()}}},[e("div",{staticClass:"box"},[e("a",{staticClass:"sys-close",attrs:{href:"javascript:;",title:"取消操作"},on:{click:t.clickCloseBox}}),e("div",{staticClass:"drag-box",class:{dragging:t.dropTip.dragging}},[t._m(0),e("h4",[t._v(t._s(t.dragTitle))]),e("h5",[t._v("支持图片/SVG/PDF/Axure HTML演示文件以及其他任意格式文件")])]),t.hasFile?e("div",{ref:"files",staticClass:"files",on:{scroll:t.onBoxScroll}},[e("div",{staticClass:"height",class:{scrolling:t.scrolling},style:{height:t.boxRealHeight+"px"}},[e("div",{style:{"padding-top":t.renderListCssPaddingTop+"px"}},t._l(t.renderList,(function(t){return e("FileUploadItem",{key:t.id,attrs:{item:t}})})),1)])]):t._e(),e("div",{staticClass:"footer",class:{empty:!t.hasFile}},[t.hasFile?e("div",{staticClass:"other"},[e("div",{staticClass:"btn-clean btn-clean-all",on:{click:t.clickRemoveAll}},[t._v("清空全部")]),e("div",{staticClass:"btn-clean",on:{click:t.clickRemoveCompleted}},[t._v("清理已完成文件")])]):t._e(),e("div",{staticClass:"button light",on:{click:t.clickAddFiles}},[t._v("添加文件"),e("input",{attrs:{type:"file",value:"",size:"30",multiple:""},on:{change:t.onInputFileChange}})])])])]):t._e()},sf=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon"},[e("div",{staticClass:"l"}),e("div",{staticClass:"r"})])}],cf=(n("366d"),n("1587"),n("8748")),lf=!1,uf=[],df={};function hf(){clearTimeout(xl),xl=setTimeout((function(){if(wl){try{df={},wl.terminate()}catch(t){}wl=null}}),12e4)}function ff(){return new Promise((function(t,e){if(wl)return t(wl);if(lf)uf.push({resolve:t,reject:e});else{lf=!0;var n=function(t,e,n){var r=uf;uf=[],r.forEach((function(r){var i=r.resolve,o=r.reject;e?i(t):o(n)}))},r=new Worker(Object(c["F"])()+"marklion_cloud_web_worker.js");r.addEventListener("message",(function(i){hf();var o=i.data;if(o&&!0===o.__mcww){delete o.__mcww;var a=o.command;switch(delete o.command,a){case"inited":var s;lf=!1,df={};try{if(o.success)wl=r,t(r);else{try{r.terminate()}catch(l){}s=o.errMsg||"error",e(s)}}catch(l){}n(r,o.success,s);break;default:var c=df[a];c&&(delete df[a],c(o));break}}})),r.addEventListener("error",(function(t){hf(),console.error(t)}))}}))}function mf(t,e){df[t]=e}function pf(t){return vf.apply(this,arguments)}function vf(){return vf=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,o,a,s,l,u,d,h=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=c["V"].cloudKey,i=c["V"].userKey,o="".concat(e,"-").concat(Math.random().toString(16).substring(2)),a=h.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=h[l];return u={__mcww:!0,command:e,arg_len:s.length+1,arg0:"".concat(n,"-").concat(i||"null"),key:o},s.forEach((function(t,e){u["arg".concat(e+1)]=t})),t.next=7,ff();case 7:return d=t.sent,t.next=10,new Promise((function(t,e){mf(o,(function(n){n&&(n.success?t(n.data):e(n.errMsg))})),d.postMessage(u)}));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)}))),vf.apply(this,arguments)}var bf=function(){function t(){Object(_["a"])(this,t),Object(M["a"])(this,"key",null),Object(M["a"])(this,"worker",null),Object(M["a"])(this,"msg",null)}return Object(j["a"])(t,[{key:"startAsync",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,o=this;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ff();case 2:return i=t.sent,this.worker=i,t.next=6,new Promise((function(t){n||(n={});var r=o.key=Math.random().toString(16).substring(2),i="filemd5.".concat(r,"."),a=i+"completed",s=i+"progress",c=o.msg=function(e){var r=e.data;if(r&&"object"===Object(cf["a"])(r)&&!0===r.__filemd5){var i=r.command;switch(i){case a:delete r.__filemd5,delete r.command;try{var l=o.worker;l&&(l.removeEventListener("message",c),o.worker=o.key=o.msg=c=n=null)}catch(u){}t(r);break;case s:delete r.__filemd5,delete r.command,n&&n.onprogress&&n.onprogress(r);break}}},l=o.worker;l.addEventListener("message",c),l.postMessage({__filemd5:!0,command:"filemd5.start",key:r,file:e,needHash:n.needHash,needQuickHash:n.needQuickHash})}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"cancelAsync",value:function(){var t=this.key,e=this.worker,n=this.msg;t&&e&&(this.key=this.worker=null,n&&(e.removeEventListener("message",n),this.msg=null),e.postMessage({__filemd5:!0,command:"filemd5.cancel",key:t}))}}]),t}(),gf=81920;function wf(){return gf*Object(c["qb"])(38,65)}var xf=function(){function t(e){var n=this;Object(_["a"])(this,t),Object(M["a"])(this,"hasExist",!1),Object(M["a"])(this,"uploadGuid",void 0),Object(M["a"])(this,"file",void 0),Object(M["a"])(this,"sliceLength",0),Object(M["a"])(this,"mainFileSliceCurrent",0),Object(M["a"])(this,"lineViewPackSliceCurrent",0),Object(M["a"])(this,"previewImageSliceCurrent",0),Object(M["a"])(this,"lineViewVer",0),Object(M["a"])(this,"supportPreviewFileExt",!1),Object(M["a"])(this,"supportXSPFilePreview",!1),Object.keys(e).forEach((function(t){switch(t){case"needLineViewPack":case"needPreViewImage":return}n[t]=e[t]}))}return Object(j["a"])(t,[{key:"needLineViewPack",get:function(){return this.lineViewPackSliceCurrent>-1}},{key:"needPreViewImage",get:function(){return this.previewImageSliceCurrent>-1}}]),t}(),yf={MainFile:0,LineViewPack:1,PreviewImage:2},kf=Object(j["a"])((function t(){Object(_["a"])(this,t),Object(M["a"])(this,"type",yf.MainFile),Object(M["a"])(this,"uploadGuid",null),Object(M["a"])(this,"current",0),Object(M["a"])(this,"byteLength",0),Object(M["a"])(this,"rndLength",0)})),Cf=function(){function t(){Object(_["a"])(this,t),Object(M["a"])(this,"folderId",0),Object(M["a"])(this,"guid",null),Object(M["a"])(this,"fileType",a["L"].Other),Object(M["a"])(this,"urlLink",null),Object(M["a"])(this,"lastWriteTime",0),Object(M["a"])(this,"fileName",null),Object(M["a"])(this,"previewFileExt",null),Object(M["a"])(this,"fileExt",null),Object(M["a"])(this,"sliceLength",0),Object(M["a"])(this,"mainFile",null),Object(M["a"])(this,"lineViewPack",null),Object(M["a"])(this,"previewImage",null)}return Object(j["a"])(t,[{key:"lineViewVer",get:function(){return 1}}]),t}(),Sf=function(){function t(e,n,r,i){Object(_["a"])(this,t),Object(M["a"])(this,"size",0),Object(M["a"])(this,"hash",null),Object(M["a"])(this,"quickHash",null),Object(M["a"])(this,"sliceCount",0),this.hash=e,this.quickHash=n,this.size=r,this.updateSliceCount(i)}return Object(j["a"])(t,[{key:"updateSliceCount",value:function(t){this.sliceCount=Math.ceil(this.size/t)}}]),t}(),Tf=Object(j["a"])((function t(){Object(_["a"])(this,t),Object(M["a"])(this,"lineViewVer",0),Object(M["a"])(this,"supportPreviewFileExt",!1),Object(M["a"])(this,"supportXSPFilePreview",!1)})),Of=function(){function t(){Object(_["a"])(this,t),Object(M["a"])(this,"mainFile",null),Object(M["a"])(this,"lineViewPack",null),Object(M["a"])(this,"previewImage",null),Object(M["a"])(this,"previewImageWithExt",null)}return Object(j["a"])(t,[{key:"setPreviewImage",value:function(t,e){e?this.previewImageWithExt=t:this.previewImage=t}},{key:"getPreviewImage",value:function(t){return t?this.previewImageWithExt:this.previewImage}}]),t}(),If=function(){function t(){var e=this;Object(_["a"])(this,t),Object(M["a"])(this,"id",0),Object(M["a"])(this,"folderId",0),Object(M["a"])(this,"guid",null),Object(M["a"])(this,"fileType",void 0),Object(M["a"])(this,"currentPosition",0),Object(M["a"])(this,"currentSize",0),Object(M["a"])(this,"status",Df.Fetching),Object(M["a"])(this,"_fileName",null),Object(M["a"])(this,"_size",0),Object(M["a"])(this,"_lastWriteTime",0),Object(M["a"])(this,"file",null),Object(M["a"])(this,"hash",null),Object(M["a"])(this,"quickHash",null),Object(M["a"])(this,"ext",null),Object(M["a"])(this,"lineViewPack",null),Object(M["a"])(this,"previewImage",null),Object.keys(this).filter((function(t){return"_"===t[0]})).forEach((function(t){Object(a["tb"])(e,t,!1)}))}return Object(j["a"])(t,[{key:"needLineViewPack",get:function(){switch(this.fileType){case a["L"].Word:case a["L"].Excel:case a["L"].PPT:return!0;default:return!1}}},{key:"isJsonFile",get:function(){var t=this.fileName;return t&&/\.json$/gi.test(t)}},{key:"isIconFile",get:function(){var t=this.fileType,e=this.fileName;return t==a["L"].Image&&(!!Object(l["j"])(e)&&/\.(icon|ico|icns)$/gi.test(e))}},{key:"isSvgFile",get:function(){var t=this.fileType,e=this.fileName;return t==a["L"].Image&&/\.(svg)$/gi.test(e)}},{key:"needPreviewImage",get:function(){switch(this.fileType){case a["L"].Image:return!0;case a["L"].Lottie:return!0;case a["L"].XD:case a["L"].Sketch:case a["L"].Figma:return!0;default:return!1}}},{key:"currentPercentage",get:function(){var t=this.currentSize;if(0==t)return 0;var e=this.currentPosition;return e<1?0:e>t?100:Math.round(1e4*e/t)/100}},{key:"fileName",get:function(){var t,e=this._fileName;if(e)return e;var n=this.file;return e=this._fileName=null!==(t=null===n||void 0===n?void 0:n.name)&&void 0!==t?t:null,e}},{key:"fileExt",get:function(){var t=this.fileName;if(!t)return null;var e=t.lastIndexOf(".");return-1===e?"":t.substring(e)}},{key:"size",get:function(){var t,e=this._size;if(e>0)return e;var n=this.file;return e=this._size=null!==(t=null===n||void 0===n?void 0:n.size)&&void 0!==t?t:0,e}},{key:"lastWriteTime",get:function(){var t,e=this._lastWriteTime;if(e>0)return e;var n=this.file;return e=this._lastWriteTime=null!==(t=null===n||void 0===n?void 0:n.lastModified)&&void 0!==t?t:0,e}},{key:"needResetHash",value:function(){return!Object(l["j"])(this.hash)||!Object(l["j"])(this.quickHash)}}]),t}(),Af=function(){function t(){Object(_["a"])(this,t),Object(M["a"])(this,"size",0),Object(M["a"])(this,"lastWriteTime",0),Object(M["a"])(this,"file",null),Object(M["a"])(this,"previewFileExt",null),Object(M["a"])(this,"hash",null),Object(M["a"])(this,"quickHash",null)}return Object(j["a"])(t,[{key:"needResetHash",value:function(){return!Object(l["j"])(this.hash)||(!Object(l["j"])(this.quickHash)||null==this.file)}}]),t}(),Ff={TextTip:Symbol("TextTip"),UploadUpdate:Symbol("UploadUpdate"),UploadRemove:Symbol("UploadRemove"),CloudFileUpdate:Symbol("CloudFileUpdate"),WebUserNotLogin:Symbol("WebUserNotLogin"),WebFileChanged:Symbol("WebFileChanged")},jf=function(){function t(){Object(_["a"])(this,t),Object(M["a"])(this,"inlineEvents",{}),Object(M["a"])(this,"cloudNetDiskFileUploaderInfoCache",null),Object(M["a"])(this,"uploadList",[]),Object(M["a"])(this,"_sql_auto_id",1)}return Object(j["a"])(t,[{key:"on",value:function(t,e){if(!t)return!1;if("function"!==typeof e)return!1;var n=this.inlineEvents,r=n[t];if(r){var i=r.find((function(t){return t===e}));i||r.push(e)}else r=n[t]=[e];return!0}},{key:"off",value:function(t,e){if(!t)return!1;var n=this.inlineEvents,r=n[t];if(!r||0===r.length)return!0;if(void 0===e)n[t]=[];else{var i=r.findIndex((function(t){return t===e}));-1!==i&&r.splice(i,1)}return!0}},{key:"emit",value:function(t,e){if(t){var n=this.inlineEvents,r=n[t];r&&0!==r.length&&r.forEach((function(t){t(e)}))}}},{key:"runTask",value:function(t){if(t)switch(t.type){case Pf.Remove_All:case Pf.Remove_Completed:case Pf.Remove_Select:this.removeTask(t);break;case Pf.Resume:case Pf.Pause:case Pf.ReStart:this.updateTask(t);break;case Pf.Add:this.addTask(t);break}}},{key:"addTask",value:function(t){var e=this;if(null!=t.files&&0!=t.files.length){var n={},r=[];if(t.files.forEach((function(t){try{var e=t.name;if(!Object(l["j"])(e))return;n["".concat(e,"-").concat(t.size)]=t}catch(r){}})),0!=Object.keys(n).length){var i=0,o=!1,s=this.uploadList;s.forEach((function(e){var r="".concat(e.fileName,"-").concat(e.size);if(e.folderId==t.folderId&&n[r])switch(e.status){case Df.PreLoadFileMsg:delete n[r],o=!0;break;case Df.Waitting:delete n[r],o=!0;break;case Df.Fetching:delete n[r],o=!0;break;case Df.Paused:case Df.Errored:case Df.Completed:case Df.RemovedMark:return e.quickHash="",e.hash="",e.status=Df.Waitting,delete n[r],void i++}})),Object.keys(n).forEach((function(e){var i=n[e],o=new If;o.id=0,o.status=Df.PreLoadFileMsg,o.fileType=a["L"].Other,o.ext="文件等待上传中",o.file=i,o.folderId=t.folderId,o.guid=null,o.hash=null,o.currentPosition=0,o.currentSize=0,o.quickHash=null,r.push(o),s.push(o)})),i=this.updateToSql(r),i>0?(i<r.length&&(r=r.filter((function(t){return t.id>0}))),this.sendStateToWeb(r),this.showTextTip("共计".concat(i,"个文件被添加到上传列表")),this.updatePreLoadFileMsgs(r)):o&&this.showTextTip("文件已经在上传列表中,请不要重复添加"),requestAnimationFrame((function(){e.startUploadTask()}))}}}},{key:"showTextTip",value:function(t){this.emit(Ff.TextTip,t)}},{key:"getUploadTask",value:function(){var t=this,e=this.uploadList,n=e.find((function(t){return t.status===Df.Fetching}));return null!=n?null:(n=e.find((function(e){return e.status==Df.Waitting&&(!e.needResetHash()||(e.status=Df.PreLoadFileMsg,e.ext="文件等待上传中",t.sendStateToWeb(e),t.updatePreLoadFileMsg(e),!1))})),null==n?null:(n.status=Df.Fetching,n.ext="",this.sendStateToWeb(n),n))}},{key:"enpostdata",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pf("upload_assist","string"===typeof e?e:JSON.stringify(e),n>0?n:0);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getUrlLink",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.fileType==a["L"].Url){t.next=2;break}return t.abrupt("return");case 2:n.urlLink="";case 3:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getUploadPreInfo",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.enpostdata(e);case 3:return t.t1=t.sent,t.t2={body:t.t1,timeout:1e4},t.next=7,t.t0.fetchPostCloudApi.call(t.t0,"netdiskfilepreuploadbyweb",t.t2);case 7:if(i=t.sent,i.success){t.next=10;break}throw null!==(n=i.errMsg)&&void 0!==n?n:"数据传输异常「".concat(i.code,"」(NetDiskFilePreUpload)");case 10:if(i.data){t.next=12;break}throw"数据传输异常,data is null(NetDiskFilePreUpload)";case 12:return t.abrupt("return",new xf(i.data));case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"startUploadTask",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){var e,n,o,a,s,l,u,d,h,f,m,p,v,b,g,w,x,y=this;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.getUploadTask(),null!=e){t.next=3;break}return t.abrupt("return");case 3:if(n=function(){return e.status==Df.Fetching},o=function(t){t()},t.prev=5,0!=e.size){t.next=8;break}throw"不能上传文件大小为0的文件";case 8:return u=wf(),d=new Cf,d.fileName=e.fileName,d.fileType=e.fileType,d.folderId=e.folderId,d.guid=e.guid,d.mainFile=new Sf(e.hash,e.quickHash,e.size,u),d.lastWriteTime=e.lastWriteTime,d.fileExt=null!==(a=e.fileExt)&&void 0!==a?a:"",d.sliceLength=u,t.next=20,this.getUrlLink(e,d);case 20:return e.needLineViewPack&&null!=e.lineViewPack&&(d.lineViewPack=new Sf(e.lineViewPack.hash,e.lineViewPack.quickHash,e.lineViewPack.size,u)),e.needPreviewImage&&null!=e.previewImage&&(d.previewImage=new Sf(e.previewImage.hash,e.previewImage.quickHash,e.previewImage.size,u),d.previewFileExt=e.isSvgFile?e.previewImage.previewFileExt:null),t.next=24,this.getUploadPreInfo(d);case 24:if(h=t.sent,f=new Tf,f.lineViewVer=h.lineViewVer,f.supportPreviewFileExt=h.supportPreviewFileExt,f.supportXSPFilePreview=h.supportXSPFilePreview,this.setCloudNetDiskFileUploaderInfo(f),!h.hasExist){t.next=33;break}return o((function(){e.status=Df.Completed,e.ext="文件已存在,无需更新",e.currentSize=e.currentPosition=e.size,y.updateToSql([e]),y.sendStateToWeb(e),h.webFile&&y.sendFileItemToWeb({data:h.webFile})})),t.abrupt("return");case 33:return o((function(){e.guid=h.uploadGuid,y.updateToSql([e])})),d.sliceLength=h.sliceLength,d.mainFile.updateSliceCount(d.sliceLength),null===(s=d.lineViewPack)||void 0===s||s.updateSliceCount(d.sliceLength),null===(l=d.previewImage)||void 0===l||l.updateSliceCount(d.sliceLength),m=new kf,m.uploadGuid=h.uploadGuid,m.current=h.mainFileSliceCurrent,m.type=yf.MainFile,p=d.mainFile.size,v=0,b=e.needLineViewPack&&null!=e.lineViewPack&&h.needLineViewPack,g=e.needPreviewImage&&null!=e.previewImage&&h.needPreViewImage,b&&(p+=d.lineViewPack.size),g&&(p+=d.previewImage.size),e.currentSize=p,w=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(i,a,s){var l,u,f;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!(m.current<i.sliceCount)){t.next=23;break}l={position:0,length:i.size,file:a};case 3:if(!(l.position<l.length)){t.next=20;break}return m.current++,u=Math.min((m.current-1)*d.sliceLength,i.size),m.byteLength=Math.min(d.sliceLength,i.size-u),m.rndLength=Object(c["qb"])(10,128),t.next=10,y.uploadSlice(l,m,u,(function(t){var r=n();return r&&o((function(){e.currentPosition=v+t,y.sendStateToWeb(e)})),r}));case 10:if(f=t.sent,null!=f){t.next=13;break}return t.abrupt("return",!1);case 13:if(f.success){t.next=17;break}if(!s){t.next=16;break}throw f.errMsg;case 16:return t.abrupt("return",!1);case 17:l.position=u+m.byteLength,t.next=3;break;case 20:if(n()){t.next=22;break}return t.abrupt("return",!1);case 22:o((function(){e.currentPosition=v+Math.min(m.current*h.sliceLength,i.size),y.sendStateToWeb(e)}));case 23:return t.abrupt("return",!0);case 24:return t.prev=24,v+=i.size,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[0,,24,27]])})));return function(e,n,r){return t.apply(this,arguments)}}(),t.next=52,w(d.mainFile,e.file,!0);case 52:if(!e.needLineViewPack||null==e.lineViewPack||!h.needLineViewPack){t.next=59;break}return m.type=yf.LineViewPack,m.current=h.lineViewPackSliceCurrent,t.next=57,w(d.lineViewPack,e.lineViewPack.file,!1);case 57:if(t.sent){t.next=59;break}return t.abrupt("return");case 59:if(!e.needPreviewImage||null==e.previewImage||!h.needPreViewImage){t.next=66;break}return m.type=yf.PreviewImage,m.current=h.previewImageSliceCurrent,t.next=64,w(d.previewImage,e.previewImage.file,!1);case 64:if(t.sent){t.next=66;break}return t.abrupt("return");case 66:if(n()){t.next=68;break}return t.abrupt("return");case 68:return t.next=70,this.uploadCompleted(m);case 70:if(x=t.sent,null!=x){t.next=73;break}return t.abrupt("return");case 73:o((function(){e.status=Df.Completed,e.ext="文件上传成功",e.currentPosition=e.currentSize=e.size,y.updateToSql([e]),y.sendStateToWeb(e),y.sendFileItemToWeb(x)})),t.next=82;break;case 76:if(t.prev=76,t.t0=t["catch"](5),n()){t.next=81;break}return t.abrupt("return");case 81:o((function(){e.status=Df.Errored,e.ext=t.t0.toString(),y.updateToSql([e]),y.sendStateToWeb(e)}));case 82:return t.prev=82,requestAnimationFrame((function(){y.startUploadTask()})),t.finish(82);case 85:case"end":return t.stop()}}),t,this,[[5,76,82,85]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"sendFileItemToWeb",value:function(t){null!=t&&this.emit(Ff.WebFileChanged,t)}},{key:"uploadCompleted",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.byteLength=0,e.rndLength=0,e.current=0,t.prev=3,t.t0=this,t.next=7,this.enpostdata(e);case 7:return t.t1=t.sent,t.t2={body:t.t1,timeout:1e4},t.next=11,t.t0.fetchPostCloudApi.call(t.t0,"netdiskfilesavebyweb",t.t2);case 11:if(n=t.sent,n.success){t.next=14;break}throw null!==(i=n.errMsg)&&void 0!==i?i:"数据传输异常「".concat(n.Code,"」(UploadCompleted)");case 14:if(n.data){t.next=16;break}throw"数据传输异常,data is null(UploadCompleted)";case 16:return t.abrupt("return",n.data);case 19:throw t.prev=19,t.t3=t["catch"](3),"".concat(t.t3.toString(),"(UploadCompleted)");case 22:case"end":return t.stop()}}),t,this,[[3,19]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"uploadSlice",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,o){var a,s,l,u,d,h;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=2,l=null,e.position!=i&&(e.position=i);case 3:if(!(s>0)){t.next=25;break}if(o(i)){t.next=6;break}return t.abrupt("return",null);case 6:return t.next=8,this.enpostdata(n,n.rndLength);case 8:return u=t.sent,d=e.file.slice(i,n.byteLength+i),h=new Blob([u,d],{type:"application/stream"}),t.prev=11,t.next=14,this.fetchPostCloudApi("netdiskfilesliceuploadbyweb",{body:h,timeout:3e4});case 14:return t.abrupt("return",t.sent);case 17:t.prev=17,t.t0=t["catch"](11),l=t.t0.toString();case 20:return s-=1,t.next=23,Object(c["yb"])(20);case 23:t.next=3;break;case 25:throw"".concat(null!==(a=l)&&void 0!==a?a:"私有云数据传输异常","(UploadSlice)");case 26:case"end":return t.stop()}}),t,this,[[11,17]])})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"sendStateToWeb",value:function(t){this.emit(Ff.UploadUpdate,t)}},{key:"updatePreLoadFileMsgs",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<e.length)){t.next=8;break}return i=e[n],t.next=5,this.updatePreLoadFileMsg(i);case 5:n++,t.next=1;break;case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updatePreLoadFileMsg",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,o,a=this;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=function(){return e.status==Df.PreLoadFileMsg},e.currentPosition=0,0!=e.size){t.next=5;break}throw"不能上传文件大小为0的文件";case 5:return e.currentSize=e.size,t.next=8,this.getTaskFileType(e);case 8:if(!e.needLineViewPack&&!e.needPreviewImage){t.next=14;break}return t.next=11,this.getCloudNetDiskFileUploaderInfoAsync();case 11:t.t0=t.sent,t.next=15;break;case 14:t.t0=null;case 15:if(i=t.t0,o=this.getHashCache(e),null!=o){t.next=28;break}return o=new Of,o.mainFile=new Af,o.mainFile.file=e.file,o.mainFile.lastWriteTime=e.lastWriteTime,o.mainFile.size=e.size,t.next=25,this.setTaskHashAsync(e,o.mainFile,"文件",n);case 25:if(t.sent){t.next=27;break}return t.abrupt("return");case 27:this.setHashCache(e,o);case 28:return this.setNetDiskFileCache(o.mainFile),t.next=31,this.makeTaskLineViewPack(e);case 31:return t.next=33,this.makeTaskPreViewImage(e,o,i,n);case 33:this.setTaskHash(e,o),t.next=39;break;case 36:t.prev=36,t.t1=t["catch"](0),this.updateTaskDataError(e,t.t1.toString());case 39:return t.prev=39,requestAnimationFrame((function(){a.startUploadTask()})),t.finish(39);case 42:case"end":return t.stop()}}),t,this,[[0,36,39,42]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setNetDiskFileCache",value:function(){return!0}},{key:"setHashCache",value:function(){return!0}},{key:"makeTaskPreViewImage",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,o){var s,l,u,d,h,f,m,p,v,b,g,w,x;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o()){t.next=2;break}return t.abrupt("return");case 2:if(e.needPreviewImage){t.next=4;break}return t.abrupt("return");case 4:if(e.fileType!=a["L"].Lottie||null==e.previewImage){t.next=14;break}return h=e.previewImage,h.lastWriteTime=null!==(u=null===(d=h.file)||void 0===d?void 0:d.lastModified)&&void 0!==u?u:Date.now(),t.next=9,this.setTaskHashAsync(e,h,"文件缩略图",o);case 9:if(t.sent){t.next=11;break}return t.abrupt("return");case 11:return n.setPreviewImage(h,!1),this.setHashCache(e,n),t.abrupt("return");case 14:if(e.previewImage=null,f=e.isSvgFile&&null!==(s=null===i||void 0===i?void 0:i.supportPreviewFileExt)&&void 0!==s&&s,m=null!==(l=null===i||void 0===i?void 0:i.supportXSPFilePreview)&&void 0!==l&&l,p=n.getPreviewImage(f),null!=p&&!p.needResetHash()){t.next=84;break}if(e.ext="正在生成图片缩略图",this.sendStateToWeb(e),v=new Af,!m||e.fileType!=a["L"].XD){t.next=29;break}return t.next=25,Ki.getXDFileImgPreviewAsync(e.file,v);case 25:if(t.sent){t.next=27;break}return t.abrupt("return");case 27:t.next=72;break;case 29:if(!m||e.fileType!=a["L"].Sketch){t.next=36;break}return t.next=32,Ki.getSketchFileImgPreviewAsync(e.file,v);case 32:if(t.sent){t.next=34;break}return t.abrupt("return");case 34:t.next=72;break;case 36:if(!m||e.fileType!=a["L"].Figma){t.next=43;break}return t.next=39,Ki.getFigmaFileImgPreviewAsync(e.file,v);case 39:if(t.sent){t.next=41;break}return t.abrupt("return");case 41:t.next=72;break;case 43:if(!(e.isSvgFile&&e.size>51200)){t.next=58;break}return t.prev=44,v.previewFileExt=null!==i&&void 0!==i&&i.supportPreviewFileExt?"png":null,t.next=48,zi(e.file,c["g"],.6,!(null!==i&&void 0!==i&&i.supportPreviewFileExt),!0);case 48:v.file=t.sent,t.next=56;break;case 51:return t.prev=51,t.t0=t["catch"](44),v.file=null,v.previewFileExt=null,t.abrupt("return");case 56:t.next=72;break;case 58:if(!e.isSvgFile&&!e.isIconFile){t.next=62;break}v.file=e.file,t.next=72;break;case 62:return t.prev=62,t.next=65,zi(e.file,c["g"],.6,!1);case 65:v.file=t.sent,t.next=72;break;case 68:return t.prev=68,t.t1=t["catch"](62),v.file=null,t.abrupt("return");case 72:return e.fileType==a["L"].Image&&(null==v.file||null!=v.file&&v.file.size>e.size)&&(v.previewFileExt=null,v.file=e.file),v.size=null!==(b=null===(g=v.file)||void 0===g?void 0:g.size)&&void 0!==b?b:0,v.lastWriteTime=null!==(w=null===(x=v.file)||void 0===x?void 0:x.lastWriteTime)&&void 0!==w?w:Date.now(),t.next=77,this.setTaskHashAsync(e,v,"文件缩略图",o);case 77:if(t.sent){t.next=79;break}return t.abrupt("return");case 79:n.setPreviewImage(v,f),e.previewImage=v,this.setHashCache(e,n),t.next=85;break;case 84:e.previewImage=p;case 85:case"end":return t.stop()}}),t,this,[[44,51],[62,68]])})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"setTaskHashAsync",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,o){var a,s,c,l=this;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new bf,s=function(t,n){e.currentPosition=t,e.currentSize=n,e.ext="计算".concat(i,"hash(").concat(e.currentPercentage,"%)"),l.sendStateToWeb(e)},t.next=5,a.startAsync(n.file,{needHash:!0,needQuickHash:!0,onprogress:function(t){var e,n=t.index,r=t.length,i=o();i?s(n,r):null===(e=a)||void 0===e||e.cancelAsync()}});case 5:if(c=t.sent,a=null,null!=c){t.next=10;break}return t.abrupt("return",!1);case 10:if(!c.canceled){t.next=12;break}return t.abrupt("return",!1);case 12:if(c.success){t.next=14;break}throw c.errMsg;case 14:return s(e.currentSize,e.currentSize),n.quickHash=c.data.quickHash,n.hash=c.data.hash,t.abrupt("return",!0);case 18:case"end":return t.stop()}}),t)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"setTaskHash",value:function(t,e){t.hash!=e.mainFile.hash&&t.quickHash!=e.mainFile.quickHash&&(t.hash=e.mainFile.hash,t.quickHash=e.mainFile.quickHash,t.currentPosition=0,t.guid=null),t.status==Df.PreLoadFileMsg&&(t.ext="文件等待上传中",t.status=Df.Waitting)}},{key:"makeTaskLineViewPack",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.lineViewPack=null;case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateTaskDataError",value:function(t,e){t.status=Df.Errored,t.ext=e,this.sendStateToWeb(t)}},{key:"getHashCache",value:function(){return null}},{key:"getCloudNetDiskFileUploaderInfoAsync",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){var e,n,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.getCloudNetDiskFileUploaderInfoFromCache(),!((null===e||void 0===e?void 0:e.lineViewVer)>0)){t.next=3;break}return t.abrupt("return",e);case 3:return n=new Tf,n.lineViewVer=-1,this.setCloudNetDiskFileUploaderInfo(n),t.next=8,this.fetchPostCloudApi("netdiskfileuploaderinfobyweb",{body:"",timeout:1e4});case 8:if(i=t.sent,!i.success||null==i.data){t.next=12;break}return this.setCloudNetDiskFileUploaderInfo(i.data),t.abrupt("return",i.data);case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"fetchPostCloudApi",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(ht["fetchPostCloudApi"])(e,n);case 2:if(i=t.sent,!Object(l["k"])(i)){t.next=10;break}t.t0=i.code,t.next=t.t0===a["F"].WebUser_NotLogin?7:9;break;case 7:return this.$store.commit("setUserLogout"),t.abrupt("break",9);case 9:return t.abrupt("return",i);case 10:throw null!==i&&void 0!==i?i:"返回值无法解析";case 11:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"setCloudNetDiskFileUploaderInfo",value:function(t){this.cloudNetDiskFileUploaderInfoCache={item1:t,item2:Date.now()}}},{key:"getCloudNetDiskFileUploaderInfoFromCache",value:function(){var t=this.cloudNetDiskFileUploaderInfoCache;if(null!=t){var e=Date.now();if(Math.abs(1e3*(e-t.item2)*60)<5)return t.item1}return null}},{key:"getTaskFileType",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=null!==(n=null===(i=e.fileExt)||void 0===i?void 0:i.toLowerCase())&&void 0!==n?n:null,t.t0=o,t.next=".zip"===t.t0?4:".json"===t.t0?6:".mjs"===t.t0||".cjs"===t.t0||".js"===t.t0||".css"===t.t0||".txt"===t.t0||".xml"===t.t0||".ini"===t.t0||".config"===t.t0||".md"===t.t0?15:".html"===t.t0||".htm"===t.t0||".mht"===t.t0||".mhtml"===t.t0?17:".ai"===t.t0?19:".aep"===t.t0||".aepx"===t.t0||".aet"===t.t0?21:".eot"===t.t0||".otf"===t.t0||".fon"===t.t0||".font"===t.t0||".ttf"===t.t0||".ttc"===t.t0||".woff"===t.t0?23:".exe"===t.t0||".msi"===t.t0?25:".apk"===t.t0?27:".pkg"===t.t0?29:".dmg"===t.t0?31:".fig"===t.t0?33:".jsd"===t.t0?35:".xlsx"===t.t0||".xls"===t.t0?37:".png"===t.t0||".webp"===t.t0||".jpeg"===t.t0||".jpg"===t.t0||".gif"===t.t0||".bmp"===t.t0||".ico"===t.t0||".icns"===t.t0||".icon"===t.t0||".svg"===t.t0?39:".pdf"===t.t0?41:".psd"===t.t0||".psb"===t.t0?43:".ccx"===t.t0?45:".ppt"===t.t0||".pptx"===t.t0?47:".sketch"===t.t0?49:".sketchplugin"===t.t0?51:".url"===t.t0||".webloc"===t.t0?53:".docx"===t.t0||".doc"===t.t0?55:".xd"===t.t0?57:".xdx"===t.t0?59:".rar"===t.t0||".gz"===t.t0||".bz2"===t.t0||".7z"===t.t0||".xz"===t.t0?61:".mp3"===t.t0||".mp4"===t.t0||".avi"===t.t0||".rm"===t.t0||".rmvb"===t.t0||".aac"===t.t0||".wma"===t.t0||".flac"===t.t0||".wav"===t.t0||".m4a"===t.t0||".3gp"===t.t0||".m4v"===t.t0||".mkv"===t.t0||".mov"===t.t0||".webm"===t.t0||".weba"===t.t0?63:".rp"===t.t0?65:67;break;case 4:return e.fileType=a["L"].Zip,t.abrupt("break",69);case 6:return t.next=8,this.isLottieFileAsync(e);case 8:if(!t.sent){t.next=12;break}t.t1=a["L"].Lottie,t.next=13;break;case 12:t.t1=a["L"].Txt;case 13:return e.fileType=t.t1,t.abrupt("break",69);case 15:return e.fileType=a["L"].Txt,t.abrupt("break",69);case 17:return e.fileType=a["L"].Html,t.abrupt("break",69);case 19:return e.fileType=a["L"].AdobeIllustrator,t.abrupt("break",69);case 21:return e.fileType=a["L"].AfterEffects,t.abrupt("break",69);case 23:return e.fileType=a["L"].Font,t.abrupt("break",69);case 25:return e.fileType=a["L"].App,t.abrupt("break",69);case 27:return e.fileType=a["L"].AndroidApp,t.abrupt("break",69);case 29:return e.fileType=a["L"].Package,t.abrupt("break",69);case 31:return e.fileType=a["L"].Dmg,t.abrupt("break",69);case 33:return e.fileType=a["L"].Figma,t.abrupt("break",69);case 35:return e.fileType=a["L"].JsDesign,t.abrupt("break",69);case 37:return e.fileType=a["L"].Excel,t.abrupt("break",69);case 39:return e.fileType=a["L"].Image,t.abrupt("break",69);case 41:return e.fileType=a["L"].Pdf,t.abrupt("break",69);case 43:return e.fileType=a["L"].PhotoShop,t.abrupt("break",69);case 45:return e.fileType=a["L"].PhotoShopPlugin,t.abrupt("break",69);case 47:return e.fileType=a["L"].PPT,t.abrupt("break",69);case 49:return e.fileType=a["L"].Sketch,t.abrupt("break",69);case 51:return e.fileType=a["L"].SketchPlugin,t.abrupt("break",69);case 53:return e.fileType=a["L"].Url,t.abrupt("break",69);case 55:return e.fileType=a["L"].Word,t.abrupt("break",69);case 57:return e.fileType=a["L"].XD,t.abrupt("break",69);case 59:return e.fileType=a["L"].XDPlugin,t.abrupt("break",69);case 61:return e.fileType=a["L"].Zip,t.abrupt("break",69);case 63:return e.fileType=a["L"].Media,t.abrupt("break",69);case 65:return e.fileType=a["L"].AxureSourceFile,t.abrupt("break",69);case 67:return e.fileType=a["L"].Other,t.abrupt("break",69);case 69:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isLottieFileAsync",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,o,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mf(e);case 2:if(t.sent){t.next=4;break}return t.abrupt("return",!1);case 4:if(n=e.previewImage,!(null!=n&&n.size>0&&n.file)){t.next=7;break}return t.abrupt("return",!0);case 7:return e.previewImage=null,t.prev=8,e.ext="正在检测是否是Lottie文件",this.sendStateToWeb(e),t.next=13,Ec(e.file);case 13:return o=t.sent,a=new Af,a.file=o,a.size=o.size,a.lastWriteTime=null!==(i=o.lastModified)&&void 0!==i?i:Date.now(),e.previewImage=a,t.abrupt("return",null!=e.previewImage);case 22:return t.prev=22,t.t0=t["catch"](8),e.previewImage=null,t.abrupt("return",!1);case 26:case"end":return t.stop()}}),t,this,[[8,22]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateToSql",value:function(t){var e=this;if(null==t||0==t.length)return 0;var n=0;return t.forEach((function(t){t.id>0||(t.id=e._sql_auto_id++,n++)})),n}},{key:"updateTask",value:function(t){var e=this;if(null!=t.ids){var n=this.uploadList,r={};t.ids.forEach((function(t){r[t]=1}));var i=n.filter((function(t){return r[t.id]})),o=i.length;if(0!=o){var a;switch(t.ids=i.map((function(t){return t.id})),r={},t.ids.forEach((function(t){r[t]=1})),t.type){case Pf.Pause:a=Df.Paused;break;case Pf.ReStart:case Pf.Resume:a=Df.Waitting;break;default:return}this.updateStatusToSql(t.ids,a),i.forEach((function(t){t.status=a})),this.sendStateToWeb(i),a==Df.Waitting&&requestAnimationFrame((function(){e.startUploadTask()}))}}}},{key:"updateStatusToSql",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",0);case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"removeTask",value:function(t){var e=this.uploadList;switch(t.type){case Pf.Remove_Select:if(null==t.ids)return;var n={};t.ids.forEach((function(t){n[t]=1})),t.ids=e.filter((function(t){return n[t.id]})).map((function(t){return t.id}));break;case Pf.Remove_Completed:t.ids=e.filter((function(t){return t.status==Df.Completed})).map((function(t){return t.id}));break;case Pf.Remove_All:t.ids=e.map((function(t){return t.id}));break}if(null!=t.ids&&0!=t.ids.length){var r={};t.ids.forEach((function(t){t<1||r[t]||(r[t]=!0)}));for(var i=[],o=[],a=e.length-1;a>=0;a--){var s=e[a];if(r[s.id]){switch(s.status){case Df.Fetching:case Df.Paused:case Df.Errored:s.guid&&i.push(s.guid);break}s.status=Df.RemovedMark,e.splice(a,1),o.push(s.id)}}o.length>0&&this.emit(Ff.UploadRemove,o),i.length>0&&this.sendCancelGuidToCloud(i)}}},{key:"hasRunningTask",value:function(){return null!=this.uploadList.find((function(t){switch(t.status){case Df.Fetching:case Df.Paused:case Df.Errored:case Df.Waitting:case Df.PreLoadFileMsg:return!0}return!1}))}},{key:"sendCancelGuidToCloud",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=this,t.next=4,this.enpostdata({guids:e});case 4:return t.t1=t.sent,t.t2={body:t.t1,timeout:1e4},t.next=8,t.t0.fetchPostCloudApi.call(t.t0,"netdiskfilecancelbyweb",t.t2);case 8:t.next=12;break;case 10:t.prev=10,t.t3=t["catch"](0);case 12:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),_f=new jf;function Mf(t){return Lf.apply(this,arguments)}function Lf(){return Lf=Object(i["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e&&e.isJsonFile){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,pf("maybeIsLottieFileAsync",e.file);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),Lf.apply(this,arguments)}var Df={Fetching:0,Paused:1,Completed:2,Errored:3,Waitting:4,RemovedMark:5,PreLoadFileMsg:6,CompletedWithExist:7},Pf={Remove_Select:1,Remove_Completed:2,Remove_All:3,Resume:11,Pause:12,ReStart:13,Add:14},Nf=function(){function t(){Object(_["a"])(this,t),Object(M["a"])(this,"ids",void 0),Object(M["a"])(this,"folderId",void 0),Object(M["a"])(this,"files",void 0),Object(M["a"])(this,"type",void 0)}return Object(j["a"])(t,null,[{key:"send",value:function(){var e=Object(i["a"])(Object(r["a"])().mark((function e(n){var i,o,a,s,c;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n.type,o=n.folderId,a=n.ids,s=n.files,c=new t,c.type=i,c.folderId=null!==o&&void 0!==o?o:0,c.ids=null!==a&&void 0!==a?a:null,c.files=null!==s&&void 0!==s?s:null,_f.runTask(c),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()}]),t}(),Ef=function(){function t(){Object(_["a"])(this,t),Object(M["a"])(this,"uploading",!1),Object(M["a"])(this,"uploadItems",[]),Object(M["a"])(this,"_uploadItemsObj",{})}return Object(j["a"])(t,[{key:"length",get:function(){return this.uploadItems.length}},{key:"clear",value:function(){this.uploadItems.splice(0),delete this._uploadItemsObj,this._uploadItemsObj={}}},{key:"add",value:function(t){if(Object(l["k"])(t)&&t.id>0){var e=new Rf;Object.keys(e).forEach((function(n){e[n]=t[n]})),this.uploadItems.push(e),this._uploadItemsObj[t.id]=e,this._sort()}}},{key:"update",value:function(t){if(Object(l["k"])(t)&&t.id>0){var e=this._uploadItemsObj[t.id];if(!e)return this.add(t);var n=t.status!==e.status;Object.keys(e).forEach((function(n){e[n]=t[n]})),n&&this._sort()}}},{key:"remove",value:function(t){var e=this._uploadItemsObj[t];if(e){delete this._uploadItemsObj[t];var n=this.uploadItems.findIndex((function(e){return e.id===t}));-1!==n&&this.uploadItems.splice(n,1)}}},{key:"removeCompletedItems",value:function(){var t=this,e=[];this.uploadItems.forEach((function(t,n){switch(t.status){case Df.CompletedWithExist:case Df.Completed:case Df.RemovedMark:e.unshift(n);break}})),e.length>0&&e.forEach((function(e){var n=t.uploadItems.splice(e,1)[0];n&&delete t._uploadItemsObj[n.id]}))}},{key:"_sort",value:function(){var t=function(t,e){var n=t.id-e.id;return 0===n?0:n>0?1:-1};this.uploadItems.sort((function(e,n){return t(e,n)}))}}]),t}(),Rf=Object(j["a"])((function t(){Object(_["a"])(this,t),Object(M["a"])(this,"id",0),Object(M["a"])(this,"status",Df.Waitting),Object(M["a"])(this,"fileName",null),Object(M["a"])(this,"fileType",a["L"].Other),Object(M["a"])(this,"ext",null),Object(M["a"])(this,"currentPercentage",0),Object(M["a"])(this,"size",0),Object(M["a"])(this,"folderId",0),Object(M["a"])(this,"quickHash",""),Object(M["a"])(this,"hash","")})),Vf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("div",{staticClass:"icon-netdiskfile",class:t.fileTypeCls}),e("div",{staticClass:"summary"},[e("div",{staticClass:"item-name"},[e("a",{attrs:{href:"javascript:;",title:t.fileName}},[t._v(t._s(t.fileName))])]),e("div",{staticClass:"item-info"},[e("div",{staticClass:"item-progress"},[t._v(t._s(t.progressStr))]),e("div",{staticClass:"item-state",class:t.statusCss,attrs:{title:t.statusText}},[t.percentageVisible?e("div",{staticClass:"percentage"},[e("p",{style:{width:t.uploadPercentageCssWidth}})]):e("div",{staticClass:"state"},[t._v(t._s(t.statusText))])]),e("div",{staticClass:"btns"},[t.item.status===t.EnumNetDiskFileUploadStatus.Fetching||t.item.status===t.EnumNetDiskFileUploadStatus.PreLoadFileMsg?e("div",{staticClass:"fetching",attrs:{title:"点击暂停"},on:{click:function(e){return t.clickChangeStatus(t.EnumNetDiskFileUploadStatus.Paused)}}}):t.item.status===t.EnumNetDiskFileUploadStatus.Waitting?e("div",{staticClass:"waitting",attrs:{title:"点击暂停"},on:{click:function(e){return t.clickChangeStatus(t.EnumNetDiskFileUploadStatus.Paused)}}}):t.item.status===t.EnumNetDiskFileUploadStatus.Paused?e("div",{staticClass:"paused",attrs:{title:"点击继续上传"},on:{click:function(e){return t.clickChangeStatus(t.EnumNetDiskFileUploadStatus.Waitting)}}}):t.item.status===t.EnumNetDiskFileUploadStatus.Errored?e("div",{staticClass:"download-repeat",attrs:{title:"重新上传"},on:{click:t.clickUploadFile}}):t._e(),e("div",{staticClass:"remove",attrs:{title:"删除该任务"},on:{click:t.clickTaskRemove}})])])])])},Bf=[],Hf={methods:{clickUploadFile:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.item,n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,Nf.send({type:Pf.ReStart,ids:[n.id]});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](3),t.showTextTip(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})))()},clickTaskRemove:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.item,n){e.next=3;break}return e.abrupt("return");case 3:e.t0=n.status,e.next=e.t0===Df.Fetching?6:e.t0===Df.Paused||e.t0===Df.Waitting?8:11;break;case 6:return i="任务「".concat(n.id,"」(").concat(t.fileName,")正在上传中,是否确认取消并删除该任务?"),e.abrupt("break",11);case 8:return o=t.uploadPercentage,o>0&&(i="任务「".concat(n.id,"」(").concat(t.fileName,")已上传").concat(t.uploadPercentageCssWidth,",是否确认取消并删除该任务?")),e.abrupt("break",11);case 11:if(!i){e.next=16;break}return e.next=14,t.confirm({title:"删除确认",text:i,noText:"我再想想"});case 14:if(e.sent){e.next=16;break}return e.abrupt("return");case 16:return e.prev=16,e.next=19,Nf.send({type:Pf.Remove_Select,ids:[n.id]});case 19:e.next=24;break;case 21:e.prev=21,e.t1=e["catch"](16),t.showTextTip(e.t1);case 24:case"end":return e.stop()}}),e,null,[[16,21]])})))()},clickChangeStatus:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.item,i){n.next=3;break}return n.abrupt("return");case 3:n.t0=t,n.next=n.t0===Df.Waitting?6:n.t0===Df.Paused?15:24;break;case 6:return n.prev=6,n.next=9,Nf.send({type:Pf.Resume,ids:[i.id]});case 9:n.next=14;break;case 11:n.prev=11,n.t1=n["catch"](6),e.showTextTip(n.t1);case 14:return n.abrupt("break",24);case 15:return n.prev=15,n.next=18,Nf.send({type:Pf.Pause,ids:[i.id]});case 18:n.next=23;break;case 20:n.prev=20,n.t2=n["catch"](15),e.showTextTip(n.t2);case 23:return n.abrupt("break",24);case 24:case"end":return n.stop()}}),n,null,[[6,11],[15,20]])})))()}},computed:{percentageVisible:function(){var t=this.item;return t.status===Df.Paused||t.status===Df.Fetching},fileTypeCls:function(){return a["L"].getName(this.item.fileType,a["M"].Normal)},fileName:function(){var t=this.item.fileName;return null!==t&&void 0!==t?t:""},progressStr:function(){return this.sizeStr},sizeStr:function(){return Object(c["zb"])(this.item.size)},statusCss:function(){var t=[],e=this.status;return e===Df.Errored&&t.push("error"),e!==Df.Completed&&e!==Df.CompletedWithExist||t.push("completed"),t},statusTitle:function(){return this.item.status===Df.Errored?this.statusText:null},statusText:function(){var t=this.item;if(!t)return"";switch(t.status){case Df.Errored:var e;return null!==(e=t.ext)&&void 0!==e?e:"文件上传失败了";case Df.PreLoadFileMsg:return t.ext;case Df.Fetching:return"文件上传中(".concat(this.uploadPercentageCssWidth,")");case Df.Paused:return"已暂停上传(".concat(this.uploadPercentageCssWidth,")");case Df.CompletedWithExist:var n;return null!==(n=t.ext)&&void 0!==n?n:"文件已存在,无需更新";case Df.Completed:var r;return null!==(r=t.ext)&&void 0!==r?r:"文件上传成功";case Df.Waitting:return"文件等待上传中"}return""},uploadPercentageCssWidth:function(){return this.uploadPercentage.toFixed(2)+"%"},uploadPercentage:function(){var t=this.item;return t?t.currentPercentage:0},status:function(){var t,e;return null!==(t=null===(e=this.item)||void 0===e?void 0:e.status)&&void 0!==t?t:Df.RemovedMark}},props:{item:Object},data:function(){return{EnumNetDiskFileUploadStatus:Df}}},Uf=Hf,$f=(n("073b"),Object(Dr["a"])(Uf,Vf,Bf,!1,null,"2ec50ae4",null)),Gf=$f.exports,Wf={components:{FileUploadItem:Gf},methods:{onNetDiskFileUploadInit:function(t){if(Object(l["i"])(t)){var e=this.uploadData;e.clear(),t.forEach((function(t){!Object(l["k"])(t)||t.id<1||e.update(t)}))}},onNetDiskFileUploadRemove:function(t){var e,n=this;e=Object(l["i"])(t)?t:[t],e.forEach((function(t){if(t>0){var e=n.uploadData;e&&e.remove(t)}}))},onNetDiskFileUploadUpdate:function(t){var e,n=this;e=Object(l["i"])(t)?t:[t],e.forEach((function(t){if(Object(l["k"])(t)&&!(t.id<1)){var e=n.uploadData;e.update(t)}})),this.onNetDiskFileUploadUpdate2(t)},onNetDiskFileUploadUpdate2:function(t){if(Object(l["k"])(t)){var e=this.maxShowLength,n=this.uploadItems;if(!(n.length<=e)){var r=n.find((function(t){return t.status===Df.Fetching}));if(r&&r.id!==t.id);else{var i=n.findIndex((function(e){return e.id===t.id}));if(-1===i)return;var o=(i-1)*this.itemHeight;this.scrollTo(o)}}}},sendImportData:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,a,s,c,u,d,h,f;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.cloudSubFiles,o={},a={},t.forEach((function(t){var e=t.name;o[e.toLowerCase()]=1})),i.forEach((function(t){if(t){var e=t.fileName+t.fileExt,n=e.toLowerCase();o[n]&&(delete o[n],a[e]=1)}})),n.prev=5,s=Object.keys(o),!(s.length>0)){n.next=12;break}return n.next=10,e.fetchPostCloudApi("netdiskfilecheckexistsbyweb",{timeout:1e4,body:{folderId:e.cloudCurrentFolderId,fileNames:s}});case 10:c=n.sent,c.success&&(c=c.data,Object(l["i"])(c)&&c.forEach((function(t){a[t.fileName+t.fileExt]=1})));case 12:if(a=Object.keys(a),u={},a.forEach((function(t){u[t.toLowerCase()]=1})),d=a.length,!(d>0)){n.next=29;break}return h=8,f=d>h,f&&a.splice(h),n.next=22,e.confirm({title:"覆盖提示",text:"当前目录已存在「".concat(a.join("、")).concat(f?"、...」等".concat(d,"个"):"」","同名文件,是否").concat(d>1?"全部":"","覆盖?"),noText:1===d?"跳过":"跳过重复文件",yesText:"覆盖",showCancel:!0});case 22:n.t0=n.sent,n.next=!0===n.t0?25:!1===n.t0?26:"cancel"===n.t0?28:29;break;case 25:return n.abrupt("break",29);case 26:return t=t.filter((function(t){var e;return!u[null===(e=t.name)||void 0===e?void 0:e.toLowerCase()]})),n.abrupt("break",29);case 28:return n.abrupt("return");case 29:return n.next=31,Nf.send({files:t,folderId:e.cloudCurrentFolderId,type:Pf.Add});case 31:n.next=37;break;case 33:n.prev=33,n.t1=n["catch"](5),e.showTextTip(n.t1);case 37:case"end":return n.stop()}}),n,null,[[5,33]])})))()},showOpenFileDialog:function(){return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},clickAddFiles:function(t){var e;null===(e=t.target)||void 0===e||null===(e=e.querySelector("input[type=file]"))||void 0===e||e.click()},onInputFileChange:function(t){var e=t.target,n=e.files;if(0!==n.length){n=Object(u["a"])(n);try{e.value=""}catch(r){}this.sendImportData(n)}},clickRemoveCompleted:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nf.send({type:Pf.Remove_Completed});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),t.showTextTip(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},clickRemoveAll:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.uploadItemsLength){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.confirm({title:"删除确认",text:"将删除列表中所有的上传任务",noText:"我再想想"});case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,Nf.send({type:Pf.Remove_All});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](6),t.showTextTip(e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})))()},clickCloseBox:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!_f.hasRunningTask()){e.next=8;break}return e.next=3,t.confirm({text:"文件正在上传中，关闭上传对话框将清理所有待上传的文件,是否确认？"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:_f.runTask({type:Pf.Remove_All}),e.next=9;break;case 8:_f.runTask({type:Pf.Remove_Completed});case 9:n=t.filebox,n.visible=!1;case 11:case"end":return e.stop()}}),e)})))()},onBoxScroll:function(t){this.scrollTop=t.target.scrollTop},resetBox:function(){if(this.visible){var t=this.$refs.files;t&&this.onBoxScroll({target:t})}},add:function(t){var e;null===(e=this.uploadData)||void 0===e||e.add(t),this.scrollToBottom()},scrollToTop:function(){this.scrollTo(0)},scrollToBottom:function(){this.scrollTo(1e5)},scrollTo:function(t){var e=this;this.$nextTick((function(){var n=e.$refs.files;n&&(n.scrollTop=t)}))},bingDragEvent:function(t){var e=this,n=document.documentElement;t?(n.addEventListener("dragover",this.dragover),n.addEventListener("drop",this.dragdrop),_f.on(Ff.TextTip,(function(t){e.showTextTip(t)})),_f.on(Ff.UploadUpdate,(function(t){e.onNetDiskFileUploadUpdate(t)})),_f.on(Ff.UploadRemove,(function(t){e.onNetDiskFileUploadRemove(t)})),_f.on(Ff.WebUserNotLogin,(function(){e.$store.commit("setUserLogout")})),_f.on(Ff.WebFileChanged,(function(t){e.$emit("onFileChanged",{files:[t.data],folderUpdateTimes:t.folderUpdateTimes})})),window.addEventListener("beforeunload",this.onBeforeunload)):(n.removeEventListener("dragover",this.dragover),n.removeEventListener("drop",this.dragdrop),_f.off(Ff.TextTip),_f.off(Ff.UploadUpdate),_f.off(Ff.UploadRemove),_f.off(Ff.WebUserNotLogin),_f.off(Ff.WebFileChanged),window.removeEventListener("beforeunload",this.onBeforeunload))},onBeforeunload:function(t){if(_f.hasRunningTask()){t.preventDefault();var e="文件正在上传中，您确定要离开当前页面？";return t.returnValue=e,e}},dragover:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy";var e=this.dropTip;e.dragging||(e.dragging=!0,e.visible=!0,cancelAnimationFrame(e.handler)),clearTimeout(e.handler2),e.handler2=setTimeout((function(){e.dragging=!1,e.visible=!1}),200)},dragdrop:function(t){t.preventDefault();var e=this.dropTip;e.dragging=!1,cancelAnimationFrame(e.handler),clearTimeout(e.handler2),e.handler=requestAnimationFrame((function(){e.visible=!1})),this.onDrag(t)},onDrag:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,a,s,c,l,u;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.dataTransfer.items,i&&!(i.length<1)){n.next=3;break}return n.abrupt("return");case 3:o=[],a=[],s=0;case 6:if(!(s<i.length)){n.next=19;break}return c=i[s],n.next=10,e.isDropItemFile(c);case 10:if(!n.sent){n.next=14;break}o.push(c.getAsFile()),n.next=16;break;case 14:u=null===(l=c.getAsFile())||void 0===l?void 0:l.name,u&&a.push(u);case 16:s++,n.next=6;break;case 19:if(!(a.length>0)){n.next=22;break}return n.next=22,e.alert({text:"不能直接上传文件夹「".concat(a.join("、"),"」,如需上传请先打包,")});case 22:if(!(o.length<1)){n.next=24;break}return n.abrupt("return");case 24:e.sendImportData(o);case 25:case"end":return n.stop()}}),n)})))()},isDropItemFile:function(t){return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("file"===t.kind){e.next=2;break}return e.abrupt("return",!1);case 2:if(!Object(l["j"])(t.type)){e.next=4;break}return e.abrupt("return",!0);case 4:if("function"!==typeof t.webkitGetAsEntry){e.next=7;break}return n=t.webkitGetAsEntry(),e.abrupt("return",n.isFile);case 7:if(e.prev=7,i=t.getAsFile(),i){e.next=11;break}return e.abrupt("return",!1);case 11:if(o=i.size,0!==o){e.next=14;break}return e.abrupt("return",!1);case 14:return e.next=16,new Promise((function(t){var e=new FileReader;e.addEventListener("load",(function(){t(!0)}),!1),e.addEventListener("error",(function(){t(!1)}),!1),e.readAsDataURL(i.slice(0,Math.min(5,o)))}));case 16:return e.abrupt("return",e.sent);case 19:return e.prev=19,e.t0=e["catch"](7),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[7,19]])})))()}},computed:{uploading:function(){return this.uploadingCount>0},uploadingCount:function(){return this.uploadItems.filter((function(t){switch(t.status){case Df.PreLoadFileMsg:case Df.Fetching:case Df.Waitting:return!0;default:return!1}})).length},dragTitle:function(){var t=this.uploadItems;if(!t)return"-";if(this.uploading)return"".concat(this.uploadingCount,"个文件上传中，拖拽文件到此处可继续添加");var e=t.length;return e>0?"已添加".concat(e,"个文件，拖拽文件到此处可继续添加"):"拖拽文件到此处上传到当前文件夹"},visible:function(){return this.filebox.visible&&null!=this.uploadData},hasFile:function(){var t=this.uploadItems;return!!t&&t.length>0},uploadData:function(){var t=this.cloudKey;if(!t)return null;var e=this.uploadDatas[t];return e||(e=new Ef,this.$set(this.uploadDatas,t,e)),e},uploadItems:function(){var t=this.uploadData;return t?t.uploadItems:[]},renderList:function(){var t=this.uploadItems,e=this.renderListStart;return t.slice(e,e+this.renderListCount)},renderListCssPaddingTop:function(){return this.renderListStart*this.itemHeight},renderListStart:function(){var t=Math.floor(this.scrollTop/this.itemHeight);return t},renderListCount:function(){var t=Math.ceil((this.boxHeight+this.scrollTop%this.itemHeight)/this.itemHeight);return t=Math.min(t,this.uploadItems.length-this.renderListStart),t},boxHeight:function(){var t=this.maxShowLength,e=this.uploadItems,n=this.itemHeight,r=e.length;return r>t&&(r=t),n*r},boxRealHeight:function(){var t=this.uploadItems,e=this.itemHeight;return t.length*e},uploadDatas:function(){return this.$store.state.netdiskFileUploadDatas},uploadItemsLength:function(){return this.uploadItems.length}},watch:{uploadItemsLength:function(t,e){t>e&&this.scrollToBottom()},hasFile:function(){var t=this;this.$nextTick((function(){t.resetBox()}))},visible:function(t){var e,n=this;(this.bingDragEvent(t),t)&&(null===(e=this.uploadData)||void 0===e||e.removeCompletedItems());this.$nextTick((function(){n.resetBox()}))},scrollTop:function(){var t=this;this.scrolling=!0,clearTimeout(this.handle_scrolling),this.handle_scrolling=setTimeout((function(){t.scrolling=!1}),120)}},data:function(){return{itemHeight:50,maxShowLength:3,scrollTop:0,handle_scrolling:0,scrolling:!1,dropTip:{visible:!1,handler:null,handler2:null,dragging:!1}}},props:{filebox:Object},beforeDestroy:function(){clearTimeout(this.handle_scrolling),this.bingDragEvent(!1)},created:function(){this.bingDragEvent(this.visible),this.onNetDiskFileUploadInit(_f.uploadList)}},zf=Wf,Yf=(n("799c"),Object(Dr["a"])(zf,af,sf,!1,null,"a0e89696",null)),Xf=Yf.exports,Kf={components:{LinkEdit:of,FileUpload:Xf},methods:{onFileChanged:function(t){this.$store.commit("setFolderSubFile",t)},clickBeforeCheck:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,s,c;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.cloudVersion,o=e.cloudCurrentFolderId,s=e.cloudIsLogin,c=e.userFolderSpecifyMemberAuthority,!$r.notSupportNetDiskFileWebUpload(i)){n.next=4;break}return e.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(i,"),请先升级私有云部署包")),n.abrupt("return");case 4:if(o>0){n.next=7;break}return e.showTextTip("不能".concat(t,"到根目录,请进入子文件夹操作")),n.abrupt("return");case 7:if(s){n.next=13;break}return n.next=10,e.confirm({text:"需要登录才能".concat(t),yesText:"前往登录"});case 10:if(!n.sent){n.next=12;break}e.goCloudLogin();case 12:return n.abrupt("return");case 13:n.t0=c,n.next=n.t0===a["w"].Admin||n.t0===a["w"].ParentOwner||n.t0===a["w"].Owner||n.t0===a["w"].ReadWrite?16:17;break;case 16:return n.abrupt("return",!0);case 17:return e.showTextTip("您没有在当前文件夹下".concat(t,"的权限")),n.abrupt("return",!1);case 19:case"end":return n.stop()}}),n)})))()},clickOpenNetDiskUploadBox:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.clickBeforeCheck("上传文件");case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:n=t.filebox,i=t.cloudCurrentFolderId,n.parentId=i,n.visible=!0;case 7:case"end":return e.stop()}}),e)})))()},clickAddNetDiskLink:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.clickBeforeCheck("添加链接");case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:n=t.linkbox,i=t.cloudCurrentFolderId,n.data={id:0,link:"",name:"",parentId:i},n.visible=!0;case 7:case"end":return e.stop()}}),e)})))()}},computed:{cannotUseNetDisk:function(){var t=this.cloudVersion,e=this.cloudCurrentFolderId;return!!$r.notSupportNetDiskFileWebUpload(t)||!(e>0)},netdiskUploader:function(){return this.$store.state.netdiskUploader},linkbox:function(){return this.netdiskUploader.linkbox},filebox:function(){return this.netdiskUploader.filebox}}},qf=Kf,Jf=(n("6828"),Object(Dr["a"])(qf,Wh,zh,!1,null,"734961ba",null)),Qf=Jf.exports,Zf=function(){var t=this,e=t._self._c;return t.supportInteraction?e("div",{staticClass:"go-interaction-viewer"},[t.inCloudViewerMode?e("div",{staticClass:"btn-go-interaction",attrs:{title:"在新窗口预览原型"},on:{click:t.clickGoWebInteraction}}):t._e(),e("div",{staticClass:"btn-go-interaction-mobile",class:{on:t.menuVisible},attrs:{title:"在手机上预览原型"},on:{click:t.clickShowMenu}}),t.menuVisible?e("div",{staticClass:"box",class:{"fix-right":t.fixRight}},[e("div",{staticClass:"img"},[e("div",{staticClass:"bor-top"}),e("div",{staticClass:"bor-bottom"}),t.qrcodeImage?e("img",{attrs:{src:t.qrcodeImage}}):t._e()]),e("div",{staticClass:"text"},[t._v(" 使用"),e("a",{attrs:{href:"https://www.marklion.cn/mobileapp.shtml?invoke=MarkLion.Output&ver=".concat(t.cloudVersion),target:"_blank"}},[t._v("标记狮APP")]),t._v("扫描二维码预览 "),e("div",{staticClass:"btn-question",attrs:{title:"了解更多"},on:{click:t.clickInteractionViewLink}})])]):t._e()]):t._e()},tm=[],em=function(){function t(t){this.mode=n.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var i=[],o=this.data.charCodeAt(e);o>65536?(i[0]=240|(1835008&o)>>>18,i[1]=128|(258048&o)>>>12,i[2]=128|(4032&o)>>>6,i[3]=128|63&o):o>2048?(i[0]=224|(61440&o)>>>12,i[1]=128|(4032&o)>>>6,i[2]=128|63&o):o>128?(i[0]=192|(1984&o)>>>6,i[1]=128|63&o):i[0]=o,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[r][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(this.modules[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=o.getLostPoint(this);(0==n||t>r)&&(t=r,e=n)}return e},createMovieClip:function(t,e,n){var r=t.createEmptyMovieClip(e,n),i=1;this.make();for(var o=0;o<this.modules.length;o++)for(var a=o*i,s=0;s<this.modules[o].length;s++){var c=s*i,l=this.modules[o][s];l&&(r.beginFill(0,100),r.moveTo(c,a),r.lineTo(c+i,a),r.lineTo(c+i,a+i),r.lineTo(c,a+i),r.endFill())}return r},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=o.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],i=t[n];if(null==this.modules[r][i])for(var a=-2;a<=2;a++)for(var s=-2;s<=2;s++)this.modules[r+a][i+s]=-2==a||2==a||-2==s||2==s||0==a&&0==s}},setupTypeNumber:function(t){for(var e=o.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var i=0;i<18;i++){var a=!t&&1==(e>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=a}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=o.getBCHTypeInfo(n),i=0;i<15;i++){var a=!t&&1==(r>>i&1);i<6?this.modules[i][8]=a:i<8?this.modules[i+1][8]=a:this.modules[this.moduleCount-15+i][8]=a}for(var s=0;s<15;s++){var c=!t&&1==(r>>s&1);s<8?this.modules[8][this.moduleCount-s-1]=c:s<9?this.modules[8][15-s-1+1]=c:this.modules[8][15-s-1]=c}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,r=this.moduleCount-1,i=7,a=0,s=this.moduleCount-1;s>0;s-=2){6==s&&s--;while(1){for(var c=0;c<2;c++)if(null==this.modules[r][s-c]){var l=!1;a<t.length&&(l=1==(t[a]>>>i&1));var u=o.getMask(e,r,s-c);u&&(l=!l),this.modules[r][s-c]=l,i--,-1==i&&(a++,i=7)}if(r+=n,r<0||this.moduleCount<=r){r-=n,n=-n;break}}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,n,r){for(var i=d.getRSBlocks(t,n),a=new h,s=0;s<r.length;s++){var c=r[s];a.put(c.mode,4),a.put(c.getLength(),o.getLengthInBits(c.mode,t)),c.write(a)}for(var l=0,u=0;u<i.length;u++)l+=i[u].dataCount;if(a.getLengthInBits()>8*l)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*l+")");a.getLengthInBits()+4<=8*l&&a.put(0,4);while(a.getLengthInBits()%8!=0)a.putBit(!1);while(1){if(a.getLengthInBits()>=8*l)break;if(a.put(e.PAD0,8),a.getLengthInBits()>=8*l)break;a.put(e.PAD1,8)}return e.createBytes(a,i)},e.createBytes=function(t,e){for(var n=0,r=0,i=0,a=new Array(e.length),s=new Array(e.length),c=0;c<e.length;c++){var l=e[c].dataCount,d=e[c].totalCount-l;r=Math.max(r,l),i=Math.max(i,d),a[c]=new Array(l);for(var h=0;h<a[c].length;h++)a[c][h]=255&t.buffer[h+n];n+=l;var f=o.getErrorCorrectPolynomial(d),m=new u(a[c],f.getLength()-1),p=m.mod(f);s[c]=new Array(f.getLength()-1);for(var v=0;v<s[c].length;v++){var b=v+p.getLength()-s[c].length;s[c][v]=b>=0?p.get(b):0}}for(var g=0,w=0;w<e.length;w++)g+=e[w].totalCount;for(var x=new Array(g),y=0,k=0;k<r;k++)for(var C=0;C<e.length;C++)k<a[C].length&&(x[y++]=a[C][k]);for(var S=0;S<i;S++)for(var T=0;T<e.length;T++)S<s[T].length&&(x[y++]=s[T][S]);return x};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={L:1,M:0,Q:3,H:2},i={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(o.getBCHDigit(e)-o.getBCHDigit(o.G15)>=0)e^=o.G15<<o.getBCHDigit(e)-o.getBCHDigit(o.G15);return(t<<10|e)^o.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(o.getBCHDigit(e)-o.getBCHDigit(o.G18)>=0)e^=o.G18<<o.getBCHDigit(e)-o.getBCHDigit(o.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return o.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case i.PATTERN000:return(e+n)%2==0;case i.PATTERN001:return e%2==0;case i.PATTERN010:return n%3==0;case i.PATTERN011:return(e+n)%3==0;case i.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case i.PATTERN101:return e*n%2+e*n%3==0;case i.PATTERN110:return(e*n%2+e*n%3)%2==0;case i.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new u([1],0),n=0;n<t;n++)e=e.multiply(new u([1,a.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var o=0,a=t.isDark(r,i),s=-1;s<=1;s++)if(!(r+s<0||e<=r+s))for(var c=-1;c<=1;c++)i+c<0||e<=i+c||0==s&&0==c||a==t.isDark(r+s,i+c)&&o++;o>5&&(n+=3+o-5)}for(var l=0;l<e-1;l++)for(var u=0;u<e-1;u++){var d=0;t.isDark(l,u)&&d++,t.isDark(l+1,u)&&d++,t.isDark(l,u+1)&&d++,t.isDark(l+1,u+1)&&d++,0!=d&&4!=d||(n+=3)}for(var h=0;h<e;h++)for(var f=0;f<e-6;f++)t.isDark(h,f)&&!t.isDark(h,f+1)&&t.isDark(h,f+2)&&t.isDark(h,f+3)&&t.isDark(h,f+4)&&!t.isDark(h,f+5)&&t.isDark(h,f+6)&&(n+=40);for(var m=0;m<e;m++)for(var p=0;p<e-6;p++)t.isDark(p,m)&&!t.isDark(p+1,m)&&t.isDark(p+2,m)&&t.isDark(p+3,m)&&t.isDark(p+4,m)&&!t.isDark(p+5,m)&&t.isDark(p+6,m)&&(n+=40);for(var v=0,b=0;b<e;b++)for(var g=0;g<e;g++)t.isDark(g,b)&&v++;var w=Math.abs(100*v/e/e-50)/5;return n+=10*w,n}},a={glog:function(t){if(t<1)throw new Error("glog("+t+")");return a.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return a.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},s=0;s<8;s++)a.EXP_TABLE[s]=1<<s;for(var c=8;c<256;c++)a.EXP_TABLE[c]=a.EXP_TABLE[c-4]^a.EXP_TABLE[c-5]^a.EXP_TABLE[c-6]^a.EXP_TABLE[c-8];for(var l=0;l<255;l++)a.LOG_TABLE[a.EXP_TABLE[l]]=l;function u(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var n=0;while(n<t.length&&0==t[n])n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}function d(t,e){this.totalCount=t,this.dataCount=e}function h(){this.buffer=[],this.length=0}u.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=a.gexp(a.glog(this.get(n))+a.glog(t.get(r)));return new u(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=a.glog(this.get(0))-a.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var i=0;i<t.getLength();i++)n[i]^=a.gexp(a.glog(t.get(i))+e);return new u(n,0).mod(t)}},d.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],d.getRSBlocks=function(t,e){var n=d.getRsBlockTable(t,e);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=[],o=0;o<r;o++)for(var a=n[3*o+0],s=n[3*o+1],c=n[3*o+2],l=0;l<a;l++)i.push(new d(s,c));return i},d.getRsBlockTable=function(t,e){switch(e){case r.L:return d.RS_BLOCK_TABLE[4*(t-1)+0];case r.M:return d.RS_BLOCK_TABLE[4*(t-1)+1];case r.Q:return d.RS_BLOCK_TABLE[4*(t-1)+2];case r.H:return d.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},h.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var f=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function m(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var n=e.toString().match(/android ([0-9](?:\.[0-9])?)/i);n&&n[1]&&(t=parseFloat(n[1]))}return t}var p=function(){function t(){return this._elCanvas.toDataURL("image/png")}if(this._android&&this._android<=2.1){var e=1/window.devicePixelRatio,n=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,r,i,o,a,s,c,l){if("nodeName"in t&&/img/i.test(t.nodeName))for(var u=arguments.length-1;u>=1;u--)arguments[u]=arguments[u]*e;else"undefined"==typeof l&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);n.apply(this,arguments)}}var r=function(t){this._bIsPainted=!1,this._android=m(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};return r.prototype.draw=function(t){var e=this._oContext,n=this._htOption,r=3,i=t.getModuleCount(),o=(n.width-2*r)/i,a=(n.height-2*r)/i,s=Math.round(o),c=Math.round(a);this.clear(),e.fillStyle=n.colorLight,e.fillRect(0,0,n.width,r),e.fillRect(0,n.height-r,n.width,r),e.fillRect(0,0,r,n.height),e.fillRect(n.width-r,0,r,n.height);for(var l=0;l<i;l++)for(var u=0;u<i;u++){var d=t.isDark(l,u),h=u*o+r,f=l*a+r;e.strokeStyle=d?n.colorDark:n.colorLight,e.lineWidth=1,e.fillStyle=d?n.colorDark:n.colorLight,e.fillRect(h,f,o,a),e.strokeRect(Math.floor(h)+.5,Math.floor(f)+.5,s,c),e.strokeRect(Math.ceil(h)-.5,Math.ceil(f)-.5,s,c)}var m=n.icon;if(m&&m.complete){var p=m.naturalWidth||m.width,v=p,b=.1578*n.width,g=b;e.drawImage(m,0,0,p,v,(n.width-b)/2,(n.height-g)/2,b,g)}this._bIsPainted=!0},r.prototype.makeImage=function(){if(this._bIsPainted)return t.call(this)},r.prototype.isPainted=function(){return this._bIsPainted},r.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},r.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},r}.call(window);function v(t,e){for(var n=1,i=b(t),o=0,a=f.length;o<=a;o++){var s=0;switch(e){case r.L:s=f[o][0];break;case r.M:s=f[o][1];break;case r.Q:s=f[o][2];break;case r.H:s=f[o][3];break}if(i<=s)break;n++}if(n>f.length)throw new Error("Too long data");return n}function b(t){var e=encodeURI(t).toString().replace(/%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}var g=function(t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:r.H,icon:null},"string"===typeof t&&(t={text:t}),t)for(var e in t)this._htOption[e]=t[e];this._android=m(),this._oQRCode=null,this._oDrawing=new p(this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)};return g.prototype.makeCode=function(t){this._oQRCode=new e(v(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode);var n=this.makeImage();return this._oDrawing.clear(),n},g.prototype.makeImage=function(){if("function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3))return this._oDrawing.makeImage()},g.prototype.clear=function(){this._oDrawing.clear()},g.CorrectLevel=r,g}(),nm=new em({width:332,height:332,colorDark:"#000000",colorLight:"#ffffff",correctLevel:em.CorrectLevel.Q}),rm=function(t){try{return nm.makeCode(t)}catch(e){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAMFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABaPxwLAAAAD3RSTlMAu0R3Ee4iZjPdmcxViKrphPWWAAARlUlEQVR42u2dZ4gzRRjHx9ya5M6cd2svaNa1F0y82FtiBRW7WEDJ2kAseFYQ0Yv9g6gnCoIIsQsiREVB8ENEsYLeiVhRFAvipzN3xpic+nd2Zqdsibcppyj5w5tstsz+duaZ2WfmmbmXjDTSSCONNNJII43Uu0rk39Lr/Ou6Zyok/TSJq8T95iZDAqg9YLlfRbQz9T9CRw25EQAAvh8SQBnstlk8mAKc0JNi1XRVbog96f3ZF2CRoSgNLPIEZynEo3znuPlRwZU5n4AnmTlj+NEZJsAkmiX2pG1CcljmO6fg6WcJsEI8TdDtfgDStq2VrG0Lqx9Hiz9Xy91e6QZAD8sLkO8HYAPoUpffh3n3ayP3a+x0JwiQvHo3fvUy8XQlzbJhAtQwyznoYxklUc52ZQyrNNfcZ2V8CqBIs2mIAEa54XG8YHJtLoq6Q5Sm8LPYrOOMYQKk6KNlLGJASdpGJEASyEuAhG3bVj9GmJRGOI5pskHj+jEoCdv4lZ+6k/uZw/OyFvpFrx9Ic7Dovf44Bg3T3BoNVQRFzIsbViiAvM/40ACUCdTwTdHN4jH3QxX1ogfQZjiPCuLhAmxMTSCJ5tFlCaCK2vEAVhiAqA9Vz1rBvrcdFKBGr59EawIBALrdEBstdl5e/GyWhvguoAVcBTB/XwhgXFT8MbaRFbe7mGbIEAEMr0rWQwBzmHYri+MB1GEJ03hwmABkCVSNSTRkLajneVF7aBTgF3a7kvfqwuxQAW78aDfaFI3hEUjl9drukAmWLYDImAYZKgDVcbSGzb0eALhPNkobuABpNHmR7YPfhg5QpI+ZSWDZtvdwP3Z10zXqLP0iA6BtYEI++FH5YQMY5Y7rj/iNcAIKwLXGFAW4oEKkhusR/RoGqKEsAYJNXqJhbkO9NeAJ6rKZpw8MkEM+BGAAC2GAvAcAXSsDl0C1WYrIgT+mBMDUOgNsTJMIAyy8JAE22L7AVFwfAGMJp+16eNZKyIZoW/c+4xUBIDUlWqDkAfZuwghte2ZAgIvBpD+WC5AkEQDW8GuBMLFGEICEAe5bH4AUXP1JAVYKhX3cj4NnowFy6wOQxP0fzVh+I/QAZmy7BrLjoTZVYYYCrE9D9Jr7EQnARIrC2BdABgG48GrbVk/A/OkdeWHHBSgOBpBDSLoHuuO/CpB+P9vQAXQjLO14tU31xgxZWieAC954zH1AHcBSANpNsuyFfEkY4AKnbwDp+FCAAFgYAAygCKyamltedRuOAYzQAFPz20gAXWkBEFZ+UKe08aVD1gTYGH+sCwB1Mme8/k9BiDkeJ+sAk08cVkVrXQAufk50P34OlFnB0VsJqjNYfS3Y9F2odAFtJQdqEQ2iAXRXDW5/YD218d8DLACbkHXVpPm3ndwNt9+fjDTSSCONNNL/Q3eSf1lfY5U6IfvGDTEUrq5EOTGW7Fu3Oz0Pyf1Okk+p+Oitu+gJ2ztpP7gn9hrFIAFdd6YEwK89A/xMr4Klfvu0rHrNjxExPLnRQ/649mX4UwH83AdAEni+C8Av8v415EVnJBcYB5qg+dI3QM69ooiW+h3dXTXqOFsAZPGK3wRY2Cxrmt8VDnKd+Q/NrVd6AzgGHfW7YUrVtee5A6slDpBgW1TasYaLpalHgImO4/vt/yEDI7McYCOcEY5y5PsAUOG/pEPWBCBb7+sVQRGhqlinxnKNbTvcBhIxxuqmTDq866rIemD7mOZpfwdQoONCbFgAq7Zd7tAR9ELBl4+NSo9GOIWglv8OABHy1QPLbY0UwAXxw7ZhAF2xAFR38VRzc9eGy8DQAZpmQOUIAKk4ACLpSXbnhL3X/pEAv8nBkICyA+fAzyoI6Em1A0pbGWsAeGV/e482oAAyQYCAGb8tABJE6ciSBpBQRaXSjQ+QYG3Gvl0BfrA4gN9qSBjgWH+6F8UFMFyAZHP/LgBptK04ANOu8bxgchsws9SmYwAo+8oA30cD3A04kQAfmpLxu0KRAyjFBUjbr5HsKmvLZyVAx5GjPTvuA/6asncTyJE1YKoPAFnPa3B/NdSUnIA8Z2dNgAtt29LGHPePC8BeLSfjt64t1GxMgB6lABYwS//Ny1r9FHzahKwXwM+sGXye5vmjtBgW1aFbC1SH2q4s/QrVQpWjAY4wpaZjAfAo8IZ43iijEp5Jmb7a6vb2iAaYCnty3TWOeQ5A//2S8re0uRdMHjrFuWonBdVUGhiAXuIBjKG1AVr+Y7+JCVJdm49ogGl1VnyANP7M4ZQokwKs9QM4mZ28kTsZqYqsqGtOFIATH+BFm2nPGAA5fMMuybOuSFv2Sk5lLfmpKgJS9RJ73dEBjrQHtYEF5AUAbftaEqBrJAt+NUIA6d4AigpgApgeAsBB9POBAtNBMQCWYIm5EmOA5SuCul4E9ZgAKcz2ZIRllPYuHMamhdwBag9cjiiesBECetIKIOEBzOHBWADKz2BNW7NE0mXgd1rr9WDIa6FqGA1gmOUGB9gUeHLKyzlz87UBJtEhGTDru4NzJB7Vpu2VYgIkgBXRzenENUI1PbSMTsXNgDPLNO9Sf4rm9QSaVkwAaj6/Cici3xPAnNvB3fZLes/r0KwsYIXmiTf/x6jh17UAkh7ABPA8Tw6tnlpCowovx08CzmYe2bh47suA/N8D3Gof4gGM0wt5cs3XegFQNS9VRrviVsrOErVEV0eVPZLuADlZDU/m5pIp06fQADZaEyAnjCgLvMSKnYo5RfeUgUfXAJiQAxALHuwdmFUAJaO4JsDnWOaPC3RKfJCHZXxyc23WfoLuigTIAM1FPsjopZNqEQUwF8cIb5gWxpjnls+qIquTbSsKwCgUJIDR+E7M5hS+ZIXlKwfYKM7EXsNzwSZOEwOmPFPT5WaeKADlKWoz2pUM5TNrACmgGTt4nCyJu2X5ze6+lkiAQmE25JCYWxGllJttSreYiwyrvc0/FVSdoNn2r2pD2pz9q3rXtMhII4000v9cSStyr0P+KaVx/yba2E1FOHSrZD10OwkLmNdd6T/lWrDha8efWpEAed3h+F5Odx2ujF0PrwPtSABLB7B0gIzYfwSNF0rtE/sNafBlljsWPtzWNwswsRsv8Nc4gGZw9/kBrtwiOv4UFyCBoH7zD2FyAL0T7geo4dtBAAKRzgZdVPtEHIAEzG3p2fVpdxRvMIA5cNWxIpYahgHaYQCu6Y1kAHdKrxU9AJxPbedQuxKMEEzw9RPm86oXnC5FABRpn2oAACUOEFamwAOlhcO3hpYDSdtxbcDepdysrC/AGIRYw5cqvJ7DTGFRGOFGtDP7jwE01M9pAVBE3g9w4YztrBfAH2GABDrED3AlYPUIcKTtSACDRseDNnC1XeLzFVbCABfjJR2Afa72WgQ5rLU+yFAAyZ1cIzyyclPh9R2xbNebr9tvFL7yAawMBeByr024dS/2rH8IADW9XlPDB7A8FAC1U4RVE1heJ4ALCzM2VZHmqDslYiYMkHEBUgEAOn6b5fGjchhg8FqgAMQC3zEdoKTW54eM8NehAFxgOwZQ4jZA7+0HOGqRtdaUKwLg52E1RBlZxzcOALxRXvQyYF0BJvC7HqGhq3y9G3ntwEnUMsIA9w0PYEPMy62fGYUKKz/PxvQet11dU9ABcpjuCeBI29IBEjTBQuFTFS8wvJE/CZA+BGh+wobyhBqDAOQQoRXPxh2S2sYLbQmA98TynVQ5GqCI/JAADNf9r6PEExUAc563ZdTQMPmC/+y6AHhWP4e8iJ2M4xQ+Ll1z094d1BGpNUshI8zC6gngFubMHyBbQmYDM15Y2fug+eCoIOuLbkN0ItyB8XInVAsMYFgOSc6t5Sm3rUmiTQTA5AqhAKkqVh2Swa8hgBRWhwWQbYq/RDGGjgQYs+jGTlngSRZyDgGMY4WewzpzgwDIN+DhZVg00d85gGyK53AWszfWF3tW9pgoQJHmytyfDrFtZ0CAE3DGkftw52eBmV9OA0jRW9CS4erIt+r+buxrOgMedxoMwFjCq2IiThWL7PiiBOBRzJqqMwobVqYMbDEwwHFw1X7mCnQmAIfHdxUA05ubut1g/OabV/sHi4A18wMAKGd4UxpPbM/O0WeMBCjx2OfPvgx4ySUDGs6gRUDTYEELK8UTJUUdQGkjrSqkqzx0kay7PdYBjbB2niOiOLzzVYUVBXClFtDZjzZPIpJJ62mPmvMDfFCSAcyWu5j+IMCJAigqr2QHoF0RiWGVbsZWcjeSqFKAsMbKwCxfi99mZ5Lk1zqAURZc5FIAm4nCKIM2FT2o2iXUnKEHWp5N0m+v8otnu+Zq+yA5VneV13mTGYfFnvKf6pSIaIyYxlYVkdQlbRgrpzUD17ndZ0uvkM1KT3Gn0NJNke7Znik+IFF/942iPOjF7gKV/3h6YTwJs218FnXAeIEb494HSqt/2FF+s2ZrXzf9C0SeqvQCkJjZJeYfBxx7iyjh1E3VspLAApU0GWmkkUYaaaT/sozXyL+qC7Oh9ZKT73gbl5dIbyo2zV4fJxkxYj0FLIr0YngaGmWuj1lGtXBU+GTh4i1pEYI0HdjQaAw6Yibc8uZ2quMQdnZ3i4hP+zob0vENP0dVCyMnEJIlTj9D5V0YAFQvmEr1gE++gXCBlRbwi5y4Fgtgeg0AvwIAKSBohUUvxYweQjQQUskrscEACB5wQlOw87w2+EwK7YJPVYi7DggwE+46eVYx7uVN9Oq7bEwANxbpqOCC+BtEYwiuJ6wCeTZ2fyya7nooh9rn6QWqg7cZCCAy1MgAwsrro5mWDNU0dIDbuwAcZxacoQCcrEysDq6ODrDEJpceZgUA6OcfQ8kBFZgnaXhaEQCZEqFUefb40zoAjzP0BJC07V04h9ihbMWmAmgl+MPd2kMCpKp5kRH1pjMgAImeniPToADH8EowJgEm6Y4Efk/RFwXN764AF+zVE0CjK0CRL4LYWAIY1Qa9YL7uYvzmASRmdqIAR+4oAJi6AhihwaSJ7gBGmS962EDZwAKsDfBo8U+KcQoF0G0pHsAJoYEMmno3gEm0iR+Abj4/hdfGGUY/AEYdrfgAObS8U5YFQBKthSbN/+mT8Vo0gBte7Q6QUdPoFUDb5No8HwBI1+eDAOTrdq1D6+DyXJMIALNQxAOHbavXgmQ3AHc4q1EKjBdJBQHI8bOGFQA4hs08yq0uUYx+qqFRA14K7JWyggBGsuaOpY1LAJbh8/ReFKMvAJaA3w6vjADw5I5YttgOBUBrRp75Js/3CUDm4B9RywmnC6gEAShu2w9AjYCdVsdsvwAplgVh5ycNBAuFOQavBQCyyLOrSH8AIgvCzk9CAKh3AbvRvA7ATjtjoBwIWUGZuZ08t4NG6Bp9i+2QABuAza/o3waoavpqkIz6y+yNCIAJtEs+gByWKOg4sNw/wAZ8kQ0Vv4O3EQmQdluHnAZQb5xMs6zYXGr0D2DUF/U+UIcIrBAAVbXj6AApLE+4S5ZXroTTNwC5S68EYicNgkYBfOEQHeAYTCexPIkz3JWzw3BIkmXMi6NhAC4dwI2fvJzPIZ/CGX6Am/sD2BjIixbx97UBEq4Z7GRU28RAywdwQ6M/gDm5aCiH5bUBjmM+2oR7am1VBzgH/QGkyzLjFxSAbIhUY+kB1Nz84p7am/t6AJ4j3+4L4Dh98e/PwaY4DLBfu0SpWa4dLathmkW9t+wNQMWaHNEkxwEwvmXL9c7Ve0Y7AGymTT8Ad6uQVBo4pRtAVgL4h2SykPm/b1/VMFX26sBtV9sf08KIMsJjCbnXO5QM+s9leBGw9iztYu+iAdjXxwFIZoGO1ktbFCYlACreIQ8z4QO4iFzBETPs/gQ+LccB2BnSQ82CyvHXOs9DqnuHFIDypJrMkGgAMR7AyUEHfD90tNRaJBJgQR5S70sv572lD/uSmAC5IEC6LHJ9I5qYJcPiJity77+5GQcaVhiA9ZxPI0rA/abQ1jEByBuyg3gqXQ4drY1PfcIRU34P8Jlgc1OHKDlE19HRU+l2I0PUrWSkkUYaaaSRRhpppJFi6C8fDRp5d6pE1AAAAABJRU5ErkJggg=="}},im={methods:{clickInteractionViewLink:function(){var t=window.open("https://ui.marklion.cn/article/tools/marklion-interaction-mobile-view-intro.shtml");t.opener=null},clickGoWebInteraction:function(){var t=window.open(this.interactionUrl);t.opener=null},clickShowMenu:function(){var t=this,e=!this.menuVisible;e&&(this.url=this.interactionUrl),setTimeout((function(){t.menuVisible=e}),0)},hideMenu:function(){var t=this;clearTimeout(this.menuHandler),this.menuHandler=setTimeout((function(){t.menuVisible=!1}),50)}},watch:{url:function(t){t&&(this.qrcodeImage=rm(t))},menuVisible:function(t){t?window.addEventListener("click",this.hideMenu,!1):window.removeEventListener("click",this.hideMenu,!1)}},computed:{supportInteraction:function(){return!$r.notSupportInteraction(this.cloudVersion)},interactionUrl:function(){return this.getCurrentInteractionUrl()}},data:function(){return{qrcodeImage:null,url:"",menuVisible:!1,menuHandler:0}},beforeDestroy:function(){clearTimeout(this.menuHandler),window.removeEventListener("click",this.hideMenu,!1)},created:function(){0},props:{fixRight:{type:Boolean,default:!1}}},om=im,am=(n("de0f"),Object(Dr["a"])(om,Zf,tm,!1,null,"6c05bd4d",null)),sm=am.exports,cm=function(){var t=this,e=t._self._c;return e("div",{ref:"btnGoArtrenderMode",staticClass:"btn-go-artrendermode",class:{on:t.artShowInListMode},attrs:{title:t.title},on:{click:t.clickArtShowInListMode}})},lm=[],um={methods:{setGuideRect:function(){this.setBeginnerGuideRect(a["k"].ArtboardModeMenu,"btnGoArtrenderMode",a["j"].TopRight)},clickArtShowInListMode:function(){this.$store.commit("artShowInListMode",!this.artShowInListMode)}},computed:{title:function(){var t=this.artShowInListMode;return"".concat(t?"宫格视图":"画布视图","\n点击将画板列表切换为").concat(t?"画布视图":"宫格视图")},resetGuideRectKey:function(){var t=this.winRect.width;return"".concat(t)},winRect:function(){return this.$store.state.winRect}},watch:{resetGuideRectKey:function(){this.setGuideRect()}},beforeDestroy:function(){this.setGuideRect()},mounted:function(){this.setGuideRect()}},dm=um,hm=(n("47da"),Object(Dr["a"])(dm,cm,lm,!1,null,"8274e7a2",null)),fm=hm.exports,mm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log"},[e("a",{staticClass:"btn-folder-log",class:{on:t.logVisible},attrs:{href:"javascript:;",title:"文件夹日志"},on:{click:function(e){t.logVisible=!t.logVisible}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.logVisible,expression:"logVisible"}],staticClass:"box",on:{click:function(e){t.notClickClose=!0}}},[e("div",{staticClass:"header"},[e("nav",[t.isRootFolder?t._e():e("a",{class:{on:t.showType===t.EnumLogShowType.ALL},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.ALL)}}},[t._v("全部")]),e("a",{class:{on:t.showType===t.EnumLogShowType.Folder||t.isRootFolder},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.Folder)}}},[t._v("文件夹")]),t.isRootFolder?t._e():e("a",{class:{on:t.showType===t.EnumLogShowType.Artboard},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.Artboard)}}},[t._v("画板")]),t.isRootFolder?t._e():e("a",{class:{on:t.showType===t.EnumLogShowType.File},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.File)}}},[t._v("文件")])]),e("menu",[e("a",{staticClass:"btn-refresh2",attrs:{href:"javascript:;",title:"刷新日志列表"},on:{click:function(e){return t.clickReload(!0)}}})])]),e("div",{ref:"list",staticClass:"list",class:t.listCls,on:{scroll:t.onListScroll}},[t.listFetchState===t.FetchState.Fetching||t.listFetchState===t.FetchState.Error?e("NetworkLoading",{attrs:{loadText:"正在获取消息列表...",errorText:t.errorText,isLoading:t.listFetchState===t.FetchState.Fetching,isError:t.listFetchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload(!0)}}}):0===t.showList.length?e("div",{staticClass:"empty"},[t._v("没有找到"+t._s(t.showType===t.EnumLogShowType.Folder?"文件夹相关":t.showType===t.EnumLogShowType.Artboard?"画板相关":t.showType===t.EnumLogShowType.File?"文件相关":"")+"日志")]):e("ul",t._l(t.list,(function(n){return e("CloudFolderLogItem",{key:"folderlog-".concat(n.id),attrs:{item:n,showType:t.showType,listViewRect:t.listViewRect,allShowListItemSelect:t.allShowListItemSelect},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile,resetShowListItemsOffsetTop:t.resetShowListItemsOffsetTop}})})),1)],1)])])},pm=[],vm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item",class:t.itemCls,style:t.style},[t.itemInView?e("div",{ref:"item",staticClass:"item-content"},[e("UserFace2",{attrs:{self:t.isSelf,tourist:t.isTourist,title:t.userFaceTitle,text:t.userFaceText}}),e("div",{staticClass:"summary"},[e("div",{staticClass:"info"},[e("div",{staticClass:"nickname"},[t._v(t._s(t.userNickName))]),t.item.type===t.EnumLoggerType.Artboard_Upload?e("ArtboardUpload",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.NetDisk_FileUploadCompleted?e("NetdiskFileUpload",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Remove?e("ItemRemove",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.isRecycleRestoreType?e("ItemRestore",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Remove_ArtboardVer?e("ArtboardVerRemove",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Remove_NetdiskFileVer?e("NetdiskFileVerRemove",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.MoveTo?e("ItemMoveTo",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Folder_Edit?e("FolderEdit",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Folder_Add||t.item.type===t.EnumLoggerType.Folder_SetPreview||t.item.type===t.EnumLoggerType.Folder_CancelPreview?e("FolderSet",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.NetDisk_LinkAdd||t.item.type===t.EnumLoggerType.NetDisk_LinkEdit?e("NetdiskFileLinkChange",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.NetDisk_FileReName?e("NetdiskFileRename",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t._e()],1),e("div",{staticClass:"date"},[t._v(t._s(t.item.dateStr))])])],1):t._e()])},bm=[],gm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("上传了"),e("ArrayItems",{attrs:{showMore:t.showMoreArtboard,list:t.artboards,canClick:!0,listName:"画板"},on:{clickItem:t.clickArtboard,clickShowMore:t.clickShowMoreArtboard}}),t.summaryHTML?e("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.summaryHTML)}}):t._e()],1)},wm=[],xm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"array-items",class:{nomore:!t.moreList}},[e("span",{staticClass:"name",on:{click:t.clickMore}},[t._v(t._s(t.list.length>t.startMaxCount?"".concat(t.list.length,"个"):"")+t._s(t.listName))]),t._l(t.startList,(function(n,r){return e("span",{key:r,class:{art:1,first:0===r}},[e("ArrayItem",{attrs:{canClick:t.canClick,light:t.light,dead:t.dead,item:n},on:{clickItem:t.clickItem}})],1)})),t.moreList?[t.showMore?e("span",{staticClass:"more-list"},t._l(t.moreList,(function(n,r){return e("span",{key:t.startMaxCount+r,class:{art:1}},[e("ArrayItem",{attrs:{canClick:t.canClick,light:t.light,dead:t.dead,item:n},on:{clickItem:t.clickItem}})],1)})),0):t._e(),t.showMore?t._e():e("span",{staticClass:"more-text",on:{click:t.clickMore}},[t._v("等")]),e("span",{staticClass:"btn-more-visible",class:{on:t.showMore},on:{click:t.clickMore}})]:t._e()],2)},ym=[],km=function(){var t=this,e=t._self._c;return t.canClick?e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.clickItem(t.item)}}},[t._v(t._s(t.name))]):e("span",{class:{light:t.light,dead:t.dead}},[t._v(t._s(t.name))])},Cm=[],Sm={methods:{clickItem:function(t){this.$emit("clickItem",t)}},computed:{name:function(){var t=this.item,e=t.name,n=t.fileName,r=t.fileExt;return e||n+r}},props:{item:Object,canClick:Boolean,light:{type:Boolean,default:!0},dead:{type:Boolean,default:!1}}},Tm=Sm,Om=Object(Dr["a"])(Tm,km,Cm,!1,null,null,null),Im=Om.exports,Am={components:{ArrayItem:Im},methods:{clickMore:function(){this.moreList&&this.$emit("clickShowMore",!this.showMore)},clickItem:function(t){this.$emit("clickItem",t)}},computed:{startMaxCount:function(){return 5},startList:function(){var t=this.list,e=this.startMaxCount;return t.length<=e?t:t.slice(0,5)},moreList:function(){var t=this.list,e=this.startMaxCount;return t.length<=e?null:t.slice(5)}},props:{list:Array,canClick:Boolean,listName:String,light:{type:Boolean,default:!0},dead:{type:Boolean,default:!1},showMore:{type:Boolean,default:!1}}},Fm=Am,jm=(n("233b"),Object(Dr["a"])(Fm,xm,ym,!1,null,"4ccc1574",null)),_m=jm.exports,Mm={components:{ArrayItems:_m},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickShowMoreArtboard:function(t){this.item.showMore[a["I"].Artboard]=t}},computed:{showMoreArtboard:function(){return this.item.showMore[a["I"].Artboard]},EnumLogShowType:function(){return a["I"]},artboards:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.artboards)&&void 0!==t?t:[]},desc:function(){var t,e,n=null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.desc)&&void 0!==t?t:"";return Object(l["j"])(n)&&(n=n.trim()),n},summaryHTML:function(){var t=this.desc;return t?ma(t):null}},props:{item:Object}},Lm=Mm,Dm=(n("2c33"),Object(Dr["a"])(Lm,gm,wm,!1,null,"0f04ebde",null)),Pm=Dm.exports,Nm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},t._l(t.texts,(function(n,r){return e("ArrayItem",{key:r,attrs:{canClick:!!n.canClick,light:!!n.light,item:n},on:{clickItem:t.clickFolder}})})),1)},Em=[],Rm={components:{ArrayItem:Im},methods:{clickFolder:function(t){this.$emit("clickFolder",t)}},computed:{isRootFolder:function(){return 0===this.cloudCurrentFolderId},canClickFolder:function(){return this.cloudCurrentFolderId===this.itemData.parentId},texts:function(){var t=this.canClickFolder,e=this.itemData,n=this.isRootFolder,r=n?"":"子",i=[];switch(this.item.type){case a["J"].Folder_Add:t?(i.push({name:"新建了".concat(r,"文件夹")}),i.push({name:e.name,light:!0,canClick:!0,id:e.id})):(i.push({name:"新建了当前文件夹"}),i.push({name:e.name,light:!0}));break;case a["J"].Folder_SetPreview:t?(i.push({name:"设置了".concat(r,"文件夹")}),i.push({name:e.name,light:!0,canClick:!0,id:e.id})):(i.push({name:"设置了当前文件夹"}),i.push({name:e.name,light:!0})),i.push({name:"的封面"});break;case a["J"].Folder_CancelPreview:t?(i.push({name:"取消了".concat(r,"文件夹")}),i.push({name:e.name,light:!0,canClick:!0,id:e.id})):(i.push({name:"取消了当前文件夹"}),i.push({name:e.name,light:!0})),i.push({name:"的封面"});break}return i},itemData:function(){var t;return null!==(t=this.item.data)&&void 0!==t?t:{}}},props:{item:Object}},Vm=Rm,Bm=Object(Dr["a"])(Vm,Nm,Em,!1,null,null,null),Hm=Bm.exports,Um=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},t._l(t.texts,(function(n,r){return e("ArrayItem",{key:r,attrs:{canClick:!!n.canClick,light:!!n.light,item:n},on:{clickItem:t.clickFolder}})})),1)},$m=[],Gm={components:{ArrayItem:Im},methods:{clickFolder:function(t){this.$emit("clickFolder",t)}},computed:{isRootFolder:function(){return 0===this.cloudCurrentFolderId},texts:function(){var t=this.itemData,e=t.folder,n=t.oldFolder;if(!e)return[];var r=this.cloudCurrentFolderId===e.parentId,i=this.isRootFolder?"":"子";if(!n)return[{name:"编辑了".concat(r?i:"","文件夹")},{name:e.name,light:!0,canClick:r,id:e.id},{name:"的配置信息"}];var o=e.name,s=e.shareMode,c=n.name,l=n.shareMode,u=o!=c,d=s!=l;if(!u&&!d)return[{name:"编辑了".concat(r?i:"","文件夹")},{name:e.name,light:!0,canClick:r,id:e.id},{name:"的配置信息"}];var h=[];return u&&(r?(h.push({name:"重命名了".concat(i,"文件夹")}),h.push({name:c,light:!0})):h.push({name:"重命名了当前文件夹"}),h.push({name:"为"}),h.push({name:o,light:!0,id:e.id,canClick:r})),d&&(u?(h.push({name:"并修改了访问模式为"}),h.push({name:a["v"].getName(s),light:!0})):(r?(h.push({name:"修改了".concat(i,"文件夹")}),h.push({name:o,light:!0,id:e.id,canClick:!0})):h.push({name:"修改了当前文件夹"}),h.push({name:"的访问模式为"}),h.push({name:a["v"].getName(s),light:!0}))),h},itemData:function(){var t;return null!==(t=this.item.data)&&void 0!==t?t:{}}},props:{item:Object}},Wm=Gm,zm=Object(Dr["a"])(Wm,Um,$m,!1,null,null,null),Ym=zm.exports,Xm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[!t.isMoveOutMode&&t.oldParent?[t._v("从"),e("ArrayItem",{attrs:{canClick:!0,item:t.oldParent},on:{clickItem:t.clickFolder}})]:t._e(),t._v(t._s(t.moveModeText)+"了"),t.hasFolder?e("ArrayItems",{attrs:{list:t.folders,showMore:t.showMoreFolder,canClick:!0,listName:"文件夹"},on:{clickItem:t.clickFolder,clickShowMore:t.clickShowMoreFolder}}):t._e(),t._v(t._s(t.hasFolder&&t.hasFile?",":"")),t.hasFile?e("ArrayItems",{attrs:{list:t.files,showMore:t.showMoreFile,canClick:!0,listName:"文件"},on:{clickItem:t.clickFile,clickShowMore:t.clickShowMoreFile}}):t._e(),t._v(t._s(t.hasFile&&t.hasArtboard?",":"")),t.hasArtboard?e("ArrayItems",{attrs:{list:t.artboards,showMore:t.showMoreArtboard,canClick:!0,listName:"画板"},on:{clickItem:t.clickArtboard,clickShowMore:t.clickShowMoreArtboard}}):t._e(),t.isMoveOutMode&&t.newParent?[t._v("到"),e("ArrayItem",{attrs:{canClick:!0,item:t.newParent},on:{clickItem:t.clickFolder}})]:t._e()],2)},Km=[],qm={components:{ArrayItems:_m,ArrayItem:Im},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFolder:function(t){this.$emit("clickFolder",t)},clickFile:function(t){this.$emit("clickFile",t)},clickShowMoreFolder:function(t){this.item.showMore[a["I"].Folder]=t},clickShowMoreFile:function(t){this.item.showMore[a["I"].File]=t},clickShowMoreArtboard:function(t){this.item.showMore[a["I"].Artboard]=t}},computed:{showMoreFolder:function(){return this.item.showMore[a["I"].Folder]},showMoreFile:function(){return this.item.showMore[a["I"].File]},showMoreArtboard:function(){return this.item.showMore[a["I"].Artboard]},isRootFolder:function(){return 0===this.cloudCurrentFolderId},moveModeText:function(){return this.isMoveOutMode?"移动":"移入"},oldParent:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.parent)&&void 0!==t?t:null},newParent:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.newParent)&&void 0!==t?t:null},isMoveOutMode:function(){var t;return(null===(t=this.oldParent)||void 0===t?void 0:t.id)===this.cloudCurrentFolderId},hasFolder:function(){var t=this.showType,e=this.folders,n=this.isRootFolder;return(n||t===a["I"].ALL||t===a["I"].Folder)&&e.length>0},hasFile:function(){var t=this.showType,e=this.files,n=this.isRootFolder;return!n&&(t===a["I"].ALL||t===a["I"].File)&&e.length>0},hasArtboard:function(){var t=this.showType,e=this.artboards,n=this.isRootFolder;return!n&&(t===a["I"].ALL||t===a["I"].Artboard)&&e.length>0},folders:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.folders)&&void 0!==t?t:[]},files:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.files)&&void 0!==t?t:[]},artboards:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.artboards)&&void 0!==t?t:[]}},props:{item:Object,showType:Number}},Jm=qm,Qm=Object(Dr["a"])(Jm,Xm,Km,!1,null,null,null),Zm=Qm.exports,tp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("删除了"),t.hasFolder?e("ArrayItems",{attrs:{list:t.folders,showMore:t.showMoreFolder,canClick:!1,light:!1,dead:!0,listName:"文件夹"},on:{clickItem:t.clickFolder,clickShowMore:t.clickShowMoreFolder}}):t._e(),t._v(t._s(t.hasFolder&&t.hasFile?",":"")),t.hasFile?e("ArrayItems",{attrs:{list:t.files,showMore:t.showMoreFile,canClick:!1,light:!1,dead:!0,listName:"文件"},on:{clickItem:t.clickFile,clickShowMore:t.clickShowMoreFile}}):t._e(),t._v(t._s(t.hasFile&&t.hasArtboard?",":"")),t.hasArtboard?e("ArrayItems",{attrs:{list:t.artboards,showMore:t.showMoreArtboard,canClick:!1,dead:!0,light:!1,listName:"画板"},on:{clickItem:t.clickArtboard,clickShowMore:t.clickShowMoreArtboard}}):t._e()],1)},ep=[],np={components:{ArrayItems:_m},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFolder:function(t){this.$emit("clickFolder",t)},clickFile:function(t){this.$emit("clickFile",t)},clickShowMoreFolder:function(t){this.item.showMore[a["I"].Folder]=t},clickShowMoreFile:function(t){this.item.showMore[a["I"].File]=t},clickShowMoreArtboard:function(t){this.item.showMore[a["I"].Artboard]=t}},computed:{showMoreFolder:function(){return this.item.showMore[a["I"].Folder]},showMoreFile:function(){return this.item.showMore[a["I"].File]},showMoreArtboard:function(){return this.item.showMore[a["I"].Artboard]},isRootFolder:function(){return 0===this.cloudCurrentFolderId},hasFolder:function(){var t=this.showType,e=this.folders,n=this.isRootFolder;return(n||t===a["I"].ALL||t===a["I"].Folder)&&e.length>0},hasFile:function(){var t=this.showType,e=this.files,n=this.isRootFolder;return!n&&(t===a["I"].ALL||t===a["I"].File)&&e.length>0},hasArtboard:function(){var t=this.showType,e=this.artboards,n=this.isRootFolder;return!n&&(t===a["I"].ALL||t===a["I"].Artboard)&&e.length>0},folders:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.folders)&&void 0!==t?t:[]},files:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.files)&&void 0!==t?t:[]},artboards:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.artboards)&&void 0!==t?t:[]}},props:{item:Object,showType:Number}},rp=np,ip=Object(Dr["a"])(rp,tp,ep,!1,null,null,null),op=ip.exports,ap=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("还原了"+t._s(t.restoreTypeName)),e("ArrayItem",{attrs:{canClick:!0,item:t.item.data},on:{clickItem:t.clickItem}}),t.versionInfo?e("span",{staticClass:"desc",domProps:{textContent:t._s(t.versionInfo.text)}}):t._e()],1)},sp=[],cp={components:{ArrayItem:Im},methods:{clickItem:function(){var t;switch(this.restoreType){case a["T"].Artboard:this.clickArtboard(this.item.data);break;case a["T"].File:this.clickFile(this.item.data,null===(t=this.versionIds)||void 0===t?void 0:t[0]);break;case a["T"].Folder:this.clickFolder(this.item.data);break}},clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFolder:function(t){this.$emit("clickFolder",t)},clickFile:function(t,e){this.$emit("clickFile",t,e)}},computed:{versionIds:function(){var t=this.restoreType;if(t===a["T"].Folder)return null;var e=this.item.data.verIds;return Object(l["j"])(e)?(e=e.split(",").map((function(t){return parseInt(t.trim())})).filter((function(t){return!isNaN(t)&&t>0})),e.length>0?e:null):null},versionInfo:function(){var t,e=null===(t=this.versionIds)||void 0===t?void 0:t.map((function(t){return"#".concat(t)}));if(!e)return null;var n=e.length,r=5,i=n>r;return i&&(e=e.slice(r)),{more:i,text:"".concat(e.join(",")).concat(i?" 等".concat(n,"个版本"):""),count:n}},restoreType:function(){var t;return null===(t=this.item.data)||void 0===t?void 0:t.type},restoreTypeName:function(){return a["T"].getMiniName(this.restoreType)}},props:{item:Object,showType:Number}},lp=cp,up=Object(Dr["a"])(lp,ap,sp,!1,null,null,null),dp=up.exports,hp=function(){var t=this,e=t._self._c;return t.artboard&&null!=t.artboard.verId?e("div",{staticClass:"folder-log-item-info"},[t._v("删除了画板"),e("ArrayItem",{attrs:{item:t.artboard,canClick:!0},on:{clickItem:t.clickArtboard}}),t._v("的版本"),e("span",{staticClass:"dead",domProps:{textContent:t._s("#".concat(t.artboard.verId))}})],1):t._e()},fp=[],mp={components:{ArrayItem:Im},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)}},computed:{artboard:function(){return this.item.data}},props:{item:Object,showType:Number}},pp=mp,vp=Object(Dr["a"])(pp,hp,fp,!1,null,null,null),bp=vp.exports,gp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v(t._s(t.modeText)+"了链接文件"),e("ArrayItem",{attrs:{item:t.file,canClick:!0},on:{clickItem:t.clickFile}})],1)},wp=[],xp={components:{ArrayItem:Im},methods:{clickFile:function(t){this.$emit("clickFile",t)}},computed:{isLinkAdd:function(){return this.item.type===a["J"].NetDisk_LinkAdd},file:function(){return this.item.data},modeText:function(){return this.isLinkAdd?"添加":"编辑"}},props:{item:Object}},yp=xp,kp=Object(Dr["a"])(yp,gp,wp,!1,null,null,null),Cp=kp.exports,Sp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("重命名了文件"),t.oldFileName?e("span",{staticClass:"dead"},[t._v(t._s(t.oldFileName+t.fileExt))]):t._e(),t._v("为"),e("ArrayItem",{attrs:{item:t.file,canClick:!0},on:{clickItem:t.clickFile}})],1)},Tp=[],Op={components:{ArrayItem:Im},methods:{clickFile:function(t){this.$emit("clickFile",t)}},computed:{oldFileName:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.oldFileName)&&void 0!==t?t:""},file:function(){var t;return null===(t=this.item.data)||void 0===t?void 0:t.file},fileExt:function(){var t,e;return null!==(t=null===(e=this.file)||void 0===e?void 0:e.fileExt)&&void 0!==t?t:""}},props:{item:Object}},Ip=Op,Ap=Object(Dr["a"])(Ip,Sp,Tp,!1,null,null,null),Fp=Ap.exports,jp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("上传了"),e("ArrayItems",{attrs:{list:t.files,showMore:t.showMoreFile,canClick:!0,listName:"文件"},on:{clickItem:t.clickFile,clickShowMore:t.clickShowMoreFile}})],1)},_p=[],Mp={components:{ArrayItems:_m},methods:{clickFile:function(t){this.$emit("clickFile",t)},clickShowMoreFile:function(t){this.item.showMore[a["I"].File]=t}},computed:{showMoreFile:function(){return this.item.showMore[a["I"].File]},files:function(){var t=this.item.data;return Object(l["i"])(t)||(t=[t]),t}},props:{item:Object}},Lp=Mp,Dp=Object(Dr["a"])(Lp,jp,_p,!1,null,null,null),Pp=Dp.exports,Np=function(){var t=this,e=t._self._c;return t.file&&null!=t.file.verId?e("div",{staticClass:"folder-log-item-info"},[t._v("删除了文件"),e("ArrayItem",{attrs:{item:t.file,canClick:!0},on:{clickItem:t.clickFile}}),t._v("的版本"),e("span",{staticClass:"dead",domProps:{textContent:t._s("#".concat(t.file.verId))}})],1):t._e()},Ep=[],Rp={components:{ArrayItem:Im},methods:{clickFile:function(t){this.$emit("clickFile",t)}},computed:{file:function(){return this.item.data}},props:{item:Object,showType:Number}},Vp=Rp,Bp=Object(Dr["a"])(Vp,Np,Ep,!1,null,null,null),Hp=Bp.exports,Up={components:{UserFace2:ia,ArtboardVerRemove:bp,ArtboardUpload:Pm,FolderSet:Hm,FolderEdit:Ym,ItemMoveTo:Zm,ItemRemove:op,NetdiskFileLinkChange:Cp,NetdiskFileRename:Fp,NetdiskFileUpload:Pp,ItemRestore:dp,NetdiskFileVerRemove:Hp},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFolder:function(t){this.$emit("clickFolder",t)},clickFile:function(t,e){this.$emit("clickFile",t,e)},resetBoxHeight:function(t){var e,n,r=this.visible,i=this.item;r&&(!t&&i.offsetHeight>0||(i.offsetHeight=null!==(e=null===(n=this.$refs.item)||void 0===n?void 0:n.offsetHeight)&&void 0!==e?e:0,i.offsetHeight>0&&this.$emit("resetShowListItemsOffsetTop")))}},computed:{isRecycleRestoreType:function(){return a["J"].isRecycleRestoreType(this.item.type)},itemInView:function(){var t=this.listViewRect,e=this.itemRect;return 0===e.offsetHeight||Object(d["f"])(t,e)},itemRect:function(){var t=this.item,e=t.offsetHeight,n=t.offsetTop;return{x:0,width:100,y:n,height:e}},isRootFolder:function(){return 0===this.cloudCurrentFolderId},visible:function(){var t=this.item,e=t.visibleInFolder,n=t.visibleInFile,r=t.visibleInArtboard,i=this.isRootFolder,o=this.showType;if(i)return e;switch(o){case a["I"].Artboard:return r;case a["I"].File:return n;case a["I"].Folder:return e;default:return!0}},itemCls:function(){var t=this.item,e=t.visibleInFolder,n=t.visibleInFile,r=t.visibleInArtboard;if(!e&&!n&&!r)return null;var i={};return e&&(i["visible-folder"]=1),n&&(i["visible-file"]=1),r&&(i["visible-artboard"]=1),i},style:function(){var t,e=null!==(t=this.item.offsetHeight)&&void 0!==t?t:0;return e>0?{height:"".concat(e,"px")}:null},EnumLoggerType:function(){return a["J"]},userNickName:function(){var t=this.user;if(!t)return"-";var e=t.nickName;return e||"-"},userFaceText:function(){var t=this.userNickName;return t[t.length-1]},userFaceTitle:function(){var t=this.user;return t?"".concat(t.nickName,"(").concat(t.email,")"):null},isSelf:function(){var t;return(null===(t=this.user)||void 0===t?void 0:t.userKey)===this.cloudUserKey},user:function(){return this.item.user},isTourist:function(){var t;switch(null===(t=this.user)||void 0===t?void 0:t.authority){case a["p"].Admin:case a["p"].Designer:return!1}return!0},showMoreFolder:function(){return this.item.showMore[a["I"].Folder]},showMoreFile:function(){return this.item.showMore[a["I"].File]},showMoreArtboard:function(){return this.item.showMore[a["I"].Artboard]}},watch:{showMoreFolder:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight(!0)}))},showMoreFile:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight(!0)}))},showMoreArtboard:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight(!0)}))},visible:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight()}))},itemInView:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight()}))}},props:{item:Object,showType:Number,listViewRect:Object,allShowListItemSelect:Boolean},mounted:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight()}))}},$p=Up,Gp=(n("f270"),Object(Dr["a"])($p,vm,bm,!1,null,"2194bcec",null)),Wp=Gp.exports,zp="folderlog-show",Yp=Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])({},a["J"].Remove,1),a["J"].MoveTo,1),a["J"].Folder_Add,1),a["J"].Folder_Edit,1),a["J"].Folder_SetPreview,1),a["J"].Folder_CancelPreview,1),a["J"].Recycle_RestoreFolder,1),a["J"].RecycleVerControl_RestoreFolder,1),Xp=Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])({},a["J"].Remove,1),a["J"].MoveTo,1),a["J"].NetDisk_LinkAdd,1),a["J"].NetDisk_LinkEdit,1),a["J"].NetDisk_FileReName,1),a["J"].Remove_NetdiskFileVer,1),a["J"].NetDisk_FileUploadCompleted,1),a["J"].Recycle_RestoreNetdiskFile,1),a["J"].RecycleVerControl_RestoreNetdiskFile,1),Kp=Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])(Object(M["a"])({},a["J"].Remove_ArtboardVer,1),a["J"].Remove,1),a["J"].MoveTo,1),a["J"].Artboard_Upload,1),a["J"].Recycle_RestoreArtboard,1),a["J"].RecycleVerControl_RestoreArtboard,1),qp={components:{NetworkLoading:Mc,CloudFolderLogItem:Wp},methods:{clickArtboard:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,s,c,l;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(i=t.guid,o=t.id,s=t.name,null!=i||null!=o){n.next=5;break}return n.abrupt("return");case 5:if(c=e.documentArtboards,l=c.find((function(t){if(t){var e=t.artboard;if(e){var n=e.cid,r=e.guid;return!!(o>0&&n===o||i&&i===r)||void 0}}})),l){n.next=22;break}if(!(o>0)){n.next=20;break}return n.prev=9,n.next=12,e.checkCloudItem(o,a["l"].Artboard);case 12:l=n.sent,e.goCloudPath({folderId:l.parentId,artboardGuid:l.guid,newWindow:!0}),n.next=19;break;case 16:n.prev=16,n.t0=n["catch"](9),e.showTextTip(s?n.t0.toString().replace("[".concat(o,"]"),"「".concat(s,"」")).replace("「".concat(o,"」"),"「".concat(s,"」")):n.t0);case 19:return n.abrupt("return");case 20:return e.showTextTip("画板「".concat(s,"」已不在当前文件夹,可能已经被删除或移动")),n.abrupt("return");case 22:if(!e.inCloudViewerMode){n.next=33;break}if(!e.inArtboardMode){n.next=30;break}if(l.artboard.cid!==e.curArtboardId||null!=l.artboardVerData){n.next=27;break}return e.showTextTip("已切换到画板「".concat(l.artboard.name,"」")),n.abrupt("return");case 27:e.setCurArtboard(l),n.next=31;break;case 30:e.$store.commit("resetCenterArtboard",l.artboard);case 31:n.next=34;break;case 33:e.goCloudPath({folderId:e.cloudCurrentFolderId,artboardGuid:l.artboard.guid,newWindow:!1});case 34:case"end":return n.stop()}}),n,null,[[9,16]])})))()},clickFolder:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,s,c;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=3;break}return n.abrupt("return");case 3:if(o=t.id,s=t.name,null!=o){n.next=6;break}return n.abrupt("return");case 6:if(c=null===(i=e.cloudSubFolders)||void 0===i?void 0:i.find((function(t){return t.id===o})),!c){n.next=10;break}return e.goCloudPath({folderId:o,newWindow:!0}),n.abrupt("return");case 10:return n.prev=10,n.next=13,e.checkCloudItem(o,a["l"].Folder);case 13:e.goCloudPath({folderId:o,newWindow:!0}),n.next=19;break;case 16:n.prev=16,n.t0=n["catch"](10),e.showTextTip(s?n.t0.toString().replace("[".concat(o,"]"),"「".concat(s,"」")).replace("「".concat(o,"」"),"「".concat(s,"」")):n.t0);case 19:case"end":return n.stop()}}),n,null,[[10,16]])})))()},clickFile:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o,l,u,d,h,f,m,p,v;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:if(l=t.secId,u=t.name,d=t.fileName,h=t.fileExt,l){r.next=5;break}return r.abrupt("return");case 5:if(f="/"+l,m=null===(o=n.cloudSubFiles)||void 0===o?void 0:o.find((function(t){var e;return-1!==(null===(e=t.viewUrl)||void 0===e?void 0:e.indexOf(f))})),p=function(t){return t&&e>0&&t.lastVersionId!==e?(t=Object(s["a"])({},t),t.viewUrl=Object(c["ob"])(t.viewUrl,e),t):t},!m){r.next=11;break}return n.clickNetDiskFile(p(m),!0),r.abrupt("return");case 11:return r.prev=11,r.next=14,n.checkCloudItem(l,a["l"].File);case 14:v=r.sent,n.clickNetDiskFile(p(v),!0),r.next=22;break;case 18:r.prev=18,r.t0=r["catch"](11),u||(u=d?d+h:""),n.showTextTip(u?r.t0.toString().replace("[".concat(l,"]"),"「".concat(u,"」")).replace("「".concat(l,"」"),"「".concat(u,"」")):r.t0);case 22:case"end":return r.stop()}}),i,null,[[11,18]])})))()},clickShowType:function(t){this.isRootFolder||(this.showType=t,t===a["I"].ALL?Object(c["mb"])(zp):Object(c["rb"])(zp,t))},clickReload:function(t){var e=this;setTimeout((function(){e._clickReload(t)}),10)},_clickReload:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.listFetchState!==c["a"].Fetching){n.next=2;break}return n.abrupt("return");case 2:if(e.errorText="",e.listFetchState=c["a"].Fetching,n.prev=4,i=e.pageIndex,o=e.list,t&&(i=0),0===i&&(o.splice(0),e.finish=!1),!e.isNotSupportCloudVersion){n.next=10;break}throw"-";case 10:return n.next=12,e.getFolderLogsAsync(i);case 12:0===e.pageIndex&&(e.updateTime=e.folderUpdateTimes),e.listFetchState=c["a"].Success,n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](4),e.listFetchState=c["a"].Error,e.isNotSupportCloudVersion?e.errorText="私有云版本过低(".concat(e.cloudVersion,"),请先升级私有云部署包"):e.errorText=n.t0;case 20:case"end":return n.stop()}}),n,null,[[4,16]])})))()},getFolderLogsAsync:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,s,u,d,h,f,m,p,v,b,g,w,x,y,k,C,S,T,O,I,A;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.inCloudMode){n.next=2;break}return n.abrupt("return",null);case 2:return i=new FormData,i.append("folderId",e.cloudCurrentFolderId),i.append("pageIndex",t>=0?t:0),o="getfolderlogsbyweb",n.next=8,e.fetchPostCloudApi(o,{timeout:1e4,abortKey:o,body:i});case 8:if(s=n.sent,Object(l["k"])(s)){n.next=11;break}throw new Error("返回值异常,无法解析数据:".concat(s));case 11:if(s.success){n.next=13;break}throw new Error(s.errMsg);case 13:u=s.data,d=u.list,h=u.users,f=u.finish,m=e.list,p={},m.forEach((function(t){p[t.id]=1})),t=s.data.pageIndex,h||(h={}),v=[],b=Date.now(),d.forEach((function(t){if(Object(l["k"])(t)&&!p[t.id]&&a["J"].defined(t.type)){t.user=h[t.userid];try{t.data=JSON.parse(t.data)}catch(n){return}e.resetTimeFormatItem(t,b),t.offsetHeight=0,t.offsetTop=0,t.showMore=Object(M["a"])(Object(M["a"])(Object(M["a"])({},a["I"].Folder,!1),a["I"].File,!1),a["I"].Artboard,!1),v.push(t),p[t.id]=1}})),g=3e5,w={},x=0,y=v.length;case 25:if(!(x<y)){n.next=50;break}if(k=v[x],C=new Date(k.date),k.type===a["J"].NetDisk_FileUploadCompleted){n.next=30;break}return n.abrupt("continue",47);case 30:S=k.userid,T=[],O=x+1;case 33:if(!(O<y)){n.next=46;break}if(I=v[O],I.type===a["J"].NetDisk_FileUploadCompleted&&I.userid===S){n.next=37;break}return n.abrupt("break",46);case 37:if(A=Math.abs(C-new Date(I.date)),!(A>g)){n.next=40;break}return n.abrupt("break",46);case 40:T.push(I.data),w[I.id]=1,x++;case 43:O++,n.next=33;break;case 46:T.length>0&&(T.unshift(k.data),k.data=T);case 47:x++,n.next=25;break;case 50:return v.forEach((function(t){if(!w[t.id]){switch(t.type){case a["J"].Artboard_Upload:case a["J"].MoveTo:case a["J"].Remove:var n,r=null!==(n=t.data)&&void 0!==n?n:{},i=r.artboards,o=r.files,s=r.folders,u=[i,o,s];u.forEach((function(t){Object(l["i"])(t)&&t.sort((function(t,e){return Object(c["hb"])(null===t||void 0===t?void 0:t.name,null===e||void 0===e?void 0:e.name)}))}));break;case a["J"].NetDisk_FileUploadCompleted:Object(l["i"])(t.data)&&t.data.sort((function(t,e){var n=null!==t&&void 0!==t?t:{},r=n.name,i=n.fileName,o=n.fileExt,a=null!==e&&void 0!==e?e:{},s=a.name,l=a.fileName,u=a.fileExt;return r||(r=i?i+o:""),s||(s=l?l+u:""),Object(c["hb"])(r,s)}));break}t.visibleInFolder=e.isFolderItem(t),t.visibleInFile=e.isFileItem(t),t.visibleInArtboard=e.isArtboardItem(t),m.push(t)}})),e.finish=f,e.pageIndex=t,n.abrupt("return",d);case 54:case"end":return n.stop()}}),n)})))()},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.notClickClose?t.notClickClose=!1:t.logVisible=!1}),50)},needReloadOnOpen:function(){var t=this.updateTime,e=this.folderUpdateTimes;return e!=t},resetTimeFormatItem:function(t,e){try{var n,r=null!==(n=t._lastFormatTime)&&void 0!==n?n:0;if(Math.abs(e-r)<=1e4)return;t.dateStr=Object(l["b"])(t.date)}catch(i){t.dateStr=t.date}t._lastFormatTime=e},resetTimeFormat:function(t){var e=this,n=Date.now();(null!==t&&void 0!==t?t:this.showList).forEach((function(t){e.resetTimeFormatItem(t,n)}))},onListScroll:function(t){this.scrollTop=t.target.scrollTop},getBoxHeight:function(){if(this.logVisible){var t=this.$refs.list;t&&(this.boxHeight=t.offsetHeight)}},isFolderItem:function(t){if(Yp[t.type])switch(t.type){case a["J"].RecycleVerControl_RestoreFolder:case a["J"].Recycle_RestoreFolder:return!0;case a["J"].Remove:case a["J"].MoveTo:var e,n=null===(e=t.data)||void 0===e?void 0:e.folders;return!(!n||0===n.length);default:return!0}return!1},isFileItem:function(t){if(Xp[t.type])switch(t.type){case a["J"].RecycleVerControl_RestoreNetdiskFile:case a["J"].Recycle_RestoreNetdiskFile:return!0;case a["J"].Remove:case a["J"].MoveTo:var e,n=null===(e=t.data)||void 0===e?void 0:e.files;return!(!n||0===n.length);default:return!0}return!1},isArtboardItem:function(t){if(Kp[t.type])switch(t.type){case a["J"].RecycleVerControl_RestoreArtboard:case a["J"].Recycle_RestoreArtboard:return!0;case a["J"].Remove:case a["J"].MoveTo:var e,n=null===(e=t.data)||void 0===e?void 0:e.artboards;return!(!n||0===n.length);default:return!0}return!1},resetShowListItemsOffsetTop:function(){var t=this.showList,e=this.allShowListItemSelect;if(e){var n=0;t.forEach((function(t){t.offsetTop=n,n+=t.offsetHeight}))}},onResize:function(){var t=this;this.logVisible&&this.$nextTick((function(){t.getBoxHeight()}))}},computed:{allShowListItemSelect:function(){var t=this.showList;return!t.find((function(t){return 0===t.offsetHeight}))},listViewRect:function(){return{x:0,y:this.scrollTop,height:this.boxHeight,width:1e3}},listCls:function(){var t=this.showType,e=this.isRootFolder,n={};if(e)n["in-folder"]=1;else switch(t){case a["I"].Artboard:n["in-artboard"]=1;break;case a["I"].File:n["in-file"]=1;break;case a["I"].Folder:n["in-folder"]=1;break;default:n["in-artboard"]=1,n["in-file"]=1,n["in-folder"]=1;break}return n},isRootFolder:function(){return 0===this.cloudCurrentFolderId},showArtboardLogNow:function(){return this.$store.state.folderPrecis.showArtboardLogNow},FetchState:function(){return c["a"]},EnumLogShowType:function(){return a["I"]},folderUpdateTimes:function(){return this.$store.state.cloud.folderUpdateTimes},isNotSupportCloudVersion:function(){var t=this.cloudVersion;return t&&$r.notSupportFolderLog(t)},artboardLogList:function(){var t=this.list;return t.filter((function(t){return t.visibleInArtboard}))},folderLogList:function(){var t=this.list;return t.filter((function(t){return t.visibleInFolder}))},fileLogList:function(){var t=this.list;return t.filter((function(t){return t.visibleInFile}))},showList:function(){if(this.isRootFolder)return this.folderLogList;switch(this.showType){case a["I"].Artboard:return this.artboardLogList;case a["I"].File:return this.fileLogList;case a["I"].Folder:return this.folderLogList;default:return this.list}}},watch:{allShowListItemSelect:function(){this.resetShowListItemsOffsetTop()},showArtboardLogNow:function(t){t>0&&(this.clickShowType(a["I"].Artboard),this.logVisible=!0)},showType:function(){var t=this;this.resetShowListItemsOffsetTop(),this.$nextTick((function(){var e=t.$refs.list;e&&(e.scrollTop=0)}))},logVisible:function(t){var e=this;t?(this.$nextTick((function(){e.getBoxHeight()})),window.addEventListener("click",this.closeSelf,!0),this.needReloadOnOpen()?this.clickReload(!0):this.resetTimeFormat()):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},data:function(){return{finish:!1,scrollTop:0,boxHeight:0,lineHeight:65,listFetchState:c["a"].Normal,logVisible:!1,closeHandle:0,notClickClose:!1,updateTime:0,showType:a["I"].ALL,errorText:"",pageIndex:0,list:[]}},mounted:function(){var t=Object(c["K"])(zp,!0);switch(t){case a["I"].Artboard:case a["I"].File:case a["I"].Folder:this.showType=t;break}this.getBoxHeight()},created:function(){window.addEventListener("resize",this.onResize)},beforeDestroy:function(){window.removeEventListener("click",this.closeSelf,!0),window.removeEventListener("resize",this.onResize),clearTimeout(this.closeHandle)}},Jp=qp,Qp=(n("1823"),Object(Dr["a"])(Jp,mm,pm,!1,null,"1f631515",null)),Zp=Qp.exports,tv=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"pop-helper",on:{click:function(e){t.notClickClose=!0}}},[e("div",{staticClass:"box"},[t.inInteractionMode?e("div",{staticClass:"scene"},[e("h5",[t._v("原型预览快捷键")]),t._m(0),t._m(1),t._m(2),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到上1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↑")])])]),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到下1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↓")])])])]):e("div",{staticClass:"scene"},[e("h5",[t._v("场景快捷键")]),t._m(3),t._m(4),e("dl",{staticClass:"text"},[e("dt",[t._v("缩放视图")]),e("dd",[e("span",{staticClass:"key"},[t._v("鼠标滚轮")]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))])])]),t._m(5),e("h5",[t._v("画板详情快捷键")]),t._m(6),t._m(7),t._m(8),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到上1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↑")])])]),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到下1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↓")])])]),e("h5",[t._v("获取指定2个节点坐标关系")]),e("div",{staticClass:"text"},[t._v("1.左键单击选择1个节点.")]),t._m(9),e("div",{staticClass:"text"},[t._v("*多次单击可穿透选中下方被遮挡节点")])])])]):t._e()},ev=[function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("屏幕全屏切换")]),e("dd",[e("span",{staticClass:"key"},[t._v("F1")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("网页全屏切换")]),e("dd",[e("span",{staticClass:"key"},[t._v("F2")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("显隐左侧边栏")]),e("dd",[e("span",{staticClass:"key"},[t._v("F3")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("上下视图平移")]),e("dd",[e("span",{staticClass:"key"},[t._v("鼠标滚轮")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("左右视图平移")]),e("dd",[e("span",{staticClass:"key"},[t._v("鼠标滚轮")]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("shift")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text"},[e("span",[t._v("缩放/平移视图时同时按下")]),e("span",{staticClass:"key"},[t._v("alt")]),e("span",[t._v("键可加速操作")])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("切换到画板列表")]),e("dd",[e("span",{staticClass:"key"},[t._v("F1")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("切换到图层列表")]),e("dd",[e("span",{staticClass:"key"},[t._v("F2")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("显隐左侧边栏")]),e("dd",[e("span",{staticClass:"key"},[t._v("F3")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text"},[e("span",[t._v("2.按住")]),e("span",{staticClass:"key"},[t._v("shift")]),e("span",[t._v(",左键单击需要比对的节点.")])])}],nv={methods:{clickHelper:function(t){this.$store.commit("setHelperVisible",t)},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.notClickClose?t.notClickClose=!1:t.clickHelper(!1)}),50)}},computed:{commandKey:function(){return this.inMacOS?"command":"ctrl"},visible:function(){return this.$store.state.helper.visible}},data:function(){return{closeHandle:0,notClickClose:!1}},watch:{visible:function(t){t?window.addEventListener("click",this.closeSelf,!0):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},beforeDestroy:function(){window.removeEventListener("click",this.closeSelf,!0),clearTimeout(this.closeHandle)}},rv=nv,iv=(n("9b3d"),Object(Dr["a"])(rv,tv,ev,!1,null,"2fdbaa33",null)),ov=iv.exports,av=function(){var t=this,e=t._self._c;return e("div",{staticClass:"path-nav"},[t.inCloudMode?e("CloudFolders"):t._e(),e("div",{staticClass:"navs"},t._l(t.navs,(function(n,r){var i;return e("div",{key:r,staticClass:"nav-item",class:{"no-link":!n.link}},[e("a",{staticClass:"name",attrs:{href:null!==(i=n.aHref)&&void 0!==i?i:"javascript:;",title:n.name},on:{click:function(e){return e.preventDefault(),t.clickNav(n)}}},[t._v(t._s(n.name))]),t.showArtboardPages&&n.selectPages?e("PathNavArtboardPages"):t._e()],1)})),0)],1)},sv=[],cv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-folders"},[e("div",{ref:"navHome",staticClass:"nav-home"},[e("div",{staticClass:"btn-home",on:{click:function(e){return t.clickGoHome()}}}),e("div",{staticClass:"line"}),e("div",{staticClass:"btn-cloud-folders",class:{on:t.allFoldersBoxVisible},on:{click:function(e){return t.setAllFoldersBoxVisible(!t.allFoldersBoxVisible,!0)}}})]),e("CloudFoldersBox",{on:{hideBox:t.hideBox}})],1)},lv=[],uv=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.allFoldersBoxVisible,expression:"allFoldersBoxVisible"}],staticClass:"cloud-folders-box",on:{click:function(e){t.notAutoHideThisTime=!0}}},[e("div",{staticClass:"head"},[t.isSupportWebItemSearch?t._e():e("div",{staticClass:"update-tip"},[e("a",{attrs:{target:"_blank",href:t.cloudPageUrl}},[t._v("升级私有云部署包")]),t._v("可全局搜索画板、文件")]),e("div",{staticClass:"filters"},[e("div",{staticClass:"search",class:{on:t.inputFocused||t.inSearchMode}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",attrs:{autocomplete:"off",type:"text",placeholder:t.searchInputDefaultText,maxlength:"20",spellcheck:"false"},domProps:{value:t.searchText},on:{focus:function(e){t.inputFocused=!0},blur:function(e){t.inputFocused=!1},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t.inSearchMode?e("a",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:t.cleanSearchText}}):t._e()]),t.inCloudMode&&!t.inSearchMode&&!t.inputFocused&&t.inAllFoldersShowType?e("FolderNavSortMenu",{attrs:{mini:!0,supportRectSort:!1}}):t._e()],1)]),e("ul",{staticClass:"show-type"},[e("li",{staticClass:"btn btn-recent",class:{on:t.showType===t.EnumUserRecordType.Recent},attrs:{title:"最近访问过的文件夹"},on:{click:function(e){return t.clickShowType(t.EnumUserRecordType.Recent)}}},[t._v("最近")]),e("li",{staticClass:"btn btn-favorite-folder",class:{on:t.showType===t.EnumUserRecordType.FavoriteFolder},attrs:{title:"收藏的文件夹"},on:{click:function(e){return t.clickShowType(t.EnumUserRecordType.FavoriteFolder)}}},[t._v("收藏")]),e("li",{staticClass:"btn btn-favorite-artboard",class:{on:t.showType===t.EnumUserRecordType.FavoriteArtboard},attrs:{title:"标记为待开发的画板"},on:{click:function(e){return t.clickShowType(t.EnumUserRecordType.FavoriteArtboard)}}},[t._v("待开发")])]),e("div",{ref:"box",staticClass:"box",on:{scroll:t.onBoxScroll}},[e("div",{staticClass:"real-height",class:{"in-search":t.inSearchMode},style:{height:t.boxRealHeight}},[!t.inAllFoldersShowType||t.fetchState!==t.FetchState.Fetching&&t.fetchState!==t.FetchState.Error?!(t.isSupportWebItemSearch&&t.inSearchMode||!t.inAllFoldersShowType)||t.searchState!==t.FetchState.Fetching&&t.searchState!==t.FetchState.Error?0===t.showList.length?e("div",{staticClass:"empty",domProps:{textContent:t._s(t.emptyText)}}):e("div",{staticClass:"front",style:t.frontStyle},[t._l(t.showList,(function(n){return[n.isArtboard?e("CloudArtboardItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,artboard:n.folder,searchText:t.searchText,inSearchMode:t.inSearchMode},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder}}):n.isFile?e("CloudFileItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,file:n.folder,searchText:t.searchText,inSearchMode:t.inSearchMode},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder}}):e("CloudFolderItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,folder:n.folder,inSearchMode:t.inSearchMode,searchText:t.searchText,isSupportNetDiskFile:t.isSupportNetDiskFile},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder}})]}))],2):e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:t.searchLoadingText,errorText:t.searchErrorText,isLoading:t.searchState===t.FetchState.Fetching,isError:t.searchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.goSearch()}}})],1):e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:t.searchLoadingText,errorText:t.errorText,isLoading:t.fetchState===t.FetchState.Fetching,isError:t.fetchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1)])]),t.contextMenu.visible?e("CloudItemMenu",{attrs:{showType:t.showType,x:t.contextMenu.x,y:t.contextMenu.y,item:t.contextMenu.item},on:{close:t.hideContextMenu,cleanSearchText:t.cleanSearchText,clickGoParentFolder:t.clickGoParentFolder,clickSetFavoriteFolder:t.clickSetFavoriteFolder,clickSetArtboardStatus:t.clickSetArtboardStatus}}):t._e()],1)},dv=[],hv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-folder-item",class:t.itemClass,attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickGoFold.apply(null,arguments)}}},[e("div",{staticClass:"triangle",class:{on:!t.inSearchMode&&t.inAllFoldersShowType&&t.hasChild},style:t.style,attrs:{title:"展开/收起"},on:{click:t.clickChildVisible}}),e("div",{staticClass:"icon",class:{private:t.isFolderSharePrivateCode,"share-sm":t.isFolderShareSpecifyMembers},on:{click:t.clickChildVisible}}),e("div",{staticClass:"name",on:{click:t.clickGoFold}},[t._l(t.texts,(function(n,r){return e("span",{key:r,class:{light:n.light}},[t._v(t._s(n.text))])})),e("span",{staticClass:"art-count"},[t._v(t._s(t.countText))])],2)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.folder},on:{clickItem:t.clickGoFold,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},fv=[],mv=function(){var t=this,e=t._self._c;return t.showAllParents||t.showOnlyParent?e("div",{staticClass:"parents",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickItem(t.item)}}},[t.showAllParents?t._l(t.item.parents,(function(n,r){return e("div",{key:r},[e("span",{on:{click:function(e){return e.target!==e.currentTarget?null:t.clickGoParentFolder({parentId:n.id})}}},[t._v(t._s(n.name))])])})):t.showOnlyParent?[t.item.parentId>0?e("span",[t._v("...")]):t._e(),e("div",[e("span",{on:{click:function(e){return t.clickGoParentFolder(t.item)}}},[t._v(t._s(t.item.parent.name))])])]:t._e()],2):t._e()},pv=[],vv={methods:{clickItem:function(t){this.$emit("clickItem",t)},clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)}},computed:{showAllParents:function(){return!!this.item.parents},showOnlyParent:function(){return!this.showAllParents&&!!this.item.parent}},props:{item:Object}},bv=vv,gv=(n("813d"),Object(Dr["a"])(bv,mv,pv,!1,null,"4e0cf502",null)),wv=gv.exports,xv={components:{ItemFolderParents:wv},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){!this.inSearchMode&&this.inAllFoldersShowType||this.$emit("onContextMenu",t,{item:this.folder,isFolder:!0})},clickChildVisible:function(){var t,e,n=this.folder,r=this.inSearchMode,i=this.inAllFoldersShowType,o=this.hasChild;if(!r&&i&&o){var s=!n.childsVisible;if(n.childsVisible=s,0!==(null!==(t=null===(e=n.childs)||void 0===e?void 0:e.length)&&void 0!==t?t:0)&&0!==n.id){var u=Object(c["S"])(a["a"],!0);Object(l["k"])(u)||(u={});var d=n.id;s?u[d]=1:delete u[d],Object(c["tb"])(a["a"],u)}}},clickGoFold:function(){var t=this.folder.id,e=this.inSearchMode,n=this.inArtboardMode,r=this.cloudCurrentFolderId,i=this.inAllFoldersShowType,o=this.currentSelect;return!e&&i&&o?this.clickChildVisible():r===t?(n&&this.setCurArtboard(null),void this.$emit("cleanSearchText")):void Object(c["W"])(t)}},computed:{useTimeSort:function(){return this.$store.state.cloudListSort.sortType===a["n"].Date},isFolderSharePrivateCode:function(){return this.folder.shareMode===a["v"].PrivateCode},isFolderShareSpecifyMembers:function(){return this.folder.shareMode===a["v"].SpecifyMembers},userSpecifyMemberAuthority:function(){var t;return null!==(t=this.folder.userSpecifyMemberAuthority)&&void 0!==t?t:a["w"].ReadWrite},itemClass:function(){var t=this.folder,e=this.currentSelect,n=this.hasChild,r=this.inSearchMode,i=this.inAllFoldersShowType,o={on:e,open:t.childsVisible&&n,max:r||!i};if(null!=t.color){var s=a["t"].getName(t.color);s&&(o[s]=1)}return o},texts:function(){var t=this.folder.name;return this.inSearchMode?Object(c["ub"])(t,this.searchText):[{light:!1,text:t}]},countText:function(){var t,e=this.folder,n=this.useTimeSort,r=this.inSearchMode,i=this.inAllFoldersShowType;return"(".concat(n&&!r&&i?Object(l["b"])(e.updateTimes):e.artboardCount+(null!==(t=e.fileCount)&&void 0!==t?t:0)+e.folderCount,")")},title:function(){return Qe(this.folder)},hasChild:function(){var t,e=this.folder.childs;return(null!==(t=null===e||void 0===e?void 0:e.length)&&void 0!==t?t:0)>0},style:function(){var t=this.folder.deepCount;return null==t&&(t=0),!this.inSearchMode&&this.inAllFoldersShowType||(t=0),{"padding-left":t*this.deepPadding+"px"}},currentSelect:function(){var t=this.cloudCurrentFolderId,e=this.folder;return t===e.id}},data:function(){return{deepPadding:16}},props:{folder:Object,inSearchMode:Boolean,searchText:String,isSupportNetDiskFile:Boolean,inAllFoldersShowType:Boolean}},yv=xv,kv=(n("2138"),Object(Dr["a"])(yv,hv,fv,!1,null,"67cf0798",null)),Cv=kv.exports,Sv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-artboard-item",class:{on:t.currentSelect,max:t.inSearchMode||!t.inAllFoldersShowType},attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:t.clickGoArtboard}},[e("div",{staticClass:"icon"}),e("div",{staticClass:"name"},t._l(t.texts,(function(n,r){return e("span",{key:r,class:{light:n.light}},[t._v(t._s(n.text))])})),0)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.artboard},on:{clickItem:t.clickGoArtboard,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},Tv=[],Ov={components:{ItemFolderParents:wv},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){!this.inSearchMode&&this.inAllFoldersShowType||this.$emit("onContextMenu",t,{item:this.artboard,isArtboard:!0})},clickGoArtboard:function(){var t=this.artboard,e=t.parentId,n=t.guid,r=t.viewUrl,i=this.cloudCurrentFolderId,o=this.curArtboardGuid;if(i!==e)location.href=r;else if(o!=n){var a=this.documentArtboards.find((function(t){var e;return(null===(e=t.artboard)||void 0===e?void 0:e.guid)===n}));if(a)return void this.setCurArtboard(a);location.href=r}}},computed:{texts:function(){return Object(c["ub"])(this.artboard.name,this.searchText)},title:function(){return en(this.artboard)},currentSelect:function(){var t=this.cloudCurrentFolderId,e=this.artboard,n=this.curArtboardGuid;return t===e.parentId&&n===e.guid}},props:{inAllFoldersShowType:Boolean,artboard:Object,inSearchMode:Boolean,searchText:String}},Iv=Ov,Av=(n("6333"),Object(Dr["a"])(Iv,Sv,Tv,!1,null,"ec6eae1c",null)),Fv=Av.exports,jv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-file-item",class:{max:t.inSearchMode||!t.inAllFoldersShowType,on:t.currentSelect},attrs:{title:t.title},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickGoFile.apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:t.clickGoFile}},[e("span",{staticClass:"icon-netdiskfile",class:t.iconCls}),e("div",{staticClass:"name"},t._l(t.texts,(function(n,r){return e("span",{key:r,class:{light:n.light}},[t._v(t._s(n.text))])})),0)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.file},on:{clickItem:t.clickGoFile,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},_v=[],Mv={components:{ItemFolderParents:wv},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){!this.inSearchMode&&this.inAllFoldersShowType||this.$emit("onContextMenu",t,{item:this.file,isFile:!0})},clickGoFile:function(){this.clickNetDiskFile(this.file,!0)}},computed:{texts:function(){return Object(c["ub"])(this.file.name,this.searchText)},iconCls:function(){var t=this.file;return t?a["L"].getName(t.fileType,a["M"].Small):null},title:function(){return tn(this.file)},currentSelect:function(){var t=this.cloudCurrentFolderId,e=this.file,n=this.curNetDiskFile;return t===e.parentId&&(null===n||void 0===n?void 0:n.viewUrl)===e.viewUrl}},props:{file:Object,inSearchMode:Boolean,searchText:String,inAllFoldersShowType:Boolean}},Lv=Mv,Dv=(n("c3ad"),Object(Dr["a"])(Lv,jv,_v,!1,null,"5be1f064",null)),Pv=Dv.exports,Nv=function(){var t=this,e=t._self._c;return t.item?e("div",{staticClass:"cloud-item-menu",style:t.menuStyle,on:{contextmenu:function(t){t.preventDefault()}}},[t.item.isFile?[t.canOnlineView?e("div",{staticClass:"item",on:{click:function(e){return t.clickNetDiskFile(t.item.item,!0)}}},[t._v("查看详情")]):t._e(),e("div",{staticClass:"item",on:{click:function(e){return t.copyNetdiskFileViewUrl(t.item.item)}}},[t._v("复制链接")]),e("div",{staticClass:"item",on:{click:function(e){return t.clickDownloadNetDiskFile(t.item.item)}}},[t._v("下载文件")])]:t._e(),t.item.isArtboard?e("div",{staticClass:"item",on:{click:t.clickGoArtboard}},[t._v("查看画板")]):t._e(),e("div",{staticClass:"item",on:{click:t.clickGoParentFolder}},[t._v("前往所在文件夹")]),t.showType===t.EnumUserRecordType.FavoriteFolder?e("div",{staticClass:"item",on:{click:t.clickSetFavoriteFolder}},[t._v("取消收藏")]):t._e(),t.showType===t.EnumUserRecordType.FavoriteArtboard?e("div",{staticClass:"item",on:{click:t.clickSetArtboardStatus}},[t._v("取消标记")]):t._e()],2):t._e()},Ev=[],Rv={methods:{clickSetFavoriteFolder:function(){this.$emit("clickSetFavoriteFolder",this.item.item)},clickSetArtboardStatus:function(){this.$emit("clickSetArtboardStatus",this.item.item)},close:function(){this.$emit("close")},clickGoArtboard:function(){var t=this.item.item,e=t.parentId,n=t.guid,r=t.viewUrl,i=this.cloudCurrentFolderId,o=this.curArtboardGuid;if(i!==e)location.href=r;else if(o!=n){var a=this.documentArtboards.find((function(t){var e;return(null===(e=t.artboard)||void 0===e?void 0:e.guid)===n}));if(a)return void this.setCurArtboard(a);location.href=r}},clickGoParentFolder:function(){this.$emit("clickGoParentFolder",this.item.item)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.close()}),150))},initEvent:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},computed:{EnumUserRecordType:function(){return a["Y"]},canOnlineView:function(){var t=this.item;return!!t&&(!!t.isFile&&this.isNetdiskFileCanOnlineView(t.item))},menuStyle:function(){return{top:this.y+"px",left:this.x+"px"}}},watch:{item:function(t){this.initEvent(!!t)}},data:function(){return{handle:0}},props:{showType:Number,item:Object,x:Number,y:Number},beforeDestroy:function(){this.initEvent(!1)},created:function(){this.initEvent(!!this.item)}},Vv=Rv,Bv=(n("95b7"),Object(Dr["a"])(Vv,Nv,Ev,!1,null,"0dca83e6",null)),Hv=Bv.exports,Uv={components:{CloudFolderItem:Cv,NetworkLoading:Mc,CloudArtboardItem:Fv,CloudFileItem:Pv,CloudItemMenu:Hv,FolderNavSortMenu:Rd},methods:{clickSetFavoriteFolder:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,s,c,l,u,d,h,f,m,p,v;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.searchData,o=e.cloudCurrentFolderId,n.next=3,e.setUserFavoriteFolder(t,a["q"].None);case 3:s=n.sent,s&&(c=null===i||void 0===i?void 0:i.findIndex((function(t){return t.id===s.id})),-1!==c&&(l=i.splice(c,1),u=Object(Bt["a"])(l,1),d=u[0],d&&(h=d.parentId,f=d.id,m=s.updateTimes,p=s.status,h===o&&(v=e.cloudSubFolders.find((function(t){return t.id===f})),v&&(v.customStatus=p,v.customStatusUpdateTimes=m)))));case 5:case"end":return n.stop()}}),n)})))()},clickSetArtboardStatus:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,s,c,l,u,d,h,f,m,p,v,b,g;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.searchData,o=e.cloudCurrentFolderId,n.next=3,e.setUserFavoriteArtboard(t,a["i"].None);case 3:s=n.sent,s&&(c=null===i||void 0===i?void 0:i.findIndex((function(t){return t.id===s.id})),-1!==c&&(l=i.splice(c,1),u=Object(Bt["a"])(l,1),d=u[0],d&&(h=d.parentId,f=d.id,m=d.cid,p=s.updateTimes,v=s.status,b=null!==f&&void 0!==f?f:m,h===o&&(g=e.documentArtboards.find((function(t){var e;return(null===t||void 0===t||null===(e=t.artboard)||void 0===e?void 0:e.cid)===b})),g&&(g.customStatus=v,g.customStatusUpdateTimes=p)))));case 5:case"end":return n.stop()}}),n)})))()},clickShowType:function(t){this.showType===t&&(t=a["Y"].None),this.showType=t},clickGoParentFolder:function(t){var e=t.parentId,n=this.inArtboardMode,r=this.cloudCurrentFolderId,i=this.inCloudViewerMode,o=this.documentName;i&&r===e?n?this.setCurArtboard(null):this.showTextTip("已在目录「".concat(o,"」")):Object(c["W"])(e)},hideContextMenu:function(){this.contextMenu.visible=!1},onContextMenu:function(t,e){if(e){var n=this.contextMenu,r=t.pageX,i=t.pageY;n.x=r,n.y=i,n.visible=!0,n.item=e}},cleanSearchText:function(){var t;this.searchText="",null===(t=this.$refs.searchInput)||void 0===t||t.focus()},clickReload:function(){$r.notSupportGetFolders(this.cloudVersion)?document.location.reload():this.getFoldersData()},hideBoxNotClean:function(){this.$emit("hideBox")},getFoldersData:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.allFoldersBoxVisible&&t.inAllFoldersShowType){e.next=2;break}return e.abrupt("return");case 2:if(t.fetchState!==c["a"].Fetching){e.next=4;break}return e.abrupt("return");case 4:return t.fetchState=c["a"].Fetching,t.errorText=null,e.prev=6,e.next=9,t.getAllFolders(!1,!0);case 9:n=e.sent,t.fetchState=c["a"].Success,t.folderData=n,t.scrollToCurrentFolder(),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](6),t.fetchState=c["a"].Error,t.errorText=e.t0;case 19:case"end":return e.stop()}}),e,null,[[6,15]])})))()},scrollToCurrentFolder:function(){var t=this.cloudCurrentFolderId,e=this.renderList,n=this.lineHeight,r=this.boxHeight,i=this.boxScrollTop,o=this.folderData,a=this.inSearchMode;if(o){var s=e.findIndex((function(e){return e.id===t}));if(-1===s&&!a){var c=o.folders.find((function(e){return e.id===t}));if(null!=c){var l={};while(c&&!l[c.id])l[c.id]=1,c.id>0&&0!==c.childs.length&&(c.childsVisible=!0),c=c.parent;s=this.renderList.findIndex((function(e){return e.id===t}))}}if(-1!==s){var u=Math.round(s*n-r/2);u!==i&&this.setScrollTop(u)}}},setScrollTop:function(t){var e=this;this.$nextTick((function(){var n=e.$refs.box;n&&(n.scrollTop=t)}))},getFolderVisible:function(t){if(!t)return!1;if(!(t.id>=0))return!1;if(t.id>0&&!t.parent)return!1;while(null!=(t=t.parent))if(!t.childsVisible)return!1;return!0},resetBoxData:function(){var t=this;this.allFoldersBoxVisible&&this.$nextTick((function(){var e=t.$refs.box;e&&(t.boxHeight=e.offsetHeight,t.boxScrollTop=e.scrollTop)}))},onResize:function(){this.resetBoxData()},onBoxScroll:function(){var t=this.$refs.box;t&&(this.boxScrollTop=t.scrollTop)},goSearch:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,u,d,h;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.searchText,i=t.inSearchMode,o=t.inAllFoldersShowType,a=t.showType,s=t.isSupportWebItemSearch,u=t.allFoldersBoxVisible,u){e.next=3;break}return e.abrupt("return");case 3:if(s){e.next=5;break}return e.abrupt("return");case 5:if(i||!o){e.next=7;break}return e.abrupt("return");case 7:if(d=t.searchStatus=Object(c["pb"])(),t.searchState=c["a"].Fetching,e.prev=9,!o){e.next=16;break}return e.next=13,t.searchWebItem(n);case 13:e.t0=e.sent,e.next=19;break;case 16:return e.next=18,t.getUserRecentDataAsync(a,n);case 18:e.t0=e.sent;case 19:if(h=e.t0,d==t.searchStatus){e.next=22;break}return e.abrupt("return");case 22:if(Object(l["i"])(h)){e.next=24;break}throw new Error("返回值格式异常");case 24:t.searchState=c["a"].Success,t.searchData=h,e.next=34;break;case 28:if(e.prev=28,e.t1=e["catch"](9),d==t.searchStatus){e.next=32;break}return e.abrupt("return");case 32:t.searchErrorText=e.t1,t.searchState=c["a"].Error;case 34:case"end":return e.stop()}}),e,null,[[9,28]])})))()},getUserRecentDataAsync:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o,s,c,l;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.supportRecents){r.next=2;break}throw"私有云部署包版本「".concat(n.cloudVersion,"」过低,请先升级私有云部署包");case 2:return r.next=4,n.getUserRecentsAsync(t,e,-1);case 4:l=r.sent,r.t0=t,r.next=r.t0===a["Y"].Recent?8:r.t0===a["Y"].FavoriteFolder?9:r.t0===a["Y"].FavoriteArtboard?10:11;break;case 8:return r.abrupt("return",null!==(o=null===l||void 0===l?void 0:l.recentFolders)&&void 0!==o?o:[]);case 9:return r.abrupt("return",null!==(s=null===l||void 0===l?void 0:l.favFolders)&&void 0!==s?s:[]);case 10:return r.abrupt("return",null!==(c=null===l||void 0===l?void 0:l.favArtboards)&&void 0!==c?c:[]);case 11:return r.abrupt("return",[]);case 12:case"end":return r.stop()}}),i)})))()}},computed:{refreshRecents:function(){return this.$store.state.cloud.refreshRecents},searchLoadingText:function(){var t=this.inSearchMode,e=this.searchText,n=this.showType;if(t)return"正在搜索关键词 ".concat(e);switch(n){case a["Y"].FavoriteArtboard:return"正在获取待开发画板信息...";case a["Y"].FavoriteFolder:return"正在获取收藏的文件夹信息...";case a["Y"].Recent:return"正在获取最近文件夹信息...";default:return"正在获取文件夹信息..."}},EnumUserRecordType:function(){return a["Y"]},supportRecents:function(){return!$r.notSupportRecentData(this.cloudVersion)},inAllFoldersShowType:function(){switch(this.showType){case a["Y"].Recent:case a["Y"].FavoriteFolder:case a["Y"].FavoriteArtboard:return!1;default:return!0}},cloudPageUrl:function(){return"https://www.marklion.cn/cloud.shtml?invoke=MarkLion.WebSearch&ver=".concat(this.cloudVersion,"&deploy=1")},searchInputDefaultText:function(){var t=this.isSupportWebItemSearch,e=this.showType;if(!t)return"搜索文件夹";switch(e){case a["Y"].Recent:return"搜索最近访问的文件夹";case a["Y"].FavoriteFolder:return"搜索收藏的文件夹";case a["Y"].FavoriteArtboard:return"搜索标记为待开发的画板";default:return"全局搜索文件夹、文件和画板"}},isSupportWebItemSearch:function(){return this.inCloudMode&&!$r.notSupportWebItemSearch(this.cloudVersion)},isSupportNetDiskFile:function(){return this.inCloudMode&&!$r.notSupportNetDisk(this.cloudVersion)},emptyText:function(){var t=this.showType,e=this.inSearchMode,n=this.searchText,r=this.isSupportWebItemSearch;switch(t){case a["Y"].FavoriteArtboard:return e?'未找到包含 "'.concat(n,'" 的待开发画板'):"暂无标记为待开发的画板";case a["Y"].FavoriteFolder:return e?'未找到包含 "'.concat(n,'" 的收藏文件夹'):"暂无收藏的文件夹";case a["Y"].Recent:return e?'最近访问记录中未找到包含 "'.concat(n,'" 的文件夹'):"暂无最近访问的文件夹记录";default:return r||!e||'未找到文件夹名包含 "'.concat(n,'" 的文件夹'),e?'未找到包含 "'.concat(n,'" 的文件夹、文件或画板'):"未找到文件夹、文件或画板"}},boxRealHeight:function(){return this.renderList.length*this.lineHeight+2+"px"},inSearchMode:function(){return this.searchText.length>0},frontStyle:function(){var t=this.showList,e=this.lineHeight,n=0;if(t.length>0){var r=t[0].index;n=r*e}return{"margin-top":n+"px"}},showList:function(){var t=this.renderList,e=this.preloadCount,n=this.lineHeight,r=this.boxScrollTop,i=this.boxHeight,o=e*n,s=new d["a"],c=(new d["a"]).set(0,r-o,100,i+2*o),l=[];return t.forEach((function(t,e){var r;(s.set(0,e*n,100,n),Object(d["f"])(s,c))&&l.push({folder:t,index:e,key:null!==(r=t.id)&&void 0!==r?r:t.url,isArtboard:t.localSearchType===a["Z"].Artboard,isFile:t.localSearchType===a["Z"].File})})),l},renderList:function(){var t,e=this,n=this.fetchState,r=this.inSearchMode,i=this.inAllFoldersShowType,o=this.cloudListSort,a=this.folderData;if(r||!i){if(this.isSupportWebItemSearch){var s=this.searchState,l=this.searchData;return s==c["a"].Success?l:[]}if(n!==c["a"].Success)return[];var u=this.searchText;u=u.toLowerCase(),t=a.folders.filter((function(t){return-1!==t.nameLower.indexOf(u)}))}else{if(n!==c["a"].Success)return[];t=a.sortBy(o).filter((function(t){return e.getFolderVisible(t)}))}return t},lineHeight:function(){return this.inSearchMode||!this.inAllFoldersShowType?46:32},cloudListSort:function(){return this.$store.state.cloudListSort},cloudListSortKey:function(){var t=this.cloudListSort;return"".concat(t.sortType,":").concat(t.orderDesc)},watchSearchKey:function(){var t=this.allFoldersBoxVisible,e=this.searchText,n=this.showType,r=this.inAllFoldersShowType,i=this.inSearchMode;return!t||r&&!i?null:"".concat(n,"/").concat(e)},infoKey:function(){var t=this.showType,e=this.searchText;return"".concat(t).concat(e)}},watch:{"refreshRecents.favoriteFolder":function(t){0!==t&&this.allFoldersBoxVisible&&this.showType===a["Y"].FavoriteFolder&&this.goSearch()},"refreshRecents.favoriteArtboard":function(t){0!==t&&this.allFoldersBoxVisible&&this.showType===a["Y"].FavoriteArtboard&&this.goSearch()},showType:function(){this.hideContextMenu()},cloudListSortKey:function(){this.scrollToCurrentFolder()},infoKey:function(t){this.sessionInfoKeyIniting||Object(c["tb"])(a["e"],t)},watchSearchKey:function(t){t&&(this.setScrollTop(0),this.goSearch())},allFoldersBoxVisible:function(){this.resetBoxData(),this.inAllFoldersShowType&&this.getFoldersData()},inAllFoldersShowType:function(t){t&&this.getFoldersData()}},data:function(){return{searchFetchStateCache:Object(M["a"])(Object(M["a"])({},a["Y"].FavoriteArtboard,null),a["Y"].FavoriteFolder,null),sessionInfoKeyIniting:!0,showType:0,inputFocused:!1,notAutoHideThisTime:!1,FetchState:c["a"],folderData:null,fetchState:c["a"].Normal,errorText:null,searchText:"",boxHeight:0,boxScrollTop:0,preloadCount:1,searchState:c["a"].Normal,searchErrorText:null,searchData:null,searchHandle:0,searchStatus:null,contextMenu:{visible:!1,x:0,y:0,item:null}}},created:function(){if(window.addEventListener("resize",this.onResize),this.allFoldersBoxVisible){var t=Object(c["S"])(a["e"],!1);if(Object(l["j"])(t)){var e=+t[0];"number"===typeof e&&(this.showType=e,this.searchText=t.substr(1))}}else Object(c["nb"])(a["e"]);this.sessionInfoKeyIniting=!1},beforeDestroy:function(){clearTimeout(this.autoHideHandle),window.removeEventListener("resize",this.onResize)},mounted:function(){this.resetBoxData(),this.getFoldersData()}},$v=Uv,Gv=(n("e593"),Object(Dr["a"])($v,uv,dv,!1,null,"54753bda",null)),Wv=Gv.exports,zv={components:{CloudFoldersBox:Wv},methods:{clickGoHome:function(){Object(c["W"])(0)},hideBox:function(){this.setAllFoldersBoxVisible(!1,!1)},setAllFoldersBoxVisible:function(t,e){this.$store.commit("setAllFoldersBoxVisible",t),e&&Object(c["nb"])(a["a"])},setGuideRect:function(){this.setBeginnerGuideRect(a["k"].GlobalCloudFolderBoxMenu,"navHome",a["j"].TopLeft)}},computed:{allFoldersBoxVisible:function(){return this.$store.state.cloud.allFoldersBoxVisible}},watch:{inArtboardMode:function(){this.hideBox()}},mounted:function(){this.setGuideRect()}},Yv=zv,Xv=(n("5781"),Object(Dr["a"])(Yv,cv,lv,!1,null,"05e23556",null)),Kv=Xv.exports,qv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-artboard-page"},[e("div",{staticClass:"page-current",attrs:{title:"点击切换显示的页面"},on:{click:function(e){t.visible=!t.visible}}},[t._v(t._s(t.currentPageName))]),t.visible?e("div",{staticClass:"page-list"},[e("ul",[e("li",{class:{on:!t.filterDocumentGuid,"nav-all":!0},attrs:{title:t.allPageName},on:{click:function(e){return t.clickItem(null)}}},[t._v(" "+t._s(t.allPageName)),e("span",{staticClass:"art-count"},[t._v("("+t._s(t.documentArtboards.length)+")")])]),t._l(t.sortDocumentsWithSketchDocument,(function(n){return[n.docSeparator?e("li",{key:n.guid+"_sep",staticClass:"sep"}):t._e(),e("li",{key:n.guid,class:t.itemCls(n),attrs:{title:n.docFullName},on:{click:function(e){return t.clickItem(n)}}},[t._v(" "+t._s(n.name)),e("span",{staticClass:"art-count"},[t._v("("+t._s(n.arts.length)+")")])])]}))],2)]):t._e()])},Jv=[],Qv={methods:{itemCls:function(t){var e=a["K"].getClassName(t.type);return Object(M["a"])(Object(M["a"])(Object(M["a"])({},e,!!e),"on",this.filterDocumentGuid===t.guid),"f-xd",t.fileType===a["r"].XD)},clickItem:function(t){var e,n=null!==(e=null===t||void 0===t?void 0:t.guid)&&void 0!==e?e:null;this.$store.commit("setFilterDocumentGuid",n)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.visible=!1}),100))}},computed:{sortDocumentsWithSketchDocument:function(){return this.$store.state.sortDocumentsWithSketchDocument},currentPageName:function(){var t,e,n,r=this.filterDocumentGuid;return r&&(n=this.sortDocumentsWithSketchDocument.find((function(t){return t.guid===r}))),null!==(t=null===(e=n)||void 0===e?void 0:e.name)&&void 0!==t?t:this.allPageName}},watch:{visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},data:function(){return{allPageName:"全部页面",visible:!1,handle:0}},beforeDestroy:function(){clearTimeout(this.handle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)}},Zv=Qv,tb=(n("8bd9"),Object(Dr["a"])(Zv,qv,Jv,!1,null,"0d4aa9f6",null)),eb=tb.exports,nb={components:{CloudFolders:Kv,PathNavArtboardPages:eb},methods:{clickNav:function(t){t.link&&setTimeout((function(){t.link()}),100)}},computed:{showArtboardPages:function(){return!this.inNetDiskFileMode&&this.documents.length>1},navs:function(){var t=this,e=[],n=this.inCloudMode,r=this.inCloudViewerMode,i=this.inArtboardMode,o=this.curArtboard,a=this.cloudCurrentFolderId,s=this.curFileInfo,l=this.inNetDiskFileMode;if(n){var u=this.cloudName,d=this.cloudParentFolder;i||(0===a?e.push({name:u||"私有云根目录",link:null}):d&&e.push({name:0===d.id&&u||d.name,id:d.id,aHref:Object(c["E"])(d.id),link:function(){Object(c["W"])(this.id)}}))}if(n&&this.cloudFolderNotFound?e.push({name:this.cloudFolderInSpecify?"没有访问权限":"链接已失效",link:null}):n&&0==a||e.push({name:this.documentName,selectPages:!0,link:i?function(){t.setCurArtboard(null)}:l?function(){Object(c["W"])(a)}:null,aHref:r||l?Object(c["E"])(a):null}),i){var h,f,m=null!==(h=null===o||void 0===o||null===(f=o.artboard)||void 0===f?void 0:f.name)&&void 0!==h?h:"";m&&e.push({name:m,link:null})}else if(l){var p,v=null!==(p=null===s||void 0===s?void 0:s.name)&&void 0!==p?p:"";v&&e.push({name:v,link:null})}return e}}},rb=nb,ib=(n("8aa6"),Object(Dr["a"])(rb,av,sv,!1,null,"dd4a9354",null)),ob=ib.exports,ab=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-info"},[e("div",{staticClass:"nickname",class:{on:t.menuVisible},attrs:{title:t.showTitle},on:{click:t.clickShowMenu}},[e("div",{ref:"nickName",staticClass:"nickname-guide"}),e("UserFace",{attrs:{canClick:!1}})],1),t.menuVisible?e("menu",{class:{min:!t.inCloudMode},on:{click:t.clickMenu}},[t.cloudIsLogin?[e("div",{staticClass:"u-info",attrs:{title:t.showTitle}},[e("div",{staticClass:"name"},[t._v(t._s(t.showName))]),e("div",{staticClass:"email"},[t._v(t._s(t.showEmail))])]),e("div",{staticClass:"line"}),e("div",{staticClass:"item",on:{click:function(e){return t.clickRecycle()}}},[t._v("回收站")]),e("div",{staticClass:"item",on:{click:function(e){return t.clickSetNickName()}}},[t._v("修改昵称")])]:t._e(),t.inCloudViewerMode?[e("div",{staticClass:"item",attrs:{title:"在「画布视图」模式中开启极速渲染模式,画板再多也不卡顿更流畅"},on:{click:t.clickArtRenderInCanvasMode}},[t._v(" 极速模式 "),e("Checkbox2",{attrs:{text:"",selected:t.artRenderInCanvasMode},on:{click:t.clickEmpty}})],1),t.artShowInListMode||t.inArtboardMode?t._e():e("div",{staticClass:"item",attrs:{title:"在列表页的「画布视图」模式下，右下角显示「画板地图」，便于快速定位画板"},on:{click:t.clickShowArtListMap}},[t._v(" 画板地图 "),e("Checkbox2",{attrs:{text:"",selected:t.showArtListMap},on:{click:t.clickEmpty}})],1),t.inArtboardMode?t._e():e("div",{staticClass:"item",attrs:{title:"在列表页的「画布视图」模式中, 展示从XD/Sketch/Figma导出的原型连线"},on:{click:t.clickArtboardShowInteractionLine}},[t._v(" 显示原型连线 "),e("Checkbox2",{attrs:{text:"",selected:t.artboardShowInteractionLine},on:{click:t.clickEmpty}})],1),t.inArtboardMode?[e("div",{staticClass:"item",attrs:{title:"启用后, 带评注的评论将在「标注」模式下通过浮层展示"},on:{click:t.clickPointCommentShowAlways}},[t._v(" 标注显示评注 "),e("Checkbox2",{attrs:{text:"",selected:t.pointCommentShowAlways},on:{click:t.clickEmpty}})],1),e("div",{staticClass:"item",attrs:{title:"隐藏后，「标注」模式下切图图层边缘不会再标识虚线框"},on:{click:t.clickSliceBorderLineHide}},[t._v(" 隐藏切图虚线框 "),e("Checkbox2",{attrs:{text:"",selected:t.sliceBorderLineHide},on:{click:t.clickEmpty}})],1)]:t._e()]:t._e(),t.inInteractionMode?[e("div",{staticClass:"item",attrs:{title:"开启后,热区将一直显示在原型所在节点上"},on:{click:t.clickInteractionRectAlwaysVisible}},[t._v(" 原型热区常显 "),e("Checkbox2",{attrs:{text:"",selected:t.interactionRectAlwaysVisible},on:{click:t.clickEmpty}})],1)]:t._e(),e("a",{staticClass:"item",attrs:{href:"https://www.marklion.cn/?".concat(t.urlQueryString),target:"_blank"}},[t._v("官方网站")]),e("a",{staticClass:"item",attrs:{href:"https://user.marklion.cn/router/linkto.ashx?id=10017&".concat(t.urlQueryString),target:"_blank"}},[t._v("帮助中心")]),e("a",{staticClass:"item",attrs:{href:"https://user.marklion.cn/router/linkto.ashx?id=10018&".concat(t.urlQueryString),target:"_blank"}},[t._v("反馈建议")]),t.inCloudMode?[e("div",{staticClass:"line"}),t.cloudIsLogin?e("div",{staticClass:"item btn-logout",on:{click:function(e){return t.clickLogout()}}},[t._v("退出登录")]):e("div",{staticClass:"button light login",on:{click:t.clickLogin}},[t._v("登录")])]:t._e()],2):t._e()])},sb=[],cb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userface",class:{on:t.canClick},attrs:{title:t.title},on:{click:function(e){return e.stopPropagation(),t.clickUserFace.apply(null,arguments)}}},[t.showIcon?e("div",{staticClass:"icon"}):e("div",{staticClass:"user",class:{tourist:!t.cloudUserIsDesigner}},[t._v(t._s(t.iconText))])])},lb=[],ub={methods:{clickUserFace:function(){this.$emit("click")}},computed:{showIcon:function(){return!this.cloudIsLogin},iconText:function(){if(this.showIcon)return"";var t=this.cloudNickName;return Object(l["j"])(t)||(t=this.cloudUserEmail),t[t.length-1]}},props:{title:String,canClick:Boolean}},db=ub,hb=(n("3251"),Object(Dr["a"])(db,cb,lb,!1,null,"77760090",null)),fb=hb.exports,mb=function(){var t=this,e=t._self._c;return e("label",{staticClass:"checkbox2",class:{on:t.selected},on:{click:t.click}},[t.text?e("i",{staticClass:"text"},[t._v(t._s(t.text))]):t._e(),t._m(0)])},pb=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"rect-icon"},[e("i")])}],vb={props:{text:String,selected:Boolean},methods:{click:function(){this.$emit("click",!this.selected)}}},bb=vb,gb=Object(Dr["a"])(bb,mb,pb,!1,null,null,null),wb=gb.exports,xb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"r-body r-body-row recycle-main"},[e("div",{staticClass:"r-body-l"},[e("Header",{attrs:{sortBy:t.reqData,keepDays:t.pageInfo.keepDays,typeTotal:t.pageInfo.typeTotal,isRenderHeader:t.isRenderHeader},on:{clickOrderDesc:t.clickOrderDesc,clickSortByType:t.clickSortByType,clickRecycleFilter:t.clickRecycleFilter,clickRefresh:function(e){return t.getData()},searchTextChanged:t.searchTextChanged}}),e("RecycleItem",{attrs:{filterUserAutoCoverage:t.filterUserAutoCoverage,isHeader:!0,item:null,useScroll:t.useScroll,sortBy:t.reqData,selectedItemId:t.selectedItemId},on:{clickSortByType:t.clickSortByType}}),t.isNotSupportRecycleCloudVersion||t.isError||t.fetching?e("NotSupportCloudVersionTip",{attrs:{errorText:t.errorText,isError:t.isError,isLoading:t.fetching,notSupportCloudVersion:t.isNotSupportRecycleCloudVersion},on:{clickReload:function(e){return t.getData()}}}):e("div",{staticClass:"r-body recycle-list"},[0===t.list.length?e("div",{staticClass:"empty-list"},[t.filterSearch?e("div",[t._v("未找到与“"+t._s(t.reqData.searchText)+"”相关的回收站文件")]):e("div",[t._v("没有内容")])]):[e("LazyList",{attrs:{list:t.list,lineHeight:54},on:{useScrollChanged:t.useScrollChanged},scopedSlots:t._u([{key:"default",fn:function(n){return n.item?e("RecycleItem",{key:n.item.id,attrs:{filterUserAutoCoverage:t.filterUserAutoCoverage,item:n.item,removing:t.removingId===n.item.id,useScroll:!1,sortBy:t.reqData,selectedItemId:t.selectedItemId},on:{clickItem:t.clickItem,clickRemove:t.clickRemove,clickRestore:t.clickRestore}}):t._e()}}],null,!0)}),e("Footer",{attrs:{pageInfo:t.pageInfo},on:{goPage:t.getData}})]],2)],1),t.moveTo.visible?e("CloudSelectFolderNew",{ref:"selectFolder",attrs:{title:"选择目标文件夹",autoOpenCurrentFolder:!1,historyFolderId:t.moveTo.parentId,selectFolder:null},on:{clickSelectFolder:t.clickMoveToSelectFolder,clickCancel:function(e){return t.clickMoveToCancel()},onFolderChanged:t.onFolderChanged}}):t._e()],1)},yb=[],kb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"r-body r-body-row cloud-sourcever-upgrade-tip"},[e("NetworkLoading",{attrs:{loadText:"正在获取回收站列表信息",errorText:t.renderErrorText,isLoading:t.isLoading,isError:t.isError,showCustomService:t.notSupportCloudVersion,reLoadText:"刷新"},on:{reload:t.clickReload}})],1)},Cb=[],Sb={components:{NetworkLoading:Mc},methods:{clickReload:function(){this.$emit("clickReload")}},computed:{renderErrorText:function(){var t=this.cloudVersionText,e=this.notSupportCloudVersion,n=this.errorText,r=this.cloudUserIsOwner;return e?"您的私有云部署版本过低".concat(t,"，").concat(r?"":"通知管理员","更新私有云部署包以启用回收站功能。"):null!==n&&void 0!==n?n:""},cloudVersionText:function(){var t=this.cloudVersion;return Object(l["j"])(t)&&t!==a["g"]?"(".concat(t,")"):""}},props:{notSupportCloudVersion:Boolean,isLoading:Boolean,isError:Boolean,isRenderHeader:Boolean,errorText:{type:[String,Error],default:null,validator:function(){return!0}}}},Tb=Sb,Ob=(n("cec5"),Object(Dr["a"])(Tb,kb,Cb,!1,null,"34acad74",null)),Ib=Ob.exports,Ab=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-select-folder"},[t.selectOpen?e("div",{staticClass:"pop-box"},[e("div",{staticClass:"box"},[t.title?e("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),e("main",[t.fetching?e("div",{staticClass:"loading"},[t._v("文件夹列表加载中,请稍后...")]):t.isError?e("div",{staticClass:"loading"},[e("div",{staticClass:"v"},[t._v(t._s(t.errorText))]),e("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:t.getCloudFolder}},[t._v("重新加载")])]):[e("div",{staticClass:"head"},[e("ul",{staticClass:"show-type"},[e("li",{staticClass:"btn btn-recent",class:{on:t.showType===t.EnumUserRecordType.Recent},attrs:{title:"最近访问过的文件夹"},on:{click:function(e){return t.clickShowType(t.EnumUserRecordType.Recent)}}},[t._v("最近")]),e("li",{staticClass:"btn btn-favorite-folder",class:{on:t.showType===t.EnumUserRecordType.FavoriteFolder},attrs:{title:"收藏的文件夹"},on:{click:function(e){return t.clickShowType(t.EnumUserRecordType.FavoriteFolder)}}},[t._v("收藏")])]),e("div",{staticClass:"search",class:{focused:t.inputFocus}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"input",attrs:{type:"text",maxlength:"256",placeholder:t.inputPlaceHolder,spellcheck:"false"},domProps:{value:t.searchText},on:{focus:function(e){t.inputFocus=!0},blur:function(e){t.inputFocus=!1},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),e("div",{staticClass:"btns"},[t.searchText?e("div",{staticClass:"btn-clear",on:{click:t.clickSearchClear}}):t._e(),t.inAllFoldersShowType?e("FolderNavSortMenu",{attrs:{mini:!0,supportRectSort:!1}}):t._e()],1)])]),e("div",{staticClass:"folder-list"},[e("FolderBox",{ref:"folderBox",attrs:{onlyFolderData:!0,inAllFoldersShowType:t.inAllFoldersShowType,showType:t.showType,searchText:t.searchText,searchSupportSort:!0,searchData:t.inAllFoldersShowType?t.searchData:t.favoriteSearchData,searchState:t.searchState,searchErrorText:t.searchErrorText,fetchState:t.fetchState,errorText:t.errorText,folderData:t.folderData,selectFolderId:t.preSelectFolder?t.preSelectFolder.id:-1},on:{clickFold:t.clickFold,clickGoParentFolder:t.clickGoParentFolder,onContextMenu:t.onContextMenu,search:t.getSearchData}})],1)]],2),e("footer",[t.notRenderMenu?e("div",{staticClass:"btn-folder-create off",on:{click:t.clickAddNewFolder}},[e("i"),t._v("新建文件夹")]):e("div"),e("div",[t.notRenderMenu?[e("div",{staticClass:"button cancel",on:{click:function(e){return t.clickCancel()}}},[t._v("取消")]),e("div",{staticClass:"button light yes",on:{click:function(e){return t.clickSelectFolder()}}},[t._v("确定")])]:e("div",{staticClass:"button yes light",on:{click:function(e){return t.clickCancel()}}},[t._v("关闭")])],2)])])]):t._e(),e("ContextMenu",{ref:"contextMenu"},[t.contextMenuData?e("dl",{staticClass:"contextmenu-box"},[t.inAllFoldersShowType&&t.contextMenuData.item.parent?e("dd",{on:{click:function(e){return t.clickFold(t.contextMenuData.item.parent,!0)}}},[t._v("选中父级")]):t._e(),t.showType===t.EnumUserRecordType.FavoriteFolder?e("dd",{on:{click:t.clickSetFavoriteFolder}},[t._v("取消收藏")]):t._e()]):t._e()])],1)},Fb=[],jb=function(){var t=this,e=t._self._c;return e("div",{ref:"box",staticClass:"folders-box",on:{scroll:t.onBoxScroll}},[e("div",{staticClass:"real-height",class:{"in-search":t.inSearchMode},style:{height:t.boxRealHeight}},[!t.inAllFoldersShowType||t.fetchState!==t.FetchState.Fetching&&t.fetchState!==t.FetchState.Error?!t.inSearchMode&&t.inAllFoldersShowType||t.searchState!==t.FetchState.Fetching&&t.searchState!==t.FetchState.Error?0===t.showList.length?e("div",{staticClass:"empty",domProps:{textContent:t._s(t.emptyText)}}):e("div",{staticClass:"front",style:t.frontStyle},[t._l(t.showList,(function(n){return[n.isArtboard?e("CloudArtboardItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,artboard:n.value,searchText:t.searchText,inSearchMode:t.inSearchMode},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder,clickArtboard:t.clickArtboard}}):n.isFile?e("CloudFileItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,file:n.value,searchText:t.searchText,inSearchMode:t.inSearchMode},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder,clickFile:t.clickFile}}):e("CloudFolderItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,folder:n.value,selectFolderId:t.selectFolderId,inSearchMode:t.inSearchMode,searchText:t.searchText,searchSupportSort:t.searchSupportSort},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder,clickFold:t.clickFold}})]}))],2):e("div",{staticClass:"error",class:{"in-loading":t.searchState===t.FetchState.Fetching}},[e("NetworkLoading",{attrs:{loadText:t.searchLoadingText,errorText:t.searchErrorText,isLoading:t.searchState===t.FetchState.Fetching,isError:t.searchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.goSearch()}}})],1):e("div",{staticClass:"error",class:{"in-loading":t.fetchState===t.FetchState.Fetching}},[e("NetworkLoading",{attrs:{loadText:t.searchLoadingText,errorText:t.errorText,isLoading:t.fetchState===t.FetchState.Fetching,isError:t.fetchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.foldersReload()}}})],1)])])},_b=[],Mb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-folder-item",class:t.itemClass,attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)},click:function(e){return e.target!==e.currentTarget?null:t.clickFold.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickFold.apply(null,arguments)}}},[e("div",{staticClass:"triangle",class:{on:!t.inSearchMode&&t.inAllFoldersShowType&&t.hasChild},style:t.style,attrs:{title:"展开/收起"},on:{click:t.clickChildVisible}}),e("div",{staticClass:"icon",class:{private:t.isFolderSharePrivateCode,"share-sm":t.isFolderShareSpecifyMembers},on:{click:t.clickChildVisible}}),e("div",{staticClass:"name",on:{click:t.clickFold}},[t._l(t.texts,(function(n,r){return e("span",{key:r,class:{light:n.light}},[t._v(t._s(n.text))])})),e("span",{staticClass:"art-count"},[t._v(t._s(t.countText))])],2)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.folder},on:{clickItem:t.clickFold,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},Lb=[],Db=function(){var t=this,e=t._self._c;return t.showAllParents||t.showOnlyParent?e("div",{staticClass:"parents",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickItem(t.item)}}},[t.showAllParents?t._l(t.parents,(function(n,r){return e("div",{key:r},[e("span",{attrs:{title:n.name},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickGoParentFolder({parentId:null!=n.folderId?n.folderId:n.id})}}},[t._v(t._s(n.name))])])})):t.showOnlyParent?[t.item.parentId>0?e("span",[t._v("...")]):t._e(),e("div",[e("span",{attrs:{title:t.item.parent.name},on:{click:function(e){return t.clickGoParentFolder(t.item)}}},[t._v(t._s(t.item.parent.name))])])]:t._e()],2):t._e()},Pb=[],Nb={methods:{clickItem:function(t){this.$emit("clickItem",t)},clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)}},computed:{parents:function(){var t,e=this.item,n=e.parents,r=e.parent;if(Object(l["i"])(n))return n;n=[];while(r&&(t=null!==(i=r.folderId)&&void 0!==i?i:r.id)&&0!==t){var i;n.unshift(r),r=r.parent}return 0==n.length&&n.push({id:0,folderId:0,name:"根目录",parentId:0,shareMode:a["v"].Public}),n},showAllParents:function(){return this.parents.length>0},showOnlyParent:function(){return!this.showAllParents&&!!this.item.parent}},props:{item:Object}},Eb=Nb,Rb=(n("04d8"),Object(Dr["a"])(Eb,Db,Pb,!1,null,"c5691912",null)),Vb=Rb.exports,Bb={components:{ItemFolderParents:Vb},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){this.$emit("onContextMenu",t,{item:this.folder,isFolder:!0})},clickChildVisible:function(){var t,e,n=this.folder,r=this.inSearchMode,i=this.hasChild,o=this.inAllFoldersShowType;if(!r&&o&&i){var a=!n.childsVisible;n.childsVisible=a,0!==(null!==(t=null===(e=n.childs)||void 0===e?void 0:e.length)&&void 0!==t?t:0)&&n.id}},clickFold:function(){var t=this.currentSelect,e=this.inSearchMode,n=this.inAllFoldersShowType;if(!e&&n&&t)return this.clickChildVisible();this.$emit("clickFold",this.folder)}},computed:{useTimeSort:function(){return this.$store.state.cloudListSort.sortType===a["n"].Date},isFolderSharePrivateCode:function(){return this.folder.shareMode===a["v"].PrivateCode},isFolderShareSpecifyMembers:function(){return this.folder.shareMode===a["v"].SpecifyMembers},userSpecifyMemberAuthority:function(){var t;return null!==(t=this.folder.userSpecifyMemberAuthority)&&void 0!==t?t:a["w"].ReadWrite},itemClass:function(){var t=this.folder,e=this.currentSelect,n=this.hasChild,r=this.inSearchMode,i=this.inAllFoldersShowType,o={on:e,open:t.childsVisible&&n,max:r||!i};if(null!=t.color){var s=a["t"].getName(t.color);s&&(o[s]=1)}return o},texts:function(){var t=this.folder.name;return this.inSearchMode?Object(c["ub"])(t,this.searchText):[{light:!1,text:t}]},countText:function(){var t,e=this.folder,n=this.useTimeSort,r=this.inSearchMode,i=this.searchSupportSort,o=this.inAllFoldersShowType;return"(".concat(n&&(i||!r)&&o?Object(l["d"])(e.updateTimes):e.artboardCount+(null!==(t=e.fileCount)&&void 0!==t?t:0)+e.folderCount,")")},title:function(){return Qe(this.folder,!0)},hasChild:function(){var t,e=this.folder.childs;return(null!==(t=null===e||void 0===e?void 0:e.length)&&void 0!==t?t:0)>0},style:function(){var t=this.folder.deepCount;return null==t&&(t=0),!this.inSearchMode&&this.inAllFoldersShowType||(t=0),{"padding-left":t*this.deepPadding+"px"}},currentSelect:function(){var t=this.selectFolderId,e=this.folder;return t===e.id}},data:function(){return{deepPadding:16}},props:{folder:Object,inSearchMode:Boolean,searchText:String,inAllFoldersShowType:Boolean,searchSupportSort:Boolean,selectFolderId:Number}},Hb=Bb,Ub=(n("c358"),Object(Dr["a"])(Hb,Mb,Lb,!1,null,"c1503cb0",null)),$b=Ub.exports,Gb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-artboard-item",class:{on:t.currentSelect,max:t.inSearchMode||!t.inAllFoldersShowType},attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:t.clickArtboard}},[e("div",{staticClass:"icon"}),e("div",{staticClass:"name"},t._l(t.texts,(function(n,r){return e("span",{key:r,class:{light:n.light}},[t._v(t._s(n.text))])})),0)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.artboard},on:{clickItem:t.clickArtboard,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},Wb=[],zb={components:{ItemFolderParents:Vb},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){this.$emit("onContextMenu",t,{item:this.artboard,isArtboard:!0})},clickArtboard:function(){this.$emit("clickArtboard",this.artboard)}},computed:{texts:function(){return Object(c["ub"])(this.artboard.name,this.searchText)},title:function(){return en(this.artboard)},currentSelect:function(){return!1}},props:{inAllFoldersShowType:Boolean,artboard:Object,inSearchMode:Boolean,searchText:String}},Yb=zb,Xb=(n("be67"),Object(Dr["a"])(Yb,Gb,Wb,!1,null,"6932141c",null)),Kb=Xb.exports,qb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-file-item",class:{max:t.inSearchMode||!t.inAllFoldersShowType,on:t.currentSelect},attrs:{title:t.title},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickFile.apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:t.clickFile}},[e("span",{staticClass:"icon-netdiskfile",class:t.iconCls}),e("div",{staticClass:"name"},t._l(t.texts,(function(n,r){return e("span",{key:r,class:{light:n.light}},[t._v(t._s(n.text))])})),0)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.file},on:{clickItem:t.clickFile,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},Jb=[],Qb={components:{ItemFolderParents:Vb},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){this.$emit("onContextMenu",t,{item:this.file,isFile:!0})},clickFile:function(){this.$emit("clickFile",this.file)}},computed:{texts:function(){return Object(c["ub"])(this.file.name,this.searchText)},iconCls:function(){var t=this.file;return t?a["L"].getName(t.fileType,a["M"].Small):null},title:function(){return tn(this.file)},currentSelect:function(){return!1}},props:{file:Object,inSearchMode:Boolean,inAllFoldersShowType:Boolean,searchText:String}},Zb=Qb,tg=(n("6a77"),Object(Dr["a"])(Zb,qb,Jb,!1,null,"785b5e67",null)),eg=tg.exports,ng={components:{NetworkLoading:Mc,CloudFolderItem:$b,CloudFileItem:eg,CloudArtboardItem:Kb},methods:{scrollToTop:function(){var t=this.$refs.box;if(!t)return!1;t.scrollTop=0},scrollTo:function(t){if("function"!==typeof t)return!1;var e=this.renderList,n=this.$refs.box,r=this.lineHeight,i=this.boxHeight,o=this.boxScrollTop;if(!n)return!1;var a=e.findIndex(t);if(-1===a)return!1;var s=r*a,c=(new d["a"]).set(0,o,100,i),l=(new d["a"]).set(0,s,100,r);return c.isContans(l)||(s-=i/2-r/2,n.scrollTop=s),!0},scrollToCurrentOrTop:function(){var t=this.selectFolderId,e=this.inSearchMode;!e&&this.scrollTo((function(e){return e.localSearchType===a["Z"].Folder&&e.id===t}))||this.scrollToTop()},clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFile:function(t){this.$emit("clickFile",t)},clickFold:function(t){this.$emit("clickFold",t)},clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t,e){this.$emit("onContextMenu",t,e)},hideBoxNotClean:function(){this.$emit("hideBox")},cleanSearchText:function(){this.$emit("cleanSearchText")},foldersReload:function(){this.$emit("foldersReload")},goSearch:function(){this.$emit("search",this.searchText)},resetBoxData:function(){var t=this;this.$nextTick((function(){var e=t.$refs.box;e&&(t.boxHeight=e.offsetHeight,t.boxScrollTop=e.scrollTop)}))},onBoxScroll:function(){var t=this.$refs.box;t&&(this.boxScrollTop=t.scrollTop)},getFolderVisible:function(t){if(!t)return!1;if(!(t.id>=0))return!1;if(t.id>0&&!t.parent)return!1;while(null!=(t=t.parent))if(!t.childsVisible)return!1;return!0}},mounted:function(){this.resetBoxData()},created:function(){},watch:{searchText:function(){var t=this;this.$nextTick((function(){t.scrollToCurrentOrTop()}))},winRectChangeKey:function(){this.resetBoxData()}},computed:{searchLoadingText:function(){var t=this.inSearchMode,e=this.searchText,n=this.showType;if(t)return"正在搜索关键词 ".concat(e);switch(n){case a["Y"].FavoriteArtboard:return"正在获取待开发画板信息...";case a["Y"].FavoriteFolder:return"正在获取收藏的文件夹信息...";case a["Y"].Recent:return"正在获取最近文件夹信息...";default:return"正在获取文件夹信息..."}},FetchState:function(){return c["a"]},winRectChangeKey:function(){var t=this.winRect;return"".concat(t.width,"x").concat(t.height)},winRect:function(){return this.$store.state.winRect},emptyText:function(){var t=this.showType,e=this.inSearchMode,n=this.searchText,r=this.onlyFolderData;switch(t){case a["Y"].FavoriteArtboard:return e?'未找到包含 "'.concat(n,'" 的待开发画板'):"暂无标记为待开发的画板";case a["Y"].FavoriteFolder:return e?'未找到包含 "'.concat(n,'" 的收藏文件夹'):"暂无收藏的文件夹";case a["Y"].Recent:return e?'最近访问记录中未找到包含 "'.concat(n,'" 的文件夹'):"暂无最近访问的文件夹记录";default:var i=r?"文件夹":"文件夹、文件或画板";return e?'未找到包含 "'.concat(n,'" 的').concat(i):"未找到".concat(i)}},inSearchMode:function(){return this.searchText.length>0},boxRealHeight:function(){return this.renderList.length*this.lineHeight+2+"px"},preloadCount:function(){return 1},lineHeight:function(){return this.inSearchMode||!this.inAllFoldersShowType?46:32},frontStyle:function(){var t=this.showList,e=this.lineHeight,n=0;if(t.length>0){var r=t[0].index;n=r*e}return{"margin-top":n+"px"}},showList:function(){var t=this.renderList,e=this.preloadCount,n=this.lineHeight,r=this.boxScrollTop,i=this.boxHeight,o=e*n,s=new d["a"],c=(new d["a"]).set(0,r-o,100,i+2*o),l=[];return t.forEach((function(t,e){s.set(0,e*n,100,n);var r,i,o,u=t.localSearchType===a["Z"].Artboard,h=t.localSearchType===a["Z"].File,f=!u&&!h;if(u)r="artboard_".concat(null!==(i=null!==(o=t.id)&&void 0!==o?o:t.guid)&&void 0!==i?i:t.viewUrl);else if(h){var m;r="file_".concat(null!==(m=t.id)&&void 0!==m?m:t.viewUrl)}else{var p;r="folder_".concat(null!==(p=t.folderId)&&void 0!==p?p:t.id)}Object(d["f"])(s,c)&&l.push({value:t,index:e,key:r,isArtboard:u,isFile:h,isFolder:f})})),l},renderList:function(){var t,e=this,n=this.fetchState,r=this.inSearchMode,i=this.cloudListSort,o=this.folderData,a=this.inAllFoldersShowType;if(r||!a){var s=this.searchState,l=this.searchData;return s==c["a"].Success?l:[]}return n!==c["a"].Success?[]:(t=o.sortBy(i).filter((function(t){return e.getFolderVisible(t)})),t)},cloudListSort:function(){return this.$store.state.cloudListSort}},data:function(){return{boxHeight:0,boxScrollTop:0}},props:{onlyFolderData:{type:Boolean,default:!1},inAllFoldersShowType:{type:Boolean,default:!0},showType:{type:Number,default:a["Y"].None},searchText:String,searchState:Number,fetchState:Number,errorText:{validator:function(){return!0}},searchErrorText:{validator:function(){return!0}},searchData:Array,searchSupportSort:Boolean,folderData:Object,selectFolderId:Number}},rg=ng,ig=(n("8449"),Object(Dr["a"])(rg,jb,_b,!1,null,"2191db7d",null)),og=ig.exports,ag={components:{FolderNavSortMenu:Rd,FolderBox:og,ContextMenu:Ci},methods:{getUserRecentDataAsync:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o,s,c,l,u;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.supportRecents){r.next=2;break}throw"私有云部署包版本「".concat(n.cloudVersion,"」过低,请先升级私有云部署包");case 2:return l=n.cloudKey,r.next=5,n.getUserRecentsAsync(t,e,-1,{cloudKey:l});case 5:u=r.sent,r.t0=t,r.next=r.t0===a["Y"].Recent?9:r.t0===a["Y"].FavoriteFolder?10:r.t0===a["Y"].FavoriteArtboard?11:12;break;case 9:return r.abrupt("return",null!==(o=null===u||void 0===u?void 0:u.recentFolders)&&void 0!==o?o:[]);case 10:return r.abrupt("return",null!==(s=null===u||void 0===u?void 0:u.favFolders)&&void 0!==s?s:[]);case 11:return r.abrupt("return",null!==(c=null===u||void 0===u?void 0:u.favArtboards)&&void 0!==c?c:[]);case 12:return r.abrupt("return",[]);case 13:case"end":return r.stop()}}),i)})))()},getSearchData:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.searchText,i=t.inAllFoldersShowType,o=t.showType,!i){e.next=3;break}return e.abrupt("return");case 3:return a=t.searchStatus=Object(c["pb"])(),t.searchState=c["a"].Fetching,e.prev=5,e.next=8,t.getUserRecentDataAsync(o,n);case 8:if(s=e.sent,a==t.searchStatus){e.next=11;break}return e.abrupt("return");case 11:if(Object(l["i"])(s)){e.next=13;break}throw new Error("返回值格式异常");case 13:t.favoriteSearchData=s,t.searchState=c["a"].Success,t.$nextTick((function(){t.scrollToSelect()})),e.next=24;break;case 18:if(e.prev=18,e.t0=e["catch"](5),a==t.searchStatus){e.next=22;break}return e.abrupt("return");case 22:t.searchErrorText=e.t0,t.searchState=c["a"].Error;case 24:case"end":return e.stop()}}),e,null,[[5,18]])})))()},clickSetFavoriteFolder:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,s,c,l,u,d,h,f,m,p,v,b;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.contextMenuData,i=t.favoriteSearchData,o=t.cloudCurrentFolderId,n){e.next=3;break}return e.abrupt("return");case 3:return s=n.item,e.next=6,t.setUserFavoriteFolder(s,a["q"].None);case 6:c=e.sent,c&&(t.$store.commit("refreshRecents",a["Y"].FavoriteFolder),l=null===i||void 0===i?void 0:i.findIndex((function(t){return t.id===c.id})),-1!==l&&(u=i.splice(l,1),d=Object(Bt["a"])(u,1),h=d[0],h&&(f=h.parentId,m=h.id,p=c.updateTimes,v=c.status,f===o&&(b=t.cloudSubFolders.find((function(t){return t.id===m})),b&&(b.customStatus=v,b.customStatusUpdateTimes=p)))));case 8:case"end":return e.stop()}}),e)})))()},clickShowType:function(t){this.showType===t&&(t=a["Y"].None),this.showType=t},onContextMenu:function(t,e){var n;if(Object(l["k"])(e)&&t){var r=e.item,i=e.isFolder,o=void 0!==i&&i,s=e.isArtboard,c=void 0!==s&&s,u=e.isFile,d=void 0!==u&&u;switch(this.showType){case a["Y"].FavoriteFolder:break;case a["Y"].Recent:return;default:if(!o)return}this.contextMenuData={item:r,isFolder:o,isFile:d,isArtboard:c},null===(n=this.$refs.contextMenu)||void 0===n||n.$show(t.clientX,t.clientY)}},clickSearchClear:function(){var t;this.searchText="",null===(t=this.$refs.input)||void 0===t||t.focus()},fixParentChildsVisible:function(t){if(t&&!t.childsVisible)while(t&&t.id>=0)t.childsVisible=!0,t=t.parent},onFolderChanged:function(t){var e,n,r;if(Object(l["k"])(t)){var i=this.preSelectFolderOrRoot,o=this.cloudCurrentFolderId,s=this.cloudListSort;if(!i)return this.showTextTip("文件夹数据异常,请刷新列表");if(null===(e=this.folderData)||void 0===e||e.cleanFoldersCache(),t.parentId===i.id){i.childFolderCount++,i.folderCount++,this.fixParentChildsVisible(i),t.selected=!!t.selected,t.nameLower=t.name.toLowerCase(),t.childsVisible=!!t.childsVisible,t.rootId=null!==(n=null===(r=this.folderData)||void 0===r||null===(r=r.root)||void 0===r?void 0:r.id)&&void 0!==n?n:0,t.parent=i,t.childs=[],t.artboardCount=t.fileCount=t.folderCount=0,t.deepCount=i.deepCount+1,Object(c["y"])(t);var u=[i.childs];u.forEach((function(e){e&&(e.push(t),He(e,"updateTimes",a["m"].Folder,s))})),o==i.id&&this.$emit("onFolderChanged",t),this.clickPreSelectFolder(t),this.scrollToSelect()}}},scrollToParentButNotSelect:function(t){var e=this;if(t){var n=t.id,r=this.folderData.folders.find((function(t){return t.id===n}));r&&(this.inSearchMode&&(this.searchText="",this.fixParentChildsVisible(r)),this.$nextTick((function(){var t,n=r.id;null===(t=e.$refs.folderBox)||void 0===t||t.scrollTo((function(t){return t.id===n}))})))}},clickGoParentFolder:function(t){var e;if(t){var n=t.parentId;if(null!=n){var r=null===(e=this.folderData)||void 0===e?void 0:e.folders.find((function(t){return t.id===n}));r&&this.clickFold(r,!0)}}},clickFold:function(t,e){if(t){var n=this.inSearchMode,r=this.inAllFoldersShowType;if(n&&r){var i,o=t.id,a=this.folderData.folders.find((function(t){return t.id===o}));if(!a)return;this.searchText="";var s=null!==(i=a.parent)&&void 0!==i?i:this.folderData.root;this.fixParentChildsVisible(s),this.clickPreSelectFolder(t),this.scrollToSelect()}else this.clickPreSelectFolder(t),!0===e&&this.scrollToSelect()}},clickPreSelectFolder:function(t){t&&(this.preSelectFolder=t)},clickAddNewFolder:function(){this.showTextTip("新建文件夹功能仅在标记狮客户端可用")},getCloudFolder:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,l;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.fetching,i=t.preSelectFolderId,!n){e.next=3;break}return e.abrupt("return");case 3:return t.fetchState=c["a"].Fetching,t.isCloudVersionError=!1,o=t.fetchKey="".concat(Date.now(),"_").concat(i),e.prev=6,e.next=9,t.getAllFolders(!1,!0,t.autoOpenCurrentFolder);case 9:if(a=e.sent,o===t.fetchKey){e.next=12;break}return e.abrupt("return");case 12:if(t.folderData=a,s=a.folders.find((function(t){return t.id===i})),s){l=s;while(l&&l.id>0)l.childsVisible=!0,l=l.parent;t.selectFolder||t.$emit("clickSelectFolder",s)}t.preSelectFolder=s,t.scrollToSelect(),e.next=25;break;case 19:if(e.prev=19,e.t0=e["catch"](6),o===t.fetchKey){e.next=23;break}return e.abrupt("return");case 23:t.errorText=e.t0,t.fetchState=c["a"].Error;case 25:return e.prev=25,o===t.fetchKey&&t.fetchState===c["a"].Fetching&&(t.fetchState=c["a"].Success),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[6,19,25,28]])})))()},isReadonlyFolder:function(t){switch(t.userSpecifyMemberAuthority){case void 0:case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!1;default:return!0}},clickSelectFolder:function(){var t=this.preSelectFolder;if(!t||0===t.id)return this.selectOpen=!1,void this.$emit("clickSelectFolder",this.folderData.root,!0);this.isReadonlyFolder(t)?this.showTextTip("无法移动到文件夹「".concat(t.name,"」,您没有该文件夹的写入权限")):(this.selectOpen=!1,this.$emit("clickSelectFolder",t,!0))},clickCancel:function(){this.selectOpen=!1,this.$emit("clickCancel")},showSelectList:function(){this.selectOpen=!0},sortData:function(t){if(!t)return[];var e=this.sortType,n=this.orderDesc,r="updateTimes";return e===a["n"].Date?t.sort((function(t,e){var i=t[r]>e[r]?1:-1;return n?-i:i})):t.sort((function(t,e){var r=Object(c["hb"])(t.name,e.name);return n?-r:r})),t},scrollToSelect:function(){var t,e,n=this,r=null!==(t=null===(e=this.preSelectFolder)||void 0===e?void 0:e.id)&&void 0!==t?t:0;requestAnimationFrame((function(){n.$nextTick((function(){var t;null===(t=n.$refs.folderBox)||void 0===t||t.scrollTo((function(t){return t.id===r}))}))}))}},computed:{supportRecents:function(){return!$r.notSupportRecentData(this.cloudVersion)},watchSearchKey:function(){var t=this.searchText,e=this.showType,n=this.inAllFoldersShowType,r=this.selectOpen;return n||!r?null:"".concat(r,":").concat(e,"/").concat(t)},inputPlaceHolder:function(){switch(this.showType){case a["Y"].Recent:return"搜索最近访问的文件夹";case a["Y"].FavoriteFolder:return"搜索收藏的文件夹";default:return"搜索文件夹"}},inAllFoldersShowType:function(){switch(this.showType){case a["Y"].Recent:case a["Y"].FavoriteFolder:return!1;default:return!0}},EnumUserRecordType:function(){return a["Y"]},preSelectFolderOrRoot:function(){var t,e=this.preSelectFolder,n=this.folderData;if(e){var r;if(!n)return e;var i=e.id,o=null===(r=n.folders)||void 0===r?void 0:r.find((function(t){return t.id===i}));if(o)return o}return null!==(t=null===n||void 0===n?void 0:n.root)&&void 0!==t?t:null},preSelectFolderId:function(){var t=this.preSelectFolder;return t?t.id:this.historyFolderId},cloudListSort:function(){return this.$store.state.cloudListSort},sortTypeChangeValue:function(){var t=this.orderDesc,e=this.sortType;return"".concat(t,"_").concat(e)},orderDesc:function(){return this.cloudListSort.orderDesc},sortType:function(){return this.cloudListSort.sortType},inSearchMode:function(){return""!==this.searchText},emptyFolderText:function(){return this.inSearchMode?"未检索到匹配项":"没有子文件夹"},searchData:function(){var t=this.searchText,e=this.folderData,n=this.cloudListSort,r=this.inAllFoldersShowType;if(!r)return[];t=t.toLowerCase();var i=e.folders.filter((function(e){return-1!==e.nameLower.indexOf(t)}));return He(i,"updateTimes",a["m"].Folder,n),i},fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error},notRenderMenu:function(){var t=this.fetching,e=this.isError;return!(t||e)}},watch:{watchSearchKey:function(t){var e;t&&(null===(e=this.$refs.folderBox)||void 0===e||e.scrollToTop(),this.getSearchData())},showType:function(t){if(this.contextMenuData=null,t===a["Y"].None){var e=this.preSelectFolder;if(e){var n=e.id,r=this.folderData.folders.find((function(t){return t.id===n}));if(!r)return;this.fixParentChildsVisible(r.parent)}}this.scrollToSelect()},sortTypeChangeValue:function(){var t=this;requestAnimationFrame((function(){t.$nextTick((function(){var e,n;t.inSearchMode?null===(n=t.$refs.folderBox)||void 0===n||n.scrollToTop():null===(e=t.$refs.folderBox)||void 0===e||e.scrollToCurrentOrTop()}))}))},selectOpen:function(t){if(t){this.$emit("onSelectOpen");var e,n=this.preSelectFolder=this.selectFolder;if(n)null===(e=this.folderData)||void 0===e||e.resetFoldersChildVisible(n.id,null),this.scrollToSelect()}else this.searchText=""},selectFolder:function(t){this.preSelectFolder=t}},data:function(){return{showType:0,searchStatus:null,searchErrorText:null,favoriteSearchData:null,contextMenuData:null,fetchState:c["a"].Normal,searchState:c["a"].Success,inputFocus:!1,searchText:"",selectOpen:!1,isCloudVersionError:!1,errorText:"",folderData:null,preSelectFolder:null}},props:{autoOpenCurrentFolder:{type:Boolean,default:!0},title:String,selectFolder:{validator:function(){return!0}},historyFolderId:Number},created:function(){this.preSelectFolder=this.selectFolder,this.selectOpen=!0,this.getCloudFolder()}},sg=ag,cg=(n("c1cd"),Object(Dr["a"])(sg,Ab,Fb,!1,null,"71a8c976",null)),lg=cg.exports,ug=function(){var t=this,e=t._self._c;return e("div",{staticClass:"r-header no-bor"},[e("div",{staticClass:"r-title lr"},[e("div",[t._v("回收站"),e("span",{staticClass:"desc",domProps:{textContent:t._s("回收站内容保存 ".concat(t.keepDays," 天，到期后自动清理"))}})]),t.isRenderHeader?e("UserInputSearch",{attrs:{mini:!1,value:t.searchText,placeholder:t.cloudUserIsOwner?"搜索名称/操作成员":"搜索名称",maxlength:100},on:{input:t.onInputText,submit:t.onInputSubmit}}):t._e()],1),e("div",{staticClass:"base-info"},[e("div",{staticClass:"common-tabs"},[e("ul",t._l(t.FilterTypes,(function(n){return e("li",{key:n.type,class:{on:t.filterType===n.type},on:{click:function(e){return t.clickFilterType(n.type)}}},[t._v(" "+t._s(n.name)),n.count?e("span",{staticClass:"count",domProps:{textContent:t._s(n.count)}}):t._e()])})),0)]),t.isRenderHeader?e("div",{staticClass:"btns"},[e("HeaderSortMenu",{attrs:{sortBy:t.sortBy,typeTotal:t.typeTotal},on:{clickRecycleFilter:t.clickRecycleFilter,clickRefresh:t.clickRefresh,clickOrderDesc:t.clickOrderDesc,clickSortByType:t.clickSortByType}})],1):t._e()])])},dg=[],hg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"input-search",class:{min:t.searchInMinState,focus:t.inputFocused},attrs:{title:t.searchInMinState?t.placeholder:null}},[e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("input",{ref:"input",attrs:{type:"text",placeholder:"",maxlength:t.maxlength,spellcheck:"false"},domProps:{value:t.value},on:{input:t.onInput,focus:t.onFocus,blur:t.onBlur,compositionstart:function(e){t.composition=!0},compositionend:t.onCompositionEnd}}),t.searchPlaceHolderVisible?e("div",{staticClass:"placeholder",domProps:{textContent:t._s(t.placeholder)}}):t._e(),t.value?e("a",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:t.clickClear}}):t._e()])])},fg=[],mg={methods:{onSubmit:function(){var t=this.$refs.input;t&&this.$emit("submit",t.value)},clickClear:function(){var t=this.$refs.input;t&&(t.value="",t.focus()),this.$emit("input","",!0)},onCompositionEnd:function(t){this.composition=!1,this.onInput(t)},onInput:function(t){this.composition||this.$emit("input",t.target.value)},onFocus:function(){clearTimeout(this.handler),this.inputFocused=!0},onBlur:function(){var t=this;clearTimeout(this.handler),this.handler=setTimeout((function(){t.inputFocused=!1}),34)}},beforeDestroy:function(){clearTimeout(this.handler)},data:function(){return{inputFocused:!1,composition:!1,handler:0}},computed:{searchInMinState:function(){var t=this.inputFocused,e=this.value,n=this.composition,r=this.mini;return r&&!t&&!e&&!n},searchPlaceHolderVisible:function(){var t=this.inputFocused,e=this.value,n=this.composition,r=this.placeholder,i=this.mini;return!e&&!n&&(!i||t&&!!r)}},props:{placeholder:{type:String,default:""},maxlength:{type:Number,default:50},value:{type:String,default:""},mini:{type:Boolean,default:!0}}},pg=mg,vg=(n("3ce7"),Object(Dr["a"])(pg,hg,fg,!1,null,"917f8e00",null)),bg=vg.exports,gg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"source-sort-menu"},[t.cloudUserIsOwner?e("div",{staticClass:"btn-sorts btn-filters"},[e("div",{staticClass:"sort-mode"},[e("span",{staticClass:"name",domProps:{textContent:t._s(t.recycleFilterName)}}),e("div",{staticClass:"options"},t._l(t.RecycleFilters,(function(n){return e("div",{key:n,class:{on:t.filterUser===n},attrs:{title:t.EnumRecycleFilter.getDesc(n)},domProps:{textContent:t._s(t.EnumRecycleFilter.getName(n))},on:{click:function(e){return t.clickRecycleFilter(n)}}})})),0)])]):t._e(),e("div",{staticClass:"btn-sorts"},[e("div",{staticClass:"btn sort-order",class:{desc:!t.orderDesc},attrs:{title:t.orderDesc?"切换为升序":"切换为降序"},on:{click:function(e){return t.clickOrderDesc(!t.orderDesc)}}}),e("div",{staticClass:"sort-mode"},[e("span",{staticClass:"name",domProps:{textContent:t._s(t.orderTypeName)},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickOrderDesc(!t.orderDesc)}}}),e("div",{staticClass:"options"},[t._l(t.FileSortTypes,(function(n){return e("div",{key:n.type,class:{on:t.orderType===n.type},on:{click:function(e){return t.clickOrderType(n.type)}}},[t._v(t._s(n.name))])})),e("p",{staticClass:"line"}),e("div",{class:{on:!t.orderDesc},on:{click:function(e){return t.clickOrderDesc(!1)}}},[t._v("升序")]),e("div",{class:{on:t.orderDesc},on:{click:function(e){return t.clickOrderDesc(!0)}}},[t._v("降序")])],2)])]),e("div",{staticClass:"btn-refresh2",on:{click:t.clickRefresh}})])},wg=[],xg={methods:{clickRecycleFilter:function(t){this.$emit("clickRecycleFilter",t)},clickRefresh:function(){this.$emit("clickRefresh")},clickOrderType:function(t){this.$emit("clickSortByType",t)},clickOrderDesc:function(t){this.sortBy.sortOrder=t?a["R"].Desc:a["R"].Asc}},computed:{EnumRecycleFilter:function(){return a["O"]},recycleFilterName:function(){var t=this.filterUser;return a["O"].getName(t)},RecycleFilters:function(){return[a["O"].AllItem,a["O"].MyDelete,a["O"].AutoCoverage]},FileSortTypes:function(){var t=this.cloudUserIsOwner,e=this.filterUser,n=e===a["O"].AutoCoverage;return[a["S"].DelTime,a["S"].DelUserNick,a["S"].Name,a["S"].FileType].filter((function(e){return!(!t&&e===a["S"].DelUserNick||n&&e===a["S"].VersionCount)})).map((function(t){return{name:a["S"].getName(t),type:t}}))},orderTypeName:function(){var t=this.orderType;return"按".concat(a["S"].getName(t),"排序")},EnumRecycleItemSortType:function(){return a["S"]},filterUser:function(){var t;return null===(t=this.sortBy)||void 0===t?void 0:t.filterUser},orderType:function(){var t,e;return null!==(t=null===(e=this.sortBy)||void 0===e?void 0:e.sortType)&&void 0!==t?t:a["S"].DelTime},filterType:function(){var t,e;return null!==(t=null===(e=this.sortBy)||void 0===e?void 0:e.filterType)&&void 0!==t?t:a["T"].None},orderDesc:function(){var t;return(null===(t=this.sortBy)||void 0===t?void 0:t.sortOrder)===a["R"].Desc},viewModeMax:function(){return this.$store.state.sourceFileSet.viewModeMax}},props:{sortBy:Object,typeTotal:Object}},yg=xg,kg=(n("7215"),Object(Dr["a"])(yg,gg,wg,!1,null,"8a756f1a",null)),Cg=kg.exports,Sg={components:{HeaderSortMenu:Cg,UserInputSearch:bg},methods:{clickFilterType:function(t){this.sortBy.filterType=t},onInputSubmit:function(t){this.searchText=t,this.onSearch()},onInputText:function(t,e){t="string"===typeof t?t:"",this.searchText=t,e&&t!==this.searchTextWithPosted&&this.onSearch()},clickOrderDesc:function(t){this.$emit("clickOrderDesc",t)},clickSortByType:function(t){this.$emit("clickSortByType",t)},clickReturn:function(){this.$emit("clickReturn")},clickClear:function(){this.searchText="",this.onSearch()},onSearch:function(){this.searchTextWithPosted=this.searchText,this.$emit("searchTextChanged",this.searchText)},clickRecycleFilter:function(t){this.$emit("clickRecycleFilter",t)},clickRefresh:function(){this.$emit("clickRefresh")}},computed:{filterType:function(){var t,e;return null!==(t=null===(e=this.sortBy)||void 0===e?void 0:e.filterType)&&void 0!==t?t:a["T"].None},FilterTypes:function(){var t=this.filterUser,e=this.typeTotal,n=void 0===e?{}:e;return[a["T"].None,a["T"].Folder,a["T"].File,a["T"].Artboard,a["T"].SourceFile].filter((function(e){return!(t===a["O"].AutoCoverage&&e===a["T"].Folder)})).map((function(t){var e,r=null!==(e=n[t])&&void 0!==e?e:0;return{type:t,name:a["T"].getName(t),count:r>0?"(".concat(r,")"):""}}))},filterUser:function(){return this.sortBy.filterUser},EnumRecycleFilter:function(){return a["O"]}},props:{cloud:Object,sortBy:Object,fileCount:Number,typeTotal:Object,isRenderHeader:Boolean,keepDays:[Number,null]},data:function(){return{searchText:"",searchTextWithPosted:""}}},Tg=Sg,Og=(n("ed49"),Object(Dr["a"])(Tg,ug,dg,!1,null,"2b043ea8",null)),Ig=Og.exports,Ag=function(){var t=this,e=t._self._c;return e("div",{staticClass:"recycle-item",class:{scroll:t.isHeader&&t.useScroll,"recycle-item-head":t.isHeader,selected:t.isSelected},on:{click:t.clickItem,contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[t.isHeader?[e("div",{staticClass:"img"}),e("div",{staticClass:"name",class:Object(M["a"])({},t.sortByOrderName,t.sortBy.sortType===t.EnumRecycleItemSortType.Name),on:{click:function(e){return t.clickSortByType(t.EnumRecycleItemSortType.Name)}}},[t._v("名称")]),e("div",{staticClass:"deltime",class:Object(M["a"])({},t.sortByOrderName,t.sortBy.sortType===t.EnumRecycleItemSortType.DelTime),on:{click:function(e){return t.clickSortByType(t.EnumRecycleItemSortType.DelTime)}}},[t._v("删除时间")]),t.cloudUserIsOwner?e("div",{staticClass:"usernick",class:Object(M["a"])({},t.sortByOrderName,t.sortBy.sortType===t.EnumRecycleItemSortType.DelUserNick),on:{click:function(e){return t.clickSortByType(t.EnumRecycleItemSortType.DelUserNick)}}},[t._v("操作成员")]):t._e(),e("div",{staticClass:"control"},[t._v("操作")])]:[e("div",{staticClass:"img"},[null!=t.recyclePreviewItem?e("RecycleItemPreview",{attrs:{item:t.recyclePreviewItem}}):t._e()],1),e("div",{staticClass:"name mult"},[e("div",{staticClass:"item1"},[e("div",{staticClass:"name-text",attrs:{title:t.item.name},domProps:{textContent:t._s(t.item.name)}}),e("div",{staticClass:"include",attrs:{title:t.versionCount.title},domProps:{textContent:t._s(t.versionCount.text)}})]),e("div",{staticClass:"item2"},[e("div",{staticClass:"type",domProps:{textContent:t._s(t.typeName)}}),!t.isSourceFile&&t.item.parents?e("div",{staticClass:"from-parents",attrs:{title:"删除前路径: \n".concat(t.item.parents.map((function(t){return t.name})).join("/"))}},t._l(t.item.parents,(function(n,r){return e("div",{key:"".concat(r,":").concat(n.id)},[e("span",{staticClass:"name",domProps:{textContent:t._s(n.name)},on:{click:function(e){return t.clickFolder(n.id)}}})])})),0):t._e()])]),e("div",{staticClass:"deltime mult"},[e("div",{staticClass:"item1",attrs:{title:t.customDelTimeStr.title},domProps:{textContent:t._s(t.customDelTimeStr.text)}}),e("div",{staticClass:"item2",class:{light:t.customCleanTimeStr.light},attrs:{title:t.customCleanTimeStr.title},domProps:{textContent:t._s(t.customCleanTimeStr.text)}})]),t.cloudUserIsOwner?e("div",{staticClass:"usernick"},[e("div",{attrs:{title:t.userNick.title},domProps:{textContent:t._s(t.userNick.text)}})]):t._e(),e("div",{staticClass:"control",attrs:{"data-notselect":""}},[t.removing?e("div",{staticClass:"btn btn-removing"}):[t.canRemove?e("div",{staticClass:"btn btn-restore",class:{off2:!t.canRemove},attrs:{title:"从回收站还原"},on:{click:t.clickRestore}}):t._e()]],2)],t.contextMenu.visible&&t.canRemove?e("div",{ref:"contextmenu",staticClass:"context-menu",style:{left:"".concat(t.contextMenu.clientX,"px"),top:"".concat(t.contextMenu.clientY,"px")},attrs:{"data-notselect":""},on:{dblclick:function(t){t.stopPropagation()}}},[e("RecycleItemMenu",{attrs:{item:t.item},on:{clickBoxSelf:t.clickIgnoreContextMenuClose,clickRestore:t.clickRestore,clickRemove:t.clickRemove}})],1):t._e()],2)},Fg=[],jg=function(){var t=this,e=t._self._c;return e("div",{class:t.itemCls},[t.isFolder&&t.max?e("div",{staticClass:"img"},[t.isFolderSharePrivateCode?e("div",{staticClass:"lock-min"}):t.isFolderShareSpecifyMembers?e("div",{staticClass:"share-sm-min"}):t._e()]):t._e(),t.isFile&&0===t.imgSize.width&&0===t.imgSize.height?e("div",{staticClass:"icon-netdiskfile",class:t.netdiskIconCls}):t._e(),t.pathPreview?e("ArtboardPreviewImg",{attrs:{pathPreview:t.pathPreview,imgHeight:0},on:{resize:t.onPreviewImgResize,error:function(e){return t.onPreviewImgResize(0,0)}}}):t._e()],1)},_g=[],Mg={components:{ArtboardPreviewImg:Kc},methods:{onPreviewImgResize:function(t,e){var n=this.imgSize;n.width=t,n.height=e},resetImgSize:function(){var t=this.imgSize,e=this.pathPreview,n=Object(l["j"])(e)?-1:0;t.width=t.height=n}},computed:{netdiskIconCls:function(){var t,e=this.isFile,n=this.max;return e?a["L"].getName(null===(t=this.item)||void 0===t||null===(t=t.value)||void 0===t?void 0:t.fileType,n?a["M"].Big:a["M"].Small):"error-img"},pathPreview:function(){var t,e=this.isFolder;if(e)return null;var n=null===(t=this.item)||void 0===t||null===(t=t.value)||void 0===t?void 0:t.previewPath;return Object(l["j"])(n)?n:null},isFolderSharePrivateCode:function(){var t=this.isFolder,e=this.item.value;return t&&e.shareMode===a["v"].PrivateCode},isFolderShareSpecifyMembers:function(){var t=this.isFolder,e=this.item.value;return t&&e.shareMode===a["v"].SpecifyMembers},itemCls:function(){var t=[],e=this.item.value,n=this.isFolder,r=this.isFile,i=this.isArtboard,o=this.max;if(o&&t.push("max"),n){t.push("folder");var s=e,c=this.isFolderSharePrivateCode,l=this.isFolderShareSpecifyMembers;c?t.push("private"):l&&t.push("share-sm");var u=null===s||void 0===s?void 0:s.color;if(null!=u){var d=a["t"].getName(u);d&&t.push(d)}}else r?t.push("file"):i&&t.push("artboard");return t},isFolder:function(){return this.item.type===a["m"].Folder},isFile:function(){return this.item.type===a["m"].File},isArtboard:function(){return this.item.type===a["m"].Artboard}},mounted:function(){this.resetImgSize()},watch:{pathPreview:function(){this.resetImgSize()}},data:function(){return{imgSize:{width:-1,height:-1}}},props:{item:Object,max:Boolean}},Lg=Mg,Dg=(n("8a6e"),Object(Dr["a"])(Lg,jg,_g,!1,null,"20a50ba7",null)),Pg=Dg.exports,Ng=function(){var t=this,e=t._self._c;return e("ul",{on:{click:function(e){return e.target!==e.currentTarget?null:t.clickBoxSelf.apply(null,arguments)}}},[e("li",{domProps:{textContent:t._s("还原此项")},on:{click:t.clickRestore}}),t.cloudUserIsOwner?e("li",{staticClass:"light",on:{click:t.clickRemove}},[t._v("永久删除")]):t._e()])},Eg=[],Rg={methods:{clickBoxSelf:function(){this.$emit("clickBoxSelf")},clickRestore:function(){this.$emit("clickRestore")},clickRemove:function(){this.$emit("clickRemove")}},computed:{typeName:function(){var t;return a["T"].getMiniName(null===(t=this.item)||void 0===t?void 0:t.type)}},props:{item:Object}},Vg=Rg,Bg=(n("c04a"),Object(Dr["a"])(Vg,Ng,Eg,!1,null,"bd72f4d2",null)),Hg=Bg.exports,Ug={components:{RecycleItemPreview:Pg,RecycleItemMenu:Hg},methods:{clickFolder:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.goCloudPath({folderId:t,newWindow:!0});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),e.showTextTip(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},onContextmenu:function(t){var e=this;if(!this.isHeader){var n=t.clientX,r=t.clientY,i=this.contextMenu,o=this.isSelected;clearTimeout(i.handler),o||this.clickItem(t),i.visible?i.ignoreThisClick=!0:i.visible=!0,i.clientX=n,i.clientY=r,this.$nextTick((function(){if(i.visible){var t=window.innerWidth,n=window.innerHeight,r=e.$refs.contextmenu;if(r){var o=r.getBoundingClientRect(),a=t-o.width-3,s=n-o.height-3;i.clientX>a&&(i.clientX=a),i.clientY>s&&(i.clientY=s)}}}))}},clickIgnoreContextMenuClose:function(){var t=this.contextMenu;t.ignoreThisClick=!0},clickRemove:function(){this.$emit("clickRemove",this.item)},clickRestore:function(){this.$emit("clickRestore",this.item)},clickItem:function(t){var e=this.item,n=this.isSelected,r=this.removing;if(!r&&e){var i=this.inNotSelectTarget(t);this.$emit("clickItem",n&&!i?null:e)}},inNotSelectTarget:function(t){var e=null===t||void 0===t?void 0:t.target;if(!e)return!1;var n=document.body;while(e&&e!==n){var r;if(e.hasAttribute("data-notselect"))return!0;if(e=e.parentNode,null!==(r=e)&&void 0!==r&&r.classList.contains("item"))return!1}return!1},clickSortByType:function(t){this.$emit("clickSortByType",t)},clickCloseItemMenu:function(t){if(0===t.button||"contextmenu"===t.type){var e=this.contextMenu;clearTimeout(e.handler),e.ignoreThisClick?e.ignoreThisClick=!1:e.handler=setTimeout((function(){e.visible=!1}),66.67)}}},computed:{isSelected:function(){var t=this.selectedItemId,e=this.item,n=this.isHeader;return!n&&t===(null===e||void 0===e?void 0:e.id)},nameTitle:function(){var t=this.item,e=void 0===t?{}:t,n=e.parents,r=e.name;return n?"".concat(r,"\n--------------------\n").concat(n.map((function(t){return t.name})).join(" / ")):r},canRemove:function(){var t,e=this.cloudUserIsOwner,n=this.item,r=this.cloudUserKey;return e||(null===(t=n.delUser)||void 0===t?void 0:t.userKey)===r},userNick:function(){var t=this.item.delUser,e=void 0===t?{}:t,n=e.nickName,r=e.email;return{title:"".concat(n,"(").concat(r,")"),text:n}},versionCount:function(){var t=this.recycleFolderInfo,e=this.item,n=this.filterUserAutoCoverage;if(n)return{title:"版本ID: ".concat(e.versionIds),text:"#".concat(e.ext)};if(!t)return{title:"版本ID: ".concat(e.versionIds),text:"".concat(e.extInt,"个版本")};var r=t.folders,i=void 0===r?0:r,o=t.files,a=void 0===o?0:o,s=t.artboards,c=void 0===s?0:s,l=t.subFolders,u=void 0===l?0:l,d=t.subFiles,h=void 0===d?0:d,f=t.subArtboards,m=void 0===f?0:f;return{title:0===e.extInt?"空文件夹":"内含 ".concat([{count:i+u,name:"子文件夹"},{count:a+h,name:"文件"},{count:c+m,name:"画板"}].filter((function(t){return t.count>0})).reduce((function(t,e,n,r){var i;return i=n===r.length-1&&r.length>1?"和":n>0?"、":"","".concat(t).concat(i," ").concat(e.count," 个").concat(e.name)}),"")),text:"含".concat(i+u+a+h+c+m,"项")}},typeName:function(){var t=this.item;if(!t)return null;var e=t.type,n=a["T"].getName(e);return n},isSourceFile:function(){var t;return(null===(t=this.item)||void 0===t?void 0:t.type)===a["T"].SourceFile},customDelTimeStr:function(){var t=this.item.delTimes;return{text:Object(l["d"])(t),title:"删除时间: ".concat(Object(l["c"])(t))}},customCleanTimeStr:function(){var t=this.item.cleanTimes,e=function(t){var e=Math.floor(t/1e3),n=Math.floor(e/60),r=Math.floor(n/60),i=Math.floor(r/24);return i>0?"".concat(Math.round(Object(c["r"])(t/864e5,1)),"天后自动清理"):r>0?"".concat(Math.round(Object(c["r"])(t/36e5,1)),"小时后自动清理"):n>0?"".concat(Math.round(Object(c["r"])(t/6e4,1)),"分钟后自动清理"):e>=-60?"即将自动清理":void 0},n=t-Date.now();return{text:e(n),title:"自动清理时间: ".concat(Object(l["c"])(t)),light:!0}},recycleFolderInfo:function(){var t=this.item;if((null===t||void 0===t?void 0:t.type)!==a["T"].Folder)return null;var e=Object(c["wb"])(t.ext);return Object(l["k"])(e)||(e={}),e},recyclePreviewItem:function(){var t=this.item;if(!t)return null;switch(t.type){case a["T"].Folder:return{type:a["m"].Folder,value:this.recycleFolderInfo};case a["T"].File:var e=t.previewPath,n=t.fileType;return{type:a["m"].File,value:{previewPath:e,fileType:n}};case a["T"].Artboard:var r=t.previewPath,i=t.fileType;return{type:a["m"].Artboard,value:{previewPath:r,fileType:i}};case a["T"].SourceFile:var o,s=t.previewPath,c=t.fileType;switch(c){case a["r"].XD:o=a["L"].XD;break;case a["r"].SKETCH:o=a["L"].Sketch;break;case a["r"].FIGMA:o=a["L"].Figma;break;case a["r"].PHOTOSHOP:o=a["L"].PhotoShop;break;default:o=a["L"].Other;break}return{type:a["m"].File,value:{previewPath:s,fileType:o}};default:return null}},sortByOrderName:function(){switch(this.sortBy.sortOrder){case a["R"].Desc:return"desc";case a["R"].Asc:return"asc"}return""},EnumRecycleItemSortType:function(){return a["S"]}},watch:{"contextMenu.visible":function(t){var e=this,n=this.contextMenu;clearTimeout(n.handlerHide),t?n.handlerHide=setTimeout((function(){window.addEventListener("click",e.clickCloseItemMenu),window.addEventListener("contextmenu",e.clickCloseItemMenu)}),66.67):(window.removeEventListener("click",this.clickCloseItemMenu),window.removeEventListener("contextmenu",this.clickCloseItemMenu))}},beforeDestroy:function(){clearTimeout(this.contextMenu.handler),clearTimeout(this.contextMenu.handlerHide),window.removeEventListener("click",this.clickCloseItemMenu),window.removeEventListener("contextmenu",this.clickCloseItemMenu)},data:function(){return{contextMenu:{handler:0,handlerHide:0,visible:!1,ignoreThisClick:!1,x:0,y:0,clientX:0,clientY:0}}},props:{item:Object,isHeader:Boolean,useScroll:Boolean,sortBy:Object,selectedItemId:Number,filterUserAutoCoverage:Boolean,removing:Boolean}},$g=Ug,Gg=(n("1e0f"),Object(Dr["a"])($g,Ag,Fg,!1,null,"86630a18",null)),Wg=Gg.exports,zg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer"},[e("div"),e("div",{staticClass:"pages"},[e("div",{class:{off:t.pageInfo.pageIndex<=1},on:{click:function(e){return t.goPage(1)}}},[t._v("首页")]),e("div",{class:{off:t.pageInfo.pageIndex<=1},on:{click:function(e){return t.goPage(t.pageInfo.pageIndex-1)}}},[t._v("上一页")]),t._l(t.pages,(function(n){return e("div",{key:n,class:{current:n===t.pageInfo.pageIndex},on:{click:function(e){return t.goPage(n)}}},[t._v(t._s(n))])})),e("div",{class:{off:t.pageInfo.pageIndex>=t.pageInfo.pageCount},on:{click:function(e){return t.goPage(t.pageInfo.pageIndex+1)}}},[t._v("下一页")]),e("div",{class:{off:t.pageInfo.pageIndex>=t.pageInfo.pageCount},on:{click:function(e){return t.goPage(t.pageInfo.pageCount)}}},[t._v("尾页")])],2),e("p",[e("span",[t._v("共"+t._s(t.pageInfo.pageCount)+"页,"+t._s(t.pageInfo.count)+"项")])])])},Yg=[],Xg={methods:{goPage:function(t){t!==this.pageInfo.pageIndex&&this.$emit("goPage",t)}},computed:{pages:function(){for(var t=[],e=this.pageStart,n=this.pageEnd;e<=n;e++)t.push(e);return t},pageStart:function(){var t=this.pageInfo.pageIndex;return Math.max(1,t-5)},pageEnd:function(){var t=this.pageStart;return Math.min(t+9,this.pageInfo.pageCount)}},props:{pageInfo:Object}},Kg=Xg,qg=(n("cf87"),Object(Dr["a"])(Kg,zg,Yg,!1,null,"a7f84362",null)),Jg=qg.exports,Qg={components:{NotSupportCloudVersionTip:Ib,Header:Ig,LazyList:Ru,RecycleItem:Wg,Footer:Jg,CloudSelectFolderNew:lg},methods:{clickMoveToCancel:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.confirming=!0,t.moveTo.visible=!1,e.next=4,Object(c["yb"])(35);case 4:t.confirming=!1;case 5:case"end":return e.stop()}}),e)})))()},clickMoveToSelectFolder:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function o(){var s,c,l,u,d,h,f,m,p;return Object(r["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(s=e?Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.clickMoveToCancel();case 2:case"end":return t.stop()}}),t)}))):Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),t){o.next=4;break}return o.abrupt("return",s());case 4:if(c=n.moveTo,l=c.recycleInfo,u=c.parentId,l){o.next=7;break}return o.abrupt("return",s());case 7:if(d=l.recycleItem,0!==t.id||d.type!==a["T"].Artboard&&d.type!==a["T"].File){o.next=12;break}return n.showTextTip("".concat(a["T"].getMiniName(d.type),"不能被还原到根目录")),null===(h=n.$refs.selectFolder)||void 0===h||h.showSelectList(),o.abrupt("return");case 12:if(t.id!==u){o.next=15;break}return e&&(n.showTextTip("请选择新的文件夹"),null===(f=n.$refs.selectFolder)||void 0===f||f.showSelectList()),o.abrupt("return");case 15:return o.next=17,s();case 17:m=function t(e,n){return n?(e.push(n),t(e,n.id>0?n.parent:null)):e},p=m([],t).reverse().map((function(t){return{id:t.id,name:t.name}})),n.restoreContinue(d,{confirmAction:a["Q"].ResetFolder,parentId:t.id,parents:p});case 20:case"end":return o.stop()}}),o)})))()},onFolderChanged:function(){},autoHideSelectedItem:function(){if(!this.confirming&&!this.moveTo.visible){var t=Date.now()-this.selectedItemClickTime;t<34||(this.selectedItem=null)}},restoreContinue:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o,s,u,d,h,f,m,p,v,b,g,w,x,y,k,C,S,T,O;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=e.confirmAction,u=e.parentId,d=e.name,h=e.parents,s===a["Q"].RestoreToOriginal){r.next=12;break}return n.confirming=!0,r.next=6,n.confirm({title:"还原确认",text:"将还原".concat(a["T"].getMiniName(t.type),"「").concat(t.name,"」").concat(d?"并重命名为「".concat(d,"」"):"").concat(t.type===a["T"].Folder?"":1===t.extInt?"的版本 ".concat(t.versionIds):"的".concat(t.extInt,"个版本(").concat(t.versionIds,")")).concat(t.type!==a["T"].SourceFile&&(null===h||void 0===h?void 0:h.length)>0?"到「".concat(h.map((function(t){return t.name})).join("/"),"」"):""),yesText:"确认还原"});case 6:return f=r.sent,r.next=9,Object(c["yb"])(35);case 9:if(n.confirming=!1,f){r.next=12;break}return r.abrupt("return");case 12:if(!n.removing){r.next=15;break}return n.showTextTip("正在执行操作,请稍后"),r.abrupt("return");case 15:return null!==(o=u)&&void 0!==o||(u=-1),m=t.id,p=n.reqData.filterUser,r.prev=18,n.removingId=m,r.next=22,n.fetchPostCloudApi("recyclerestorebyweb",{body:{id:m,from:p===a["O"].AutoCoverage?a["N"].VersionArchived:a["N"].UserDeleted,action:s,parentId:u,name:d},json:!0});case 22:if(b=r.sent,n.removingId===m){r.next=25;break}return r.abrupt("return");case 25:if(Object(l["k"])(b)){r.next=27;break}throw new Error("还原失败,返回值异常");case 27:if(b.success){r.next=29;break}throw new Error(null!==(v=b.errMsg)&&void 0!==v?v:"还原失败了");case 29:if(g=b.data,Object(l["k"])(g)){r.next=32;break}throw Error("还原失败,返回值异常.");case 32:if(n.getData(),w=a["T"].getMiniName(g.type),g.type!==a["T"].SourceFile){r.next=39;break}return r.next=37,n.alert({title:"已还原".concat(w,"「").concat(g.name,"」，共 ").concat(null===(x=g.verIds)||void 0===x?void 0:x.split(",").map((function(t){return"#".concat(t.trim())})).filter((function(t){return t.length>1})).length," 个版本"),yesText:"我知道了"});case 37:r.next=51;break;case 39:if(!g.parent){r.next=50;break}return k=g.type===a["T"].Folder?g.id:g.parent.id,n.cloudCurrentFolderId===k&&n.$store.commit("autoGetFolderPrecisKey"),r.next=44,n.confirm({title:"还原成功",text:"".concat(w,"「").concat(g.name,"」").concat(g.type===a["T"].Folder?"":"(共 ".concat(null===(y=g.verIds)||void 0===y?void 0:y.split(",").map((function(t){return"#".concat(t.trim())})).filter((function(t){return t.length>1})).length," 个版本)"),"，已还原到文件夹「").concat(g.parent.name,"」"),yesText:"查看".concat(w),noText:"我知道了"});case 44:if(!r.sent){r.next=48;break}S=null,g.type===a["T"].File&&(T=g.verIds,Object(l["j"])(T)&&-1===T.indexOf(",")&&!isNaN(+T)&&(S=+T)),n.goCloudPath({folderId:k,artboardId:g.type===a["T"].Artboard?g.id:0,artboardGuid:g.type===a["T"].Artboard?g.guid:null,fileSecId:g.type===a["T"].File&&null!==(C=g.secId)&&void 0!==C?C:null,verId:S,fileUsePage:!0,newWindow:!0});case 48:r.next=51;break;case 50:n.alert({title:"还原成功",text:"已还原".concat(w,"「").concat(g.name,"」").concat(g.type===a["T"].Folder?"":"，共 ".concat(null===(O=g.verIds)||void 0===O?void 0:O.split(",").map((function(t){return"#".concat(t.trim())})).filter((function(t){return t.length>1})).length," 个版本")),yesText:"我知道了"});case 51:r.next=56;break;case 53:r.prev=53,r.t0=r["catch"](18),n.removingId===m&&n.alert({title:"还原失败",text:r.t0});case 56:return r.prev=56,n.removingId===m&&(n.removingId=0),r.finish(56);case 59:case"end":return r.stop()}}),i,null,[[18,53,56,59]])})))()},clickRestore:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var o,s,u,d,h,f,m,p,v;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(!e.removing){n.next=5;break}return e.showTextTip("正在执行操作,请稍后"),n.abrupt("return");case 5:return o=e.reqData.filterUser,n.prev=7,e.confirming=!0,n.next=11,Object(c["yb"])(10);case 11:return e.confirming=!1,e.removingId=t.id,n.next=15,e.fetchPostCloudApi("recyclerestoreprecheckbyweb",{body:new URLSearchParams({id:t.id,from:o===a["O"].AutoCoverage?a["N"].VersionArchived:a["N"].UserDeleted})});case 15:if(d=n.sent,e.removingId===t.id){n.next=18;break}return n.abrupt("return");case 18:if(Object(l["k"])(d)){n.next=20;break}throw new Error("操作失败,返回值异常");case 20:if(d.success){n.next=22;break}throw new Error(null!==(s=d.errMsg)&&void 0!==s?s:"操作失败了");case 22:if(h=d.data,Object(l["k"])(h)){n.next=25;break}throw Error("操作失败,返回值异常.");case 25:f={title:"回收站还原",text:null!==(u=h.msg)&&void 0!==u?u:"-",yesText:void 0,noText:void 0,showCancel:!1,yesAction:function(){},noAction:function(){}},m="".concat(a["T"].getMiniName(t.type)),p=function(){var n,r,i=e.moveTo;i.parentId=null!==(n=h.currentFromPaths?null===(r=h.currentFromPaths[h.currentFromPaths.length-1])||void 0===r?void 0:r.id:null)&&void 0!==n?n:0,i.recycleInfo={recycleItem:t,checkData:h},i.visible=!0},v=function(){var n=Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,s;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=null!==(i=t.name)&&void 0!==i?i:"",t.type===a["T"].File&&(s=s.replace(/\.[^.]+$/i,"")),n.prev=2,e.confirming=!0,n.next=6,e.prompt({title:"重命名".concat(m),text:s,placeholder:"请输入新的".concat(m,"名"),beforeYes:function(n){return n=n.trim(),Object(l["j"])(n)?t.type===a["T"].File&&/[\\/:*?"<>|]/.test(n)?(e.showTextTip("文件名含有非法字符,请修正文件名"),!1):n!==s||(e.showTextTip("请输入新的".concat(m,"名")),!1):(e.showTextTip("请输入新的".concat(m,"名")),!1)},maxLength:256,noText:"取消",yesText:"确认"});case 6:return o=n.sent.trim(),n.next=9,Object(c["yb"])(35);case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n["catch"](2),n.next=15,Object(c["yb"])(35);case 15:return n.abrupt("return");case 16:return n.prev=16,e.confirming=!1,n.finish(16);case 19:e.restoreContinue(t,{confirmAction:a["Q"].ReName,name:o,parents:h.currentFromPaths});case 20:case"end":return n.stop()}}),n,null,[[2,11,16,19]])})));return function(){return n.apply(this,arguments)}}(),n.t0=h.action,n.next=n.t0===a["P"].NeedResetFolder?32:n.t0===a["P"].CanReNameOrResetFolder?36:n.t0===a["P"].CanRestoreToOriginal?42:44;break;case 32:return f.yesText="选择还原位置",f.noText="取消操作",f.yesAction=p,n.abrupt("break",45);case 36:return f.showCancel=!0,f.yesText="重命名",f.noText="选择还原位置",f.yesAction=v,f.noAction=p,n.abrupt("break",45);case 42:return setTimeout((function(){e.restoreContinue(t,{confirmAction:a["Q"].RestoreToOriginal,parents:h.currentFromPaths})}),10),n.abrupt("return");case 44:throw Error("操作失败,返回值异常(action=".concat(h.action,")"));case 45:setTimeout(Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.confirm(f);case 2:t.t0=t.sent,t.next=!0===t.t0?5:!1===t.t0?7:9;break;case 5:return f.yesAction(),t.abrupt("break",10);case 7:return f.noAction(),t.abrupt("break",10);case 9:return t.abrupt("break",10);case 10:case"end":return t.stop()}}),t)}))),10),n.next=51;break;case 48:n.prev=48,n.t1=n["catch"](7),e.removingId===t.id&&e.showTextTip(n.t1);case 51:return n.prev=51,e.removingId===t.id&&(e.removingId=0),n.finish(51);case 54:case"end":return n.stop()}}),n,null,[[7,48,51,54]])})))()},clickRemove:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,s,u,d;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(!e.removing){n.next=5;break}return e.showTextTip("正在执行操作,请稍后"),n.abrupt("return");case 5:return i=e.reqData.filterUser,n.prev=7,s=a["T"].getMiniName(t.type),e.confirming=!0,n.next=12,e.confirm({title:"删除确认",text:"删除后无法恢复,是否删除".concat(s,"「").concat(t.name,"」")});case 12:return u=n.sent,n.next=15,Object(c["yb"])(35);case 15:if(e.confirming=!1,u){n.next=18;break}return n.abrupt("return");case 18:return e.removingId=t.id,n.next=21,e.fetchPostCloudApi("recycleremovebyweb",{body:new URLSearchParams({id:t.id,from:i===a["O"].AutoCoverage?a["N"].VersionArchived:a["N"].UserDeleted})});case 21:if(d=n.sent,e.removingId===t.id){n.next=24;break}return n.abrupt("return");case 24:if(Object(l["k"])(d)){n.next=26;break}throw new Error("删除失败,返回值异常");case 26:if(d.success){n.next=28;break}throw new Error(null!==(o=d.errMsg)&&void 0!==o?o:"删除失败了");case 28:e.showTextTip(Object(l["j"])(d.data)?d.data:"已永久删除".concat(s,"「").concat(t.name,"」")),e.getData(),n.next=35;break;case 32:n.prev=32,n.t0=n["catch"](7),e.removingId===t.id&&e.alert({title:"删除失败",text:n.t0});case 35:return n.prev=35,e.removingId===t.id&&(e.removingId=0),n.finish(35);case 38:case"end":return n.stop()}}),n,null,[[7,32,35,38]])})))()},clickItem:function(t){},useScrollChanged:function(t){this.useScroll=t},searchTextChanged:function(t){this.reqData.searchText=t},clickRecycleFilter:function(t){this.reqData.filterUser=t},clickOrderDesc:function(t){var e=this.reqData;e.sortOrder=t?a["R"].Desc:a["R"].Asc},clickSortByType:function(t){var e=this.reqData,n=this.reqData,r=n.sortType,i=n.sortOrder;if(r===t)switch(i){case a["R"].Desc:i=a["R"].Asc;break;default:i=a["R"].Desc;break}else switch(r=t,t){case a["S"].Name:case a["S"].DelUserNick:i=a["R"].Asc;break;default:i=a["R"].Desc;break}e.sortOrder=i,e.sortType=r,Object(c["rb"])("recycle.sortBy",{sortOrder:i,sortType:r})},getData:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,u,d,h,f,m,p,v,b,g;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.pageInfo,o=e.reqData,"number"===typeof t&&(i.pageIndex=t),u=Object(s["a"])(Object(s["a"])({},o),{},{pageIndex:i.pageIndex,searchText:o.searchText.trim()}),e.cloudUserIsOwner||(o.filterUser=a["O"].MyDelete),d=e.fetchTime=Date.now(),n.prev=5,e.fetching=!0,e.isError=!1,e.selectedItem=null,f=JSON.stringify(u),f!=e.getDataKey&&(e.getDataKey=f,null===(m=e.$refs.list)||void 0===m||m.scrollToTop()),n.next=13,e.fetchPostCloudApi("getrecyclelistbyweb",{body:u,json:!0});case 13:if(p=n.sent,d==e.fetchTime){n.next=16;break}return n.abrupt("return");case 16:if(Object(l["k"])(p)){n.next=18;break}throw new Error("无法解析返回值");case 18:if(p.success){n.next=20;break}throw new Error(null!==(v=p.errMsg)&&void 0!==v?v:"无法获取回收站数据");case 20:b=p.data,Object(l["i"])(b.list)?(g=Object(l["k"])(b.users)?b.users:{},b.list.forEach((function(t){var e,n;t.delUser=g[t.delUserId];var r=t.type===a["T"].Folder?null:(null!==(e=t.ext)&&void 0!==e?e:"").split(",").map((function(t){return"#".concat(t.trim())})).filter((function(t){return"#"!==t}));null==r||r.length<1?t.versionIds="":t.versionIds=r.join(", "),t.parents=Object(l["j"])(t.fromPaths)?null===(n=Object(c["wb"])(t.fromPaths))||void 0===n||null===(n=n.map((function(t){return Object(l["k"])(t)?t:null})))||void 0===n?void 0:n.filter((function(t,e,n){return!(n.length>1)||(null===t||void 0===t?void 0:t.id)>0})):null})),e.list=b.list):e.list.splice(0),i.typeTotal=Object(l["k"])(b.typeTotal)?b.typeTotal:{},i.count=b.count,i.pageIndex=b.pageIndex,i.pageCount=b.pageCount,i.pageSize=b.pageSize,i.originalTotal=null!==(h=b.originalTotal)&&void 0!==h?h:null,i.keepDays=b.keepDays,e.initSucceed=!0,n.next=38;break;case 32:if(n.prev=32,n.t0=n["catch"](5),d==e.fetchTime){n.next=36;break}return n.abrupt("return");case 36:e.isError=!0,e.errorText=n.t0;case 38:return n.prev=38,d==e.fetchTime&&(e.fetching=!1),n.finish(38);case 41:case"end":return n.stop()}}),n,null,[[5,32,38,41]])})))()},initOrderBy:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,s,u,d;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.reqData,i=t.reloadWatchKey,o=Object(c["K"])("recycle.sortBy",!0),Object(l["k"])(o)){for(u in o.sortOrder!==a["R"].Asc&&(o.sortOrder=a["R"].Desc),s=a["S"].Name,a["S"])o.sortType===a["S"][u]&&(s=o.sortType);n.sortType=s,n.sortOrder=o.sortOrder}if(t.initData(),d=t.reloadWatchKey,i==d){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,t.getData(1);case 10:case"end":return e.stop()}}),e)})))()},initData:function(){this.initSucceed=!1,this.reqData.filterUser=this.cloudUserIsOwner?a["O"].AllItem:a["O"].MyDelete}},created:function(){this.initOrderBy()},beforeDestroy:function(){window.removeEventListener("click",this.autoHideSelectedItem)},computed:{EnumFileType:function(){return a["r"]},isSelectFolderItem:function(){var t;return(null===(t=this.selectedItem)||void 0===t?void 0:t.type)===a["T"].Folder},isSelectFileItem:function(){var t;return(null===(t=this.selectedItem)||void 0===t?void 0:t.type)===a["T"].File},isSelectArtboardItem:function(){var t;return(null===(t=this.selectedItem)||void 0===t?void 0:t.type)===a["T"].Artboard},isSelectSourceFileItem:function(){var t;return(null===(t=this.selectedItem)||void 0===t?void 0:t.type)===a["T"].SourceFile},isRenderHeader:function(){return!0},filterUserAutoCoverage:function(){return a["O"].AutoCoverage===this.reqData.filterUser},filterSearch:function(){return Object(l["j"])(this.reqData.searchText.trim())},isNotSupportRecycleCloudVersion:function(){var t=this.cloudVersion;return t!==a["g"]&&$r.notSupportRecycle(t)},selectedItemId:function(){var t,e;return null!==(t=null===(e=this.selectedItem)||void 0===e?void 0:e.id)&&void 0!==t?t:-1},reloadWatchKey:function(){var t=this.reqData,e=t.filterType,n=t.searchText,r=t.filterUser,i=t.sortOrder,o=t.sortType;return"".concat(e,":").concat(r,":").concat(i,":").concat(o,"/").concat(n)},removing:function(){return this.removingId>0}},watch:{"moveTo.visible":function(t){t||(this.moveTo.recycleInfo=null,this.moveTo.parentId=-1)},selectedItem:function(t){window.removeEventListener("click",this.autoHideSelectedItem),t&&window.addEventListener("click",this.autoHideSelectedItem)},reloadWatchKey:function(){this.getData(1)},"reqData.filterUser":function(t){t===a["O"].AutoCoverage&&(this.reqData.filterType===a["T"].Folder&&(this.reqData.filterType=a["T"].None),this.reqData.sortType===a["S"].VersionCount&&this.clickSortByType(a["S"].DelTime))}},data:function(){return{moveTo:{visible:!1,parentId:-1,recycleInfo:null},confirming:!1,useScroll:!1,initSucceed:!1,selectedItemClickTime:0,selectedItem:null,isError:!1,errorText:null,fetching:!0,fetchTime:0,getDataKey:"",removingId:0,reqData:{searchText:"",sortType:a["S"].DelTime,sortOrder:a["R"].Desc,filterUser:a["O"].MyDelete,filterType:a["T"].None},pageInfo:{pageIndex:1,pageCount:1,pageSize:30,count:0,originalTotal:0,typeTotal:{},keepDays:30},list:[]}}},Zg=Qg,tw=(n("95c9"),Object(Dr["a"])(Zg,xb,yb,!1,null,"80554fbc",null)),ew=tw.exports,nw={components:{UserFace:fb,Checkbox2:wb},methods:{clickRecycle:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=3,t.popup(ew,{noPadding:!0,props:{}});case 3:n=e.sent,n.canceled,n.data;case 7:case"end":return e.stop()}}),e)})))()},setGuideRect:function(){var t=this.inArtboardMode,e=this.inCloudViewerMode;e&&this.setBeginnerGuideRect(a["k"].SliceBorderLineMenu,t?"nickName":null,a["j"].TopRight)},clickEmpty:function(){},clickInteractionRectAlwaysVisible:function(){this.$store.commit("setInteractionRectAlwaysVisible",!this.interactionRectAlwaysVisible)},clickPointCommentShowAlways:function(){this.$store.commit("pointCommentShowAlways",!this.pointCommentShowAlways)},clickSliceBorderLineHide:function(){this.$store.commit("sliceBorderLineHide",!this.sliceBorderLineHide)},clickArtboardShowInteractionLine:function(){var t=this.cloudVersion,e=this.artboardShowInteractionLine;$r.notSupportInteraction(t)&&this.showTextTip("当前私有云版本(".concat(t,")过低,不支持交互原型相关功能,请先升级部署包")),this.$store.commit("artboardShowInteractionLine",!e)},clickMenu:function(t){var e=t.target;"A"!==(null===e||void 0===e?void 0:e.tagName)&&(this.ignoreThisClick=!0)},clickArtRenderInCanvasMode:function(){this.$store.commit("artRenderInCanvasMode",!this.artRenderInCanvasMode)},clickShowArtListMap:function(){this.$store.commit("showArtListMap",!this.showArtListMap)},clickSetNickName:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.prompt({title:"修改昵称",text:t.cloudNickName,placeholder:"昵称;方便其他成员认识你",beforeYes:function(e){if(e=e.trim(),!Object(c["eb"])(e))return t.showTextTip("请输入正确的昵称,4-20个字符组成,其中1个中文=2个字符."),!1}});case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return");case 9:if(n=n.trim(),n!==t.cloudNickName){e.next=12;break}return e.abrupt("return");case 12:return t.nickSetting=!0,e.prev=13,e.next=16,t.cryptoMarklionWeb2("setusernickname",{nickName:n},1e4);case 16:i=e.sent,t.$store.commit("setCloudNickName",i.data),t.showTextTip("昵称已修改"),e.next=24;break;case 21:e.prev=21,e.t1=e["catch"](13),t.showTextTip(e.t1);case 24:case"end":return e.stop()}}),e,null,[[0,6],[13,21]])})))()},clickLogout:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.logoutting){e.next=2;break}return e.abrupt("return");case 2:return t.logoutting=!0,e.prev=3,e.next=6,t.goCloudLogout();case 6:return e.prev=6,t.logoutting=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[3,,6,9]])})))()},clickLogin:function(){this.goCloudLogin()},clickShowMenu:function(){var t=this;setTimeout((function(){var e=!t.menuVisible;t.menuVisible=e,e&&(t.ignoreThisClick=!1)}),0)},hideMenu:function(){var t=this;clearTimeout(this.menuHandler),this.ignoreThisClick?this.ignoreThisClick=!1:this.menuHandler=setTimeout((function(){t.ignoreThisClick?t.ignoreThisClick=!1:t.menuVisible=!1}),50)}},computed:{urlQueryString:function(){var t,e=this.curArtboard,n=null===e||void 0===e||null===(t=e.artboard)||void 0===t||null===(t=t.mlConfig)||void 0===t?void 0:t.softVersion;return n||(n=this.$store.state.config.softVer),"invoke=MarkLion.Output".concat(Object(l["j"])(n)?"&ver=".concat(n):"")},interactionRectAlwaysVisible:function(){return this.$store.state.artboardDetail.interactionSet.rectAlwaysVisible},pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},sliceBorderLineHide:function(){return this.$store.state.sliceBorderLineHide},artboardShowInteractionLine:function(){return this.$store.state.artboardShowInteractionLine},artRenderInCanvasMode:function(){return this.$store.state.artRenderInCanvasMode},showTitle:function(){return this.cloudIsLogin?"".concat(this.cloudNickName,"(").concat(this.cloudUserEmail,")"):"点击登录"},showName:function(){return this.cloudIsLogin?this.cloudNickName:"未登录"},showEmail:function(){return this.cloudIsLogin?this.cloudUserEmail:""},resetGuideRectKey:function(){var t=this.winRect.width,e=this.inCloudViewerMode,n=this.inArtboardMode;return"".concat(t,":").concat(e,":").concat(n)},winRect:function(){return this.$store.state.winRect}},watch:{menuVisible:function(t){t?window.addEventListener("click",this.hideMenu,!0):window.removeEventListener("click",this.hideMenu,!0)},resetGuideRectKey:function(){this.setGuideRect()}},beforeDestroy:function(){this.setGuideRect(),clearTimeout(this.menuHandler),window.removeEventListener("click",this.hideMenu,!0)},mounted:function(){this.setGuideRect()},data:function(){return{menuVisible:!1,menuHandler:0,logoutting:!1,nickSetting:!1,ignoreThisClick:!1}},props:{setVisible:Boolean}},rw=nw,iw=(n("03698"),Object(Dr["a"])(rw,ab,sb,!1,null,"6419ef74",null)),ow=iw.exports,aw=function(){var t=this,e=t._self._c;return e("div",{ref:"btn",staticClass:"btn-user-notify",class:{news:t.hasNotReadNotify,on:t.notifyListVisible},attrs:{title:"消息"},on:{click:t.clickNotify}})},sw=[],cw={methods:{clickNotify:function(){var t=this;setTimeout((function(){var e=t.userNotify;if(e.visible=!e.visible,e.visible){var n=t.$refs.btn;if(!n)return;var r=n.getBoundingClientRect(),i=e.location;i.top=r.bottom,i.right=window.innerWidth-r.right}}),0)}},computed:{userNotify:function(){return this.$store.state.userNotify},notifyListVisible:function(){return this.userNotify.visible},hasNotReadNotify:function(){return-1!==this.notifyList.findIndex((function(t){return!t.readed}))},notifyList:function(){var t,e;return null!==(t=null===(e=this.userNotify.cloudList[this.cloudKey])||void 0===e?void 0:e.list)&&void 0!==t?t:[]}}},lw=cw,uw=(n("1e16"),Object(Dr["a"])(lw,aw,sw,!1,null,"31c33817",null)),dw=uw.exports,hw=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"user-notify",style:t.styleLocation,on:{mousedown:function(t){t.stopPropagation()},click:function(e){t.notClickClose=!0}}},[e("div",{staticClass:"header"},[e("nav",[e("a",{class:{on:t.showType===t.EnumNotifyShowType.ALL},attrs:{href:"javascript:;"},on:{click:function(e){t.showType=t.EnumNotifyShowType.ALL}}},[t._v("全部("+t._s(t.list.length)+")")]),e("a",{class:{on:t.showType===t.EnumNotifyShowType.NotRead},attrs:{href:"javascript:;"},on:{click:function(e){t.showType=t.EnumNotifyShowType.NotRead}}},[t._v("未读("+t._s(t.notReadList.length)+")")]),e("a",{class:{on:t.showType===t.EnumNotifyShowType.Readed},attrs:{href:"javascript:;"},on:{click:function(e){t.showType=t.EnumNotifyShowType.Readed}}},[t._v("已读("+t._s(t.readedList.length)+")")])]),e("menu",[t.showType===t.EnumNotifyShowType.NotRead||t.showType===t.EnumNotifyShowType.ALL&&t.notReadList.length>0?e("a",{staticClass:"btn-setread",attrs:{href:"javascript:;"},on:{click:t.clickSetAllNotifyReaded}},[t._v(t._s(t.btnFetching?"请求处理中":"全部标记为已读"))]):t.showType===t.EnumNotifyShowType.Readed||t.showType===t.EnumNotifyShowType.ALL&&t.readedList.length>0?e("a",{staticClass:"btn-setread",attrs:{href:"javascript:;"},on:{click:t.clickAllReadedNotify}},[t._v(t._s(t.btnFetching?"请求处理中":"清空已读消息"))]):t._e(),e("a",{staticClass:"btn-refresh2",attrs:{href:"javascript:;",title:"刷新消息列表"},on:{click:function(e){return t.clickReload(!0)}}})])]),e("div",{ref:"list",staticClass:"list",on:{scroll:t.onListScroll}},[t.listFetchState===t.FetchState.Fetching||t.listFetchState===t.FetchState.Error?e("NetworkLoading",{attrs:{loadText:"正在获取消息列表...",errorText:t.errorText,isLoading:t.listFetchState===t.FetchState.Fetching,isError:t.listFetchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload(!0)}}}):0===t.showList.length?e("div",{staticClass:"empty"},[t._v("暂无消息")]):e("div",{staticClass:"pad",style:{height:t.styleListRealHeight}},[e("ul",{style:{top:t.styleListOffsetTop}},t._l(t.renderList,(function(t){return e("UserNotifyItem",{key:"notify-".concat(t.id),attrs:{item:t}})})),1)])],1)])},fw=[],mw=function(){var t=this,e=t._self._c;return t.visible&&t.unknowNotifyType?e("li",{staticClass:"unknow"},[t._v("不支持的消息类型(id:"+t._s(t.item.id)+",type:"+t._s(t.item.type)+"),请升级客户端后查看")]):t.visible?e("li",{staticClass:"item",class:{notread:!t.item.readed},on:{click:t.clickNotify}},[e("div",{staticClass:"info"},[e("div",{staticClass:"title",attrs:{title:t.title}},[t._v(t._s(t.title))]),e("div",{staticClass:"date"},[t._v(t._s(t.item.dateStr))])]),e("div",{staticClass:"text"},[e("a",{attrs:{href:"javascript:;",title:t.commentSummary},on:{click:t.clickSummary}},[t._v(t._s(t.commentSummary))])])]):t._e()},pw=[],vw={methods:{clickSummary:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,s,c;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.item,e.prev=1,c=n.msg,o=c.artboardId,i=c.artboardName,e.next=7,t.goCloudPath({folderId:c.folderId,artboardId:o,artboardGuid:c.artboardGuid,artboardVer:null!==(s=c.artboardVer)&&void 0!==s?s:0,commentId:c.commentId,isReply:n.type===a["X"].Artboard_Reply||n.type===a["X"].Artboard_Reply_At,checkArtboardExist:!0});case 7:t.$store.commit("setAllFoldersBoxVisible",!1),t.$store.state.userNotify.visible=!1,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),t.showTextTip(i?e.t0.toString().replace("[".concat(o,"]"),"「".concat(i,"」")).replace("[".concat(o,"]"),"「".concat(i,"」")):e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))()},clickNotify:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.item,n){e.next=3;break}return e.abrupt("return");case 3:if(n.readed){e.next=26;break}if(t.fetchState!==c["a"].Fetching){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,t.fetchState=c["a"].Fetching,i=new FormData,i.append("id",n.id),e.next=12,t.fetchPostCloudApi("setnotifyreadedbyweb",{body:i});case 12:if(o=e.sent,Object(l["k"])(o)){e.next=15;break}throw new Error("返回值异常,无法设置消息为已读");case 15:if(o.success){e.next=17;break}throw new Error(o.errMsg);case 17:n.readed=!0,e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](6),t.showTextTip(e.t0);case 23:return e.prev=23,t.fetchState=c["a"].Success,e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[6,20,23,26]])})))()}},computed:{visible:function(){return!!this.item},commentSummary:function(){var t,e=null===(t=this.item)||void 0===t?void 0:t.msg;if(!e)return"";var n=e.commentAttachCount,r=e.commentSummary;return n>0&&(r=new Array(n).fill("[图片]").join("")+" "+r),r},title:function(){var t,e,n,r=this.item;if(!r)return"";var i=r.msg;switch(r.type){case a["X"].Artboard_Comment:return"".concat(null===(t=i.commentUser)||void 0===t?void 0:t.nickName," 评论了您的画板“").concat(i.artboardName,"” :");case a["X"].Artboard_Reply:return"".concat(null===(e=i.commentUser)||void 0===e?void 0:e.nickName," 回复了您在画板“").concat(i.artboardName,"”的评论 :");case a["X"].Artboard_Comment_At:case a["X"].Artboard_Reply_At:return"".concat(null===(n=i.commentUser)||void 0===n?void 0:n.nickName," 在画板“").concat(i.artboardName,"”@了您:");default:return null}},unknowNotifyType:function(){var t=this.item;if(!t)return!0;switch(t.type){case a["X"].Artboard_Comment:case a["X"].Artboard_Reply:case a["X"].Artboard_Comment_At:case a["X"].Artboard_Reply_At:return!1;default:return!0}}},props:{item:Object},data:function(){return{fetchState:c["a"].Normal}}},bw=vw,gw=(n("5282"),Object(Dr["a"])(bw,mw,pw,!1,null,"122b3d06",null)),ww=gw.exports,xw={ALL:-1,NotRead:0,Readed:1},yw={components:{UserNotifyItem:ww,NetworkLoading:Mc},methods:{clickSetAllNotifyReaded:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.notReadList,0!==n.length){e.next=4;break}return t.showTextTip("没有需要标记为已读的消息"),e.abrupt("return");case 4:if(t.btnFetchState!==c["a"].Fetching){e.next=6;break}return e.abrupt("return");case 6:return t.btnFetchState=c["a"].Fetching,e.prev=7,i=n[0].id,o=new FormData,o.append("minNotifyId",i),e.next=13,t.fetchPostCloudApi("setnotifyreadedbyweb",{body:o});case 13:if(a=e.sent,Object(l["k"])(a)){e.next=16;break}throw new Error("返回值异常,无法设置消息为已读");case 16:if(a.success){e.next=18;break}throw new Error(a.errMsg);case 18:t.list.forEach((function(t){!t.readed&&t.id<=i&&(t.readed=!0)})),t.showTextTip("已将所有未读消息标记为已读"),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](7),t.showTextTip(e.t0);case 25:return e.prev=25,t.btnFetchState=c["a"].Success,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[7,22,25,28]])})))()},clickAllReadedNotify:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,u;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.readedList,0!==n.length){e.next=4;break}return t.showTextTip("没有需要清理的已读消息"),e.abrupt("return");case 4:if(t.btnFetchState!==c["a"].Fetching){e.next=6;break}return e.abrupt("return");case 6:return t.awaitConfirm=!0,e.next=9,t.confirm({text:"即将清空所有已读消息"});case 9:if(e.sent){e.next=12;break}return t.awaitConfirm=!1,e.abrupt("return");case 12:return t.awaitConfirm=!1,t.btnFetchState=c["a"].Fetching,e.prev=14,i=n[0].id,o=new FormData,o.append("minNotifyId",i),e.next=20,t.fetchPostCloudApi("removenotifiesbyweb",{body:o});case 20:if(a=e.sent,Object(l["k"])(a)){e.next=23;break}throw new Error("返回值异常,消息未被清理");case 23:if(a.success){e.next=25;break}throw new Error(a.errMsg);case 25:s=[],u=t.list,u.forEach((function(t,e){t.readed&&t.id<=i&&s.unshift(e)})),s.length===u.length?u.splice(0):s.forEach((function(t){u.splice(t,1)})),t.showTextTip("已清空已读的消息"),e.next=35;break;case 32:e.prev=32,e.t0=e["catch"](14),t.showTextTip(e.t0);case 35:return e.prev=35,t.btnFetchState=c["a"].Success,e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[14,32,35,38]])})))()},clickReload:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,a,s;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.listFetchState!==c["a"].Fetching){n.next=2;break}return n.abrupt("return");case 2:return e.errorText="",e.listFetchState=c["a"].Fetching,n.prev=4,o=e.list,a=0,!t&&o.length>0&&(a=o[0].id),s=null!==(i=e.curArtboardId)&&void 0!==i?i:0,n.next=11,e.getCloudNotifies(a,s);case 11:e.listFetchState=c["a"].Success,n.next=18;break;case 14:n.prev=14,n.t0=n["catch"](4),e.listFetchState=c["a"].Error,e.isNotSupportCloudVersion?e.errorText="私有云版本过低(".concat(e.cloudVersion,"),请先升级私有云部署包"):e.errorText=n.t0;case 18:case"end":return n.stop()}}),n,null,[[4,14]])})))()},onListScroll:function(t){this.scrollTop=t.target.scrollTop},getBoxHeight:function(){if(this.visible){var t=this.$refs.list;t&&(this.boxHeight=t.offsetHeight)}},resetTimeFormat:function(){this.showList.forEach((function(t){try{t.dateStr=Object(l["b"])(t.date)}catch(e){t.dateStr=t.date}}))},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.awaitConfirm||(t.notClickClose?t.notClickClose=!1:t.userNotify.visible=!1)}),50)},needReloadOnOpen:function(){var t=this.currentCloudNotify;if(!t)return!0;var e=t.updateTime;return Math.abs(Date.now()-e)>5e3}},computed:{isNotSupportCloudVersion:function(){var t=this.cloudVersion;return t&&$r.notSupportArtboardComment(t)},FetchState:function(){return c["a"]},btnFetching:function(){return this.btnFetchState===c["a"].Fetching},styleLocation:function(){var t=this.userNotify.location,e={top:9,right:-20};return"top:".concat(t.top+e.top,"px;right:").concat(t.right+e.right,"px;")},EnumNotifyShowType:function(){return xw},userNotify:function(){return this.$store.state.userNotify},visible:function(){return this.userNotify.visible},currentCloudNotify:function(){return this.userNotify.cloudList[this.cloudKey]},list:function(){var t;return(null===(t=this.currentCloudNotify)||void 0===t?void 0:t.list)||[]},readedList:function(){var t=this.list,e=[];return t.forEach((function(t){t.readed&&e.push(t)})),e},notReadList:function(){var t=this.list,e=[];return t.forEach((function(t){t.readed||e.push(t)})),e},showList:function(){switch(this.showType){case xw.Readed:return this.readedList;case xw.NotRead:return this.notReadList;default:return this.list}},renderStartIndex:function(){var t=this.scrollTop,e=this.lineHeight;return Math.max(Math.floor(t/e)-2,0)},renderLength:function(){var t=this.showList,e=this.boxHeight,n=this.lineHeight,r=this.scrollTop;return Math.min(t.length,Math.floor(r/n)+Math.ceil(e/n)+2)},renderList:function(){var t=this.showList;return t.slice(this.renderStartIndex,this.renderLength)},styleListRealHeight:function(){return this.showList.length*this.lineHeight+"px"},styleListOffsetTop:function(){return this.renderStartIndex*this.lineHeight+"px"}},watch:{showType:function(){var t=this;this.$nextTick((function(){var e=t.$refs.list;e&&(e.scrollTop=0),t.resetTimeFormat()}))},visible:function(t){var e=this;t?(this.$nextTick((function(){e.getBoxHeight()})),window.addEventListener("click",this.closeSelf,!0),this.needReloadOnOpen()?this.clickReload():this.resetTimeFormat()):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},data:function(){return{scrollTop:0,boxHeight:0,lineHeight:65,showType:xw.ALL,closeHandle:0,notClickClose:!1,listFetchState:c["a"].Normal,btnFetchState:c["a"].Normal,errorText:"",awaitConfirm:!1}},beforeDestroy:function(){window.removeEventListener("click",this.closeSelf,!0),clearTimeout(this.closeHandle),this.userNotify.visible=!1},mounted:function(){this.getBoxHeight()}},kw=yw,Cw=(n("fcb0"),Object(Dr["a"])(kw,hw,fw,!1,null,"5aa1dbf4",null)),Sw=Cw.exports,Tw=function(){var t=this,e=t._self._c;return t.notSupportCloudVersion?t._e():e("div",{staticClass:"header-file-version-info"},[e("div",{staticClass:"btn-file-verison",class:{on:t.netdiskFileVerListVisible},attrs:{title:"查看历史版本"},on:{click:function(e){return t.setNetdiskFileVerListVisible(!t.netdiskFileVerListVisible)}}}),e("FileVersionList",{attrs:{visible:t.netdiskFileVerListVisible,readonlyCurrentFolder:t.fileReadOnly,fileInfo:t.fileInfo,curVerId:t.curVerId,fetchState:t.fetchState,errorText:t.errorText},on:{verRemoved:t.verRemoved,clickVerItem:t.clickVerItem,setVisible:t.setNetdiskFileVerListVisible}})],1)},Ow=[],Iw={components:{FileVersionList:Xu},methods:{setNetdiskFileVerListVisible:function(t){this.$store.commit("netdiskFileVerListVisible",t)},clickVerItem:function(t){if(t){var e=t.verId,n=this.curVerId;if(n!==e){this.fileInfo.curVerId=e;var r=this.getNetdiskFileOnlineViewUrl(t,!0);er(r)}}},verRemoved:function(t,e){var n;if(e>0){var r=this.fileInfo,i=this.curVerId;if(r){var o=r.file,a=r.historyFiles,s=i===e;if(o.verId===e){var c;if(0===(null!==(c=null===a||void 0===a?void 0:a.length)&&void 0!==c?c:0))return void(this.$store.state.cloud.fileInfo=null);r.file=a[0],a.splice(0,1)}else{var l,u=null!==(l=null===a||void 0===a?void 0:a.find((function(t){return t.verId===e})))&&void 0!==l?l:-1;if(-1===u)return;a.splice(u,1)}r.file.versionCount=1+(null!==(n=null===a||void 0===a?void 0:a.length)&&void 0!==n?n:0),s&&this.clickVerItem(r.file)}}},clickVerRemove:function(t){if(!("number"!==typeof t||isNaN(t)||t<1)){var e=this.curArtboard,n=this.lastVersionId,r=this.mainFile;if(e&&r){var i=n===t,o=e.historyArtboards;if(r.lastVersionId===t){if(0===o.length)return void this.$store.commit("removeArtboard",r.guid);var a=o.splice(0,1)[0];i&&(e.isError=!1,e.isFetching=!1,e.isLoaded=!1,e.loadErrMsg=null),e.artboard=a}else{var s=null===o||void 0===o?void 0:o.findIndex((function(e){var n;return(null!==(n=null===e||void 0===e?void 0:e.lastVersionId)&&void 0!==n?n:e.verId)===t}));if(-1===s)return;o.splice(s,1),r.versionCount=1+o.length}i&&this.setCurArtboardVer(r.lastVersionId)}}}},computed:{fileInfo:function(){var t=this.$store.state.cloud.fileInfo;return t},curVerId:function(){return this.curFileInfo.curVerId},netdiskFileVerListVisible:function(){return this.$store.state.netdiskFileVerListVisible},mainFile:function(){var t;return null===(t=this.fileInfo)||void 0===t?void 0:t.file},lastVersionId:function(){var t,e,n=this.mainFile;return null!==(t=null!==(e=null===n||void 0===n?void 0:n.verId)&&void 0!==e?e:null===n||void 0===n?void 0:n.lastVersionId)&&void 0!==t?t:0},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!0}return!1},fileReadOnly:function(){return!this.canChangeFile},notSupportCloudVersion:function(){return $r.notSupportNetDiskFileVersion(this.cloudVersion)}},data:function(){return{fetchState:c["a"].Success,errorText:null}},created:function(){}},Aw=Iw,Fw=(n("67a8"),Object(Dr["a"])(Aw,Tw,Ow,!1,null,"4dbb8053",null)),jw=Fw.exports,_w={components:{HeaderBtnFileVersion:jw,ArtboardVersion:Gh,BtnArtRenderMode:fm,BtnGoInteraction:sm,PathNav:ob,UserNotifyButton:dw,UserNotify:Sw,ScaleControl:fi,Helper:ov,UserInfo:ow,CloudFolderLogs:Zp,BtnUpload:Qf,BtnContainerColor:Oh},methods:{setGuideRect:function(){this.setBeginnerGuideRect(a["k"].HelperMenu,"btnHelp",a["j"].TopRight)},clickMultDownArtboard:function(){this.setInArtboardMultDownMode(!0)},clickGoParentFolder:function(){var t=this;setTimeout((function(){Object(c["W"])(t.cloudParentFolder.id)}),100)},clickGoHome:function(){var t=this;setTimeout((function(){t.setCurArtboard(null)}),100)},clickHelper:function(t){this.$store.commit("setHelperVisible",t)}},computed:{canShowUpload:function(){var t=this.inCloudViewerMode,e=this.inArtboardMode,n=this.cloudCurrentFolderId,r=this.userFolderSpecifyMemberAuthority;if(t&&!e&&n>0)switch(r){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:case a["w"].Read:case a["w"].OnlyChildFolderVisit:return!0}return!1},canShowLog:function(){var t=this.inCloudViewerMode,e=this.permission,n=this.cloudFolderNotFound,r=this.userFolderSpecifyMemberAuthority;if(t&&!n&&e)switch(r){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:case a["w"].Read:return!0}return!1},helperVisible:function(){return this.$store.state.helper.visible},cloudParentFolderName:function(){var t=this.cloudParentFolder;if(!t)return null;if(0!==t.id)return t.name;var e=this.cloudName;return e||t.name},setVisible:function(){var t=!this.cloudFolderNotFound&&this.permission&&this.documentArtboards.length>0;return t},winRect:function(){return this.$store.state.winRect},resetGuideRectKey:function(){var t=this.setVisible,e=this.canShowLog,n=this.inArtboardMode,r=this.cloudIsLogin,i=this.winRect.width;return"".concat(t,":").concat(e,":").concat(n,":").concat(r,":").concat(i)}},watch:{resetGuideRectKey:function(){this.setGuideRect()}},mounted:function(){this.setGuideRect()}},Mw=_w,Lw=(n("a912"),Object(Dr["a"])(Mw,wh,xh,!1,null,"5f0e23f7",null)),Dw=Lw.exports,Pw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"authority",class:{"in-mobile":t.inMobile,include:t.include}},[e("div",{staticClass:"box"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"container"},[e("div",{staticClass:"cloudname"},[t._v(t._s(t.documentName))]),e("div",{staticClass:"text"},[t._v("分享已加密，请输入分享码后访问")]),e("div",{staticClass:"input",class:{focused:t.inputFocused}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],ref:"input",attrs:{type:"text",placeholder:"请输入分享码",maxlength:"6",spellcheck:"false"},domProps:{value:t.code},on:{focus:function(e){t.inputFocused=!0},blur:function(e){t.inputFocused=!1},input:function(e){e.target.composing||(t.code=e.target.value)}}})]),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.onSubmit}},[t._v(" 确定 "),e("input",{attrs:{type:"submit"}})])])])])])])},Nw=[],Ew={methods:{onSubmit:function(){var t=this,e=this.code.trim();if(!/^[a-zA-Z\d]{1,6}$/.test(e))return this.showTextTip("分享码不正确,分享码由1-6位的数字或字母组合而成"),void this.$refs.input.focus();var n="".concat(c["d"],"/api/previewer");fetch(n,{method:"post",body:"code=".concat(e,"&folderid=").concat(this.cloudCurrentFolderId),cache:"reload",credentials:"include",headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){e.text().then((function(n){if(200!=e.status)throw n;if(n=JSON.parse(n),Object(l["k"])(n))return n.success?(t.cleanFoldersCache(),void(t.inInteractionMode?t.goCloudFolderInteractionUrl(t.cloudCurrentFolderId,t.curArtboardGuid):window.location.reload())):void t.showTextTip(n.errMsg);t.showTextTip("返回值格式异常")})).catch((function(e){t.showTextTip(e)}))})).catch((function(e){t.showTextTip(e)}))}},data:function(){return{inputFocused:!1,code:""}},props:{include:{type:Boolean,default:!1}}},Rw=Ew,Vw=(n("6bd2"),Object(Dr["a"])(Rw,Pw,Nw,!1,null,"9bb8f6de",null)),Bw=Vw.exports,Hw=function(){var t=this,e=t._self._c;return e("section",{staticClass:"error-data",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v(t._s(t.text))]),t.showLoginBtn?e("div",{staticClass:"btns"},[e("div",{staticClass:"button light",on:{click:t.goCloudLogin}},[t._v(t._s(t.cloudIsLogin?"切换账号":"立即登录"))])]):t._e()])])},Uw=[],$w={props:{text:String,showLoginBtn:Boolean}},Gw=$w,Ww=(n("9b64"),Object(Dr["a"])(Gw,Hw,Uw,!1,null,"36b89cbc",null)),zw=Ww.exports,Yw=function(){var t=this,e=t._self._c;return e("section",{staticClass:"p-index",style:{backgroundColor:t.backgroundColor}},[e("ZoomContainer",{attrs:{type:t.EnumScaleType.ArtboardList}}),e("MultArtboardDownload")],1)},Xw=[],Kw={components:{ZoomContainer:Ks,MultArtboardDownload:Ou},computed:{backgroundColor:function(){return this.$store.state.artboardDetail.interactionSet.backgroundColor},EnumScaleType:function(){return a["V"]}},created:function(){0}},qw=Kw,Jw=(n("9e45"),Object(Dr["a"])(qw,Yw,Xw,!1,null,"7c2a4868",null)),Qw=Jw.exports,Zw=function(){var t=this,e=t._self._c;return e("section",{staticClass:"p-info",style:{backgroundColor:t.backgroundColor}},[e("keep-alive",[e("LeftSide")],1),t.isError?e("div",{staticClass:"error"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v(t._s(t.curArtboard.loadErrMsg))]),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v("重新加载")])])])]):t.isFetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v("正在加载画板详情...")])]):t.isLoaded?[e("ZoomContainer",{attrs:{type:t.EnumScaleType.ArtboardDetail}})]:t._e(),e("keep-alive",[e("RightSide")],1)],2)},tx=[],ex=function(){var t=this,e=t._self._c;return e("section",{staticClass:"left-side",class:{on:t.visible}},[e("div",{staticClass:"btn-leftside-visible",class:{on:t.visible},attrs:{title:t.visible?"收起左侧(F3)":"展开左侧(F3)"},on:{click:function(e){return t.setVisible(!t.visible)}}}),e("nav",[e("div",{staticClass:"btn-showart",class:{on:t.showArtboardList},attrs:{title:"切换到画板列表(F1)"},on:{click:function(e){t.showArtboardList=!0,t.setVisible(!0)}}},[t._v("画板")]),e("div",{staticClass:"btn-shownode",class:{on:!t.showArtboardList},attrs:{title:"切换到图层列表(F2)"},on:{click:function(e){t.showArtboardList=!1,t.setVisible(!0)}}},[t._v("图层")])]),e("div",{staticClass:"filter-box"},[t.showArtboardList?[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText.artboard,expression:"searchText.artboard"}],class:{empty:!t.searchText.artboard},attrs:{type:"text",placeholder:"搜索画板名",spellcheck:"false"},domProps:{value:t.searchText.artboard},on:{input:function(e){e.target.composing||t.$set(t.searchText,"artboard",e.target.value)}}}),t.searchText.artboard?e("span",{staticClass:"btn-clear",on:{click:function(e){t.searchText.artboard=""}}}):t._e()]),e("div",{staticClass:"filters"},[t.inCloudMode&&!t.notSupportArtboardStatusVersion?e("div",{staticClass:"filter-item filter-item-dev",class:{on:t.artboardStatusDevFilterOpen},attrs:{title:"筛选标记为待开发的画板"},on:{click:t.clickArtboardStatusDevFilter}}):t._e(),e("div",{staticClass:"filter-item filter-item-slice",class:{on:t.sliceFilterOpen},attrs:{title:"筛选有切图的画板"},on:{click:t.clickSliceFilter}}),t.inCloudMode?e("div",{staticClass:"filter-item filter-item-comment",class:{on:t.commentFilterOpen},attrs:{title:"筛选有评论的画板"},on:{click:t.clickCommentFilter}}):t._e(),t.inCloudMode?e("FolderNavSortMenu",{attrs:{mini:!0}}):t._e()],1)]:t.artboardInComment?t._e():[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText.node,expression:"searchText.node"}],attrs:{type:"text",placeholder:"搜索节点名",spellcheck:"false"},domProps:{value:t.searchText.node},on:{input:function(e){e.target.composing||t.$set(t.searchText,"node",e.target.value)}}}),t.searchText.node?e("span",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:function(e){t.searchText.node=""}}}):t._e()]),e("div",{staticClass:"filters"},[e("div",{staticClass:"filter-item filter-item-slice",class:{on:t.sliceFilterOpen},attrs:{title:"筛选有切图的节点"},on:{click:t.clickSliceFilter}}),t.showArtboardList?t._e():e("div",{staticClass:"filter-item filter-item-interaction",class:{on:t.interactionFilterOpen},attrs:{title:"筛选有原型跳转的节点"},on:{click:t.clickInteractionFilter}})])]],2),e("section",{staticClass:"box"},[!t.showArtboardList&&t.artboardInComment?e("section",{staticClass:"on incomment"},[t._v("评论模式下无法查看标注图层信息")]):t._e(),e("ArtboardList",{attrs:{visible:t.showArtboardList,leftSideVisible:t.visible,list:t.renderDocumentArtboards,renderArtboardList:t.renderArtboardList,sliceFilterOpen:t.sliceFilterOpen,commentFilterOpen:t.commentFilterOpen,artboardStatusDevFilterOpen:t.artboardStatusDevFilterOpen,interactionFilterOpen:t.interactionFilterOpen,searchText:t.searchText.artboard}}),e("section",{ref:"nodeList",staticClass:"nodelist",class:{on:!t.showArtboardList&&!t.artboardInComment},on:{scroll:t.onNodeListScroll,mousewheel:t.onNodeListMouseWheel}},[e("div",{staticClass:"container",class:{"slice-filter":t.sliceFilterOpen||t.nodeInSearch||t.interactionFilterOpen,off:t.nodeListMousewheelTimes>0}},[0===t.nodeList.length?e("div",{staticClass:"empty"},[t._v(t._s(t.emptyNodeListText))]):t._e(),e("div",{staticClass:"brace",style:t.braceStyle},[e("div",{staticClass:"front",style:t.frontStyle},t._l(t.renderList,(function(n){return e("NodeListNew",{key:"".concat(n.index,":").concat(n.node.guid),attrs:{nodeListHeight:t.nodeListHeight,nodeListScrollTop:t.nodeListScrollTop,nodeLineHeight:t.nodeLineHeight,shiftKey:t.shiftKey,sliceFilterOpen:t.sliceFilterOpen,interactionFilterOpen:t.interactionFilterOpen,nodeInSearch:t.nodeInSearch,item:n.node}})})),1)])])])],1)])},nx=[],rx=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item",class:{hover:t.enterNode===t.item,focused:t.curNode===t.item}},[t.sliceFilterOpen||t.nodeInSearch||t.interactionFilterOpen?t._e():e("div",{staticClass:"prex",class:{first:t.isFirstChild,last:t.isLastChild,"has-child":t.hasChild},style:{width:t.depthWidth}}),e("div",{ref:"$item_name",staticClass:"name",class:{export:t.item.markedForExport},style:{paddingLeft:t.paddingLeft},on:{mouseenter:t.mouseEnterNode,mouseleave:t.mouseLeaveNode,click:t.clickNode}},[t.item.renderTapInteraction?e("span",{staticClass:"interaction-node"}):t._e(),t._v(t._s(t.name))])])},ix=[],ox=10,ax={name:"NodeList",methods:{clickNode:function(){var t=this.item;this.inMultDownMode?t.markedForExport&&(t.mlUserSelectDown=!t.mlUserSelectDown):this.setCurNode(t)},mouseLeaveNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(null)},mouseEnterNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(this.item)}},computed:{itemStyle:function(){return{top:this.index*this.nodeLineHeight+"px"}},isFirstChild:function(){var t=this.item;if(t.types.Artboard)return!0;var e=t.parentNode.children;return!!e&&e[0]==t},isLastChild:function(){var t=this.item;if(t.types.Artboard)return!0;var e=t.parentNode.children;return!!e&&e[e.length-1]==t},hasChild:function(){var t=this.item.children;if(!t)return!1;if(0===t.length)return!1;var e=t.find((function(t){return!t.mlIgnoreLeftSide}));return!!e},depthWidth:function(){var t=this.nodeDepthIndex*ox;return t<0&&(t=0),t+"px"},paddingLeft:function(){var t=this.sliceFilterOpen,e=this.nodeInSearch,n=this.interactionFilterOpen,r=this.nodeDepthIndex,i=t||e||n?0:r*ox;return i+6+"px"},nodeDepthIndex:function(){return this.item.nodeDepthIndex},name:function(){var t=Object(c["M"])(this.item);return Object(l["j"])(t)?(t=t.trim(),t):this.item.guid}},props:{item:Object,sliceFilterOpen:Boolean,interactionFilterOpen:Boolean,nodeInSearch:Boolean,shiftKey:Boolean,nodeListScrollTop:Number,nodeListHeight:Number,index:Number,nodeLineHeight:Number}},sx=ax,cx=(n("338f"),Object(Dr["a"])(sx,rx,ix,!1,null,"1c1550d3",null)),lx=cx.exports,ux=function(){var t=this,e=t._self._c;return e("section",{ref:"artList",staticClass:"art-list",class:{on:t.visible},on:{scroll:t.onScroll,mousewheel:t.onMouseWheel}},[e("div",{staticClass:"brace",class:{off:t.mousewheelTimes>0},style:{height:t.boxRealHeight}},[e("div",{ref:"front",staticClass:"front",style:{marginTop:t.frontMarginTop}},t._l(t.lazyRenderArtboardList,(function(n,r){return e("ArtboardListItem",{key:"".concat(n.artboard.docGuid,"-").concat(n.artboard.guid),attrs:{guideUsed:r===t.firstFullInViewItemLazyIndex,item:n}})})),1)]),0===t.lazyRenderArtboardList.length?e("div",{staticClass:"empty"},[t._v(t._s(t.emptyListText))]):t._e()])},dx=[],hx=function(){var t=this,e=t._self._c;return e("section",{ref:"$item",staticClass:"item min",class:{on:t.focused},attrs:{title:t.title},on:{click:function(e){return t.clickArtboard()},contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("div",{staticClass:"img"},[t.imageSrc?e("img",{attrs:{src:t.imageSrc,alt:""},on:{error:t.errPreviewImage}}):t._e(),t.inInteractionMode&&t.artboard.flowStart?e("div",{staticClass:"flow-start"}):t._e()]),e("div",{staticClass:"info"},[e("div",{staticClass:"info-item"},[e("div",{staticClass:"name",domProps:{textContent:t._s(t.artboard.name)}}),t.artboardInDevStatus?e("div",{staticClass:"dev",attrs:{title:"待开发"}}):t._e()]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"date",domProps:{textContent:t._s(t.dateStr)}}),e("div",{staticClass:"total"},[!t.inInteractionMode&&t.exportNodeCount>0?e("div",{staticClass:"slice-total"},[t._v(t._s(t.exportNodeCount))]):t._e(),t.inCloudMode&&!t.inInteractionMode&&t.commentReplyCount&&"0"!==t.commentReplyCount?e("div",{staticClass:"comment-total"},[t._v(t._s(t.commentReplyCount))]):t._e()])])])])},fx=[],mx={methods:{errPreviewImage:function(){this.userMiniPreviewImg&&(this.userMiniPreviewImg=!1)},onContextmenu:function(t){var e=this,n=t.pageX,r=t.pageY,i=this.item;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:r,artboard:i})}))},clickArtboard:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.inCommentDrawing){e.next=5;break}return e.next=3,t.confirm({text:"正在编辑画板截图,是否清理截图信息并切换画板?"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:t.setCurArtboard(t.item);case 6:case"end":return e.stop()}}),e)})))()},checkImage:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.pathPreviewMini,i=t.artboard,o=t.artboardReviewImg,!n){e.next=4;break}return t.imageSrc=n,e.abrupt("return");case 4:if(t.inCloudMode){e.next=7;break}return t.imageSrc=o,e.abrupt("return");case 7:if(e.prev=7,s=i.pathPreviewBlob,s){e.next=18;break}return e.next=12,lo(o);case 12:if(s=e.sent,"string"!==typeof s){e.next=17;break}return i.pathPreviewMini=s,t.imageSrc=s,e.abrupt("return");case 17:i.pathPreviewBlob=s;case 18:a=URL.createObjectURL(s),t.imageSrc=a,e.next=29;break;case 22:return e.prev=22,e.t0=e["catch"](7),t.userMiniPreviewImg=!1,i.pathPreviewMini=o,t.imageSrc=o,e.abrupt("return");case 29:return e.prev=29,a&&t.$nextTick((function(){setTimeout((function(){try{URL.revokeObjectURL(a)}catch(t){}}),600)})),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[7,22,29,32]])})))()}},watch:{artboardReviewImg:function(t){var e=this;t&&this.$nextTick((function(){e.checkImage()}))}},computed:{artboardInDevStatus:function(){var t=this.item,e=this.inCloudViewerMode;return e&&t.customStatus===a["i"].Dev},dateStr:function(){var t=this.artboard,e=this.inCloudMode;return e?Object(l["b"])(t.updateTimeTimes,this.webViewStateTimes):""},commentReplyCount:function(){var t=this.artboard;if(!t)return"";var e=t.comments+t.replies;return e>999?"99+":e>0?e:""},exportNodeCount:function(){if(this.inCloudMode)return this.artboard.resNodeCount;var t=this.item.exportNodes;return t.length},artboardReviewImg:function(){var t=this.artboard,e=this.userMiniPreviewImg?t.artboardPreviewThumbPng:t.artboardPreviewPng;return this.inCloudMode?e:"".concat(e,"?").concat(t.mlOutputTime)},focused:function(){return this.curArtboard===this.item},artboard:function(){return this.item.artboard},title:function(){return en(this.artboard)}},mounted:function(){this.checkImage()},data:function(){return{userMiniPreviewImg:!0,imageSrc:null}},props:{item:Object,searchText:String}},px=mx,vx=(n("cadf"),Object(Dr["a"])(px,hx,fx,!1,null,"2c4a2df7",null)),bx=vx.exports,gx={methods:{setGuideRect:function(){var t=this.guideItemRect,e=this.inCloudViewerMode;e&&this.setBeginnerGuideRect(a["k"].ArtboardDevMode,t)},onMouseWheel:function(t){var e;this.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onScroll:function(t){this.scrollTop=t.target.scrollTop},onResize:function(){var t=this.$refs.artList;if(t){this.boxHeight=t.offsetHeight;var e=t.getBoundingClientRect(),n=e.x,r=e.y,i=e.width,o=e.height;n=Math.floor(n),r=Math.floor(r),i=Math.ceil(i),o=Math.ceil(o),this.boxBoundingClientRect={x:n,y:r,width:i,height:o}}},goFocusItem:function(){var t=this.curArtboard;if(t){var e=this.$refs.artList;if(e){var n=this.renderArtboardList.findIndex((function(e){return e===t}));if(-1!==n){var r=this.itemHeight*n;r-=Math.floor((this.boxHeight-this.itemHeight)/2),e.scrollTop=r}}}}},props:{visible:Boolean,list:Array,renderArtboardList:Array,sliceFilterOpen:Boolean,commentFilterOpen:Boolean,interactionFilterOpen:Boolean,artboardStatusDevFilterOpen:Boolean,searchText:String,leftSideVisible:Boolean},components:{ArtboardListItem:bx},watch:{leftSideVisible:function(t){var e=this;t&&(this.leftSideVisibleAnimate=!0,setTimeout((function(){e.leftSideVisibleAnimate=!1,e.onResize()}),200))},resetGuideRectKey:function(){this.setGuideRect()},cloudListSortSortType:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},cloudListSortOrderDesc:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},mousewheelTimes:function(t){var e=this;clearTimeout(this.mousewheelHandle),t&&(this.mousewheelHandle=setTimeout((function(){e.mousewheelTimes=!1}),200))},filterDocumentGuid:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},sliceFilterOpen:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},commentFilterOpen:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},artboardStatusDevFilterOpen:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},curArtboard:function(){this.goFocusItem()}},computed:{cloudListSort:function(){return this.$store.state.cloudListSort},cloudListSortSortType:function(){return this.cloudListSort.sortType},cloudListSortOrderDesc:function(){return this.cloudListSort.orderDesc},emptyListText:function(){return"未找到相关画板"},lazyRenderArtboardList:function(){var t=this.renderArtboardList,e=this.lazyStartIndex,n=this.lazyLength;return t.slice(e,e+n)},lazyStartIndex:function(){var t=this.scrollTop,e=this.itemHeight,n=this.renderArtboardList.length-Math.floor(this.boxHeight/this.itemHeight);return Math.max(0,Math.min(n,Math.floor(t/e)-1))},lazyLength:function(){var t=this.boxHeight,e=this.itemHeight,n=this.renderArtboardList,r=this.lazyStartIndex;return Math.min(n.length-r,Math.ceil(t/e)+2)},frontMarginTop:function(){return this.frontMarginTopNumber+"px"},frontMarginTopNumber:function(){return this.lazyStartIndex*this.itemHeight},boxRealHeight:function(){return this.itemHeight*this.renderArtboardList.length+"px"},itemHeight:function(){return 68},firstFullInViewItemLazyIndex:function(){var t=this.scrollTop,e=this.itemHeight,n=this.lazyStartIndex,r=this.renderArtboardList,i=Math.ceil(t/e)-n,o=r.length-1;return i=Math.min(i,o),i},guideItemRect:function(){var t=this.inCloudViewerMode,e=this.visible,n=this.leftSideVisible,r=this.leftSideVisibleAnimate,i=this.firstFullInViewItemLazyIndex,o=this.frontMarginTopNumber,s=this.itemHeight,c=this.boxBoundingClientRect,l=this.scrollTop,u={x:0,y:0,width:0,height:0,direction:a["j"].Left};if(!e||!t||!n||r)return u;var d=null!==c&&void 0!==c?c:{x:0,y:0,width:0,height:0},h=d.x,f=d.y,m=d.width;return m>0&&(u.x=h,u.y=f+o-l+i*s,u.width=m,u.height=s),u},resetGuideRectKey:function(){var t=this.guideItemRect;return"".concat(t.x,":").concat(t.y,":").concat(t.width,":").concat(t.height)}},data:function(){return{scrollTop:0,boxHeight:0,boxBoundingClientRect:null,mousewheelTimes:0,mousewheelHandle:0,leftSideVisibleAnimate:!1}},mounted:function(){var t,e,n=this;this.scrollTop=null!==(t=null===(e=this.$refs.artList)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0,this.setGuideRect(),this.onResize(),window.addEventListener("resize",this.onResize),this.$nextTick((function(){n.goFocusItem()}))},beforeDestroy:function(){this.setGuideRect(),window.removeEventListener("resize",this.onResize),clearTimeout(this.mousewheelHandle)}},wx=gx,xx=(n("6e1d"),Object(Dr["a"])(wx,ux,dx,!1,null,"36270453",null)),yx=xx.exports,kx={components:{ArtboardList:yx,NodeListNew:lx,FolderNavSortMenu:Rd},methods:{onNodeListResize:function(){var t=this.$refs.nodeList;t&&(this.nodeListHeight=t.offsetHeight)},onNodeListMouseWheel:function(t){var e;this.nodeListMousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onNodeListScroll:function(){var t=this.$refs.nodeList;t&&(this.nodeListScrollTop=t.scrollTop)},clickSliceFilter:function(){this.sliceFilterOpen=!this.sliceFilterOpen},clickCommentFilter:function(){this.commentFilterOpen=!this.commentFilterOpen},clickArtboardStatusDevFilter:function(){this.artboardStatusDevFilterOpen=!this.artboardStatusDevFilterOpen},clickInteractionFilter:function(){this.interactionFilterOpen=!this.interactionFilterOpen},quickKeyShift:function(t){this.shiftKey=t.shiftKey},quickKey:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,a,s,c;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.quickKeyShift(t),i=t.keyCode||t.which,n.t0=i,n.next=112===n.t0||113===n.t0?5:114===n.t0?9:38===n.t0||40===n.t0?12:46;break;case 5:return e.showArtboardList=112===i,e.setVisible(!0),t.preventDefault(),n.abrupt("break",46);case 9:return e.setVisible(!e.visible),t.preventDefault(),n.abrupt("break",46);case 12:if(!e.keydownConfirming){n.next=14;break}return n.abrupt("return");case 14:if(!e.imageViewer.visible){n.next=16;break}return n.abrupt("return");case 16:if(o=38===i?-1:1,a=t.ctrlKey||t.metaKey,a){n.next=20;break}return n.abrupt("break",46);case 20:if(s=e.renderArtboardList,0!==s.length){n.next=24;break}return e.showTextTip(1===o?"已经到达最后一个画板":"已经到达第一个画板"),n.abrupt("return");case 24:if(c=s.findIndex((function(t){return e.curArtboard===t})),-1===c?c=0:c+=o,!(c<0)){n.next=31;break}return e.showTextTip("已经到达第一个画板"),n.abrupt("return");case 31:if(!(c>=s.length)){n.next=34;break}return e.showTextTip("已经到达最后一个画板"),n.abrupt("return");case 34:if(!e.inCommentDrawing){n.next=44;break}return e.keydownConfirming=!0,n.prev=36,n.next=39,e.confirm({text:"正在编辑画板截图,是否清理截图信息并切换画板?"});case 39:if(n.sent){n.next=41;break}return n.abrupt("return");case 41:return n.prev=41,e.keydownConfirming=!1,n.finish(41);case 44:return e.setCurArtboard(s[c]),n.abrupt("break",46);case 46:case"end":return n.stop()}}),n,null,[[36,,41,44]])})))()},getArtboardExportNodeCount:function(t){if(this.inCloudMode)return t.artboard.resNodeCount;var e=t.exportNodes;return e.length},setVisible:function(t){this.$store.commit("leftSideVisible",t)}},computed:{notSupportArtboardStatusVersion:function(){return $r.notSupportAiPrompt(this.cloudVersion)},curArtboardRemoved:function(){var t;return!(null===(t=this.curArtboard)||void 0===t||!t.removed)},emptyNodeListText:function(){var t=this.sliceFilterOpen,e=this.interactionFilterOpen;return"未找到".concat(t&&e?"包含切图和原型的":t?"包含切图的":e?"包含原型的":"相关","图层信息")},imageViewer:function(){return this.$store.state.imageViewer},cloudListSort:function(){return this.$store.state.cloudListSort},sortRenderDocumentArtboards:function(){var t=this.renderDocumentArtboards,e=this.cloudListSort;return t=Object(u["a"])(t),Be(t,"updateTimeTimes",a["m"].Artboard,e),t},renderArtboardList:function(){var t=this,e=this.commentFilterOpen,n=this.artboardStatusDevFilterOpen,r=this.artboardSearchText,i=this.sliceFilterOpen,o=this.sortRenderDocumentArtboards,s=""!==r;return o.filter((function(o){if(!o||!o.artboard)return!1;if(n&&o.customStatus!==a["i"].Dev)return!1;if(e){var c=o.artboard.comments+o.artboard.replies;if(!(c>0))return!1}if(i&&0===t.getArtboardExportNodeCount(o))return!1;if(s){var l=o.artboard.name;if(!l)return!1;if(-1===l.toLowerCase().indexOf(r))return!1}return!0}))},artboardSearchText:function(){return this.searchText.artboard.toLowerCase()},nodeInSearch:function(){return""!==this.searchText.node},frontStyle:function(){var t=this.renderList,e=0;if(t.length>0){var n=t[0].index;e=n*this.nodeLineHeight}return{marginTop:e+"px"}},braceStyle:function(){return{height:this.nodeList.length*this.nodeLineHeight+"px"}},renderList:function(){var t=this.nodeList,e=[],n=new d["a"],r=new d["a"],i=this.nodeLineHeight,o=this.preloadCount*i,a=this.nodeListHeight,s=this.nodeListScrollTop;return r.set(0,s-o,100,a+2*o),t.forEach((function(t,o){n.set(0,o*i,100,i),Object(d["f"])(n,r)&&e.push({node:t,index:o})})),e},interactionNodeList:function(){var t=this.curArtboard;if(!t)return[];var e=t.childs;return e&&0!==e.length?e.filter((function(t){return!!t.renderTapInteraction})):[]},nodeList:function(){var t,e=this.sliceFilterOpen,n=this.curArtboard,r=this.interactionFilterOpen;t=e||r?n.childs.filter((function(t){return!(e&&!t.markedForExport)&&!(r&&!t.renderTapInteraction)})):n.childs;var i=[],o=this.nodeInSearch,a=o?this.searchText.node.toLowerCase():"";return t.forEach((function(t){if(t.visible&&!t.mlIgnoreLeftSide){if(o){var e=t.name;if(!e)return;if(-1==e.toLowerCase().indexOf(a))return}i.push(t)}})),i},visible:function(){return this.$store.state.artboardDetail.leftSideVisible}},data:function(){return{curArtboardRemovedTipId:0,keydownConfirming:!1,preloadCount:2,nodeLineHeight:24,nodeListScrollTop:0,nodeListMousewheelTimes:0,nodeListMousewheelHandle:0,nodeListHeight:0,shiftKey:!1,showArtboardList:"1"===Object(c["K"])("showArtboardList",!1),sliceFilterOpen:!1,commentFilterOpen:!1,interactionFilterOpen:!1,artboardStatusDevFilterOpen:!1,searchText:{artboard:"",node:""}}},watch:{showArtboardList:function(t){t?Object(c["rb"])("showArtboardList","1"):Object(c["mb"])("showArtboardList")},curArtboardRemoved:function(t){var e=this;if(t){var n,r=null===(n=this.curArtboard)||void 0===n?void 0:n.artboard;if(!r)return;var i=this.curArtboardRemovedTipId;if(i===r.cid)return;this.curArtboardRemovedTipId=r.cid,this.alert({text:"当前画板「".concat(r.name,"」已经被删除"),title:"提示",yesText:"返回列表"}).then((function(){e.curArtboardRemovedTipId=0,e.setCurArtboard(null)}))}},nodeListMousewheelTimes:function(t){var e=this;clearTimeout(this.nodeListMousewheelHandle),t>0&&(this.nodeListMousewheelHandle=setTimeout((function(){e.nodeListMousewheelTimes=0}),200))},"editComment.drawing":function(t){t&&this.setVisible(!1)},curNode:function(t,e){if(t){var n=this.nodeList.findIndex((function(e){return t===e}));if(-1!==n){var r=this.nodeListScrollTop,i=this.nodeLineHeight,o=this.nodeListHeight,a=r,s=a+o-i-i;a+=i;var c=n*i;if(c>a&&c<s)return;var l=c-o/2,u=this.$refs.nodeList;u&&u.scrollTo({top:l,behavior:null===e?"auto":"smooth"})}}},curArtboard:function(t){t&&(this.onNodeListResize(),this.onNodeListScroll())}},mounted:function(){this.onNodeListResize(),this.onNodeListScroll()},created:function(){window.addEventListener("keydown",this.quickKey),window.addEventListener("keyup",this.quickKeyShift),window.addEventListener("resize",this.onNodeListResize)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey),window.removeEventListener("keyup",this.quickKeyShift),window.removeEventListener("resize",this.onNodeListResize),clearTimeout(this.nodeListMousewheelHandle)}},Cx=kx,Sx=(n("e55b"),Object(Dr["a"])(Cx,ex,nx,!1,null,"5bbc4ac3",null)),Tx=Sx.exports,Ox=function(){var t=this,e=t._self._c;return e("div",{staticClass:"rightside",class:{on:t.visible}},[e("nav",[e("div",{class:{on:t.propertyVisible},on:{click:t.clickNavProperty}},[t._v("标注")]),e("div",{class:{on:t.multDownloadVisible},on:{click:t.clickNavSlice}},[t._v("切图"),e("span",{staticClass:"count",domProps:{textContent:t._s(t.multDownloadCount)}})]),e("div",{class:{on:t.commentVisible},on:{click:t.clickNavComment}},[t._v("评论"),e("span",{staticClass:"count",domProps:{textContent:t._s(t.commentCount)}})])]),e("div",{staticClass:"container"},[e("Properties"),e("MultDownload"),e("CommentMain")],1)])},Ix=[],Ax=function(){var t=this,e=t._self._c;return t.hasValue?e("section",{staticClass:"node-properties"},[e("Header"),e("main",{class:{export:t.curNode.markedForExport}},[e("PropertyInfo",{attrs:{nodeStyle:t.nodeStyle}}),t.nodeStyle.groupLayout?e("PropertyGroupLayout",{attrs:{nodeStyle:t.nodeStyle,isFigmaArtboard:t.isFigmaArtboard}}):t.nodeStyle.groupGrid?e("PropertyGroupGrid",{attrs:{nodeStyle:t.nodeStyle}}):t._e(),t.selfLayoutItemsVisible?e("PropertyGroupLayoutWithParent",{attrs:{showTitle:!t.nodeStyle.groupLayout&&!t.nodeStyle.groupGrid,nodeStyle:t.nodeStyle}}):t._e(),!t.curNode.types.Text&&t.nodeStyle.fill?e("PropertyFill",{attrs:{nodeStyle:t.nodeStyle}}):t._e(),t.curNode.types.GraphicNode?e("PropertiesGraphicNode",{attrs:{nodeStyle:t.nodeStyle}}):t._e(),t.curNode.types.Text?e("PropertyText",{attrs:{sketchGroupFillColor:t.sketchGroupFillColor,nodeStyle:t.nodeStyle}}):t._e(),t.curNode.markedForExport?e("PropertyExport"):t._e(),t.cssVisible?e("PropertyCss",{attrs:{sketchGroupFillColor:t.sketchGroupFillColor,nodeStyle:t.nodeStyle}}):t._e()],1)],1):t._e()},Fx=[],jx=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box"},[t.showTitle?e("h5",{staticClass:"fill-title"},[e("span",{staticClass:"i-text icon-stack"},[t._v("布局")])]):t._e(),e("PropertyGroupLayoutPosition",{attrs:{nodeStyle:t.nodeStyle}}),e("PropertyGroupLayoutJustifyAlignSelf",{attrs:{nodeStyle:t.nodeStyle}}),e("PropertyGroupLayoutGrow",{attrs:{nodeStyle:t.nodeStyle}}),e("PropertyGroupLayoutGridSpan",{attrs:{nodeStyle:t.nodeStyle}})],1)},_x=[],Mx=function(){var t=this,e=t._self._c;return null!=t.grow?e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"按比例分配剩余空间 / flex-grow"}},[t._v("拉伸比例")]),e("dd",[e("PropertyShowValue",{attrs:{cls:{bt:1},value:t.grow,title:""}}),e("div",{staticClass:"inp empty m2"})],1)]):t._e()},Lx=[],Dx=function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"inp",class:e.cls,on:{click:e.clickCopy}},[n("span",{attrs:{title:null!==(t=e.title)&&void 0!==t?t:e.value},domProps:{textContent:e._s(e.value)}})])},Px=[],Nx={methods:{clickCopy:function(t){if(!1!==this.doNotAutoCopy){var e=this.copyValue,n=this.value,r=null!=e;r&&(n=e);var i=r?Object(c["q"])(n):Object(c["p"])(n);r&&this.selectElement(t.target),i?this.showTextTip("已复制文本: ".concat(n),2):this.showTextTip("复制到剪切板失败",2)}},selectElement:function(t){if(t)try{if(window.getSelection){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}catch(r){}}},props:{value:null,title:{type:String,default:null},cls:Object,copyValue:null,doNotAutoCopy:{type:Boolean,default:!0}}},Ex=Nx,Rx=Object(Dr["a"])(Ex,Dx,Px,!1,null,null,null),Vx=Rx.exports,Bx={components:{PropertyShowValue:Vx},computed:{grow:function(){var t=this.nodeStyle.layoutGrow;return"number"!==typeof t||0===t?null:t}},props:{nodeStyle:Object}},Hx=Bx,Ux=Object(Dr["a"])(Hx,Mx,Lx,!1,null,null,null),$x=Ux.exports,Gx=function(){var t=this,e=t._self._c;return null!=t.position?e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"当前节点已脱离父图层的自动布局流 / position"}},[t._v("脱离布局")]),e("dd",[e("PropertyShowValue",{attrs:{cls:{bt:1},title:t.position.title,value:t.position.text}}),e("div",{staticClass:"inp empty m2"})],1)]):t._e()},Wx=[],zx={components:{PropertyShowValue:Vx},computed:{position:function(){var t=this.nodeStyle.position;if(!a["D"].needShowProperty(t))return null;var e=a["D"].getCss(t);return e?{text:e.value,title:e.textCN}:null}},props:{nodeStyle:Object}},Yx=zx,Xx=Object(Dr["a"])(Yx,Gx,Wx,!1,null,null,null),Kx=Xx.exports,qx=function(){var t=this,e=t._self._c;return t.visible?e("dl",{staticClass:"item in-swatch"},[e("dt",[t._v("自身对齐")]),e("dd",{staticClass:"use-desc"},[t.justifySelf?e("PropertyShowValue",{attrs:{title:t.justifySelf.title,value:t.justifySelf.text}}):t._e(),t.alignSelf?e("PropertyShowValue",{class:{m2:null!=t.justifySelf},attrs:{title:t.alignSelf.title,value:t.alignSelf.text}}):null==t.justifySelf||null==t.alignSelf?e("div",{staticClass:"inp empty m2"}):t._e(),e("div",{staticClass:"desc-text"},[null!=t.justifySelf?e("i",[t._v("水平")]):t._e(),null!=t.alignSelf?e("i",[t._v("垂直")]):t._e()])],1)]):t._e()},Jx=[],Qx={components:{PropertyShowValue:Vx},computed:{visible:function(){return null!=this.justifySelf||null!=this.alignSelf},alignSelf:function(){var t=this.nodeStyle.alignSelf;if(!a["z"].needShowProperty(t))return null;var e=a["z"].getCss(t);return e?{text:e.text,title:e.textCN}:null},justifySelf:function(){var t=this.nodeStyle.justifySelf;if(!a["C"].needShowProperty(t))return null;var e=a["C"].getCss(t);return e?{text:e.text,title:e.textCN}:null}},props:{nodeStyle:Object}},Zx=Qx,ty=Object(Dr["a"])(Zx,qx,Jx,!1,null,null,null),ey=ty.exports,ny=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"prop-box"},[null!=t.gridRow?e("dl",{staticClass:"item in-swatch grid-from-to"},[e("dt",{attrs:{title:"grid-row"}},[t._v("Row")]),e("dd",{staticClass:"use-desc"},[e("PropertyShowValue",{attrs:{value:t.gridRow.index,title:"索引：".concat(t.gridRow.index,"（从0递增）")}}),e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.gridRow.span,title:"跨度 ".concat(t.gridRow.span)}}),t._m(0)],1)]):t._e(),null!=t.gridColumn?e("dl",{staticClass:"item in-swatch grid-from-to"},[e("dt",{attrs:{title:"grid-column"}},[t._v("Column")]),e("dd",{staticClass:"use-desc"},[e("PropertyShowValue",{attrs:{value:t.gridColumn.index,title:"索引：".concat(t.gridColumn.index,"（从0递增）")}}),e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.gridColumn.span,title:"跨度 ".concat(t.gridColumn.span)}}),t._m(1)],1)]):t._e()]):t._e()},ry=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"desc-text"},[e("i",{attrs:{title:"index从0开始递增"}},[t._v("index")]),e("i",[t._v("span")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"desc-text"},[e("i",{attrs:{title:"index从0开始递增"}},[t._v("index")]),e("i",[t._v("span")])])}],iy={components:{PropertyShowValue:Vx},computed:{visible:function(){return null!=this.gridRow||null!==this.gridRow},gridRow:function(){return this.nodeStyle.gridRow},gridColumn:function(){return this.nodeStyle.gridColumn},position:function(){var t=this.nodeStyle.position;if(!a["D"].needShowProperty(t))return null;var e=a["D"].getCss(t);return e?{text:e.value,title:e.textCN}:null}},props:{nodeStyle:Object}},oy=iy,ay=(n("098a"),Object(Dr["a"])(oy,ny,ry,!1,null,"f0c2cdb4",null)),sy=ay.exports,cy={components:{PropertyGroupLayoutGridSpan:sy,PropertyGroupLayoutJustifyAlignSelf:ey,PropertyGroupLayoutPosition:Kx,PropertyGroupLayoutGrow:$x},props:{nodeStyle:Object,showTitle:Boolean}},ly=cy,uy=Object(Dr["a"])(ly,jx,_x,!1,null,null,null),dy=uy.exports,hy=function(){var t=this,e=t._self._c;return e("div",[t.nodeStyle.borders.length+t.nodeStyle.textStrokeStyles.length>0?[t._m(0),t.nodeStyle.strokeSN?[e("PropertyShowStyleName",{attrs:{title:"描边样式",styleName:t.nodeStyle.strokeSN}}),e("div",{staticClass:"prop-line"})]:t._e(),t._l(t.nodeStyle.borders,(function(t,n){return e("PropertyStrokeItem",{key:"border-".concat(n),attrs:{typeName:"边框",index:n,stroke:t}})})),t._l(t.nodeStyle.textStrokeStyles,(function(n,r){return e("PropertyStrokeItem",{key:"text-stroke-".concat(r),attrs:{typeName:"描边",index:r+t.nodeStyle.borders.length,stroke:n}})}))]:t._e(),e("PropertyEffect",{attrs:{nodeStyle:t.nodeStyle}})],2)},fy=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-stroke"},[t._v("描边")])])}],my=function(){var t=this,e=t._self._c;return t.styleName?e("dl",{staticClass:"item mult_min"},[e("dt",{domProps:{textContent:t._s(t.title)}}),e("dd",[e("PropertyShowValue",{attrs:{cls:{multiple_min:1},value:t.styleName}})],1)]):t._e()},py=[],vy={components:{PropertyShowValue:Vx},props:{styleName:String,title:String}},by=vy,gy=Object(Dr["a"])(by,my,py,!1,null,null,null),wy=gy.exports,xy=function(){var t=this,e=t._self._c;return t.stroke?e("section",{staticClass:"prop-box"},[t.index>0?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("位置")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.strokeName}}),t.stroke.widths?t._e():e("div",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("粗细")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.stroke.widths||t.stroke.width}}),t.stroke.widths?t._e():e("div",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("线条类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.stroke.style}}),t.stroke.customDashes?t._e():e("div",{staticClass:"inp empty"})],1)]),e("PropertyColor",{attrs:{fill:t.stroke}})],1):t._e()},yy=[],ky=function(){var t=this,e=t._self._c;return t.fill.type===t.EnumFillShowType.FillColor?e("PropertyShowColor",{attrs:{name:t.solidName,value:t.fill.color,"swatch-value":t.fill.swatch}}):t.fill.type===t.EnumFillShowType.LinearGradientFill?e("div",[e("dl",{staticClass:"item"},[e("dt",[t._v("线性渐变")]),e("dd",[e("PropertyShowValue",{attrs:{value:"linear"}}),e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.canvasAngle,title:"起点和终点的角度为沿水平右侧方向顺时针旋转: ".concat(t.canvasAngle)}})],1)]),t.linearEndPoints?[e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("起点")]),e("span",{staticClass:"loc-name"},[t._v("X1")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.x1,copyValue:t.linearEndPoints.decimal_x1}}),e("span",{staticClass:"loc-name"},[t._v("Y1")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.y1,copyValue:t.linearEndPoints.decimal_y1,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("终点")]),e("span",{staticClass:"loc-name"},[t._v("X2")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.x2,copyValue:t.linearEndPoints.decimal_x2}}),e("span",{staticClass:"loc-name"},[t._v("Y2")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.y2,copyValue:t.linearEndPoints.decimal_y2,cls:{m2:1}}})],1)])]:t._e(),e("ul",{staticClass:"fill-list",class:{"last-has-swatch":t.gradientFillLastHasSwatch}},t._l(t.fill.colorStops,(function(n,r){return e("li",{key:"line-colorStop-".concat(r)},[e("div",{staticClass:"title",on:{click:function(e){return t.clickCopy(n.stop,!0)}}},[t._v(t._s(n.stop))]),e("PropertyShowColor",{attrs:{name:"",value:n.color,"swatch-value":n.swatch}})],1)})),0),t.gradientSwatch?e("dl",{staticClass:"item"},[e("dt",[t._v("渐变变量")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.gradientSwatch}})],1)]):t._e()],2):t.fill.type===t.EnumFillShowType.RadialGradientFill||t.fill.type===t.EnumFillShowType.AngularGradientFill||t.fill.type===t.EnumFillShowType.DiamondGradientFill?e("div",[e("dl",{staticClass:"item"},[e("dt",[t._v(t._s(t.gradientInfo.name)+"渐变")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.gradientInfo.className}}),e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.canvasAngle,title:"沿水平右侧方向顺时针旋转: ".concat(t.canvasAngle)}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("圆心")]),e("span",{staticClass:"loc-name"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.startX,copyValue:t.ellipseEndPoints.decimal_startX}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.startY,copyValue:t.ellipseEndPoints.decimal_startY,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("半径")]),e("span",{staticClass:"loc-name"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.scaleX,copyValue:t.ellipseEndPoints.decimal_scaleX}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.scaleY,copyValue:t.ellipseEndPoints.decimal_scaleY,cls:{m2:1}}})],1)]),e("ul",{staticClass:"fill-list",class:{"last-has-swatch":t.gradientFillLastHasSwatch}},t._l(t.fill.colorStops,(function(n,r){return e("li",{key:"radial-colorStop-".concat(r)},[e("div",{staticClass:"title",on:{click:function(e){return t.clickCopy(n.stop,!0)}}},[t._v(t._s(n.stop))]),e("PropertyShowColor",{attrs:{name:"",value:n.color,"swatch-value":n.swatch}})],1)})),0),t.gradientSwatch?e("dl",{staticClass:"item"},[e("dt",[t._v("渐变变量")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.gradientSwatch}})],1)]):t._e()]):t._e()},Cy=[],Sy={computed:{colorTypes:function(){return this.$store.state.setting.color.items},currentColorType:function(){return this.colorTypes[this.$store.state.setting.color.current]},currentColorTypeIndex:function(){return this.$store.state.setting.color.current}},methods:{getSwatch:function(t){var e;if(null==t)return null;if(!this.inCloudMode)return null;var n=null===(e=this.curArtboard)||void 0===e?void 0:e.artboard.swatches;if(!n)return null;var r=n[t];if(!Object(l["k"])(r))return null;var i=r.doc,o=r.lib;return Object(l["i"])(i)&&i.length>0?i[i.length-1]:Object(l["i"])(o)&&o.length>0?o[o.length-1]:null},setSettingColor:function(t){this.$store.commit("setSettingColor",t)},getColorRGBAValue:function(t){return Object(h["i"])(t)},getCssShowColor:function(t,e,n){var r,i=Object(h["i"])(t);return null!==(r=n)&&void 0!==r||(n=this.getSwatch(i.hexa)),t=1===i.opacity?Object(h["g"])(i).value:i.value,{value:t,swatch:n,name:e}},getColorValue:function(t){var e=this.getColorRGBAValue(t);switch(this.currentColorType){case"hex":e=Object(h["g"])(e);break;case"ahex":e=Object(h["e"])(e);break;case"hexa":e=Object(h["h"])(e);break;case"hsla":e=Object(h["f"])(e);break}return e}}},Ty=function(){var t=this,e=t._self._c;return e("dl",{staticClass:"item",class:{"in-swatch":t.hasSwatch}},[t.name?e("dt",[t._v(t._s(t.name))]):t._e(),e("dd",[e("div",{staticClass:"container"},[e("div",{staticClass:"color"},[e("i",{attrs:{title:"点击切换颜色类型"},on:{contextmenu:function(e){return e.preventDefault(),t.showColorSelect.apply(null,arguments)},click:t.clickColorTypeNext}},[e("span",{style:{backgroundColor:t.rgba.value}})]),e("span",{staticClass:"inp",class:[this.currentColorType],on:{click:function(e){return t.clickCopy(t.showValue.value)}}},[e("span",{attrs:{title:t.showValue.value},domProps:{textContent:t._s(t.showValue.value)}})])]),"hex"===this.currentColorType?e("div",{staticClass:"inp opacity",on:{click:function(e){return t.clickCopy(t.opacity)}}},[e("span",{staticClass:"opacity",attrs:{title:t.opacity},domProps:{textContent:t._s(t.opacity)}})]):t._e(),t.colors.visible?e("ul",{staticClass:"colors"},t._l(t.colorTypes,(function(n,r){return e("li",{key:n,class:{on:t.currentColorTypeIndex===r},on:{click:function(e){return t.onColorSelectChanged(r)}}},[t._v(t._s(n.toUpperCase()))])})),0):t._e()]),t.hasSwatch?e("div",{staticClass:"container"},[e("div",{staticClass:"swatch",attrs:{title:"颜色变量: ".concat(t.swatch)}},[e("span",{staticClass:"swatch-text",on:{click:function(e){return t.clickCopy(t.swatch,!0)}}},[t._v(t._s(t.swatch))])])]):t._e()])])},Oy=[],Iy={props:{value:null,name:String,nonSwatch:{type:Boolean,default:!1},swatchValue:{type:String,default:void 0}},methods:{clickCopy:function(t,e){(e?Object(c["q"])(t):Object(c["p"])(t))?this.showTextTip("已复制文本: ".concat(t),2):this.showTextTip("复制到剪切板失败",2)},showColorSelect:function(){this.colors.visible=!0},clickColorTypeNext:function(){this.setSettingColor(this.currentColorTypeIndex+1)},onColorSelectChanged:function(t){this.setSettingColor(t)},hideColorSelect:function(){var t=this;requestAnimationFrame((function(){t.colors.visible=!1}))}},computed:{rgba:function(){return this.getColorRGBAValue(this.value)},showValue:function(){return this.getColorValue(this.value)},hasSwatch:function(){return!!this.swatch},swatch:function(){var t=this.nonSwatch,e=this.swatchValue;return t?null:Object(l["j"])(e)?e:this.getSwatch(this.rgba.hexa)},opacity:function(){var t=this.showValue.opacity;return li["a"].mul(t,100)+"%"}},mixins:[Sy],watch:{"colors.visible":function(t){t?(window.addEventListener("click",this.hideColorSelect,!0),window.addEventListener("contextmenu",this.hideColorSelect,!0)):(window.removeEventListener("click",this.hideColorSelect,!0),window.removeEventListener("contextmenu",this.hideColorSelect,!0))}},beforeDestroy:function(){window.removeEventListener("click",this.hideColorSelect,!0),window.removeEventListener("contextmenu",this.hideColorSelect,!0)},data:function(){return{colors:{visible:!1}}}},Ay=Iy,Fy=(n("5b8a"),Object(Dr["a"])(Ay,Ty,Oy,!1,null,"4c7f4ac3",null)),jy=Fy.exports,_y={methods:{clickCopy:function(t,e){e&&(t=Object(c["r"])(parseFloat(t)/100,4)),Object(c["q"])(t)?this.showTextTip("已复制文本: ".concat(t),2):this.showTextTip("复制到剪切板失败",2)}},computed:{gradientFillLastHasSwatch:function(){var t,e=null===(t=this.fill)||void 0===t?void 0:t.colorStops;if(!Object(l["i"])(e))return!1;var n=e.length;if(n>1){var r=e[n-1];if(r){var i=r.swatch,o=r.color;return Object(l["j"])(i)||(i=this.getSwatch(this.getColorRGBAValue(o).hexa)),Object(l["j"])(i)}}},canvasAngle:function(){var t;return Object(c["D"])(null===(t=this.fill)||void 0===t?void 0:t.angle)},EnumFillShowType:function(){return a["s"]},gradientSwatch:function(){var t,e=this.fill;switch(e.type){case a["s"].FillColor:case a["s"].None:case a["s"].ImageFill:return null}var n=e.colorStops,r=Object(h["k"])(null===(t=this.gradientInfo)||void 0===t?void 0:t.className,n);return this.getSwatch(r)},gradientInfo:function(){var t;return null!==(t=a["s"].getGradientInfo(this.fill.type))&&void 0!==t?t:{name:void 0,className:void 0}},ellipseEndPoints:function(){var t=this.fill;if(t.type===a["s"].RadialGradientFill||t.type===a["s"].AngularGradientFill||t.type===a["s"].DiamondGradientFill){var e=t.startX,n=t.startY,r=t.scaleX,i=t.scaleY,o=[e,n,r,i].map((function(t){return Object(c["r"])(parseFloat(t)/100,4)})),s=Object(Bt["a"])(o,4),l=s[0],u=s[1],d=s[2],h=s[3];return{startX:e,startY:n,scaleX:r,scaleY:i,decimal_startX:l,decimal_startY:u,decimal_scaleX:d,decimal_scaleY:h}}},linearEndPoints:function(){var t=this.fill;if(t.type!==a["s"].LinearGradientFill)return null;var e=t.endPoints;if(!Object(l["i"])(e)||4!==e.length)return null;var n=e.map((function(t){return Object(c["r"])(t,4)})),r=Object(Bt["a"])(n,4),i=r[0],o=r[1],s=r[2],u=r[3],d=e.map((function(t){return Object(c["r"])(100*t,2)+"%"})),h=Object(Bt["a"])(d,4),f=h[0],m=h[1],p=h[2],v=h[3];return{x1:f,y1:m,x2:p,y2:v,decimal_x1:i,decimal_y1:o,decimal_x2:s,decimal_y2:u}}},components:{PropertyShowColor:jy,PropertyShowValue:Vx},mixins:[Sy],props:{fill:Object,solidName:{type:String,default:"纯色"}}},My=_y,Ly=(n("76b8"),Object(Dr["a"])(My,ky,Cy,!1,null,"2f626672",null)),Dy=Ly.exports,Py={components:{PropertyColor:Dy,PropertyShowValue:Vx},computed:{strokeName:function(){var t=this.stroke,e=this.typeName;if(t){var n=t.position;return a["lb"].getName(n)+e}}},props:{stroke:Object,index:Number,typeName:String}},Ny=Py,Ey=Object(Dr["a"])(Ny,xy,yy,!1,null,null,null),Ry=Ey.exports,Vy=function(){var t=this,e=t._self._c;return t.visible?e("div",[t._m(0),t.nodeStyle.effectSN?[e("PropertyShowStyleName",{attrs:{title:"效果样式",styleName:t.nodeStyle.effectSN}}),e("div",{staticClass:"prop-line"})]:t._e(),t.objectEffect?[e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:"高斯模糊"}}),e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.objectEffect}}),e("span",{staticClass:"inp empty"})],1)])]:t._e(),t.backgroundEffect?[t.objectEffect?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:"背景模糊"}}),e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.backgroundEffect}}),null==t.backgroundEffectBrightness&&null==t.backgroundEffectSaturation?e("span",{staticClass:"inp empty"}):t.backgroundEffectBrightness?e("div",{staticClass:"brightness"},[e("span",{staticClass:"bn-name"},[t._v("亮度")]),e("PropertyShowValue",{attrs:{value:t.backgroundEffectBrightness}})],1):t.backgroundEffectSaturation?e("div",{staticClass:"saturation"},[e("span",{staticClass:"bn-name"},[t._v("饱和度")]),e("PropertyShowValue",{attrs:{value:t.backgroundEffectSaturation}})],1):t._e()],1)])]:t._e(),t.zoomEffect?[t.objectEffect||t.backgroundEffect?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:"缩放模糊"}}),e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.zoomEffect}}),t.zoomEffectCenter?e("div",{staticClass:"brightness"},[e("span",{staticClass:"bn-name"},[t._v("原点")]),e("PropertyShowValue",{attrs:{value:t.zoomEffectCenter}})],1):e("span",{staticClass:"inp empty"})],1)])]:t._e(),t.motionEffect?[t.zoomEffect||t.objectEffect||t.backgroundEffect?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:"动感模糊"}}),e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.motionEffect}}),t.motionEffectAngle?e("div",{staticClass:"brightness"},[e("span",{staticClass:"bn-name"},[t._v("角度")]),e("PropertyShowValue",{attrs:{value:t.motionEffectAngle}})],1):e("span",{staticClass:"inp empty"})],1)])]:t._e(),t._l(t.nodeStyle.shadows,(function(n,r){return e("PropertyEffectShadow",{key:"shadow-".concat(r),attrs:{shadowName:"外阴影",shadow:n,splitLine:(t.backgroundEffect||t.objectEffect||t.zoomEffect||t.motionEffect)&&0===r||r>0}})})),t._l(t.nodeStyle.innerShadows,(function(n,r){return e("PropertyEffectShadow",{key:"inner-shadow-".concat(r),attrs:{shadowName:"内阴影",shadow:n,splitLine:(t.backgroundEffect||t.objectEffect||t.zoomEffect||t.motionEffect)&&0===t.nodeStyle.shadows.length&&0===r||r+t.nodeStyle.shadows.length>0}})}))],2):t._e()},By=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-effect"},[t._v("效果")])])}],Hy=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box"},[t.splitLine?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.shadowName}}),e("div",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item loc"},[e("dt",[t._v("偏移")]),e("dd",[e("span",{staticClass:"loc-name"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.shadow.x}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.shadow.y,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.shadow.blur}}),e("div",{staticClass:"inp empty"})],1)]),t.shadow.spread?e("dl",{staticClass:"item"},[e("dt",[t._v("阴影大小")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.shadow.spread}}),e("div",{staticClass:"inp empty"})],1)]):t._e(),e("PropertyShowColor",{attrs:{name:"颜色",value:t.shadow.color,"swatch-value":t.shadow.swatch}})],1)},Uy=[],$y={components:{PropertyShowColor:jy,PropertyShowValue:Vx},props:{shadowName:String,shadow:Object,splitLine:Boolean}},Gy=$y,Wy=Object(Dr["a"])(Gy,Hy,Uy,!1,null,null,null),zy=Wy.exports,Yy={components:{PropertyShowValue:Vx,PropertyShowStyleName:wy,PropertyEffectShadow:zy},computed:{visible:function(){var t=this.objectEffect,e=this.backgroundEffect,n=this.zoomEffect,r=this.motionEffect,i=this.nodeStyle,o=i.shadows,a=i.innerShadows;return t||e||n||r||o.length+a.length>0},motionEffect:function(){var t=this.nodeStyle.motionEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0,isHorizintal:!0})},motionEffectAngle:function(){var t=this.nodeStyle.motionEffectAngle;return null==t||isNaN(t)?"":(-Math.round(t)).toString()},zoomEffect:function(){var t=this.nodeStyle.zoomEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0,isHorizintal:!0})},zoomEffectCenter:function(){var t=this.nodeStyle.zoomEffectCenter;return t?"[".concat(Object(c["r"])(t.x,2),",").concat(Object(c["r"])(t.y),"]"):""},objectEffect:function(){var t=this.nodeStyle.objectEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0,isHorizintal:!0})},backgroundEffect:function(){var t=this.nodeStyle.backgroundEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0,isHorizintal:!0})},backgroundEffectBrightnessDecimal:function(){var t=this.nodeStyle.backgroundEffectBrightness;return"number"!==typeof t||1===t?null:Object(c["r"])(t,2)},backgroundEffectBrightness:function(){var t=this.backgroundEffectBrightnessDecimal;return null==t?null:Math.round(100*t)+"%"},backgroundEffectSaturationDecimal:function(){var t=this.nodeStyle.backgroundEffectSaturation;return"number"!==typeof t||1===t?null:Object(c["r"])(t,2)},backgroundEffectSaturation:function(){var t=this.backgroundEffectSaturationDecimal;return null==t?null:Math.round(100*t)+"%"}},props:{nodeStyle:Object}},Xy=Yy,Ky=Object(Dr["a"])(Xy,Vy,By,!1,null,null,null),qy=Ky.exports,Jy={components:{PropertyStrokeItem:Ry,PropertyShowStyleName:wy,PropertyEffect:qy},props:{nodeStyle:Object},computed:{strokeTypeName:function(){return this.curNode.types.Text?"描边":"边框"}}},Qy=Jy,Zy=Object(Dr["a"])(Qy,hy,fy,!1,null,null,null),tk=Zy.exports,ek=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box"},[e("dl",{staticClass:"item node-name"},[e("dt",[t._v("图层")]),e("dd",{staticClass:"cur-node-name"},[e("NodeName",{attrs:{node:t.curNode}})],1)]),t.curNode.layerSN?e("dl",{staticClass:"item mult_min"},[e("dt",{domProps:{textContent:t._s("图层样式")}}),e("dd",[e("PropertyShowValue",{attrs:{cls:{multiple_min:1},value:t.curNode.layerSN}})],1)]):t._e(),t.renderTapInteraction?e("PropertyInfoInteraction",{attrs:{renderTapInteraction:t.renderTapInteraction}}):t._e(),t._m(0),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name mid"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.left}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.top,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name mid"},[t._v("W")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.width}}),e("span",{staticClass:"loc-name"},[t._v("H")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.height,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item",class:{opa:t.showBlendOpacity}},[e("dt",{attrs:{title:"当前图层的不透明度"}},[t._v("不透明度")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.nodeStyle.opacity}}),e("div",{staticClass:"inp empty"})],1)]),t.showBlendOpacity?e("dl",{staticClass:"item opa"},[e("dt",{attrs:{title:"组合不透明度是指叠加了当前图层和所有父级图层透明度的计算值"}},[t._v("组合不透明度")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.nodeStyle.blendOpacity}}),e("div",{staticClass:"inp empty"})],1)]):t._e(),t.nodeStyle.cornerRadiiValue?e("dl",{staticClass:"item"},[e("dt",{domProps:{textContent:t._s(t.nodeStyle.cornerRadiiName)}}),e("dd",[e("PropertyShowValue",{attrs:{value:t.nodeStyle.cornerRadiiValue}}),t.shortCornerRadiiValue?e("div",{staticClass:"inp empty"}):t._e()],1)]):t._e(),t.curNode.boxTransform?[0!==t.curNode.boxTransform.rotation?e("dl",{staticClass:"item"},[e("dt",[t._v("旋转")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.curNode.boxTransform.rotation+"deg"}}),e("div",{staticClass:"inp empty"})],1)]):t._e(),t.flippedText?e("dl",{staticClass:"item"},[e("dt",[t._v("翻转")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.flippedText}}),e("div",{staticClass:"inp empty"})],1)]):t._e()]:t._e()],2)},nk=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-rect"},[t._v("比例")])])}],rk=function(){var t=this,e=t._self._c;return e("dl",{staticClass:"item"},[e("dt",[t._v(t._s(t.typeName))]),e("dd",[e("a",{staticClass:"interaction-link",attrs:{href:"javascript:;",title:t.toArtboardName},on:{click:t.clickGoArtboard}},[t._v(t._s(t.toArtboardName))])])])},ik=[],ok={methods:{clickGoArtboard:function(){this.$store.commit("setInteractionArtboard",this.renderTapInteraction)}},computed:{typeName:function(){return pt.getTypeName(this.renderTapInteraction.type)},toArtboardName:function(){var t,e;switch(this.renderTapInteraction.type){case pt.goBack:case pt.goBackAndCloseAllOverlay:return"上一个画板";case pt.closeCurrentOverlay:return"最顶部遮罩层";case pt.goUrl:return this.renderTapInteraction.toUrl;default:return null!==(t=null===(e=this.toArtboardItem)||void 0===e?void 0:e.name)&&void 0!==t?t:"目标画板未上传"}},toArtboardItem:function(){var t,e;return null!==(t=null===(e=this.renderTapInteraction)||void 0===e?void 0:e.toArtboardItem)&&void 0!==t?t:null}},props:{renderTapInteraction:Object}},ak=ok,sk=(n("7eae"),Object(Dr["a"])(ak,rk,ik,!1,null,"7e5908d3",null)),ck=sk.exports,lk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"node-name",class:{focused:t.focused,"non-export":!t.node.markedForExport}},[this.node.markedForExport?e("input",{attrs:{type:"text","max-length":"50",spellcheck:"false"},domProps:{value:t.nodeShowName},on:{focus:t.inputFocus,blur:function(e){return t.inputBlur(e)},compositionstart:function(e){return t.onComposition(!0)},compositionend:function(e){return t.onComposition(!1)},keyup:t.inputKeyup}}):e("div",{attrs:{title:t.nodeShowNameOrigin},on:{click:function(e){return t.clickCopy()}}},[t._v(t._s(t.nodeShowName))])])},uk=[],dk={methods:{clickCopy:function(){var t=this.nodeShowNameOrigin;Object(c["q"])(t)?this.showTextTip("已复制图层名到剪切板",2):this.showTextTip("复制到剪切板失败",2)},inputKeyup:function(t){var e=t.keyCode||t.which;13==e&&(t.target.blur(),t.preventDefault())},onComposition:function(t){this.inComposition=t},inputFocus:function(){this.focused=!0},inputBlur:function(t){this.focused=!1;var e=t.target.value.trim();if(e!==this.nodeShowName){var n=this.node;n.markedForExport?Object(c["sb"])(this,n,e):this.showTextTip("只有切图资源才可以进行重命名操作")}}},computed:{nodeShowNameOrigin:function(){var t=this.node;return Object(c["M"])(t)},nodeShowName:function(){var t=this.node,e=this.nodeShowNameOrigin;if(!t.markedForExport&&Object(l["j"])(e)){e=e.trim();var n=e.length;n>33&&(e=e.substr(0,30)+"...")}return e}},data:function(){return{focused:!1,inComposition:!1}},props:{node:Object}},hk=dk,fk=(n("8c0c"),Object(Dr["a"])(hk,lk,uk,!1,null,"86effb9e",null)),mk=fk.exports,pk={props:{nodeStyle:Object},components:{PropertyShowValue:Vx,NodeName:mk,PropertyInfoInteraction:ck},computed:{showBlendOpacity:function(){var t=this.nodeStyle;return t.blendOpacity&&t.blendOpacity!=t.opacity},renderTapInteraction:function(){var t=this.curNode;if(!t)return null;var e=t.renderTapInteraction;if(e)return e;var n=t.parentNode,r=t.boundsInArtboard;while(n){if(r.isSame(n.boundsInArtboard)&&(e=n.renderTapInteraction,e))return e;n=n.parentNode}return null},flippedText:function(){var t=this.curNode.boxTransform;if(t){var e="";return t.flippedHorizontally&&(e="水平"),t.flippedVertically&&(e?e+=" & 垂直":e="垂直"),e}},shortCornerRadiiValue:function(){var t=this.nodeStyle.cornerRadiiValue;return!t||-1===t.indexOf(" ")}},created:function(){0}},vk=pk,bk=(n("d114"),Object(Dr["a"])(vk,ek,nk,!1,null,"66d591b7",null)),gk=bk.exports,wk=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"prop-box"},[e("h5",{staticClass:"fill-title"},[e("span",{staticClass:"i-text icon-fills"},[t._v("填充")]),t.nodeStyle.blendMode?e("div",{staticClass:"blend-mode"},[e("span",[t._v("混合模式")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.blendMode}})],1):t._e()]),t.fillSN?e("PropertyShowStyleName",{attrs:{title:"填充样式",styleName:t.fillSN}}):t._e(),t._l(t.fills,(function(t,n){return e("PropertyColor",{key:"fill-".concat(n),attrs:{fill:t}})}))],2):t._e()},xk=[],yk={components:{PropertyShowValue:Vx,PropertyColor:Dy,PropertyShowStyleName:wy},props:{nodeStyle:Object},computed:{fillSN:function(){return this.nodeStyle.fillSN},fills:function(){return this.nodeStyle.fills},visible:function(){return this.fills.length>0}},data:function(){return{EnumFillShowType:a["s"]}}},kk=yk,Ck=(n("fe6a"),Object(Dr["a"])(kk,wk,xk,!1,null,"6ecf663c",null)),Sk=Ck.exports,Tk=function(){var t=this,e=t._self._c;return e("section",[e("section",{staticClass:"prop-box"},[t._m(0),t.charSN?e("PropertyShowStyleName",{attrs:{title:"字符样式",styleName:t.charSN}}):t._e(),t._l(t.combineStyles,(function(n,r){return[n.color?e("PropertyTextColor",{key:r,attrs:{forKey:r,item:n,sketchGroupFillColor:t.sketchGroupFillColor,itemStyle:t.style}}):n.hideDefault&&t.styles[0][n.field]==n.default?t._e():e("dl",{key:r,staticClass:"item"},[e("dt",{domProps:{textContent:t._s(n.name)}}),e("dd",[e("PropertyShowValue",{attrs:{value:n.extendValue(t.styles[0][n.field],"fontWeight"===n.field?t.calcPlatformShowType:t.getCalcPlatformValue)}}),"fontWeight"===n.field?e("PropertyShowValue",{attrs:{value:t.styles[0].fontWeightCss,cls:t.fontWeightCls}}):n.halfWidth?e("div",{staticClass:"inp m2 empty"}):t._e()],1)])]})),t.paragraphIndent?e("dl",{staticClass:"item"},[e("dt",[t._v("段落缩进")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.paragraphIndent}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e(),t.paragraphSpacing?e("dl",{staticClass:"item"},[e("dt",[t._v("段落间距")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.paragraphSpacing}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e(),t.lineSpacing?e("dl",{staticClass:"item"},[e("dt",[t._v("行高")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.lineSpacing}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("对齐方式")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.curNode.textAlign}}),e("div",{staticClass:"inp m2 empty"})],1)]),t.curNode.textVerticalAlign?e("dl",{staticClass:"item"},[e("dt",[t._v("垂直对齐")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.curNode.textVerticalAlign}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e()],2),t.unCombineStyles.length>0?e("div",[t._l(t.styles,(function(n,r){return[""!=t.subTexts[r]?e("section",{key:r,staticClass:"prop-box uncombine"},[e("h5",[t._v("文本"+t._s(r+1))]),!t.charSN&&t.styles.length>1&&n.charSN?e("PropertyShowStyleName",{attrs:{title:"字符样式",styleName:n.charSN}}):t._e(),t._l(t.unCombineStyles,(function(r,i){return[r.color?e("PropertyTextColor",{key:r.field,attrs:{forKey:r.field,item:r,sketchGroupFillColor:t.sketchGroupFillColor,itemStyle:n}}):r.hideDefault&&n[r.field]==r.default?t._e():e("dl",{key:i,staticClass:"item"},[e("dt",{domProps:{textContent:t._s(r.name)}}),e("dd",[e("PropertyShowValue",{attrs:{value:r.extendValue(n[r.field],"fontWeight"===r.field?t.calcPlatformShowType:t.getCalcPlatformValue)}}),"fontWeight"===r.field?e("PropertyShowValue",{attrs:{value:n.fontWeightCss,cls:t.fontWeightCls}}):r.halfWidth?e("div",{staticClass:"inp m2 empty"}):t._e()],1)])]}))],2):t._e()]}))],2):t._e(),e("h5",{staticClass:"mult-h5"},[t._v(" 文本内容 "),e("a",{staticClass:"copy",attrs:{href:"javascript:;"},on:{click:function(e){return t.copyText(t.text)}}},[t._v("复制文本")])]),e("dl",{staticClass:"item mult"},[e("dd",[e("PropertyShowValue",{attrs:{doNotAutoCopy:!1,value:t.text,cls:{multiple:1}}})],1)])])},Ok=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-text"},[t._v("文本")])])}],Ik=function(){var t=this,e=t._self._c;return t.itemStyle.figmaFills?e("div",t._l(t.itemStyle.figmaFills,(function(n,r){return e("PropertyColor",{key:"".concat(t.forKey,"_").concat(r,"_fig"),attrs:{fill:n,solidName:"前景色"}})})),1):t.itemStyleFills.length>0?e("div",t._l(t.itemStyleFills,(function(n,r){return e("PropertyShowColor",{key:"".concat(t.forKey,"_").concat(r),attrs:{name:"".concat(t.item.name).concat(r+1),value:n.value,"swatch-value":n.swatch}})})),1):t.itemStyleFill?e("PropertyShowColor",{key:t.forKey,attrs:{name:t.item.name,value:t.itemStyleFill.value,"swatch-value":t.itemStyleFill.swatch}}):t._e()},Ak=[],Fk={components:{PropertyColor:Dy,PropertyShowColor:jy},computed:{itemStyleFills:function(){var t=this.itemStyle,e=this.sketchGroupFillColor;return t.fills&&t.fills.length>1?t.fills.map((function(t){return Object(c["T"])(e,t.value,t.swatch)})):[]},itemStyleFill:function(){var t=this.itemStyleFills,e=this.itemStyle.fill,n=this.sketchGroupFillColor;return e&&0===t.length?Object(c["T"])(n,e.value,e.swatch):null}},props:{itemStyle:Object,forKey:String,item:Object,sketchGroupFillColor:{type:Object,validator:function(){return!0}}}},jk=Fk,_k=Object(Dr["a"])(jk,Ik,Ak,!1,null,null,null),Mk=_k.exports,Lk=[{name:"填充样式",field:"fillSN",hideDefault:!0,default:null},{name:"前景色",field:"fill",color:!0},{name:"字体",field:"fontFamily"},{name:"字重",field:"fontWeight",halfWidth:!1,hideDefault:!1,default:"normal",extendValue:function(t,e){if("number"===typeof t){var n=a["bb"][t];n&&(t=n.toLowerCase())}return e===a["c"].IOS&&t&&"normal"===t.toLowerCase()&&(t="Regular"),t}},{name:"斜体",field:"fontItalic",halfWidth:!0,hideDefault:!0,default:"normal"},{name:"字号",field:"fontSize",halfWidth:!0,extendValue:function(t,e){return e(t,{fontSize:!0,needArtScale:!0,isHorizintal:!0})}},{name:"字间距",field:"charSpacing",hideDefault:!0,default:null,halfWidth:!0,extendValue:function(t,e){return e(t,{needArtScale:!0,isHorizintal:!0})}}];Lk.forEach((function(t){t.extendValue||(t.extendValue=function(t){return t})}));var Dk={components:{PropertyShowValue:Vx,PropertyTextColor:Mk,PropertyShowStyleName:wy},methods:{copyText:function(t){null!=t&&(Object(c["q"])(t)?this.showTextTip("已复制文本到剪切板",2):this.showTextTip("复制到剪切板失败",2))}},computed:{charSN:function(){var t,e=this.styles,n=this.curNode.charSN;return 1===e.length&&(t=e[0].charSN)?t:n},fontWeightCls:function(){return{m2:1}},paragraphIndent:function(){var t=this.curNode,e=t.paragraphIndent;return 0===e||null==e?"":this.getCalcPlatformValue(e,{needArtScale:!0,isHorizintal:!0})},paragraphSpacing:function(){var t=this.curNode,e=t.paragraphSpacing;return 0===e||null==e?"":this.getCalcPlatformValue(e,{needArtScale:!0,isHorizintal:!1})},lineSpacing:function(){var t=this.curNode,e=t.lineSpacing;return 0===e||null==e?"auto":this.getCalcPlatformValue(e,{needArtScale:!0,isHorizintal:!1})},unCombineStyles:function(){var t=[],e=this.combineStyles;return Lk.forEach((function(n){e[n.field]||t.push(n)})),t},combineStyles:function(){var t={},e=this.styles,n=e.length;return n<=1?(1===n&&Lk.forEach((function(e){t[e.field]=e})),t):(Lk.forEach((function(r){var i=!0,o=e[0][r.field];r.color&&(o="".concat(o.value,":").concat(o.swatch));for(var a=1;a<n;a++){var s=e[a];if(s){var c=s[r.field];if(r.color&&(c="".concat(c.value,":").concat(c.swatch)),c!==o){i=!1;break}}}i&&(t[r.field]=r)})),t)},subTexts:function(){var t=this.text,e=this.styles,n=[];if(0===e.length||1===e.length&&0===e[0].length)return n.push(t),n;var r=0;return e.forEach((function(i,o){var a;o===e.length-1?a=t.substr(r):(a=t.substr(r,i.length),r+=i.length),n.push(a)})),n},text:function(){return this.curNode.text||""},styles:function(){return this.curNode.styleRanges||[]},style:function(){return this.styles[0]}},props:{sketchGroupFillColor:{type:Object,validator:function(){return!0}},nodeStyle:Object},created:function(){}},Pk=Dk,Nk=Object(Dr["a"])(Pk,Tk,Ok,!1,null,null,null),Ek=Nk.exports,Rk=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"prop-box css-box"},[e("h5",{staticClass:"mult-h5"},[e("span",{staticClass:"i-text icon-code"},[t._v("CSS")]),e("a",{staticClass:"copy",attrs:{href:"javascript:;"},on:{click:function(e){return t.copyText(t.propertyText)}}},[t._v("复制样式")])]),e("dl",{staticClass:"item mult"},[e("dd",[e("ul",{staticClass:"css"},t._l(t.properties,(function(n,r){return e("li",{key:"property-".concat(r)},[n.name?[n.swatch?e("span",{staticClass:"desc desc-swatch"},[t._v("/* "+t._s(n.swatch)+" */")]):t._e(),e("span",{staticClass:"name"},[t._v(t._s(n.name)+":")]),e("span",{staticClass:"value"},[t._v(t._s(n.value)+";")])]:n.desc?[e("span",{staticClass:"desc"},[t._v(t._s(n.desc))])]:t._e()],2)})),0)])])]):t._e()},Vk=[],Bk={mixins:[Sy],props:{nodeStyle:Object,sketchGroupFillColor:{type:Object,validator:function(){return!0}}},methods:{copyText:function(t){Object(c["q"])(t)?this.showTextTip("已复制样式到剪切板",2):this.showTextTip("复制到剪切板失败",2)}},computed:{visible:function(){return this.properties.length>0},properties:function(){var t,e,n,r,i=this,o=this.curNode,s=this.nodeStyle,d=[],f=!1,m=s.groupLayout,p=s.groupGrid;if(m){n="display",e="flex",d.push({name:n,value:e});var v=m.paddings,b=m.usePadding,g=m.alignItems,w=m.flexDirection,x=m.justifyContent,y=m.allGuttersGap,k=m.counterGap,C=m.useGap,S=m.flexWrap,T=m.alignContent;if(a["E"].needAlignContent(S)&&(T=a["x"].getCss(T),T)){var O=T;n=O.name,e=O.value,d.push({name:n,value:e})}if(S=a["E"].getCss(S),S){var I=S;n=I.name,e=I.value,d.push({name:n,value:e})}if(r=a["A"].getCss(w),r){var A=r;n=A.name,e=A.value,e&&"row"!==e&&d.push({name:n,value:e})}if(x=a["B"].getCss(x),x){var F=x;n=F.name,e=F.value,d.push({name:n,value:e})}if(g=a["y"].getCss(g),g){var j=g;n=j.name,e=j.value,d.push({name:n,value:e})}if(C&&(n="gap",e=null==k||k==y?y:w===a["A"].Vertical?"".concat(y," ").concat(k):"".concat(k," ").concat(y),d.push({name:n,value:e})),b){n="box-sizing",e="border-box",d.push({name:n,value:e}),f=!0,n="padding";var _=v.top,M=v.left,L=v.right,D=v.bottom,P=_===D&&M===L,N=P&&_===M;e=N?_:P?"".concat(_," ").concat(L):"".concat(_," ").concat(L," ").concat(D," ").concat(M),d.push({name:n,value:e})}}else if(p){n="display",e="grid",d.push({name:n,value:e});var E=p.paddings,R=p.usePadding,V=p.useGap,B=p.rowGap,H=p.columnGap,U=p.rowSizingCSS,$=p.columnSizingCSS,G=p.rowCount,W=p.columnCount;if(Object(l["j"])(U)?(n="grid-template-rows",e=U,d.push({name:n,value:e})):G>0&&(n="grid-template-rows",e="repeat(".concat(G,", minmax(0, 1fr))"),d.push({name:n,value:e})),Object(l["j"])($)?(n="grid-template-columns",e=$,d.push({name:n,value:e})):W>0&&(n="grid-template-columns",e="repeat(".concat(W,", minmax(0, 1fr))"),d.push({name:n,value:e})),V&&(n="gap",e=null==H||H==B?B:"".concat(B," ").concat(H),d.push({name:n,value:e})),R){n="box-sizing",e="border-box",d.push({name:n,value:e}),f=!0,n="padding";var z=E.top,Y=E.left,X=E.right,K=E.bottom,q=z===K&&Y===X,J=q&&z===Y;e=J?z:q?"".concat(z," ").concat(X):"".concat(z," ").concat(X," ").concat(K," ").concat(Y),d.push({name:n,value:e})}}var Q=s.alignSelf,Z=s.layoutGrow,tt=s.position,et=s.gridRow,nt=s.gridColumn,rt=s.justifySelf;if(a["z"].needShowProperty(Q)&&(Q=a["z"].getCss(Q),Q)){var it=Q;n=it.name,e=it.value,e&&d.push({name:n,value:e})}if(a["C"].needShowProperty(rt)&&(rt=a["C"].getCss(rt),rt)){var ot=rt;n=ot.name,e=ot.value,e&&d.push({name:n,value:e})}if(null!=et&&(n="grid-row",e="".concat(et.start," / span ").concat(et.span),d.push({name:n,value:e})),null!=nt&&(n="grid-column",e="".concat(nt.start," / span ").concat(nt.span),d.push({name:n,value:e})),"number"===typeof Z&&0!==Z&&(n="flex-grow",e=Object(c["r"])(Z,5),d.push({name:n,value:e})),a["D"].needShowProperty(tt)&&(tt=a["D"].getCss(tt),tt)){var at=tt;n=at.name,e=at.value,e&&d.push({name:n,value:e})}n="opacity",e=s[n],e&&"100%"!==e&&d.push({name:n,value:e}),n="width",e=s[n],e&&d.push({name:n,value:e}),n="height",e=s[n],e&&d.push({name:n,value:e}),s.blendMode&&(n="mix-blend-mode",e=s.blendMode,e&&d.push({name:n,value:e}));var st=o.boxTransform;st&&(n="transform",e=0!==st.rotation?"rotate(".concat(st.rotation,"deg)"):"",st.flippedHorizontally&&(e+=" scaleX(-1)"),st.flippedVertically&&(e+=" scaleY(-1)"),e&&d.push({name:n,value:e}));var ct=!!o.types.Text;function lt(){if(ct){var t=" -webkit-background-clip",e="text";d.push({name:t,value:e}),t=" -webkit-text-fill-color",e="transparent",d.push({name:t,value:e}),t=" background-clip",e="text",d.push({name:t,value:e}),t=" text-fill-color",e="transparent",d.push({name:t,value:e})}}var ut,dt=[];s.fills&&(ut=dt).push.apply(ut,Object(u["a"])(s.fills));if(ct&&(null===(t=o.styleRanges)||void 0===t?void 0:t.length)>0){var ht,ft=o.styleRanges[0];(ht=null===ft||void 0===ft?void 0:ft.figmaFills)&&ht.length>1&&(dt=ht)}var mt=!1;if(dt.length>0){var pt=[];dt.forEach((function(t){switch(t.type){case a["s"].FillColor:var r=i.getCssShowColor(t.color,n,t.swatch).value;pt.push({color:r,image:"linear-gradient(0deg,".concat(r,",").concat(r,")")});break;case a["s"].RadialGradientFill:e="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(i.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")");var o=Object(c["D"])(t.angle);"0deg"!==o&&d.push({desc:"/*\n径向渐变(radial-gradient)不支持旋转角度,可结合:before或:after配合transform实现\ntransform:rotate(".concat(o,");\n*/")}),pt.push({image:e});break;case a["s"].DiamondGradientFill:e="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(i.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")"),d.push({desc:"/*css不支持菱形渐变,当前写法为径向渐变(radial-gradient)且不含旋转角度*/"}),pt.push({image:e});break;case a["s"].AngularGradientFill:e="conic-gradient(from ".concat(t.angle," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(i.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")"),pt.push({image:e});break;case a["s"].LinearGradientFill:e="linear-gradient(".concat(t.angle,",").concat(t.colorStops.map((function(t){var e;return"".concat(i.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(null!==(e=t.cssStop)&&void 0!==e?e:t.stop)})).join(","),")"),pt.push({image:e})}}));var vt=pt.length;vt>0&&(n="background",e=pt.map((function(t,e){var n=vt===e+1;return n&&t.color?t.color:(mt=!0,t.image)})).join(","),d.push({name:n,value:e}),mt&&lt())}var bt=s.border;if(bt)switch(bt.widths?(n="border-style",e=bt.style,d.push({name:n,value:e}),n="border-width",e=bt.widths,d.push({name:n,value:e})):(n="border",e="".concat(bt.width," ").concat(bt.style),d.push({name:n,value:e})),bt.type){case a["s"].FillColor:n="border-color",e=this.getCssShowColor(bt.color,n,bt.swatch),e&&d.push(e);break;case a["s"].RadialGradientFill:case a["s"].LinearGradientFill:n="border-image-source",e="linear-gradient(".concat(bt.angle,",").concat(bt.colorStops.map((function(t){return"".concat(i.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")"),d.push({name:n,value:e}),n="border-image-slice",e="1",d.push({name:n,value:e})}var gt,wt=s.textStrokeStyle;if(wt)switch(n="-webkit-text-stroke-width",e=null!==(gt=wt.widths)&&void 0!==gt?gt:wt.width,d.push({name:n,value:e}),n="text-stroke-width",d.push({name:n,value:e}),wt.type){case a["s"].FillColor:n="-webkit-text-stroke-color",e=this.getCssShowColor(wt.color,n,wt.swatch),e&&(d.push(e),n="text-stroke-color",d.push({name:n,value:e.value}));break}if(s.strokesIncludedInLayout&&!f&&d.push({name:"box-sizing",value:"border-box"}),n="border-radius",e=s.cornerRadiiValue,e&&d.push({name:n,value:e}),s.objectEffect&&(n="filter",e="blur(".concat(this.getCalcPlatformValue(s.objectEffect,{needArtScale:!0,isHorizintal:!0}),")"),d.push({name:n,value:e})),s.backgroundEffect){n="backdrop-filter",e="blur(".concat(this.getCalcPlatformValue(s.backgroundEffect,{needArtScale:!0,isHorizintal:!0}),")");var xt=s.backgroundEffectBrightness,yt=s.backgroundEffectSaturation;"number"===typeof xt&&1!==xt&&(e+=" brightness(".concat(xt,")")),"number"===typeof yt&&1!==yt&&(e+=" saturate(".concat(yt,")")),d.push({name:n,value:e})}var kt=[],Ct=[];if(s.shadows.forEach((function(t){if(t){var e=i.getCssShowColor(t.color,void 0,t.swatch);e.swatch&&Ct.push(e.swatch),kt.push("".concat(t.x," ").concat(t.y," ").concat(t.blur).concat(t.spread?" "+t.spread:""," ").concat(e.value))}})),s.innerShadows.forEach((function(t){if(t){var e=i.getCssShowColor(t.color,void 0,t.swatch);e.swatch&&Ct.push(e.swatch),kt.push("".concat(t.x," ").concat(t.y," ").concat(t.blur).concat(t.spread?" "+t.spread:""," ").concat(e.value," inset"))}})),kt.length>0&&(n=o.types.Text?"text-shadow":"box-shadow",e=kt.join(","),d.push({name:n,value:e,swatch:Ct.join("\n    ")})),!o.markedForExport&&o.types.Text){var St=o.styleRanges;if(Object(l["i"])(St)&&St.length>0&&(St=St[0],St)){if(St.fontFamily&&(n="font-family",e=St.fontFamily,d.push({name:n,value:e})),St.fontWeightCss&&"400"!==St.fontWeightCss&&(n="font-weight",e=St.fontWeightCss,d.push({name:n,value:e})),St.fontItalic&&"normal"!==St.fontItalic&&(n="font-style",e=St.fontItalic,d.push({name:n,value:e})),!mt&&St.fill&&null!=St.fill.value){n="color";var Tt=St,Ot=Tt.fills,It=Tt.fill;if((null===Ot||void 0===Ot?void 0:Ot.length)>1){for(var At=Object(h["i"])(Ot[Ot.length-1].value),Ft=Ot.length-2;Ft>=0;Ft--){var jt=Ot[Ft];At=Object(h["d"])(At,Object(h["i"])(jt.value))}It={value:Object(h["c"])(At.r,At.g,At.b,At.a),swatch:It.swatch}}var _t=Object(c["T"])(this.sketchGroupFillColor,It.value,It.swatch);e=this.getCssShowColor(_t.value,n,_t.swatch),d.push(e)}null!=St.fontSize&&(n="font-size",e=this.getCalcPlatformValue(St.fontSize,{fontSize:!0,needArtScale:!0,isHorizintal:!0}),d.push({name:n,value:e})),0!==St.charSpacing&&null!=St.charSpacing&&(n="letter-spacing",e=this.getCalcPlatformValue(St.charSpacing,{needArtScale:!0,isHorizintal:!0}),d.push({name:n,value:e})),St.underline?(n="text-decoration",e="underline",d.push({name:n,value:e})):St.strikethrough&&(n="text-decoration",e="line-through",d.push({name:n,value:e}))}0!=o.paragraphIndent&&null!=o.paragraphIndent&&(n="text-indent",e=this.getCalcPlatformValue(o.paragraphIndent,{needArtScale:!0,isHorizintal:!0}),d.push({name:n,value:e})),0!=o.paragraphSpacing&&null!=o.paragraphSpacing&&(n="padding-bottom",e=this.getCalcPlatformValue(o.paragraphSpacing,{needArtScale:!0,isHorizintal:!1}),d.push({name:n,value:e})),n="line-height",e=0!=o.lineSpacing&&null!=o.lineSpacing?this.getCalcPlatformValue(o.lineSpacing,{needArtScale:!0,isHorizintal:!1}):"normal",d.push({name:n,value:e}),o.textAlign&&(n="text-align",e=o.textAlign,"left"!=e&&d.push({name:n,value:e})),o.textVerticalAlign&&(n="vertical-align",e=o.textVerticalAlign,d.push({name:n,value:e}))}var Mt=d.findIndex((function(t){return"height"===t.name})),Lt=-1===Mt?-1:d.findIndex((function(t){return"line-height"===t.name}));if(-1!==Lt){var Dt=d[Lt];d.splice(Lt,1),d.splice(Mt+1,0,Dt)}return d},propertyText:function(){var t=this.properties;return t.filter((function(t){return!!t.name||!!t.desc})).map((function(t){return t.name?"".concat(t.swatch?"/* ".concat(t.swatch," */\n"):"").concat(t.name,": ").concat(t.value,";"):t.desc})).join("\n").trim()}}},Hk=Bk,Uk=(n("36b0"),Object(Dr["a"])(Hk,Rk,Vk,!1,null,"19aede82",null)),$k=Uk.exports,Gk=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box prop-export"},[e("h5",[e("span",{staticClass:"i-text icon-slice"},[t._v("切图")]),e("span",{staticClass:"export-bg"},[e("span",{class:{on:t.ExportBoxBackgroundType.Black===t.exportBoxBackground,black:1},attrs:{title:"深色背景填充"},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Black)}}}),e("span",{class:{on:t.ExportBoxBackgroundType.Transparent===t.exportBoxBackground,transparent:1},attrs:{title:"浅色背景填充"},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Transparent)}}})])]),e("section",{staticClass:"preview",class:["type"+t.exportBoxBackground]},[t.exportPdfOnly?e("PdfViewer",{attrs:{maxWidth:"256px",maxHeight:"112px",url:t.exportPreviewSrc}}):e("img",{class:{jpg:t.currentResInJpg},attrs:{src:t.exportPreviewSrc}})],1),e("section",{staticClass:"download-box"},[e("PropertyDownloadOptions",{ref:"downOptions",attrs:{currentResInPdf:t.currentResInPdf,currentResInSvg:t.currentResInSvg,currentResInJpg:t.currentResInJpg,exportPdfOnly:t.exportPdfOnly,exportSvgOnly:t.exportSvgOnly,jpgQuality:t.jpgQuality,downloadPlatform:t.calcPlatformUse,node:t.curNode},on:{setJpgQuality:t.setJpgQuality,clickDownSelect:t.clickDownSelect}}),e("div",{staticClass:"btns"},[e("Select",{attrs:{options:t.resTypeSelectOptions,checkShowUpFixedHeight:48,light:!0},on:{changed:t.onResTypeSelectChanged}}),t.currentResInSvg||t.currentResInPdf?e("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:t.clickDownSelect}},[t._v("下载切图")]):e("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:t.clickDownSelectAll}},[t._v("下载切图")]),t.inCloudMode&&t.currentResInSvg?e("a",{staticClass:"button btn-copy",attrs:{href:"javascript:;",title:"拷贝SVG数据到剪切板"},on:{click:function(e){return t.clickCopySvg()}}}):t._e()],1)],1)])},Wk=[],zk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"down-options-box"},[t.downloadPlatform===t.CALC_PLATFORM_TYPE.ANDROID?e("Select",{attrs:{options:t.androidUseMipmapSelectOptions,light:!0},on:{changed:t.onAndroidUseMipmapSelectChanged}}):t._e(),e("div",{staticClass:"down-options",class:t.optionsClass},[t._l(t.downloadPlatformItems,(function(n){return e("PropertyDownloadItem",{key:n.value.name,attrs:{config:n.value,node:t.node,enabled:n.enabled,selected:t.currentResInSvg||t.currentResInPdf||1==t.checkSetting[n.value.scale]},on:{clickItemSelect:t.clickItemSelect,clickDownSelect:t.clickDownSelect}})})),t.currentResInJpg?e("div",{staticClass:"jpg-quality"},[e("div",{staticClass:"text"},[t._v("JPG质量")]),e("div",{staticClass:"quality-num"},[t._v(t._s(t.jpgQuality))]),e("div",{staticClass:"pullrod"},[e("div",{staticClass:"line",on:{click:t.clickPullrodLine}}),e("span",{style:{left:t.jpgQualityCssLeft},on:{mousedown:t.onPullrodMouseDown}})]),e("div",{staticClass:"button",on:{click:t.clickResetQuality}},[t._v("重置")])]):t._e()],2)],1)},Yk=[],Xk=function(){var t=this,e=t._self._c;return e("section",{staticClass:"item",class:{disabled:!t.enabled},attrs:{title:t.title}},[e("Checkbox",{attrs:{text:t.name,selected:t.selected&&t.enabled},on:{click:t.clickItemSelect}}),null!=t.node?e("section",[e("span",{staticClass:"size"},[t._v(t._s(t.size))]),e("a",{staticClass:"btn-down-current",attrs:{href:"javascript:;",title:"下载该项切图"},on:{click:t.clickDownSelect}})]):t._e()],1)},Kk=[],qk={methods:{clickDownSelect:function(){var t={};t[this.config.scale]=1,this.$emit("clickDownSelect",t)},clickItemSelect:function(t){!t||this.enabled?this.$emit("clickItemSelect",this.config.scale,t):this.showTextTip("您无法导出该规格切图,因为设计狮没有为该画板导出该规格切图")}},computed:{inMultMode:function(){return null==this.node},title:function(){var t=this.config,e=t.name;return e},name:function(){var t,e=this.config;return t=e.name,t},originWidth:function(){return this.inMultMode?0:this.node.boundsInArtboard.width},originHeight:function(){return this.inMultMode?0:this.node.boundsInArtboard.height},size:function(){if(this.inMultMode)return"";if(!this.enabled)return"--";var t=this.node,e=this.curArtboardLoadedVerData,n=null===e||void 0===e?void 0:e.mlConfig;if(n){var r=n.sizeMap;if(r){var i=(this.config.resname||this.config.filepath).replace("{$name$}",t.exportPath).toLowerCase(),o=r[i];if(o)return"".concat(o.width,"x").concat(o.height)}}var a=this.config.scale;return"".concat(Math.ceil(Object(c["r"])(this.originWidth*a,2)),"x").concat(Math.ceil(Object(c["r"])(this.originHeight*a,2)))}},props:{config:Object,node:Object,selected:Boolean,enabled:Boolean},components:{Checkbox:ku}},Jk=qk,Qk=(n("c8cc"),Object(Dr["a"])(Jk,Xk,Kk,!1,null,"5c164acd",null)),Zk=Qk.exports,tC={methods:{clickPullrodLine:function(t){var e=Math.round(t.layerX/1.06);isNaN(e)||(e=Math.max(1,e),e=Math.min(100,e),this.$emit("setJpgQuality",e))},onPullrodMouseDown:function(t){this.mouseDownStartQuality=this.jpgQuality,this.mouseDownStartX=t.pageX,window.addEventListener("mouseup",this.onPullrodMouseUp),window.addEventListener("mousemove",this.onPullrodMouseMove)},onPullrodMouseMove:function(t){var e=t.pageX-this.mouseDownStartX,n=Math.round(this.mouseDownStartQuality+e/1.06);n=Math.max(1,n),n=Math.min(100,n),this.$emit("setJpgQuality",n)},onPullrodMouseUp:function(){window.removeEventListener("mouseup",this.onPullrodMouseUp),window.removeEventListener("mousemove",this.onPullrodMouseMove)},clickResetQuality:function(){this.$emit("setJpgQuality",L)},onAndroidUseMipmapSelectChanged:function(t){Object(l["k"])(t)&&this.clickSetAndroidUseMipmap(t.value)},clickSetAndroidUseMipmap:function(t){this.$store.commit("setAndroidUseMipmap",t)},clickDownSelect:function(t){this.$emit("clickDownSelect",t)},clickItemSelect:function(t,e){if(!this.currentResInSvg&&!this.currentResInPdf){var n=this.checkSetting;this.$set(n,t,e?1:0),this.setLocalCheckSetting(n)}},initCheckSetting:function(){var t=this.getLocalCheckSetting();this.checkSetting=t},setLocalCheckSetting:function(t){var e=this.downloadPlatform;Object(c["rb"])("reschecked.".concat(e),t)},getLocalCheckSetting:function(){var t=this.downloadPlatform,e=Object(c["K"])("reschecked.".concat(t),!0);if(!Object(l["k"])(e))switch(t){case a["c"].WEB:case a["c"].WE_CHAT_MINI_PROGRAM:e={2:1};break;case a["c"].IOS:e={1:1,2:1,3:1};break;case a["c"].ANDROID:e={1:1,1.5:1,2:1,3:1,4:1};break}return[1,2,3,4,1.5].forEach((function(t){e[t]||(e[t]=0)})),e}},created:function(){this.initCheckSetting()},watch:{downloadPlatform:function(){this.initCheckSetting()}},computed:{jpgQualityCssLeft:function(){var t=this.jpgQuality;return Math.round(1.06*t)+"px"},optionsClass:function(){var t={};switch(this.currentResInSvg&&(t.svg=1),this.currentResInPdf&&(t.pdf=1),this.inMultMode&&(t.mult=1),this.downloadPlatform){case a["c"].ANDROID:t.android=1;break;case a["c"].WEB:t.web=1;break;case a["c"].WE_CHAT_MINI_PROGRAM:t.wx_mp=1;break;case a["c"].IOS:t.ios=1;break}return t},inMultMode:function(){return null==this.node},androidUseMipmapSelectOptions:function(){return[{name:"drawable-...",value:!1,selected:!this.androidUseMipmap,title:"Android目录前缀"},{name:"mipmap-...",value:!0,selected:this.androidUseMipmap,title:"Android目录前缀"}]},downloadPlatformItems:function(){return io(this.curArtboard,this.downloadPlatform,this.androidUseMipmap,this.currentResInSvg,this.currentResInPdf,this.currentResInJpg&&this.exportSvgOnly,this.currentResInJpg&&this.exportPdfOnly,this.inCloudViewerArtboardInfoMode)}},data:function(){return{mouseDownStartX:0,mouseDownStartQuality:0,CALC_PLATFORM_TYPE:a["c"],checkSetting:{}}},components:{PropertyDownloadItem:Zk,Select:vu},props:{jpgQuality:Number,currentResInJpg:Boolean,exportSvgOnly:Boolean,currentResInSvg:Boolean,exportPdfOnly:Boolean,currentResInPdf:Boolean,downloadPlatform:Number,node:Object,bottomPosition:Boolean}},eC=tC,nC=(n("321d"),Object(Dr["a"])(eC,zk,Yk,!1,null,"72b40fa7",null)),rC=nC.exports,iC=function(){var t=this,e=t._self._c;return e("iframe",{ref:"iframe",staticClass:"pdf-viewer",style:t.style,attrs:{src:"about:blank"}})},oC=[],aC={methods:{loadUrl:function(t){Object(Ji["b"])(this.$refs.iframe,t,this.maxWidth,this.maxHeight)},loadBlank:function(){try{this.$refs.iframe.src="about:blank"}catch(t){}}},computed:{style:function(){var t=this.maxWidth,e=this.maxHeight;return{maxWidth:t,maxHeight:e}}},beforeDestroy:function(){this.loadBlank()},mounted:function(){this.loadUrl(this.url)},watch:{url:function(t){t&&this.loadUrl(this.url)}},props:{url:String,maxWidth:String,maxHeight:String}},sC=aC,cC=(n("9edf"),Object(Dr["a"])(sC,iC,oC,!1,null,"aa8b5fba",null)),lC=cC.exports,uC={methods:{clickCopySvg:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.setInOutput(!0),e.prev=1,n=t.curNode,i=t.curArtboard,o=Object(c["M"])(n),e.next=6,ao(n,i,t.inCloudViewerArtboardInfoMode);case 6:a=e.sent,t.showTextTip(a?"已拷贝「".concat(o,"」到剪切板"):"拷贝「".concat(o,"」到剪切板失败了")),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.showTextTip(e.t0);case 13:return e.prev=13,t.setInOutput(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})))()},setJpgQuality:function(t){t>0&&t<=100&&(this.jpgQuality=t,Object(c["rb"])(D,t))},clickExportBoxBackgroundType:function(t){this.$store.commit("exportBoxBackgroundType",t)},onResTypeSelectChanged:function(t){Object(l["k"])(t)&&this.clickCurrentResType(t.value)},clickCurrentResType:function(t){switch(t){case a["fb"].PNG:if(!this.exportPng)return void this.showTextTip("设计狮没有为该画板导出「PNG」格式的切图");break;case a["fb"].WEBP:if(!this.exportWebP)return void this.showTextTip("设计狮没有为该画板导出「WEBP」格式的切图");break;case a["fb"].SVG:if(!this.exportSvg)return void this.showTextTip("设计狮没有为该画板导出「SVG」格式的切图");break;case a["fb"].PDF:if(!this.exportPdf)return void this.showTextTip("设计狮没有为该画板导出「PDF」格式的切图");break;case a["fb"].JPG:break}this.currentResType=t,Object(c["rb"])("resType",t)},clickDownSelectAll:function(){this.clickDownSelect(this.$refs.downOptions.checkSetting)},clickDownSelect:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.setInOutput(!0),n.prev=1,!e.currentResInPdf){n.next=7;break}return n.next=5,oo([e.curNode],e.curArtboard,e.inCloudViewerArtboardInfoMode);case 5:n.next=19;break;case 7:if(!e.currentResInSvg){n.next=12;break}return n.next=10,co([e.curNode],e.curArtboard,e.inCloudViewerArtboardInfoMode);case 10:n.next=19;break;case 12:if(!e.currentResInJpg){n.next=17;break}return n.next=15,Oo(e.calcPlatformUse,e.androidUseMipmap,t,[e.curNode],e.curArtboard,e.jpgQuality/100,e.inCloudViewerArtboardInfoMode);case 15:n.next=19;break;case 17:return n.next=19,Io(e.calcPlatformUse,e.androidUseMipmap,t,[e.curNode],e.curArtboard,e.currentResInWebP,e.inCloudViewerArtboardInfoMode);case 19:n.next=24;break;case 21:n.prev=21,n.t0=n["catch"](1),e.showTextTip(n.t0);case 24:return n.prev=24,e.setInOutput(!1),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[1,21,24,27]])})))()},initJpgQuality:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["K"])(D,!1));(isNaN(e)||e<1||e>=100)&&(e=L),this.jpgQuality=e}},initCurrentResType:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["K"])("resType",!1));(isNaN(e)||!isFinite(e)||e!==a["fb"].SVG&&e!==a["fb"].PDF&&e!==a["fb"].WEBP&&e!==a["fb"].JPG)&&(e=a["fb"].PNG);var n=this.curArtboardLoadedVerData.mlConfig.resType;n||(n=a["fb"].PNG);var r=this.exportPng,i=this.exportSvg,o=this.exportWebP,s=this.exportPdf;switch(e){case a["fb"].PNG:r||(o?e=a["fb"].WEBP:i?e=a["fb"].SVG:s&&(e=a["fb"].PDF));break;case a["fb"].SVG:i||(r?e=a["fb"].PNG:o?e=a["fb"].WEBP:s&&(e=a["fb"].PDF));break;case a["fb"].PDF:s||(r?e=a["fb"].PNG:o?e=a["fb"].WEBP:i&&(e=a["fb"].SVG));break;case a["fb"].WEBP:o||(r?e=a["fb"].PNG:i?e=a["fb"].SVG:s&&(e=a["fb"].PDF));break;case a["fb"].JPG:r||i||o||s||(e=a["fb"].PNG);break}this.currentResType=e}}},created:function(){this.initCurrentResType(),this.initJpgQuality()},watch:{inMultDownMode:function(){this.initCurrentResType(),this.initJpgQuality()},curArtboard:function(){this.initCurrentResType(),this.initJpgQuality()}},data:function(){return{currentResType:a["fb"].PNG,jpgQuality:L}},computed:{ExportBoxBackgroundType:function(){return a["ab"]},resTypeSelectOptions:function(){var t=this.currentResType,e={value:a["fb"].PNG,name:"PNG",selected:t===a["fb"].PNG,disabled:!this.exportPng},n={value:a["fb"].WEBP,name:"WEBP",selected:t===a["fb"].WEBP,disabled:!this.exportWebP},r={value:a["fb"].SVG,name:"SVG",selected:t===a["fb"].SVG,disabled:!this.exportSvg},i={value:a["fb"].PDF,name:"PDF",selected:t===a["fb"].PDF,disabled:!this.exportPdf},o={value:a["fb"].JPG,name:"JPG",selected:t===a["fb"].JPG,disabled:!1};return[e,n,r,i,o]},exportWebP:function(){return Object(c["ab"])(this.curArtboardLoadedVerData)},exportPng:function(){return Object(c["Y"])(this.curArtboardLoadedVerData)},exportSvg:function(){return Object(c["Z"])(this.curArtboardLoadedVerData)},exportPdf:function(){return Object(c["X"])(this.curArtboardLoadedVerData)},exportSvgOnly:function(){return this.exportSvg&&!this.exportPng&&!this.exportWebP},exportPdfOnly:function(){return this.exportPdf&&!this.exportSvg&&!this.exportPng&&!this.exportWebP},currentResInPdf:function(){return this.currentResType===a["fb"].PDF},currentResInSvg:function(){return this.currentResType===a["fb"].SVG},currentResInJpg:function(){return this.currentResType===a["fb"].JPG},currentResInWebP:function(){return this.currentResType===a["fb"].WEBP},exportPreviewSrc:function(){var t,e,n=null!==(t=null===(e=this.curNode)||void 0===e?void 0:e.mlConfig)&&void 0!==t?t:{},r=n.pngPreview,i=n.svgPreview,o=n.pdfPreview,a=r||i;return this.inCloudMode?this.exportPdfOnly&&!a&&o?o:a:a+"?"+this.curArtboard.artboard.mlOutputTime}},components:{PropertyDownloadOptions:rC,Select:vu,PdfViewer:lC}},dC=uC,hC=(n("6588"),Object(Dr["a"])(dC,Gk,Wk,!1,null,"1c5dbd9c",null)),fC=hC.exports,mC=function(){var t,e=this,n=e._self._c;return e.visible?n("section",{staticClass:"prop-box"},[n("h5",{staticClass:"fill-title"},[n("span",{staticClass:"i-text",class:{"icon-stack":1},domProps:{textContent:e._s(null===(t=e.groupLayout)||void 0===t?void 0:t.name)}})]),n("PropertyInfoBorderBox",{attrs:{nodeStyle:e.nodeStyle}}),null!=e.flexDirection||null!=e.flexWrap?n("dl",{staticClass:"item"},[n("dt",{domProps:{textContent:e._s(null!=e.flexDirection&&null!=e.flexWrap?"方向/换行":null!=e.flexDirection?"方向":"换行")}}),n("dd",[null!=e.flexDirection?n("PropertyShowValue",{attrs:{cls:{bt:1},title:e.flexDirection.title,value:e.flexDirection.text}}):e._e(),null!=e.flexWrap?n("PropertyShowValue",{attrs:{cls:{m2:null!=e.flexDirection},title:e.flexWrap.title,value:e.flexWrap.text}}):e._e(),null==e.flexDirection||null==e.flexWrap?n("div",{staticClass:"inp empty m2"}):e._e()],1)]):e._e(),null!=e.justifyContent||null!=e.alignItems?n("dl",{staticClass:"item in-swatch"},[n("dt",[e._v("对齐方式")]),n("dd",{staticClass:"use-desc"},[null!=e.justifyContent?n("PropertyShowValue",{attrs:{cls:{bt:1},title:e.justifyContent.title,value:e.justifyContent.text}}):e._e(),null!=e.alignItems?n("PropertyShowValue",{attrs:{cls:{m2:null!=e.justifyContent,bt:null==e.justifyContent},title:e.alignItems.title,value:e.alignItems.text}}):e._e(),null==e.justifyContent||null==e.alignItems?n("div",{staticClass:"inp empty m2"}):e._e(),n("div",{staticClass:"desc-text"},[null!=e.justifyContent?n("i",{staticClass:"bt",domProps:{textContent:e._s(e.directionText.primary)}}):e._e(),null!=e.alignItems?n("i",{domProps:{textContent:e._s(e.directionText.counter)}}):e._e()])],1)]):e._e(),null!=e.allGuttersGap?n("dl",{staticClass:"item",class:{"in-swatch":null!=e.counterGap}},[n("dt",{attrs:{title:"gap"}},[e._v("间距")]),n("dd",{class:{"use-desc":null!=e.counterGap}},[n("PropertyShowValue",{attrs:{cls:{bt:1},value:e.allGuttersGap,title:""}}),null!=e.counterGap?n("PropertyShowValue",{attrs:{cls:{m2:1},title:"",value:e.counterGap}}):n("div",{staticClass:"inp empty m2"}),null!=e.counterGap?n("div",{staticClass:"desc-text"},[n("i",{staticClass:"bt",domProps:{textContent:e._s(e.directionText.primary)}}),n("i",{domProps:{textContent:e._s(e.directionText.counter)}})]):e._e()],1)]):e._e(),null!=e.alignContent?n("dl",{staticClass:"item"},[n("dt",{attrs:{title:"align-content"}},[e._v("内容对齐")]),n("dd",[n("PropertyShowValue",{attrs:{cls:{bt:1},title:e.alignContent.title,value:e.alignContent.text}}),n("div",{staticClass:"inp empty m2"})],1)]):e._e(),null!=e.paddingText?n("dl",{staticClass:"item"},[n("dt",{attrs:{title:"padding"}},[e._v("内边距")]),n("dd",[n("PropertyShowValue",{attrs:{cls:{bt:1},value:e.paddingText.text,title:e.paddingText.title}}),e.paddingText.one?n("div",{staticClass:"inp empty m2"}):e._e()],1)]):e._e()],1):e._e()},pC=[],vC=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"property-info-border-box"},[e("div",{staticClass:"bhc position"},[t._m(0),e("div",{staticClass:"bvc"},[e("div",{staticClass:"bl"}),e("div",{staticClass:"bhc border"},[e("div",{staticClass:"bt",attrs:{title:t.borderBox.useBorder?t.borderBox.border.top:null},on:{click:t.clickCopy}},[e("div",{staticClass:"title",domProps:{textContent:t._s(t.borderBox.useBorder?"border":"no border")}}),t.borderBox.useBorder?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.border.topN)}}):t._e()]),e("div",{staticClass:"bvc"},[e("div",{staticClass:"bl",class:{min:!t.borderBox.useBorder},attrs:{title:t.borderBox.useBorder?t.borderBox.border.left:null},on:{click:t.clickCopy}},[t.borderBox.useBorder?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.border.leftN)}}):t._e()]),e("div",{staticClass:"bhc padding"},[e("div",{staticClass:"bt",attrs:{title:t.borderBox.usePadding?t.borderBox.padding.top:null},on:{click:t.clickCopy}},[e("div",{staticClass:"title",domProps:{textContent:t._s(t.borderBox.usePadding?"padding":"no padding")}}),t.borderBox.usePadding?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.padding.topN)}}):t._e()]),e("div",{staticClass:"bvc"},[e("div",{staticClass:"bl",class:{min:!t.borderBox.usePadding},attrs:{title:t.borderBox.usePadding?t.borderBox.padding.left:null},on:{click:t.clickCopy}},[t.borderBox.usePadding?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.padding.leftN)}}):t._e()]),e("div",{staticClass:"bhc content",attrs:{title:"".concat(t.borderBox.content.width," x ").concat(t.borderBox.content.height)},on:{click:t.clickCopy}},[e("div",{staticClass:"text"},[t._v(t._s(t.borderBox.content.widthN)),e("span",{staticClass:"m"},[t._v("x")]),t._v(t._s(t.borderBox.content.heightN))])]),e("div",{staticClass:"br",class:{min:!t.borderBox.usePadding},attrs:{title:t.borderBox.usePadding?t.borderBox.padding.right:null},on:{click:t.clickCopy}},[t.borderBox.usePadding?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.padding.rightN)}}):t._e()])]),e("div",{staticClass:"bb",class:{min:!t.borderBox.usePadding},attrs:{title:t.borderBox.usePadding?t.borderBox.padding.bottom:null},on:{click:t.clickCopy}},[t.borderBox.usePadding?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.padding.bottomN)}}):t._e()])]),e("div",{staticClass:"br",class:{min:!t.borderBox.useBorder},attrs:{title:t.borderBox.useBorder?t.borderBox.border.right:null},on:{click:t.clickCopy}},[t.borderBox.useBorder?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.border.rightN)}}):t._e()])]),e("div",{staticClass:"bb",class:{min:!t.borderBox.useBorder},attrs:{title:t.borderBox.useBorder?t.borderBox.border.bottom:null},on:{click:t.clickCopy}},[t.borderBox.useBorder?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.border.bottomN)}}):t._e()])]),e("div",{staticClass:"br"})]),t._m(1)])]):t._e()},bC=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bt"},[e("div",{staticClass:"text pt min"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"bb"},[e("div",{staticClass:"text pt"},[t._v("border-box")])])}],gC={methods:{clickCopy:function(t){var e,n=null===t||void 0===t||null===(e=t.target)||void 0===e?void 0:e.title;if(n){var r=Object(c["q"])(n);r?this.showTextTip("已复制文本: ".concat(n),2):this.showTextTip("复制到剪切板失败",2)}}},computed:{visible:function(){return null!=this.borderBox},markedForExport:function(){var t;return 1==(null===(t=this.curNode)||void 0===t?void 0:t.markedForExport)},isArtboardNode:function(){var t;return 1===(null===(t=this.curNode)||void 0===t?void 0:t.types.Artboard)},borderBox:function(){var t=this,e=this.markedForExport,n=this.nodeStyle;if((null===n||void 0===n||!n.groupLayout)&&(null===n||void 0===n||!n.groupGrid))return null;var r=null===n||void 0===n?void 0:n.borderBox;if(!r)return null;var i=["top","left","width","height","bottom","right"],o={usePadding:!1,useBorder:!1};return["padding","position","border","content"].forEach((function(n){var a=r[n],s=o[n]={};if(Object(l["k"])(a)){switch(n){case"padding":o.usePadding=0!==a.top||0!==a.left||0!==a.bottom||0!==a.right;break;case"border":o.useBorder=0!==a.top||0!==a.left||0!==a.bottom||0!==a.right;break}i.forEach((function(n){var r=a[n];if(s[n+"Origin"]=r,"number"===typeof r){var i=e&&("width"===n||"height"===n);s[n]=t.getCalcPlatformValue(r,{isHorizintal:"left"===n||"right"===n||"width"===n,markedForExport:i}),s[n+"N"]=t.getCalcValue(r,i,!1)}else s[n+"N"]=s[n]=r}))}})),o}},props:{nodeStyle:Object}},wC=gC,xC=(n("d5dd"),Object(Dr["a"])(wC,vC,bC,!1,null,"a29099da",null)),yC=xC.exports,kC={components:{PropertyInfoBorderBox:yC,PropertyShowValue:Vx},props:{nodeStyle:Object,isFigmaArtboard:Boolean},computed:{directionText:function(){var t=this.flexDirection;return{primary:"主轴".concat(t?"(".concat(t.textCN,")"):""),counter:"交叉轴".concat(t?"(".concat(t.textCounterCN,")"):"")}},paddingText:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=e.paddings,r=e.usePadding;if(!r)return null;var i=n.top,o=n.left,a=n.right,s=n.bottom,c=i===s&&o===a,l=c&&i===o;return{text:l?i:c?"".concat(i," ").concat(a):"".concat(i," ").concat(a," ").concat(s," ").concat(o),title:l?"":c?"上/下 左/右":"上 右 下 左",one:l,short:c}},allGuttersGap:function(){var t=this.visible,e=this.groupLayout;return t?e.allGuttersGap:null},counterGap:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=e.counterGap,r=e.allGuttersGap;return null!=n&&r!=n?n:null},alignItems:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=a["y"].getCss(e.alignItems);return n?{text:n.text,title:n.textCN}:null},flexWrap:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=e.flexWrap;if(!a["E"].needShowProperty(n,this.isFigmaArtboard))return null;var r=a["E"].getCss(n);return r?{text:r.value,title:r.textCN}:null},alignContent:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;if(!a["E"].needAlignContent(e.flexWrap))return null;var n=e.alignContent;if(!a["x"].needShowProperty(n))return null;var r=a["x"].getCss(n);return r?{text:r.text,title:r.textCN}:null},justifyContent:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=a["B"].getCss(e.justifyContent);return n?{text:n.text,title:n.textCN}:null},flexDirection:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=a["A"].getCss(e.flexDirection);return n?{text:n.text,title:"".concat(n.textCN," / ").concat(n.value),textCounterCN:n.textCounterCN,textCN:n.textCN}:null},groupLayout:function(){return this.nodeStyle.groupLayout},visible:function(){return null!=this.groupLayout}},created:function(){}},CC=kC,SC=(n("b15c"),Object(Dr["a"])(CC,mC,pC,!1,null,"8d69f990",null)),TC=SC.exports,OC=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"prop-box"},[e("h5",{staticClass:"fill-title"},[e("span",{staticClass:"i-text icon-stack icon-grid",domProps:{textContent:t._s(t.groupGrid.name)}})]),e("PropertyInfoBorderBox",{attrs:{nodeStyle:t.nodeStyle}}),e("dl",{staticClass:"item"},[e("dt",[t._v("Flow")]),e("dd",[e("PropertyShowValue",{attrs:{title:"Grid",value:"网格"}}),e("div",{staticClass:"inp empty m2"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("行/列数")]),e("dd",[e("PropertyShowValue",{attrs:{title:"行数",value:t.groupGrid.rowCount}}),e("PropertyShowValue",{attrs:{cls:{m2:1},title:"列数",value:t.groupGrid.columnCount}})],1)]),null!=t.rowGap?e("dl",{staticClass:"item",class:{"in-swatch":null!=t.columnGap}},[e("dt",{attrs:{title:"gap"}},[t._v("间距")]),e("dd",{class:{"use-desc":null!=t.columnGap}},[e("PropertyShowValue",{attrs:{value:t.rowGap}}),null!=t.columnGap?e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.columnGap}}):e("div",{staticClass:"inp empty m2"}),null!=t.columnGap?e("div",{staticClass:"desc-text"},[e("i",[t._v("水平")]),e("i",[t._v("垂直")])]):t._e()],1)]):t._e(),null!=t.paddingText?e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"padding"}},[t._v("内边距")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.paddingText.text,title:t.paddingText.title}}),t.paddingText.one?e("div",{staticClass:"inp empty m2"}):t._e()],1)]):t._e()],1):t._e()},IC=[],AC={components:{PropertyShowValue:Vx,PropertyInfoBorderBox:yC},props:{nodeStyle:Object,isFigmaArtboard:Boolean},computed:{paddingText:function(){var t=this.visible,e=this.groupGrid;if(!t)return null;var n=e.paddings,r=e.usePadding;if(!r)return null;var i=n.top,o=n.left,a=n.right,s=n.bottom,c=i===s&&o===a,l=c&&i===o;return{text:l?i:c?"".concat(i," ").concat(a):"".concat(i," ").concat(a," ").concat(s," ").concat(o),title:l?"":c?"上/下 左/右":"上 右 下 左",one:l,short:c}},rowGap:function(){var t=this.visible,e=this.groupGrid;return t&&e.useGap?e.rowGap:null},columnGap:function(){var t=this.visible,e=this.groupGrid;if(!t||!e.useGap)return null;var n=e.rowGap,r=e.columnGap;return null!=r&&r!=n?r:null},groupGrid:function(){return this.nodeStyle.groupGrid},visible:function(){return null!=this.groupGrid}},created:function(){}},FC=AC,jC=(n("2fc2"),Object(Dr["a"])(FC,OC,IC,!1,null,"4d8ecb4c",null)),_C=jC.exports,MC=function(){var t=this,e=t._self._c;return e("section",{staticClass:"header"},[e("div",{staticClass:"platform"},[e("a",{staticClass:"btn-set-platform",class:Object(M["a"])({on:t.setting},t.calcPlatformTypeCss,!0),attrs:{href:"javascript:;"},on:{click:function(e){t.setting=!t.setting}}},[t._v(t._s(t.size)+" ")]),e("span",{staticClass:"size"},[e("span",{staticClass:"round-num",class:{on:t.numberAutoRound},on:{click:t.clickRoundNum}},[t._v("数值取整")])])]),t.setting?e("SetPlatform",{on:{clickCalcPlatform:t.clickCalcPlatform,hideSetting:t.hideSetting}}):t._e()],1)},LC=[],DC=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"set-platform"},[e("li",{class:{web:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.WEB}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.WEB})}}},[t._v("Web")])]),e("li",{class:{android:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.ANDROID}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.ANDROID})}}},[t._v("Android")])]),e("li",{class:{ios:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.IOS}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.IOS})}}},[t._v("iOS")])]),e("li",{class:{wx_mp:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.WE_CHAT_MINI_PROGRAM}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.WE_CHAT_MINI_PROGRAM})}}},[t._v("微信小程序")])]),e("li",{staticClass:"custom"},[e("dl",{class:{size:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.CUSTOM}},[e("dt",{staticClass:"name",attrs:{title:"无视文档设计尺寸,强制指定当前画板的宽度"}},[t._v("自定义宽度")]),e("dd",{staticClass:"auto"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.calcPlatformCustomDocWidth2,expression:"calcPlatformCustomDocWidth2"}],ref:"inpWidth",staticClass:"inp",attrs:{type:"text",spellcheck:"false"},domProps:{value:t.calcPlatformCustomDocWidth2},on:{input:function(e){e.target.composing||(t.calcPlatformCustomDocWidth2=e.target.value)}}})]),e("dd",[e("Select",{attrs:{options:t.unitSelectOptions,light:!0},on:{changed:t.onUnitSelectChanged}})],1),e("dd",[e("a",{staticClass:"button light btn-save",attrs:{href:"javascript:;"},on:{click:t.clickCalcPlatformCustom}},[t._v("保存")])])]),e("div",{staticClass:"tip"},[t._v("注:填0则自动取对应画板设计尺寸")])]),e("li",{staticClass:"template"},[e("dl",[e("dt",[e("span",{staticClass:"name"},[t._v("自定义单位模板"),e("Checkbox2",{attrs:{text:"",selected:t.calcUnitTemplateEnable},on:{click:function(e){return t.clickTemplateEnable()}}})],1),e("a",{staticClass:"help",attrs:{href:"https://user.marklion.cn/router/linkto.ashx?id=10016",target:"_blank"}},[t._v("帮助")])]),e("dd",{staticClass:"input",class:{off:!t.calcUnitTemplateEnable}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.calcUnitTemplateValue2,expression:"calcUnitTemplateValue2"}],attrs:{autocomplete:"off",spellcheck:"false"},domProps:{value:t.calcUnitTemplateValue2},on:{input:function(e){e.target.composing||(t.calcUnitTemplateValue2=e.target.value)}}}),e("a",{staticClass:"button light btn-save",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickTemplateEnable(!0)}}},[t._v("保存")])]),t._m(0)])])])},PC=[function(){var t=this,e=t._self._c;return e("dd",{staticClass:"tip"},[e("div",[t._v("注:")]),e("ul",[e("li",[e("span",{staticClass:"t"},[t._v("%num%")]),t._v("当前数值")]),e("li",[e("span",{staticClass:"t"},[t._v("%W%")]),t._v("画板宽度")]),e("li",[e("span",{staticClass:"t"},[t._v("%H%")]),t._v("画板高度")]),e("li",[e("span",{staticClass:"t"},[t._v("%VW%")]),t._v("当前数值和画板宽度的百分比(1-100)")]),e("li",[e("span",{staticClass:"t"},[t._v("%VH%")]),t._v("当前数值和画板高度的百分比(1-100)")])])])}],NC={methods:{clickTemplateEnable:function(t){var e=t?this.calcUnitTemplateEnable:!this.calcUnitTemplateEnable,n=this.curArtboard.artboard,r={guid:n.docGuid,enable:e,template:t?this.calcUnitTemplateValue2:this.calcUnitTemplateValue};this.$store.commit("setUnitTemplate",r),this.calcUnitTemplateValue2=this.calcUnitTemplateValue,t&&this.$emit("hideSetting")},onUnitSelectChanged:function(t){this.calcPlatformCustomUnit2=t.value},clickCalcPlatformCustom:function(){var t={type:a["c"].CUSTOM,customUnit:this.calcPlatformCustomUnit2,customDocWidth:parseInt(this.calcPlatformCustomDocWidth2)};if(isNaN(t.customDocWidth)||!isFinite(t.customDocWidth)||t.customDocWidth<0)return this.showTextTip("指定宽度不合法,请正确输入"),void this.$refs.inpWidth.focus();this.clickCalcPlatform(t)},clickCalcPlatform:function(t){this.$emit("clickCalcPlatform",t)}},data:function(){return{calcPlatformType2:0,calcPlatformCustomUnit2:0,calcPlatformCustomDocWidth2:0,calcUnitTemplateValue2:"",CALC_PLATFORM_TYPE:a["c"],CALC_PLATFORM_UNIT:a["d"],unitSelectOptions:[{name:"px",value:a["d"].PX},{name:"dp",value:a["d"].DP},{name:"pt",value:a["d"].PT},{name:"rpx",value:a["d"].RPX}]}},components:{Select:vu,Checkbox2:wb},computed:{calcUnitTemplateEnable:function(){return this.$store.state.unitTemplate.enable}},created:function(){var t=this;this.calcPlatformType2=this.calcPlatformType,this.calcPlatformCustomUnit2=this.calcPlatformCustomUnit,this.unitSelectOptions.forEach((function(e){t.$set(e,"selected",e.value===t.calcPlatformCustomUnit2)})),this.calcPlatformCustomDocWidth2=this.calcPlatformCustomDocWidth,this.calcUnitTemplateValue2=this.calcUnitTemplateValue}},EC=NC,RC=(n("7d26"),Object(Dr["a"])(EC,DC,PC,!1,null,"941aacd6",null)),VC=RC.exports,BC={methods:{clickRoundNum:function(){this.$store.commit("setNumberAutoRound",!this.numberAutoRound)},clickCalcPlatform:function(t){if(Object(l["k"])(t)&&!t.guid){var e=this.curArtboardLoadedVerData;t.guid=e.docGuid}this.$store.commit("setPlatform",t),this.setting=!1},hideSetting:function(){this.setting=!1}},computed:{rightNavTypePropertyClicked:function(){return this.$store.state.rightNavTypePropertyClicked},size:function(){var t;if(!this.inArtboardMode)return"";var e=null===(t=this.curArtboardLoadedVerData)||void 0===t?void 0:t.boundsInArtboard;return e?"".concat(this.getCalcPlatformValue(e.width,{noUnitTemplate:!0,isHorizintal:!0}),"*").concat(this.getCalcPlatformValue(e.height,{noUnitTemplate:!0,isHorizintal:!1})):"-"},calcPlatformTypeText2:function(){switch(this.calcPlatformType){case a["c"].CUSTOM:return"".concat(this.calcPlatformCustomDocWidthShow).concat(this.getCalcPlatformCustomUnitText(!1));case a["c"].WE_CHAT_MINI_PROGRAM:return"".concat(a["sb"]).concat(this.getCalcPlatformCustomUnitText(!1));default:return""}},calcPlatformTypeCss:function(){switch(this.calcPlatformType){case a["c"].ANDROID:return"android";case a["c"].IOS:return"ios";case a["c"].CUSTOM:return"custom";case a["c"].WE_CHAT_MINI_PROGRAM:return"wx_mp";default:return"web"}},calcPlatformTypeText:function(){switch(this.calcPlatformType){case a["c"].ANDROID:return"Android";case a["c"].IOS:return"iOS";case a["c"].WE_CHAT_MINI_PROGRAM:return"微信小程序";case a["c"].CUSTOM:return"自定义";default:return"Web"}}},watch:{rightNavTypePropertyClicked:function(t){t>0&&this.setting&&(this.setting=!1)}},data:function(){return{setting:!1,CALC_PLATFORM_TYPE:a["c"]}},components:{SetPlatform:VC}},HC=BC,UC=(n("c636"),Object(Dr["a"])(HC,MC,LC,!1,null,"1dfc74ce",null)),$C=UC.exports,GC={methods:{parseColor:function(t,e,n){var r=this.sketchGroupFillColor;return Object(h["l"])(t,e,this.isSketchArtboard,this.curNode,r,n,this.isSketch2025Artboard)},getBorderBox:function(t,e,n){var r,i,o,s,c,l,u,d,h=null===(r=this.curArtboardLoadedVerData)||void 0===r?void 0:r.boundsInArtboard,f=null===(i=this.curNode)||void 0===i?void 0:i.boundsInArtboard;if(!h||!f)return null;var m={};m.top=f.y,m.left=f.x,m.bottom=h.height-f.y-f.height,m.right=h.width-f.x-f.width;var p=null===t||void 0===t?void 0:t.reduce((function(t,e){if(e){var n=e.widthOrigin,r=e.widthsOrigin;r||(r=[n,n,n,n]),r.forEach((function(n,r){switch(e.position){case a["lb"].Center:var i=n/2;t.outside[r]=Math.max(t.outside[r],i),t.inside[r]=Math.max(t.inside[r],i);break;case a["lb"].Outside:t.outside[r]=Math.max(t.outside[r],n);break;case a["lb"].Inside:t.inside[r]=Math.max(t.inside[r],n);break}}))}return t}),{outside:[0,0,0,0],inside:[0,0,0,0]});["top","right","bottom","left"].forEach((function(t,e){p[t]=p.outside[e]+p.inside[e]}));var v=null!==(o=null!==(s=null===e||void 0===e?void 0:e.paddings)&&void 0!==s?s:null===n||void 0===n?void 0:n.paddings)&&void 0!==o?o:{},b=null!==(c=v.leftOrigin)&&void 0!==c?c:0,g=null!==(l=v.topOrigin)&&void 0!==l?l:0,w=null!==(u=v.rightOrigin)&&void 0!==u?u:0,x=null!==(d=v.bottomOrigin)&&void 0!==d?d:0,y={width:f.width-b-w-p.left-p.right,height:f.height-g-x-p.top-p.bottom};return m.top-=p.outside[0],m.right-=p.outside[1],m.bottom-=p.outside[2],m.left-=p.outside[3],{position:m,border:p,padding:{left:b,top:g,right:w,bottom:x},content:y}},getFigmaGrid:function(t){if(!ye(t))return null;var e=t.gridRowCount,n=t.gridColumnCount,r=t.gridRowGap,i=t.gridColumnGap,o=t.gridRowSizingCSS,a=t.gridColumnSizingCSS,s=ke(t,this.getCalcPlatformValue),c=!0===(null===s||void 0===s?void 0:s.usePadding);s&&delete s.usePadding;var l=0!==r||0!==i;return r=this.getCalcPlatformValue(r,{isHorizintal:!1}),i=this.getCalcPlatformValue(i,{isHorizintal:!0}),{usePadding:c,paddings:s,rowCount:e,columnCount:n,rowGap:r,columnGap:i,useGap:l,name:"布局",rowSizingCSS:o,columnSizingCSS:a}},getFigmaLayout:function(t){if(!xe(t))return null;var e=t.inferredAutoLayout,n=e.counterAxisAlignItems,r=e.counterAxisSizingMode,i=e.itemSpacing,o=e.layoutMode,s=e.primaryAxisAlignItems,c=e.primaryAxisSizingMode,l=t.counterAxisAlignContent,u=t.layoutWrap,d=t.counterAxisSpacing,h=ke(t,this.getCalcPlatformValue),f=null===h||void 0===h?void 0:h.usePadding,m="HORIZONTAL"===o?a["A"].Horizontal:"VERTICAL"===o?a["A"].Vertical:a["A"].None,p=fe(s),v=a["B"].needGap(p),b=pe(n),g=me(l),w=ve(u),x=this.parseFigmaToSketch_gap(v,m,i,d,w),y=x.useGap,k=x.allGuttersGap,C=x.counterGap;return{paddings:h,usePadding:f,name:"布局",flexDirection:m,justifyContent:p,needGap:v,flexWrap:w,alignItems:b,alignContent:g,useGap:y,allGuttersGap:k,counterGap:C,counterAxisSizingMode:r,primaryAxisSizingMode:c}},getSketchLayout:function(t){if(!Object(l["k"])(t))return null;var e=t.alignItems,n=t.allGuttersGap,r=t.flexDirection,i=t.justifyContent,o=t.paddings;Object(l["k"])(o)||(o={top:0,left:0,right:0,bottom:0});var s=o,c=s.top,u=s.left,d=s.bottom,h=s.right,f=a["B"].needGap(i);n=f?n:0;var m="number"===typeof n&&0!==n,p=0!==c||0!==u||0!==d||0!==h;n=f?this.getCalcPlatformValue(n,{isHorizintal:r!==a["A"].Horizontal}):"自动";var v=this.getCalcPlatformValue(c,{isHorizintal:!1}),b=this.getCalcPlatformValue(d,{isHorizintal:!1}),g=this.getCalcPlatformValue(u,{isHorizintal:!0}),w=this.getCalcPlatformValue(h,{isHorizintal:!0});o={top:v,topOrigin:c,left:g,leftOrigin:u,bottom:b,bottomOrigin:d,right:w,rightOrigin:h};var x=a["E"].NO_WRAP,y=a["x"].UnKnown,k=null;return{alignItems:e,flexDirection:r,justifyContent:i,allGuttersGap:n,useGap:m,counterGap:k,paddings:o,usePadding:p,name:"层叠",flexWrap:x,alignContent:y}},parseFigmaToSketch_gap:function(t,e,n,r,i){var o,s;null==r&&(r=n),o=n;var c="number"===typeof o&&0!==o;return i!==a["E"].WRAP&&i!==a["E"].WRAP_REVERSE||(s=c?this.getCalcPlatformValue(r,{isHorizintal:e===a["A"].Horizontal}):"自动"),o=t?this.getCalcPlatformValue(o,{isHorizintal:e!==a["A"].Horizontal}):"自动",s===o&&(s=null),{useGap:c,allGuttersGap:o,counterGap:s}}},computed:{cssVisible:function(){return this.calcPlatformUse===a["c"].WEB||this.calcPlatformUse===a["c"].WE_CHAT_MINI_PROGRAM},hasValue:function(){return null!=this.curArtboard&&null!=this.curNode&&this.$store.state.rightNavType===a["U"].Property},borderStyle:function(){var t=this.curNode.strokeDashArray;if(!t||0===t.length)return"solid";var e,n=t[0];return e=1===t.length?n:t[1],n===e?"dashed":"dotted"},isSketchArtboard:function(){var t,e,n=this.curArtboardLoadedVerData;return!!n&&(null!==(t=n.fileType)&&void 0!==t?t:null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)===a["r"].SKETCH},isSketch2025Artboard:function(){return this.isSketchArtboard&&!0===this.curArtboardLoadedVerData.sk25},isFigmaArtboard:function(){var t,e,n=this.curArtboardLoadedVerData;return!!n&&(null!==(t=n.fileType)&&void 0!==t?t:null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)===a["r"].FIGMA},isXDArtboard:function(){var t,e;if(this.isSketchArtboard)return!1;var n=this.curArtboardLoadedVerData;return!!n&&(null!==(t=n.fileType)&&void 0!==t?t:null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)===a["r"].XD},sketchGroupFillColor:function(){if(this.isSketchArtboard){var t=this.curNode;if(t)return Object(c["P"])(t)}},nodeStyle:function(){var t=this;if(!this.hasValue)return{borders:[],shadows:[],innerShadows:[],fills:[]};var e=this.opacity,n=this.top,r=this.left,i=this.width,o=this.height,s=this.cornerRadiiName,l=this.cornerRadiiValue,u=this.curNode,d=this.groupLayout,h=this.groupGrid,f=this.isFigmaArtboard,m={opacity:e,blendOpacity:Je(qe(u)),top:n,left:r,width:i,height:o,cornerRadiiName:s,cornerRadiiValue:l,borders:[],textStrokeStyles:[],shadows:[],innerShadows:[],fills:[],fillSN:u.fillSN,strokeSN:u.strokeSN,effectSN:u.effectSN,strokesIncludedInLayout:!!u.strokesIncludedInLayout,groupLayout:d,groupGrid:h,backgroundEffect:0,backgroundEffectBrightness:1,backgroundEffectSaturation:1,backgroundEffectOpacity:1,objectEffect:0};if(u.types.GraphicNode){var p,v,b,g,w=null!==(p=u.blurs)&&void 0!==p?p:[u.blur],x=this.isXDArtboard,y=this.isSketchArtboard;if(w.forEach((function(t){if(t&&t.visible&&t.blurAmount>=0){var e=t.isBackgroundEffect?"backgroundEffect":t.isZoomEffect?"zoomEffect":t.isMotionEffect?"motionEffect":"objectEffect";if(m[e]=t.blurAmount,t.isBackgroundEffect){if(x){var n=t.brightnessAmount,r=t.fillOpacity;r=Math.round(100*r)/100,n=Math.round(100*n)/1e4,m.backgroundEffectOpacity=r,0!=n&&(m.backgroundEffectBrightness=Object(c["r"])(1+n,2))}if(y){var i=t.saturation;"number"===typeof i&&(i=Object(c["r"])(i,2),m.backgroundEffectSaturation=i)}}else t.isZoomEffect?m.zoomEffectCenter=t.center:t.isMotionEffect&&(m.motionEffectAngle=t.motionAngle)}})),u.strokeEnabled&&u.stroke)v=u.strokeArr?u.strokeArr:[{stroke:u.stroke,strokeEnabled:u.strokeEnabled,strokeWidth:u.strokeWidth,strokeWidths:u.strokeWidths,strokePosition:u.strokePosition}],v.forEach((function(e){if(e){var n,r,i=t.parseColor(e.stroke);if(u.types.Text)n=!0,null!==(r=i)&&void 0!==r||(i=t.parseColor(e.stroke,!0));if(i){if(i.style=function(t){if(!t||0===t.length)return"solid";if(i.customDashes)return t.join(" ");var e,n=t[0];return e=1===t.length?n:t[1],n===e?"dashed":"dotted"}(e.strokeDashArray),i.widthOrigin=e.strokeWidth,i.width=t.getCalcPlatformValue(e.strokeWidth,{needArtScale:!0,isHorizintal:!0}),e.strokeWidths){var o=[!0,!1,!1,!0];i.widthsOrigin=e.strokeWidths,i.widths=e.strokeWidths.map((function(e,n){return t.getCalcPlatformValue(e,{needArtScale:!0,isHorizintal:o[n]})})).join(" ")}else i.widthsOrigin=null,i.widths=null;i.position=e.strokePosition,n?m.textStrokeStyles.push(i):(0===m.borders.length&&(m.border=i),m.borders.push(i))}}})),m.textStrokeStyle=m.textStrokeStyles.find((function(t){return t.type===a["s"].FillColor}));if(u.shadow&&u.shadow.visible)b=u.shadowArr?u.shadowArr:[u.shadow],b.forEach((function(e){if(e){var n=t.parseColor(e.color,!0);if(n){var r={x:t.getCalcPlatformValue(e.x,{needArtScale:!0,isHorizintal:!0}),y:t.getCalcPlatformValue(e.y,{needArtScale:!0,isHorizintal:!1}),blur:t.getCalcPlatformValue(e.blur,{needArtScale:!0,isHorizintal:!0}),color:n.color,swatch:n.swatch};"number"===typeof e.spread&&0!==e.spread&&(r.spread=t.getCalcPlatformValue(e.spread,{needArtScale:!0,isHorizintal:!0})),0===m.shadows.length&&(m.shadow=r),m.shadows.push(r)}}}));if(u.innerShadow&&u.innerShadow.visible)g=u.innerShadowArr?u.innerShadowArr:[u.innerShadow],g.forEach((function(e){if(e){var n=t.parseColor(e.color,!0);if(n){var r={x:t.getCalcPlatformValue(e.x,{needArtScale:!0,isHorizintal:!0}),y:t.getCalcPlatformValue(e.y,{needArtScale:!0,isHorizintal:!1}),blur:t.getCalcPlatformValue(e.blur,{needArtScale:!0,isHorizintal:!0}),color:n.color,swatch:n.swatch};"number"===typeof e.spread&&0!==e.spread&&(r.spread=t.getCalcPlatformValue(e.spread,{needArtScale:!0,isHorizintal:!0})),0===m.innerShadows.length&&(m.innerShadow=r),m.innerShadows.push(r)}}}));u.blendMode&&u.blendMode!==c["e"].PASSTHROUGH&&u.blendMode!==c["e"].NORMAL&&(m.blendMode=u.blendMode);var k,C=m.backgroundEffectOpacity;if(u.fillEnabled&&u.fill&&0!==C)k=u.fillArr?u.fillArr:[{fillEnabled:!0,fill:u.fill}],k.forEach((function(e){if(e){var n=t.parseColor(e.fill,!1,C);n&&(0==m.fills.length&&(m.fill=n),m.fills.push(n))}}));if(f){var S=u.layoutGrow,T=u.layoutPositioning,O=u.gridChildHorizontalAlign,I=u.gridChildVerticalAlign,A=u.gridRowAnchorIndex,F=u.gridColumnAnchorIndex,j=u.gridRowSpan,_=u.gridColumnSpan,M=we(T);if(M!==a["D"].Absolute&&M!==a["D"].Fixed&&M!==a["D"].Sticky){var L=this.parentNodeLayoutType;switch(L){case a["G"].Flex:"number"===typeof S&&0!==S&&(m.layoutGrow=S);break;case a["G"].Grid:var D=be(I),P=ge(O);if(a["C"].needShowProperty(P)&&(m.justifySelf=P),a["z"].needShowProperty(D)&&(m.alignSelf=D),j>1){var N=null!==A&&void 0!==A?A:0;m.gridRow={index:N,start:N+1,span:j}}if(_>1){var E=null!==F&&void 0!==F?F:0;m.gridColumn={index:E,start:E+1,span:_}}break}}}}return m.borderBox=this.getBorderBox(m.borders,m.groupLayout,m.groupGrid),m},parentNodeLayoutType:function(){var t=this.curNode,e=this.isSketchArtboard,n=this.isFigmaArtboard,r=t.parentNode;return r?e?null!=r.groupLayout?a["G"].Flex:a["G"].None:n?xe(r)?a["G"].Flex:ye(r)?a["G"].Grid:a["G"].None:a["G"].None:a["G"].None},selfLayoutItemsVisible:function(){var t=this.nodeStyle;if(!t)return!1;var e=null!=["alignSelf","position","layoutGrow","gridRow","gridColumn"].find((function(e){var n=t[e];return null!=n}));return!!e&&this.parentNodeLayoutType!=a["G"].None},groupLayout:function(){return this.isSketchArtboard?this.getSketchLayout(this.curNode.groupLayout):this.isFigmaArtboard?this.getFigmaLayout(this.curNode):null},groupGrid:function(){return this.isFigmaArtboard?this.getFigmaGrid(this.curNode):null},cornerRadiiName:function(){var t;return null!==(t=this.curNode.cornerRadiiName)&&void 0!==t?t:"圆角"},cornerRadiiValue:function(){var t=this.curNode.cornerRadii;return t?Object(l["i"])(t)?null:t.bottomLeft!==t.bottomRight||t.bottomLeft!==t.topLeft||t.bottomLeft!==t.topRight?"".concat(this.getCalcPlatformValue(t.topLeft,{needArtScale:!0,isHorizintal:!0})," ").concat(this.getCalcPlatformValue(t.topRight,{needArtScale:!0,isHorizintal:!0})," ").concat(this.getCalcPlatformValue(t.bottomRight,{needArtScale:!0,isHorizintal:!0})," ").concat(this.getCalcPlatformValue(t.bottomLeft,{needArtScale:!0,isHorizintal:!0})):0!==t.topLeft?this.getCalcPlatformValue(t.topLeft,{needArtScale:!0,isHorizintal:!0}):void 0:null},width:function(){var t=this.curNode,e=t.markedForExport;return this.getCalcPlatformValue(t.boundsInArtboard.width,{markedForExport:e,isHorizintal:!0})},height:function(){var t=this.curNode,e=t.markedForExport;return this.getCalcPlatformValue(t.boundsInArtboard.height,{markedForExport:e,isHorizintal:!1})},top:function(){return this.curNode.types.Artboard?0:this.getCalcPlatformValue(this.curNode.boundsInArtboard.y,{isHorizintal:!1})},left:function(){return this.curNode.types.Artboard?0:this.getCalcPlatformValue(this.curNode.boundsInArtboard.x,{isHorizintal:!0})},opacity:function(){return Je(this.curNode.opacity)}},components:{PropertyGroupGrid:_C,PropertyGroupLayoutWithParent:dy,PropertiesGraphicNode:tk,PropertyInfo:gk,PropertyFill:Sk,PropertyText:Ek,PropertyExport:fC,Header:$C,PropertyCss:$k,PropertyGroupLayout:TC},created:function(){0}},WC=GC,zC=(n("da17"),Object(Dr["a"])(WC,Ax,Fx,!1,null,null,null)),YC=zC.exports,XC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-main",class:{on:t.artboardInComment&&t.artboardCommentVisible}},[t.inCloudMode?t.commentDetailVisible?e("DetailComment",{attrs:{errorText:t.artboardDetail.errorText,fetchDetailState:t.artboardDetail.fetchState,listNeedRefresh:t.listNeedRefresh,notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion,notSupportCommentCloudVersion:t.notSupportCommentCloudVersion},on:{clickReload:t.clickRefresh,commentAdded:t.commentAdded,onCommentUpdateTime:t.onCommentUpdateTime}}):e("div",{staticClass:"login-tip"},[e("div",{staticClass:"box"},[e("div",{staticClass:"icon"}),e("div",{staticClass:"text"},[t._v("需要登录查看评论内容")]),e("div",{staticClass:"button light",on:{click:t.goCloudLogin}},[t._v("去登录")]),e("div",{staticClass:"text"},[t._v("还没有标记狮账号？去"),e("a",{attrs:{href:"javascript:;"},on:{click:t.goCloudLogin}},[t._v("注册")])])])]):e("div",{staticClass:"comment-support-tip"},[e("div",{staticClass:"box"},[e("div",{staticClass:"img"}),e("div",{staticClass:"tip"},[t._v("本地标注包无法使用评论功能")]),e("div",{staticClass:"text"},[t._v("试用标记狮私有云服务，体验画板评论功能")]),e("a",{staticClass:"button light",attrs:{href:t.cloudPage,target:"_blank"}},[t._v("前往官网了解更多")])])])],1)},KC=[],qC=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"detail-comment"},[t.listNeedRefresh&&t.fetchDetailState===t.FetchState.Success?e("div",{staticClass:"comment-refresh"},[e("a",{staticClass:"btn-refresh",attrs:{href:"javascript:;"},on:{click:function(e){t.setSelectComment(null),t.clickReload()}}},[t._v("评论有更新，点击刷新")])]):t._e(),t.notSupportArtboardVerCloudVersion?t._e():e("div",{staticClass:"head"},[e("div",{staticClass:"comment-filter-mode"},[e("div",{staticClass:"name",domProps:{textContent:t._s(t.commentFilterModeNames.selected)}}),e("div",{staticClass:"options"},[e("div",{class:{on:!t.commentOnlyCurrentVerArtboard},domProps:{textContent:t._s(t.commentFilterModeNames.all)},on:{click:function(e){return t.clickCommentFilterMode(!1)}}}),e("div",{class:{on:t.commentOnlyCurrentVerArtboard},domProps:{textContent:t._s(t.commentFilterModeNames.onlyCurrentVer)},on:{click:function(e){return t.clickCommentFilterMode(!0)}}})])])]),e("div",{staticClass:"comments"},[t.fetchDetailState===t.FetchState.Fetching||t.fetchDetailState===t.FetchState.Error?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取评论信息...",errorText:t.errorText,isLoading:t.fetchDetailState===t.FetchState.Fetching,isError:t.fetchDetailState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t.notSupportCommentCloudVersion?e("div",{staticClass:"feature"},[t._v(" 私有云部署包版本过低,"),e("br"),t._v("请先联系管理员升级私有云部署包 ")]):0===t.renderComments.length?e("div",{staticClass:"feature",domProps:{textContent:t._s(t.commentOnlyCurrentVerArtboard?"暂无版本#".concat(t.artboardVerId," 的评论，快去添加吧！"):"暂无评论，快去添加吧！")}}):e("div",{ref:"commentList",staticClass:"comment-list",on:{scroll:t.onCommentListScroll}},t._l(t.renderComments,(function(n,r){return e("CommentItem",{key:0===n.id?"index_".concat(r):n.id,attrs:{users:t.users,attachVisibleCheckerKey:t.attachVisibleCheckerKey,comment:n},on:{commentAdded:t.commentAdded,commentRemove:t.commentRemove,onCommentUpdateTime:t.onCommentUpdateTime}})})),1)]),t.notSupportCommentCloudVersion?t._e():e("div",{staticClass:"art-editor"},[t.cloudIsLogin?e("Editor",{attrs:{commentId:0,replyId:0,parent:{id:0,comments:t.comments},users:t.users,initSummary:""},on:{commentAdded:t.commentAdded,onCommentUpdateTime:t.onCommentUpdateTime}}):e("div",{staticClass:"login-tip"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v("需要登录才可进行评论")]),e("div",{staticClass:"button light",on:{click:t.goCloudLogin}},[t._v("去登录")]),e("div",{staticClass:"text"},[t._v("还没有标记狮账号？去"),e("a",{attrs:{href:"javascript:;"},on:{click:t.goCloudLogin}},[t._v("注册")])])])])],1)]):t._e()},JC=[],QC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor"},[t.attachLoading?e("div",{staticClass:"attach-loading"},[e("p",[t._v("附件添加中...")])]):t._e(),t.attachFetching?e("div",{staticClass:"attach-fetching"},[t._v("评论数据提交中...")]):t._e(),e("EditorTextarea",{ref:"customInput",attrs:{initValue:t.initSummary,maxlength:t.maxLength,placeholder:"留下你的评论,支持@成员"},on:{setValue:t.setValue,submit:t.submit}}),t.attachMents.length>0?e("ul",{staticClass:"attachments"},t._l(t.attachMents,(function(n){return e("li",{key:n.id,on:{click:function(e){return e.preventDefault(),t.clickAttach(n)}}},[e("span",{staticClass:"btn-remove",attrs:{title:"移除"},on:{click:function(e){return e.stopPropagation(),t.clickRemove(n)}}}),e("BlobImage",{attrs:{image:n.thumbBlob||n.blob}})],1)})),0):t._e(),e("div",{ref:"btns",staticClass:"btns"},[e("ul",{staticClass:"menu"},[0===t.replyId?e("li",{staticClass:"point",class:{on:t.pointEnable,pointed:this.pointed},attrs:{title:"添加评注"},on:{click:t.startPoint}},[t.pointed?e("span",[t._v(t._s(t.pointIndex))]):t._e()]):t._e(),e("li",{staticClass:"localimage",attrs:{title:"上传本地图片"},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickLocalFile.apply(null,arguments)}}},[e("input",{ref:"file",attrs:{type:"file",accept:t.supportFileExt},on:{change:t.onLocalFileChange}})]),e("li",{staticClass:"drawimage",class:{on:t.inDrawingSelf},attrs:{title:"画板截图"},on:{click:t.startDraw}}),e("li",{staticClass:"emoji",class:{on:t.emojiListVisible},on:{click:function(e){return e.target!==e.currentTarget?null:t.openEmojiList.apply(null,arguments)}}},[t.emojiListVisible?e("div",{staticClass:"emoji-list"},t._l(t.EnumEmojiSupportList,(function(n){return e("div",{key:n.name,class:["icon-emoji","emoji-"+n.name],on:{click:function(e){return t.clickEmojiItem(n)}}})})),0):t._e()])]),e("div",{staticClass:"button light submit",class:{off:!t.canSubmit},on:{click:t.submit}},[t._v("评论")])])],1)},ZC=[],tS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor-textarea-container"},[e("div",{ref:"input",staticClass:"editor-textarea",attrs:{contenteditable:"true",placeholder:t.placeholder,autocomplete:"off",spellcheck:"false"},on:{click:t.clickInput,paste:function(e){return e.preventDefault(),t.onInputPaste.apply(null,arguments)},focus:t.onInputFocus,blur:t.onInputBlur,compositionstart:t.onCompositionStart,compositionend:t.onCompositionEnd,input:t.onInput,keyup:t.onInputKeyup}},[t._v(t._s(t.initValue))]),e("EditorUsers",{ref:"users",on:{clickUser:t.clickAtUser}})],1)},eS=[],nS=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"box",staticClass:"at-users",class:{"in-top":t.showInTop}},[t.fetchState===t.FetchState.Fetching||t.fetchState===t.FetchState.Error?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取用户列表信息...",errorText:t.errorText,isLoading:t.fetchState===t.FetchState.Fetching,isError:t.fetchState===t.FetchState.Error,reLoadText:""},on:{reload:function(e){return t.clickReload()}}})],1):0===t.list.length?e("div",{staticClass:"empty"},[t._v('未检索到 "'+t._s(t.searchText)+'" 相关的用户')]):e("ul",t._l(t.list,(function(n){return e("li",{key:n.id,attrs:{title:"".concat(n.nickName,"(").concat(n.email,")")},on:{click:function(e){return t.clickUser(n)}}},[e("div",{staticClass:"name"},[t._v(t._s(n.nickName))]),e("div",{staticClass:"email"},[t._v("("+t._s(n.email)+")")])])})),0)]):t._e()},rS=[],iS={components:{NetworkLoading:Mc},methods:{clickUser:function(t){this.$emit("clickUser",t),this.visible=!1},searchUser:function(t){var e=this;this.searchText=Object(l["j"])(t)?t.trim().toLowerCase():"",this.visible=!0,this.clickReload(),this.showInTop=!0,this.$nextTick((function(){var t=e.$refs.box;if(t){var n=t.getBoundingClientRect();n.top<144&&(e.showInTop=!1)}}))},hide:function(){this.visible=!1},clickReload:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.fetchState!==c["a"].Fetching){e.next=2;break}return e.abrupt("return");case 2:if(t.visible){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,t.errorText=null,t.fetchState=c["a"].Fetching,n=t.searchText,e.next=10,t.getAllUsers();case 10:i=e.sent,o=n.length>0,i=i.filter((function(t){if(t){if(!o)return!0;var e=(t.nickName||"").toLowerCase();return-1!==e.indexOf(n)}})),t.list=i,t.fetchState=c["a"].Success,e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](4),t.errorText=e.t0,t.fetchState=c["a"].Error;case 21:case"end":return e.stop()}}),e,null,[[4,17]])})))()}},data:function(){return{FetchState:c["a"],fetchState:c["a"].Normal,errorText:null,list:[],searchText:"",visible:!1,showInTop:!1}}},oS=iS,aS=(n("d28d"),Object(Dr["a"])(oS,nS,rS,!1,null,"26289ab6",null)),sS=aS.exports,cS="marklion-cloud-uid",lS={components:{EditorUsers:sS},methods:{onInputKeyup:function(t){var e=t.keyCode||t.which,n=this.inMacOS?t.metaKey:t.ctrlKey;n&&13===e&&(t.preventDefault(),this.$emit("submit"))},clickAtUser:function(t){var e=this;t&&requestAnimationFrame((function(){e.insertAtUser(t)}))},onInput:function(){this.$emit("setValue",this.getValue()),this.autoParseSearchUserText()},autoParseSearchUserText:function(){var t=this;clearTimeout(this.searchUserHandle),this.searchUserHandle=setTimeout((function(){var e=t.getSearchUserText(),n=t.$refs.users;n&&(e?(e=e.substr(1),n.searchUser(e)):n.hide())}),50)},onCompositionStart:function(){this.inComposition=!0},onCompositionEnd:function(){this.inComposition=!1},onInputPaste:function(t){var e=t.clipboardData,n=e.getData("text/plain");this.insertText(n)},clickInput:function(t){var e,n=t.target,r=this.$refs.input;if(r!=n&&(e="INPUT"===n.tagName?+n.getAttribute(cS):NaN,!isNaN(e))){var i=window.getSelection(),o=document.createRange(),a=!1,s=n.nextSibling;if(s&&3===s.nodeType){var c=s.textContent;c&&c.length>0&&(c=c[0]," "!==c&&" "!==c||(o.setStart(s,1),a=!0))}a||o.setStartAfter(n),o.collapse(!0),i.removeAllRanges(),i.addRange(o)}},moveRangeToEnd:function(t){if(t||(t=this.$refs.input),t&&window.getSelection){t.focus();var e=window.getSelection();e.selectAllChildren(t),e.collapseToEnd()}},setFocus:function(){this.isInputFocus||this._setLastRange()},_setLastRange:function(){var t=this.$refs.input;if(t){t.focus();var e=this.lastRange;if(e){var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}else this.moveRangeToEnd(t)}},_appendData:function(t,e){var n=this;this._setLastRange(),document.execCommand("insertHTML",!1,t),e&&document.execCommand("insertText",!1," "),requestAnimationFrame((function(){var t=n.$refs.input;if(t)for(var e=t.querySelectorAll("*"),r=0,i=e.length;r<i;r++){var o=e[r],a=o.tagName;switch(a){case"P":case"DIV":case"SPAN":case"FONT":var s=o.style.cssText;s&&(o.style.cssText="");break}}}))},getUserText:function(t){return"[@uid:".concat(t,";]")},insertAtUser:function(t){var e;if(t){null===(e=this.$refs.input)||void 0===e||e.focus();var n=this.canEnterTextLength(),r=this.getUserText(t.id);if(n-r<0)this.showTextTip("文本长度已超过输入框允许的最大值:".concat(this.maxlength));else{var i="<input type='button' ".concat(cS,"='").concat(t.id,"'  class='at-user' value='@").concat(t.nickName,"' />"),o=this.lastRange;if(o){var a=o.startContainer,s=o.endContainer,c=o.startOffset,l=o.endOffset;if(a&&a==s&&c==l&&3===a.nodeType){var u=a.textContent;if(u){var d=u.substring(0,c).lastIndexOf("@");if(-1!==d){var h=document.createRange();h.setStart(a,d),h.setEnd(a,c);var f=window.getSelection();f.removeAllRanges(),f.addRange(h),document.execCommand("insertText",!1,""),this.lastRange=h}}}}this._appendData(i,!0)}}},insertText:function(t){var e;if(Object(l["j"])(t)&&(t=Object(c["bb"])(t),Object(l["j"])(t))){var n=this.canEnterTextLength();if(0!==n){var r=t.length;n<r&&(t=t.substr(0,n)),null===(e=this.$refs.input)||void 0===e||e.focus(),this._appendData(t)}else this.showTextTip("文本长度已超过输入框允许的最大值:".concat(this.maxlength))}},canEnterTextLength:function(){var t=this.maxlength,e=this.getValue().length,n=this.getSelectText().length;return Math.max(t-e+n,0)},getSearchUserText:function(){var t=this.lastRange;if(!t)return"";var e=t.startContainer,n=t.endContainer,r=t.startOffset,i=t.endOffset;if(e!=n)return"";if(r!=i)return"";if(3!==e.nodeType)return"";var o=e.textContent;if(!o)return"";o=o.substring(0,r);var a=o.substring(0,r).lastIndexOf("@");return-1===a?"":(o=o.substring(a),/[ [\]]/.test(o)?"":o)},getSelectText:function(){var t=this.lastRange;if(!t)return"";var e=t.cloneContents();try{for(var n=e.childNodes,r="",i=0,o=n.length;i<o;i++){var a=n[i];r+=this.getNodeValue(a)}return r.replace(/\xa0/g," ")}finally{e=null}},getNodeValue:function(t){var e=this;switch(t.nodeType){case 3:return t.textContent||"";case 1:var n=+t.getAttribute(cS);if(isNaN(n)||!(n>0)){var r,i=t.tagName;switch(i){case"DIV":case"P":case"SECTION":r=" ";break;default:r="";break}var o=t.childNodes;return o.forEach((function(t){r+=e.getNodeValue(t)})),r}return"[@uid:".concat(n,";]");default:return""}},getValue:function(){var t=this.$refs.input;if(t){for(var e=t.childNodes,n="",r=0,i=e.length;r<i;r++){var o=e[r];n+=this.getNodeValue(o)}return n.replace(/\xa0/g," ")}},setEmpty:function(){var t,e=this.$refs.input;if(e)while(null!=(t=e.firstChild))e.removeChild(t)},onSelectionChange:function(){var t=window.getSelection();this.lastRange=t.rangeCount>0?t.getRangeAt(0):null},onInputFocus:function(){this.isInputFocus=!0,document.addEventListener("selectionchange",this.onSelectionChange)},onInputBlur:function(){this.isInputFocus=!1,document.removeEventListener("selectionchange",this.onSelectionChange)}},watch:{isInputFocus:function(t){var e=this;clearTimeout(this.autoHideUsersHandle),t||(this.autoHideUsersHandle=setTimeout((function(){var t;null===(t=e.$refs.users)||void 0===t||t.hide()}),500))}},data:function(){return{isInputFocus:!1,searchUserHandle:0,lastRange:null,inComposition:!1,autoHideUsersHandle:0}},beforeDestroy:function(){this.lastRange=null,clearTimeout(this.searchUserHandle),document.removeEventListener("selectionchange",this.onSelectionChange),this.setEmpty()},created:function(){0},props:{placeholder:{type:String,default:""},maxlength:{type:Number,default:0},initValue:{type:String,default:""}}},uS=lS,dS=(n("14c9"),Object(Dr["a"])(uS,tS,eS,!1,null,"771515f8",null)),hS=dS.exports,fS={components:{BlobImage:Qo,EditorTextarea:hS},methods:{setValue:function(t){this.summary=t},autoHideEmojiList:function(){var t=this;clearTimeout(this.emojiListHideHandle),this.emojiListHideHandle=setTimeout((function(){t.emojiListVisible=!1}),50)},clickEmojiItem:function(t){var e=this;this.emojiListVisible=!1,t&&requestAnimationFrame((function(){var n=e.$refs.customInput;n&&n.insertText("[".concat(t.text,"]"))}))},openEmojiList:function(){this.emojiListVisible=!this.emojiListVisible},startPoint:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,a;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.pointInfo,o=e.preventPoint,a=e.inDrawing,!a){n.next=4;break}return e.showTextTip("正在编辑截图，无法添加评注"),n.abrupt("return");case 4:if(!e.pointed){n.next=11;break}return n.next=7,e.confirm({text:"确认移除该评论的评注?"});case 7:if(!n.sent){n.next=10;break}i.point.enable=!1,i.instance=null;case 10:return n.abrupt("return");case 11:e.showTextTip("点击当前区域任意位置添加评注"),o.enable=!0,o.x=t.clientX,o.y=t.clientY,i.instance=e;case 16:case"end":return n.stop()}}),n)})))()},clickAttach:function(t){var e=this.attachMents.map((function(t){return t.blob})),n=e.findIndex((function(e){return e===t.blob}));-1===n&&(n=0),this.$store.commit("setImageViewer",{imgList:e,currentIndex:n})},fixScroll:function(){var t=this.replyId;if(0!==t){var e=this.$refs.btns;e&&e.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}},focus:function(){var t=this.$refs.customInput;null===t||void 0===t||t.setFocus()},clean:function(){this.attachMents.splice(0);var t=this.$refs.customInput;null===t||void 0===t||t.setEmpty();var e=this.preventPoint,n=this.point,r=this.pointInfo,i=this.editComment;r.instance===this&&(r.instance=null,n.enable=!1,n.x=n.y=0,e.enable=!1,e.x=e.y=0),this.inDrawingSelf&&(i.instance=null,i.drawing=!1)},clickRemove:function(t){var e=this.attachMents,n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)},getCustomEditorValue:function(){var t,e,n=null!==(t=null===(e=this.$refs.customInput)||void 0===e?void 0:e.getValue())&&void 0!==t?t:"";return n},submit:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,u,d,h,f,m,p,v,b,g,w;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.attachMents,i=t.fetchState,o=t.artboardVer,a=t.curArtboardId,i!==c["a"].Fetching){e.next=4;break}return e.abrupt("return");case 4:if(!t.inDrawing){e.next=7;break}return t.showTextTip("正在编辑截图,请先保存或取消"),e.abrupt("return");case 7:if(s=[],u=t.getCustomEditorValue(),d=t.maxLength,h=u.length,!(h>d)){e.next=14;break}return t.showTextTip("文本长度已超过输入框允许的最大值(".concat(d,")")),e.abrupt("return");case 14:if(f={artboardId:a,commentId:t.commentId,replyId:t.replyId,summary:u,attachMents:[],artboardVer:o},n.forEach((function(t){s.push(t.blob),t.thumbBlob&&s.push(t.thumbBlob),f.attachMents.push(t.data)})),Object(l["j"])(f.summary)||0!==f.attachMents.length){e.next=20;break}return t.showTextTip("评论内容和图片附件不能都为空"),t.focus(),e.abrupt("return");case 20:return t.pointed&&(f.pointX=t.point.x,f.pointY=t.point.y,f.pointEnable=!0),t.fetchState=c["a"].Fetching,e.prev=22,e.next=25,t.checkLoginThrow();case 25:if(e.sent){e.next=28;break}return t.fetchState=c["a"].Error,e.abrupt("return");case 28:return m=Object(c["vb"])(JSON.stringify(f)),s.unshift(m),s.unshift(Object(c["ib"])(m.byteLength)),m=Object(c["n"])(s),e.next=34,t.fetchPostCloudApi("addartboardcommentbyweb",{body:m});case 34:if(p=e.sent,t.fetchState=c["a"].Success,s=f=null,Object(l["k"])(p)){e.next=39;break}throw"返回值异常:".concat(p);case 39:if(p.success){e.next=41;break}throw p.errMsg;case 41:if(Object(l["k"])(p.data)){e.next=43;break}throw"返回值异常:".concat(JSON.stringify(p));case 43:p=p.data,v=p.commentUpdateTime,t.$emit("onCommentUpdateTime",{commentUpdateTime:v,artboardId:a}),b=p,g=b.atUsers,f=p.comment,w=t.users,w&&Object(l["i"])(g)&&g.forEach((function(e){e&&t.$set(w,e.id,e)})),f=Ni(f,{id:0,email:t.cloudUserEmail,userKey:t.cloudUserKey,nickName:t.cloudNickName},c["c"],t.parent,w),t.clean(),t.showTextTip("评论已提交成功"),t.$emit("commentAdded",f),e.next=61;break;case 56:e.prev=56,e.t0=e["catch"](22),t.showTextTip(e.t0),t.fetchState=c["a"].Error;case 61:case"end":return e.stop()}}),e,null,[[22,56]])})))()},clickLocalFile:function(){var t;this.attachMents.length>=Pi?this.showTextTip("无法选择图片,已达图片提交上限"):null===(t=this.$refs.file)||void 0===t||t.click()},onLocalFileChange:function(t){var e=this,n=t.target,r=n.files?n.files[0]:null;if(r){n.value="";var i=r.name,o=r.size,a=r.type;if(i&&!(o<1)&&a)if(0===a.indexOf("image/"))if(o>Di)this.showTextTip("选择的文件大小「".concat(Object(c["zb"])(o),"」太大,不能超过「").concat(Object(c["zb"])(Di),"」"));else{i=i.toLowerCase();var s=i.length,l=this.isSupportWebp,u=Li.find((function(t){if(!l&&t===Mi)return!1;var e=i.indexOf(t);return-1!==e&&e+t.length===s}));u?this.addAttachMent(r).then((function(){e.showTextTip("图片已添加")})).catch((function(t){return e.showTextTip(t)})):this.showTextTip("请选择正确的图片文件")}else this.showTextTip("请选择正确的图片文件")}},addAttachMent:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.attachLoading=!0,n.next=3,X(t);case 3:return i=n.sent,e.attachMents.push(i),e.attachLoading=!1,n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})))()},startDraw:function(){this.inDrawing?this.showTextTip("当前已在画板截图编辑模式"):this.attachMents.length>=Pi?this.showTextTip("无法编辑画板截图,已达图片提交上限"):(this.$store.commit("startDraw",this),this.showTextTip("在当前区域编辑画板相关截图"))}},watch:{emojiListVisible:function(t){clearTimeout(this.emojiListHideHandle),t?window.addEventListener("click",this.autoHideEmojiList,!0):window.removeEventListener("click",this.autoHideEmojiList,!0)},curArtboardId:function(){this.clean()}},computed:{canSubmit:function(){var t=this.fetchState,e=this.summary,n=this.attachMents;return t!==c["a"].Fetching&&!(0===n.length&&!Object(l["j"])(e.trim()))},EnumEmojiSupportList:function(){return oa},point:function(){return this.pointInfo.point},preventPoint:function(){return this.pointInfo.preventPoint},pointInfo:function(){return this.$store.state.editComment.pointInfo},pointed:function(){return this.pointInfo.instance===this&&this.point.enable},pointEnable:function(){return this.pointInfo.instance===this&&(this.point.enable||this.preventPoint.enable)},pointIndex:function(){return this.pointed?this.point.pointIndex:""},attachFetching:function(){return this.fetchState===c["a"].Fetching},isSupportWebp:function(){return this.$store.state.isSupportWebp===In.Support},canDestory:function(){return 0===this.attachMents.length&&!Object(l["j"])(this.summary)},supportFileExt:function(){var t=Li;return this.isSupportWebp||(t=t.filter((function(t){return t!==Mi}))),t.join(",")},inDrawing:function(){var t=this.editComment;return t.drawing},inDrawingSelf:function(){var t=this.editComment;return t.drawing&&t.instance===this},artboardVer:function(){var t,e=this.replyId,n=this.curArtboardLoadedVerData,r=this.parent;return null!==(t=0===e?n.lastVersionId:r.artboardVer)&&void 0!==t?t:0}},beforeDestroy:function(){clearTimeout(this.emojiListHideHandle),window.removeEventListener("click",this.autoHideEmojiList,!0),this.clean()},created:function(){this.summary=Object(l["j"])(this.initSummary)?this.initSummary:""},data:function(){return{maxLength:256,inputFocused:!1,emojiListHideHandle:0,emojiListVisible:!1,attachLoading:!1,summary:"",attachMents:[],fetchState:c["a"].Normal}},props:{commentId:Number,parent:Object,replyId:Number,users:Object,initSummary:{type:String,default:""}}},mS=fS,pS=(n("0347d"),Object(Dr["a"])(mS,QC,ZC,!1,null,"08d9332f",null)),vS=pS.exports,bS=function(){var t=this,e=t._self._c;return t.comment?e("div",{staticClass:"comment-detail",attrs:{id:"art_c".concat(t.comment.commentId,"_").concat(t.comment.id)}},[e("div",{staticClass:"content",class:{on:t.selectComment===t.comment},on:{click:t.clickPoint}},[e("UserFace2",{attrs:{self:t.isSelfComment,tourist:t.isTourist,title:t.userFaceTitle,text:t.userFaceText}}),e("div",{staticClass:"userinfo"},[e("div",{staticClass:"summary",class:{reply:t.isReply}},[t.canRemove?e("a",{staticClass:"btn-del",attrs:{href:"javascript:;",title:"删除评论"},on:{click:t.clickRemove}}):t._e(),e("div",{staticClass:"name"},[t._v(" "+t._s(t.userNickName)),t.isReplyOther?e("span",{staticClass:"reply-to"},[t._v("回复 "+t._s(t.comment.replyUser.nickName))]):t._e()]),t.comment.pointEnable?e("span",{staticClass:"point"},[t._v(t._s(t.comment.pointIndex))]):t._e(),e("span",{domProps:{innerHTML:t._s(t.summaryHTML)}})]),t.attachMentImgs.length>0?e("ul",{staticClass:"attachments"},t._l(t.attachMentImgs,(function(n,r){return e("li",{key:r,on:{click:function(e){return e.preventDefault(),t.clickAttach(n)}}},[t.attachVisible?e("BlobImage",{attrs:{image:n.preview}}):t._e()],1)})),0):t._e(),e("div",{staticClass:"date"},[t.artboardVer?e("span",{staticClass:"artboard-ver",attrs:{title:"评论的画板版本#".concat(t.comment.artboardVer)},domProps:{textContent:t._s(t.artboardVer)},on:{click:function(e){return t.setCurArtboardVer(t.comment.artboardVer)}}}):t._e(),t._v(t._s(t.comment.dateStr)),e("a",{class:{on:t.editorVisible},attrs:{href:"javascript:;"},on:{click:t.clickReply}},[t._v(t._s(t.editorVisible?"收起回复":"回复"))])])])],1),t.editorEnable?e("Editor",{directives:[{name:"show",rawName:"v-show",value:t.editorVisible,expression:"editorVisible"}],ref:"editor",attrs:{commentId:t.comment.commentId,replyId:t.comment.id,parent:t.comment.parent||t.comment,users:t.users},on:{commentAdded:t.commentAdded,onCommentUpdateTime:t.onCommentUpdateTime}}):t._e(),t.comment.comments?e("div",{staticClass:"child"},t._l(t.comment.comments,(function(n,r){return e("CommentItem",{key:0===n.id?"".concat(t.comment.id,"_index_").concat(r):"".concat(t.comment.id,"_id_").concat(n.id),attrs:{attachVisibleCheckerKey:t.attachVisibleCheckerKey,comment:n,selectComment:t.selectComment,users:t.users},on:{commentAdded:t.commentAdded,commentRemove:t.commentRemove,onCommentUpdateTime:t.onCommentUpdateTime}})})),1):t._e()],1):t._e()},gS=[],wS={off:1,on:2,hide:3},xS={components:{UserFace2:ia,Editor:vS,BlobImage:Qo},name:"CommentItem",methods:{onCommentUpdateTime:function(t){this.$emit("onCommentUpdateTime",t)},clickPoint:function(t){var e=t.target,n=this.comment,r=this.selectComment,i=n===r?null:n;if(!i&&e){var o=e.tagName;if("A"===o)return;if("LI"===o&&e.parentNode.classList.contains("attachments"))return}this.setSelectComment(i)},setSelectComment:function(t){this.$store.commit("setSelectComment",{comment:t,notScrollList:!0})},setCommentEditorVisibleId:function(t){this.$store.commit("setCommentEditorVisibleId",t)},commentRemove:function(t){if(t){var e=this.comment.comments;if(e){var n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)}}},clickRemove:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s,c,u,d,h,f,m,p,v;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.canRemove){e.next=2;break}return e.abrupt("return");case 2:if(n=t.comment,n){e.next=5;break}return e.abrupt("return");case 5:return i=n.id,o=n.commentId,a=n.artboardId,e.prev=6,e.next=9,t.checkLoginThrow();case 9:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:return s=0===o?"确认要删除该评论及所属的所有二级评论吗?":"确认要删除该评论吗?",e.next=14,t.confirm({text:s});case 14:if(e.sent){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,t.fetchPostCloudApi("removecommentbyweb",{body:{id:i,commentId:o,artboardId:a}});case 18:if(c=e.sent,Object(l["k"])(c)){e.next=21;break}throw new Error("返回值异常:".concat(c));case 21:if(c.success){e.next=23;break}throw new Error(c.errMsg);case 23:t.showTextTip("评论已删除"),t.$emit("commentRemove",n),u=t.artboard,d=t.artboardDetail,Object(l["k"])(c.data)&&u&&(h=c.data,f=h.comments,m=h.replies,p=h.commentUpdateTime,v=h.artboardMaxPointIndex,"number"===typeof f&&(u.comments-=f),"number"===typeof m&&(u.replies-=m),v>=0&&(d.maxPointIndex=v),t.$emit("onCommentUpdateTime",{commentUpdateTime:p,artboardId:a})),e.next=32;break;case 29:e.prev=29,e.t0=e["catch"](6),t.showTextTip(e.t0);case 32:case"end":return e.stop()}}),e,null,[[6,29]])})))()},clickAttach:function(t){var e=this.attachMentImgs.map((function(t){return t.imgSrc})),n=e.findIndex((function(e){return e===t.imgSrc}));-1===n&&(n=0),this.$store.commit("setImageViewer",{imgList:e,currentIndex:n})},commentAdded:function(t){this.$emit("commentAdded",t),this.editorVisible&&this.clickReply()},clickReply:function(t){var e=this;if(this.cloudIsLogin)if(this.editorVisible&&!0!==t){var n=this.$refs.editor;if(n&&n.canDestory)return this.editorVisible&&this.setCommentEditorVisibleId(0),void(this.editorState=wS.off);this.editorState=wS.hide}else this.editorState=wS.on,this.setCommentEditorVisibleId(this.comment.id),this.$nextTick((function(){var t=e.$refs.editor;t&&(t.focus(),t.fixScroll())}));else this.showTextTip("未登录,需要登录才可进行评论")},checkAttachVisible:function(){var t=this.artboardInComment,e=this.attachMentImgs,n=this.attachVisible,r=this.artboardCommentVisible;t&&r&&!n&&0!==e.length&&(this.attachVisible=!0)}},mounted:function(){this.checkAttachVisible()},watch:{attachVisibleCheckerKey:function(){this.checkAttachVisible()},autoOpenEditor:function(t){var e=this;t&&(this.comment.autoOpenEditor=!1,setTimeout((function(){e.clickReply(!0)}),313))}},computed:{artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},artboardVer:function(){var t=this.comment.artboardVer,e=this.isReply;return null==t||e?null:"#".concat(t)},autoOpenEditor:function(){return!!this.comment.autoOpenEditor},summaryHTML:function(){return pa(this.comment.summary,this.comment.atUsers)},artboardDetail:function(){return this.$store.state.artboardDetail},selectComment:function(){return this.artboardDetail.selectComment},commentEditorVisibleId:function(){return this.$store.state.commentEditorVisibleId},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},canRemove:function(){return this.isSelfComment||this.cloudUserIsOwner},attachMentImgs:function(){var t,e=null===(t=this.comment)||void 0===t?void 0:t.attachMents,n=[];return e?(e.forEach((function(t){if(t){var e=t.thumbFileName||t.fileName;e&&n.push({imgSrc:t.fold+t.fileName,preview:t.fold+e})}})),n):n},userFaceTitle:function(){var t=this.comment;if(!t)return null;var e=t.user;return e?"".concat(e.nickName,"(").concat(e.email,")"):null},userNickName:function(){var t=this.comment;if(!t)return"-";var e=t.user;if(!e)return"-";var n=e.nickName;return n||"-"},isSelfComment:function(){var t=this.comment;if(!t)return!1;var e=t.user;return!!e&&e.userKey===this.cloudUserKey},isTourist:function(){var t=this.comment;if(!t)return!1;var e=t.user;if(!e)return!1;switch(e.authority){case a["p"].Admin:case a["p"].Designer:return!1}return!0},userFaceText:function(){var t=this.userNickName;return t[t.length-1]},editorEnable:function(){return this.editorState!==wS.off},editorVisible:function(){return this.editorState===wS.on&&this.commentEditorVisibleId===this.comment.id},isReply:function(){var t=this.comment;return!!t&&0!==t.commentId},isReplyOther:function(){var t=this.comment;return!!t&&(0!==t.commentId&&t.replyUser)}},data:function(){return{editorState:wS.off,attachVisible:!1}},props:{comment:Object,users:Object,attachVisibleCheckerKey:String}},yS=xS,kS=(n("e33a"),Object(Dr["a"])(yS,bS,gS,!1,null,"608ac6a7",null)),CS=kS.exports,SS={components:{Editor:vS,CommentItem:CS,NetworkLoading:Mc},methods:{onCommentListScroll:function(){var t=this.$refs.commentList;t&&(this.commentListScrollTop=t.scrollTop)},clickCommentFilterMode:function(t){this.$store.state.commentOnlyCurrentVerArtboard=t},onCommentUpdateTime:function(t){this.$emit("onCommentUpdateTime",t)},commentRemove:function(t){if(t){var e=this.comments;if(e){var n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)}}},clickReload:function(){this.$emit("clickReload")},commentAdded:function(t){var e=this;this.setSelectComment(t),this.$emit("commentAdded",t),this.$nextTick((function(){if(0===t.commentId){var n=e.$refs.commentList;n&&(n.scrollTop=1e5)}else e.scrollToComment(t)}))},getCommentOrReplyFromId:function(t,e){var n=this.comments;if(!n)return null;for(var r=0,i=n.length;r<i;r++){var o=n[r];if(!e&&o.id==t)return o;if(e){var a=o.comments;if(a){var s=a.find((function(e){return e.id===t}));if(s)return s}}}},refreshCommentList:function(){var t,e,n,r=this,i=this.comments,o=this.autoIntoInfo,a=null!==(t=null===(e=this.selectComment)||void 0===e?void 0:e.id)&&void 0!==t?t:0,s=a>0&&(null===(n=this.selectComment)||void 0===n?void 0:n.commentId)>0;if(null!=i){this.setSelectComment(null);var c=o.commentId,l=o.commentArtboardId,u=o.isReply;if(0!==l&&l==this.curArtboardId&&c>0){var d=this.getCommentOrReplyFromId(c,u);if(!d)return this.showTextTip("未定位到评论信息,可能已经被删除"),this.$store.commit("artboardCommentVisible",!0),o.commentId=o.commentArtboardId=-1,void this.$nextTick((function(){var t=r.$refs.commentList;t&&(t.scrollTop=1e5)}));var h=d.artboardVer;null!=h&&this.setCurArtboardVer(h,!0),this.setSelectComment(d)}if(o.commentId=o.commentArtboardId=-1,null==this.selectComment&&a>0){var f=this.getCommentOrReplyFromId(a,s);f&&this.setSelectComment(f)}null==this.selectComment&&this.$nextTick((function(){var t=r.$refs.commentList;t&&(t.scrollTop=1e5)}))}},scrollToComment:function(t){var e=this.comments,n=e.findIndex((function(e){return e===t})),r=0===n,i=n===e.length-1,o="art_c".concat(t.commentId,"_").concat(t.id),a=document.getElementById(o),s=this.$refs.commentList;if(a&&s){var c=a.getBoundingClientRect(),l=s.getBoundingClientRect(),u=l.top+Math.round(l.height/2)-(r?0:i?c.height:Math.round(c.height/2));s.scrollBy({top:c.top-u,behavior:"smooth"})}},setSelectComment:function(t){this.$store.commit("setSelectComment",{comment:t})}},mounted:function(){var t=this;this.$nextTick((function(){t.onCommentListScroll()}))},computed:{artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},attachVisibleCheckerKey:function(){var t=this.winRect,e=this.commentListScrollTop,n=this.artboardCommentVisible,r=this.commentOnlyCurrentVerArtboard,i=this.artboardInComment;return n&&i?"s".concat(r?1:0,":t").concat(e,":h").concat(t.height):"-"},winRect:function(){return this.$store.state.winRect},commentFilterModeNames:function(){var t,e,n=this.commentOnlyCurrentVerArtboard,r=this.fetchDetailState,i=this.FetchState,o=this.notSupportCommentCloudVersion,a=this.comments,s=this.comments_onlyCurrentVer,c=!o&&!(r===i.Fetching||r===i.Error),l=null!==(t=null===a||void 0===a?void 0:a.reduce((function(t,e){var n,r;return t++,t+=null!==(n=null===e||void 0===e||null===(r=e.comments)||void 0===r?void 0:r.length)&&void 0!==n?n:0,t}),0))&&void 0!==t?t:0,u=null!==(e=null===s||void 0===s?void 0:s.reduce((function(t,e){var n,r;return t++,t+=null!==(n=null===e||void 0===e||null===(r=e.comments)||void 0===r?void 0:r.length)&&void 0!==n?n:0,t}),0))&&void 0!==e?e:0,d="仅当前版本评论(".concat(c?u:"..",")"),h="全部评论(".concat(c?l:"..",")");return{onlyCurrentVer:d,all:h,selected:n?d:h}},selectComment:function(){return this.$store.state.artboardDetail.selectComment},autoIntoInfo:function(){return this.$store.state.autoIntoInfo},FetchState:function(){return c["a"]},users:function(){var t;return null!==(t=this.$store.state.artboardDetail.commentUsers)&&void 0!==t?t:{}},commentOnlyCurrentVerArtboard:function(){return!this.notSupportArtboardVerCloudVersion&&this.$store.state.commentOnlyCurrentVerArtboard},comments:function(){return this.$store.state.artboardDetail.comments},comments_onlyCurrentVer:function(){var t,e,n=this.artboardVerId;return null!==(t=null===(e=this.comments)||void 0===e?void 0:e.filter((function(t){return t.artboardVer===n})))&&void 0!==t?t:[]},renderComments:function(){var t,e=this.comments,n=this.comments_onlyCurrentVer,r=this.commentOnlyCurrentVerArtboard;return null!==(t=r?n:e)&&void 0!==t?t:[]},commentRoot:function(){return{id:0,comments:this.comments}},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},visible:function(){return!0},commentInfoList:function(){var t;return null===(t=this.commentInfo)||void 0===t?void 0:t.list},curArtboardVerData:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e?void 0:e.artboardVerData)&&void 0!==t?t:this.artboard},artboardVerId:function(){var t,e;return null!==(t=null===(e=this.curArtboardVerData)||void 0===e?void 0:e.lastVersionId)&&void 0!==t?t:0}},watch:{"autoIntoInfo.commentId":function(t){if(t>0){var e=this.autoIntoInfo,n=this.autoIntoInfo,r=n.commentId,i=n.commentArtboardId,o=n.isReply;if(i>0&&i===this.curArtboardId){var a=this.getCommentOrReplyFromId(r,o);if(!a)return void this.clickReload();var s=a.artboardVer;null!=s&&this.setCurArtboardVer(s,!0),this.selectComment===a?this.scrollToComment(a):this.setSelectComment(a),e.commentId=e.commentArtboardId=-1}}},selectComment:function(t){var e=this;if(t){var n=this.$store.state.artboardDetail.notScrollList;!n&&this.$nextTick((function(){e.scrollToComment(t)}))}},comments:function(t,e){t!==e&&this.refreshCommentList()}},data:function(){return{commentListScrollTop:0}},props:{notSupportArtboardVerCloudVersion:Boolean,listNeedRefresh:Boolean,fetchDetailState:Number,notSupportCommentCloudVersion:Boolean,errorText:{validator:function(){return!0}}},created:function(){this.refreshCommentList()}},TS=SS,OS=(n("fc83"),Object(Dr["a"])(TS,qC,JC,!1,null,"0adfebdd",null)),IS=OS.exports,AS={components:{DetailComment:IS},methods:{onCommentUpdateTime:function(t){if(Object(l["k"])(t)){var e=t.artboardId,n=t.commentUpdateTime;e===this.curArtboardId&&this.$set(this.selfChangecommentUpdateTimes,n,1)}},commentAdded:function(t){if(t){var e=this.artboardDetail,n=this.artboard;n&&(t.pointEnable&&(e.maxPointIndex=Math.max(e.maxPointIndex,t.pointIndex)),0===t.commentId?n.comments++:n.replies++)}},_getCommentsWithCache:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,a,s,u,h,f,m,p,v;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=e.curArtboardId,a=e.notSupportArtboardVerCloudVersion,s=e.artboard,u=e.listNeedRefresh,o){n.next=3;break}throw new Error("画板id不存在");case 3:if(t||u){n.next=7;break}if(h=Wn("comment",o),!h){n.next=7;break}return n.abrupt("return",h);case 7:return f=new FormData,f.append("artboardid",o),n.next=11,e.fetchPostCloudApi(a?"GetCommentsByArtboard":"GetArtboardDataDetailV2ByWeb",{body:f});case 11:if(h=n.sent,Object(l["k"])(h)){n.next=14;break}throw new Error("获取评论返回值异常:".concat(h));case 14:if(h.success){n.next=16;break}throw new Error(h.errMsg);case 16:if(h=h.data,!a){n.next=21;break}h={artboard:s,commentInfo:h,historyArtboards:[],users:null!==(m=h.users)&&void 0!==m?m:{}},n.next=27;break;case 21:if(Object(l["k"])(h)&&Object(l["k"])(h.artboard)){n.next=23;break}throw new Error("画板最新信息的返回值解析异常");case 23:h.artboard=s,Object(l["k"])(h.users)||(h.users={}),Object(l["i"])(h.historyArtboards)?h.historyArtboards.forEach((function(t){Ie(t),Object(d["h"])(t),ze(t)})):h.historyArtboards=[],Object(l["k"])(h.commentInfo)||(h.commentInfo={});case 27:return p=function(t){if(!(!Object(l["k"])(t)||Object(l["j"])(t.updaterEmail)&&Object(l["j"])(t.updaterName))){var e=h.users[t.updaterId];e&&(t.updaterEmail=e.email,t.updaterName=e.nickName)}},v=null!==(i=h.artboard.cid)&&void 0!==i?i:h.artboard.id,h.artboard.cid=v,h.historyArtboards.forEach((function(t){p(t),t.cid=v,null==t.lastVersionId&&(t.lastVersionId=t.verId)})),p(h.artboard),h.comments=Ei(h.commentInfo,c["c"],h.users),e.refreshedMinNotifyId=e.maxNotifyId,$n("comment",o,h,8e3),n.abrupt("return",h);case 36:case"end":return n.stop()}}),n)})))()},clickRefresh:function(){this.getComments(!0)},getComments:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,a,s,u,d,h,f,m,p,v,b;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.inCloudMode){n.next=2;break}return n.abrupt("return");case 2:if(e.inArtboardMode){n.next=4;break}return n.abrupt("return");case 4:if(e.artboardInComment||e.pointCommentShowAlways){n.next=6;break}return n.abrupt("return");case 6:if(e.commentDetailVisible){n.next=8;break}return n.abrupt("return");case 8:if(o=e.curArtboardId,a=e.artboardDetail,s=e.artboard,o){n.next=11;break}return n.abrupt("return");case 11:if(u="".concat(s.cid,"-").concat(s.updateTimeTimes,":"),a.fetchState!==c["a"].Fetching||0!==(null===(i=e.fetchKey)||void 0===i?void 0:i.indexOf(u))){n.next=14;break}return n.abrupt("return");case 14:if(u+=Date.now().toString(16),a.fetchState=c["a"].Fetching,a.errorText="",n.t0=!1,!n.t0){n.next=21;break}return n.next=21,Object(c["yb"])(50);case 21:return e.fetchKey=u,a.comments=null,a.commentUsers=null,n.prev=24,e.selfChangecommentUpdateTimes={},n.next=28,e._getCommentsWithCache(t);case 28:d=n.sent,e.fetchKey===u&&(a.comments=d.comments,a.commentUsers=d.users,f=d.commentInfo,a.maxPointIndex=null!==(h=null===f||void 0===f?void 0:f.artboardMaxPointIndex)&&void 0!==h?h:0,Object(l["k"])(f)&&(m=0,p=0,Object(l["i"])(f.list)&&(m=f.list.length,f.list.forEach((function(t){var e,n;p+=null!==(e=null===t||void 0===t||null===(n=t.comments)||void 0===n?void 0:n.length)&&void 0!==e?e:0}))),v=e.artboard,v&&(v.comments=m,v.replies=p,f.commentUpdateTime>=0&&(v.commentUpdateTime=f.commentUpdateTime,b=e.$store.state.userNotify.commentUpdateStates,e.$set(b,e.cloudKey,{artboardId:o,commentUpdateTime:f.commentUpdateTime})))),e.listNeedRefresh=!1,a.fetchState=c["a"].Success),n.next=35;break;case 32:n.prev=32,n.t1=n["catch"](24),e.fetchKey===u&&(a.errorText=n.t1,a.fetchState=c["a"].Error,e.showTextTip(n.t1));case 35:case"end":return n.stop()}}),n,null,[[24,32]])})))()}},computed:{cloudPage:function(){var t;return this.curArtboard&&(t=this.curArtboard.artboard.mlConfig.softVersion),t||(t=this.$store.state.config.softVer),"https://www.marklion.cn/cloud.shtml?invoke=MarkLion.Output".concat(Object(l["j"])(t)?"&ver=".concat(t):"")},pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},commentDetailVisible:function(){return this.cloudIsLogin||!this.cloudNeedLogin&&this.supportPublicCloudShowCommentCloudVersion},supportPublicCloudShowCommentCloudVersion:function(){return!$r.notSupportPublicCloudShowComment(this.cloudVersion)},notSupportArtboardVerCloudVersion:function(){return $r.notSupportAiPrompt(this.cloudVersion)},artboardCommentUpdateTimeChanged:function(){var t,e=this.artboardNewCommentUpdateTime,n=this.listNeedRefresh,r=this.selfChangecommentUpdateTimes,i=this.curArtboardId;return!(i<1)&&(!n&&(0!==e&&(!r[e]&&e!==(null===(t=this.artboard)||void 0===t?void 0:t.commentUpdateTime))))},artboardNewCommentUpdateTime:function(){var t,e=this.$store.state.userNotify.commentUpdateStates[this.cloudKey];return e?e.artboardId!==this.curArtboardId?0:null!==(t=e.commentUpdateTime)&&void 0!==t?t:0:0},maxNotifyId:function(){var t,e=this.notifyList;return 0===e.length?0:null===(t=e[0])||void 0===t?void 0:t.id},notifyList:function(){var t,e;return null!==(t=null===(e=this.$store.state.userNotify.cloudList[this.cloudKey])||void 0===e?void 0:e.list)&&void 0!==t?t:[]},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},artboardDetail:function(){return this.$store.state.artboardDetail},notSupportCommentCloudVersion:function(){return $r.notSupportArtboardComment(this.cloudVersion)},artboard:function(){var t,e=this.curArtboard;return null!==(t=null===e||void 0===e?void 0:e.artboard)&&void 0!==t?t:null},curArtboardId:function(){var t,e;return null!==(t=null===(e=this.artboard)||void 0===e?void 0:e.cid)&&void 0!==t?t:0},refreshDataTicks:function(){return this.artboardDetail.refreshDataTicks},commentRefreshKey:function(){var t=this.pointCommentShowAlways,e=this.inArtboardMode,n=this.curArtboardId,r=this.cloudIsLogin,i=this.artboardInComment;return"".concat(e,":").concat(t,":").concat(n,":").concat(r,":").concat(t||i?1:0)}},watch:{artboardCommentUpdateTimeChanged:function(t){t&&(this.listNeedRefresh=!0)},refreshDataTicks:function(){this.clickRefresh()},commentRefreshKey:function(){this.getComments()}},data:function(){return{selfChangecommentUpdateTimes:{},listNeedRefresh:!1,refreshedMinNotifyId:0,fetchKey:""}},created:function(){this.getComments()}},FS=AS,jS=(n("872e"),Object(Dr["a"])(FS,XC,KC,!1,null,"1c3f31b1",null)),_S=jS.exports,MS=function(){var t=this,e=t._self._c;return t.inMultDownMode&&t.curArtboard?e("section",{staticClass:"mult-download"},[0===t.exportNodeCount?e("div",{staticClass:"empty"},[t._v("当前画板不存在切图")]):[e("Header",{attrs:{exportNodeCount:t.exportNodeCount,options:t.platformSelectOptions},on:{onPlatformSelectChanged:t.onPlatformSelectChanged}}),e("div",{staticClass:"list"},[e("LazyList",{ref:"lazyList",attrs:{list:t.curArtboard.exportNodes,lineHeight:80},scopedSlots:t._u([{key:"default",fn:function(n){return n.item?e("ExportNodeItem",{key:"".concat(n.realIndex,"-").concat(n.item.guid),attrs:{node:n.item,exportPdfOnly:t.exportPdfOnly}}):t._e()}}],null,!0)})],1),e("div",{staticClass:"line"}),t.currentResInSvg||t.currentResInPdf?t._e():e("div",{staticClass:"platform-set"},[e("PropertyDownloadOptions",{ref:"downOptions",attrs:{jpgQuality:t.jpgQuality,currentResInSvg:t.currentResInSvg,currentResInPdf:t.currentResInPdf,currentResInJpg:t.currentResInJpg,exportSvgOnly:t.exportSvgOnly,exportPdfOnly:t.exportPdfOnly,downloadPlatform:t.downloadPlatform,node:null,bottomPosition:!0},on:{setJpgQuality:t.setJpgQuality}})],1),e("div",{staticClass:"btns"},[e("Select",{attrs:{options:t.resTypeSelectOptions,expandUp:!0,light:!0},on:{changed:t.onResTypeSelectChanged}}),e("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickDownSelectAll()}}},[t._v("下载切图")])],1)]],2):t._e()},LS=[],DS=function(){var t=this,e=t._self._c;return e("section",{staticClass:"header"},[e("a",{staticClass:"btn-set-platform",class:Object(M["a"])({on:t.setting},t.calcPlatformTypeCss,!0),attrs:{href:"javascript:;"},on:{click:function(e){t.setting=!t.setting}}},[t._v(" "+t._s(t.calcPlatformTypeText)+" ")]),t.setting?e("div",{staticClass:"platforms"},[e("SetPlatform",{attrs:{options:t.options},on:{clickCalcPlatform:t.clickCalcPlatform}})],1):t._e(),e("div",[0!==t.exportNodeCount?e("Checkbox",{attrs:{text:t.selectAllText,selected:t.allSelected},on:{click:t.clickAllSelectBtn}}):t._e()],1)])},PS=[],NS=function(){var t=this,e=t._self._c;return e("section",{staticClass:"set-platform"},[e("ul",t._l(t.options,(function(n){return e("li",{key:n.name,class:t.platformItemCls(n)},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform(n)}}},[t._v(t._s(n.name))])])})),0)])},ES=[],RS={methods:{clickCalcPlatform:function(t){this.$emit("clickCalcPlatform",t)},platformItemCls:function(t){return Object(M["a"])(Object(M["a"])({},a["c"].getClassName(t.value),!0),"on",this.calcPlatformType2===t.value)}},data:function(){return{calcPlatformType2:0}},created:function(){this.calcPlatformType2=(this.options.find((function(t){return t.selected}))||{value:0}).value},props:{options:Array}},VS=RS,BS=(n("f856"),Object(Dr["a"])(VS,NS,ES,!1,null,"9b236aa2",null)),HS=BS.exports,US={components:{Checkbox:ku,SetPlatform:HS},methods:{clickCalcPlatform:function(t){this.$emit("onPlatformSelectChanged",t),this.setting=!1},clickAllSelectBtn:function(t){t=!this.allSelected&&(this.exportNodeCount,!0);var e=this.curArtboard.exportNodes;e.forEach((function(e){e.markedForExport&&(e.mlUserSelectDown=t)}))}},computed:{selectAllText:function(){return"全选(".concat(this.selectNodeCount,"/").concat(this.exportNodeCount,")")},calcPlatformTypeCss:function(){var t=this.options.find((function(t){return t.selected}));return a["c"].getClassName(null===t||void 0===t?void 0:t.value)},calcPlatformTypeText:function(){if(!Object(l["i"])(this.options))return"UnKnown";var t=this.options.find((function(t){return t.selected}));return t?t.name:"UnKnown"},allSelected:function(){return 0!==this.exportNodeCount&&this.exportNodeCount===this.selectNodeCount},selectNodeCount:function(){var t=this.curArtboard.exportNodes,e=0;return t.forEach((function(t){t.markedForExport&&t.mlUserSelectDown&&(e+=1)})),e}},data:function(){return{setting:!1}},props:{exportNodeCount:Number,options:Array}},$S=US,GS=(n("ea18"),Object(Dr["a"])($S,DS,PS,!1,null,"b76f94e6",null)),WS=GS.exports,zS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("div",{staticClass:"prev",on:{click:t.clickSelect}},[e("Checkbox",{attrs:{text:"",selected:t.node.mlUserSelectDown}})],1),e("div",{staticClass:"preview",class:{on:t.node.mlUserSelectDown,white:t.exportBoxBackground===t.ExportBoxBackgroundType.White,black:t.exportBoxBackground===t.ExportBoxBackgroundType.Black},on:{click:t.clickSelect,contextmenu:function(e){e.preventDefault(),t.exportBgTabVisible=!0}}},[t.exportPdfOnly?e("PdfViewer",{attrs:{maxWidth:"95%",maxHeight:"95%",url:t.exportPreviewPng}}):e("img",{attrs:{src:t.exportPreviewPng}})],1),e("div",{staticClass:"info"},[e("NodeName",{attrs:{node:t.node}}),e("div",{staticClass:"size"},[t._v(t._s(t.size))])],1),t.exportBgTabVisible?e("ul",{staticClass:"export-bg"},[e("li",{class:{on:t.ExportBoxBackgroundType.Black===t.exportBoxBackground,black:1},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Black)}}},[t._v(" 深色预览背景 ")]),e("li",{class:{on:t.ExportBoxBackgroundType.Transparent===t.exportBoxBackground,transparent:1},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Transparent)}}},[t._v(" 浅色预览背景 ")])]):t._e()])},YS=[],XS={components:{Checkbox:ku,NodeName:mk,PdfViewer:lC},methods:{clickSelect:function(){var t=this.node;t.mlUserSelectDown=!t.mlUserSelectDown},clickExportBoxBackgroundType:function(t){this.$store.commit("exportBoxBackgroundType",t)},hideSelect:function(){var t=this;requestAnimationFrame((function(){t.exportBgTabVisible=!1}))}},computed:{ExportBoxBackgroundType:function(){return a["ab"]},exportPreviewPng:function(){var t,e,n=null!==(t=null===(e=this.node)||void 0===e?void 0:e.mlConfig)&&void 0!==t?t:{},r=n.pngPreview,i=n.svgPreview,o=n.pdfPreview,a=r||i;return this.inCloudMode?this.exportPdfOnly&&!a&&o?o:a:a+"?"+this.curArtboard.artboard.mlOutputTime},size:function(){var t=this.node,e=this.curArtboardLoadedVerData,n=null===e||void 0===e?void 0:e.mlConfig;if(n){var r=n.sizeMap;if(r)for(var i=t.exportPath.toLowerCase(),o=0;o<ro.length;o++){var a=ro[o],s=a.scale,l=a.ext,u=r[i+l];if(u){var d=Math.ceil(u.width/s),h=Math.ceil(u.height/s);return"".concat(d,"x").concat(h)}}}return"".concat(Math.ceil(Object(c["r"])(this.originWidth,2)),"x").concat(Math.ceil(Object(c["r"])(this.originHeight,2)))},originWidth:function(){return this.node.boundsInArtboard.width},originHeight:function(){return this.node.boundsInArtboard.height}},watch:{exportBgTabVisible:function(t){t?(window.addEventListener("click",this.hideSelect,!0),window.addEventListener("contextmenu",this.hideSelect,!0)):(window.removeEventListener("click",this.hideSelect,!0),window.removeEventListener("contextmenu",this.hideSelect,!0))}},beforeDestroy:function(){window.removeEventListener("click",this.hideSelect,!0),window.removeEventListener("contextmenu",this.hideSelect,!0)},data:function(){return{exportBgTabVisible:!1}},props:{node:Object,exportPdfOnly:Boolean}},KS=XS,qS=(n("d3aa"),Object(Dr["a"])(KS,zS,YS,!1,null,"251d5015",null)),JS=qS.exports;function QS(t,e){if(Object(l["k"])(t)){var n=t.exportNodes;Object(l["i"])(n)&&(e=!!e,n.forEach((function(t){t.mlUserSelectDown=e})))}}var ZS={components:{Header:WS,ExportNodeItem:JS,PropertyDownloadOptions:rC,Select:vu,LazyList:Ru},methods:{setJpgQuality:function(t){t>0&&t<=100&&(this.jpgQuality=t,Object(c["rb"])(D,t))},onPlatformSelectChanged:function(t){Object(l["k"])(t)&&(this.downloadPlatform=t.value)},onResTypeSelectChanged:function(t){Object(l["k"])(t)&&this.clickCurrentResType(t.value)},clickCurrentResType:function(t){switch(t){case a["fb"].PNG:if(!this.exportPng)return void this.showTextTip("设计狮没有为该画板导出「PNG」格式的切图");break;case a["fb"].WEBP:if(!this.exportWebP)return void this.showTextTip("设计狮没有为该画板导出「WEBP」格式的切图");break;case a["fb"].SVG:if(!this.exportSvg)return void this.showTextTip("设计狮没有为该画板导出「SVG」格式的切图");break;case a["fb"].PDF:if(!this.exportPfd)return void this.showTextTip("设计狮没有为该画板导出「PDF」格式的切图");break;case a["fb"].JPG:break}this.currentResType=t,Object(c["rb"])("resType",t)},clickDownSelectAll:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.exportNodeCount){e.next=3;break}return t.showTextTip("当前画板不存在切图"),e.abrupt("return");case 3:if(t.setInOutput(!0),e.prev=4,!t.currentResInPdf){e.next=10;break}return e.next=8,oo(t.selectNodes,t.curArtboard,t.inCloudViewerArtboardInfoMode);case 8:e.next=22;break;case 10:if(!t.currentResInSvg){e.next=15;break}return e.next=13,co(t.selectNodes,t.curArtboard,t.inCloudViewerArtboardInfoMode);case 13:e.next=22;break;case 15:if(!t.currentResInJpg){e.next=20;break}return e.next=18,Oo(t.downloadPlatform,t.androidUseMipmap,t.$refs.downOptions.checkSetting,t.selectNodes,t.curArtboard,t.jpgQuality/100,t.inCloudViewerArtboardInfoMode);case 18:e.next=22;break;case 20:return e.next=22,Io(t.downloadPlatform,t.androidUseMipmap,t.$refs.downOptions.checkSetting,t.selectNodes,t.curArtboard,t.currentResInWebP,t.inCloudViewerArtboardInfoMode);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](4),t.showTextTip(e.t0);case 27:return e.prev=27,t.setInOutput(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[4,24,27,30]])})))()},initJpgQuality:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["K"])(D,!1));(isNaN(e)||e<1||e>=100)&&(e=L),this.jpgQuality=e}},initCurrentResType:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["K"])("resType",!1));(isNaN(e)||!isFinite(e)||e!==a["fb"].SVG&&e!==a["fb"].PDF&&e!==a["fb"].WEBP&&e!==a["fb"].JPG)&&(e=a["fb"].PNG);var n=this.curArtboardLoadedVerData.mlConfig.resType;n||(n=a["fb"].PNG);var r=this.exportPng,i=this.exportSvg,o=this.exportWebP,s=this.exportPdf;switch(e){case a["fb"].PNG:r||(o?e=a["fb"].WEBP:i?e=a["fb"].SVG:s&&(e=a["fb"].PDF));break;case a["fb"].SVG:i||(r?e=a["fb"].PNG:o?e=a["fb"].WEBP:s&&(e=a["fb"].PDF));break;case a["fb"].PDF:s||(r?e=a["fb"].PNG:o?e=a["fb"].WEBP:i&&(e=a["fb"].SVG));break;case a["fb"].WEBP:o||(r?e=a["fb"].PNG:i?e=a["fb"].SVG:s&&(e=a["fb"].PDF));break;case a["fb"].JPG:r||i||o||s||(e=a["fb"].PNG);break}this.currentResType=e}}},computed:{sliceScrollNode:function(){return this.artboardDetail.sliceScrollNode},artboardDetail:function(){return this.$store.state.artboardDetail},platformSelectOptions:function(){return[{name:"Web",value:a["c"].WEB,selected:this.downloadPlatform===a["c"].WEB},{name:"Android",value:a["c"].ANDROID,selected:this.downloadPlatform===a["c"].ANDROID},{name:"iOS",value:a["c"].IOS,selected:this.downloadPlatform===a["c"].IOS},{name:"微信小程序",value:a["c"].WE_CHAT_MINI_PROGRAM,selected:this.downloadPlatform===a["c"].WE_CHAT_MINI_PROGRAM}]},resTypeSelectOptions:function(){var t=this.currentResType,e={value:a["fb"].PNG,name:"PNG",selected:t===a["fb"].PNG,disabled:!this.exportPng},n={value:a["fb"].WEBP,name:"WEBP",selected:t===a["fb"].WEBP,disabled:!this.exportWebP},r={value:a["fb"].SVG,name:"SVG",selected:t===a["fb"].SVG,disabled:!this.exportSvg},i={value:a["fb"].PDF,name:"PDF",selected:t===a["fb"].PDF,disabled:!this.exportPdf},o={value:a["fb"].JPG,name:"JPG",selected:t===a["fb"].JPG,disabled:!1};return[e,n,r,i,o]},exportWebP:function(){return Object(c["ab"])(this.curArtboardLoadedVerData)},exportPng:function(){return Object(c["Y"])(this.curArtboardLoadedVerData)},exportSvg:function(){return Object(c["Z"])(this.curArtboardLoadedVerData)},exportPdf:function(){return Object(c["X"])(this.curArtboardLoadedVerData)},exportSvgOnly:function(){return this.exportSvg&&!this.exportPng&&!this.exportWebP},exportPdfOnly:function(){return this.exportPdf&&!this.exportSvg&&!this.exportPng&&!this.exportWebP},currentResInPdf:function(){return this.currentResType===a["fb"].PDF},currentResInSvg:function(){return this.currentResType===a["fb"].SVG},currentResInJpg:function(){return this.currentResType===a["fb"].JPG},currentResInWebP:function(){return this.currentResType===a["fb"].WEBP},selectNodes:function(){var t=this.curArtboard.exportNodes,e=[];return t.forEach((function(t){t.markedForExport&&t.mlUserSelectDown&&e.push(t)})),e},exportNodeCount:function(){var t=this.curArtboard.exportNodes;return t.length}},watch:{sliceScrollNode:function(t){var e=this;t&&(this.artboardDetail.sliceScrollNode=null,this.$nextTick((function(){var n,r;null===(n=e.$refs.lazyList)||void 0===n||null===(r=n.scrollTo)||void 0===r||r.call(n,(function(e){return e===t}))})))},currentResType:function(){var t,e;null===(t=this.$refs.lazyList)||void 0===t||null===(e=t.resetBoxData)||void 0===e||e.call(t)},inMultDownMode:function(t){t&&(this.downloadPlatform=this.calcPlatformUse,QS(this.curArtboard,t),this.initCurrentResType(),this.initJpgQuality())},calcPlatformUse:function(t){this.downloadPlatform=t},curArtboard:function(t,e){QS(e,!1),this.inMultDownMode&&QS(t,!0),this.initCurrentResType(),this.initJpgQuality()}},data:function(){return{currentResType:a["fb"].PNG,jpgQuality:L,CALC_PLATFORM_TYPE:a["c"],downloadPlatform:a["c"].WEB}},created:function(){this.downloadPlatform=this.calcPlatformUse,this.inMultDownMode&&QS(this.curArtboard,!0),this.initCurrentResType(),this.initJpgQuality()}},tT=ZS,eT=(n("866c"),Object(Dr["a"])(tT,MS,LS,!1,null,"3e945d2f",null)),nT=eT.exports,rT={components:{Properties:YC,MultDownload:nT,CommentMain:_S},methods:{clickNavProperty:function(){if(this.clickNav(a["U"].Property),null==this.curNode){var t,e=null===(t=this.curArtboard)||void 0===t?void 0:t.artboard;e&&this.setCurNode(e)}},clickNavComment:function(){this.clickNav(a["U"].Comment)},clickNavSlice:function(){this.clickNav(a["U"].Slice)},clickNav:function(t){this.$store.commit("setRightNavType",t),this.propertyVisible&&t===a["U"].Property&&this.$store.commit("setRightNavTypePropertyClicked")}},computed:{multDownloadCount:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e||null===(e=e.exportNodes)||void 0===e?void 0:e.length)&&void 0!==t?t:0},commentCount:function(){var t,e=null===(t=this.curArtboard)||void 0===t?void 0:t.artboard;if(!e)return 0;var n=e.comments+e.replies;return isNaN(n)?0:n},commentVisible:function(){return this.artboardInComment&&this.$store.state.artboardCommentVisible},propertyVisible:function(){return null!=this.curNode&&this.$store.state.rightNavType===a["U"].Property},multDownloadVisible:function(){return this.inMultDownMode&&this.curArtboard},visible:function(){return this.commentVisible||this.propertyVisible||this.multDownloadVisible}}},iT=rT,oT=(n("5610"),Object(Dr["a"])(iT,Ox,Ix,!1,null,"66459443",null)),aT=oT.exports,sT={components:{ZoomContainer:Ks,LeftSide:Tx,RightSide:aT},methods:{clickReload:function(){window.location.reload()},checkArtboardData:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,a,s,u,d,h,f,m,p,v;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return i=!0,Object(l["k"])(t)&&!1===t.isLoaded&&(i=!1),n.next=7,Re(t,e.documentArtboards);case 7:o=n.sent,!i&&o.isLoaded&&(a=o.artboard,Object(l["k"])(a)&&(s=a.mlConfig,Object(l["k"])(s)&&"number"===typeof s.platform&&(u=Object(c["G"])(a.docGuid,s.platform),e.$store.commit("setPlatform",u),d=Object(c["U"])(a.docGuid),e.$store.commit("setUnitTemplate",d)),h=c["V"].initNodeGuid,h?(c["V"].initNodeGuid=null,f=o.childs.find((function(t){return t.guid===h})),f&&e.curNode!==f&&e.setCurNode(f)):e.curNode&&(p=e.curNode.guid,v=null!==(m=o.childs.find((function(t){return p===(null===t||void 0===t?void 0:t.guid)})))&&void 0!==m?m:null,e.setCurNode(v))));case 9:case"end":return n.stop()}}),n)})))()}},watch:{pathDataUpdateTimeTimes:function(t){t&&this.checkArtboardData(this.curArtboard).catch((function(t){}))}},computed:{autoIntoInfo:function(){return this.$store.state.autoIntoInfo},verDataWillBeFirstLoad:function(){var t,e,n=this.autoIntoInfo,r=n.commentArtboardId,i=n.commentId,o=this.inCloudMode,a=this.curArtboard;if(!o)return!1;if(i<1||r<1)return!1;if(!a)return!1;var s=null!==(t=null===(e=a.artboard)||void 0===e?void 0:e.cid)&&void 0!==t?t:0;return r===s},pathDataUpdateTimeTimes:function(){var t=this.pathData,e=this.updateTimeTimes;return t?"".concat(t,"-").concat(e):null},backgroundColor:function(){return this.$store.state.artboardDetail.interactionSet.backgroundColor},EnumScaleType:function(){return a["V"]},isLoaded:function(){return this.curArtboard.isLoaded},isFetching:function(){return this.curArtboard.isFetching||this.verDataWillBeFirstLoad},isError:function(){return this.curArtboard.isError},updateTimeTimes:function(){var t,e;return null!==(t=null===(e=this.loadedArtboard)||void 0===e?void 0:e.updateTimeTimes)&&void 0!==t?t:0},pathData:function(){var t,e;return null!==(t=null===(e=this.loadedArtboard)||void 0===e?void 0:e.pathData)&&void 0!==t?t:""},loadedArtboard:function(){var t=this.curArtboard,e=this.inCloudViewerArtboardInfoMode;return To(t,e)}},created:function(){this.checkArtboardData(this.curArtboard)}},cT=sT,lT=(n("391d"),Object(Dr["a"])(cT,Zw,tx,!1,null,"4543613c",null)),uT=lT.exports,dT=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"pop-box webp-tip"},[e("div",{staticClass:"box"},[e("h4",[t._v("浏览器性能提示")]),e("p",{domProps:{textContent:t._s("Safari浏览器可能会出现响应卡顿".concat(t.supportWebp?"":"及WebP资源无法加载",",建议使用Chrome、Firefox浏览器访问."))}}),e("div",{staticClass:"footer"},[e("div",[e("a",{staticClass:"checkbox",class:{on:t.remember},attrs:{href:"javascript:;"},on:{click:function(e){t.remember=!t.remember}}},[e("i",[t._v("浏览器关闭前不再提示")])])]),e("div",[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickConfirm()}}},[t._v("我知道了")])])])])]):t._e()},hT=[],fT="safari_webp_notip",mT={methods:{clickConfirm:function(){this.remember&&Object(c["tb"])(fT,"1"),this.visible=!1},checkWebPSupport:function(){var t=this;clearTimeout(this.handle),this.handle=setTimeout((function(){t._checkWebPSupport()}),100)},_checkWebPSupport:function(){var t=this;if(this.inCloudMode&&this.allArtboardLoadChecked){var e="1"===Object(c["S"])(fT,!1);e||On((function(e){var n=t.supportWebp=e===In.Support;Fn&&!n?t.visible=!0:e===In.Support&&Object(c["tb"])(fT,"1")}))}}},computed:{allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked}},watch:{allArtboardLoadChecked:function(){this.checkWebPSupport()},inCloudMode:function(){this.checkWebPSupport()}},data:function(){return{visible:!1,remember:!1,handle:0,supportWebp:!1}},beforeDestroy:function(){clearTimeout(this.handle)},created:function(){this.checkWebPSupport()}},pT=mT,vT=(n("bda1"),Object(Dr["a"])(pT,dT,hT,!1,null,"ccf18164",null)),bT=vT.exports,gT={components:{BeginnerGuide:Br,EmptyData:zw,ArtboardList:Qw,ArtboardInfo:uT,Header:Dw,Tip:iu,ArtboardListItemMenu:Ql,InOutputTip:gh,Authority:Bw,FolderNav:hh,CloudNeedLoginTip:zl,SafariWebpTip:bT,ImageViewer:Zs,NetDiskFileMain:Bl,AutomaticSync:Xr,ChangeArtboardsTip:ti},computed:{emptyText:function(){if(this.inCloudMode){if(0===this.cloudCurrentFolderId)return"私有云下还没有文件夹,请在标记狮中添加";if(this.inNetDiskFileMode){var t=this.curFileInfo;if(!t)return"文件不存在,可能已经被移动或删除";var e=t.curVerId,n=t.inVerData,r=t.name;return n?"文件「".concat(r,"」不存在版本 #").concat(e,",请通过右上角的版本列表菜单切换文件版本"):"文件不存在,可能已经被移动或删除"}return"当前文件夹是空的"}return"未检测到数据,请尝试重新导出画板"},artboardLoadProgressText:function(){return Math.floor(1e4*this.artboardLoadProgress.current/this.artboardLoadProgress.count)/100+"%"},artboardLoadProgress:function(){return this.$store.state.artboardLoadProgress},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},isEmptyArtboardData:function(){return this.inNetDiskFileMode?null==this.curFileInfo:0===this.documentArtboards.length},isEmptyFolder:function(){return this.isEmptyArtboardData&&0===this.cloudSubFiles.length&&0===this.cloudSubFolders.length}},watch:{cloudCurrentFolderId:function(){Pc.clear(150)},curArtboard:function(){var t=this;this.checkUserState().then((function(e){t.$store.commit("setMyState",e)})).catch((function(){}))}}},wT=gT,xT=(n("56f5"),Object(Dr["a"])(wT,Or,Ir,!1,null,"16359607",null)),yT=xT.exports,kT=!1;function CT(){var t=Object(c["K"])("evmu",!1);return Object(l["j"])(t)&&32===t.length||(t=Object(c["B"])(32,16),Object(c["rb"])("evmu",t)),t}function ST(){var t,e;if(!kT&&(kT=!0,gn&&!gn.inCloudMode)){var n=c["V"].config,r=n.guid,i=n.softVer,o=c["V"].fileType,a={ver:i,type:o,f:r.replace(/-/gi,""),u:CT(),ot:null!==(t=null===(e=gn.documentArtboards.find((function(t){var e;return(null===t||void 0===t||null===(e=t.artboard)||void 0===e?void 0:e.mlOutputTime)>0})))||void 0===e?void 0:e.artboard.mlOutputTime)&&void 0!==t?t:0};if(!(a.ot<1)){var s="evmu".concat(a.type).concat(a.f).concat(a.ot),l=+Object(c["S"])(s,!1);if(!isNaN(l)&&l>0){var u=Math.abs(Date.now()-l);if(u>=0&&u<36e5)return}Object(c["tb"])(s,Date.now().toString());var d=new URLSearchParams(a),h=new Image,f=function(){h.onload=h.onerror=null,h.removeAttribute("src")};h.onload=h.onerror=f,h.src="".concat("https://log.marklion.cn","/st/?").concat(d.toString())}}}function TT(){try{return ST()}catch(t){}}function OT(t,e){return IT.apply(this,arguments)}function IT(){return IT=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,s,l;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=+Object(c["kb"])("commentid","#"),s="1"===Object(c["kb"])("isreply","#"),e().then((function(){c["V"].inCloudMode?function(){try{var t=Sr.state;if(gn.cloud.renderMode==a["W"].File)return void(t.cloud.allFoldersBoxVisible=!1);t.cloud.allFoldersBoxVisible="1"===Object(c["S"])(a["f"],!1),kt(t.documentArtboards);var e=t.cloud.defaultArtboardGuid,r=null,o=null;if(e){if(r=gn.documentArtboards.find((function(t){return t.artboard.guid===e})),r){var l=window.location.href,u=/\/viewer\/\d+\/[^\\/]+\/([^\\/]+)\//i.exec(l),d=u?decodeURIComponent(u[1]):null;o=r.childs.find((function(t){return t.guid===d})),o||(c["V"].initNodeGuid=d)}if(t.curArtboard!==r&&Sr.commit("curArtboard",{artboard:r}),t.curNode!=o&&(Sr.commit("curNode",o),Sr.commit("setRightNavType",a["U"].Property)),i>0){var h,f,m=t.autoIntoInfo;m.commentArtboardId=null!==(h=null===(f=r)||void 0===f||null===(f=f.artboard)||void 0===f?void 0:f.cid)&&void 0!==h?h:0,m.commentId=i,m.isReply=s,Sr.commit("setRightNavType",a["U"].Comment)}}n()}finally{Sr.commit("allArtboardLoadChecked",!0)}}():function(){var t=function(){var t=window.location.hash,e=null,n=null;if(t){var r=/\/artboard\/([^\\/]+)/i.exec(t);if(r){var i=r[1];e=gn.documentArtboards.find((function(t){return t.artboard.guid===i}))}if(e&&(r=/\/node\/([^\\/]+)/i.exec(t),r)){var o=r[1],a=e.childs;n=a.find((function(t){return t.guid===o}))}}Sr.state.curArtboard!==e&&Sr.commit("curArtboard",{artboard:e}),Sr.state.curNode!==n&&Sr.commit("curNode",n)};window.addEventListener("hashchange",t),t(),setTimeout((function(){Sr.commit("allArtboardLoadChecked",!0),TT()}),100)}()})),l=new o["a"]({store:Sr,render:function(t){return t(yT)}}),On((function(t){Sr.commit("isSupportWebp",t),l.$mount("#app")}));case 5:case"end":return t.stop()}}),t)}))),IT.apply(this,arguments)}var AT=function(){var t=this,e=t._self._c;return e("section",{class:{"header-off":!t.headerVisible},attrs:{id:"main"}},[!t.cloudNeedLogin||t.cloudIsLogin?e("div",{staticClass:"loading",class:{on:!t.allArtboardLoadChecked}},[t._v("正在加载画板数据中("+t._s(t.artboardLoadProgressText)+"),请稍后...")]):t._e(),t.cloudNeedLogin&&!t.cloudIsLogin?e("CloudNeedLoginTip"):t.allArtboardLoadChecked?[e("Header"),e("a",{staticClass:"btn-visible-pop",attrs:{href:"javascript:;",title:t.headerVisibleTitle},on:{click:t.clickHeaderVisible}}),e("main",{style:{backgroundColor:t.backgroundColor}},[t.cloudFolderNotFound?e("EmptyData",{attrs:{text:t.cloudFolderErrorText,showLoginBtn:t.cloudFolderInSpecify}}):t.permission?t.isEmptyArtboardData?e("EmptyData",{attrs:{text:t.emptyText}}):[e("LeftSide")]:e("Authority"),e("device-container")],2)]:t._e(),e("Tip"),e("AutomaticSync")],2)},FT=[],jT=function(){var t=this,e=t._self._c;return e("section",{staticClass:"left-side-pc",class:{on:t.leftSideVisible}},[e("div",{staticClass:"btn-leftside-visible",class:{on:t.leftSideVisible,off:!t.headerVisible},attrs:{title:t.leftSideVisible?"收起左侧(F3)":"展开左侧(F3)"},on:{click:function(e){return t.setVisible(!t.visible)}}}),e("div",{staticClass:"filter"},[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText.artboard,expression:"searchText.artboard"}],ref:"input",attrs:{type:"text",placeholder:"搜索画板名",spellcheck:"false"},domProps:{value:t.searchText.artboard},on:{input:function(e){e.target.composing||t.$set(t.searchText,"artboard",e.target.value)}}}),t.searchText.artboard?e("span",{staticClass:"btn-clear",on:{click:t.clickClearInpout}}):t._e()]),e("LeftSideFlows")],1),e("section",{staticClass:"box"},[e("ArtboardList",{attrs:{visible:!0,list:t.renderDocumentArtboards,renderArtboardList:t.renderArtboardList,sliceFilterOpen:t.sliceFilterOpen}})],1)])},_T=[],MT=[],LT={toggleFullscreen:function(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()},isFullscreen:function(){var t=!0===document.fullscreen||null!=document.fullscreenElement||null!=document.msFullscreenElement||null!=document.mozFullscreenElement||null!=document.webkitFullscreenElement;return t||(t=screen.height==Math.max(window.outerHeight,window.innerHeight)&&screen.width==Math.max(window.outerWidth,window.innerWidth),t)},requestFullscreen:function(){var t=document.documentElement,e=t.requestFullscreen||t.webkitRequestFullscreen||t.msRequestFullscreen||t.mozRequestFullscreen;try{e&&e.call(t).catch((function(){}))}catch(n){}},exitFullscreen:function(){var t=document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen||document.mozExitFullscreen;t&&t.call(document)},onChange:function(t){if("function"===typeof t){var e=MT.findIndex((function(e){return e===t}));-1===e&&MT.push(t)}},offChange:function(t){if("function"===typeof t){var e=MT.findIndex((function(e){return e===t}));-1!==e&&MT.splice(e,1)}}};function DT(){if(0!=MT.length){var t=LT.isFullscreen();MT.forEach((function(e){try{e(t)}catch(n){console.error(n)}}))}}document.addEventListener("webkitfullscreenchange",DT),document.addEventListener("mozfullscreenchange",DT),document.addEventListener("msfullscreenchange",DT),document.addEventListener("fullscreenchange",DT),window.addEventListener("resize",DT);var PT=function(){var t=this,e=t._self._c;return e("div",{staticClass:"leftside-flows"},[e("div",{staticClass:"btn-flows",attrs:{title:t.visible?"起始画板(Flows)":"当前没有配置起始画板"},on:{click:t.clickBtnFlows}}),t.visible?e("menu",t._l(t.homeList,(function(n){return e("div",{key:"".concat(n.artboard.cid?n.artboard.cid:n.artboard.guid),attrs:{title:"切换到起始画板[".concat(n.artboard.name,"]")},domProps:{textContent:t._s(n.artboard.name)},on:{click:function(e){return t.clickArtboard(n)}}})})),0):t._e()])},NT=[],ET={methods:{clickBtnFlows:function(){var t=this.homeList;0!==t.length||this.showTextTip("当前没有配置起始画板")},clickArtboard:function(t){t&&(this.setCurArtboard(t),this.showTextTip("已切换到起始画板"))}},computed:{visible:function(){return this.homeList.length>0},homeList:function(){var t=this.renderDocumentArtboards;return t.filter((function(t){var e;return null===(e=t.artboard)||void 0===e?void 0:e.flowStart}))}}},RT=ET,VT=(n("b547"),Object(Dr["a"])(RT,PT,NT,!1,null,"52c44f43",null)),BT=VT.exports,HT={components:{ArtboardList:yx,LeftSideFlows:BT},methods:{clickClearInpout:function(){var t=this,e=this.searchText;e.artboard="",requestAnimationFrame((function(){var e,n;null===(e=t.$refs.input)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e)}))},quickKeyShift:function(t){this.shiftKey=t.shiftKey},quickKey:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,a,s,c;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.quickKeyShift(t),i=t.keyCode||t.which,n.t0=i,n.next=112===n.t0||122===n.t0?5:113===n.t0?8:114===n.t0?11:38===n.t0||40===n.t0?14:48;break;case 5:return LT.toggleFullscreen(),t.preventDefault(),n.abrupt("break",48);case 8:return e.$store.commit("setInteractionHeaderVisible",!e.headerVisible),t.preventDefault(),n.abrupt("break",48);case 11:return e.setVisible(!e.visible),t.preventDefault(),n.abrupt("break",48);case 14:if(!e.keydownConfirming){n.next=16;break}return n.abrupt("return");case 16:if(!e.imageViewer.visible){n.next=18;break}return n.abrupt("return");case 18:if(o=38===i?-1:1,a=t.ctrlKey||t.metaKey,a){n.next=22;break}return n.abrupt("break",48);case 22:if(s=e.renderArtboardList,0!==s.length){n.next=26;break}return e.showTextTip(1===o?"已经到达最后一个画板":"已经到达第一个画板"),n.abrupt("return");case 26:if(c=s.findIndex((function(t){return e.curArtboard===t})),-1===c?c=0:c+=o,!(c<0)){n.next=33;break}return e.showTextTip("已经到达第一个画板"),n.abrupt("return");case 33:if(!(c>=s.length)){n.next=36;break}return e.showTextTip("已经到达最后一个画板"),n.abrupt("return");case 36:if(!e.inCommentDrawing){n.next=46;break}return e.keydownConfirming=!0,n.prev=38,n.next=41,e.confirm({text:"正在编辑画板截图,是否清理截图信息并切换画板?"});case 41:if(n.sent){n.next=43;break}return n.abrupt("return");case 43:return n.prev=43,e.keydownConfirming=!1,n.finish(43);case 46:return e.setCurArtboard(s[c]),n.abrupt("break",48);case 48:case"end":return n.stop()}}),n,null,[[38,,43,46]])})))()},getArtboardExportNodeCount:function(t){if(this.inCloudMode)return t.artboard.resNodeCount;var e=t.exportNodes;return e.length},setVisible:function(t){if(!this.headerVisible)return this.$store.commit("setInteractionHeaderVisible",!0),void this.$store.commit("leftSideVisible",!0);this.$store.commit("leftSideVisible",t)}},computed:{leftSideVisible:function(){return this.visible&&this.headerVisible},headerVisible:function(){return this.$store.state.artboardDetail.interactionSet.headerVisible},imageViewer:function(){return this.$store.state.imageViewer},renderArtboardList:function(){var t=this,e=this.artboardSearchText,n=this.sliceFilterOpen,r=this.renderDocumentArtboards,i=""!==e,o=[];return r.forEach((function(r){if(r&&r.artboard&&(!n||0!==t.getArtboardExportNodeCount(r))){if(i){var a=r.artboard.name;if(!a)return;if(-1===a.toLowerCase().indexOf(e))return}o.push(r)}})),o},artboardSearchText:function(){return this.searchText.artboard.toLowerCase()},visible:function(){return this.$store.state.artboardDetail.leftSideVisible}},data:function(){return{keydownConfirming:!1,preloadCount:2,shiftKey:!1,sliceFilterOpen:!1,commentFilterOpen:!1,searchText:{artboard:""}}},created:function(){window.addEventListener("keydown",this.quickKey),window.addEventListener("keyup",this.quickKeyShift)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey),window.removeEventListener("keyup",this.quickKeyShift)}},UT=HT,$T=(n("bf12"),Object(Dr["a"])(UT,jT,_T,!1,null,"4ea8fcf7",null)),GT=$T.exports,WT=function(){var t=this,e=t._self._c;return e("header",[e("div",{staticClass:"nav"},[e("PathNav")],1),e("device-set"),e("div",{staticClass:"preview-set"},[e("a",{staticClass:"btn-fullscreen",class:{on:t.isFullscreen},attrs:{href:"javascript:;",title:t.isFullscreen?"退出全屏(F1)":"全屏查看(F1)"},on:{click:t.clickFullscreen}}),e("BtnContainerColor"),e("BtnContainerVerticalAlign"),e("div",{staticClass:"line"}),e("div",{staticClass:"helper",class:{on:t.helperVisible},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickHelper(!t.helperVisible)}}},[e("Helper")],1),t.inCloudMode?e("BtnGoInteraction",{attrs:{fixRight:!t.cloudIsLogin}}):t._e(),t.inCloudMode&&t.cloudIsLogin?e("UserNotifyButton"):t._e(),t.inCloudMode?e("UserInfo",{attrs:{setVisible:t.setVisible}}):t._e()],1),t.inCloudMode?e("UserNotify"):t._e()],1)},zT=[],YT=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav-item"},[e("div",{staticClass:"name",attrs:{title:t.folderName},on:{click:t.clickNav}},[t._v(t._s(t.folderName))]),t.showArtboardPages?e("PathNavArtboardPages"):t._e()],1)},XT=[],KT={components:{PathNavArtboardPages:eb},methods:{clickNav:function(){Object(c["W"])(this.cloudCurrentFolderId)}},computed:{folderName:function(){var t=this.cloudName,e=this.cloudCurrentFolderId,n=this.cloudFolderNotFound,r=this.documentName,i=this.cloudFolderInSpecify;return 0===e?t||"私有云根目录":i?"没有访问权限":n?"链接已失效":r},showArtboardPages:function(){return this.documents.length>0}}},qT=KT,JT=(n("2d5e"),Object(Dr["a"])(qT,YT,XT,!1,null,"8bade1e6",null)),QT=JT.exports,ZT=function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn-container-vertical-align",class:Object(M["a"])(Object(M["a"])({},t.verticalAlignCss,1),"off",t.isWeb),attrs:{title:"在移动设备模拟中，当画板无法垂直完全覆盖屏幕时，画板的垂直对齐方式"},on:{click:t.clickVerticalAlign}})},tO=[],eO={methods:{clickVerticalAlign:function(){var t,e=this.verticalAlign,n=this.isWeb;if(n)this.showTextTip("Web模式下,无法调整画板的垂直对齐方式");else{var r=Object(M["a"])(Object(M["a"])(Object(M["a"])({},a["H"].Top,a["H"].Middle),a["H"].Middle,a["H"].Bottom),a["H"].Bottom,a["H"].Top),i=null!==(t=r[e])&&void 0!==t?t:a["H"].Middle;this.$store.commit("setInteractionArtboardVerticalAlign",i),this.showTextTip("已修改画板的对齐方式为「".concat(a["H"].getName(i),"」"))}}},computed:{isWeb:function(){return this.pcDeviceSet.type===Dn.Web},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet},verticalAlignCss:function(){switch(this.verticalAlign){case a["H"].Bottom:return"align-bottom";case a["H"].Top:return"align-top";default:return"align-middle"}},verticalAlign:function(){return this.$store.state.artboardDetail.interactionSet.verticalAlign}}},nO=eO,rO=(n("2f1e"),Object(Dr["a"])(nO,ZT,tO,!1,null,"025ea616",null)),iO=rO.exports,oO=function(){var t=this,e=t._self._c;return e("div",{staticClass:"device-set"},[e("div",{staticClass:"device-name"},[e("div",{staticClass:"cur-text",class:{on:t.boxVisible},on:{click:function(e){t.boxVisible=!t.boxVisible}}},[t._v(t._s(t.pcDeviceSet.name))]),t.boxVisible?e("div",{staticClass:"device-list"},t._l(t.interactionDeviceList,(function(n,r){return e("div",{key:r,staticClass:"device-item",class:{web:n.type===t.InteractionDeviceType.Web}},[e("div",{staticClass:"text",class:{on:t.pcDeviceSet.name===n.name},on:{click:function(e){return t.clickDevice(n)}}},[t._v(t._s(n.name))]),n.type===t.InteractionDeviceType.Group?e("div",{staticClass:"device-sublist"},t._l(n.list,(function(n,i){return e("div",{key:"".concat(r,"-").concat(i),staticClass:"device-subitem"},[e("div",{staticClass:"subtext",class:{on:t.pcDeviceSet.name===n.name},on:{click:function(e){return t.clickDevice(n)}}},[t._v(t._s(n.name)+" ("+t._s(n.width)+" × "+t._s(n.height)+")")])])})),0):t._e()])})),0):t._e()]),e("div",{staticClass:"device-size",class:{off:!t.showDeviceSize}},[e("input",{attrs:{type:"number",readonly:!t.canChangeDeviceSize},domProps:{value:t.pcDeviceSet.width},on:{blur:function(e){return t.blurDeviceSize(e,"width")}}}),e("div",{staticClass:"split"},[t._v("x")]),e("input",{attrs:{type:"number",readonly:!t.canChangeDeviceSize},domProps:{value:t.pcDeviceSet.height},on:{blur:function(e){return t.blurDeviceSize(e,"height")}}})]),e("a",{staticClass:"btn-use-horizontal",class:{off:!t.showUseHorizontal},attrs:{href:"javascript:;",title:"切换横竖屏"},on:{click:t.clickHorizontal}})])},aO=[],sO={methods:{blurDeviceSize:function(t,e){if(this.canChangeDeviceSize){var n=this.pcDeviceSet,r=+t.target.value;isNaN(r)?t.target.value=n[e]:(r<100&&(r=100,t.target.value=r),n[e]=r)}},clickHorizontal:function(){var t=this.pcDeviceSet,e=t.height,n=t.width;this.setPCDeviceSet({isHorizontal:!this.isHorizontal,width:e,height:n})},clickDevice:function(t){if(Object(l["k"])(t))switch(t.type){case Dn.Group:return void(this.notCloseThisTime=!0);case Dn.Web:case Dn.Mobile:return void this.setPCDeviceSet(t);case Dn.Custom:var e=this.pcDeviceSet,n={width:0===e.width?375:Math.max(e.width,100),height:0===e.height?667:Math.max(e.height,100)};return n.type=Dn.Custom,n.name=t.name,n.hasBangs=!1,n.iosDynamicIsland=!1,void this.setPCDeviceSet(n)}},setPCDeviceSet:function(t){this.$store.commit("setPCDeviceSet",t)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.boxHandle),this.boxHandle=setTimeout((function(){e.notCloseThisTime?e.notCloseThisTime=!1:e.boxVisible=!1}),100))}},watch:{boxVisible:function(t){t?(clearTimeout(this.boxHandle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},computed:{isHorizontal:function(){return this.pcDeviceSet.isHorizontal},canChangeDeviceSize:function(){switch(this.pcDeviceSet.type){case Dn.Custom:return!0}return!1},showDeviceSize:function(){switch(this.pcDeviceSet.type){case Dn.Custom:return!0}return!1},showUseHorizontal:function(){switch(this.pcDeviceSet.type){case Dn.Mobile:case Dn.Custom:return!0}return!1},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet}},data:function(){return{interactionDeviceList:Nn,InteractionDeviceType:Dn,boxVisible:!1,boxHandle:0,notCloseThisTime:!1}},created:function(){0},beforeDestroy:function(){window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)}},cO=sO,lO=(n("5026"),Object(Dr["a"])(cO,oO,aO,!1,null,"4fd5aadd",null)),uO=lO.exports,dO={components:{PathNav:QT,BtnContainerColor:Oh,BtnContainerVerticalAlign:iO,DeviceSet:uO,UserNotifyButton:dw,UserNotify:Sw,UserInfo:ow,Helper:ov,BtnGoInteraction:sm},methods:{clickHelper:function(t){this.$store.commit("setHelperVisible",t)},clickFullscreen:function(){LT.toggleFullscreen()},onFullscreen:function(t){this.isFullscreen=t}},computed:{helperVisible:function(){return this.$store.state.helper.visible},setVisible:function(){return!this.cloudFolderNotFound&&this.permission&&this.documentArtboards.length>0}},data:function(){return{isFullscreen:LT.isFullscreen()}},beforeDestroy:function(){LT.offChange(this.onFullscreen)},created:function(){LT.onChange(this.onFullscreen)}},hO=dO,fO=(n("04d2"),Object(Dr["a"])(hO,WT,zT,!1,null,"1dc3d4b0",null)),mO=fO.exports,pO=function(){var t=this,e=t._self._c;return e("div",{staticClass:"device-container",class:{"margin-left":t.leftSideVisible,pc:t.isWeb,mobile:!t.isWeb}},[e("div",{staticClass:"device-ui"},[t.isWeb?t._e():e("div",{staticClass:"device-border"},[t.pcDeviceSet.hasBangs?e("div",{staticClass:"device-bangs",class:{horizontal:t.isHorizontal}}):t.pcDeviceSet.iosDynamicIsland?e("div",{staticClass:"device-ios-dynamic-island",class:{horizontal:t.isHorizontal}}):t._e(),e("div",{staticClass:"device-top-left"}),e("div",{staticClass:"device-top-center"}),e("div",{staticClass:"device-top-right"}),e("div",{staticClass:"device-middle-left"}),e("div",{staticClass:"device-middle-right"}),e("div",{staticClass:"device-bottom-left"}),e("div",{staticClass:"device-bottom-center"}),e("div",{staticClass:"device-bottom-right"})]),e("device-box")],1)])},vO=[],bO=function(){var t=this,e=t._self._c;return e("div",{staticClass:"device-box",style:t.boxStyle,on:{click:t.clickDeviceBox}},t._l(t.renderList,(function(t){return e("InteractionArtboardItem",{key:t.key,attrs:{artboard:t.artboard,overlayArtboards:t.overlayArtboards,renderTapInteraction:t.renderTapInteraction,overlayVisible:t.overlayVisible}})})),1)},gO=[],wO=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"interaction-artboard-item",class:t.itemCls,style:t.itemStyle,attrs:{"data-unset-control":t.rootSize?"1":""},on:{dragstart:function(t){t.preventDefault()},"!touchstart":function(e){return t.onTouchStart.apply(null,arguments)},"!mousedown":function(e){return t.onMouseDown.apply(null,arguments)},click:function(e){return e.target!==e.currentTarget?null:t.clickArtboardItemSelf.apply(null,arguments)}}},[t.itemOverlayStyle?e("div",{staticClass:"artboard-overlay-background",style:t.itemOverlayStyle}):t._e(),e("div",{ref:"artboardScrollBox",staticClass:"artboard-content-scroll",class:Object(M["a"])({"non-width-scroll":!(t.isWeb&&t.isTopArtboard),top:t.isTopArtboard},t.verticalAlignCss,1),style:t.artboardContentScrollStyle,attrs:{"data-unset-control":t.rootSize?"1":""},on:{scroll:t.onScroll,click:function(e){return e.target!==e.currentTarget?null:t.clickArtboardItemSelf.apply(null,arguments)}}},[e("div",{staticClass:"artboard-content",class:{pc:t.isWeb,"interaction-node-show":t.isMouseDown&&!t.isMouseDownInInteractionNode||t.interactionRectAlwaysVisible},style:t.contentStyle,on:{dragstart:function(t){t.preventDefault()}}},[e("img",{staticClass:"preview",style:t.imgStyle,attrs:{src:t.imgSrc},on:{load:t.onImgLoad,error:t.onImgError}}),e("InteractionNodePoints",{attrs:{artboard:t.artboard,overlayScale:t.overlayScale}}),t.imgLoading?e("div",{staticClass:"img-loading",style:{backgroundColor:t.backgroundColor}},[e("div",{staticClass:"loading"},[t._v("正在加载画板预览图...")])]):t._e()],1)]),t.renderOverlayArtboardDatas.length>0?t._l(t.renderOverlayArtboardDatas,(function(n,r){return e("interaction-artboard-item",{key:n.key,attrs:{artboard:n.overlayArtboard.artboard.artboard,renderTapInteraction:n.overlayArtboard.renderTapInteraction,overlayArtboards:null,rootSize:t.artboard.boundsInParentForList,overlayOffset:n.overlayArtboardOffset,overlayVisible:n.overlayArtboard.visible,lastOverlay:t.renderOverlayArtboardDatas.length-1===r}})})):t._e()],2)},xO=[],yO=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"interaction-node-points"},t._l(t.renderInteractions,(function(n,r){return e("InteractionNodePointItem",{key:r,attrs:{item:n,index:r,itemScale:t.itemScale}})})),1):t._e()},kO=[],CO=function(){var t=this,e=t._self._c;return e("div",{staticClass:"interaction-node-pointitem",class:{on:t.hoverGuid===t.item.guid,pc:!t.inMobile},style:t.style,attrs:{"data-unset-control":"1","data-interaction-node":"1"},on:{mouseenter:function(e){return t.mouseEnterItem(!0)},mouseleave:function(e){return t.mouseEnterItem(!1)},click:t.clickGoArtboard}})},SO=[],TO={methods:{mouseEnterItem:function(t){var e;l["f"]||(this.interactionSet.hoverGuid=t?null===(e=this.item)||void 0===e?void 0:e.guid:null)},clickGoArtboard:function(){this.$store.commit("setInteractionArtboard",this.item.renderTapInteraction)}},computed:{interactionRectAlwaysVisible:function(){return this.$store.state.artboardDetail.interactionSet.rectAlwaysVisible},style:function(){var t=this.rect;return"top:".concat(t.top,"px;left:").concat(t.left,"px;width:").concat(t.width,"px;height:").concat(t.height,"px;")},hoverGuid:function(){return this.interactionSet.hoverGuid},artboardDetail:function(){return this.$store.state.artboardDetail},interactionSet:function(){return this.artboardDetail.interactionSet},boundsInArtboard:function(){var t,e;return null!==(t=null===(e=this.item)||void 0===e?void 0:e.boundsInArtboard)&&void 0!==t?t:new d["a"]},rect:function(){var t=this.boundsInArtboard,e=this.itemScale,n=t.width,r=t.height,i=t.x,o=t.y;return n*=e,r*=e,i*=e,o*=e,{width:n,height:r,left:i,top:o}}},props:{item:Object,index:Number,itemScale:Number}},OO=TO,IO=(n("0227"),Object(Dr["a"])(OO,CO,SO,!1,null,"33a6a087",null)),AO=IO.exports,FO={components:{InteractionNodePointItem:AO},methods:{},computed:{visible:function(){var t=this.currentInteractionData;if(t.fetchState!=c["a"].Success)return!1;var e=this.renderInteractions;return 0!=e.length},isWeb:function(){return!l["f"]&&this.pcDeviceSet.type===Dn.Web},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet},mobileSize:function(){return this.$store.state.mobileInteraction.mobileSize},renderSize:function(){var t,e,n=this.mobileSize,r=this.pcDeviceSet;return this.inMobile?(t=n.width,e=n.height):(t=r.width,e=r.height),{width:t,height:e}},itemScale:function(){if(this.isWeb)return 1;var t=this.renderSize.width/this.rect.width;return isNaN(t)&&(t=1),t*this.overlayScale},currentInteractionData:function(){return this.artboard.interactionInfo},renderInteractions:function(){var t,e,n=this.currentInteractionData;return n.fetchState===c["a"].Success&&null!==(t=null===(e=n.data)||void 0===e?void 0:e.renderInteractions)&&void 0!==t?t:[]},rect:function(){var t,e=this.artboard,n=null!==(t=null===e||void 0===e?void 0:e.boundsInParentForList)&&void 0!==t?t:new d["a"];return(new d["a"]).set(0,0,n.width,n.height)}},props:{artboard:Object,overlayScale:Number},created:function(){}},jO=FO,_O=(n("44a7"),Object(Dr["a"])(jO,yO,kO,!1,null,"6a3b9a21",null)),MO=_O.exports,LO={},DO={name:"interaction-artboard-item",components:{InteractionNodePoints:MO},methods:{checkIsMouseDownInInteractionNode:function(t){var e=t.target;if(!e)return!1;if("1"===e.getAttribute("data-interaction-node"))return!0;var n=e;while(n){if(n.classList.contains("interaction-artboard-item"))break;n=n.parentNode}return!!n&&n!==this.$refs.container},onTouchStart:function(t){this.isMouseDown=!0,this.isMouseDownInInteractionNode=this.checkIsMouseDownInInteractionNode(t),window.addEventListener("touchend",this.onTouchEnd,!0)},onTouchEnd:function(){window.removeEventListener("touchend",this.onTouchEnd,!0),this.isMouseDown=!1},onMouseDown:function(t){l["f"]||(this.isMouseDown=!0,this.isMouseDownInInteractionNode=this.checkIsMouseDownInInteractionNode(t),window.addEventListener("mouseup",this.onMouseUp,!0))},onMouseUp:function(){window.removeEventListener("mouseup",this.onMouseUp,!0),l["f"]||(this.isMouseDown=!1)},clickArtboardItemSelf:function(){var t,e=this.rootSize,n=this.renderTapInteraction;if(e){var r=null!==(t=null===n||void 0===n?void 0:n.overlayBackgroundInteraction)&&void 0!==t?t:void 0;"NONE"!==r&&this.$store.commit("setInteractionArtboard",{type:pt.goBack})}},onImgLoad:function(){this.imgState=c["a"].Success,LO[this.imgSrc]=1},onImgError:function(){this.imgState=c["a"].Error},onScroll:function(t){if(this.isTopArtboard){var e=this.scrollYCache;e[this.artboard.cid]=t.target.scrollTop}},resetScroll:function(){var t;if(this.isTopArtboard){var e=this.$refs.artboardScrollBox;if(e){var n=null!==(t=this.scrollYCache[this.artboard.cid])&&void 0!==t?t:0;e.scrollTop=n}}}},watch:{imgSrc:function(t){t&&(LO[t]||(this.imgState=c["a"].Fetching))},curArtboard:function(){this.resetScroll()}},computed:{verticalAlignCss:function(){switch(this.verticalAlign){case a["H"].Bottom:return"align-bottom";case a["H"].Top:return"align-top";default:return"align-middle"}},verticalAlign:function(){return this.$store.state.artboardDetail.interactionSet.verticalAlign},interactionRectAlwaysVisible:function(){return this.interactionSet.rectAlwaysVisible},overlayArtboardOffset:function(){var t=new B,e=this.overlayArtboards;if(!e)return t;var n=e.length;if(n<=1)return t;for(var r=0;r<n-1;r++){var i=e[r].renderTapInteraction;if(i){var o=i.overlayTopLeft;o&&(t.x+=o.x,t.y+=o.y)}}return t},previousOverlayArtboardOffset:function(){var t=new B,e=this.overlayArtboards;if(!e)return t;var n=e.length;if(n<1)return t;for(var r=0;r<n-2;r++){var i=e[r].renderTapInteraction;if(i){var o=i.overlayTopLeft;o&&(t.x+=o.x,t.y+=o.y)}}return t},renderOverlayArtboardDatas:function(){var t=[],e=this.overlayArtboard,n=this.previousOverlayArtboard,r=this.previousOverlayArtboardOffset,i=this.overlayArtboardOffset,o=this.artboard.guid;return n&&t.push({overlayArtboard:n,overlayArtboardOffset:r,key:"".concat(o,"-").concat(n.artboard.artboard.guid)}),e&&t.push({overlayArtboard:e,overlayArtboardOffset:i,key:"".concat(o,"-").concat(e.artboard.artboard.guid)}),t},previousOverlayArtboard:function(){var t=this.overlayArtboards;if(!t)return null;var e=t.length;return e<1?null:t[e-2]},overlayArtboard:function(){var t=this.overlayArtboards;if(!t)return null;var e=t.length;return 0===e?null:t[e-1]},isTopArtboard:function(){var t=this.rootSize;return!t},itemOverlayStyle:function(){var t,e=null===(t=this.renderTapInteraction)||void 0===t?void 0:t.overlayBackground;if(!e)return null;var n=this.animationStyle;return{"background-color":e,"animation-duration":n?n["animation-duration"]:void 0}},artboardContentScrollStyle:function(){var t=this.isTopArtboard,e=this.animationStyle;return t?null:e},animationStyle:function(){var t=this.renderTapInteraction;if(!t)return null;var e=t.transition;if(!e)return null;var n={},r=e.customEasing?e.easing:mt[e.easing];return r||(r=mt.linear),n["animation-timing-function"]=r,n["animation-duration"]=(e.duration||.3).toFixed(3)+"s",n},itemStyle:function(){var t=this.imgStyle,e=this.isWeb,n=this.backgroundColor,r=this.isTopArtboard,i=this.animationStyle,o={};return r&&(o["background-color"]=e?n:"#000"),e&&r&&(o=Object.assign(o,t,{position:"relative",top:"auto",left:"auto","max-height":"100%","max-width":"100%"})),i?(Object.assign(o,i),this.overlayVisible||(o["pointer-events"]="none"),o):o},itemCls:function(){var t=this.renderTapInteraction,e=this.isTopArtboard,n=[];if(this.inMobile&&n.push("in-mobile"),this.imgLoading&&n.push("inloading"),!t)return n;var r=t.transition;if(!r)return n;!e&&null!==t&&void 0!==t&&t.overlayBackground?n.push("in-overlay"):n.push("in-top");var i=this.overlayVisible?"":"-reverse";switch(r.type){case"dissolve":case"autoAnimate":n.push("animation-opacity".concat(i));break;case"push":case"slide":case"move":var o=ft[r.fromSide];o||(o=ft.L),n.push("animation-slide-".concat(o).concat(i));break;case"push-background":case"slide-background":case"move-background":case"move_out":case"move_out-background":case"slide_out":case"slide_out-background":var a=ft[r.fromSide];a||(a=ft.L),n.push("animation-".concat(r.type,"-").concat(a).concat(i)),n.push(r.type);break}return n},isWeb:function(){return!this.inMobile&&this.pcDeviceSet.type===Dn.Web},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},backgroundColor:function(){return this.interactionSet.backgroundColor},mobileSize:function(){return this.$store.state.mobileInteraction.mobileSize},renderSize:function(){var t,e,n=this.mobileSize,r=this.pcDeviceSet;return this.inMobile?(t=n.width,e=n.height):(t=r.width,e=r.height),{width:t,height:e}},pcDeviceSet:function(){return this.interactionSet.pcDeviceSet},overlayScale:function(){if(this.isWeb)return 1;var t=this.rootSize;return t?this.artboard.boundsInParentForList.width/t.width:1},rootScale:function(){if(this.isWeb)return 1;var t=this.rootSize,e=this.artboard,n=this.renderSize,r=t?t.width:e.boundsInParentForList.width;return n.width/r},contentStyle:function(){var t=this.isTopArtboard;if(t)return a;var e=this.animationStyle,n=this.renderTapInteraction,r=this.isWeb,i=this.rootScale,o=this.overlayOffset,a=this.imgStyle;n||(n={});var c=n,l=c.overlayPositionType,u=c.overlayTopLeft,d=0,h=0;if(null!=l){var f={top:0,left:0,bottom:"auto",right:"auto"},m=a.width,p=a.height;switch(l){case gt.CENTER:case gt.MANUAL:f.top="calc(50% - ".concat(p," / 2)");break;case gt.TOP_LEFT:case gt.TOP_CENTER:case gt.TOP_RIGHT:f.top="0px";break;case gt.BOTTOM_LEFT:case gt.BOTTOM_CENTER:case gt.BOTTOM_RIGHT:f.top="auto",f.bottom="0px";break}switch(l){case gt.CENTER:case gt.TOP_CENTER:case gt.BOTTOM_CENTER:case gt.MANUAL:f.left="calc(50% - ".concat(m," / 2)");break;case gt.TOP_LEFT:case gt.BOTTOM_LEFT:f.left="0px";break;case gt.TOP_RIGHT:case gt.BOTTOM_RIGHT:f.left="auto",f.right="0px";break}return Object(s["a"])(Object(s["a"])(Object(s["a"])({},f),a),e)}return u&&(d=u.x,h=u.y),o&&(d+=o.x,h+=o.y),r||(d*=i,h*=i),Object(s["a"])(Object(s["a"])({top:h+"px",left:d+"px"},a),e)},imgStyle:function(){var t=this.artboard.boundsInParentForList;if(this.isWeb)return{width:t.width+"px",height:t.height+"px"};var e=this.renderSize.width;return e=Math.round(this.overlayScale*e),{width:e+"px",height:Math.round(e/t.width*t.height)+"px"}},imgLoading:function(){return this.imgState===c["a"].Fetching},imgSrc:function(){var t,e=this.artboard,n=this.isSupportWebp;return n&&(t=e.artboardPreviewWebp,t)?t:e.artboardPreviewPng},isSupportWebp:function(){return this.$store.state.isSupportWebp===In.Support},scrollYCache:function(){return this.$store.state.mobileInteraction.scrollYCache}},data:function(){return{imgState:c["a"].Normal,isMouseDown:!1,isMouseDownInInteractionNode:!1}},props:{artboard:Object,overlayArtboards:{type:Array,default:null},lastOverlay:{type:Boolean,default:!1},rootSize:{type:Object,default:null},renderTapInteraction:{type:Object,default:null},overlayOffset:{type:Object,default:null},overlayVisible:{type:Boolean,default:!0}},mounted:function(){this.resetScroll()},beforeDestroy:function(){window.removeEventListener("touchend",this.onTouchEnd,!0),window.removeEventListener("mouseup",this.onMouseUp,!0)}},PO=DO,NO=(n("df29"),Object(Dr["a"])(PO,wO,xO,!1,null,"fa8784d0",null)),EO=NO.exports,RO={components:{InteractionArtboardItem:EO},methods:{clickDeviceBox:function(){this.currentArtboardHasRenderInteraction||this.showTextTip("当前画板没有或未提交交互原型热区",1)}},computed:{renderList:function(){var t=[],e=this.itemCurrent,n=this.gobackArtboard,r=this.gotoArtboard,i={};if(e&&(t.push(e),i[e.key]=1),n){var o,a=n.fromArtboard.artboard,s=null!==(o=a.cid)&&void 0!==o?o:a.guid;i[s]&&(s+="_1"),i[s]=1,t.push({key:s,artboard:a,renderTapInteraction:n.renderTapInteraction,overlayArtboards:null,overlayVisible:!1})}if(r){var c,l=r.fromArtboard.artboard,u=null!==(c=l.cid)&&void 0!==c?c:l.guid;i[u]&&(u+="_2"),i[u]=1,t.push({key:u,artboard:l,renderTapInteraction:r.renderTapInteraction,overlayArtboards:null,overlayVisible:!0})}return t},currentOverlayVisible:function(){return!this.gobackArtboard},currentArtboardHasRenderInteraction:function(){return null!=this.currentArtboardRenderInteractions},currentArtboardRenderInteractions:function(){var t,e,n=null===(t=this.curArtboard)||void 0===t||null===(t=t.artboard)||void 0===t?void 0:t.interactionInfo;if(!n)return null;if(n.fetchState!==c["a"].Success)return null;var r=null===(e=n.data)||void 0===e?void 0:e.renderInteractions;return Object(l["i"])(r)&&r.length>0?r:null},currentRenderTapInteraction:function(){var t,e=this.gobackArtboard,n=this.gotoArtboard,r=null===(t=null!==e&&void 0!==e?e:n)||void 0===t?void 0:t.renderTapInteraction;if(r){var i=r,o=i.transition,a=i.trigger_type,c=i.type,u=i.preserveScrollPosition,d=i.toArtboard;if(!Object(l["k"])(o))return null;switch(o=Object(s["a"])({},o),o.type){case"dissolve":case"autoAnimate":return null;case"push":case"slide":case"slide_out":case"move":case"move_out":o.type="".concat(o.type,"-background");break}r={transition:o,trigger_type:a,type:c,preserveScrollPosition:u,toArtboard:d}}return r},itemCurrent:function(){var t,e,n=null===(t=this.curArtboard)||void 0===t?void 0:t.artboard;return n?{artboard:n,renderTapInteraction:this.currentRenderTapInteraction,overlayArtboards:this.interactionSet.overlayArtboards,overlayVisible:this.currentOverlayVisible,key:null!==(e=n.cid)&&void 0!==e?e:n.guid}:null},gobackArtboard:function(){return this.interactionSet.gobackArtboard},gotoArtboard:function(){return this.interactionSet.gotoArtboard},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},boxStyle:function(){return this.isWeb?{width:"100%",height:"100%"}:{width:this.pcDeviceSet.width+"px",height:this.pcDeviceSet.height+"px"}},isWeb:function(){return this.pcDeviceSet.type===Dn.Web},pcDeviceSet:function(){return this.interactionSet.pcDeviceSet},headerVisible:function(){return this.interactionSet.headerVisible},leftSideVisible:function(){return this.$store.state.artboardDetail.leftSideVisible&&this.headerVisible}}},VO=RO,BO=(n("ffca"),Object(Dr["a"])(VO,bO,gO,!1,null,"5970a26f",null)),HO=BO.exports,UO={components:{DeviceBox:HO},computed:{isWeb:function(){return this.pcDeviceSet.type===Dn.Web},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet},isHorizontal:function(){return this.pcDeviceSet.isHorizontal},headerVisible:function(){return this.$store.state.artboardDetail.interactionSet.headerVisible},leftSideVisible:function(){return this.$store.state.artboardDetail.leftSideVisible&&this.headerVisible}}},$O=UO,GO=(n("2afb"),Object(Dr["a"])($O,pO,vO,!1,null,"54a50b64",null)),WO=GO.exports,zO={components:{CloudNeedLoginTip:zl,Header:mO,EmptyData:zw,Authority:Bw,Tip:iu,LeftSide:GT,DeviceContainer:WO,AutomaticSync:Xr},methods:{clickHeaderVisible:function(){this.$store.commit("setInteractionHeaderVisible",!this.headerVisible)}},computed:{emptyText:function(){return this.inCloudMode?this.inNetDiskFileMode?"文件不存在,可能已经被移动或删除":"当前文件夹不存在画板":"未检测到数据,请尝试重新导出画板"},backgroundColor:function(){return this.interactionSet.backgroundColor},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},headerVisibleTitle:function(){return this.headerVisible?"隐藏顶部(F2)":"显示顶部(F2)"},headerVisible:function(){return this.interactionSet.headerVisible},artboardLoadProgressText:function(){return Math.floor(1e4*this.artboardLoadProgress.current/this.artboardLoadProgress.count)/100+"%"},artboardLoadProgress:function(){return this.$store.state.artboardLoadProgress},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},isEmptyArtboardData:function(){return 0===this.documentArtboards.length}},created:function(){0}},YO=zO,XO=(n("fa2f"),Object(Dr["a"])(YO,AT,FT,!1,null,"6ffc441e",null)),KO=XO.exports,qO=function(){var t=this,e=t._self._c;return e("section",{attrs:{id:"main"}},[!t.cloudNeedLogin||t.cloudIsLogin?e("div",{staticClass:"loading",class:{on:!t.allArtboardLoadChecked}},[t._v("正在加载画板数据中("+t._s(t.artboardLoadProgressText)+"),请稍后...")]):t._e(),t.cloudNeedLogin&&!t.cloudIsLogin?e("CloudNeedLoginTip"):t.allArtboardLoadChecked?[t.cloudFolderNotFound||!t.permission?[e("Header"),e("Nav"),e("main",[t.cloudFolderNotFound?e("EmptyData",{attrs:{text:t.cloudFolderErrorText,showLoginBtn:t.cloudFolderInSpecify}}):t.permission?t._e():e("Authority",{attrs:{include:!0}})],1)]:[t.inList?e("ArtboardList"):e("ArtboardInfo")]]:t._e(),e("TipInMobile"),e("AutomaticSync")],2)},JO=[],QO=function(){var t=this,e=t._self._c;return e("header",[t.cloudNeedLogin||t.cloudIsLogin?e("user-info"):t._e(),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobileInteraction.searchText,expression:"mobileInteraction.searchText"}],ref:"searchInput",attrs:{type:"text",placeholder:t.showAll?"搜索文件夹和画板":"搜索画板",autocomplete:"off"},domProps:{value:t.mobileInteraction.searchText},on:{input:function(e){e.target.composing||t.$set(t.mobileInteraction,"searchText",e.target.value)}}}),t.hasSearchText?e("span",{staticClass:"search-clear",on:{click:t.clickSearchClear}}):t._e()]),e("div",{staticClass:"btn-control-refresh",on:{click:t.clickRefresh}})],1)},ZO=[],tI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userinfo"},[e("div",{staticClass:"nickname",class:{on:t.menuVisible},on:{click:t.clickShowMenu}},[e("UserFace",{attrs:{canClick:!1}})],1),t.menuVisible?e("div",{staticClass:"m-popbox",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.menuVisible=!1}}},[e("div",{staticClass:"box"},[e("div",{staticClass:"u-info"},[e("UserFace",{attrs:{canClick:!1}}),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(t.showName))]),e("div",{staticClass:"email"},[t._v(t._s(t.showEmail))])])],1),t.cloudIsLogin?e("a",{staticClass:"button btn-logout",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickLogout()}}},[t._v("退出登录")]):t._e()])]):t._e()])},eI=[],nI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userface",class:{on:t.canClick},attrs:{title:t.title},on:{click:function(e){return e.stopPropagation(),t.clickUserFace.apply(null,arguments)}}},[t.showIcon?e("div",{staticClass:"icon"}):e("div",{staticClass:"user",class:{tourist:!t.cloudUserIsDesigner}},[t._v(t._s(t.iconText))])])},rI=[],iI={methods:{clickUserFace:function(){this.$emit("click")}},computed:{showIcon:function(){return!this.cloudIsLogin},iconText:function(){if(!this.cloudIsLogin)return"";var t=this.cloudNickName;return Object(l["j"])(t)||(t=this.cloudUserEmail),t[t.length-1]}},props:{title:String,canClick:Boolean}},oI=iI,aI=(n("e2d4"),Object(Dr["a"])(oI,nI,rI,!1,null,"079399e5",null)),sI=aI.exports,cI={components:{UserFace:sI},methods:{clickLogout:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.logoutting){e.next=2;break}return e.abrupt("return");case 2:return t.logoutting=!0,e.prev=3,e.next=6,t.goCloudLogout();case 6:return e.prev=6,t.logoutting=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[3,,6,9]])})))()},clickShowMenu:function(){this.cloudIsLogin?this.menuVisible=!0:this.goCloudLogin()}},computed:{showName:function(){return this.cloudIsLogin?this.cloudNickName:"未登录"},showEmail:function(){return this.cloudIsLogin?this.cloudUserEmail:""}},data:function(){return{menuVisible:!1,logoutting:!1}}},lI=cI,uI=(n("bb5a"),Object(Dr["a"])(lI,tI,eI,!1,null,"35031a94",null)),dI=uI.exports,hI={components:{UserInfo:dI},methods:{clickRefresh:function(){this.goCloudFolderInteractionUrl(this.cloudCurrentFolderId,this.curArtboardGuid)},clickSearchClear:function(){var t;this.mobileInteraction.searchText="",null===(t=this.$refs.searchInput)||void 0===t||t.focus()}},computed:{mobileInteraction:function(){return this.$store.state.mobileInteraction},hasSearchText:function(){return!!this.searchText},searchText:function(){return this.mobileInteraction.searchText}},props:{showAll:Boolean}},fI=hI,mI=(n("7eea"),Object(Dr["a"])(fI,QO,ZO,!1,null,"9ac34f88",null)),pI=mI.exports,vI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav"},[e("path-nav"),e("nav-filter")],1)},bI=[],gI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"path-nav"},[e("div",{staticClass:"navs"},t._l(t.navs,(function(n,r){return e("div",{key:r,staticClass:"nav-item",class:{"no-link":!n.link}},[e("div",{staticClass:"name",attrs:{title:n.name},on:{click:function(e){return t.clickNav(n)}}},[t._v(t._s(n.name))]),t.showArtboardPages&&n.selectPages?e("PathNavArtboardPages"):t._e()],1)})),0)])},wI=[],xI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-artboard-page"},[e("div",{staticClass:"page-current",attrs:{title:"点击切换显示的页面"},on:{click:function(e){t.visible=!t.visible}}},[e("div",{staticClass:"text"},[t._v(t._s(t.currentPageName))])]),e("ul",{staticClass:"page-list",class:{on:t.visible}},[e("li",{class:{on:!t.filterDocumentGuid,"nav-all":!0},attrs:{title:t.allPageName},on:{click:function(e){return t.clickItem(null)}}},[e("span",{staticClass:"text"},[t._v(t._s(t.allPageName)),e("span",{staticClass:"art-count"},[t._v("("+t._s(t.documentArtboards.length)+")")])])]),t._l(t.sortDocumentsWithSketchDocument,(function(n){return e("li",{key:n.guid,class:t.itemCls(n),attrs:{title:n.docFullName},on:{click:function(e){return t.clickItem(n)}}},[e("span",{staticClass:"text"},[t._v(t._s(n.name)),e("span",{staticClass:"art-count"},[t._v("("+t._s(n.arts.length)+")")])])])}))],2),t.visible?e("div",{staticClass:"bg on"}):t._e()])},yI=[],kI={methods:{itemCls:function(t){var e=a["K"].getClassName(t.type);return Object(M["a"])(Object(M["a"])(Object(M["a"])({},e,!!e),"on",this.filterDocumentGuid===t.guid),"f-xd",t.fileType===a["r"].XD)},clickItem:function(t){var e,n=null!==(e=null===t||void 0===t?void 0:t.guid)&&void 0!==e?e:null;this.$store.commit("setFilterDocumentGuid",n)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.visible=!1}),100))}},computed:{sortDocumentsWithSketchDocument:function(){return this.$store.state.sortDocumentsWithSketchDocument},currentPageName:function(){var t,e,n,r=this.filterDocumentGuid;return r&&(n=this.sortDocumentsWithSketchDocument.find((function(t){return t.guid===r}))),null!==(t=null===(e=n)||void 0===e?void 0:e.name)&&void 0!==t?t:this.allPageName}},watch:{visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0)):window.removeEventListener("mouseup",this.hideContextmenu,!0)}},data:function(){return{allPageName:"全部页面",visible:!1,handle:0}},beforeDestroy:function(){clearTimeout(this.handle),window.removeEventListener("mouseup",this.hideContextmenu,!0)}},CI=kI,SI=(n("a9f1"),Object(Dr["a"])(CI,xI,yI,!1,null,"8780cb8e",null)),TI=SI.exports,OI={components:{PathNavArtboardPages:TI},methods:{clickNav:function(t){t.link&&setTimeout((function(){t.link()}),100)}},computed:{showArtboardPages:function(){return this.inCloudMode&&!this.inNetDiskFileMode&&this.documents.length>0},navs:function(){var t=this,e=[],n=this.inCloudMode,r=this.inArtboardMode,i=this.curArtboard,o=this.cloudCurrentFolderId,a=this.curFileInfo,s=this.inNetDiskFileMode;if(n){var c=this.cloudName,l=this.cloudParentFolder,u=this;r||(0===o?e.push({name:c||"私有云根目录",link:null}):l&&e.push({name:0===l.id&&c||l.name,id:l.id,link:function(){u.goCloudFolderInteractionUrl(this.id)}}))}if(n&&this.cloudFolderNotFound?e.push({name:this.cloudFolderInSpecify?"没有访问权限":"链接已失效",link:null}):n&&0==o||e.push({name:this.documentName,selectPages:!0,link:r?function(){t.setCurArtboard(null)}:s?function(){t.goCloudFolderInteractionUrl(o)}:null}),r){var d,h,f=null!==(d=null===i||void 0===i||null===(h=i.artboard)||void 0===h?void 0:h.name)&&void 0!==d?d:"";f&&e.push({name:f,link:null})}else if(s){var m,p=null!==(m=null===a||void 0===a?void 0:a.name)&&void 0!==m?m:"";p&&e.push({name:p,link:null})}return e}}},II=OI,AI=(n("6c7c"),Object(Dr["a"])(II,gI,wI,!1,null,"135eaab0",null)),FI=AI.exports,jI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav-filter"},[e("div",{staticClass:"nav-sort"},[e("div",{staticClass:"title",class:{desc:t.listConfig.orderDesc},on:{click:function(e){t.menuVisible=!0}}},[t._v(t._s(t.renderTitle))]),t.menuVisible?e("div",{staticClass:"m-popbox",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.menuVisible=!1}}},[e("div",{staticClass:"box"},[e("div",{staticClass:"sort-order"},[e("div",{staticClass:"item asc",class:{on:!t.listConfig.orderDesc},on:{click:function(e){return t.setMobileInteractionListConfig({orderDesc:!1},!0)}}},[t._v("升序")]),e("div",{staticClass:"item desc",class:{on:t.listConfig.orderDesc},on:{click:function(e){return t.setMobileInteractionListConfig({orderDesc:!0},!0)}}},[t._v("降序")])]),e("div",{staticClass:"sort-types"},[e("div",{staticClass:"item",class:{on:t.listConfig.sortType===t.EnumCloudListSortType.Name},on:{click:function(e){return t.setMobileInteractionListConfig({sortType:t.EnumCloudListSortType.Name},!0)}}},[t._v("按名称排序")]),e("div",{staticClass:"item",class:{on:t.listConfig.sortType===t.EnumCloudListSortType.Date},on:{click:function(e){return t.setMobileInteractionListConfig({sortType:t.EnumCloudListSortType.Date},!0)}}},[t._v("按时间排序")]),e("div",{staticClass:"item",class:{on:t.listConfig.sortType===t.EnumCloudListSortType.ArtboardRect},attrs:{title:"画板列表按画板在文档中的坐标从上到下,从左到右排序;文件夹按名称排序"},on:{click:function(e){return t.setMobileInteractionListConfig({sortType:t.EnumCloudListSortType.ArtboardRect},!0)}}},[t._v("按坐标排序")])])])]):t._e()]),e("div",{staticClass:"nav-render"},[e("div",{staticClass:"item",class:{on:t.listConfig.renderType===t.EnumCloudMobileInteractionListRenderType.All},on:{click:function(e){return t.setMobileInteractionListConfig({renderType:t.EnumCloudMobileInteractionListRenderType.All})}}},[t._v("全部")]),e("div",{staticClass:"item",class:{on:t.listConfig.renderType===t.EnumCloudMobileInteractionListRenderType.Artboard},on:{click:function(e){return t.setMobileInteractionListConfig({renderType:t.EnumCloudMobileInteractionListRenderType.Artboard})}}},[t._v("画板")])])])},_I=[],MI={methods:{setMobileInteractionListConfig:function(t,e){this.$store.commit("setMobileInteractionListConfig",t),e&&(this.menuVisible=!1)}},computed:{EnumCloudMobileInteractionListRenderType:function(){return a["o"]},EnumCloudListSortType:function(){return a["n"]},renderTitle:function(){var t=this.listConfig,e=t.sortType,n=t.orderDesc;return"按".concat(e===a["n"].Name?"名称":e===a["n"].Date?"时间":"坐标").concat(n?"降序":"升序")},listConfig:function(){return this.$store.state.mobileInteraction.listConfig}},data:function(){return{menuVisible:!1}}},LI=MI,DI=(n("e934"),Object(Dr["a"])(LI,jI,_I,!1,null,"d85c16d8",null)),PI=DI.exports,NI={components:{PathNav:FI,NavFilter:PI}},EI=NI,RI=(n("31a4"),Object(Dr["a"])(EI,vI,bI,!1,null,"72e5b43a",null)),VI=RI.exports,BI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-list",class:{"safari-standalone":t.inSafariStandalone}},[e("Header",{attrs:{showAll:t.showAll}}),e("Nav"),t.isEmptyList?e("main",[e("EmptyData",{attrs:{text:t.emptyText}})],1):t.showAll?e("main",{ref:"mainAll",on:{scroll:t.onMainAllViewScroll,mousewheel:t.onMainAllViewMouseWheel}},[e("div",{staticClass:"box",class:{off:t.mainAllView.mousewheelTimes>0},style:{height:t.mainAllView.boxRealHeight+"px"}},[e("div",{staticClass:"brace",style:t.allListBraceStyle},t._l(t.showLazyAllList,(function(t){return e("ArtboardListItem",{key:t.key,attrs:{item:t.item}})})),1)])]):e("main",{ref:"mainArtboard",on:{scroll:t.onMainArtboardViewScroll,mousewheel:t.onMainArtboardViewMouseWheel}},[e("div",{staticClass:"box",class:{off:t.mainArtboardView.mousewheelTimes>0},style:{height:t.mainArtboardView.boxRealHeight+"px"}},t._l(t.showLazyArtboardList,(function(t){return e("ArtboardListArtboardItem",{key:t.key,attrs:{item:t}})})),1)]),t.listFetchState===t.FetchState.Fetching?e("div",{staticClass:"list-loading"},[e("div",{staticClass:"box"},[t.listFetchState===t.FetchState.Fetching?e("NetworkLoading",{attrs:{loadText:"正在获取文件夹数据...",errorText:"",isLoading:t.listFetchState===t.FetchState.Fetching,isError:!1,reLoadText:""}}):t._e()],1)]):t._e()],1)},HI=[],UI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-item",style:t.style},[e("div",{staticClass:"title"},[t._v(t._s(t.item.artboard.name))]),e("div",{staticClass:"img",on:{click:function(e){return t.setCurArtboard(t.item.item)}}},[e("img",{attrs:{src:t.artboardReviewImg,alt:""},on:{error:t.errPreviewImage}}),t.artboard.flowStart?e("div",{staticClass:"flow-start"}):t._e()])])},$I=[],GI={methods:{errPreviewImage:function(){this.userMiniPreviewImg&&(this.userMiniPreviewImg=!1)}},computed:{isSupportWebp:function(){return this.$store.state.isSupportWebp===In.Support},artboardReviewImg:function(){var t=this.artboard,e=this.userMiniPreviewImg?this.isSupportWebp&&t.artboardPreviewWebp?t.artboardPreviewWebp:t.artboardPreviewThumbPng:t.artboardPreviewPng;return e},artboard:function(){return this.item.artboard},style:function(){var t=this.item.rect;return"top:".concat(t.top,"px;left:").concat(t.left,"px;width:").concat(t.width,"px;height:").concat(t.height,"px;")}},props:{item:Object},data:function(){return{userMiniPreviewImg:!0}}},WI=GI,zI=(n("2cd5c"),Object(Dr["a"])(WI,UI,$I,!1,null,"904ae240",null)),YI=zI.exports,XI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item",on:{click:t.clickItem}},[e("div",{staticClass:"img",class:t.itemClass},[t.isArtboard?e("img",{attrs:{src:t.artboardReviewImg,alt:""},on:{error:t.errPreviewImage}}):t._e()]),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(t.name))]),e("div",{staticClass:"summary"},[t._v(t._s(t.summary))])])])},KI=[],qI={methods:{errPreviewImage:function(){this.userMiniPreviewImg&&(this.userMiniPreviewImg=!1)},clickItem:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.item,i=t.isFolder,o=t.isArtboard,!i){e.next=5;break}return e.next=4,t.goCloudFolderInteractionUrl(n.id);case 4:return e.abrupt("return");case 5:o&&t.setCurArtboard(n);case 6:case"end":return e.stop()}}),e)})))()}},computed:{itemClass:function(){var t=this.item,e=this.isFolder,n=this.isArtboard,r={folder:e,lock:e&&t.shareMode===a["v"].PrivateCode,"share-sm":e&&t.shareMode===a["v"].SpecifyMembers,artboard:n};if(null!=t.color){var i=a["t"].getName(t.color);i&&(r[i]=1)}return r},artboardReviewImg:function(){var t=this.item,e=this.isArtboard;if(!e)return null;var n=t.artboard,r=this.userMiniPreviewImg?n.artboardPreviewThumbPng:n.artboardPreviewPng;return r},name:function(){var t=this.item,e=this.isFolder,n=this.isArtboard;return e?t.name:n?t.artboard.name:null},summary:function(){var t=this.item,e=this.isFolder,n=this.isArtboard;return e?"".concat(t.folderCount," 文件夹, ").concat(t.artboardCount," 画板"):n?nn(t.artboard):null},isFolder:function(){return this.item.id>0},isArtboard:function(){var t;return!this.isFolder&&(null===(t=this.item.artboard)||void 0===t?void 0:t.cid)>0}},data:function(){return{userMiniPreviewImg:!0}},props:{item:Object}},JI=qI,QI=(n("0445"),Object(Dr["a"])(JI,XI,KI,!1,null,"65d72cae",null)),ZI=QI.exports,tA=68,eA={components:{Header:pI,ArtboardListArtboardItem:YI,ArtboardListItem:ZI,Nav:VI,EmptyData:zw,NetworkLoading:Mc},methods:{sortData:function(t,e,n){var r=this.orderDesc,i=this.sortType;return Be(t,e,n,{orderDesc:r,sortType:i})},designPXToShowPX:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t/c["b"]*this.mainArtboardView.docWidth;return!0===n?r:e?Math.ceil(r):Math.floor(r)},designPXToShowVW:function(t){return t/c["b"]*100+"vw"},onMainViewResize:function(){var t=this.$refs.mainArtboard,e=this.$refs.mainAll,n=document.documentElement.offsetWidth,r=this.mainArtboardView;r.docWidth=n,t&&(r.height=Math.ceil(t.getBoundingClientRect().height));var i=this.mainAllView;i.docWidth=n,e&&(i.height=Math.ceil(e.getBoundingClientRect().height))},onMainAllViewScroll:function(){var t=this.$refs.mainAll;if(t){var e=this.mainAllView;e.scrollTop=t.scrollTop}},onMainAllViewMouseWheel:function(t){var e;this.mainAllView.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onMainArtboardViewMouseWheel:function(t){var e;this.mainArtboardView.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onMainArtboardViewScroll:function(){var t=this.$refs.mainArtboard;if(t){var e=this.mainArtboardView;e.scrollTop=t.scrollTop}},refreshBrowserInfo:function(){var t=this,e=this.showAll,n=this.isEmptyList;n||this.$nextTick((function(){t.onMainViewResize();var n=e?t.$refs.mainAll:t.$refs.mainArtboard,r=e?t.mainAllView:t.mainArtboardView;n&&(r.scrollTop=n.scrollTop=0)}))}},watch:{"mainAllView.mousewheelTimes":function(t){var e=this,n=this.mainAllView;clearTimeout(n.handle),t&&(n.handle=setTimeout((function(){e.mainAllView.mousewheelTimes=0}),200))},"mainArtboardView.mousewheelTimes":function(t){var e=this,n=this.mainArtboardView;clearTimeout(n.handle),t&&(n.handle=setTimeout((function(){e.mainArtboardView.mousewheelTimes=0}),200))},cloudCurrentFolderId:function(){this.refreshBrowserInfo()},isEmptyList:function(){this.refreshBrowserInfo()},showAll:function(){this.refreshBrowserInfo()}},computed:{FetchState:function(){return c["a"]},listFetchState:function(){return this.$store.state.mobileInteraction.listFetchState},allListBraceStyle:function(){var t;return t=this.renderAllListIndexStart*tA,{paddingTop:this.designPXToShowVW(t)}},isEmptyList:function(){var t=this.showAll,e=this.renderSortArtboardList,n=this.renderSortedAllList,r=t?n:e;return 0===r.length},emptyText:function(){var t=this.showAll,e=this.searchText,n=this.hasSearchText,r=t?"子文件夹和画板":"画板";return n?"未找到“".concat(e,"”相关的").concat(r):"当前文件夹不存在".concat(r)},showAll:function(){return this.renderType===a["o"].All},sortType:function(){return this.listConfig.sortType},orderDesc:function(){return this.listConfig.orderDesc},renderType:function(){return this.listConfig.renderType},listConfig:function(){return this.$store.state.mobileInteraction.listConfig},mobileInteraction:function(){return this.$store.state.mobileInteraction},hasSearchText:function(){return!!this.searchText},searchText:function(){return this.mobileInteraction.searchText},showLazyArtboardList:function(){var t=[],e=this.renderArtboardList,n=this.mainArtboardView,r=(new d["a"]).set(0,n.scrollTop,n.docWidth,n.height);return e.forEach((function(e){var n=e.rect;r.isOverlap(n)&&t.push(e)})),t},renderArtboardList:function(){var t=this.renderSortArtboardList,e=this.mainArtboardView,n=e.docWidth,r=[];if(e.boxRealHeight=0,0===n)return r;var i={titleHeight:this.designPXToShowPX(39,!0),imgWidth:this.designPXToShowPX(154,!0),lineCount:2,offsetX:this.designPXToShowPX(21),artboardFullEqualWidth:0};i.lineCount=Math.floor(n/i.imgWidth),i.artboardFullEqualWidth=Math.round(n/i.lineCount);var o=new Array(i.lineCount).fill(0),a=0;return t.forEach((function(t){var n,s=t.artboard,c=s.boundsInParentForList;if(c){var l=new d["a"],u=o[a],h=Math.ceil(c.height*i.imgWidth/c.width)+i.titleHeight;l.set(i.offsetX+(i.offsetX+i.imgWidth)*a,u,i.imgWidth,h),u+=h,o[a]=u,e.boxRealHeight=Math.max(e.boxRealHeight,u),a++,a>=i.lineCount&&(a=0),r.push({item:t,artboard:s,rect:l,titleHeight:i.titleHeight,key:null!==(n=s.cid)&&void 0!==n?n:"".concat(s.fileType,":").concat(s.guid)})}})),r},renderSortArtboardList:function(){var t,e,n=this.hasSearchText,r=this.searchText,i=this.renderDocumentArtboards,o=[];return r=n&&null!==(t=null===(e=r)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"",i.forEach((function(t){var e=null===t||void 0===t?void 0:t.artboard;if(e){if(n){var i=e.name;if(!i)return;if(-1===i.toLowerCase().indexOf(r))return}o.push(t)}})),o.length>0&&this.sortData(o,"updateTimeTimes",a["m"].Artboard),o},renderAllListIndexStart:function(){var t=this.mainAllView;return Math.floor(t.scrollTop/this.designPXToShowPX(tA))},showLazyAllList:function(){for(var t=this.renderSortedAllList,e=this.mainAllView,n=this.renderAllListIndexStart,r=Math.ceil(e.height/this.designPXToShowPX(tA))+1,i=[],o=Math.min(n+r,t.length);n<o;n++){var a,s,c=t[n];i.push({item:c,key:"".concat(c.id,"-").concat(null!==(a=null===(s=c.artboard)||void 0===s?void 0:s.cid)&&void 0!==a?a:0)})}return i},renderSortedAllList:function(){var t,e,n=this.cloudSubFolders,r=this.hasSearchText,i=this.searchText,o=this.mainAllView,s=[];i=r&&null!==(t=null===(e=i)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"",Object(l["i"])(n)&&n.forEach((function(t){if(r){var e=t.name;if(!e)return;if(-1===e.toLowerCase().indexOf(i))return}s.push(t)})),this.sortData(s,"updateTimes",a["m"].Folder);var c=this.renderSortArtboardList;return c.length>0&&s.push.apply(s,Object(u["a"])(c)),o.boxRealHeight=Math.ceil(this.designPXToShowPX(tA,!0,!0)*s.length),s}},data:function(){return{mainArtboardView:{scrollTop:0,height:0,docWidth:0,boxRealHeight:0,mousewheelTimes:0,handle:0},mainAllView:{scrollTop:0,height:0,docWidth:0,boxRealHeight:0,mousewheelTimes:0,handle:0},inSafariStandalone:l["g"]}},created:function(){window.addEventListener("resize",this.onMainViewResize)},mounted:function(){this.onMainViewResize(),this.onMainArtboardViewScroll(),this.onMainAllViewScroll()},beforeDestroy:function(){window.removeEventListener("resize",this.onMainViewResize),clearTimeout(this.mainArtboardView.handle),clearTimeout(this.mainAllView.handle)}},nA=eA,rA=(n("7797"),Object(Dr["a"])(nA,BI,HI,!1,null,"52db80e1",null)),iA=rA.exports,oA=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-info"},[e("ArtboardPanel",{attrs:{renderArtboardList:t.renderDocumentArtboards,curArtboardIndex:t.curArtboardIndex}}),!t.homeListVisible&&t.mobileInteraction.controlVisible?e("div",{staticClass:"control"},[e("div",{staticClass:"btns"},[e("div",{staticClass:"btn btn-control-golist",on:{click:function(e){return t.setCurArtboard(null)}}})]),e("menu",[e("span",{staticClass:"btn btn-homelist",class:{disabled:0===t.homeList.length},on:{click:t.clickHomeList}}),e("span",{staticClass:"line"}),e("span",{staticClass:"btn btn-interaction-rect-always-visible",class:{on:t.interactionRectAlwaysVisible},on:{click:t.clickInteractionRectAlwaysVisible}}),e("span",{staticClass:"line"}),e("span",{staticClass:"btn btn-vertical-align",class:t.verticalAlignCss,on:{click:t.clickVerticalAlign}})])]):t._e(),e("home-list",{attrs:{homeList:t.homeList,visible:t.homeListVisible},on:{hideHomeList:t.hideHomeList}})],1)},aA=[],sA=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-panel",on:{touchstart:t.touchstartPanel}},[e("div",{staticClass:"box",class:{animation:t.animation,moving:t.movingX,out:t.isAnimationOut},style:t.style},t._l(t.showArtboards,(function(t){return e("div",{key:t.key,staticClass:"item"},[t.artboard?e("InteractionArtboardItem",{attrs:{artboard:t.artboard,overlayArtboards:t.overlayArtboards,renderTapInteraction:t.renderTapInteraction,overlayVisible:t.overlayVisible}}):e("artboard-empty")],1)})),0),t.gobackArtboard?e("InteractionArtboardItem",{attrs:{overlayVisible:!1,artboard:t.gobackArtboard.fromArtboard.artboard,overlayArtboards:[],renderTapInteraction:t.gobackArtboard.renderTapInteraction}}):t._e(),t.gotoArtboard?e("InteractionArtboardItem",{attrs:{artboard:t.gotoArtboard.fromArtboard.artboard,overlayArtboards:[],renderTapInteraction:t.gotoArtboard.renderTapInteraction}}):t._e()],1)},cA=[],lA=function(){var t=this;t._self._c;return t._m(0)},uA=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-empty"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v("没有画板了")])])])}],dA=(n("938c"),{}),hA=Object(Dr["a"])(dA,lA,uA,!1,null,"dbda9962",null),fA=hA.exports,mA={components:{InteractionArtboardItem:EO,ArtboardEmpty:fA},methods:{touchmovePanel:function(t){var e=t.changedTouches[0];if(e){var n=this.maxDiffNum,r=this.docWidth,i=e.pageX-this.touchStartX,o=e.pageY-this.touchStartY,a=Math.abs(i),s=Math.abs(o);this.movingX||this.movingY||(s>=n&&a<s&&(this.movingY=!0),!this.movingY&&a>=n&&(this.movingX=!0)),this.movingX&&(t.preventDefault(),i=i>0?Math.min(i,r):Math.max(i,-r),this.mouseDiffX=i)}},touchendPanel:function(t){window.removeEventListener("touchmove",this.touchmovePanel,{passive:!1}),window.removeEventListener("touchend",this.touchendPanel);var e=t.changedTouches[0];if(e)if(this.movingX){var n=e.pageX-this.touchStartX;this.onSlide(n)}else if(this.movingY)this.movingY=!1;else{var r,i=t.target,o=i&&!!i.getAttribute("data-unset-control"),a=this.mobileInteraction,s=Math.abs(Date.now()-this.touchStartTime),c=s<300,l=s>1500,u=a.controlVisible;o&&c?o=!1:(l&&o||c)&&(r=!u),r!==u&&setTimeout((function(){a.controlVisible=r}),10),this.currentArtboardHasRenderInteraction||this.showTextTip("当前画板没有或未提交交互原型热区",1)}},touchstartPanel:function(t){if(!this.animation){window.addEventListener("touchmove",this.touchmovePanel,{passive:!1}),window.addEventListener("touchend",this.touchendPanel);var e=t.touches[0];e&&(this.mouseDiffX=0,this.movingX=this.movingY=!1,this.touchStartX=e.pageX,this.touchStartY=e.pageY,this.touchStartTime=Date.now())}},onSlide:function(t){var e,n=this,r=this.mouseDiffX,i=0;try{if(0===t)return;var o=this.prevArtboard,a=this.nextArtboard,s=this.docWidth;if(null==o&&t>0)return;if(null==a&&t<0)return;if(Math.abs(t)<s/5)return;if(t>0?(e=o,i=s):(e=a,i=-s),!e)return}finally{0!==r&&(this.animation=!0,this.mouseDiffX=i,setTimeout((function(){n.animation=!1,n.mouseDiffX=0,n.movingX=!1,n.movingY=!1,e&&n.setCurArtboard(e)}),200))}}},computed:{isAnimationOut:function(){var t=this.gobackArtboard,e=this.gotoArtboard;return null!=[t,e].find((function(t){var e,n;return!!t&&-1!==(null!==(e=null===(n=t.renderTapInteraction)||void 0===n||null===(n=n.transition)||void 0===n?void 0:n.type)&&void 0!==e?e:"").indexOf("_out")}))},gobackArtboard:function(){return this.interactionSet.gobackArtboard},gotoArtboard:function(){return this.interactionSet.gotoArtboard},currentOverlayVisible:function(){return!this.gobackArtboard},currentRenderTapInteraction:function(){var t,e=this.gobackArtboard,n=this.gotoArtboard,r=null===(t=null!==e&&void 0!==e?e:n)||void 0===t?void 0:t.renderTapInteraction;if(r){var i=r,o=i.transition,a=i.trigger_type,c=i.type,u=i.preserveScrollPosition,d=i.toArtboard;if(!Object(l["k"])(o))return null;switch(o=Object(s["a"])({},o),o.type){case"dissolve":case"autoAnimate":return null;case"push":case"slide":case"slide_out":case"move":case"move_out":o.type="".concat(o.type,"-background");break}r={transition:o,trigger_type:a,type:c,preserveScrollPosition:u,toArtboard:d}}return r},currentArtboardHasRenderInteraction:function(){return null!=this.currentArtboardRenderInteractions},currentArtboardRenderInteractions:function(){var t,e,n=null===(t=this.curArtboard)||void 0===t||null===(t=t.artboard)||void 0===t?void 0:t.interactionInfo;if(!n)return null;if(n.fetchState!==c["a"].Success)return null;var r=null===(e=n.data)||void 0===e?void 0:e.renderInteractions;return Object(l["i"])(r)&&r.length>0?r:null},showArtboards:function(){var t=this.prevArtboard,e=this.nextArtboard,n=this.curArtboard,r=this.overlayArtboards,i=[];t?i.push({key:t.artboard.cid,artboard:t.artboard,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0}):i.push({key:"prevArtboard.null",artboard:null,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0});var o=n.artboard;return i.push({key:o.cid,artboard:o,overlayArtboards:r,renderTapInteraction:this.currentRenderTapInteraction,overlayVisible:this.currentOverlayVisible}),e?i.push({key:e.artboard.cid,artboard:e.artboard,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0}):i.push({key:"nextArtboard.null",artboard:null,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0}),i},moving:function(){return this.movingX||this.movingY},style:function(){var t=this.mouseDiffX;return{transform:"translate3d(".concat(t,"px, 0, 1px)")}},docWidth:function(){return this.mobileInteraction.mobileSize.width},mobileInteraction:function(){return this.$store.state.mobileInteraction},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},overlayArtboards:function(){return this.interactionSet.overlayArtboards},prevArtboard:function(){var t=this.curArtboardIndex,e=this.renderArtboardList;return t<=0?null:e[t-1]},nextArtboard:function(){var t=this.curArtboardIndex,e=this.renderArtboardList,n=e.length;return t>=n-1?null:e[t+1]}},data:function(){return{touchStartTime:0,touchStartX:0,touchStartY:0,movingX:!1,movingY:!1,maxDiffNum:3,animation:!1,mouseDiffX:0}},props:{renderArtboardList:Array,curArtboardIndex:Number}},pA=mA,vA=(n("b623"),Object(Dr["a"])(pA,sA,cA,!1,null,"cd9298dc",null)),bA=vA.exports,gA=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-list",class:{on:t.visible},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickHide.apply(null,arguments)}}},[e("ul",{staticClass:"box"},t._l(t.homeList,(function(n,r){return e("li",{key:r,on:{click:function(e){return t.clickItem(n)}}},[e("span",{staticClass:"text"},[t._v(t._s(n.artboard.name))])])})),0)])},wA=[],xA={methods:{clickItem:function(t){this.setCurArtboard(t),this.clickHide()},clickHide:function(){this.$emit("hideHomeList")}},props:{homeList:Array,visible:Boolean}},yA=xA,kA=(n("b3ac"),Object(Dr["a"])(yA,gA,wA,!1,null,"10774c3a",null)),CA=kA.exports,SA={components:{ArtboardPanel:bA,HomeList:CA},methods:{clickVerticalAlign:function(){var t,e=this.verticalAlign,n=Object(M["a"])(Object(M["a"])(Object(M["a"])({},a["H"].Top,a["H"].Middle),a["H"].Middle,a["H"].Bottom),a["H"].Bottom,a["H"].Top),r=null!==(t=n[e])&&void 0!==t?t:a["H"].Middle;this.$store.commit("setInteractionArtboardVerticalAlign",r),this.showTextTip("已修改画板的对齐方式为「".concat(a["H"].getName(r),"」"))},hideHomeList:function(){this.homeListVisible=!1},clickHomeList:function(){var t=this.homeList;if(0!==t.length)return 1===t.length?(this.setCurArtboard(t[0]),void this.showTextTip("已切换到起始画板")):void(this.homeListVisible=!0);this.showTextTip("当前没有配置起始画板")},clickInteractionRectAlwaysVisible:function(){var t=!this.interactionRectAlwaysVisible;this.showTextTip(t?"已开启原型热区常显":"已关闭原型热区常显"),this.$store.commit("setInteractionRectAlwaysVisible",t)},clickGoArtboardByIndex:function(t){t<0&&(t=0);var e=this.renderDocumentArtboards,n=e.length;t>n-1&&(t=n-1);var r=e[t];this.setCurArtboard(r)}},computed:{verticalAlignCss:function(){switch(this.verticalAlign){case a["H"].Bottom:return"align-bottom";case a["H"].Top:return"align-top";default:return"align-middle"}},verticalAlign:function(){return this.$store.state.artboardDetail.interactionSet.verticalAlign},homeList:function(){var t=this.renderDocumentArtboards;return t.filter((function(t){var e;return null===(e=t.artboard)||void 0===e?void 0:e.flowStart}))},hasPrevArtboard:function(){var t=this.curArtboardIndex;return t>0},hasNextArtboard:function(){var t=this.renderDocumentArtboards,e=this.curArtboardIndex,n=t.length;return e<n-1},curArtboardIndex:function(){var t=this.curArtboard;return this.renderDocumentArtboards.findIndex((function(e){return e===t}))},interactionRectAlwaysVisible:function(){return this.$store.state.artboardDetail.interactionSet.rectAlwaysVisible},mobileInteraction:function(){return this.$store.state.mobileInteraction},hasSearchText:function(){return!!this.searchText},searchText:function(){return this.mobileInteraction.searchText},renderArtboardList:function(){var t,e,n=this.searchText,r=this.renderDocumentArtboards,i=this.hasSearchText,o=[];return n=i&&null!==(t=null===(e=n)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"",r.forEach((function(t){var e=null===t||void 0===t?void 0:t.artboard;if(e){if(i){var r=e.name;if(!r)return;if(-1===r.toLowerCase().indexOf(n))return}var a=e.boundsInParent;a&&o.push(t)}})),o}},watch:{curArtboard:function(t){t||(this.mobileInteraction.controlVisible=!1)}},data:function(){return{homeListVisible:!1}},created:function(){this.mobileInteraction.controlVisible=!1}},TA=SA,OA=(n("5952"),Object(Dr["a"])(TA,oA,aA,!1,null,"279744e8",null)),IA=OA.exports,AA=function(){var t=this,e=t._self._c;return t.tipVisible?e("div",{staticClass:"pop-tip-text"},[e("p",[t._v(t._s(t.tipText))])]):t._e()},FA=[],jA={computed:{tipText:function(){return this.$store.state.textTip.text},tipVisible:function(){return this.$store.state.textTip.visible}}},_A=jA,MA=(n("2ec9"),Object(Dr["a"])(_A,AA,FA,!1,null,"74a7e4ce",null)),LA=MA.exports,DA=l["f"]&&/MQQBrowser/i.test(navigator.userAgent),PA={components:{ArtboardList:iA,ArtboardInfo:IA,TipInMobile:LA,CloudNeedLoginTip:zl,Authority:Bw,EmptyData:zw,Header:pI,Nav:VI,AutomaticSync:Xr},methods:{onResize:function(){var t=document.documentElement,e=this.mobileSize;e.width=t.offsetWidth,e.height=t.offsetHeight},fullScreen:function(){var t=this.allArtboardLoadChecked,e=this.cloudIsLogin,n=this.cloudNeedLogin,r=this.cloudFolderNotFound,i=this.permission,o=this.isEmptyArtboardData,a=this.inList;t&&(n&&!e||r||i&&(o||a||this.isQQBrowser||this.isFullscreen||LT.requestFullscreen()))},onFullscreen:function(t){this.isFullscreen=t},setFullscreen:function(t){var e=document.documentElement;t?LT.onChange(this.onFullscreen):LT.offChange(this.onFullscreen);var n=t?"addEventListener":"removeEventListener";e[n]("touchend",this.fullScreen),e[n]("click",this.fullScreen),e=null}},data:function(){return{isFullscreen:LT.isFullscreen()}},computed:{isQQBrowser:function(){return DA},emptyText:function(){return this.inCloudMode?0===this.cloudCurrentFolderId?"私有云下还没有文件夹,请在标记狮中添加":this.inNetDiskFileMode?"文件不存在,可能已经被移动或删除":"当前文件夹没有画板信息":"未检测到数据,请尝试重新导出画板"},artboardLoadProgressText:function(){return Math.floor(1e4*this.artboardLoadProgress.current/this.artboardLoadProgress.count)/100+"%"},artboardLoadProgress:function(){return this.$store.state.artboardLoadProgress},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},isEmptyArtboardData:function(){return 0===this.documentArtboards.length},mobileSize:function(){return this.$store.state.mobileInteraction.mobileSize},inList:function(){return null==this.curArtboard}},created:function(){this.setFullscreen(!0),window.addEventListener("resize",this.onResize),this.onResize()},beforeDestroy:function(){this.setFullscreen(!1),window.removeEventListener("resize",this.onResize)}},NA=PA,EA=(n("d6df"),Object(Dr["a"])(NA,qO,JO,!1,null,"39ffaee1",null)),RA=EA.exports;function VA(t,e){Object(c["cb"])(!0),Object(c["s"])();var n=+Object(c["kb"])("commentid","#"),r="1"===Object(c["kb"])("isreply","#");t().then((function(){var t=Sr.state;Sr.commit("allArtboardLoadChecked",!0),t.cloud.allFoldersBoxVisible="1"===Object(c["S"])(a["f"],!1),kt(t.documentArtboards);var i=t.cloud.defaultArtboardGuid,o=null;if(i&&(o=gn.documentArtboards.find((function(t){return t.artboard.guid===i})),t.curArtboard!==o&&Sr.commit("curArtboard",{artboard:o})),n>0){var s,u,d=t.autoIntoInfo;d.commentArtboardId=null!==(s=null===(u=o)||void 0===u||null===(u=u.artboard)||void 0===u?void 0:u.cid)&&void 0!==s?s:0,d.commentId=n,d.isReply=r,Sr.commit("setRightNavType",a["U"].Comment)}e(),o||l["f"]||(t.renderDocuments.find((function(t){if(o=t.arts.find((function(t){return t.artboard.flowStart})),o)return!0})),o||t.renderDocuments.find((function(t){if(t.arts.length>0)return o=t.arts[0],!0})),o&&t.curArtboard!==o&&Sr.commit("curArtboard",{artboard:o}))}));var i=new o["a"]({store:Sr,render:function(t){return t(l["f"]?RA:KO)}});On((function(t){Sr.commit("isSupportWebp",t),i.$mount("#app")}))}var BA,HA,UA=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pop-box confirm",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"box"},[t.showCancel?e("a",{staticClass:"sys-close",attrs:{href:"javascript:;"},on:{click:t.clickCancel}}):t._e(),e("div",{staticClass:"title"},[t._v(t._s(t.title))]),e("div",{staticClass:"text"},[t._v(t._s(t.text))]),e("div",{staticClass:"btns"},[t.noText?e("a",{staticClass:"button btn-no",attrs:{href:"javascript:;"},on:{click:t.clickNo}},[t._v(t._s(t.noText))]):t._e(),e("a",{staticClass:"button btn-yes",class:{light:!t.inMobile},attrs:{href:"javascript:;"},on:{click:t.clickYes}},[t._v(t._s(t.yesText))])])])])},$A=[],GA={created:function(){window.addEventListener("keydown",this.onKeyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},methods:{onKeyDown:function(t){var e=t.keyCode||t.which;if(27===e){try{t.preventDefault(),t.stopPropagation()}catch(n){}this.showCancel?this.clickCancel():this.clickNo()}},clickCancel:function(){this.$emit("clickCancel")},clickYes:function(){this.$emit("clickYes")},clickNo:function(){this.$emit("clickNo")}},props:{title:{type:String,default:"提示"},text:{validator:function(){return!0}},yesText:{type:String,default:"确认"},noText:{type:String,default:"取消"},showCancel:{type:Boolean,default:!1}}},WA=GA,zA=(n("567c"),Object(Dr["a"])(WA,UA,$A,!1,null,"8aa1124e",null)),YA=zA.exports,XA=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pop-box prompt"},[e("form",{on:{submit:t.clickSubmit}},[e("div",{staticClass:"box"},[e("a",{staticClass:"sys-close",attrs:{href:"javascript:;",title:t.noText},on:{click:t.clickNo}}),e("div",{staticClass:"title"},[t._v(t._s(t.title))]),e("div",{staticClass:"text"},[e("UserInput",{ref:"text",attrs:{defaultBorder:!0,placeholder:t.placeholder,target:"text",initValue:t.text,maxLength:t.maxLength},on:{change:t.onChange}})],1),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light btn-yes",attrs:{href:"javascript:;"},on:{click:t.clickYes}},[t._v(t._s(t.yesText))])])])])])},KA=[],qA={methods:{clickSubmit:function(t){t.preventDefault(),this.clickYes()},onChange:function(t){this.value=t}},components:{UserInput:tf},props:{title:{type:String,default:"提示"},maxLength:{type:Number,default:256},placeholder:{type:String,default:""},text:String,yesText:{type:String,default:"确认"},noText:{type:String,default:"取消"}},data:function(){return{value:""}},created:function(){var t=this;this.value=this.text,Object(l["j"])(this.value)&&this.$nextTick((function(){var e=t.$refs.text;e&&e.setFocus&&e.setFocus()}))}},JA=qA,QA=(n("0913"),Object(Dr["a"])(JA,XA,KA,!1,null,"bebbefea",null)),ZA=QA.exports,tF=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pop-box"},[e("div",{staticClass:"box",class:{"no-padding":t.noPadding}},[t.title?e("h5",[t._v(t._s(t.title))]):t._e(),t.showClose?e("a",{staticClass:"sys-close",attrs:{href:"javascript:;"},on:{click:t.clickCancel}}):t._e(),e("custom-body",t._b({on:{cancel:t.clickCancel,confirm:t.clickConfirm}},"custom-body",t.customBodyPropsData,!1))],1)])},eF=[],nF={methods:{clickCancel:function(){this.$emit("cancel")},clickConfirm:function(t){this.$emit("confirm",t)}},props:{showClose:{type:Boolean,default:!0},customBodyPropsData:{type:Object,default:void 0},title:{type:String,default:void 0},noPadding:Boolean}},rF=nF,iF=(n("d1d9"),Object(Dr["a"])(rF,tF,eF,!1,null,"07954a3c",null)),oF=iF.exports,aF=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,o,s,u=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=!(u.length>2&&void 0!==u[2])||u[2],"string"!==typeof n&&(n=JSON.stringify(n)),o="".concat(c["d"],"/api/").concat(e),t.next=5,fetch(o,{method:"post",body:n,credentials:void 0});case 5:s=t.sent,t.t0=s.status,t.next=200===t.t0?9:500===t.t0?21:25;break;case 9:return t.next=11,s.text();case 11:if(n=t.sent,Object(l["j"])(n)){t.next=14;break}throw"接口".concat(e,"请求失败,不存在返回值");case 14:if(n=Object(c["wb"])(n),Object(l["k"])(n)){t.next=17;break}throw"接口".concat(e,"请求失败,无法解析返回值");case 17:if(n.success){t.next=20;break}throw n.code===a["cb"].NotLogin&&Object(c["yb"])(2e3).then((function(){window.location.reload(!0)})),n.errMsg;case 20:return t.abrupt("return",i?Object(c["i"])(n.data):n.data);case 21:return t.next=23,s.text();case 23:throw n=t.sent,n;case 25:throw"接口".concat(e,"请求失败");case 26:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),sF=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(l["k"])(n)){t.next=2;break}throw"接口「".concat(e,"」返回值格式异常");case 2:if(n.success){t.next=4;break}return t.abrupt("return",n);case 4:if(n=n.data,Object(l["j"])(n)){t.next=7;break}throw"接口「".concat(e,"」返回值格式异常,无法解析data");case 7:return i="".concat(c["d"],"/api/").concat(e),t.next=10,fetch(i,{method:"post",body:n,credentials:void 0});case 10:o=t.sent,t.t0=o.status,t.next=200===t.t0?14:500===t.t0?23:27;break;case 14:return t.next=16,o.text();case 16:if(n=t.sent,Object(l["j"])(n)){t.next=19;break}throw"接口「".concat(e,"」请求失败,不存在返回值");case 19:if(n=Object(c["wb"])(n),Object(l["k"])(n)){t.next=22;break}throw"接口「".concat(e,"」请求失败,无法解析返回值");case 22:return t.abrupt("return",n);case 23:return t.next=25,o.text();case 25:throw n=t.sent,"接口「".concat(e,"」").concat(n);case 27:throw"接口「".concat(e,"」请求失败");case 28:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),cF=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var o,a,s,l,u,d,h,f,m=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=m.length>2&&void 0!==m[2]?m[2]:0,a="pre"+e,t.next=4,aF(a,n,!1);case 4:return s=t.sent,l="".concat(c["f"],"router/web/webupdate.ashx"),u=document.createElement("iframe"),d="__postdata_"+Date.now(),u.name=d,u.style.cssText="width:1px;height:1px;position: absolute;top:-10px;left:-10px;overflow:hidden;",h=document.createElement("form"),h.style.cssText="width:1px;height:1px;position: absolute;top:-10px;left:-10px;overflow:hidden;",h.appendChild(u),h.target=d,h.method="POST",h.action=l,h.enctype="multipart/form-data",f=document.createElement("input"),f.name="router",f.value=e,h.appendChild(f),f=document.createElement("input"),f.name="body",f.value=s,h.appendChild(f),f=null,document.body.appendChild(h),t.abrupt("return",new Promise((function(t,n){var a,s=function(){clearTimeout(a),c&&(window.removeEventListener("message",c),document.body.removeChild(h),c=h=u=null)};o>0&&(a=setTimeout((function(){s(),n("「".concat(e,"」操作已超时"))}),o));var c=function(){var o=Object(i["a"])(Object(r["a"])().mark((function i(o){var a,c;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=o.source,a===u.contentWindow){r.next=3;break}return r.abrupt("return");case 3:if(r.prev=3,c=o.data,"string"!==typeof c){r.next=9;break}return r.abrupt("return",n(c));case 9:return r.prev=9,r.t0=t,r.next=13,sF(e,c);case 13:r.t1=r.sent,(0,r.t0)(r.t1),r.next=20;break;case 17:r.prev=17,r.t2=r["catch"](9),n(r.t2);case 20:return r.prev=20,s(),r.finish(20);case 23:case"end":return r.stop()}}),i,null,[[3,,20,23],[9,17]])})));return function(t){return o.apply(this,arguments)}}();window.addEventListener("message",c),h.submit()})));case 28:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),lF={computed:{webViewFocus:function(){return this.$store.state.webViewFocus},webViewHidden:function(){return this.$store.state.webViewHidden},webViewStateTimes:function(){return this.$store.state.webViewStateTimes},allFoldersBoxVisible:function(){return this.$store.state.cloud.allFoldersBoxVisible},inMobile:function(){return l["f"]},inMacOS:function(){return l["e"]},editComment:function(){return this.$store.state.editComment},inCommentDrawing:function(){var t=this.editComment;if(!t.drawing)return!1;var e=t.drawInfo.histories;return e.length>0},numberAutoRound:function(){return this.$store.state.setting.numberAutoRound},exportBoxBackground:function(){return this.$store.state.setting.exportBoxBackground},inCloudMode:function(){return this.$store.state.inCloudMode},artShowInListMode:function(){return this.inCloudMode&&this.$store.state.artShowInListMode},showArtListMap:function(){return this.inCloudViewerMode&&!this.artShowInListMode&&!this.inArtboardMode&&this.$store.state.showArtListMap},permission:function(){return this.$store.state.permission},cloudNeedLogin:function(){return this.inCloudMode&&this.$store.state.cloudNeedLogin},cloudIsLogin:function(){return this.inCloudMode&&this.$store.state.cloudIsLogin},cloudNickName:function(){return this.$store.state.cloudNickName},cloudUserEmail:function(){return this.$store.state.cloudUserEmail},cloudUserId:function(){return this.$store.state.cloudUserId},cloudUserIsDesigner:function(){return this.$store.state.cloudUserIsDesigner},cloudUserIsOwner:function(){return this.$store.state.cloudUserIsOwner},cloudUserKey:function(){return this.$store.state.cloudUserKey},cloudName:function(){return this.$store.state.cloudName},cloudKey:function(){return this.$store.state.cloudKey},cloudVersion:function(){return this.$store.state.cloudVersion},cloudFolderNotFound:function(){return this.$store.state.cloud.folderNotFound},cloudFolderInSpecify:function(){return this.$store.state.cloud.folderInSpecify},cloudFolderErrorText:function(){var t=this.cloudFolderNotFound,e=this.cloudFolderInSpecify;return e?l["f"]?"当前文件夹仅限定人员访问\n请使用有访问权限的账户登录":"当前文件夹仅限定人员访问,请使用有访问权限的账户登录":t?"链接已失效,无法找到对应的文件夹":null},cloudCurrentFolderId:function(){return this.$store.state.cloud.currentFolderId},cloudDefaultArtboardGuid:function(){return this.$store.state.cloud.defaultArtboardGuid},cloudSubFolders:function(){return this.$store.state.cloud.subFolders},cloudSubFiles:function(){return this.$store.state.cloud.subFiles},cloudParentFolder:function(){return this.$store.state.cloud.parentFolder},androidUseMipmap:function(){return this.$store.state.androidUseMipmap},calcPlatformUse:function(){var t=this.calcPlatformType;switch(t){case a["c"].ANDROID:case a["c"].WE_CHAT_MINI_PROGRAM:case a["c"].IOS:return t;case a["c"].CUSTOM:switch(this.calcPlatformCustomUnit){case a["d"].DP:return a["c"].ANDROID;case a["d"].PT:return a["c"].IOS;case a["d"].RPX:return a["c"].WE_CHAT_MINI_PROGRAM;default:return a["c"].WEB}default:return a["c"].WEB}},calcArtScale:function(){var t=this.curArtboard,e=this.inCloudViewerArtboardInfoMode;if(!t)return 1;var n=To(t,e);if(!n)return 1;var r=n.mlConfig;if(!r)return 1;var i=r.artScale;return null==i||i<=0?1:i},calcPlatformType:function(){return this.$store.state.platform.type},calcPlatformCustomUnit:function(){return this.$store.state.platform.customUnit},calcPlatformShowType:function(){var t=this.calcPlatformType;switch(t){case a["c"].ANDROID:case a["c"].IOS:case a["c"].WE_CHAT_MINI_PROGRAM:return t;case a["c"].CUSTOM:switch(this.calcPlatformCustomUnit){case a["d"].DP:return a["c"].ANDROID;case a["d"].PT:return a["c"].IOS;case a["d"].RPX:return a["c"].WE_CHAT_MINI_PROGRAM;default:return a["c"].WEB}default:return a["c"].WEB}},calcUnitTemplateValue:function(){if(!this.inArtboardMode)return"";var t=this.$store.state.unitTemplate.template;return t||""},calcPlatformCustomDocWidth:function(){if(!this.inArtboardMode)return 1;var t=this.$store.state.platform.customDocWidth;return(isNaN(t)||!isFinite(t)||t<1)&&(t=0),t},calcPlatformCustomDocWidthShow:function(){var t=this.calcPlatformCustomDocWidth;if(0===t){var e=this.curArtboard,n=this.inCloudViewerArtboardInfoMode;if(e){var r,i,o=To(e,n);if(o)t=null!==(r=null===(i=o.boundsInArtboard)||void 0===i?void 0:i.width)&&void 0!==r?r:0}}return t},scaleArtboard:function(){return this.$store.state.scale.artboard},scaleList:function(){return this.$store.state.scale.list},scaleImageViewer:function(){var t=this.$store.state.imageViewer;return t.scale},inArtboardMode:function(){return null!==this.curArtboard},inCloudViewerMode:function(){return this.inCloudMode&&this.$store.state.cloud.renderMode===a["W"].Normal},inCloudViewerArtboardInfoMode:function(){return this.inCloudViewerMode&&this.inArtboardMode},inNetDiskFileMode:function(){return this.inCloudMode&&this.$store.state.cloud.renderMode===a["W"].File},inInteractionMode:function(){return this.inCloudMode&&this.$store.state.cloud.renderMode===a["W"].Interaction},curNetDiskFile:function(){var t,e;return this.inNetDiskFileMode&&null!==(t=null===(e=this.curFileInfo)||void 0===e?void 0:e.renderFile)&&void 0!==t?t:null},curFileViewUrl:function(){return this.getNetDiskFileViewUrl(this.curNetDiskFile,!1)},curFileDownloadUrl:function(){return this.getNetDiskFileViewUrl(this.curNetDiskFile,!0)},curFileInfo:function(){if(!this.inNetDiskFileMode)return null;var t=this.$store.state.cloud.fileInfo;if(!t)return null;var e=t.file,n=t.file,r=n.name,i=n.fileName,o=n.fileExt,a=t.curVerId,s=t.historyFiles,c=a>0&&e.verId!==a;return{name:r,fileName:i,fileExt:o,mainFile:e,curVerId:c?a:e.verId,renderFile:c?null===s||void 0===s?void 0:s.find((function(t){return t.verId===a})):e,inVerData:c}},curArtboard:function(){return this.$store.state.curArtboard},curArtboardLoadedVerData:function(){return To(this.curArtboard,this.inCloudViewerArtboardInfoMode)},curArtboardGuid:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.guid)&&void 0!==t?t:""},curArtboardId:function(){var t;return null===(t=this.curArtboard)||void 0===t||null===(t=t.artboard)||void 0===t?void 0:t.cid},curNode:function(){return this.$store.state.curNode},artboardInComment:function(){return this.$store.state.rightNavType===a["U"].Comment},inMultDownMode:function(){return this.inArtboardMode&&this.$store.state.rightNavType===a["U"].Slice},clickedNode:function(){return this.$store.state.clickedNode},enterNode:function(){return this.$store.state.enterNode},documents:function(){return this.$store.state.documents},renderDocuments:function(){return this.$store.state.renderDocuments},filterDocumentGuid:function(){return this.$store.state.filterDocumentGuid},filterDocumentType:function(){var t,e=this.filterDocumentGuid,n=this.$store.state.sortDocumentsWithSketchDocument;if(!Object(l["j"])(e)||"none"===e)return a["K"].None;var r=n.find((function(t){return t.guid===e}));return null!==(t=null===r||void 0===r?void 0:r.type)&&void 0!==t?t:a["K"].None},documentArtboards:function(){return this.$store.state.documentArtboards},renderDocumentArtboards:function(){return this.$store.state.renderDocumentArtboards},documentName:function(){return this.$store.state.documentName},inArtboardMultDownMode:function(){return!this.inArtboardMode&&this.$store.state.inArtboardMultDownMode},userFolderSpecifyMemberAuthority:function(){return this.$store.state.cloud.userFolderSpecifyMemberAuthority}},methods:{setUserFavoriteFolder:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o,s,c,u,d,h;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.checkLoginThrow(!0);case 2:if(r.sent){r.next=4;break}return r.abrupt("return");case 4:if(Object(l["k"])(t)){r.next=6;break}throw new Error("folder is null");case 6:return o=t.id,s=t.name,c="SetFolderFavoriteByWeb",u=new FormData,u.append("folderid",o),u.append("status",e),r.next=13,n.fetchPostCloudApi(c,{body:u,abortKey:"".concat(c,":").concat(o)});case 13:if(d=r.sent,Object(l["k"])(d)){r.next=16;break}throw new Error("返回值异常,无法解析数据:".concat(d));case 16:if(d.success){r.next=18;break}throw new Error(d.errMsg);case 18:if(Object(l["k"])(d.data)){r.next=20;break}return r.abrupt("return");case 20:if(h=d.data,Gn(zn(a["Y"].FavoriteFolder)),h.id===o){r.next=24;break}return r.abrupt("return");case 24:return n.showTextTip(e===a["q"].Favorite?"已收藏文件夹「".concat(s,"」"):"已取消收藏文件夹「".concat(s,"」")),r.abrupt("return",h);case 26:case"end":return r.stop()}}),i)})))()},setUserFavoriteArtboard:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o,s,c,u,d,h,f,m,p;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.checkLoginThrow(!0);case 2:if(r.sent){r.next=4;break}return r.abrupt("return");case 4:if(Object(l["k"])(t)){r.next=6;break}throw new Error("artboard is null");case 6:return s=t.parentId,c=t.id,u=t.cid,d=t.name,null!==(o=u)&&void 0!==o||(u=c),h=new FormData,h.append("folderid",s),h.append("artboardid",u),h.append("status",e),f="SetArtboardStatusByWeb",r.next=15,n.fetchPostCloudApi(f,{body:h,abortKey:"".concat(f,":").concat(u)});case 15:if(m=r.sent,Object(l["k"])(m)){r.next=18;break}throw new Error("返回值异常,无法解析数据:".concat(m));case 18:if(m.success){r.next=20;break}throw new Error(m.errMsg);case 20:if(Object(l["k"])(m.data)){r.next=22;break}return r.abrupt("return");case 22:if(p=m.data,Gn(zn(a["Y"].FavoriteArtboard)),p.id===u){r.next=26;break}return r.abrupt("return");case 26:return n.showTextTip(e===a["i"].Dev?"已标记画板「".concat(d,"」为待开发"):"已取消画板「".concat(d,"」的待开发状态")),r.abrupt("return",p);case 28:case"end":return r.stop()}}),i)})))()},getUserFolderRecentsAsync:function(t){var e=arguments,n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o,s,c,u,d,h,f,m,p,v,b,g,w,x,y;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=e.length>1&&void 0!==e[1]&&e[1],c=e.length>2&&void 0!==e[2]?e[2]:null,u=n.cloudVersion,d=!$r.notSupportRecentData(u),h=!0,!d){r.next=9;break}return r.next=8,n.getUserRecentsAsync(a["Y"].FavoriteArtboard|a["Y"].FavoriteFolder,"",t,{useMini:!0,resultToDict:h,noCache:s,abortKey:c});case 8:return r.abrupt("return",r.sent);case 9:return r.next=11,n.checkLoginThrow();case 11:if(r.sent){r.next=13;break}return r.abrupt("return");case 13:if(f=function(t){return h?t.reduce((function(t,e){return t[e.id||e.secId]=e,t}),{}):t},m=f([]),p=f([]),v=!0,b=!$r.notSupportAiPrompt(u),b){r.next=20;break}return r.abrupt("return",{favArtboards:f([]),recentFolders:m,favFolders:p,mini:v});case 20:return g="GetArtboardStatusListByWeb",w=new FormData,w.append("folderid",t),r.next=25,n.fetchPostCloudApi(g,{body:w,abortKey:g});case 25:if(x=r.sent,Object(l["k"])(x)){r.next=28;break}throw new Error("返回值异常,无法解析数据:".concat(x));case 28:if(x.success){r.next=30;break}throw new Error(x.errMsg);case 30:if(y=x.data,null!==(o=y)&&void 0!==o||(y=[]),Object(l["i"])(y)){r.next=34;break}throw new Error("返回值异常,无法解析数据:".concat(y));case 34:return y=f(y.map((function(t){if(!Object(l["k"])(t))return null;var e=t.id,n=t.updateTimes,r=t.status,i={id:e,recentTimes:n};return null!=r&&(i.status=r),i})).filter((function(t){return null!=t}))),r.abrupt("return",{favArtboards:y,recentFolders:m,favFolders:p,mini:v});case 36:case"end":return r.stop()}}),i)})))()},getUserRecentsAsync:function(t,e){var n=arguments,o=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var a,s,c,l,u,d,h,f,m,p,v,b,g;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=n.length>2&&void 0!==n[2]?n[2]:-1,s=n.length>3&&void 0!==n[3]?n[3]:{},c=s.useMini,l=void 0!==c&&c,u=s.resultToDict,d=void 0!==u&&u,h=s.noCache,f=void 0!==h&&h,m=s.abortKey,p=void 0===m?null:m,r.next=4,o.checkLoginThrow();case 4:if(r.sent){r.next=6;break}return r.abrupt("return");case 6:if(v="".concat(a,"/").concat(l?1:0,"/").concat(d?1:0,":").concat(e),b=zn(t),g=f?null:Wn(b,v),!g){r.next=11;break}return r.abrupt("return",g);case 11:return r.next=13,o._getUserRecentsAsync(t,e,a,l,d,p);case 13:return g=r.sent,$n(b,v,g,5e3),r.abrupt("return",g);case 16:case"end":return r.stop()}}),i)})))()},_getUserRecentsAsync:function(t,e){var n=arguments,o=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var c,u,d,h,f,m,p,v,b,g,w,x,y,k,C,S,T,O,I,A;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return c=n.length>2&&void 0!==n[2]?n[2]:-1,u=n.length>3&&void 0!==n[3]&&n[3],d=n.length>4&&void 0!==n[4]&&n[4],h=n.length>5&&void 0!==n[5]?n[5]:null,u=c>=0&&u?1:0,f=new FormData,f.append("type",t),f.append("search",null!==e&&void 0!==e?e:""),f.append("folderid",c),f.append("mini",u),r.next=12,o.fetchPostCloudApi("GetUserRecordsByWeb",{body:f,abortKey:h});case 12:if(m=r.sent,Object(l["k"])(m)){r.next=15;break}throw new Error("返回值异常,无法解析数据:".concat(m));case 15:if(m.success){r.next=17;break}throw new Error(m.errMsg);case 17:if(p=m.data,Object(l["k"])(p)){r.next=20;break}throw new Error("返回值异常,无法解析数据:".concat(p));case 20:return v=p.recentFolders,b=p.favArtboards,g=p.favArtboardDatas,w=p.mini,x=p.favFolders,y=p.updaterNames,k=p.fromFolders,Object(l["k"])(k)||(k={}),Object(l["k"])(y)||(y={}),Object(l["i"])(v)||(v=[]),Object(l["i"])(x)||(x=[]),Object(l["i"])(b)||(b=[]),Object(l["i"])(g)||(g=[]),C=function(t){return d?t.reduce((function(t,e){return t[e.id||e.secId]=e,t}),{}):t},w?(S=[v,x,b].map((function(t){return C(t.map((function(t){if(!Object(l["k"])(t))return null;var e=t.data,n=t.updateTimes,r=t.status,i={id:e,recentTimes:n};return null!=r&&(i.status=r),i})).filter((function(t){return null!=t})))})),T=Object(Bt["a"])(S,3),v=T[0],x=T[1],b=T[2]):(O=function(t,e){var n=[];while(t>0){var r=k[t];if(!r)break;n.unshift(r),t=r.parentId}return(0==n.length||e)&&n.unshift({folderId:0,name:"根目录",parentId:0,shareMode:a["v"].Public}),n},I=[v,x].map((function(t,e){return C(t.map((function(t){if(!Object(l["k"])(t))return null;var n=t.data,r=t.updateTimes,i=O(n,!0),o=i.splice(i.length-1,1)[0];return Object(l["k"])(o)?(o=Object(s["a"])(Object(s["a"])({},o),{},{recentTimes:r,parents:i}),o.key="".concat(e,"__folder_").concat(o.id),o.localSearchType=a["Z"].Folder,o):null})).filter((function(t){return null!=t})))})),A=Object(Bt["a"])(I,2),v=A[0],x=A[1],b=C(g.map((function(t){var e;if(!Object(l["k"])(t))return null;var n=t.data,r=t.updateTimes;return Object(l["k"])(n)?(n.recentTimes=r,n.parents=O(n.parentId),n.updaterName=null!==(e=y[n.updaterId])&&void 0!==e?e:null,n.key="favartboard_".concat(n.id),n.localSearchType=a["Z"].Artboard,n):null})).filter((function(t){return null!=t})))),r.abrupt("return",{recentFolders:v,favFolders:x,favArtboards:b,mini:w});case 30:case"end":return r.stop()}}),i)})))()},copyNetdiskFileViewUrl:function(t){var e;if(Object(l["k"])(t)){var n=null!==(e=this.getNetdiskFileOnlineViewUrl(t))&&void 0!==e?e:t.viewUrl;0===n.indexOf("/")&&(n=location.origin+n),Object(c["q"])(n)?this.showTextTip("链接已复制到剪切板"):this.showTextTip("链接复制到剪切板失败")}},isNetdiskFileCanOnlineView:function(t){if(!Object(l["k"])(t))return!1;var e=this.cloudVersion;if($r.supportPreviewAddTypePage(e))return!0;var n=t.fileType,r=t.fileExt,i=t.name,o=$r.supportDocxPreview(e);return a["L"].isSupportOnlineViewType(n,null!==r&&void 0!==r?r:i,o.support)},getNetdiskFileOnlineViewUrl:function(t,e){if(!Object(l["k"])(t))return null;var n=t.fileType,r=t.fileExt,i=t.name,o=t.viewUrl,s=this.cloudVersion;if($r.supportPreviewAnyFile(s))return o;var u=$r.supportDocxPreview(s),d=null!==r&&void 0!==r?r:i;return!0===e&&n===a["L"].Url&&$r.supportPreviewAddTypePage(s)?Object(c["h"])(o,{type:"page"}):a["L"].isSupportOnlineViewType(n,d,u.support)?((a["L"].isDocxFile(n,d)&&u.needAddTypePage||a["L"].isTextFile(n)&&$r.previewTxtNeedAddTypePage(s))&&(o=Object(c["h"])(o,{type:"page"})),o):!0===e&&$r.supportPreviewAddTypePage(s)?Object(c["h"])(o,{type:"page"}):null},setBeginnerGuideRect:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a["j"].TopLeft;this.$nextTick((function(){var i=0,o=0,a=0,s=0;if(Object(l["k"])(e))i=e.x,o=e.y,a=e.width,s=e.height,r=e.direction;else if(n._isDestroyed||n._isBeingDestroyed||!n._isMounted||null==e);else{var c=n.$refs[e];if(c){var u=c.getBoundingClientRect();u.width>=0&&u.height>0&&(i=Math.round(u.x),o=Math.round(u.y),a=Math.round(u.width),s=Math.round(u.height))}}n.$store.commit("setBeginnerGuideRect",{step:t,rect:{x:i,y:o,width:a,height:s,direction:r}})}))},removeCloudItem:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,Object(l["k"])(t)){n.next=3;break}throw new Error("参数异常");case 3:return i=new FormData,i.append("parentId",t.parentId),t.fileSecId&&i.append("fileSecId",t.fileSecId),t.artboardGuid&&i.append("artGuid",t.artboardGuid),n.next=9,e.fetchPostCloudApi("ItemRemoveByWeb",{timeout:3e4,body:i});case 9:if(t=n.sent,Object(l["k"])(t)){n.next=12;break}throw new Error("返回值异常,无法解析数据:".concat(t));case 12:if(t.success){n.next=14;break}throw new Error(t.errMsg);case 14:return e.showTextTip(t.errMsg),n.abrupt("return",!0);case 18:return n.prev=18,n.t0=n["catch"](0),e.alert({title:"删除失败",text:n.t0}),n.abrupt("return",!1);case 22:case"end":return n.stop()}}),n,null,[[0,18]])})))()},goCloudFolderInteractionUrl:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function o(){var a,s,u,d,h,f;return Object(r["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a="/interactionviewer/".concat(t,"/").concat(e?"".concat(e,"/"):""),!l["g"]){o.next=28;break}if(s=n.$store,u=t!==s.state.cloud.currentFolderId,o.prev=4,s.state.mobileInteraction.listFetchState!==c["a"].Fetching){o.next=7;break}return o.abrupt("return");case 7:return s.state.mobileInteraction.listFetchState=c["a"].Fetching,o.next=10,n.fetchPostCloudApi(a,{timeout:1e4,abortKey:"goCloudFolderInteractionUrl"});case 10:return d=o.sent,n.setCurArtboard(null),gn.dataInit({cloudData:d},s.state.cloudListSort),h=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,gn.allArtboardLoadChecked((function(){}));case 2:s.commit("setDocument",gn);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){u&&s.commit("setFilterDocumentGuid",null)},o.next=17,h();case 17:kt(s.state.documentArtboards),f(),s.state.mobileInteraction.listFetchState=c["a"].Success,o.next=26;break;case 22:o.prev=22,o.t0=o["catch"](4),s.state.mobileInteraction.listFetchState=c["a"].Error,n.showTextTip(o.t0);case 26:o.next=29;break;case 28:location.href=a;case 29:case"end":return o.stop()}}),o,null,[[4,22]])})))()},checkCloudItem:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o,s;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=new FormData,o.append("number"===typeof t?"id":e===a["l"].File?"secid":"id",t),o.append("type",e),r.next=5,n.fetchPostCloudApi("checkitemexistbyweb",{timeout:1e4,body:o});case 5:if(s=r.sent,Object(l["k"])(s)){r.next=8;break}throw new Error("返回值异常(checkitemexist):".concat(s));case 8:if(s.success){r.next=10;break}throw new Error(s.errMsg);case 10:if(s.data){r.next=12;break}throw new Error("返回值异常(checkitemexist):".concat(JSON.stringify(s)));case 12:return r.abrupt("return",s.data);case 13:case"end":return r.stop()}}),i)})))()},clickNetDiskFile:function(t,e){if(t){var n=this.getNetdiskFileOnlineViewUrl(t,e);n?window.open(n):this.clickDownloadNetDiskFile(t)}},clickDownloadNetDiskFile:function(t){var e,n,r=this.getNetDiskFileViewUrl(t,!0);if(r){var i=null!==(e=t.name)&&void 0!==e?e:"".concat(t.fileName).concat(null!==(n=t.fileExt)&&void 0!==n?n:"");Object(c["w"])(i,r)}},getNetDiskFileViewUrl:function(t,e){return t&&Object(l["j"])(t.viewUrl)?Object(c["h"])(t.viewUrl,{type:e?"download":"res",t:t.updateTimeTimes}):null},alert:function(t){var e=t.title,n=t.text,r=t.yesText,i=void 0===r?"确认":r;return this.confirm({title:e,text:n,noText:"",yesText:i})},confirm:function(t){var e=t.title,n=t.text,r=t.noText,i=void 0===r?"取消":r,a=t.yesText,s=void 0===a?"确认":a,c=t.showCancel,l=void 0!==c&&c;return new Promise((function(t){var r=function(){if(a){var t=a.$el;a.$destroy(),a=null,t&&t.parentNode&&(t.parentNode.removeChild(t),t=null)}},a=new(o["a"].extend(YA))({propsData:{title:e,text:n,noText:i,yesText:s,showCancel:l},methods:{clickCancel:function(){r(),t("cancel")},clickYes:function(){r(),t(!0)},clickNo:function(){r(),t(!1)}}}).$mount();document.body.appendChild(a.$el)}))},prompt:function(t){var e=t.title,n=t.text,r=t.placeholder,i=void 0===r?"":r,a=t.beforeYes,s=t.maxLength,c=void 0===s?256:s,l=t.noText,u=void 0===l?"取消":l,d=t.yesText,h=void 0===d?"确认":d;return new Promise((function(t,r){var s=function(){if(l){var t=l.$el;l.$destroy(),l=null,t&&t.parentNode&&(t.parentNode.removeChild(t),t=null)}},l=new(o["a"].extend(ZA))({propsData:{title:e,text:n,noText:u,yesText:h,placeholder:i,maxLength:c},methods:{clickYes:function(){var e=this.value;"function"!==typeof a||!1!==a(e)?(s(),t(e)):this.$refs.text.setFocus()},clickNo:function(){s(),r()}}}).$mount();document.body.appendChild(l.$el)}))},popup:function(t,e){var n,r,i=this;e||(e={});var a=null===(n=e.showClose)||void 0===n||n,s=null!==(r=e.props)&&void 0!==r?r:void 0,c=e,l=c.title,u=c.noPadding,d=void 0!==u&&u;return new Promise((function(e){var n=function(){if(r){var t=r.$el;r.$destroy(),r=null,t&&t.parentNode&&(t.parentNode.removeChild(t),t=null)}},r=new(o["a"].extend(oF))({propsData:{showClose:a,customBodyPropsData:s,title:l,noPadding:d},components:{"custom-body":t}});r.$store=i.$store,r.$on("confirm",(function(t){n(),e({canceled:!1,data:t})})),r.$on("cancel",(function(){n(),e({canceled:!0,data:null})})),r.$mount(),document.body.appendChild(r.$el)}))},cleanFoldersCache:function(t){var e=this,n=function(t){var n="allfoldersbyweb_".concat(e.cloudUserKey,"_").concat(t?1:0);Object(c["nb"])(n),Object(c["nb"])("".concat(n,".t"))};void 0===t||null===t?(n(!0),n(!1)):n(t)},getAllUsers:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,o,a,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.cloudVersion,i=t.inCloudMode,o=t.cloudIsLogin,i){e.next=3;break}return e.abrupt("return",null);case 3:if(!$r.notSupportGetFolders(n)){e.next=5;break}throw new Error("无法使用@功能,私有云版本过低(".concat(n,"),请先升级私有云部署包"));case 5:if(o){e.next=7;break}throw new Error("未登录,请先登录");case 7:if(a=Wn("cloudusers","all"),!a){e.next=10;break}return e.abrupt("return",a);case 10:return e.next=12,t.fetchPostCloudApi("GetUsersByWeb",{method:"post",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});case 12:if(s=e.sent,Object(l["k"])(s)){e.next=15;break}throw new Error("返回值异常,无法解析数据:".concat(s));case 15:if(s.success){e.next=17;break}throw new Error(s.errMsg);case 17:if(a=s.data,Object(l["i"])(a)){e.next=20;break}throw new Error("返回值异常,无法解析数据:".concat(JSON.stringify(s)));case 20:return a.forEach((function(t){var e,n=t.nickName;e=n?n[n.length-1]:"-",t.userFaceText=e})),a.sort((function(t,e){var n=Object(c["hb"])(t.nickName,e.nickName);return 0==n&&(n=Object(c["hb"])(t.email,e.email)),n})),$n("cloudusers","all",a,3e4),e.abrupt("return",a);case 24:case"end":return e.stop()}}),e)})))()},searchWebItem:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,s,u,d,h,f,m,p,v,b,g,w;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.cloudVersion,o=e.inCloudMode,o){n.next=3;break}return n.abrupt("return",null);case 3:if(!$r.notSupportWebItemSearch(i)){n.next=5;break}throw new Error("私有云版本过低(".concat(i,"),请先升级私有云部署包"));case 5:if(s="webitemsearch",u="".concat(e.cloudUserKey,"_").concat(t),d=Wn(s,u),Object(l["i"])(d)){n.next=32;break}return n.next=11,e.fetchPostCloudApi("webitemsearch",{abortKey:"webitemsearch",timeout:1e4,method:"post",body:"wd=".concat(encodeURIComponent(t)),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});case 11:if(d=n.sent,Object(l["k"])(d)){n.next=14;break}throw new Error("返回值异常,无法解析数据:".concat(d));case 14:if(d.success){n.next=16;break}throw new Error(d.errMsg);case 16:if(d=d.data,Object(l["k"])(d)){n.next=19;break}throw new Error("返回值异常,无法解析数据:".concat(JSON.stringify(d)));case 19:h=d,f=h.folders,m=h.artboards,p=h.files,v=h.updaterNames,b=h.fromFolders,g=h.allParents,Object(l["i"])(f)||(f=[]),Object(l["i"])(m)||(m=[]),Object(l["i"])(p)||(p=[]),Object(l["k"])(v)||(v={}),Object(l["k"])(b)||(b={}),d=[],w=function(t){if(g){var e=t.parents=[],n=t.parentId;while(n>0){var r=b[n];if(!r)break;e.unshift(r),n=r.parentId}0==e.length&&e.push({folderId:0,name:"根目录",parentId:0,shareMode:a["v"].Public})}else t.parents=null},f.forEach((function(t){var e=b[t];e&&(e=Object.assign({localSearchType:a["Z"].Folder},e),e.parent=b[e.parentId],w(e),d.push(e))})),m.forEach((function(t){var e;t&&(t.localSearchType=a["Z"].Artboard,t.updaterName=null!==(e=v[t.updaterId])&&void 0!==e?e:"undefined",t.parent=b[t.parentId],w(t),d.push(t))})),p.forEach((function(t){var e;t&&(t.localSearchType=a["Z"].File,t.updaterName=null!==(e=v[t.updaterId])&&void 0!==e?e:"undefined",t.parent=b[t.parentId],w(t),d.push(t))})),d.sort((function(t,e){return Object(c["hb"])(t.name,e.name)})),$n(s,u,d,5e3);case 32:return n.abrupt("return",d);case 33:case"end":return n.stop()}}),n)})))()},getAllFolders:function(t,e){var n=arguments,o=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var s,u,d,h,f,m,p,v,b,g,w,x,y,k,C,S,T,O,I;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=!(n.length>2&&void 0!==n[2])||n[2],u=o.cloudVersion,d=o.inCloudMode,d){r.next=4;break}return r.abrupt("return",null);case 4:if(!$r.notSupportGetFolders(u)){r.next=6;break}throw new Error("私有云版本过低(".concat(u,"),请先升级私有云部署包"));case 6:if(f=!1,m="allfoldersbyweb_".concat(o.cloudUserKey,"_").concat(t?1:0),p=Object(c["S"])(m+".t",!0),"number"===typeof p&&p>0&&(v=Math.abs(Date.now()-p),f=v<1e4),f&&(h=Object(c["S"])(m,!0)),Object(l["i"])(h)){r.next=24;break}return r.next=14,o.fetchPostCloudApi("getallfoldersbyweb",{method:"post",body:"needPreview=".concat(t?1:0),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});case 14:if(h=r.sent,Object(l["k"])(h)){r.next=17;break}throw new Error("返回值异常,无法解析数据:".concat(h));case 17:if(h.success){r.next=19;break}throw new Error(h.errMsg);case 19:if(h=h.data,Object(l["i"])(h)){r.next=22;break}throw new Error("返回值异常,无法解析数据:".concat(JSON.stringify(h)));case 22:Object(c["tb"])(m,h),Object(c["tb"])(m+".t",Date.now());case 24:if(b={},g={},w=null,h.forEach((function(t){if(t){0===t.id&&(w=t),t.childArtboardCount=0,t.childFileCount=0,t.childFolderCount=0,b[t.id]=t;var e=g[t.parentId];e||(e=g[t.parentId]=[]);var n=g[t.id];n||(n=g[t.id]=[]),t.childs=n,0===t.id&&0===t.parentId||e.push(t)}})),x=!1,y=function(t,e){var n=Object(c["hb"])(t.name,e.name);return x?-n:n},Object.keys(g).forEach((function(t){var e=g[t];e.sort(y)})),h.forEach((function(t){t&&(t.parent=0===t.id?null:b[t.parentId],t.childsVisible=0===t.id,t.deepCount=0===t.id?0:1,t.name?t.nameLower=t.name.toLowerCase():t.name=t.nameLower="")})),h.forEach((function(t){var e;if(t&&!((null===(e=t.childs)||void 0===e?void 0:e.length)>0)){var n=t,r=n.parent;while(r)r.updateTimes=Math.max(r.updateTimes,t.updateTimes),t=r,r=r.parent}})),k=Object(c["S"])(a["a"],!0),Object(l["k"])(k)||(k={}),C=Object.keys(k),S=o.cloudCurrentFolderId,s&&S>=0&&C.push(S),C.forEach((function(t){var e=b[t];while(e)(e.id||0!==e.childs.length)&&(e.childsVisible=!0),e=e.parent})),h.forEach((function(t){var e=t;while(null!=(e=e.parent)){var n,r,i;e.childArtboardCount+=null!==(n=t.artboardCount)&&void 0!==n?n:0,e.childFileCount+=null!==(r=t.fileCount)&&void 0!==r?r:0,e.childFolderCount+=null!==(i=t.folderCount)&&void 0!==i?i:0}})),!e){r.next=48;break}return T=[],O=!1,I=function t(e,n,r,i,o){if(n){n.deepCount=r,n.rootId=i,(0!==n.id||O)&&e.push(n);var s=n.childs;null!=o&&(s=s.map((function(t){return t})),He(s,"updateTimes",a["m"].Folder,o)),s.forEach((function(n){t(e,n,r+1,i,o)}))}},I(T,w,O?0:-1,w.id,null),r.t0=w,r.t1=function(t){var e=[],n=this.root;return I(e,n,O?0:-1,n.id,t),e},r.abrupt("return",{root:r.t0,_folders:null,get folders(){return T=this._folders,T||(T=this._folders=this.sortBy(null)),T},sortBy:r.t1});case 48:return r.abrupt("return",w);case 49:case"end":return r.stop()}}),i)})))()},goCloudPath:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o,s,u,d,h,f,m,p,v,b,g,w,x,y,k,C,S,T,O,I,A,F,j,_;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.folderId,o=void 0===i?0:i,s=t.artboardId,u=void 0===s?0:s,d=t.artboardGuid,h=void 0===d?"":d,f=t.fileSecId,m=void 0===f?null:f,p=t.verId,v=void 0===p?null:p,b=t.commentId,g=void 0===b?0:b,w=t.fileUsePage,x=void 0!==w&&w,y=t.isReply,k=void 0!==y&&y,C=t.newWindow,S=void 0!==C&&C,T=t.checkArtboardExist,O=void 0!==T&&T,!(g>0&&e.cloudCurrentFolderId===o&&e.inCloudViewerMode)){n.next=22;break}if(I=e.documentArtboards,A=e.curArtboardId,F=e.$store.state.autoIntoInfo,A!==u){n.next=11;break}return e.$store.commit("setRightNavType",a["U"].Comment),F.isReply=k,F.commentArtboardId=u,F.commentId=g,n.abrupt("return");case 11:if(!Object(l["i"])(I)){n.next=21;break}if(j=I.find((function(t){var e;return(null===t||void 0===t||null===(e=t.artboard)||void 0===e?void 0:e.cid)===u})),!j){n.next=21;break}return e.$store.commit("setRightNavType",a["U"].Comment),e.setCurArtboard(j),F.commentArtboardId=u,F.commentId=g,F.isReply=k,n.abrupt("return");case 21:throw new Error("未找到画板信息,可能已经被删除");case 22:if(!(O&&u>0)){n.next=25;break}return n.next=25,e.checkCloudItem(u,a["l"].Artboard);case 25:0==u&&Object(l["j"])(m)?_="/fileviewer/".concat(o,"/").concat(m).concat(null!=v?"_".concat(v):"","/").concat(x?"?type=page":""):(_=Object(c["E"])(o),h&&(_+="".concat(h,"/"),g>0&&(_+="#commentid=".concat(g,"&isreply=").concat(k?"1":"0")))),S?window.open(_):window.location.href=_;case 27:case"end":return n.stop()}}),n)})))()},checkUserState:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.inCloudMode&&t.cloudNeedLogin){e.next=2;break}return e.abrupt("return");case 2:return n=new FormData,n.append("folderid",t.cloudCurrentFolderId),e.next=6,t.fetchPostCloudApi("getmystate",{body:n});case 6:if(i=e.sent,Object(l["k"])(i)){e.next=9;break}throw"返回值异常";case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))()},cryptoMarklionWeb2:function(t,e){var n=arguments,o=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var s,l;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=n.length>2&&void 0!==n[2]?n[2]:0,r.next=3,cF(t,e,s);case 3:if(e=r.sent,e.success){r.next=19;break}r.t0=e.code,r.next=r.t0===a["cb"].NotLogin?8:18;break;case 8:return o.showTextTip(e.errMsg),r.next=11,fetch("".concat(c["d"],"/api/logout"),{method:"post",body:""});case 11:return l=r.sent,r.next=14,l.text();case 14:return r.next=16,Object(c["yb"])(2e3);case 16:return window.location.reload(!0),r.abrupt("break",18);case 18:throw e.errMsg;case 19:return r.abrupt("return",e);case 20:case"end":return r.stop()}}),i)})))()},goCloudLogout:function(){return Object(i["a"])(Object(r["a"])().mark((function t(){var e,n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(c["d"],"/api/logout"),{method:"post",body:""});case 3:return e=t.sent,t.next=6,e.text();case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:return t.prev=10,n="".concat(c["f"],"router/web/weblogout.ashx?redirect=").concat(encodeURIComponent(Vn.href)),l["g"]?location.replace(n):window.location.href=n,t.finish(10);case 14:case"end":return t.stop()}}),t,null,[[0,8,10,14]])})))()},getCurrentInteractionUrl:function(){if(this.inNetDiskFileMode)return null;var t,e=this.cloudCurrentFolderId,n=this.curArtboard,r=this.filterDocumentGuid,i=window.location;t="".concat(i.protocol,"//").concat(i.host,"/interactionviewer/").concat(e,"/"),n&&(t+="".concat(encodeURIComponent(n.artboard.guid),"/"));var o=!1,a=function(e,n){t+="".concat(o?"&":"?").concat(e,"=").concat(encodeURIComponent(n)),o=!0};return r&&a("filterDoc",r),t},goCloudLogin:function(){var t=location.href;t=t.replace(/https?:\/\/[^/]+\//i,"/"),t="".concat(c["f"],"web/?action=cloud.login&cloudkey=").concat(encodeURIComponent(this.cloudKey),"&ver=").concat(encodeURIComponent(this.cloudVersion),"&redirect=").concat(encodeURIComponent(t)),l["g"]?location.replace(t):location.href=t},getCalcPlatformUnit:function(t){var e;switch(this.calcPlatformType){case a["c"].ANDROID:e=t?"sp":"dp";break;case a["c"].IOS:e="pt";break;case a["c"].WE_CHAT_MINI_PROGRAM:e="rpx";break;case a["c"].CUSTOM:e=this.getCalcPlatformCustomUnitText(t);break;default:e="px";break}return e},getCalcPlatformCustomUnitText:function(t){var e,n=this.calcPlatformCustomUnit;switch(n){case a["d"].DP:e=t?"sp":"dp";break;case a["d"].RPX:e="rpx";break;case a["d"].PT:e="pt";break;default:e="px";break}return e},getCalcRectScale:function(){var t,e,n;if(!this.inArtboardMode)return 1;switch(this.calcPlatformType){case a["c"].CUSTOM:n=this.calcPlatformCustomDocWidthShow;break;case a["c"].WE_CHAT_MINI_PROGRAM:n=a["sb"];break;default:return 1}var r=null!==(t=null===(e=this.curArtboardLoadedVerData.boundsInArtboard)||void 0===e?void 0:e.width)&&void 0!==t?t:0;return 0==r?1:n/r},getCalcValue:function(t,e,n){if(!this.inArtboardMode)return 0;var r;switch(c["V"].inCloudMode&&n&&(t=Object(d["b"])(t,this.calcArtScale,e)),this.calcPlatformType){case a["c"].ANDROID:r=t;break;case a["c"].IOS:r=t;break;case a["c"].CUSTOM:var i,o,s=this.calcPlatformCustomDocWidthShow,l=null!==(i=null===(o=this.curArtboardLoadedVerData.boundsInArtboard)||void 0===o?void 0:o.width)&&void 0!==i?i:0;r=0==l?t:s/l*t;break;case a["c"].WE_CHAT_MINI_PROGRAM:var u,h,f=null!==(u=null===(h=this.curArtboardLoadedVerData.boundsInArtboard)||void 0===h?void 0:h.width)&&void 0!==u?u:0;r=0==f?t:a["sb"]/f*t;break;default:r=t;break}return r=Math.round(100*r)/100,this.numberAutoRound&&(r=r>0&&r<1?1:e?Math.ceil(r):Math.round(r)),r},getCalcPlatformValue:function(t,e){if("string"===typeof t)return t;if(null==t)return 0;if(!this.inArtboardMode)return 0;var n,r,i,o,a;e?(n=e.fontSize,r=e.markedForExport,i=e.noUnitTemplate,o=e.needArtScale,a=e.isHorizintal):(n=!1,r=!1,i=!1,o=!1,a=!0);var s=this.getCalcValue(t,r,o);if(i){var c=this.getCalcPlatformUnit(n);return s+c}return this.getCalcUnitTemplateValue(s,n,a)},getCalcUnitTemplateValue:function(t,e,n){var r=this.$store.state.unitTemplate;if(r.enable){var i,o=null===(i=this.curArtboardLoadedVerData)||void 0===i?void 0:i.boundsInArtboard;return r.template.replace(/%[^%]+%/g,(function(e){switch(e){case"%num%":return t.toString();case"%W%":return null===o||void 0===o?void 0:o.width.toString();case"%H%":return null===o||void 0===o?void 0:o.height.toString();case"%VW%":return o?Object(c["r"])(t/o.width*100,2).toString():void 0;case"%VH%":return o?Object(c["r"])(t/o.height*100,2).toString():void 0;case"%sop%":return!1===n?o?Object(c["r"])(t/o.height*100,2).toString():void 0:o?Object(c["r"])(t/o.width*100,2).toString():void 0;default:return e}}))}var a=this.getCalcPlatformUnit(e);return t+a},setInOutput:function(t){this.$store.commit("setInOutput",t)},setInArtboardMultDownMode:function(t){this.$store.commit("setInArtboardMultDownMode",t)},setScaleArtboard:function(t){this.$store.commit("setScale",{artboard:t})},setScaleList:function(t){this.$store.commit("setScale",{list:t})},setScaleImageViewer:function(t){var e=this.$store.state.imageViewer;e.scale=Object(c["z"])(!1,t)},resetImageViewerScale:function(){var t=this.$store.state.imageViewer,e=t.imgList;e&&0!==e.length&&(t.resetScale=Date.now())},setCurArtboard:function(t,e){this.$store.commit("curArtboard",{artboard:t,extral:e}),this.setCurNode(null),this.setEnterNode(null),this.setClickedNode(null)},setCurArtboardVer:function(t,e){this.$store.commit("setCurArtboardVer",{verId:t,noTipWhenCurrentVer:!!e})},setCurNode:function(t){this.$store.commit("curNode",t)},setClickedNode:function(t){this.$store.commit("clickedNode",t)},setEnterNode:function(t){this.$store.commit("enterNode",t)},showTextTip:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;"string"!==typeof t&&null!=t&&(t=t.toString()),this.$store.commit("Tip_showTextTip",{second:e,text:t})},hideTextTip:function(){this.$store.commit("Tip_hideTextTip")},fetchPostCloudApi:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(ht["fetchPostCloudApi"])(t,e);case 2:if(o=r.sent,!Object(l["k"])(o)){r.next=9;break}r.t0=o.code,r.next=r.t0===a["F"].WebUser_NotLogin?7:9;break;case 7:return n.$store.commit("setUserLogout"),r.abrupt("break",9);case 9:return r.abrupt("return",o);case 10:case"end":return r.stop()}}),i)})))()},updateCloudUsersByCloud:function(t){var e=this.cloudKey;if(e){var n=this.$store.state.userNotify.cloudUsersByCloud;this.$set(n,e,t)}},getFolderPrecis:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o,a;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.inCloudViewerMode){r.next=2;break}return r.abrupt("return");case 2:if(!$r.notSupportFolderLog(n.cloudVersion)){r.next=4;break}throw new Error("私有云版本过低,不支持获取文件夹信息");case 4:return o=new FormData,o.append("folderId",t),null!=e&&o.append("fut",e),r.next=9,n.fetchPostCloudApi("getfolderprecisbyweb",{body:o,timeout:1e4});case 9:if(a=r.sent,Object(l["k"])(a)){r.next=12;break}throw new Error("文件夹摘要返回值异常:".concat(a));case 12:if(a.success){r.next=14;break}throw new Error(a.errMsg);case 14:return a=a.data,n.$store.commit("setFolderPrecis",a),r.abrupt("return",a);case 17:case"end":return r.stop()}}),i)})))()},getCloudNotifies:function(t,e,n,o){var s=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var c,u,d,h,f,m,p,v,b,g,w,x,y,k,C,S,T,O,I,A,F,j,_,M;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return c=new FormData,c.append("minNotifyId",t),c.append("artboardId",e),null!=n&&c.append("folderId",n),null!=o&&c.append("fut",o),r.next=7,s.fetchPostCloudApi("getnotifiesbyweb",{body:c,timeout:t>0?1e4:3e4});case 7:if(u=r.sent,Object(l["k"])(u)){r.next=10;break}throw new Error("消息列表返回值异常:".concat(u));case 10:if(u.success){r.next=12;break}throw new Error(u.errMsg);case 12:if(u=u.data,d=u,h=d.list,f=d.folders,m=d.users,p=d.cloudUserListNeedUpdate,v=d.cloudUserListState,b=d.cloudUserListTimes,g=d.folderUpdateTime,o>0&&g>0&&g!==o&&s.getFolderPrecis(n,o).catch((function(t){})),w=[],Object(l["i"])(h)){r.next=18;break}return r.abrupt("return",w);case 18:if(Object(l["k"])(f)||(f={}),Object(l["k"])(m)||(m={}),h.forEach((function(t){if(t){t.date=new Date(t.date);try{t.dateStr=Object(l["b"])(t.date)}catch(i){t.dateStr=t.date}switch(t.type){case a["X"].Artboard_Comment:case a["X"].Artboard_Reply:case a["X"].Artboard_Comment_At:case a["X"].Artboard_Reply_At:var e=t.msg;if(!e)return;if(e.commentUser=m[e.commentUserId],!e.commentUser)return;e.folder=f[e.folderId];var n=e.commentSummary,r=e.atUserIds;Object(l["i"])(r)&&r.length>0&&Object(l["j"])(n)&&(e.commentSummary=n.replace(/\[@uid:(\d+);\]/g,(function(t,e){var n=m[e];return n?"@"+n.nickName:t})));break}w.push(t)}})),x=s.$store.state.userNotify,y=x.cloudList,k=x.sysTipIds,C=x.commentUpdateStates,S=s.cloudKey,T=y[S],O=k[S]||0,null!=v&&s.updateCloudUsersByCloud({needUpdate:p,userListState:v,times:b}),u.artboardId>0&&s.$set(C,S,{artboardId:u.artboardId,commentUpdateTime:u.commentUpdateTime}),0!==t&&T){for(T.updateTime=Date.now(),j=null!==(A=null===(F=T.list[0])||void 0===F?void 0:F.id)&&void 0!==A?A:0,_=w.length-1;_>=0;_--)M=w[_],M.id>j&&(T.list.unshift(M),O=Math.max(M.id,O));O&&(k[S]=O)}else k[S]=Math.max((null===(I=w[0])||void 0===I?void 0:I.id)||0,O),s.$set(y,S,{updateTime:Date.now(),list:w});return r.abrupt("return",w);case 29:case"end":return r.stop()}}),i)})))()},checkLoginThrow:function(){var t=arguments,e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,o;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]&&t[0],e.cloudIsLogin){n.next=10;break}if(!0!==i){n.next=8;break}return n.next=5,e.confirm({text:"需要登录才能执行操作",yesText:"前往登录"});case 5:if(!n.sent){n.next=8;break}return e.goCloudLogin(),n.abrupt("return",!1);case 8:throw o="未登录,请先登录",o;case 10:return n.abrupt("return",!0);case 11:case"end":return n.stop()}}),n)})))()}}};o["a"].config.productionTip=!1,o["a"].mixin(lF);var uF=window.__marklionData;uF&&(window.__marklionData=null);var dF=null!==(BA=null===uF||void 0===uF||null===(HA=uF.cloudData)||void 0===HA?void 0:HA.renderMode)&&void 0!==BA?BA:a["W"].Normal,hF=-1!==navigator.userAgent.indexOf("MSIE");if(hF)document.body.innerHTML="很抱歉,不支持在IE浏览器中浏览标注信息,请使用Chrome,Firefox,Edge等浏览器浏览";else{if(Object(l["h"])(),jn)try{document.documentElement.classList.add("h-firefox")}catch(pF){}xr(),gn.dataInit(uF,Sr.state.cloudListSort),Tr();var fF=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,gn.allArtboardLoadChecked((function(t){Sr.commit("artboardLoadProgress",t)}));case 2:Sr.commit("setDocument",gn);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),mF=function(){var t=Sr.state,e=t.cloud.defaultArtboardGuid,n=Object(c["kb"])("filterDoc");if("none"===n)n=null;else if(n){var r=t.sortDocumentsWithSketchDocument.find((function(t){return t.guid===n}));if(r){var i=dn(n),o=Sr.state.documentArtboards.find((function(t){var n=t.artboard;return n.guid===e&&un(n,i.filterDocumentGuid,i.onlyNoSectionArtboard)}));e&&!o&&(n=null)}else n=null}n?Sr.commit("setFilterDocumentGuid",n):Sr.commit("setFilterDocumentGuid",null)};switch(dF){case a["W"].Interaction:VA(fF,mF);break;default:OT(fF,mF);break}}},"56f5":function(t,e,n){"use strict";n("03c4")},5781:function(t,e,n){"use strict";n("3d64")},5945:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var r=n("0f37"),i=n("6fd1"),o=(n("1b7f"),n("4bf0"),n("e466"),n("80f5")),a=n("fa7d"),s={};function c(t,e,n){return l.apply(this,arguments)}function l(){return l=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){var o,c;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=document.createElement("iframe"),t.prev=1,o.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",t.next=5,new Promise((function(t,r){var c=Object(a["pb"])();s[c]={resolve:t,reject:r},o.onload=function(){o.onerror=o.onload=null;var t=Object(a["F"])(),r=o.contentWindow,s=r.document;s.open(),s.write('<!DOCTYPE html>\n        <html lang="zh-CN">\n          <head>\n            <meta charset="utf-8">\n            <meta http-equiv="X-UA-Compatible" content="IE=edge">\n            <meta name="viewport" content="width=device-width,initial-scale=1.0">\n            <title>标记狮 MarkLion - https://www.marklion.cn</title>\n            <style>\n            *{margin:0;padding:0;}\n            html,body{width:100%;height:100%;overflow:hidden}\n            #pdfViewer{display:block;position:absolute;}\n            </style>\n          </head>\n          <body>            \n           <canvas id="pdfViewer"></canvas>\n           <script>if(!window.globalThis)window.globalThis=window;<\/script>\n            <script src="'.concat(t,'pdf.util.min.js" charset="utf-8"><\/script>\n            <script>pdfjsLib.GlobalWorkerOptions.workerSrc="').concat(t,"pdf.worker.min.js\";pdf_util.cloverPdfToJpg('").concat(e,"',").concat(n,",").concat(JSON.stringify(i),").then(function(blobs){parent.__cloverPdfToJpgCallback('").concat(c,"',true,blobs)}).catch(function(reason){parent.__cloverPdfToJpgCallback('").concat(c,"',false,reason)});<\/script>\n          </body>\n        </html>")),s.close()},o.onerror=function(){o.onerror=o.onload=null,parent.__cloverPdfToJpgCallback("${rnd}",!1,"iframe error")},o.src="about:blank",document.body.appendChild(o)}));case 5:return t.abrupt("return",t.sent);case 6:t.prev=6;try{c=o.parentNode,c&&c.removeChild(o)}catch(r){}return t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[1,,6,9]])}))),l.apply(this,arguments)}function u(t,e){var n=t.contentWindow;if(n&&n.pdf_util)n.pdf_util.renderPdf("#pdfViewer",e);else{var r=Object(a["F"])(),i='<!DOCTYPE html>\n    <html lang="zh-CN">\n      <head>\n        <meta charset="utf-8">\n        <meta http-equiv="X-UA-Compatible" content="IE=edge">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <title>标记狮 MarkLion - https://www.marklion.cn</title>\n        <style>\n        *{margin:0;padding:0;}\n        html,body{width:100%;height:100%;overflow:hidden}\n        #pdfViewer{display:block;position:absolute;}\n        </style>\n      </head>\n      <body>            \n       <canvas id="pdfViewer"></canvas>\n       <script>if(!window.globalThis)window.globalThis=window;<\/script>\n        <script src="'.concat(r,'pdf.util.min.js" charset="utf-8"><\/script>\n        <script>pdfjsLib.GlobalWorkerOptions.workerSrc="').concat(r,"pdf.worker.min.js\";pdf_util.renderPdf('#pdfViewer','").concat(e,"');<\/script>\n      </body>\n    </html>"),o=function(){t.onload=null;var e=t.contentWindow;e.__pluginloaded=!0;var n=e.document;n.open(),n.write(i),n.close()};t.src="about:blank",requestAnimationFrame((function(){var e=t.contentWindow;e&&!e.__pluginloaded?o():t.onload=o}))}}window.__cloverPdfToJpgCallback=function(t,e,n){if(Object(o["j"])(t)){var r=s[t];r&&(delete s[t],e?r.resolve(n):r.reject(n))}},window.cloverPdfToJpg=c},5952:function(t,e,n){"use strict";n("26a8")},"597f":function(t,e,n){"use strict";n("d01d")},"59bb":function(t,e,n){},"5b8a":function(t,e,n){"use strict";n("c439")},"5bd7":function(t,e,n){},"5c29":function(t,e,n){},"5c30":function(t,e,n){},"5c3c":function(t,e,n){"use strict";n("062b")},"5ccb":function(t,e,n){"use strict";n("ffc4")},6333:function(t,e,n){"use strict";n("89bc")},6397:function(t,e,n){},"63e5":function(t,e,n){},"64c0":function(t,e,n){},"651d":function(t,e,n){},6588:function(t,e,n){"use strict";n("e298")},"67a8":function(t,e,n){"use strict";n("f8d9")},6828:function(t,e,n){"use strict";n("4fc0")},6881:function(t,e,n){},"6a57":function(t,e,n){},"6a77":function(t,e,n){"use strict";n("a73e")},"6bc0":function(t,e,n){},"6bd2":function(t,e,n){"use strict";n("cc25")},"6bdc":function(t,e,n){"use strict";n("0585")},"6c7c":function(t,e,n){"use strict";n("2490")},"6e1d":function(t,e,n){"use strict";n("24f8")},"6e2e":function(t,e,n){},7120:function(t,e,n){},7215:function(t,e,n){"use strict";n("0213")},7226:function(t,e,n){"use strict";n("a046")},"726c":function(t,e,n){},7353:function(t,e,n){},"748f":function(t,e,n){},"751a":function(t,e,n){"use strict";n.r(e),n.d(e,"createFetch",(function(){return d})),n.d(e,"fetchGetCloudApi",(function(){return f})),n.d(e,"fetchPostCloudApi",(function(){return m})),n.d(e,"fetchTextWithProgress",(function(){return p})),n.d(e,"fetchWithProgress",(function(){return b})),n.d(e,"loadCssFileAsync",(function(){return w})),n.d(e,"createLoadGlobalLibraryFunc",(function(){return x}));var r=n("0f37"),i=n("f4af"),o=n("6fd1"),a=(n("e466"),n("1b7f"),n("4bf0"),n("9f22"),n("8ee9"),n("5fb4"),n("f74c"),n("86d1"),n("92ea"),n("5a19"),n("d064"),n("80f5")),s=n("fa7d"),c="function"===typeof AbortController,l={},u=function(t){if(null!=t){var e=l[t];if(e){delete l[t];try{e()}catch(n){}}}};function d(t,e,n,r){return h.apply(this,arguments)}function h(){return h=Object(o["a"])(Object(r["a"])().mark((function t(e,n,o,a){var s,d,h,f,m,p,v,b;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(o>0||null!=a)){t.next=43;break}if(u(a),!c){t.next=27;break}return s=new AbortController,d=!1,h=!1,f=0,null!=a&&(l[a]=function(){h=!0,f>0&&clearTimeout(f);try{var t;null===(t=s)||void 0===t||t.abort()}catch(e){}s=null}),o>0&&(f=setTimeout((function(){d=!0,null!=a&&delete l[a];try{var t;null===(t=s)||void 0===t||t.abort()}catch(e){}s=null}),o)),t.prev=9,t.next=12,fetch(e,Object(i["a"])(Object(i["a"])({},n),{},{signal:s.signal}));case 12:m=t.sent,t.next=20;break;case 15:if(t.prev=15,t.t0=t["catch"](9),!d){t.next=19;break}throw"Timeout: 接口请求超时了";case 19:throw t.t0;case 20:return t.prev=20,f>0&&clearTimeout(f),!h&&delete l[a],t.finish(20);case 24:return t.abrupt("return",m);case 27:return p=0,v=[],b=!1,o>0&&v.push(new Promise((function(t,e){p=setTimeout((function(){b||e("Timeout: 接口请求超时了")}),o)}))),v.push(fetch(e,n)),null!=a&&v.push(new Promise((function(t,e){l[a]=function(){b=!0,p>0&&clearTimeout(p),delete l[a],e("Error: The user aborted a request.")}}))),t.prev=33,t.next=36,Promise.race(v);case 36:return t.abrupt("return",t.sent);case 37:return t.prev=37,p>0&&clearTimeout(p),!b&&delete l[a],t.finish(37);case 41:t.next=46;break;case 43:return t.next=45,fetch(e,n);case 45:return t.abrupt("return",t.sent);case 46:case"end":return t.stop()}}),t,null,[[9,15,20,24],[33,,37,41]])}))),h.apply(this,arguments)}var f=function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(e,n){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m(e,Object(i["a"])(Object(i["a"])({},n),{},{method:"GET"}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(e,n){var o,c,l,u,h,f,m,p;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(a["k"])(n)||(n={}),o=n,c=o.timeout,l=o.json,u=o.abortKey,h=o.headers,null==c&&(c=0),(Object(a["k"])(n.body)||Object(a["i"])(n.body))&&(n.body=JSON.stringify(n.body)),!0===l&&(delete n.json,h||(n.headers=h={}),h["content-type"]="application/json;charset=UTF-8"),e=e.toLowerCase(),Object(s["db"])(e)&&(e="".concat(s["d"],"/api/").concat(e)),delete n.abortKey,t.next=10,d(e,Object(i["a"])({method:"POST",credentials:void 0},n),c,u);case 10:f=t.sent,t.t0=f.status,t.next=200===t.t0?14:500===t.t0||403===t.t0?20:24;break;case 14:return t.next=16,f.text();case 16:if(m=t.sent,Object(a["j"])(m)){t.next=19;break}return t.abrupt("return","");case 19:return t.abrupt("return",Object(s["wb"])(m));case 20:return t.next=22,f.text();case 22:throw p=t.sent,"[".concat(f.status,"] ").concat(p);case 24:throw"[".concat(f.status,"] 接口").concat(e,"请求失败");case 25:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function p(t,e,n){return v.apply(this,arguments)}function v(){return v=Object(o["a"])(Object(r["a"])().mark((function t(e,n,i){var o,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b(e,n,i);case 2:return o=t.sent,t.next=5,Object(s["j"])(o);case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function b(t,e){return g.apply(this,arguments)}function g(){return g=Object(o["a"])(Object(r["a"])().mark((function t(e,n){var i,o,a,c,l,u,d,h,f,m,p,v,b,g,w,x=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=x.length>2&&void 0!==x[2]?x[2]:-1,null===n||void 0===n||n({percentage:"0%",current:"0B",total:i>0?Object(s["zb"])(i):"-"}),t.next=4,fetch(e);case 4:if(o=t.sent,a=parseInt(o.headers.get("Content-Length")||"0",10),0===a&&i>0&&(a=i),c=0,l=window.TransformStream,l){t.next=29;break}u=[],d=o.body.getReader(),h=!0;case 13:if(!h){t.next=28;break}return t.next=16,d.read();case 16:if(f=t.sent,m=f.done,p=f.value,!m){t.next=22;break}return h=!1,t.abrupt("break",28);case 22:u.push(p),c+=p.length,v=(a?c/a*100:0).toFixed(2)+"%",null===n||void 0===n||n({total:Object(s["zb"])(a),current:Object(s["zb"])(c),percentage:v}),t.next=13;break;case 28:return t.abrupt("return",new Blob(u));case 29:return b=new l({transform:function(t,e){c+=t.length,e.enqueue(t);var r=(a?c/a*100:0).toFixed(2)+"%";null===n||void 0===n||n({total:Object(s["zb"])(a),current:Object(s["zb"])(c),percentage:r})}}),g=o.body.pipeThrough(b),w=new Response(g),t.abrupt("return",w.blob());case 33:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){var i,o=e.isURL,a=void 0===o||o,c=e.id,l=e.media,u=void 0===l?"all":l;a?(i=document.createElement("link"),i.rel="stylesheet",i.href="".concat(Object(s["F"])()).concat(t)):(i=document.createElement("style"),i.textContent=t),c&&(i.id=c),i.media=u,i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Failed to load CSS: ".concat(t)))},document.head.appendChild(i)}))}function x(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null,a=s["a"].Normal,c=[];function l(){return new Promise((function(l,u){var d=function(){try{l(i)}catch(t){}c.length>0&&(c.forEach((function(e){try{e.resolve(i)}catch(t){}})),c.splice(0,c.length))},h=function(t){try{u(t)}catch(e){}c.length>0&&(c.forEach((function(n){try{n.reject(t)}catch(e){}})),c.splice(0,c.length))};if(i)return d();if(a!==s["a"].Fetching)try{a=s["a"].Fetching;var f=document.createElement("script"),m=function(t){if(t){var e=t.parentNode;e&&e.removeChild(t)}};f.addEventListener("load",function(){var c=Object(o["a"])(Object(r["a"])().mark((function o(c){var l,u,f;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return l=c.target,r.next=3,Object(s["yb"])(0);case 3:if(setTimeout((function(){m(l)}),100),a!==s["a"].Fetching){r.next=13;break}if(null!=t){r.next=10;break}return a=s["a"].Success,i=!0,d(),r.abrupt("return");case 10:u=t.find((function(t){return null!=window[t]})),f=u?window[u]:null,f?(a=s["a"].Success,n&&t.forEach((function(t){window[t]=void 0;try{delete window[t]}catch(e){}})),i=f,d()):(a=s["a"].Error,h("".concat(e," library load but not find the variable")));case 13:case"end":return r.stop()}}),o)})));return function(t){return c.apply(this,arguments)}}()),f.addEventListener("error",(function(t){var n=t.target;setTimeout((function(){m(n)}),100),a===s["a"].Fetching&&(a=s["a"].Error,h("".concat(e," library load failed")))})),f.src="".concat(Object(s["F"])()).concat(e),document.body.appendChild(f)}catch(p){a=s["a"].Error,h(p)}else c.push({resolve:l,reject:u})}))}return"string"===typeof t&&(t=[t]),{loadAsync:l}}},7544:function(t,e,n){},"76b8":function(t,e,n){"use strict";n("6a57")},"76ba":function(t,e,n){},"76ef":function(t,e,n){"use strict";n("e7f5")},7797:function(t,e,n){"use strict";n("e5e5")},"77ed":function(t,e,n){},"787f":function(t,e,n){"use strict";n("3b37")},"78e4":function(t,e,n){},7970:function(t,e,n){"use strict";n("cb56")},"799c":function(t,e,n){"use strict";n("388e")},"79c5":function(t,e,n){"use strict";n("21e0")},"7a40":function(t,e,n){},"7bcd":function(t,e,n){},"7c7b":function(t,e,n){},"7ca6a":function(t,e,n){},"7d1a":function(t,e,n){},"7d26":function(t,e,n){"use strict";n("b99d")},"7eae":function(t,e,n){"use strict";n("0d20")},"7eb1":function(t,e,n){"use strict";n("5207")},"7eea":function(t,e,n){"use strict";n("178d")},"7f40":function(t,e,n){},8042:function(t,e,n){},"80c9":function(t,e,n){},"80f5":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return h})),n.d(e,"l",(function(){return f})),n.d(e,"i",(function(){return m})),n.d(e,"j",(function(){return p})),n.d(e,"k",(function(){return v})),n.d(e,"c",(function(){return b})),n.d(e,"b",(function(){return g})),n.d(e,"d",(function(){return w})),n.d(e,"h",(function(){return x}));n("697b"),n("d77e"),n("5fb4"),n("4bf0"),n("7d65"),n("0d0a"),n("1b7f");var r,i="file:"===location.protocol,o=function(){try{var t,e=null===(t=navigator.userAgentData)||void 0===t?void 0:t.platform;if("macOS"===e)return!0;if("iPadOS"===e)return!0;if("iOS"===e)return!0}catch(r){}var n=navigator.platform;return"Mac68K"==n||"MacPPC"==n||"Macintosh"==n||"MacIntel"==n||"MacAmd"==n||"iPhone"==n||"iPad"==n}(),a=function(t){try{var e,n=null===(e=navigator.userAgentData)||void 0===e?void 0:e.platform;if("Windows"===n)return!0}catch(r){}return/([ ;/)(,]|^)Windows([ ;/)(,]|$)/i.test(null!==(t=navigator.userAgent)&&void 0!==t?t:"")}(),s=/Mobile|Android|Iphone|Ipad/i.test(navigator.userAgent);if(o&&!s){var c=window.screen,l=c.width,u=c.height;(768===l&&1024===u||1536===l&&2048===u||1668===l&&2224===u||1668===l&&2388===u||2048===l&&2732===u)&&(s=!0)}var d=s,h=d&&navigator.standalone;function f(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r];n[i]||(n[i]=1,e.push(i))}return e}var m=null!==(r=Array.isArray)&&void 0!==r?r:function(t){return"[object Array]"===Object.prototype.toString.call(t)},p=function(t){return"string"===typeof t&&0!==t.length},v=function(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)};function b(t){if(!t)return"-";t instanceof Date||(t=new Date(t));var e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(r," ").concat(i,":").concat(o)}function g(t){if(!t)return"-";t instanceof Date||(t=new Date(t));var e=new Date,n=e-t,r=Math.floor(n/1e3),i=Math.floor(r/60),o=Math.floor(i/60),a=Math.floor(o/24),s=Math.floor(a/30),c=Math.floor(s/12);return c>0?"".concat(c,"年前"):s>0?"".concat(s,"月前"):a>0?"".concat(a,"天前"):o>0?"".concat(o,"小时前"):i>0?"".concat(i,"分钟前"):r>=-60?"刚刚":b(t)}function w(t){if(!t)return"-";t instanceof Date||(t=new Date(t));var e=new Date,n=e-t,r=Math.floor(n/1e3),i=Math.floor(r/60),o=Math.floor(i/60),a=Math.floor(o/24),s=Math.floor(a/30),c=Math.floor(s/12);return c>0?"".concat(c,"年前"):s>0?"".concat(s,"月前"):a>0?"".concat(a,"天前"):o>0?"".concat(o,"小时前"):i>0?"".concat(i,"分钟前"):r>=-60?"刚刚":b(t)}function x(){try{var t=document.documentElement.classList;a&&t.add("h-windows"),o&&t.add("h-macos")}catch(e){}}},"813d":function(t,e,n){"use strict";n("fce2")},"81ab":function(t,e,n){"use strict";n("cfe5")},"827e":function(t,e,n){},8449:function(t,e,n){"use strict";n("a21c")},8476:function(t,e,n){},"858c":function(t,e,n){},"866c":function(t,e,n){"use strict";n("b8b5")},"871b":function(t,e,n){},"872e":function(t,e,n){"use strict";n("89b3")},"877e":function(t,e,n){},"87fc":function(t,e,n){"use strict";n("e121")},"89b3":function(t,e,n){},"89bc":function(t,e,n){},"8a5c":function(t,e,n){},"8a5e":function(t,e,n){},"8a6e":function(t,e,n){"use strict";n("63e5")},"8aa6":function(t,e,n){"use strict";n("1626")},"8bd9":function(t,e,n){"use strict";n("b2a7")},"8c0c":function(t,e,n){"use strict";n("068d")},"8dc7":function(t,e,n){},"8e46":function(t,e,n){},"8f08":function(t,e,n){},"938c":function(t,e,n){"use strict";n("7d1a")},"94f6":function(t,e,n){},"95b7":function(t,e,n){"use strict";n("ae29")},"95c9":function(t,e,n){"use strict";n("871b")},9779:function(t,e,n){"use strict";n("78e4")},9929:function(t,e,n){},"9b3d":function(t,e,n){"use strict";n("cb72")},"9b64":function(t,e,n){"use strict";n("0f21")},"9b99":function(t,e,n){},"9cf3":function(t,e,n){},"9d69":function(t,e,n){},"9e45":function(t,e,n){"use strict";n("c9b3")},"9ed9":function(t,e,n){},"9edf":function(t,e,n){"use strict";n("8e46")},"9fec":function(t,e,n){"use strict";n("167a")},a046:function(t,e,n){},a054:function(t,e,n){},a1c7:function(t,e,n){},a21c:function(t,e,n){},a245:function(t,e,n){},a3c1:function(t,e,n){"use strict";n("e891")},a551:function(t,e,n){"use strict";n("9b99")},a73e:function(t,e,n){},a803:function(t,e,n){"use strict";n("3492")},a8bd:function(t,e,n){},a912:function(t,e,n){"use strict";n("d27e")},a9c6:function(t,e,n){},a9f1:function(t,e,n){"use strict";n("7f40")},ac5a:function(t,e,n){},ac73:function(t,e,n){},ad47:function(t,e,n){},ad48:function(t,e,n){"use strict";n("7bcd")},ade9:function(t,e,n){},ae29:function(t,e,n){},ae76:function(t,e,n){"use strict";n("6881")},b15c:function(t,e,n){"use strict";n("e7a3")},b1c8:function(t,e,n){},b2a7:function(t,e,n){},b35d:function(t,e,n){"use strict";n("e5e6")},b3ac:function(t,e,n){"use strict";n("6bc0")},b547:function(t,e,n){"use strict";n("7ca6a")},b623:function(t,e,n){"use strict";n("94f6")},b63f:function(t,e,n){},b8b5:function(t,e,n){},b92d:function(t,e,n){},b99d:function(t,e,n){},b9a6:function(t,e,n){},ba26:function(t,e,n){},bb5a:function(t,e,n){"use strict";n("16d5")},bc8f:function(t,e,n){"use strict";n.d(e,"j",(function(){return f})),n.d(e,"i",(function(){return p})),n.d(e,"b",(function(){return v})),n.d(e,"c",(function(){return b})),n.d(e,"a",(function(){return g})),n.d(e,"g",(function(){return w})),n.d(e,"e",(function(){return x})),n.d(e,"h",(function(){return y})),n.d(e,"f",(function(){return k})),n.d(e,"d",(function(){return T})),n.d(e,"l",(function(){return O})),n.d(e,"k",(function(){return A}));var r=n("43c1"),i=n("8748"),o=(n("f356"),n("1b7f"),n("0d0a"),n("4bf0"),n("7d65"),n("86d1"),n("5fb4"),n("8f0e"),n("8d23"),n("fe80")),a=n("80f5"),s=n("fa7d"),c=n("08f3");function l(t,e,n,r,i,o,a){var s={x:t,y:e},c={x:n,y:r},l=a/o;s.y*=l,c.y*=l,s.y*=-1,c.y*=-1;var h=u(s,c),f=d(s,c,h,o,a),m=f[0],p=f[1];i.forEach((function(t){if(p.x!=m.x){var e=s.x+t.stop*(c.x-s.x),n=(e-m.x)/(p.x-m.x);t.cssStop=isNaN(n)?t.stop:n}else{var r=s.y+t.stop*(c.y-s.y),i=(r-m.y)/(p.y-m.y);t.cssStop=isNaN(i)?t.stop:i}}))}function u(t,e){if(t.x==e.x)return e.y>t.y?0:180;if(t.y==e.y)return e.x>t.x?90:-90;var n=t.x,r=t.y+1,i=Math.sqrt(Math.pow(t.x-n,2)+Math.pow(t.y-r,2)),o=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=Math.sqrt(Math.pow(e.x-n,2)+Math.pow(e.y-r,2)),s=180*Math.acos((o*o+i*i-a*a)/(2*o*i))/Math.PI;e.x<t.x&&(s*=-1);while(s<0)s+=360;while(s>=360)s-=360;return s}function d(t,e,n,r,i){var o=void 0,a=e.y-t.y,s=e.x-t.x;0==a?o=s>0?[{x:0,y:.5},{x:1,y:.5}]:[{x:1,y:.5},{x:0,y:.5}]:0==s&&(o=a>0?[{x:.5,y:-1},{x:.5,y:0}]:[{x:.5,y:0},{x:.5,y:-1}]);var c=i/r;if(o)return o[0].y*=c,o[1].y*=c,o;var l={x:0,y:0},u={x:1,y:0},d={x:1,y:-1},f={x:0,y:-1};l.y*=c,u.y*=c,d.y*=c,f.y*=c;var m=void 0,p=void 0;n<=90?(m=f,p=u):n<=180?(m=l,p=d):n<=270?(m=u,p=f):(m=d,p=l);var v=-s/a,b=h({x:t.x,y:t.y},{x:e.x,y:e.y},{x:m.x,y:m.y},{x:m.x+1,y:m.y+1*v}),g=h({x:t.x,y:t.y},{x:e.x,y:e.y},{x:p.x,y:p.y},{x:p.x+1,y:p.y+1*v});return[b,g]}function h(t,e,n,r){var i=(e.y-t.y)*(r.x-n.x)-(t.x-e.x)*(n.y-r.y);if(0!=i){var o=((e.x-t.x)*(r.x-n.x)*(n.y-t.y)+(e.y-t.y)*(r.x-n.x)*t.x-(r.y-n.y)*(e.x-t.x)*n.x)/i,a=-((e.y-t.y)*(r.y-n.y)*(n.x-t.x)+(e.x-t.x)*(r.y-n.y)*t.y-(r.x-n.x)*(e.y-t.y)*n.y)/i;return{x:o,y:a}}}function f(t){var e=p(t);return t=1===e.opacity?w(e).value:e.value,t}var m=function(t){var e,n,r,i;if("number"===typeof t&&!isNaN(t)&&isFinite(t)){r=t%256;var a=o["a"].div(o["a"].sub(t,r),256);n=a%256,a=o["a"].div(o["a"].sub(a,n),256),e=a%256,a=o["a"].div(o["a"].sub(a,e),256),i=a%256}else e=n=r=i=255;return{r:e,g:n,b:r,a:i}},p=function(t){var e=m(t),n=e.r,r=e.g,i=e.b,a=e.a,c=Object(s["r"])(o["a"].div(a,255),2);return{r:n,g:r,b:i,a:a,opacity:c,hexa:"#".concat(n.toString(16).padStart(2,"0")).concat(r.toString(16).padStart(2,"0")).concat(i.toString(16).padStart(2,"0")).concat(a.toString(16).padStart(2,"0")),value:"rgba(".concat(n,", ").concat(r,", ").concat(i,", ").concat(c,")"),type:"rgba"}},v=function(t){if("string"!==typeof t||9!==t.length||"#"!==t[0])return t;var e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16),i=parseInt(t.substring(7,9),16);return b(e,n,r,i)},b=function(t,e,n,r){var i=o["a"].mul(r,16777216);return i=o["a"].add(i,o["a"].mul(t,65536)),i=o["a"].add(i,o["a"].mul(e,256)),i=o["a"].add(i,n),i},g=function(t,e){var n,r,i,o;if("number"!==typeof e&&(e=1),"number"===typeof t){if(1===e)return t;t=m(t),n=t.a,r=t.r,i=t.g,o=t.b}else{var a;n=Math.round(255*(null!==(a=t.a)&&void 0!==a?a:1)),r=Math.round(255*t.r),i=Math.round(255*t.g),o=Math.round(255*t.b)}return b(r,i,o,Math.round(n*e))},w=function(t){if(Object(a["k"])(t))return{value:"#".concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")),a:t.a,opacity:null!=t.opacity?t.opacity:o["a"].div(t.a,255),type:"hex"}},x=function(t){if(Object(a["k"])(t))return{value:"#".concat(t.a.toString(16).padStart(2,"0")).concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")),type:"ahex"}},y=function(t){if(Object(a["k"])(t))return{value:"#".concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")).concat(t.a.toString(16).padStart(2,"0")),type:"hexa"}},k=function(t){var e=t.r,n=t.g,r=t.b;e/=255,n/=255,r/=255;var i,a,s=Math.max(e,n,r),c=Math.min(e,n,r),l=(s+c)/2;if(s==c)i=a=0;else{var u=s-c;switch(a=l>.5?u/(2-s-c):u/(s+c),s){case e:i=(n-r)/u+(n<r?6:0);break;case n:i=(r-e)/u+2;break;case r:i=(e-n)/u+4;break}i/=6}i=Math.round(o["a"].mul(i,360)),a=Math.round(o["a"].mul(a,100)),l=Math.round(o["a"].mul(l,100));var d=null!=t.opacity?t.opacity:o["a"].div(t.a,255);return d=o["a"].div(Math.round(o["a"].mul(d,100)),100),{h:i,s:o["a"].div(a,100),l:o["a"].div(l,100),a:t.a,opacity:d,value:"hsla(".concat(i,", ").concat(a,"%, ").concat(l,"%, ").concat(d,")"),type:"hsla"}};function C(t){if(null==t)return null;var e=Object(i["a"])(t);switch(e){case"string":return t;case"number":var n=t%256,r=o["a"].div(o["a"].sub(t,n),256),s=r%256;r=o["a"].div(o["a"].sub(r,s),256);var c=r%256;r=o["a"].div(o["a"].sub(r,c),256);var l=r%256;return"#".concat(c.toString(16).padStart(2,"0")).concat(s.toString(16).padStart(2,"0")).concat(n.toString(16).padStart(2,"0")).concat(l.toString(16).padStart(2,"0"));default:return Object(a["k"])(t)&&"number"===typeof t.value?C(t.value):null}}function S(t,e,n,r){return(n*t*(1-e)+r*e)/(t+e-t*e)}function T(t,e){var n,r,i=(null!==(n=t.a)&&void 0!==n?n:255)/255,o=(null!==(r=e.a)&&void 0!==r?r:255)/255,a=i+o-i*o,s=t.r/255,c=e.r/255,l=S(i,o,s,c),u=t.g/255,d=e.g/255,h=S(i,o,u,d),f=t.b/255,m=e.b/255,p=S(i,o,f,m);return{r:Math.round(255*l),g:Math.round(255*h),b:Math.round(255*p),a:Math.round(255*a)}}function O(t,e,n,i,o){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,d=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(t)if("number"!==typeof u&&(u=1),null!=t.value){if(e||!i.types.Text&&(!n||d||!i.types.Group)){var h=Object(s["T"])(o,t.value,t.swatch);return{type:c["s"].FillColor,color:Object(s["xb"])(h.value,u),swatch:h.swatch}}}else if(Object(a["i"])(t.colorStops)&&Object(a["i"])(t.endPoints)){var f=t.gradientRadialTransform,m=t.gradientAngularTransform,p=t.gradientDiamondTransform,v=t.type;if(v&&!(f||m||p))switch(v){case"angular":var b=t.rotation;m={rotate:Object(s["r"])(90+b,2),scaleX:1,scaleY:1,endR:1,startR:0};break;case"radial":var g=t.gradientTransform;if(g){var w=g.scaleX,x=g.scaleY,y=g.rotate;f={rotate:Object(s["r"])(90+y,2),scaleX:w,scaleY:x,endR:1,startR:0}}break}if(f||m||p){var k,C;f?(C=c["s"].RadialGradientFill,k=f):m?(C=c["s"].AngularGradientFill,k=m):p&&(C=c["s"].DiamondGradientFill,k=p);var S=[];t.colorStops.forEach((function(t){var e=Object(s["r"])(100*t.stop,2)+"%",n=Object(s["T"])(o,t.color.value,t.color.swatch),r=Object(s["xb"])(n.value,u);S.push({stop:e,color:r,swatch:n.swatch,originStop:t.stop})}));var T=t.endR-t.startR||1;return{type:C,colorStops:S,angle:Object(s["r"])(Object(s["N"])(k.rotate,0))+"deg",startX:Object(s["r"])(100*Object(s["N"])(t.startX,.5),2)+"%",startY:Object(s["r"])(100*Object(s["N"])(t.startY,.5),2)+"%",scaleX:Object(s["r"])(100*Math.abs(Object(s["N"])(k.scaleX,.5)*T),2)+"%",scaleY:Object(s["r"])(100*Math.abs(Object(s["N"])(k.scaleY,.5)*T),2)+"%"}}var O,A,F,j,_=[],M=Object(r["a"])(t.endPoints,4),L=M[0],D=M[1],P=M[2],N=M[3],E=null!==(O=null!==(A=null!==(F=null!==(j=i.globalBounds)&&void 0!==j?j:i.boundsInArtboardOrigin)&&void 0!==F?F:i.boundsInArtboard)&&void 0!==A?A:i.boundsInParent)&&void 0!==O?O:{width:1,height:1},R=E.width,V=E.height;return l(L,D,P,N,t.colorStops,R,V),t.colorStops.forEach((function(t){var e,n=Object(s["r"])(100*t.stop,2)+"%",r=Object(s["r"])(100*(null!==(e=t.cssStop)&&void 0!==e?e:t.stop),2)+"%",i=Object(s["T"])(o,t.color.value,t.color.swatch),a=Object(s["xb"])(i.value,u);_.push({stop:n,color:a,swatch:i.swatch,cssStop:r,originStop:t.stop})})),{type:c["s"].LinearGradientFill,colorStops:_,endPoints:t.endPoints,angle:I({width:R,height:V},t.endPoints)}}}function I(t,e){var n=null!==t&&void 0!==t?t:{width:0,height:0},r=n.width,i=n.height;if(0===r||0===i)return"0deg";var o=i/r,a=e[0],c=e[1]*o,l=e[2],u=e[3]*o,d=Object(s["k"])({y:a,x:c},{y:l,x:u});return d+"deg"}function A(t,e){return Object(a["j"])(t)&&Object(a["i"])(e)&&0!==e.length?"".concat(t,";").concat(e.map((function(t){var e;return"".concat(null!==(e=t.originStop)&&void 0!==e?e:t.stop,",").concat(C(t.color))})).join("/")):null}},bd5b:function(t,e,n){},bda1:function(t,e,n){"use strict";n("cfdf")},be67:function(t,e,n){"use strict";n("9d69")},bf12:function(t,e,n){"use strict";n("8f08")},bf59:function(t,e,n){},bf97:function(t,e,n){},c018:function(t,e,n){},c04a:function(t,e,n){"use strict";n("222d")},c1cd:function(t,e,n){"use strict";n("30a3")},c2b1:function(t,e,n){},c2cb:function(t,e,n){"use strict";n("25f5")},c358:function(t,e,n){"use strict";n("4e0e")},c3ad:function(t,e,n){"use strict";n("0cf3")},c439:function(t,e,n){},c5eb:function(t,e,n){},c636:function(t,e,n){"use strict";n("d275")},c67e:function(t,e,n){"use strict";n("1a6d")},c6d3:function(t,e,n){},c768:function(t,e,n){"use strict";n("8dc7")},c8cc:function(t,e,n){"use strict";n("ade9")},c93c:function(t,e,n){"use strict";n("2439")},c9b3:function(t,e,n){},caa5:function(t,e,n){},cadf:function(t,e,n){"use strict";n("1882")},cb56:function(t,e,n){},cb72:function(t,e,n){},cc25:function(t,e,n){},cc70:function(t,e,n){},cdc8:function(t,e,n){},cec5:function(t,e,n){"use strict";n("c6d3")},cf0c:function(t,e,n){},cf87:function(t,e,n){"use strict";n("8476")},cfdf:function(t,e,n){},cfe5:function(t,e,n){},d00b:function(t,e,n){"use strict";n("016f")},d01d:function(t,e,n){},d039:function(t,e,n){"use strict";n("8042")},d069:function(t,e,n){"use strict";n("0834")},d114:function(t,e,n){"use strict";n("1e8a")},d1d9:function(t,e,n){"use strict";n("0369")},d1f9:function(t,e,n){},d275:function(t,e,n){},d27e:function(t,e,n){},d28d:function(t,e,n){"use strict";n("4b97")},d3aa:function(t,e,n){"use strict";n("8a5c")},d3ec:function(t,e,n){},d475:function(t,e,n){},d5dd:function(t,e,n){"use strict";n("026a")},d6df:function(t,e,n){"use strict";n("cdc8")},d75d:function(t,e,n){"use strict";n("d475")},da17:function(t,e,n){"use strict";n("1701")},da5a:function(t,e,n){"use strict";n("e521")},dbb2:function(t,e,n){"use strict";n("7c7b")},dd0c:function(t,e,n){},de0f:function(t,e,n){"use strict";n("edd2")},de42:function(t,e,n){},df29:function(t,e,n){"use strict";n("ba26")},e121:function(t,e,n){},e248:function(t,e,n){},e298:function(t,e,n){},e2d4:function(t,e,n){"use strict";n("7353")},e33a:function(t,e,n){"use strict";n("eab1")},e343:function(t,e,n){"use strict";n("e248")},e4bf:function(t,e,n){},e521:function(t,e,n){},e55b:function(t,e,n){"use strict";n("02bc")},e593:function(t,e,n){"use strict";n("8a5e")},e5e5:function(t,e,n){},e5e6:function(t,e,n){},e7a3:function(t,e,n){},e7f5:function(t,e,n){},e891:function(t,e,n){},e934:function(t,e,n){"use strict";n("877e")},ea18:function(t,e,n){"use strict";n("77ed")},ea97:function(t,e,n){"use strict";n("a8bd")},eab1:function(t,e,n){},eb67:function(t,e,n){"use strict";n("0831")},eba2:function(t,e,n){},ec86:function(t,e,n){"use strict";n("9929")},ed49:function(t,e,n){"use strict";n("0347")},edd2:function(t,e,n){},efcc:function(t,e,n){},f270:function(t,e,n){"use strict";n("b9a6")},f2ac:function(t,e,n){"use strict";n("2ec4")},f395:function(t,e,n){},f452:function(t,e,n){},f7b6:function(t,e,n){},f81c:function(t,e,n){},f856:function(t,e,n){"use strict";n("d1f9")},f8d9:function(t,e,n){},fa0c:function(t,e,n){"use strict";n("cf0c")},fa2f:function(t,e,n){"use strict";n("59bb")},fa7d:function(t,e,n){"use strict";n.d(e,"f",(function(){return w})),n.d(e,"c",(function(){return x})),n.d(e,"d",(function(){return y})),n.d(e,"b",(function(){return k})),n.d(e,"g",(function(){return C})),n.d(e,"yb",(function(){return S})),n.d(e,"V",(function(){return T})),n.d(e,"gb",(function(){return O})),n.d(e,"U",(function(){return I})),n.d(e,"G",(function(){return A})),n.d(e,"hb",(function(){return F})),n.d(e,"R",(function(){return j})),n.d(e,"eb",(function(){return M})),n.d(e,"C",(function(){return L})),n.d(e,"k",(function(){return D})),n.d(e,"l",(function(){return P})),n.d(e,"pb",(function(){return N})),n.d(e,"qb",(function(){return E})),n.d(e,"A",(function(){return R})),n.d(e,"Y",(function(){return V})),n.d(e,"ab",(function(){return B})),n.d(e,"Z",(function(){return H})),n.d(e,"X",(function(){return U})),n.d(e,"w",(function(){return $})),n.d(e,"v",(function(){return G})),n.d(e,"t",(function(){return z})),n.d(e,"u",(function(){return X})),n.d(e,"m",(function(){return q})),n.d(e,"x",(function(){return J})),n.d(e,"M",(function(){return nt})),n.d(e,"H",(function(){return rt})),n.d(e,"Q",(function(){return ot})),n.d(e,"E",(function(){return at})),n.d(e,"W",(function(){return st})),n.d(e,"sb",(function(){return ct})),n.d(e,"K",(function(){return lt})),n.d(e,"rb",(function(){return ut})),n.d(e,"mb",(function(){return dt})),n.d(e,"S",(function(){return ht})),n.d(e,"tb",(function(){return ft})),n.d(e,"nb",(function(){return mt})),n.d(e,"kb",(function(){return pt})),n.d(e,"e",(function(){return vt})),n.d(e,"q",(function(){return bt})),n.d(e,"p",(function(){return gt})),n.d(e,"r",(function(){return wt})),n.d(e,"N",(function(){return xt})),n.d(e,"P",(function(){return yt})),n.d(e,"T",(function(){return kt})),n.d(e,"xb",(function(){return Ct})),n.d(e,"wb",(function(){return St})),n.d(e,"i",(function(){return Tt})),n.d(e,"o",(function(){return It})),n.d(e,"O",(function(){return At})),n.d(e,"I",(function(){return Ft})),n.d(e,"a",(function(){return jt})),n.d(e,"zb",(function(){return _t})),n.d(e,"ib",(function(){return Mt})),n.d(e,"vb",(function(){return Lt})),n.d(e,"n",(function(){return Dt})),n.d(e,"fb",(function(){return Et})),n.d(e,"bb",(function(){return Rt})),n.d(e,"ub",(function(){return Vt})),n.d(e,"db",(function(){return Bt})),n.d(e,"cb",(function(){return $t})),n.d(e,"s",(function(){return Gt})),n.d(e,"J",(function(){return Wt})),n.d(e,"ob",(function(){return zt})),n.d(e,"F",(function(){return Xt})),n.d(e,"jb",(function(){return Kt})),n.d(e,"z",(function(){return qt})),n.d(e,"B",(function(){return Jt})),n.d(e,"D",(function(){return Qt})),n.d(e,"lb",(function(){return Zt})),n.d(e,"j",(function(){return te})),n.d(e,"y",(function(){return re})),n.d(e,"h",(function(){return ie})),n.d(e,"L",(function(){return oe}));var r,i=n("0f37"),o=n("8748"),a=n("6fd1"),s=(n("4bf0"),n("697b"),n("201d"),n("d77e"),n("f309"),n("bdd9"),n("18b5"),n("86d1"),n("7d65"),n("92ea"),n("5a19"),n("9758"),n("98f8"),n("67f3"),n("fc06"),n("3308"),n("cfdd"),n("2eb9"),n("1b7f"),n("6e6e"),n("1918"),n("e466"),n("8d23"),n("088c"),n("c469"),n("dc2e"),n("4437"),n("f0fe"),n("a5cb"),n("dc4c"),n("1a43"),n("b048"),n("216f"),n("2276"),n("20b4"),n("97a5"),n("d3c5"),n("0274"),n("c88e"),n("a932"),n("4c0c"),n("b0cc"),n("9b5a"),n("db09"),n("85bf"),n("aedb"),n("1bf9"),n("e38e"),n("684f"),n("1afe"),n("37d6"),n("601e"),n("b510"),n("6b16"),n("d80c"),n("60bd"),n("d569"),n("36e7"),n("5fb4"),n("d064"),n("8f0e"),n("9f22"),n("6d30"),n("bc8f")),c=n("80f5"),l=n("08f3"),u=n("9c82"),d=n("a3df"),h=n("0aec"),f=(n("8ee9"),n("bc79"),n("f74c"),"function"===typeof createImageBitmap),m="function"===typeof Image,p=function(){function t(){Object(u["a"])(this,t),Object(h["a"])(this,"queue",[]),Object(h["a"])(this,"runningCount",0),Object(h["a"])(this,"runningMax",10),Object(h["a"])(this,"_paused",!1)}return Object(d["a"])(t,[{key:"canNext",get:function(){return!this.paused&&(this.runningCount<this.runningMax&&this.queue.length>0)}},{key:"paused",get:function(){return this._paused},set:function(t){if(this._paused=!!t,!this._paused)for(var e=0;e<this.runningMax-this.runningCount;e++)this.run()}},{key:"run",value:function(){var t=Object(a["a"])(Object(i["a"])().mark((function t(){var e,n,r,o,a,s,c=this;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.canNext){t.next=2;break}return t.abrupt("return");case 2:if(e=this.queue.splice(0,1)[0],e){t.next=5;break}return t.abrupt("return");case 5:if(0!==e.list.length){t.next=8;break}return this.run(),t.abrupt("return");case 8:if(this.runningCount++,n=function(t){c.runningCount--;var n=e.list;n&&0!==n.length&&(n.forEach((function(e){try{e.callback(t,e.state)}catch(n){}})),c.run())},t.prev=10,!m){t.next=18;break}r=new Image,r.onerror=function(){n(null)},r.onload=function(t){n(t.target)},r.src=e.src,t.next=33;break;case 18:if(!f){t.next=32;break}return t.next=21,fetch(e.src);case 21:return o=t.sent,t.next=24,o.blob();case 24:return a=t.sent,t.next=27,createImageBitmap(a);case 27:s=t.sent,a=null,n(s),t.next=33;break;case 32:n(null);case 33:t.next=38;break;case 35:t.prev=35,t.t0=t["catch"](10),n(null);case 38:case"end":return t.stop()}}),t,this,[[10,35]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"add",value:function(t,e,n){if(!t)return e(null,n);var r=this._get(t);if(!r)return r={src:t,list:[{callback:e,state:n}]},this.queue.push(r),void this.run();var i=r.list.findIndex((function(t){return e===t.callback&&t.state===n}));-1===i&&(r.list.push({callback:e,state:n}),this.run())}},{key:"remove",value:function(t,e,n){if(t){var r=this._get(t);if(r){var i=r.list.findIndex((function(t){return e===t.callback&&t.state===n}));-1!==i&&r.list.splice(i,1)}}}},{key:"_get",value:function(t){return this.queue.find((function(e){return e.src===t}))}},{key:"clean",value:function(){this.runningCount=0,this.queue.splice(0)}}]),t}(),v=n("fe80"),b=n("5945"),g=n("30be"),w="https://user.marklion.cn/",x="",y="",k=375,C=370,S=function(t){return new Promise((function(e){setTimeout((function(){e()}),t||0)}))},T={cloudKey:null,userKey:null,documentName:"",documentGuid:"",config:null,inCloudMode:!1,cloudFolderId:0,initTitle:"",fileType:l["r"].XD,cloudVersion:"",docsMinScale:{}},O=new p;var I=function(t){var e=lt("unittemplate.".concat(t),!0);return Object(c["k"])(e)||(e={enable:!1,template:"rem(%num%)"}),e.fromInited=!0,e.guid=t,e},A=function(t,e){var n=lt("platform.".concat(t),!0);return Object(c["k"])(n)||(n={},n.type=e),n.fromInited=!0,n.guid=t,n},F=function(t,e){return(null!==t&&void 0!==t?t:"").localeCompare(null!==e&&void 0!==e?e:"",["zh"],{numeric:!0,caseFirst:"upper"})},j=function(t){return 1==t?"":"@".concat(t,"x")},_=function(t){if(null==t)return 0;try{return t.replace(/[^\u0020-\u00ff]/g,"aa").length}catch(e){return 0}},M=function(t){var e=_(t);return!!(e>=4&&e<=20&&/^[a-zA-Z\u4e00-\u9fa5][\w\u4e00-\u9fa5-]{1,19}$/.test(t))};function L(t,e){var n=t[t.length-1];if(!n)return new g["a"];var r=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=function(t){t&&(r=Math.min(t.x,r),i=Math.min(t.y,i),o=Math.max(t.x+t.width,o),a=Math.max(t.y+t.height,a))};t.forEach((function(t){var e=t.artboard.boundsInParentForList||t.artboard.boundsInParent||t.artboard.frame;s(e)})),Object(c["i"])(e)&&e.forEach((function(t){var e=t.boundsInParentForList||t.boundsInParent||t.frame;s(e)}));var l=new g["a"];return l.x=r,l.y=i,l.width=o-r,l.height=a-i,l}function D(t,e){var n=t.x,r=t.y,i=e.x,o=e.y;if(n===i)return r>=o?270:90;if(r===o)return n>=i?0:180;var a=180*Math.atan2(o-r,i-n)/Math.PI;return a=Math.round(100*(180-a))/100,360===a&&(a=0),a}function P(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Math.round(Math.atan2(r-e,n-t)*(180/Math.PI)*100)/100+i}function N(){return Math.random().toString(16).substring(2)}function E(t,e){return Math.floor(Math.random()*(e-t))+t}function R(t,e,n){if(!t)return e+n;var r=t.mlConfig.linked;if(!Object(c["k"])(r))return e+n;var i=r[n.toLowerCase()];return i?T.inCloudMode?i:e+i:e+n}var V=function(t){if(!Object(c["k"])(t))return!1;var e,n=t.mlConfig;return e=Object(c["k"])(n)&&null!=n.resType?n.resType:l["fb"].PNG,(e&l["fb"].PNG)===l["fb"].PNG},B=function(t){if(!Object(c["k"])(t))return!1;var e=t.mlConfig;return!!Object(c["k"])(e)&&(e.resType&l["fb"].WEBP)===l["fb"].WEBP},H=function(t){if(!Object(c["k"])(t))return!1;var e=t.mlConfig;return!!Object(c["k"])(e)&&(e.resType&l["fb"].SVG)===l["fb"].SVG},U=function(t){if(!Object(c["k"])(t))return!1;var e=t.mlConfig;return!!Object(c["k"])(e)&&(e.resType&l["fb"].PDF)===l["fb"].PDF};function $(t,e){var n,r;"string"===typeof e?n=e:(n=URL.createObjectURL(e),r=!0);var i=document.createElement("a");i.href=n,i.style.cssText+="width:0!important;height:0!important;overflow:hidden!important;position: absolute!important;opacity:0!important;top:0!important;left:0!important;",i.download=t,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i),i=null,r&&URL.revokeObjectURL(n),n=null}function G(t,e,n,r){return W.apply(this,arguments)}function W(){return W=Object(a["a"])(Object(i["a"])().mark((function t(e,n,r,o){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J(n,r);case 2:return a=t.sent,"string"===typeof a&&(a="data:application/octet-stream;base64,"+a),t.next=6,o(a);case 6:return a=t.sent,$(e,a),t.abrupt("return","success");case 9:case"end":return t.stop()}}),t)}))),W.apply(this,arguments)}function z(t,e,n,r){return Y.apply(this,arguments)}function Y(){return Y=Object(a["a"])(Object(i["a"])().mark((function t(e,n,r,o){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(b["a"])(n,r,o);case 2:if(a=t.sent[0],a){t.next=5;break}throw"fail";case 5:return $(e,a),t.abrupt("return","success");case 7:case"end":return t.stop()}}),t)}))),Y.apply(this,arguments)}function X(t,e,n,r){return K.apply(this,arguments)}function K(){return K=Object(a["a"])(Object(i["a"])().mark((function t(e,n,r,o){var a,s;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s="function"===typeof o,s||!Object(c["j"])(n)||!/^(\/resource\/|https?:\/\/)/i.test(n)){t.next=5;break}a=n,t.next=13;break;case 5:return t.next=7,J(n,r);case 7:if(a=t.sent,"string"===typeof a&&(a="data:application/octet-stream;base64,"+a),!s){t.next=13;break}return t.next=12,o(a);case 12:a=t.sent;case 13:return $(e,a),t.abrupt("return","success");case 15:case"end":return t.stop()}}),t)}))),K.apply(this,arguments)}function q(t){if(c["a"]&&!t.mlConfig.supportFileProtocol)throw"画板(".concat(t.name,")导出时「选择导出包支持范围」选择了「精简版」;需要部署到HTTP服务上才支持下载切图,请自行前往res目录拷贝切图");return!0}function J(t,e){return Q.apply(this,arguments)}function Q(){return Q=Object(a["a"])(Object(i["a"])().mark((function t(e,n){var r,o;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!c["a"]){t.next=4;break}return t.next=3,et(n);case 3:return t.abrupt("return",t.sent);case 4:return r={},T.inCloudMode&&(r.cache="reload"),t.next=8,fetch(e,r);case 8:return o=t.sent,t.next=11,o.blob();case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)}))),Q.apply(this,arguments)}var Z={},tt=1;function et(t){return new Promise((function(e,n){var r=document.createElement("script"),i=function(t){t&&null!=t.parentNode&&setTimeout((function(){t&&null!=t.parentNode&&(t.parentNode.removeChild(t),t=null)}),200)};r._marklionBack=function(t,o){r._marklionBack=null,r._marklionCallId=null,t?e(o):n(o),i(r),r=null},r.addEventListener("error",(function(e){var n=e.target._marklionBack;n&&n(!1,"资源加载失败「".concat(t,"」"))})),r.addEventListener("load",(function(t){i(t.target)}));var o="marklion_".concat(Date.now(),"_").concat(tt++);r._marklionCallId=o,r.src=t+"?marklion_res_id="+o,Z[o]=r._marklionBack,document.body.appendChild(r)}))}window.marklion_res=function(t,e){if(null!=t){var n=t._marklionBack,r=t._marklionCallId;n&&r&&(t._marklionBack=null,t._marklionCallId=null,Z[r]=null,n(!0,e))}},window.addEventListener("error",(function(t){var e=t.filename;if(e){var n=e.match(/marklion_res_id=(\w+)/);if(n&&(n=n[1],n)){e=e.replace(/\\/g,"/");var r=e.indexOf("/res/");-1!==r&&(e=e.substr(r+1)),r=e.indexOf("?"),-1!==r&&(e=e.substr(0,r)),e=decodeURIComponent(e);var i=Z[n];i&&i(!1,"资源加载失败「".concat(e,"」"))}}}),!0);var nt=function(t){if(!t)return null;var e=t.mlCustomName;return e||(e=t.name),e},rt=function(t,e,n,r){var i;switch(r){case l["fb"].WEBP:i=".webp";break;case l["fb"].JPG:i=".jpg";break;case l["fb"].PDF:i=".pdf";break;default:i=".png";break}return 1===e||"1"===e||t===l["c"].ANDROID?n+i:"".concat(n,"@").concat(e,"x").concat(i)},it=/[\s\\/$:*?"'<>|\0]/g,ot=function(t){if(Object(c["j"])(t)){t=t.replace(it,(function(t){return" "===t?t:""})).trim();var e=50;return t.length>e&&(t=t.substr(0,e)),t}return null},at=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="/viewer/".concat(t,"/");return e&&(n="".concat(location.origin).concat(n)),n},st=function(t){window.location.href=at(t)},ct=function(t,e,n){if(Object(c["k"])(e)&&e.markedForExport){var r=e.guid;if(r){var i="".concat(T.documentGuid,"_").concat(r);if(n=ot(n),e.mlCustomName!==n){if(Object(c["j"])(n)&&n!==e.name)return t.$set(e,"mlCustomName",n),void ut(i,n);t.$set(e,"mlCustomName",null),dt(i)}}}},lt=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=localStorage.getItem("marklion."+t);if(!Object(c["j"])(n))return n;if(!e)return n;try{n=JSON.parse(n)}catch(r){}return n}catch(i){return null}},ut=function(t,e){try{"string"!==typeof e&&(e=JSON.stringify(e)),localStorage.setItem("marklion."+t,e)}catch(n){}},dt=function(t){try{return localStorage.removeItem("marklion."+t)}catch(e){}},ht=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=sessionStorage.getItem("marklion."+t);if(!Object(c["j"])(n))return n;if(!e)return n;try{n=JSON.parse(n)}catch(r){}return n}catch(i){return null}},ft=function(t,e){try{"string"!==typeof e&&(e=JSON.stringify(e)),sessionStorage.setItem("marklion."+t,e)}catch(n){}},mt=function(t){try{return sessionStorage.removeItem("marklion."+t)}catch(e){}},pt=function(t,e,n){var r,i,o,a,s="";null==n?(n=window.location.href,i="#"==e?n.split("#"):n.split("#")[0].split("?"),r=1==i.length?"":i[1]):r=n;if(""!=r){o=r.split("&");var c=o.length;a=t+"=";for(var l=0;l<c;l++)if(0==o[l].indexOf(a)){s=o[l].replace(a,"");break}}return decodeURIComponent(s)},vt={NORMAL:"normal",PASSTHROUGH:"pass-through",MULTIPLY:"multiply",DARKEN:"darken",COLOR_BURN:"color-burn",LIGHTEN:"lighten",SCREEN:"screen",COLOR_DODGE:"color-dodge",OVERLAY:"overlay",SOFT_LIGHT:"soft-light",HARD_LIGHT:"hard-light",DIFFERENCE:"difference",EXCLUSION:"exclusion",HUE:"hue",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity",PASS_THROUGH:"pass-through",LINEAR_BURN:"linear-burn",LINEAR_DODGE:"linear-dodge"};function bt(t){try{if(document.execCommand){var e=document.createElement("textarea");e.style.cssText="position:absolute;left:-1000px;top:-1000px;width:50px;height:10px;background:none;border:none;opacity:0.01;z-index:99999;",e.value=t,e.readOnly=!0,document.body.appendChild(e),e.focus(),e.select();var n=document.execCommand("copy");return e.parentNode.removeChild(e),n}if(window.clipboardData)return window.clipboardData.setData("Text",t),!0}catch(r){return!1}return!1}function gt(t){try{if(document.execCommand)return document.execCommand("copy");if(window.clipboardData)return window.clipboardData.setData("Text",t),!0}catch(e){return!1}return!1}var wt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Math.pow(10,e);return Math.round(t*n)/n},xt=function(t,e){return"number"===typeof t?t:e},yt=function(t){var e,n;t&&(t=t.parentNode);while(t){var r=t.skTintColor;if(r){var i=r.value;null!=i&&(e=i,n=r.swatch)}t=t.parentNode}if(e)return{color:Object(s["i"])(e),swatch:n}},kt=function(t,e,n){if(null==t)return{value:e,swatch:n};if(null==e)return{value:e,swatch:n};var r=Object(s["i"])(e),i=t.color,o=t.swatch,a=Math.round(r.a*i.a/255);return n=o,{value:Object(s["c"])(i.r,i.g,i.b,a),swatch:n}},Ct=function(t,e){if(e>=1||"number"!==typeof e)return t;e<0&&(e=0);var n=Object(s["i"])(t),r=Math.round(n.a*e);return Object(s["c"])(n.r,n.g,n.b,r)},St=function(t){if(void 0!=t){if(null===t)return null;var e=Object(o["a"])(t);switch(e){case"string":var n;try{n=JSON.parse(t)}catch(r){n=t}return n;default:return t}}};function Tt(t){for(var e=atob(t),n=e.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}var Ot=/^\d{1,7}(\.\d{1,7})*$/i,It=function(t,e){if("string"!==typeof t)return!1;if("string"!==typeof e)return!0;if(!Ot.test(t))return!1;if(!Ot.test(e))return!0;t=t.split("."),e=e.split(".");var n=t.length,r=e.length;if(n>r){for(var i=r;i<n;i++)e.push("0");r=n}else if(n<r){for(var o=n;o<r;o++)t.push("0");n=r}for(var a=0;a<n;a++){var s=parseInt(t[a]),c=parseInt(e[a]);if(s>c)return!0;if(s<c)return!1}return!0},At=function(){return window.devicePixelRatio||1};function Ft(t){if("string"!==typeof t)return"";var e=t.lastIndexOf(".");return-1===e?"":t.substring(e)}var jt={Normal:0,Fetching:1,Error:2,Success:3},_t=function(t){return"number"!==typeof t?t:t<1024?"".concat(t,"B"):t<1048576?"".concat((t/1024).toFixed(2),"KB"):t<1073741824?"".concat((t/1048576).toFixed(2),"MB"):t<1099511627776?"".concat((t/1073741824).toFixed(2),"GB"):"".concat((t/1099511627776).toFixed(2),"TB")};function Mt(t){for(var e=new Uint8Array(4),n=0;n<4;n++){var r=t%256;if(e[n]=r,t-=r,t<=0)break;t/=256}return e}function Lt(t){for(var e,n=new Array,r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e>=65536&&e<=1114111?(n.push(e>>18&7|240),n.push(e>>12&63|128),n.push(e>>6&63|128),n.push(63&e|128)):e>=2048&&e<=65535?(n.push(e>>12&15|224),n.push(e>>6&63|128),n.push(63&e|128)):e>=128&&e<=2047?(n.push(e>>6&31|192),n.push(63&e|128)):n.push(255&e);return new Uint8Array(n).buffer}function Dt(t){return new Blob(t)}function Pt(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null}function Nt(){var t=["webkit","moz","ms","o"];if("visibilityState"in document)return"visibilityState";for(var e=0;e<t.length;e++)if(t[e]+"VisibilityState"in document)return t[e]+"VisibilityState";return null}function Et(){var t=Nt();return null!==t?"visible"!=document[t]:(t=Pt(),!!t&&document[t])}function Rt(t){return Object(c["j"])(t)?t:/[<> ]/gi.replace((function(t){switch(t){case" ":return"&nbsp;";case"<":return"&lt;";case">":return"&gt;"}return t}))}function Vt(t,e){var n=[];if(Object(c["j"])(t)&&Object(c["j"])(e)){var r=-1,i=t.toLowerCase(),o=e.toLowerCase(),a=[];while(-1!=(r=i.indexOf(o,r+1)))a.push(r);var s=o.length,l=0;a.forEach((function(e){e>l&&n.push({light:!1,text:t.substr(l,e-l)}),n.push({light:!0,text:t.substr(e,s)}),l=e+s})),l<t.length&&n.push({light:!1,text:t.substr(l)})}else n.push({text:t||"",light:!1});return n}var Bt=function(t){return"string"===typeof t&&!/^(((https?|file):)?\/)?\//i.test(t)};function Ht(t,e,n){var r="meta",i=document.querySelector("".concat(r,"[name='").concat(e,"']")),o=!i;o&&(i=document.createElement(r),i.setAttribute("name",e)),i.setAttribute("content",n),o&&t.appendChild(i)}function Ut(t,e,n,r){var i,o="link";r?(i=[],Object.keys(r).forEach((function(t){i.push("[".concat(t,"='").concat(r[t],"']"))})),i=i.join("")):i="";var a=document.querySelector("".concat(o,"[rel='").concat(e,"']").concat(i)),s=!a;s&&(a=document.createElement(o),a.setAttribute("rel",e),r&&Object.keys(r).forEach((function(t){a.setAttribute(t,r[t])}))),a.setAttribute("href",n),s&&t.appendChild(a)}function $t(t){var e=t?"/favicon_interaction.png":"/favicon.ico",n=document.head;if(n||(n=document.querySelector("head")),n||(n=document.body),c["f"]){Ht(n,"viewport","width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,minimal-ui,viewport-fit=cover,user-scalable=no"),Ht(n,"apple-mobile-web-app-capable","yes"),Ht(n,"mobile-web-app-capable","yes"),Ht(n,"apple-mobile-web-app-status-bar-style","black-translucent"),Ht(n,"apple-touch-fullscreen","yes"),Ht(n,"webkit","renderer"),Ut(n,"icon",e),Ut(n,"apple-touch-icon",e,{sizes:"64x64"}),Ut(n,"apple-touch-icon",e,{sizes:"128x128"}),Ut(n,"apple-touch-icon",e,{sizes:"256x256"});var r=document.documentElement;r.classList.add("i-mobile"),c["g"]&&r.classList.add("i-mobile-safari-standalone")}else t&&Ut(n,"icon",e)}function Gt(){c["f"]&&document.documentElement.addEventListener("touchstart",(function(t){t.touches.length>1&&t.preventDefault()}),{passive:!1})}function Wt(t){if(!Object(c["j"])(t))return null;var e=/\/fileviewer\/\d+\/([a-f\d]+)(?:_([a-f\d]*))?\//i.exec(t);return e?e[1]:null}function zt(t,e){return Object(c["j"])(t)?(e=e>0?"_".concat(e):"",t.replace(/(\/fileviewer\/\d+\/[a-f\d]+)(?:_[a-f\d]*)?(\/)/i,"$1".concat(e,"$2"))):t}var Yt=null===(r=document.currentScript)||void 0===r?void 0:r.src;function Xt(){var t=/^.*\/template\/[\w.]+\/js\//i;if(Yt){var e=t.exec(Yt);e&&e[0]}for(var n=document.querySelectorAll("script[src]"),r=0;r<n.length;r++){var i=n[r],o=i.src;if(o){var a=t.exec(o);if(a)return a[0]}}return T.inCloudMode?"/template/1.0/js/":"js/"}function Kt(t){return parseFloat(t)/100}function qt(t,e){var n,r;t?(n=.02,r=8):(n=.1,r=4);var i=e>1?100:1e4;return e=Math.round(e*i),e=v["a"].div(e,i),e=Math.min(r,e),e=Math.max(n,e),e}function Jt(t,e){var n,r,i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),o=[];if(e=e||i.length,t)for(n=0;n<t;n++)o[n]=i[0|Math.random()*e];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(r=0|16*Math.random(),o[n]=i[19==n?3&r|8:r]);return o.join("")}function Qt(t){if(!Object(c["j"])(t))return t;var e=parseFloat(t);return isNaN(e)?t:(e-=90,e<-90&&(e+=360),"".concat(wt(e,2),"deg"))}function Zt(){try{var t,e;null===(t=window.getSelection())||void 0===t||null===(e=t.removeAllRanges)||void 0===e||e.call(t)}catch(n){}}function te(t){return new Promise((function(e,n){if(t.text)t.text().then(e).catch(n);else{var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=function(t){n(new Error("Failed to read blob: "+t.message))},r.readAsText(t)}}))}function ee(t){var e;if(!((null===(e=t.childs)||void 0===e?void 0:e.length)>0)){var n=t,r=n.parent;while(r)r.updateTimes=Math.max(r.updateTimes,t.updateTimes),t=r,r=r.parent}}function ne(t){var e=t;while(null!=(e=e.parent)){var n,r,i;e.childArtboardCount+=null!==(n=t.artboardCount)&&void 0!==n?n:0,e.childFileCount+=null!==(r=t.fileCount)&&void 0!==r?r:0,e.childFolderCount+=null!==(i=t.folderCount)&&void 0!==i?i:0}}function re(t){ee(t),ne(t)}function ie(t,e){if(!Object(c["k"])(e))return t;if(!Object(c["j"])(t))return t;var n;n=/^https?:\/\//i.test(t)?new URL(t):new URL(t,window.location.origin);var r=n,i=r.searchParams;return Object.keys(e).forEach((function(t){i.set(t,e[t])})),n.toString()}function oe(t,e){var n=Math.floor(t),r=Math.floor(e);return n===r||n===t&&Math.abs(t-e)<=1?e:e>t?n+1:Math.ceil(t)-1}},fc83:function(t,e,n){"use strict";n("1d45")},fcb0:function(t,e,n){"use strict";n("a245")},fce2:function(t,e,n){},fe6a:function(t,e,n){"use strict";n("e4bf")},fe80:function(t,e,n){"use strict";n("4bf0"),n("7d65"),n("bdd9"),n("697b"),n("201d");e["a"]={add:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=0,r=0,i=1;try{n=t.toString().split(".")[1].length}catch(o){}try{r=e.toString().split(".")[1].length}catch(o){}return i=Math.pow(10,Math.max(n,r)),(this.mul(t,i)+this.mul(e,i))/i},sub:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=0,r=0,i=1;try{n=t.toString().split(".")[1].length}catch(o){}try{r=e.toString().split(".")[1].length}catch(o){}return i=Math.pow(10,Math.max(n,r)),(this.mul(t,i)-this.mul(e,i))/i},mul:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=0,r=t.toString(),i=e.toString();try{n+=r.split(".")[1].length}catch(o){}try{n+=i.split(".")[1].length}catch(o){}return Number(r.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,n)},div:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=1,r=1,i=0,o=0;try{i=t.toString().split(".")[1].length}catch(a){}try{o=e.toString().split(".")[1].length}catch(a){}return n=Number(t.toString().replace(".","")),r=Number(e.toString().replace(".","")),this.mul(n/r,Math.pow(10,o-i))}}},fe87:function(t,e,n){},ffc4:function(t,e,n){},ffca:function(t,e,n){"use strict";n("858c")}});