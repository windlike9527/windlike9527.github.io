(function(t){function e(e){for(var i,a,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&h.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={app:0},o=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0128":function(t,e,n){"use strict";n("74ae")},"0172":function(t,e,n){},"0227":function(t,e,n){"use strict";n("0c12")},"023f":function(t,e,n){"use strict";n("61a7")},"0261":function(t,e,n){},"02bc":function(t,e,n){},"0393":function(t,e,n){"use strict";n("4725")},"04d2":function(t,e,n){"use strict";n("9429")},"04d8":function(t,e,n){"use strict";n("b31f")},"05d2":function(t,e,n){},"0601":function(t,e,n){},"0650":function(t,e,n){},"073b":function(t,e,n){"use strict";n("b7ad")},"07be":function(t,e,n){"use strict";n("a521")},"08b7":function(t,e,n){},"08f3":function(t,e,n){"use strict";n.d(e,"tb",(function(){return i})),n.d(e,"sb",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"db",(function(){return a})),n.d(e,"eb",(function(){return s})),n.d(e,"cb",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"fb",(function(){return d})),n.d(e,"r",(function(){return h})),n.d(e,"gb",(function(){return f})),n.d(e,"hb",(function(){return m})),n.d(e,"bb",(function(){return b})),n.d(e,"nb",(function(){return g})),n.d(e,"ob",(function(){return w})),n.d(e,"ib",(function(){return y})),n.d(e,"jb",(function(){return C})),n.d(e,"pb",(function(){return x})),n.d(e,"qb",(function(){return S})),n.d(e,"mb",(function(){return T})),n.d(e,"rb",(function(){return O})),n.d(e,"s",(function(){return I})),n.d(e,"lb",(function(){return A})),n.d(e,"ab",(function(){return F})),n.d(e,"kb",(function(){return j})),n.d(e,"V",(function(){return _})),n.d(e,"F",(function(){return M})),n.d(e,"X",(function(){return L})),n.d(e,"a",(function(){return P})),n.d(e,"f",(function(){return D})),n.d(e,"e",(function(){return N})),n.d(e,"m",(function(){return E})),n.d(e,"n",(function(){return R})),n.d(e,"o",(function(){return V})),n.d(e,"M",(function(){return B})),n.d(e,"L",(function(){return H})),n.d(e,"Z",(function(){return U})),n.d(e,"W",(function(){return G})),n.d(e,"t",(function(){return W})),n.d(e,"J",(function(){return $})),n.d(e,"l",(function(){return z})),n.d(e,"u",(function(){return Y})),n.d(e,"I",(function(){return X})),n.d(e,"v",(function(){return K})),n.d(e,"w",(function(){return q})),n.d(e,"p",(function(){return J})),n.d(e,"H",(function(){return Q})),n.d(e,"U",(function(){return Z})),n.d(e,"i",(function(){return tt})),n.d(e,"q",(function(){return et})),n.d(e,"K",(function(){return nt})),n.d(e,"k",(function(){return it})),n.d(e,"j",(function(){return rt})),n.d(e,"g",(function(){return ot})),n.d(e,"O",(function(){return at})),n.d(e,"N",(function(){return st})),n.d(e,"S",(function(){return ct})),n.d(e,"R",(function(){return lt})),n.d(e,"T",(function(){return ut})),n.d(e,"P",(function(){return dt})),n.d(e,"Q",(function(){return ht})),n.d(e,"Y",(function(){return ft})),n.d(e,"h",(function(){return mt})),n.d(e,"A",(function(){return vt})),n.d(e,"B",(function(){return pt})),n.d(e,"x",(function(){return bt})),n.d(e,"y",(function(){return gt})),n.d(e,"E",(function(){return wt})),n.d(e,"z",(function(){return yt})),n.d(e,"C",(function(){return kt})),n.d(e,"D",(function(){return Ct})),n.d(e,"G",(function(){return xt}));n("4de4"),n("d81d"),n("4e82"),n("e9f5"),n("910d"),n("7d54"),n("ab43"),n("b64b"),n("d3b7"),n("ac1f"),n("00b4"),n("159b");function i(t,e,n){var r;null!==(r=Array.isArray)&&void 0!==r&&r.call(Array,e)?e.forEach((function(e){return i(t,e,n)})):Object.defineProperty(t,e,{enumerable:n})}var r=750,o=38,a="no_section_artboard",s="无Section画板",c={Success:0,NotLogin:1,Err:2,ArgumentErr:3,VCode:4,NotEmailChecked:5},l={WEB:0,ANDROID:1,IOS:2,CUSTOM:3,WE_CHAT_MINI_PROGRAM:4,getClassName:function(t){switch(t){case this.ANDROID:return"android";case this.IOS:return"ios";case this.WE_CHAT_MINI_PROGRAM:return"wx_mp";case this.CUSTOM:return"custom";default:return"web"}}};i(l,"getClassName",!1);var u={PX:0,DP:1,PT:2,RPX:3},d={NONE:0,PNG:1,SVG:2,WEBP:4,JPG:8,PDF:16},h={ALL:0,XD:1,SKETCH:2,PHOTOSHOP:4,FIGMA:8,JS_DESIGN:16,ARBOARD_PREVIEW:4096,NETDISK_FILE:8192,ARBOARD_PREVIEW_1X:16384,getAppName:function(t){switch(t){case this.XD:return"Adobe XD";case this.SKETCH:return"Sketch";case this.PHOTOSHOP:return"PhotoShop";case this.FIGMA:return"Figma";default:return"Unknow"}},getAppShortName:function(t){switch(t){case this.XD:return"XD";case this.SKETCH:return"Sketch";case this.PHOTOSHOP:return"PS";case this.FIGMA:return"Figma";default:return"Unknow"}},getFileExt:function(t){switch(t){case this.XD:return".xd";case this.SKETCH:return".sketch";case this.PHOTOSHOP:return".psd";case this.FIGMA:return".fig";default:return".unknow"}}};i(h,["getFileExt","getAppName","getAppShortName"],!1);var f={PASSTHROUGH:"pass-through",NORMAL:"Normal",DARKEN:"Darken",MULTIPLY:"Multiply",COLOR_BURN:"ColorBurn",LIGHTEN:"Lighten",SCREEN:"Screen",COLOR_DODGE:"ColorDodge",OVERLAY:"Overlay",SOFT_LIGHT:"SoftLight",HARD_LIGHT:"HardLight",DIFFERENCE:"Difference",EXCLUSION:"Exclusion",HUE:"Hue",SATURATION:"Saturation",COLOR:"Color",LUMINOSITY:"Luminosity"},m=k(f),v={Thin:100,ExtraLight:200,Light:300,Normal:400,Medium:500,SemiBold:600,Bold:700,ExtraBold:800,Black:900},p=(k(v),{100:"Thin",200:"ExtraLight",300:"Light",400:"Normal",500:"Medium",600:"Semibold",700:"Bold",800:"ExtraBold",900:"Black"}),b=p,g={Layer:0,Group:1,Page:2,Artboard:3,Shape:4,Image:5,ShapePath:6,Text:7,SymbolMaster:8,SymbolInstance:9,HotSpot:10,Slice:11,StyledLayer:12},w={Rectangle:0,Oval:1,Triangle:2,Polygon:3,Star:4,Custom:5},y={left:0,right:1,center:2,justify:3};function k(t){var e={};return Object.keys(t).forEach((function(n){e[t[n]]=n})),e}var C=k(y),x={top:0,center:1,bottom:2},S=k(x),T={Color:0,Gradient:1,Pattern:4},O=(k(T),{Linear:0,Radial:1,Angular:2}),I={None:0,FillColor:1,LinearGradientFill:2,ImageFill:3,RadialGradientFill:4,AngularGradientFill:5,DiamondGradientFill:6,getGradientInfo:function(t){var e,n;switch(t){case I.LinearGradientFill:e="线性",n="linear";break;case I.RadialGradientFill:e="径向",n="radial";break;case I.AngularGradientFill:e="角度",n="angular";break;case I.DiamondGradientFill:e="菱形",n="diamond";break;default:return null}return{name:e,className:n}}};i(I,"getGradientInfo",!1);var A={Center:0,Inside:1,Outside:2,getName:function(t){switch(t){case this.Center:return"中心";case this.Inside:return"内";case this.Outside:return"外";default:return""}}};i(A,"getName",!1);var F={Transparent:0,White:1,Black:2},j={Gaussian:0,Motion:1,Zoom:2,Background:3,Glass:4},_={ArtboardList:0,ArtboardDetail:1,ImageViewer:2},M={Success:0,WebUser_NotLogin:1,Err:2,ArgumentErr:3,VCode:4,NotEmailChecked:5,CloudRank_NotComment:6,CloudRank_SourceFile:7,NotFound:404,NeedUserConfirm:3001,UserNotConfirm:3002},L={None:0,Artboard_Comment:1,Artboard_Reply:2,Artboard_Comment_At:4,Artboard_Reply_At:8},P="allfolders.opened",D="cloudfolders.visible",N="cloudfolders.info",E={Folder:0,File:1,Artboard:2},R={Name:0,Date:1,ArtboardRect:2},V={All:0,Artboard:1},B={Small:0,Normal:1,Big:2},H={Other:0,Url:1,XD:2,Sketch:3,XDPlugin:4,SketchPlugin:5,Word:6,PPT:7,Excel:8,Txt:9,Html:10,Image:11,Pdf:12,Zip:13,AxureExport:14,App:15,Dmg:16,PhotoShop:17,AdobeIllustrator:18,AfterEffects:19,Media:20,AxureSourceFile:21,Figma:22,Font:23,AndroidApp:24,Package:25,Lottie:26,JsDesign:27,PhotoShopPlugin:28,getName:function(t,e){var n;switch(e){case B.Small:n="fs-";break;case B.Big:n="fb-";break;default:n="fn-";break}var i=["other","url","xd","sketch","xd-plugin","sketch-plugin","word","ppt","excel","txt","html","image","pdf","zip","axure-export","app","dmg","photoshop","adobe-illustrator","after-effects","media","axure-source","figma","font","apk","package","lottie",null,"ps-plugin"],r=i[t];return r||(r=i[0]),n+r},isSupportOnlineViewType:function(t,e,n){switch(t){case H.Html:case H.Url:case H.Image:case H.Pdf:case H.AxureExport:case H.Media:case H.Txt:case H.Lottie:return!0}return!(!n||!this.isDocxFile(t,e))||!!this.isTextFile(t,e)},isDocxFile:function(t,e){return t===this.Word&&"string"===typeof e&&/\.docx$/i.test(e)},isMarkdownFile:function(t,e){return this.isTextFile(t)&&"string"===typeof e&&/\.md$/i.test(e)},isTextFile:function(t,e){return t===this.Txt||t===this.Other&&"string"===typeof e&&/\.ps1$/i.test(e)}};i(H,["isSupportOnlineViewType","getName","isDocxFile","isMarkdownFile","isTextFile"],!1);var U={Folder:0,Artboard:1,File:2},G={Normal:0,File:1,Interaction:2},W={Blue:0,Red:1,Green:2,Yellow:3,Purple:4,getName:function(t){switch(t){case this.Red:return"red";case this.Green:return"green";case this.Yellow:return"yellow";case this.Purple:return"purple";default:return"blue"}}};i(W,"getName",!1);var $={Folder_Add:0,Folder_Edit:1,Remove:2,MoveTo:3,Folder_SetPreview:4,Folder_CancelPreview:5,Remove_ArtboardVer:6,Remove_NetdiskFileVer:8,Artboard_Upload:21,NetDisk_LinkAdd:40,NetDisk_LinkEdit:41,NetDisk_FileReName:42,NetDisk_FileUploadCompleted:47,Recycle_RestoreFolder:111,Recycle_RestoreNetdiskFile:113,Recycle_RestoreArtboard:114,RecycleVerControl_RestoreFolder:115,RecycleVerControl_RestoreNetdiskFile:117,RecycleVerControl_RestoreArtboard:118,isRecycleRestoreType:function(t){switch(t){case this.Recycle_RestoreFolder:case this.Recycle_RestoreNetdiskFile:case this.Recycle_RestoreArtboard:case this.RecycleVerControl_RestoreFolder:case this.RecycleVerControl_RestoreNetdiskFile:case this.RecycleVerControl_RestoreArtboard:return!0;default:return!1}},defined:function(t){switch(t){case this.Folder_Add:case this.Folder_Edit:case this.Folder_SetPreview:case this.Folder_CancelPreview:return!0;case this.Remove:case this.MoveTo:case this.Remove_ArtboardVer:case this.Remove_NetdiskFileVer:return!0;case this.Artboard_Upload:return!0;case this.NetDisk_FileUploadCompleted:case this.NetDisk_FileReName:case this.NetDisk_LinkAdd:case this.NetDisk_LinkEdit:return!0;default:return this.isRecycleRestoreType(t)}}},z={Artboard:1,File:2,Folder:4},Y={Change:0,Add:1,Remove:2},X={ALL:-1,Artboard:1,File:2,Folder:4},K={Public:0,PrivateCode:1,SpecifyMembers:2,getName:function(t){switch(t){case this.PrivateCode:return"加密";case this.SpecifyMembers:return"限定访问";default:return"公开"}}};i(K,"getName",!1);var q={None:0,Read:1,ReadWrite:2,OnlyChildFolderVisit:4,Owner:256,ParentOwner:512,Admin:1024,getAuthorityName:function(t){switch(t){case this.Owner:return"所有者";case this.ParentOwner:return"父级所有者";case this.Admin:return"超级管理员";case this.Read:return"可查看";case this.ReadWrite:return"可编辑";case this.OnlyChildFolderVisit:return"-";default:return null}},canChangeAuthority:function(t){switch(t){case this.Admin:case this.ParentOwner:case this.Owner:return!1}return!0}};i(K,["getAuthorityName","canChangeAuthority"],!1);var J={None:0,Tourist:1,Designer:2,Admin:128,getName:function(t){switch(t){case this.Tourist:return"协作者";case this.Designer:return"设计师";case this.Admin:return"超级管理员";default:return"-"}}};i(J,"getName",!1);var Q={Top:1,Middle:2,Bottom:3,getName:function(t){switch(t){case this.Top:return"顶部";case this.Bottom:return"底部";case this.Middle:return"居中";default:return"未知:".concat(t)}}};i(Q,"getName",!1);var Z={Property:0,Comment:1,Slice:2},tt={None:0,Dev:1,getName:function(t){switch(t){case this.Dev:return"待开发";default:return"无"}}};i(tt,"getName",!1);var et={None:0,Favorite:1,getName:function(t){switch(t){case this.Favorite:return"已收藏";default:return"无"}}};i(et,"getName",!1);var nt={None:-1,Document:0,Page:1,Section:2,getClassName:function(t){switch(t){case this.Document:return"nav-doc";case this.Page:return"nav-page";case this.Section:return"nav-section";default:return null}}};i(nt,"getClassName",!1);var it={None:0,GlobalCloudFolderBoxMenu:1,HelperMenu:2,ArtboardModeMenu:4,SliceBorderLineMenu:8,ArtboardDevMode:16,ArtListMap:32,getSortValues:function(){return Object.keys(it).map((function(t){return it[t]})).filter((function(t){return t>0})).sort((function(t,e){var n=t-e;return n>0?1:n<0?-1:0}))},getSortKeys:function(){var t=this;return Object.keys(it).map((function(e){var n=it[e];return n===t.None?null:{key:e,value:n}})).filter((function(t){return!!t})).sort((function(t,e){var n=t.value-e.value;return n>0?1:n<0?-1:0})).map((function(t){return t.key}))}};i(it,["getSortKeys","getSortValues"],!1);var rt={TopLeft:0,TopRight:1,Left:2,Right:3,BottomLeft:4,BootomRight:5},ot="-notinit",at={AllItem:1,MyDelete:2,AutoCoverage:4,getName:function(t){switch(t){case this.AllItem:return"全部成员";case this.MyDelete:return"我删除的";case this.AutoCoverage:return"覆盖版本";default:return"-"}},getDesc:function(t){switch(t){case this.AllItem:return"管理员可查看和管理所有用户删除的内容";case this.AutoCoverage:return"显示因版本数超出「cloud.json」配置限制而自动归档的历史版本";case this.MyDelete:return"显示您删除的内容";default:return null}}};i(at,["getName","getDesc"],!1);var st={UserDeleted:1,VersionArchived:2},ct={Name:1,DelTime:2,FileType:3,VersionCount:4,DelUserNick:5,CleanTime:6,getName:function(t){switch(t){case this.Name:return"名称";case this.DelTime:return"删除时间";case this.CleanTime:return"清理时间";case this.FileType:return"类型";case this.VersionCount:return"版本数";case this.DelUserNick:return"操作成员";default:break}}};i(ct,"getName",!1);var lt={Desc:1,Asc:2},ut={None:0,Artboard:1,File:2,Folder:4,SourceFile:8,getName:function(t){switch(t){case this.Folder:return"文件夹";case this.File:return"文件";case this.Artboard:return"画板";case this.SourceFile:return"源文件";case this.None:return"全部";default:break}},getMiniName:function(t){switch(t){case this.Folder:return"文件夹";case this.File:return"文件";case this.Artboard:return"画板";case this.SourceFile:return"源文件";case this.None:return"全部";default:break}}};i(ut,["getName","getMiniName"],!1);var dt={None:0,CanRestoreToOriginal:1,NeedResetFolder:2,CanReNameOrResetFolder:4},ht={None:0,RestoreToOriginal:1,ResetFolder:2,ReName:4},ft={None:0,FavoriteFolder:1,Recent:2,FavoriteArtboard:4},mt={None:0,PreviewFinally_2x:2,PreviewFinally_4x:4,PreviewHDEnableWhenExport:512,checkType:function(t,e){return null!=t&&(t&e)===e}};i(mt,["checkType"],!1);var vt={None:-1,Horizontal:0,Vertical:1,getName:function(t){switch(t){case this.Horizontal:return"横向";case this.Vertical:return"竖向";default:return t}},getCss:function(t){var e,n,i,r,o;switch(t){case this.Horizontal:e="row",n="horizontal",r="→",i="水平",o="垂直";break;case this.Vertical:e="column",n="vertical",r="↓",i="垂直",o="水平";break;default:return null}var a="​​flex-direction";return{name:a,value:e,text:n,icon:r,textCN:i,textCounterCN:o}}};i(vt,["getName","getCss"],!1);var pt={UnKnown:-1,FlexStart:0,Center:1,FlexEnd:2,SpaceBetween:3,SpaceAround:4,SpaceEvenly:5,needGap:function(t){switch(t){case this.FlexStart:case this.Center:case this.FlexEnd:return!0;default:return!1}},getName:function(t){switch(t){case this.FlexStart:return"开始";case this.Center:return"居中";case this.FlexEnd:return"末尾";case this.SpaceBetween:return"两端对齐";case this.SpaceEvenly:return"均匀对齐";case this.SpaceAround:return"分散对齐";default:return t}},getCss:function(t){var e,n,i;switch(t){case this.FlexStart:e="flex-start",n="start",i="开始";break;case this.Center:e="center",n="center",i="居中";break;case this.FlexEnd:e="flex-end",n="end",i="末尾";break;case this.SpaceBetween:e="space-between",n="space-between",i="两端对齐";break;case this.SpaceEvenly:e="space-evenly",n="space-evenly",i="均匀对齐";break;case this.SpaceAround:e="space-around",n="space-around",i="分散对齐";break;default:return null}var r="justify-content";return{name:r,value:e,text:n,textCN:i}}};i(pt,["needGap","getName","getCss"],!1);var bt={UnKnown:-1,FlexStart:0,Center:1,FlexEnd:2,SpaceBetween:3,SpaceAround:4,SpaceEvenly:5,needShowProperty:function(t){switch(t){case this.FlexStart:case this.Center:case this.FlexEnd:case this.SpaceBetween:case this.SpaceAround:case this.SpaceEvenly:return!0;default:return!1}},getName:function(t){switch(t){case this.FlexStart:return"开始";case this.Center:return"居中";case this.FlexEnd:return"末尾";case this.SpaceBetween:return"两端对齐";case this.SpaceEvenly:return"均匀对齐";case this.SpaceAround:return"分散对齐";default:return t}},getCss:function(t){var e,n,i;switch(t){case this.FlexStart:e="flex-start",n="start",i="开始";break;case this.Center:e="center",n="center",i="居中";break;case this.FlexEnd:e="flex-end",n="end",i="末尾";break;case this.SpaceBetween:e="space-between",n="space-between",i="两端对齐";break;case this.SpaceEvenly:e="space-evenly",n="space-evenly",i="均匀对齐";break;case this.SpaceAround:e="space-around",n="space-around",i="分散对齐";break;default:return null}var r="align-content";return{name:r,value:e,text:n,textCN:i}}};i(bt,["needShowProperty","getName","getCss"],!1);var gt={UnKnown:-1,FlexStart:0,Center:1,FlexEnd:2,Baseline:3,getName:function(t){switch(t){case this.FlexStart:return"开始";case this.Center:return"居中";case this.FlexEnd:return"末尾";case this.Baseline:return"基线";default:return t}},getCss:function(t){var e,n,i;switch(t){case this.FlexStart:e="flex-start",n="start",i="开始";break;case this.Center:e="center",n="center",i="居中";break;case this.FlexEnd:e="flex-end",n="end",i="末尾";break;case this.Baseline:e="baseline",n="baseline",i="基线";break;default:return null}var r="align-items";return{name:r,value:e,text:n,textCN:i}}};i(gt,["getName","getCss"],!1);var wt={NO_WRAP:0,WRAP:1,WRAP_REVERSE:2,needShowProperty:function(t,e){switch(t){case this.NO_WRAP:return!!e;case this.WRAP:case this.WRAP_REVERSE:return!0;default:return!1}},needAlignContent:function(t){switch(t){case this.WRAP:case this.WRAP_REVERSE:return!0;default:return!1}},getName:function(t){switch(t){case this.WRAP:return"​​自动换行";case this.WRAP_REVERSE:return"​​反向换行​";case this.NO_WRAP:return"不换行​";default:return t}},getCss:function(t){var e,n,i;switch(t){case this.WRAP:e="wrap",n="wrap",i="​​自动换行";break;case this.WRAP_REVERSE:e="wrap-reverse",n="wrap-reverse",i="​​反向换行​";break;default:return null}var r="flex-wrap";return{name:r,value:e,text:n,textCN:i}}};i(wt,["needShowProperty","needAlignContent","getName","getCss"],!1);var yt={Inherit:-1,FlexStart:0,Center:1,FlexEnd:2,Stretch:3,needShowProperty:function(t){switch(t){case this.FlexStart:case this.Center:case this.FlexEnd:case this.Stretch:return!0;default:return!1}},getName:function(t){switch(t){case this.FlexStart:return"开始";case this.Center:return"居中";case this.FlexEnd:return"末尾";case this.Stretch:return"拉伸";default:return t}},getCss:function(t){var e,n,i;switch(t){case this.FlexStart:e="start",n="start",i="开始";break;case this.Center:e="center",n="center",i="居中";break;case this.FlexEnd:e="end",n="end",i="末尾";break;case this.Stretch:e="stretch",n="stretch",i="拉伸";break}var r="align-self";return{name:r,value:e,text:n,textCN:i}}};i(yt,["needShowProperty","getName","getCss"],!1);var kt={Inherit:-1,FlexStart:0,Center:1,FlexEnd:2,Stretch:3,needShowProperty:function(t){switch(t){case this.FlexStart:case this.Center:case this.FlexEnd:case this.Stretch:return!0;default:return!1}},getName:function(t){switch(t){case this.FlexStart:return"开始";case this.Center:return"居中";case this.FlexEnd:return"末尾";case this.Stretch:return"拉伸";default:return t}},getCss:function(t){var e,n,i;switch(t){case this.FlexStart:e="start",n="start",i="开始";break;case this.Center:e="center",n="center",i="居中";break;case this.FlexEnd:e="end",n="end",i="末尾";break;case this.Stretch:e="stretch",n="stretch",i="拉伸";break}var r="justify-self";return{name:r,value:e,text:n,textCN:i}}};i(kt,["needShowProperty","getName","getCss"],!1);var Ct={Unknown:-1,Static:0,Relative:1,Absolute:2,Fixed:3,Sticky:4,needShowProperty:function(t){switch(t){case this.Absolute:case this.Fixed:case this.Sticky:return!0;default:return!1}},getName:function(t){switch(t){case this.Static:return"​​静态定位​";case this.Relative:return"​​相对定位​";case this.Absolute:return"​​绝对定位​​";case this.Fixed:return"​​固定定位​";case this.Sticky:return"​​粘性定位​";default:return t}},getCss:function(t){var e,n,i;switch(t){case this.Relative:e="relative",n="relative",i="​​相对定位​";break;case this.Absolute:e="absolute",n="absolute",i="​​绝对定位​​";break;case this.Fixed:e="fixed",n="fixed",i="​​固定定位​";break;case this.Sticky:e="sticky",n="sticky",i="​​粘性定位​";break}var r="position";return{name:r,value:e,text:n,textCN:i}}};i(Ct,["needShowProperty","getName","getCss"],!1);var xt={None:0,Flex:1,Grid:2}},"0913":function(t,e,n){"use strict";n("5f4b")},"098a":function(t,e,n){"use strict";n("a924")},"09ee":function(t,e,n){"use strict";n("5617")},"0a6a":function(t,e,n){},"0a90":function(t,e,n){},"0c12":function(t,e,n){},"0c43":function(t,e,n){"use strict";n("859c")},"0c95":function(t,e,n){"use strict";n("94bb")},"0eb7":function(t,e,n){"use strict";n("f504")},"0eeb":function(t,e,n){},1257:function(t,e,n){"use strict";n("d405")},1323:function(t,e,n){"use strict";n("6834")},1375:function(t,e,n){"use strict";n("a7c0")},1491:function(t,e,n){"use strict";n("5f3f")},"14c9":function(t,e,n){"use strict";n("65b1")},"154a":function(t,e,n){"use strict";n("d2b7")},"159c":function(t,e,n){},"15ce":function(t,e,n){"use strict";n("2707")},"16c9":function(t,e,n){},"16d8":function(t,e,n){},"16fa":function(t,e,n){},1779:function(t,e,n){"use strict";n("8f13")},1901:function(t,e,n){},"1c42":function(t,e,n){"use strict";n("5899d")},"1e3f":function(t,e,n){},"1ffe":function(t,e,n){"use strict";n("2439")},2138:function(t,e,n){"use strict";n("9d41")},2184:function(t,e,n){},2284:function(t,e,n){},2317:function(t,e,n){"use strict";n("5d60")},"233b":function(t,e,n){"use strict";n("3648")},2413:function(t,e,n){"use strict";n("3479")},2439:function(t,e,n){},2481:function(t,e,n){},2551:function(t,e,n){"use strict";n("cb38")},2637:function(t,e,n){},2707:function(t,e,n){},"273d":function(t,e,n){"use strict";n("b572")},2883:function(t,e,n){},"2a09":function(t,e,n){"use strict";n("fedd")},"2a87":function(t,e,n){"use strict";n("4ff7")},"2afb":function(t,e,n){"use strict";n("5bf2")},"2c33":function(t,e,n){"use strict";n("86ab")},"2c62":function(t,e,n){},"2c6a":function(t,e,n){"use strict";n("b615")},"2d13":function(t,e,n){"use strict";n("6e9b")},"2d5b":function(t,e,n){},"2d5e":function(t,e,n){"use strict";n("bb0b")},"2e40":function(t,e,n){},"2ea5":function(t,e,n){},"2ebc":function(t,e,n){"use strict";n("454a")},"2ec9":function(t,e,n){"use strict";n("a194")},"2f1e":function(t,e,n){"use strict";n("2c62")},"2f70":function(t,e,n){"use strict";n("cb4d")},"2f9f":function(t,e,n){},"2fc2":function(t,e,n){"use strict";n("8dcf")},3042:function(t,e,n){"use strict";n("d578")},"30a9":function(t,e,n){},"314b":function(t,e,n){},"31a2":function(t,e,n){},"31a4":function(t,e,n){"use strict";n("a016")},"321d":function(t,e,n){"use strict";n("f9c1")},3251:function(t,e,n){"use strict";n("ad84")},"338f":function(t,e,n){"use strict";n("eec1")},3479:function(t,e,n){},"35d0":function(t,e,n){},3648:function(t,e,n){},3679:function(t,e,n){"use strict";n("8932")},3945:function(t,e,n){"use strict";n("cb0e")},"3a3d":function(t,e,n){"use strict";n("7e91")},"3b1d":function(t,e,n){},"3bb2":function(t,e,n){},"3ce7":function(t,e,n){"use strict";n("f870")},"3e9d":function(t,e,n){"use strict";n("87a7")},"3fe1":function(t,e,n){},"40a0":function(t,e,n){"use strict";n("a942")},"40ff":function(t,e,n){"use strict";n("2637")},"412a":function(t,e,n){},"41f8":function(t,e,n){},4385:function(t,e,n){},"44a7":function(t,e,n){"use strict";n("41f8")},"44e4":function(t,e,n){},"454a":function(t,e,n){},"459a":function(t,e,n){},"45cf":function(t,e,n){"use strict";n("f8f0")},"464d":function(t,e,n){},4725:function(t,e,n){},"47ac":function(t,e,n){},"47da":function(t,e,n){"use strict";n("6e27")},"48a6":function(t,e,n){"use strict";n("fda2")},"4c8d":function(t,e,n){"use strict";n("8542")},"4d32":function(t,e,n){"use strict";n("16fa")},"4e2a":function(t,e,n){"use strict";n("0eeb")},"4ff7":function(t,e,n){},5026:function(t,e,n){"use strict";n("f4a2")},5097:function(t,e,n){},"523e":function(t,e,n){},5328:function(t,e,n){},5453:function(t,e,n){},5610:function(t,e,n){"use strict";n("0601")},5617:function(t,e,n){},"567c":function(t,e,n){"use strict";n("a33d")},"56d7":function(t,e,n){"use strict";n.r(e);var i=n("c14f"),r=n("1da1"),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("7db0"),n("e9f5"),n("f665"),n("d3b7"),n("c018"),n("2b0e")),a=n("08f3"),s=(n("ac1f"),n("5530")),c=(n("c740"),n("14d9"),n("a434"),n("b0c0"),n("7d54"),n("b64b"),n("25f0"),n("159b"),n("c73d"),n("fa7d")),l=n("80f5"),u=n("2909"),d=(n("99af"),n("cb29"),n("4de4"),n("13d5"),n("4e82"),n("910d"),n("9485"),n("4ec9"),n("00b4"),n("6062"),n("1e70"),n("79a4"),n("c1a1"),n("8b00"),n("a4e7"),n("1e5a"),n("72c3"),n("8a79"),n("3ca3"),n("466d"),n("5319"),n("ddb0"),n("d4ec")),h=n("bee2"),f=n("ade3"),m=(n("aff5"),n("e6e1"),n("fe80")),v=function(){function t(e,n){Object(d["a"])(this,t),Object(f["a"])(this,"start",0),Object(f["a"])(this,"end",0),null!=e&&null!=n&&(this.start=Math.min(e,n),this.end=Math.max(e,n))}return Object(h["a"])(t,[{key:"length",get:function(){return this.end-this.start}}])}(),p=function(t,e){return t.start<=e.start&&t.end>=e.end},b=function(t,e){var n,i;return t.start<=e.start?(n=t,i=e):(n=e,i=t),i.start>=n.start&&i.start<=n.end},g=function(t,e){var n=e.x,i=n+e.width,r=t.x,o=r+t.width,a=e.y,s=a+e.height,c=t.y,l=c+t.height;return!(i<r||i>o)&&(!(n<r||n>o)&&(!(s<c||s>l)&&!(a<c||a>l)))},w=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"width",0),Object(f["a"])(this,"height",0),Object(f["a"])(this,"x",0),Object(f["a"])(this,"y",0)}return Object(h["a"])(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}},{key:"set",value:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this}},{key:"isSame",value:function(t){return null!=t&&y(this,t)}},{key:"isOverlap",value:function(t){return!(this.left>t.right||this.top>t.bottom||t.left>this.right||t.top>this.bottom)}},{key:"isContans",value:function(t){return t.left>=this.left&&t.top>=this.top&&t.left+t.width<=this.left+this.width&&t.top+t.height<=this.top+this.height}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}])}(),y=function(t,e){var n,i,r=5;return n=Object(m["a"])(t.x,r),i=Object(m["a"])(e.x,r),n===i&&(n=Object(m["a"])(t.y,r),i=Object(m["a"])(e.y,r),n===i&&(n=Object(m["a"])(t.width,r),i=Object(m["a"])(e.width,r),n===i&&(n=Object(m["a"])(t.height,r),i=Object(m["a"])(e.height,r),n===i)))},k=function(t,e){var n=new w;return n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n.width=Math.max(t.right,e.right)-n.x,n.height=Math.max(t.bottom,e.bottom)-n.y,n},C=function(t,e){for(var n=t.length,i=[],r=0;r<n;r++)for(var o=t[r],a=function(){var n=t[s];if(o!==n){var r=new v(o,n),a=e.find((function(t){return p(r,t)}));a||i.push(r)}},s=r+1;s<n;s++)a();return i},x=0,S=function(t,e,n,i,r,o){var a,s,c,l,u,d;return n?(a="x",s="right",c="width",l="y",u="bottom",d="height"):(a="y",s="bottom",c="height",l="x",u="right",d="width"),e.forEach((function(e){var h,f,m,v,p={start:i[l],end:i[u],length:i[d]},g={start:r[l],end:r[u],length:r[d]};if(b(p,g))h=Math.max(p.start,g.start),f=Math.min(p.end,g.end);else{var y={start:i[a],end:i[s],length:i[c]};b(e,y)?(h=g.start,f=g.end,v=i):(h=p.start,f=p.end,v=r)}var k=h+(f-h)/2,C=new w,S=o(Math.round(100*e.length)/100,n);if(n?(C.height=1,C.width=e.length,C.x=e.start,C.y=k):(C.height=e.length,C.width=1,C.x=k,C.y=e.start),t.push({rect:C,text:S,isHorizintal:n,id:++x}),null!=v){if(m=new w,n){m.width=1;var T,O=Math.min(Math.abs(C.y-v.y),Math.abs(C.y-v.bottom)),I={};[v.x,v.right,C.x,C.right].forEach((function(t){I[t]&&(T=t),I[t]=1})),m.x=T,m.y=C.y>v.y?C.y-O:C.y,m.height=O}else{m.height=1;var A,F=Math.min(Math.abs(C.x-v.x),Math.abs(C.x-v.right)),j={};[v.y,v.bottom,C.y,C.bottom].forEach((function(t){j[t]&&(A=t),j[t]=1})),m.y=A,m.x=C.x>v.x?C.x-F:C.x,m.width=F}t.push({rect:m,isHorizintal:!n,isDashed:!0,id:++x})}})),t},T=function(t,e,n,i){t.right>n.width&&(t.width=n.width-t.x),t.bottom>n.height&&(t.height=n.height-t.y),e.right>n.width&&(e.width=n.width-e.x),e.bottom>n.height&&(e.height=n.height-e.y),t.width=Math.max(t.width,.001),t.height=Math.max(t.height,.001),e.width=Math.max(e.width,.001),e.height=Math.max(e.height,.001);var r=k(t,e),o=Object(l["l"])([r.x,r.right,t.x,t.right,e.x,e.right]),a=Object(l["l"])([r.y,r.bottom,t.y,t.bottom,e.y,e.bottom]),s=[new v(t.x,t.right),new v(e.x,e.right)],c=[new v(t.y,t.bottom),new v(e.y,e.bottom)],u=C(o,s),d=C(a,c),h=[];return S(h,u,!0,t,e,i),S(h,d,!1,t,e,i),h},O=function(t,e){var n=e.x,i=e.x+e.width,r=e.y,o=e.y+e.height,a=t.x,s=t.x+t.width,c=t.y,l=t.y+t.height,u=i<a||n>s||o<c||r>l;return!u},I=function(t,e){if(O(t,e)){var n=new w,i=Math.max(t.x,e.x),r=Math.max(t.y,e.y),o=Math.min(t.x+t.width,e.x+e.width),a=Math.min(t.y+t.height,e.y+e.height),s=o-i,c=a-r;if(!(s<0||c<0))return n.set(i,r,s,c),n}};function A(t,e,n){return null==t||1===e?t:(t*=e,t=Math.round(100*t)/100,n?Math.ceil(t):t)}function F(t){var e,n;if(Object(l["k"])(t)){t.nameLower=null!==(e=null===(n=t.name)||void 0===n?void 0:n.toLowerCase())&&void 0!==e?e:"";var i=t.boundsInParent;if(i&&i.height>0&&i.width>0){var r=375/812,o=185,a=Math.round(o/i.width*i.height),s=Math.round(o/r);i.viewWidth=o,i.viewRealHeight=a,i.viewHeight=Math.min(s,a),i.thumbViewWidth=36,i.thumbViewHeight=Math.round(i.thumbViewWidth/r)}}}function j(t,e){var n=t[t.length-1];if(!n)return new w;var i=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=function(t){t&&(i=Math.min(t.x,i),r=Math.min(t.y,r),o=Math.max(t.x+t.width,o),a=Math.max(t.y+t.height,a))};t.forEach((function(t){var e=t.artboard.boundsInParentForList||t.artboard.boundsInParent||t.artboard.frame;s(e)})),Object(l["i"])(e)&&e.forEach((function(t){var e=t.boundsInParentForList||t.boundsInParent||t.frame;s(e)}));var c=new w;return c.x=i,c.y=r,c.width=o-i,c.height=a-r,c}var _=n("3835"),M=n("53ca");n("a15b"),n("d81d"),n("ab43"),n("4d90"),n("4c53");function L(t,e,n,i,r,o,a){var s={x:t,y:e},c={x:n,y:i},l=a/o;s.y*=l,c.y*=l,s.y*=-1,c.y*=-1;var u=P(s,c),d=D(s,c,u,o,a),h=d[0],f=d[1];r.forEach((function(t){if(f.x!=h.x){var e=s.x+t.stop*(c.x-s.x),n=(e-h.x)/(f.x-h.x);t.cssStop=isNaN(n)?t.stop:n}else{var i=s.y+t.stop*(c.y-s.y),r=(i-h.y)/(f.y-h.y);t.cssStop=isNaN(r)?t.stop:r}}))}function P(t,e){if(t.x==e.x)return e.y>t.y?0:180;if(t.y==e.y)return e.x>t.x?90:-90;var n=t.x,i=t.y+1,r=Math.sqrt(Math.pow(t.x-n,2)+Math.pow(t.y-i,2)),o=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=Math.sqrt(Math.pow(e.x-n,2)+Math.pow(e.y-i,2)),s=180*Math.acos((o*o+r*r-a*a)/(2*o*r))/Math.PI;e.x<t.x&&(s*=-1);while(s<0)s+=360;while(s>=360)s-=360;return s}function D(t,e,n,i,r){var o=void 0,a=e.y-t.y,s=e.x-t.x;0==a?o=s>0?[{x:0,y:.5},{x:1,y:.5}]:[{x:1,y:.5},{x:0,y:.5}]:0==s&&(o=a>0?[{x:.5,y:-1},{x:.5,y:0}]:[{x:.5,y:0},{x:.5,y:-1}]);var c=r/i;if(o)return o[0].y*=c,o[1].y*=c,o;var l={x:0,y:0},u={x:1,y:0},d={x:1,y:-1},h={x:0,y:-1};l.y*=c,u.y*=c,d.y*=c,h.y*=c;var f=void 0,m=void 0;n<=90?(f=h,m=u):n<=180?(f=l,m=d):n<=270?(f=u,m=h):(f=d,m=l);var v=-s/a,p=N({x:t.x,y:t.y},{x:e.x,y:e.y},{x:f.x,y:f.y},{x:f.x+1,y:f.y+1*v}),b=N({x:t.x,y:t.y},{x:e.x,y:e.y},{x:m.x,y:m.y},{x:m.x+1,y:m.y+1*v});return[p,b]}function N(t,e,n,i){var r=(e.y-t.y)*(i.x-n.x)-(t.x-e.x)*(n.y-i.y);if(0!=r){var o=((e.x-t.x)*(i.x-n.x)*(n.y-t.y)+(e.y-t.y)*(i.x-n.x)*t.x-(i.y-n.y)*(e.x-t.x)*n.x)/r,a=-((e.y-t.y)*(i.y-n.y)*(n.x-t.x)+(e.x-t.x)*(i.y-n.y)*t.y-(i.x-n.x)*(e.y-t.y)*n.y)/r;return{x:o,y:a}}}function E(t){var e=V(t);return t=1===e.opacity?G(e).value:e.value,t}var R=function(t){var e,n,i,r;if("number"===typeof t&&!isNaN(t)&&isFinite(t)){i=t%256;var o=m["b"].div(m["b"].sub(t,i),256);n=o%256,o=m["b"].div(m["b"].sub(o,n),256),e=o%256,o=m["b"].div(m["b"].sub(o,e),256),r=o%256}else e=n=i=r=255;return{r:e,g:n,b:i,a:r}},V=function(t){var e=R(t),n=e.r,i=e.g,r=e.b,o=e.a,a=Object(m["a"])(m["b"].div(o,255),2);return{r:n,g:i,b:r,a:o,opacity:a,hexa:"#".concat(n.toString(16).padStart(2,"0")).concat(i.toString(16).padStart(2,"0")).concat(r.toString(16).padStart(2,"0")).concat(o.toString(16).padStart(2,"0")),value:"rgba(".concat(n,", ").concat(i,", ").concat(r,", ").concat(a,")"),type:"rgba"}},B=function(t){if("string"!==typeof t||9!==t.length||"#"!==t[0])return t;var e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16),r=parseInt(t.substring(7,9),16);return H(e,n,i,r)},H=function(t,e,n,i){var r=m["b"].mul(i,16777216);return r=m["b"].add(r,m["b"].mul(t,65536)),r=m["b"].add(r,m["b"].mul(e,256)),r=m["b"].add(r,n),r},U=function(t,e){var n,i,r,o;if("number"!==typeof e&&(e=1),"number"===typeof t){if(1===e)return t;t=R(t),n=t.a,i=t.r,r=t.g,o=t.b}else{var a;n=Math.round(255*(null!==(a=t.a)&&void 0!==a?a:1)),i=Math.round(255*t.r),r=Math.round(255*t.g),o=Math.round(255*t.b)}return H(i,r,o,Math.round(n*e))},G=function(t){if(Object(l["k"])(t))return{value:"#".concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")),a:t.a,opacity:null!=t.opacity?t.opacity:m["b"].div(t.a,255),type:"hex"}},W=function(t){if(Object(l["k"])(t))return{value:"#".concat(t.a.toString(16).padStart(2,"0")).concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")),type:"ahex"}},$=function(t){if(Object(l["k"])(t))return{value:"#".concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")).concat(t.a.toString(16).padStart(2,"0")),type:"hexa"}},z=function(t){var e=t.r,n=t.g,i=t.b;e/=255,n/=255,i/=255;var r,o,a=Math.max(e,n,i),s=Math.min(e,n,i),c=(a+s)/2;if(a==s)r=o=0;else{var l=a-s;switch(o=c>.5?l/(2-a-s):l/(a+s),a){case e:r=(n-i)/l+(n<i?6:0);break;case n:r=(i-e)/l+2;break;case i:r=(e-n)/l+4;break}r/=6}r=Math.round(m["b"].mul(r,360)),o=Math.round(m["b"].mul(o,100)),c=Math.round(m["b"].mul(c,100));var u=null!=t.opacity?t.opacity:m["b"].div(t.a,255);return u=m["b"].div(Math.round(m["b"].mul(u,100)),100),{h:r,s:m["b"].div(o,100),l:m["b"].div(c,100),a:t.a,opacity:u,value:"hsla(".concat(r,", ").concat(o,"%, ").concat(c,"%, ").concat(u,")"),type:"hsla"}};function Y(t){if(null==t)return null;var e=Object(M["a"])(t);switch(e){case"string":return t;case"number":var n=t%256,i=m["b"].div(m["b"].sub(t,n),256),r=i%256;i=m["b"].div(m["b"].sub(i,r),256);var o=i%256;i=m["b"].div(m["b"].sub(i,o),256);var a=i%256;return"#".concat(o.toString(16).padStart(2,"0")).concat(r.toString(16).padStart(2,"0")).concat(n.toString(16).padStart(2,"0")).concat(a.toString(16).padStart(2,"0"));default:return Object(l["k"])(t)&&"number"===typeof t.value?Y(t.value):null}}function X(t,e,n,i){return(n*t*(1-e)+i*e)/(t+e-t*e)}function K(t,e){var n,i,r=(null!==(n=t.a)&&void 0!==n?n:255)/255,o=(null!==(i=e.a)&&void 0!==i?i:255)/255,a=r+o-r*o,s=t.r/255,c=e.r/255,l=X(r,o,s,c),u=t.g/255,d=e.g/255,h=X(r,o,u,d),f=t.b/255,m=e.b/255,v=X(r,o,f,m);return{r:Math.round(255*l),g:Math.round(255*h),b:Math.round(255*v),a:Math.round(255*a)}}function q(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(t)if("number"!==typeof o&&(o=1),null!=t.value){if(e||!i.types.Text&&(!n||s||!i.types.Group)){var u=tt(r,t.value,t.swatch);return{type:a["s"].FillColor,color:et(u.value,o),swatch:u.swatch}}}else if(Object(l["i"])(t.colorStops)&&Object(l["i"])(t.endPoints)){var d=t.gradientRadialTransform,h=t.gradientAngularTransform,f=t.gradientDiamondTransform,v=t.type;if(v&&!(d||h||f))switch(v){case"angular":var p=t.rotation;h={rotate:Object(m["a"])(90+p,2),scaleX:1,scaleY:1,endR:1,startR:0};break;case"radial":var b=t.gradientTransform;if(b){var g=b.scaleX,w=b.scaleY,y=b.rotate;d={rotate:Object(m["a"])(90+y,2),scaleX:g,scaleY:w,endR:1,startR:0}}break}if(d||h||f){var k,C;d?(C=a["s"].RadialGradientFill,k=d):h?(C=a["s"].AngularGradientFill,k=h):f&&(C=a["s"].DiamondGradientFill,k=f);var x=[];t.colorStops.forEach((function(t){var e=Object(m["a"])(100*t.stop,2)+"%",n=tt(r,t.color.value,t.color.swatch),i=et(n.value,o);x.push({stop:e,color:i,swatch:n.swatch,originStop:t.stop})}));var S=t.endR-t.startR||1;return{type:C,colorStops:x,angle:Object(m["a"])(Object(c["I"])(k.rotate,0))+"deg",startX:Object(m["a"])(100*Object(c["I"])(t.startX,.5),2)+"%",startY:Object(m["a"])(100*Object(c["I"])(t.startY,.5),2)+"%",scaleX:Object(m["a"])(100*Math.abs(Object(c["I"])(k.scaleX,.5)*S),2)+"%",scaleY:Object(m["a"])(100*Math.abs(Object(c["I"])(k.scaleY,.5)*S),2)+"%"}}var T,O,I,A,F=[],j=Object(_["a"])(t.endPoints,4),M=j[0],P=j[1],D=j[2],N=j[3],E=null!==(T=null!==(O=null!==(I=null!==(A=i.globalBounds)&&void 0!==A?A:i.boundsInArtboardOrigin)&&void 0!==I?I:i.boundsInArtboard)&&void 0!==O?O:i.boundsInParent)&&void 0!==T?T:{width:1,height:1},R=E.width,V=E.height;return L(M,P,D,N,t.colorStops,R,V),t.colorStops.forEach((function(t){var e,n=Object(m["a"])(100*t.stop,2)+"%",i=Object(m["a"])(100*(null!==(e=t.cssStop)&&void 0!==e?e:t.stop),2)+"%",a=tt(r,t.color.value,t.color.swatch),s=et(a.value,o);F.push({stop:n,color:s,swatch:a.swatch,cssStop:i,originStop:t.stop})})),{type:a["s"].LinearGradientFill,colorStops:F,endPoints:t.endPoints,angle:J({width:R,height:V},t.endPoints)}}}function J(t,e){var n=null!==t&&void 0!==t?t:{width:0,height:0},i=n.width,r=n.height;if(0===i||0===r)return"0deg";var o=r/i,a=e[0],s=e[1]*o,l=e[2],u=e[3]*o,d=Object(c["j"])({y:a,x:s},{y:l,x:u});return d+"deg"}function Q(t,e){return Object(l["j"])(t)&&Object(l["i"])(e)&&0!==e.length?"".concat(t,";").concat(e.map((function(t){var e;return"".concat(null!==(e=t.originStop)&&void 0!==e?e:t.stop,",").concat(Y(t.color))})).join("/")):null}var Z=function(t){var e,n;t&&(t=t.parentNode);while(t){var i=t.skTintColor;if(i){var r=i.value;null!=r&&(e=r,n=i.swatch)}t=t.parentNode}if(e)return{color:V(e),swatch:n}},tt=function(t,e,n){if(null==t)return{value:e,swatch:n};if(null==e)return{value:e,swatch:n};var i=V(e),r=t.color,o=t.swatch,a=Math.round(i.a*r.a/255);return n=o,{value:H(r.r,r.g,r.b,a),swatch:n}},et=function(t,e){if(e>=1||"number"!==typeof e)return t;e<0&&(e=0);var n=V(t),i=Math.round(n.a*e);return H(n.r,n.g,n.b,i)};function nt(t,e,n,i){var r,o="color"===n||"textColor"===n;if(null!=e){var a=e.overrides.find((function(t){if(t.style){var e=t.style[n];return null!=e?t:void 0}}));if(a&&(r=a.style[n],null!=r))return o?{value:r,swatch:a.style["".concat(n,"Swatch")]}:r}return t&&(r=t[n],null!=r)?o?{value:r,swatch:t["".concat(n,"Swatch")]}:r:o?{value:i,swatch:null}:i}function it(t,e){var n;if(t){var i=function(t){var n;return t&&t.style?t.styleType!==e?null:null!==(n=t.name)&&void 0!==n?n:null:null},r=null===(n=t.overrides)||void 0===n||null===(n=n.find((function(t){return i(t)})))||void 0===n?void 0:n.name;return null!==r&&void 0!==r||(r=i(t.share)),r}}function rt(t,e,n){var i,r={fill:{},charSpacing:nt(t,e,"kerning",null,n),fontFamily:nt(t,e,"fontFamily","",n),fontWeight:null!==(i=mt[nt(t,e,"fontWeight",4,n)])&&void 0!==i?i:400,fontItalic:nt(t,e,"fontStyle","",n),fontSize:nt(t,e,"fontSize","",n),underline:!!nt(t,e,"textUnderline","",n),strikethrough:!!nt(t,e,"textStrikethrough","",n)};r.fontStyle=r.fontWeightCss=r.fontWeight.toString(),r.fontItalic?r.fontStyle+=" "+r.fontItalic:r.fontItalic="normal";var o=nt(t,e,"textColor","",n);return o.value&&(r.fill.value=B(o.value),r.fill.swatch=o.swatch),r}function ot(t){if(t&&t.type!==a["nb"].Artboard){var e=t.layers;if(!e)return t.type===a["nb"].ShapePath;var n=0,i=[];if(e.forEach((function(t,e){if(t)switch(t.type){case a["nb"].ShapePath:return void(t.markedForExport||n++);case a["nb"].Group:return void(ot(t)&&(n++,i.push(e)))}})),n===e.length){n>=7&&(t.layers=[]);for(var r=i.length-1;r>=0;r--){var o=i[r];e.splice(o,1)}return!0}return t.type===a["nb"].ShapePath}}var at=["topLeft","topRight","bottomRight","bottomLeft"];function st(t){if(Object(l["k"])(t)){var e;switch(t.fillType){case a["mb"].Color:var n=t.color;null!=n&&(e={value:B(n),swatch:t.colorSwatch,layeringType:t.layeringType});break;case a["mb"].Gradient:var i=t.gradient;if(i)switch(i.gradientType){case a["rb"].Linear:var r=i.from,o=i.to,s=i.stops;if(r&&o&&s){var u=[];e={endPoints:[r.x,r.y,o.x,o.y],colorStops:u},s.forEach((function(t){u.push({stop:t.position,color:{value:B(t.color),swatch:t.colorSwatch}})}))}break;case a["rb"].Radial:0===i.aspectRatio&&(i.aspectRatio=1);var d=i.from,h=i.to,f=Object(c["k"])(d.x,d.y,h.x,h.y,90),v=i.stops;if(d&&h&&v){var p=[],b=d.x,g=d.y,w=Math.sqrt(Math.pow(h.x-b,2)+Math.pow(h.y-g,2));e={endPoints:[d.x,d.y,h.x,h.y],colorStops:p,startX:b,startY:g,gradientRadialTransform:{rotate:f,scaleX:w,scaleY:w*i.aspectRatio,endR:1,startR:0}},v.forEach((function(t){p.push({stop:t.position,color:{value:B(t.color),swatch:t.colorSwatch}})}))}break;case a["rb"].Angular:var y=i.from,k=i.to,C=90,x=i.stops;if(y&&k&&x){var S,T,O=[],I=.5,A=.5,F=1;e={endPoints:[y.x,y.y,k.x,k.y],colorStops:O,startX:I,startY:A,gradientAngularTransform:{rotate:C,scaleX:F,scaleY:F,endR:1,startR:0}},x.sort((function(t,e){var n=t.position-e.position;return 0===n?0:n>0?1:-1}));var j=x[0],_=null!==(S=null===j||void 0===j?void 0:j.position)&&void 0!==S?S:0;0!=_&&(x.forEach((function(t){t.position-=_})),e.gradientAngularTransform.rotate=C=Object(m["a"])(C+360*_,2));var M=x[x.length-1],L=null!==(T=null===M||void 0===M?void 0:M.position)&&void 0!==T?T:1;L<1&&j&&(null===M||void 0===M?void 0:M.color)!=j.color&&x.push({position:1,color:j.color}),x.forEach((function(t){O.push({stop:t.position,color:{value:B(t.color),swatch:t.colorSwatch}})}))}break}break;case a["mb"].Pattern:e={assetId:"sketch"};break}return e}}function ct(t,e){var n=e.background;if(n&&n.enabled&&n.color&&n.includedInInstance)return!1;var i=e.frame,r=t.frame;if(i.width!==r.width)return!1;if(i.height!==r.height)return!1;var o=e.style;if(!o)return!0;var a=o.opacity;return null==a||a>=1}function lt(t,e){var n=e.nodeSharedStyles={overrides:[],share:null},i=t.sharedStyles;if(i){var r=e.overrideSharedStyleIds;if(r&&r.forEach((function(t){var e,r=i[t];r&&(null!==(e=r.id)&&void 0!==e||(r.id=t),n.overrides.push(r))})),e.sharedStyleId){var o=i[e.sharedStyleId];o&&(n.share=o)}}}function ut(t){var e,n=t.boxTransform={rotation:0,flippedHorizontally:!1,flippedVertically:!1},i=t.transform;Object(l["k"])(i)&&(null!=i.rotation&&(n.rotation=Object(m["a"])(i.rotation,3)),i.flippedHorizontally&&(n.flippedHorizontally=!0),i.flippedVertically&&(n.flippedVertically=!0));var r=null!==(e=t.name)&&void 0!==e?e:"";if(90===n.rotation||-90===n.rotation||270===n.rotation){if(t.type===a["nb"].ShapePath&&t.shapeType===a["ob"].Custom&&(-1!=r.indexOf("Line")||-1!=r.indexOf("直线")))return void(n.rotation=0);var o=t.frame,s=o.x,c=o.y,u=o.width,d=o.height;if(u===d)return;t._sketchRealStyle={rotation:n.rotation,x:s,y:c,width:u,height:d},t.markedForExport&&(n.rotation=0);var h=(u-d)/2,f=-h;t.frame={x:s+h,y:c+f,width:d,height:u}}}function dt(t,e,n){if(!e.markedForExport){var i=t.frame;i={x:0,y:0,width:i.width,height:i.height};var r=e.frame,o=n.globalBounds.x-t.globalBounds.x,a=n.globalBounds.y-t.globalBounds.y,s={x:o+r.x,y:a+r.y,width:r.width,height:r.height};i=I(i,s),i||(i={x:0,y:0,width:0,height:0});var c={width:i.width,height:i.height,x:i.x-o,y:i.y-a};if(!y(c,r)){e.frame=c;var l=e.frame.x-r.x,u=e.frame.y-r.y;e._sketchFixedFrame=1,0===l&&0===u||e.layers&&e.layers.forEach((function(t){t.frame.x-=l,t.frame.y-=u}))}}}function ht(t,e,n){if(n){if(dt(t,e,n),n._sketchFixedFrame&&!e.markedForExport){var i={x:0,y:0,width:n.frame.width,height:n.frame.height};ft(i,e)}if(e.hasClippingMask){var r=n.layers;if(r)for(var o=!1,a=e.frame,s=0,c=r.length;s<c;s++){var l=r[s];if(l!==e){if(o){if(l.hasClippingMask)break;if(l.shouldBreakMaskChain)break;l.markedForExport||ft(a,l)}}else o=!0}}}}function ft(t,e){var n=e.frame,i=n.x,r=n.y,o=I(t,e.frame);if(o||(o={x:0,y:0,width:0,height:0}),!y(o,e.frame)){var a=o.x-i,s=o.y-r;e.frame=o,e._sketchFixedFrame=1,0===a&&0===s||e.layers&&e.layers.forEach((function(t){var e=t.frame;e.x-=a,e.y-=s}))}}var mt=[100,100,100,200,300,400,500,500,600,700,800,900,900,900,900,900];function vt(t,e,n){var i;e.boundsInParent=e.frame,e.guid=e.id,e.visible=!e.hidden,e.children=e.layers;var r=1==t.sk25;ut(e),lt(t,e);var o=e.nodeSharedStyles,d=e.style,h=new Map;null!==(i=e.layerSN)&&void 0!==i||(e.layerSN=it(o,"Layer")),e.opacity=nt(d,o,"opacity",1,h);var f=c["e"][a["hb"][nt(d,o,"blendingMode",a["gb"].NORMAL,h)]];f&&(e.blendMode=f);var m=nt(d,o,"blur",null,h);if(null!=m){switch(m.blurType){case a["kb"].Glass:var v=m.distortion,p=m.depth,b=m.chromaticAberrationMultiplier,g=m.brightness,w=m.skipLightingEffects,y=m.isCustomGlass,k=m.radius,C=m.saturation;e.blur={visible:!0,isGlassEffect:!0,distortion:v,depth:p,chromaticAberrationMultiplier:b,brightness:g,skipLightingEffects:w,isCustomGlass:y,blurAmount:k,saturation:C};break;case a["kb"].Gaussian:e.blur={isBackgroundEffect:!1,visible:!0,blurAmount:m.radius};break;case a["kb"].Background:e.blur={isBackgroundEffect:!0,visible:!0,blurAmount:m.radius,saturation:m.saturation};break;case a["kb"].Zoom:var x=m.center;Object(l["k"])(x)&&(e.blur={isZoomEffect:!0,visible:!0,blurAmount:m.radius,center:x});break;case a["kb"].Motion:var S=m.motionAngle;"number"===typeof S&&(e.blur={isMotionEffect:!0,visible:!0,blurAmount:m.radius,motionAngle:S});break}if(e.blur){var T=m.gradient;T&&(e.blur.gradient=st({gradient:T,fillType:a["mb"].Gradient}))}}var O,I=nt(d,o,"borders",null,h);if(I&&I.length>0&&(e.strokeArr=[],I.forEach((function(t){var n=st(t);if(n){var i={strokeEnabled:!0,stroke:n,strokeWidth:t.thickness,strokePosition:t.position},r=nt(d,o,"borderOptions",null,h);if(r&&(i.strokeDashArray=r.dashPattern),0===e.strokeArr.length)for(var a in i)e[a]=i[a];e.strokeArr.push(i)}}))),r){var A=nt(d,o,"opacityGradient",null,h);A&&(O=st({gradient:A,fillType:a["mb"].Gradient}),a["mb"].Gradient)}e.opacityGradient=O;var F=nt(d,o,"shadows",null,h);F&&F.length>0&&(e.shadowArr=[],F.forEach((function(t){if(t){var n={visible:!0,x:t.x,y:t.y,blur:t.blur,spread:t.spread,color:{value:B(t.color),swatch:t.colorSwatch}};0===e.shadowArr.length&&(e.shadow=n),e.shadowArr.push(n)}})));var j=nt(d,o,"innerShadows",null,h);if(j&&j.length>0&&(e.innerShadowArr=[],j.forEach((function(t){if(t){var n={visible:!0,x:t.x,y:t.y,blur:t.blur,spread:t.spread,color:{value:B(t.color),swatch:t.colorSwatch}};0===e.innerShadowArr.length&&(e.innerShadow=n),e.innerShadowArr.push(n)}}))),r||e.type!==a["nb"].SymbolMaster&&e.type!==a["nb"].Artboard){var _=nt(d,o,"fills",null,h),M=null;Object(l["i"])(_)&&(e.fillArr=[],_.forEach((function(t){t=st(t),t&&(1===t.layeringType||!r&&e.type===a["nb"].Group?M=t:(0===e.fillArr.length&&(e.fillEnabled=!0,e.fill=t),e.fillArr.push({fillEnabled:!0,fill:t})))}))),e.skTintColor=M}if(ht(t,e,n),t===e||null==n)e.globalBounds=e.globalDrawBounds=Object(s["a"])({},e.frame);else{var L=n.globalBounds,P=e.frame;e.globalBounds=e.globalDrawBounds={x:L.x+P.x,y:L.y+P.y,width:P.width,height:P.height}}if(!e.types){switch(e.types={GraphicNode:1},e.type){case a["nb"].SymbolInstance:e.types.SymbolInstance=1;break;case a["nb"].Artboard:e.types.Artboard=1;var D=e.background;D&&D.enabled&&D.color&&(e.fillEnabled=!0,e.fill={value:B(D.color),swatch:D.colorSwatch,includedInExport:D.includedInExport});break;case a["nb"].Group:e.types.Group=1;break;case a["nb"].Text:var N;e.types.Text=1,e.paragraphSpacing=nt(d,o,"paragraphSpacing",0,h),e.lineSpacing=nt(d,o,"lineHeight",0,h);var E=nt(d,o,"alignment",a["ib"].left,h);e.textAlign=a["jb"][E],null==e.textAlign&&(e.textAlign=E);var R=nt(d,o,"verticalAlignment",a["pb"].top,h);R!==a["pb"].top&&(e.textVerticalAlign=a["qb"][R]);var V=e.styleRanges=[rt(d,o,h)],H=e.textStyles;if(null!==(N=e.charSN)&&void 0!==N||(e.charSN=it(o,"Text")),Object(l["i"])(H)&&H.length>1)for(var U=1;U<H.length;U++){var G=H[U],W=rt(G,null,h);V.push(W)}break;case a["nb"].ShapePath:if(e.types.Rectangle=1,!r)switch(e.shapeType){case a["ob"].Rectangle:var $=e.points,z=null;Object(l["i"])($)&&$.length>0&&(z={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},$.forEach((function(t,e){t&&(z[at[e]]=t.cornerRadius)}))),e.cornerRadii=z;break}break}r&&bt(e)}e.usedSharedItems=Object(u["a"])(h.values())}var pt=["圆角","角(平滑)","角(成角度的)","角(内直角)","角(内弧)"];function bt(t){var e,n=null===(e=t.style)||void 0===e?void 0:e.corners;if(Object(l["k"])(n)){var i=n.style,r=n.radii,o=null;if(Object(l["i"])(r)&&r.length>0){if(o={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},1===r.length){var a=r[0];r.splice(1,0,a,a,a)}r.forEach((function(t,e){t&&(o[at[e]]=t)}))}t.cornerRadiiName=pt[i],t.cornerRadii=o}}function gt(t,e){return!e&&1===t.types.Group||e&&1===t.types.Group&&0===t.groupBehavior}n("d9e2"),n("fb6a"),n("498a"),n("2b3d"),n("bf19"),n("9861"),n("88a7"),n("271a"),n("5494");var wt=function(){function t(e,n){return Object(d["a"])(this,t),Object(f["a"])(this,"_x",0),Object(f["a"])(this,"_y",0),this.x=null!=e?e:0,this.y=null!=n?n:0,this}return Object(h["a"])(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"top",get:function(){return this._y},set:function(t){this._y=t}},{key:"left",get:function(){return this._x},set:function(t){this._x=t}},{key:"toJSON",value:function(){var t=this.x,e=this.y;return{x:t,y:e}}}])}(),yt=75,kt="quality.jpg",Ct={None:-1,Brush:0,Line:1,Rectangle:2,Ellipse:3,Text:4,Arrow:5,Image:6,Move:7,Deleted:8,End:9},xt=[14,16,18,20,24,28,32,36,48,72],St=36,Tt={Fine:3,Normal:6,Crude:12},Ot=[{color:"#545454",border:"#434343",name:"black"},{color:"#ffffff",border:"#cccccc",name:"white"},{color:"#f34e1e",border:"#c23e18",name:"orange"},{color:"#ffc701",border:"#cc9f07",name:"yellow"},{color:"#0ea958",border:"#0d8747",name:"green"},{color:"#417dee",border:"#2b63ce",name:"blue"},{color:"#9847ff",border:"#7e3bd2",name:"purple"},{color:"#d27c2c",border:"#a76323",name:"brown"}],It=1,At=Object(h["a"])((function t(){Object(d["a"])(this,t),Object(f["a"])(this,"id",0),Object(f["a"])(this,"data",null),Object(f["a"])(this,"blob",null),Object(f["a"])(this,"thumbBlob",null),this.id=It++})),Ft=Object(h["a"])((function t(){Object(d["a"])(this,t),Object(f["a"])(this,"type",""),Object(f["a"])(this,"thumbType",""),Object(f["a"])(this,"name",""),Object(f["a"])(this,"length",0),Object(f["a"])(this,"thumbLength",0),Object(f["a"])(this,"fold",null),Object(f["a"])(this,"fileName",null),Object(f["a"])(this,"thumbFileName",null),Object(f["a"])(this,"imageSize",null),Object(f["a"])(this,"thumbImageSize",null)}));function jt(t){return new Promise((function(e,n){if(t instanceof Image)return e(t);var i,r=!1;"string"===typeof t?i=t:(i=URL.createObjectURL(t),r=!0);var o=function(){r&&URL.revokeObjectURL(i),i=t=void 0};try{var a=new Image;a.onload=function(t){o(),e(t.target)},a.onerror=function(){o(),n("图片加载失败,不支持的图片类型")},a.src=i}catch(s){o(),n(s)}}))}var _t="image/jpeg";function Mt(t,e){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o,a,s,c,l,u,d,h,f,m;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return r=e.naturalWidth,o=e.naturalHeight,a=Math.max(Math.ceil(o/r*n),1),t.p=1,s=document.createElement("canvas"),c=function(t){return t},l=new Nt(c(n),c(a)),s.width=l.width,s.height=l.height,s.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(s),u=s.getContext("2d"),u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height),u.drawImage(e,0,0,r,o,0,0,l.width,l.height),t.n=2,qt(s,_t,.75);case 2:return h=t.v,f=n,m=a,t.a(2,{blob:h,width:f,height:m});case 3:return t.p=3,s&&(d=s.parentNode,d&&d.removeChild(s)),t.f(3);case 4:return t.a(2)}}),t,null,[[1,,3,4]])}))),Lt.apply(this,arguments)}function Pt(t){return Dt.apply(this,arguments)}function Dt(){return Dt=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a,s;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(e instanceof Blob||e instanceof File){t.n=1;break}throw new Error("附件异常,不支持的图片格式");case 1:return t.n=2,jt(e);case 2:if(n=t.v,r=new At,o=new Ft,r.data=o,o.imageSize=new Nt(n.naturalWidth,n.naturalHeight),o.type=e.type,o.name=e.name,o.length=e.size,a=300,r.blob=e,!(o.imageSize.width<=a)){t.n=3;break}o.thumbImageSize=o.imageSize,o.thumbLength=0,o.thumbType=o.type,t.n=5;break;case 3:return t.n=4,Mt(n,a);case 4:s=t.v,o.thumbImageSize=new Nt(s.width,s.height),o.thumbLength=s.blob.size,o.thumbType=_t,r.thumbBlob=s.blob;case 5:return t.a(2,r)}}),t)}))),Dt.apply(this,arguments)}var Nt=function(){function t(e,n){return Object(d["a"])(this,t),Object(f["a"])(this,"_width",0),Object(f["a"])(this,"_height",0),this.width=null!=e?e:0,this.height=null!=n?n:0,this}return Object(h["a"])(t,[{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"toJSON",value:function(){var t=this.width,e=this.height;return{width:t,height:e}}}])}(),Et={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},Rt=72,Vt=3,Bt=450;function Ht(t,e){null==e&&(e=1);var n=t.toLowerCase();if(!n)return n;Et[n]&&(n=Et[n]);var i=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i;if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(n)){if(4===n.length){for(var r="#",o=1;o<4;o+=1)r+=n.slice(o,o+1).concat(n.slice(o,o+1));n=r}for(var a=[],s=1;s<7;s+=2)a.push(parseInt("0x"+n.slice(s,s+2)));a.push(e),n="RGBA("+a.join(",")+")"}else n=i.test(n)?n.replace(i,"rgba($1,$2,$3,"+e+")"):n.replace(/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)\s*$/i,"rgba($1,$2,$3,"+e+")");return n}function Ut(t,e){return{x:t.x*Math.cos(e)+t.y*Math.sin(e),y:t.y*Math.cos(e)-t.x*Math.sin(e)}}function Gt(t,e,n,i){var r,o,a,s=Math.atan((i.x-n.x)/(i.y-n.y)),c=Ut(i,-s),l=Ut(n,-s),u={x:0,y:0},d={x:0,y:0},h={x:0,y:0},f={x:0,y:0},m=c.y-l.y;switch(t){case Tt.Fine:m=m>0?6:-6,r=m>0?12:-12,o=m>0?2:-2,a=m>0?4:-4;break;case Tt.Crude:m=m>0?10:-10,r=m>0?20:-20,o=m>0?6:-6,a=m>0?12:-12;break;default:m=m>0?8:-8,r=m>0?16:-16,o=m>0?4:-4,a=m>0?8:-8}m*=e,r*=e,o*=e,a*=e,u.x=c.x+m,u.y=c.y-r,d.x=c.x-m,d.y=c.y-r,h.x=c.x+o,h.y=c.y-a,f.x=c.x-o,f.y=c.y-a;var v=Ut(u,s),p=Ut(d,s),b=Ut(h,s),g=Ut(f,s);return{h1:v,h2:p,h3:b,h4:g}}function Wt(t){var e=t[t.length-1];if(e){var n=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;t.forEach((function(t){n=Math.min(t.x,n),i=Math.min(t.y,i),r=Math.max(t.x+t.width,r),o=Math.max(t.y+t.height,o)}));var a=new w;return a.x=n,a.y=i,a.width=r-n,a.height=o-i,a}}function $t(t){var e=t[t.length-1];if(e){var n=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;t.forEach((function(t){var e=(new w).set(t.x,t.y,1,1);n=Math.min(e.x,n),i=Math.min(e.y,i),r=Math.max(e.right,r),o=Math.max(e.bottom,o)}));var a=new w;return a.x=n,a.y=i,a.width=r-n,a.height=o-i,a}}var zt=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"action",Ct.None),Object(f["a"])(this,"startPoint",null),Object(f["a"])(this,"endPoint",null),Object(f["a"])(this,"eventRect",null),Object(f["a"])(this,"color",null),Object(f["a"])(this,"brushSize",0),Object(f["a"])(this,"fontSize",0),Object(f["a"])(this,"text",null),Object(f["a"])(this,"family",null),Object(f["a"])(this,"lineHeight",0),Object(f["a"])(this,"textareaSize",null),Object(f["a"])(this,"points",null),Object(f["a"])(this,"textSplit",null),Object(f["a"])(this,"brushHash",null),Object(f["a"])(this,"dragFrom",-1),Object(f["a"])(this,"dragOn",-1),Object(f["a"])(this,"dragOffset",null),Object(f["a"])(this,"dragTarget",null)}return Object(h["a"])(t,[{key:"getBrushSize",value:function(){var t=this.action,e=this.brushSize;if(t!==Ct.Brush)return e;switch(e){case Tt.Crude:return 6;case Tt.Fine:return 1;default:return 3}}},{key:"makeBrushHash",value:function(t){return"".concat(t.offset.x,"-").concat(t.offset.y,"-").concat(t.scale,"-").concat(t.sceneWidth,"-").concat(t.sceneHeight)}},{key:"getArrowEventRect",value:function(){var t=this.startPoint,e=this.endPoint,n=1,i=Gt(this.getBrushSize(),n,t,e);return $t([t,e,i.h1,i.h2,i.h3,i.h4])}},{key:"makePoint",value:function(t){switch(this.action){case Ct.Arrow:this.eventRect=this.getArrowEventRect();break;case Ct.Text:var e;t.font="".concat(this.fontSize,"px ").concat(null!==(e=this.family)&&void 0!==e?e:"sans-serif"),this.text=this.text.replace(/\r/g,"");for(var n=this.text,i={},r=0,o=this.textSplit=[],a=0,s=Bt,c=n.length,l=this.lineHeight,u=new Nt(0,0),d=0;d<c;d++){var h=n[d];if("\n"!==h){var f=i[h];f||(f=i[h]=t.measureText(h).width);var m=a+f;m>s?(u.width=Math.max(u.width,a),u.height+=l,a=f,o.push({index:r,length:d-r}),r=d):a=m}else u.width=Math.max(u.width,a),u.height+=l,a=0,o.push({index:r,length:d-r}),r=d+1}u.width=Math.max(u.width,a),r<=c-1&&(u.height+=l,o.push({index:r,length:c-r}));var v=this.startPoint;this.endPoint=new wt(v.x+u.width,v.y+u.height);var p=l/2-l/8;this.eventRect=(new w).set(v.x,v.y-p,u.width,u.height);break;case Ct.Brush:var b,g=null!==(b=$t(this.points))&&void 0!==b?b:new w,y=this.getBrushSize(),k=Math.ceil(y/2);this.startPoint=new wt(g.x-k,g.y-k),this.endPoint=new wt(g.right,g.bottom),this.eventRect=(new w).set(g.x-k,g.y-k,g.width+y,g.height+y),this.brushHash=null;break;default:var C=this.startPoint,x=this.endPoint;if(this.eventRect=new w,C&&x){var S=Math.min(C.x,x.x),T=Math.min(C.y,x.y),O=Math.round(Math.abs(C.x-x.x)),I=Math.round(Math.abs(C.y-x.y));this.eventRect.set(S,T,O,I)}break}}},{key:"isVaildData",value:function(){switch(this.action){case Ct.Deleted:var t=this.dragTarget;return!!t;case Ct.Move:var e=this.startPoint,n=this.endPoint,i=this.dragTarget,r=this.dragOffset;return!!i&&(!(!e||!n)&&((e.x!==n.x||e.y!==n.y)&&(this.dragOffset=new wt(n.x-e.x+r.x,n.y-e.y+r.y),!0)));case Ct.Arrow:case Ct.Ellipse:case Ct.Rectangle:var o=this.startPoint,a=this.endPoint;return null!=o&&null!=a&&(o.x!==a.x||o.y!==a.y);case Ct.Text:var s=this.text;return!!s&&(s=s.trim(),s.length>0);case Ct.Brush:var c=this.points;return!(!Object(l["i"])(c)||c.length<=1);default:return!1}}},{key:"isOverlapPoint",value:function(t,e,n){Yt.arrow(this,e,n)}}])}(),Yt={arrow:function(t,e,n){var i=t.startPoint,r=t.endPoint;if(i&&r){var o=Jt.getCanvasLocation(e,t.startPoint,n),a=Jt.getCanvasLocation(e,t.endPoint,n),s=e.scale*e.canvasScale,c=Gt(t.getBrushSize(),s,o,a);return{triangle1:{p0:new wt(o.x,o.y),p1:new wt(c.h3.x,c.h3.y),p2:new wt(c.h4.x,c.h4.y)},triangle2:{p0:new wt(a.x,a.y),p1:new wt(c.h1.x,c.h1.y),p2:new wt(c.h2.x,c.h2.y)}}}}},Xt=Object(h["a"])((function t(){Object(d["a"])(this,t),Object(f["a"])(this,"offset",null),Object(f["a"])(this,"scale",1),Object(f["a"])(this,"sceneWidth",1),Object(f["a"])(this,"sceneHeight",1),Object(f["a"])(this,"canvasScale",1)}));function Kt(t){return new Promise((function(e,n){var i=new Image;i.onload=function(t){e(t.target)},i.onerror=function(){n("画板预览图加载失败")},i.crossOrigin="*",i.src=t}))}function qt(t,e,n){return new Promise((function(i,r){try{t.toBlob((function(t){i(t)}),e,n)}catch(o){r(o)}}))}var Jt={_supportCanvasEllipse:-1,get supportCanvasEllipse(){var t=this._supportCanvasEllipse;return-1===t&&(t="function"===typeof CanvasRenderingContext2D.prototype.ellipse?1:0),t},getCanvasLocation:function(t,e,n){var i=new wt(e.x-t.offset.x,e.y-t.offset.y);n&&(i.x+=n.x,i.y+=n.y);var r=t.scale*t.canvasScale;return i.x=Math.floor(i.x*r),i.y=Math.floor(i.y*r),i},getCanvasRect:function(t,e,n){var i=(new w).set(e.x-t.offset.x,e.y-t.offset.y,e.width,e.height);n&&(i.x+=n.x,i.y+=n.y);var r=t.scale*t.canvasScale;return i.x=Math.floor(i.x*r),i.y=Math.floor(i.y*r),i.width=Math.ceil(i.width*r),i.height=Math.ceil(i.height*r),i},getMidPointBtw:function(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}},setStrokeStyle:function(t,e,n,i){t.lineCap=t.lineJoin=null!==i&&void 0!==i?i:"round",t.fillStyle=t.strokeStyle=e.color;var r=e.getBrushSize(),o=Math.ceil(r*n.scale*n.canvasScale);t.lineWidth=o},drawRectangle:function(t,e,n,i,r,o){var a=e.startPoint,s=e.endPoint;if(a&&s){var c=this.getCanvasLocation(n,e.startPoint,o),l=this.getCanvasLocation(n,e.endPoint,o);r?this.drawSelectItem(t,e,n,o):i&&this.drawBackground(t,e,n,o),this.setStrokeStyle(t,e,n);var u=Math.round(t.lineWidth/2),d=Math.min(c.x,l.x)+u,h=Math.min(c.y,l.y)+u,f=Math.max(0,Math.abs(c.x-l.x)-2*u),m=Math.max(0,Math.abs(c.y-l.y)-2*u);t.strokeRect(d,h,f,m),r&&this.drawSelectItemBorder(t,e,n,o)}},drawEllipse:function(t,e,n,i,r,o){var a=e.startPoint,s=e.endPoint;if(a&&s){var c=this.getCanvasLocation(n,e.startPoint,o),l=this.getCanvasLocation(n,e.endPoint,o);r?this.drawSelectItem(t,e,n,o):i&&this.drawBackground(t,e,n,o),this.setStrokeStyle(t,e,n);try{var u=Math.ceil(t.lineWidth/2),d=Math.round(Math.abs(c.x-l.x)/2),h=Math.round(Math.abs(c.y-l.y)/2),f=Math.min(c.x,l.x)+d,m=Math.min(c.y,l.y)+h;if(d=Math.max(0,d-u),h=Math.max(0,h-u),this.supportCanvasEllipse)return t.beginPath(),t.ellipse(f,m,d,h,0*Math.PI/180,0,2*Math.PI),t.closePath(),void t.stroke();t.save();var v=d>h?d:h,p=d/v,b=h/v;t.scale(p,b),t.beginPath(),t.arc(f/p,m/b,v,0,2*Math.PI,!1),t.closePath(),t.stroke(),t.restore()}finally{r&&this.drawSelectItemBorder(t,e,n,o)}}},drawArrow:function(t,e,n,i,r,o){if(t){var a=Yt.arrow(e,n,o);a&&(r?this.drawSelectItem(t,e,n,o):i&&this.drawBackground(t,e,n,o),this.setStrokeStyle(t,e,n,"buff"),t.beginPath(),t.moveTo(a.triangle1.p0.x,a.triangle1.p0.y),t.lineTo(a.triangle1.p1.x,a.triangle1.p1.y),t.lineTo(a.triangle1.p2.x,a.triangle1.p2.y),t.closePath(),t.fill(),t.beginPath(),t.moveTo(a.triangle2.p0.x,a.triangle2.p0.y),t.lineTo(a.triangle2.p1.x,a.triangle2.p1.y),t.lineTo(a.triangle2.p2.x,a.triangle2.p2.y),t.closePath(),t.fill(),r&&this.drawSelectItemBorder(t,e,n,o))}},drawSelectItem:function(t,e,n,i){return this.drawBackground(t,e,n,i)},drawSelectItemBorder:function(t,e,n,i){if(e.eventRect){var r=this.getCanvasRect(n,e.eventRect,i),o="#1886ff";t.strokeStyle=o,t.lineCap="round";var a=Math.max(Math.ceil(n.scale*n.canvasScale),1);t.lineWidth=a,t.strokeRect(r.x,r.y,r.width,r.height)}},drawBackground:function(t,e,n,i){if(e.eventRect){var r=this.getCanvasRect(n,e.eventRect,i),o="#1886ff";o=Ht(o,.2),t.fillStyle=o,t.fillRect(r.x,r.y,r.width,r.height)}},drawText:function(t,e,n,i,r,o){var a,s=e.startPoint,c=e.textSplit;if(s&&c){var l=this.getCanvasLocation(n,e.startPoint,o);if(void 0!=t){r?this.drawSelectItem(t,e,n,o):i&&this.drawBackground(t,e,n,o);var u=n.canvasScale*n.scale,d=e.text,h=Math.max(1,Math.round(e.lineHeight*u)),f=new wt(l.x,l.y-Math.round(h/4));t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",t.font="".concat(Math.max(1,Math.round(e.fontSize*n.scale)*n.canvasScale),"px ").concat(null!==(a=e.family)&&void 0!==a?a:"sans-serif"),t.fillStyle=e.color,t.textAlign="left",t.textBaseline="top",c.forEach((function(e){if(e.length>0){var n=d.substr(e.index,e.length);t.fillText(n,f.x,f.y)}f.y+=h})),r&&this.drawSelectItemBorder(t,e,n,o)}}},smoothPoints:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e%2===0&&e++;for(var n=Math.floor(e/2),i=[],r=0;r<t.length;r++){for(var o=0,a=0,s=0,c=Math.max(0,r-n);c<=Math.min(t.length-1,r+n);c++)o+=t[c].x,a+=t[c].y,s++;i.push({x:Math.round(o/s),y:Math.round(a/s)})}return i},drawSmoothCurve:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=0;n<e.length-1;n++){var i=e[n],r=e[n+1],o=(i.x+r.x)/2,a=(i.y+r.y)/2;t.quadraticCurveTo(i.x,i.y,o,a)}var s=e[e.length-1];s&&t.quadraticCurveTo(s.x,s.y,s.x,s.y),t.stroke(),t.closePath()},drawBrush:function(t,e,n,i,r,o){var a=this;if(Object(l["i"])(e.points)&&!(e.points.length<=1)){var s=e.points.map((function(t){return a.getCanvasLocation(n,t,o)}));r?this.drawSelectItem(t,e,n,o):i&&this.drawBackground(t,e,n,o),this.setStrokeStyle(t,e,n),this.drawSmoothCurve(t,s),r&&this.drawSelectItemBorder(t,e,n,o),t=null}},save:function(t,e,n,o){var a=this;return Object(r["a"])(Object(i["a"])().m((function r(){var s,u,d,h,f,m,v,p,b,g,y,k,C,x,S,T,O,I;return Object(i["a"])().w((function(i){while(1)switch(i.p=i.n){case 0:if(Object(l["j"])(e)){i.n=1;break}throw"artboardPreviewPath is empty";case 1:return i.n=2,Kt(Object(c["h"])(e,{r:Math.random()}));case 2:if(s=i.v,u=o>=n.length-1?n:n.slice(0,o+1),0!==u.length){i.n=3;break}throw"没有截图操作信息";case 3:return d=[],h=[t],u.forEach((function(t){var e,i=t.action;switch(i){case Ct.Brush:case Ct.Rectangle:case Ct.Ellipse:case Ct.Arrow:case Ct.Text:var r=a.getHistoryTagetWithDragOn(n,t,o);if(r){if(r.action===Ct.Deleted)return;e=r.dragOffset}var s=new w;s.set(t.eventRect.x,t.eventRect.y,t.eventRect.width,t.eventRect.height),e&&(s.x+=e.x,s.y+=e.y),d.push({target:t,offset:e}),h.push(s);break}})),f=Wt(h),m=new wt(-f.x,-f.y),i.p=4,p=2,v=document.createElement("canvas"),b=function(t){return t*p},v.width=b(f.width),v.height=b(f.height),g=500,y=Math.round(f.height/f.width*g),v.style.cssText="top:-10000px;left:0;width:".concat(g,"px;height:").concat(y,"px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;"),document.body.appendChild(v),k=v.getContext("2d"),k.fillStyle="#fafafa",k.fillRect(0,0,b(f.width),b(f.height)),C=new Nt(s.width,s.height),k.drawImage(s,0,0,C.width,C.height,b(m.x+t.x),b(m.y+t.y),b(t.width),b(t.height)),x=!1,S=!1,T=new Xt,T.offset=new wt,T.canvasScale=p,T.scale=1,T.sceneWidth=f.width,T.sceneHeight=f.height,O=new wt,d.forEach((function(t){var e=t.target;switch(O.x=m.x,O.y=m.y,t.offset&&(O.x+=t.offset.x,O.y+=t.offset.y),e.action){case Ct.Brush:var n=!1;a.drawBrush(k,e,T,x,S,O,n);break;case Ct.Rectangle:a.drawRectangle(k,e,T,x,S,O);break;case Ct.Ellipse:a.drawEllipse(k,e,T,x,S,O);break;case Ct.Arrow:a.drawArrow(k,e,T,x,S,O);break;case Ct.Text:a.drawText(k,e,T,x,S,O);break}})),i.n=5,qt(v,"image/jpeg",.75);case 5:return i.a(2,i.v);case 6:return i.p=6,v&&(I=v.parentNode,I&&I.removeChild(v)),i.f(6);case 7:return i.a(2)}}),r,null,[[4,,6,7]])})))()},getHistoryTagetWithDragOn:function(t,e,n){if(null==e)return null;if(e.action===Ct.Move)return null;var i=e.dragOn;if(-1===i)return e;if(i>n)return e;var r,o=null;while(i<=n){var a=t[i];if(!a)return null;if(a.action!==Ct.Move&&a.action!==Ct.Deleted)return null;if(r=i,i=a.dragOn,-1===i)return a;if(i>n)return a;var s=t[i];if(!s)return a;if(s.action!==Ct.Move&&s.action!==Ct.Deleted)return a;if(s.dragFrom!==r)return a;o=a}return o}},Qt=n("751a"),Zt=(n("4d63"),n("c607"),n("2c3e"),n("313d"),n("0eb6"),n("b7ef"),n("8bd4"),"function"===typeof createImageBitmap),te="function"===typeof Image;function ee(t){return ne.apply(this,arguments)}function ne(){return ne=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,fetch(e,{mode:"cors",credentials:"include",cache:"no-cache"});case 1:return n=t.v,t.n=2,n.blob();case 2:return r=t.v,t.n=3,createImageBitmap(r);case 3:return o=t.v,t.a(2,o)}}),t)}))),ne.apply(this,arguments)}function ie(t){return re.apply(this,arguments)}function re(){return re=Object(r["a"])(Object(i["a"])().m((function t(e){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.a(2,new Promise((function(t){var n=new Image;n.onerror=function(){t(null)},n.onload=function(e){t(e.target)},n.src=e})))}}),t)}))),re.apply(this,arguments)}function oe(t,e){return ae.apply(this,arguments)}function ae(){return ae=Object(r["a"])(Object(i["a"])().m((function t(e,n){return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(t.p=0,!n||!Zt){t.n=2;break}return t.n=1,ee(e);case 1:return t.a(2,t.v);case 2:if(!te){t.n=4;break}return t.n=3,ie(e);case 3:return t.a(2,t.v);case 4:if(n||!Zt){t.n=6;break}return t.n=5,ee(e);case 5:return t.a(2,t.v);case 6:return t.a(2,null);case 7:return t.p=7,t.v,t.a(2,null)}}),t,null,[[0,7]])}))),ae.apply(this,arguments)}var se=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(d["a"])(this,t),Object(f["a"])(this,"queue",[]),Object(f["a"])(this,"runningCount",0),Object(f["a"])(this,"runningMax",10),Object(f["a"])(this,"imageBitmapFirst",!1),Object(f["a"])(this,"_paused",!1),this.imageBitmapFirst=!0===e}return Object(h["a"])(t,[{key:"canNext",get:function(){return!this.paused&&(this.runningCount<this.runningMax&&this.queue.length>0)}},{key:"paused",get:function(){return this._paused},set:function(t){if(this._paused=!!t,!this._paused)for(var e=0;e<this.runningMax-this.runningCount;e++)this.run()}},{key:"run",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(){var e,n,r;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(this.canNext){t.n=1;break}return t.a(2);case 1:if(e=this.queue.splice(0,1)[0],e){t.n=2;break}return t.a(2);case 2:if(0!==e.list.length){t.n=3;break}return this.run(),t.a(2);case 3:return this.runningCount++,t.n=4,oe(e.src,this.imageBitmapFirst);case 4:if(n=t.v,this.runningCount--,r=e.list,r&&0!==r.length){t.n=5;break}return t.a(2);case 5:r.forEach((function(t){try{t.callback(n,t.state)}catch(e){}})),this.run();case 6:return t.a(2)}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"add",value:function(t,e,n){if(!t)return e(null,n);var i=this._get(t);if(!i)return i={src:t,list:[{callback:e,state:n}]},this.queue.push(i),void this.run();var r=i.list.findIndex((function(t){return e===t.callback&&t.state===n}));-1===r&&(i.list.push({callback:e,state:n}),this.run())}},{key:"remove",value:function(t,e,n){if(t){var i=this._get(t);if(i){var r=i.list.findIndex((function(t){return e===t.callback&&t.state===n}));-1!==r&&i.list.splice(r,1)}}}},{key:"_get",value:function(t){return this.queue.find((function(e){return e.src===t}))}},{key:"clean",value:function(){this.runningCount=0,this.queue.splice(0)}}])}(),ce=new se,le="#1886FF",ue="#cdcdda",de={otherpage:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g  stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g  transform="translate(-827.000000, -471.000000)">\n              <g  transform="translate(827.000000, 471.000000)">\n                  <rect  fill="#1886FF" x="0" y="0" width="20" height="20" rx="4"></rect>\n                  <g  transform="translate(5.000000, 5.000000)" stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round">\n                      <path d="M3.18917988,0 L1.3,0 C0.582029825,3.53933586e-16 -3.09970593e-16,0.582029825 0,1.3 L0,8.7 C8.79259876e-17,9.41797017 0.582029825,10 1.3,10 L8.7,10 C9.41797017,10 10,9.41797017 10,8.7 L10,6.92115218 L10,6.92115218" ></path>\n                      <polyline  points="5.59135462 1.13732349e-13 10 1.13732349e-13 10 4.53043169"></polyline>\n                      <line x1="4.16417796" y1="5.7565608" x2="10" y2="1.13664457e-13" ></line>\n                  </g>\n              </g>\n          </g>\n      </g>\n  </svg>',link:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-899.000000, -471.000000)">\n              <g transform="translate(899.000000, 471.000000)">\n                  <rect fill="#1886FF" x="0" y="0" width="20" height="20" rx="4"></rect>\n                  <path d="M13.0932433,4 C14.2116336,4.06761548 15.2120028,4.61417394 15.7234275,5.83688719 C16.2517123,7.07650431 16.0100501,8.23723671 15.1108418,9.24019965 C14.4645359,9.93889294 13.7676495,10.6037785 13.0932433,11.2630294 C12.8066207,11.5503952 12.3289163,11.5672991 12.076014,11.2968372 C11.8231117,11.0263752 11.8399719,10.6488555 12.1603148,10.3445858 C12.8234809,9.67970027 13.5035071,9.01481472 14.1610531,8.33865993 C15.1445622,7.31879311 14.7061981,5.70165623 13.3461457,5.34667496 C12.7672804,5.19454014 12.2277554,5.29596336 11.8006315,5.70165623 C11.1037451,6.34963791 10.440579,7.0483312 9.7493127,7.69067825 C9.59757131,7.82590921 9.36152914,7.9442363 9.17044739,7.92733243 C8.6590227,7.89352469 8.40612039,7.27935075 8.76580368,6.90746561 C9.53013069,6.10734911 10.2944577,5.34104034 11.1093652,4.59163544 C11.5814495,4.15213483 12.2446156,4 13.0932433,4 L13.0932433,4 Z M4,12.9308779 C4,12.0800498 4.30348278,11.3306449 4.89920824,10.716471 C5.56237432,10.0346815 6.2255404,9.36979599 6.89994658,8.71054507 C7.22028952,8.38937154 7.61369312,8.37246767 7.8834556,8.64292959 C8.15321807,8.93029537 8.13635791,9.29091126 7.79915482,9.61208479 C7.1528489,10.2600665 6.51216303,10.8855097 5.88271726,11.5334913 C5.1015301,12.3336078 5.06780979,13.4041863 5.78155633,14.1366873 C6.47844272,14.8353806 7.61369312,14.8353806 8.32743966,14.1366873 C8.99060574,13.4887056 9.61443146,12.8463586 10.2607374,12.1983769 C10.6485209,11.8095879 11.2442464,11.9617227 11.3454073,12.4688388 C11.3791276,12.6547814 11.311687,12.9308779 11.1768058,13.0661089 C10.4630592,13.8155138 9.76617285,14.5649187 8.98498569,15.2410735 C8.03519699,16.0749977 6.93366689,16.2102287 5.77593628,15.7031126 C4.69688639,15.2410735 4,14.1535912 4,12.9308779 L4,12.9308779 Z M12.6380192,8.06256339 C12.6042989,8.14708274 12.5537184,8.29921757 12.4356973,8.41754465 C11.1318454,9.74731575 9.83923352,11.0545484 8.51852142,12.3674156 C8.24875894,12.6378775 7.83849518,12.6209736 7.58559287,12.3674156 C7.31583039,12.0969537 7.33269055,11.7363378 7.61931317,11.4320681 L11.4802886,7.55544729 C11.6826104,7.35260085 11.9411328,7.2680815 12.2277554,7.38640859 C12.5031379,7.50473568 12.621159,7.69067825 12.6380192,8.06256339 Z" fill="#FFFFFF" fill-rule="nonzero"></path>\n              </g>\n          </g>\n      </g>\n  </svg>',back:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-827.000000, -447.000000)">\n              <g transform="translate(827.000000, 447.000000)">\n                  <rect fill="#1886FF" x="0" y="0" width="20" height="20" rx="4"></rect>\n                  <g transform="translate(5.000000, 3.999689)" stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round">\n                      <polyline transform="translate(2.988418, 2.988418) rotate(-45.000000) translate(-2.988418, -2.988418) " points="1.01650178 5.1015487 0.875287378 0.875287378 5.1015487 1.01650178"></polyline>\n                      <path d="M0.685919732,3.01908886 L6.50938891,3.01908886 C8.43720018,3.01908886 10,4.58188868 10,6.50969995 C10,8.43751123 8.43720018,10.000311 6.50938891,10.000311 L2.06828362,10.000311 L2.06828362,10.000311"></path>\n                  </g>\n              </g>\n          </g>\n      </g>\n  </svg>',go:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-807.000000, -392.000000)">\n              <g transform="translate(807.000000, 392.000000)">\n                  <path d="M0,0 L16,0 C18.209139,-4.05812251e-16 20,1.790861 20,4 L20,16 C20,18.209139 18.209139,20 16,20 L0,20 L0,20 L0,0 Z" fill="#1886FF" transform="translate(10.000000, 10.000000) scale(-1, 1) translate(-10.000000, -10.000000) "></path>\n                  <polyline stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round" transform="translate(8.000000, 10.000000) scale(-1, 1) rotate(-45.000000) translate(-8.000000, -10.000000) " points="4 14 4 6 12 6"></polyline>\n              </g>\n          </g>\n      </g>\n  </svg>',flowStartIcon:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="16px" height="26px" viewBox="0 0 16 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-232.000000, -323.000000)">\n              <g transform="translate(240.000000, 336.000000) scale(-1, 1) translate(-240.000000, -336.000000) translate(232.000000, 323.000000)">\n                  <path d="M0,0 L16,0 L16,26 L4,26 C1.790861,26 2.705415e-16,24.209139 0,22 L0,0 L0,0 Z" fill="#1886FF" transform="translate(8.000000, 13.000000) scale(-1, 1) translate(-8.000000, -13.000000) "></path>\n                  <path d="M8.04115209,9 L12,12.8990659 L12,13.7290307 L11.012,13.729 L11.0126751,16.7147272 L9.01944469,16.7147272 L9.019,13.729 L7.026,13.729 L7.02621423,16.7147272 L5.03298378,16.7147272 L5.032,13.729 L4,13.7290307 L4,12.8990659 L8.04115209,9 Z" fill="#FFFFFF" transform="translate(8.000000, 12.857364) scale(-1, 1) translate(-8.000000, -12.857364) "></path>\n              </g>\n          </g>\n      </g>\n  </svg>',dev:'<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12.4 7.3999L11.2 14.5999" stroke="#22AB42" stroke-width="1.2"/>\n<path d="M14.7998 7.3999L18.3998 10.6726L14.7998 14.5999" stroke="#22AB42" stroke-width="1.2"/>\n<path d="M7.6 7.3999L4 10.6726L7.6 14.5999" stroke="#22AB42" stroke-width="1.2"/>\n</svg>'};function he(t){return t=btoa(t),"data:image/svg+xml;base64,".concat(t)}var fe={urls:{},imgs:{},sizes:{}};function me(t,e,n){return ve.apply(this,arguments)}function ve(){return ve=Object(r["a"])(Object(i["a"])().m((function t(e,n,r){var o,a,c,l,u,d,h,f;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(o=fe.urls[e],t.p=1,!ge){t.n=2;break}h=fe.imgs[e],t.n=4;break;case 2:return t.n=3,ie(o);case 3:h=t.v;case 4:if(a=h,a){t.n=5;break}return t.a(2);case 5:if(ge?c=fe.sizes[e]:(fe.imgs[e]=a,c=fe.sizes[e],c.width=null!==(l=a.naturalWidth)&&void 0!==l?l:a.width,c.height=null!==(u=a.naturalHeight)&&void 0!==u?u:a.height),n&&r){t.n=6;break}return t.a(2);case 6:return t.n=7,createImageBitmap(a);case 7:d=t.v,r.imgs[e]=d,r.sizes[e]=Object(s["a"])({},c),t.n=9;break;case 8:t.p=8,f=t.v,console.error(f);case 9:return t.a(2)}}),t,null,[[1,8]])}))),ve.apply(this,arguments)}function pe(t){var e=de[t];e&&(e=e.replace(new RegExp(le,"ig"),ue),de["".concat(t,"_default")]=e)}function be(t){fe.urls[t]=he(de[t]),fe.sizes[t]={width:0,height:0}}var ge=!1;function we(t){return ye.apply(this,arguments)}function ye(){return ye=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a,s;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:ge||["otherpage","go","back","link"].forEach(pe),n=Object.keys(de),r=e?{imgs:{},sizes:{}}:null,o=0,a=n;case 1:if(!(o<a.length)){t.n=3;break}return s=a[o],ge||be(s),t.n=2,me(s,e,r);case 2:o++,t.n=1;break;case 3:return ge=!0,t.a(2,r)}}),t)}))),ye.apply(this,arguments)}var ke={T:"top",R:"right",B:"bottom",L:"left"},Ce={linear:"linear","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out"},xe={goToArtboard:"goToArtboard",overlay:"overlay",goBack:"goBack",speak:"speak",goUrl:"url",replace:"replace",goBackAndCloseAllOverlay:"goBackAndCloseAllOverlay",closeCurrentOverlay:"closeCurrentOverlay",getTypeName:function(t){switch(t){case xe.goBack:case xe.goBackAndCloseAllOverlay:return"返回";case xe.goToArtboard:return"跳转";case xe.closeCurrentOverlay:return"关闭";case xe.replace:return"替换";case xe.goUrl:return"链接";case xe.overlay:return"覆盖";default:return"未知"}}},Se={none:"none",slideFromLeft:"slideFromLeft",slideFromRight:"slideFromRight",slideFromBottom:"slideFromBottom",slideFromTop:"slideFromTop",slideOutFromLeft:"slideOutFromLeft",slideOutFromRight:"slideOutFromRight",slideOutFromBottom:"slideOutFromBottom",slideOutFromTop:"slideOutFromTop",pushFromLeft:"pushFromLeft",pushFromRight:"pushFromRight",pushFromBottom:"pushFromBottom",pushFromTop:"pushFromTop",moveFromLeft:"moveFromLeft",moveFromRight:"moveFromRight",moveFromBottom:"moveFromBottom",moveFromTop:"moveFromTop",moveOutFromLeft:"moveOutFromLeft",moveOutFromRight:"moveOutFromRight",moveOutFromBottom:"moveOutFromBottom",moveOutFromTop:"moveOutFromTop"},Te={tap:"tap",drag:"drag",time:"time",voice:"voice"},Oe={CENTER:"CENTER",TOP_LEFT:"TOP_LEFT",TOP_CENTER:"TOP_CENTER",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_CENTER:"BOTTOM_CENTER",BOTTOM_RIGHT:"BOTTOM_RIGHT",MANUAL:"MANUAL"},Ie=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Object(Qt["fetchGetCloudApi"])(e,{timeout:1e4});case 1:if(n=t.v,Object(l["k"])(n)){t.n=2;break}throw new Error("无法解析".concat(e,"的返回值:").concat(n));case 2:return t.a(2,n)}}),t)})));return function(e){return t.apply(this,arguments)}}();function Ae(t,e){return"".concat(t,":").concat(e)}function Fe(t){var e={};return t.forEach((function(t){var n=t.artboard;e[Ae(n.fileType,n.guid)]=n})),e}function je(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Object(l["i"])(t)){var n=Fe(t);(Object(l["i"])(e)?e:t).forEach((function(t){_e(t.artboard,n)}))}}function _e(t,e){return Me.apply(this,arguments)}function Me(){return Me=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o,a,s,l;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(r=e.pathInteraction,o=e.interactionInfo,r){t.n=1;break}return o.fetchState=c["a"].Success,o.errMsg=null,o.data=null,t.a(2);case 1:return o.fetchState=c["a"].Fetching,o.errMsg=null,t.p=2,t.n=3,Ie(c["O"].combineResourcePath(r));case 3:a=t.v,s=e.fileType,De(a,e),Le(a,s,n),o.data=a,o.fetchState=c["a"].Success,t.n=5;break;case 4:t.p=4,l=t.v,o.fetchState=c["a"].Error,o.errMsg=l,o.data=null;case 5:return t.a(2)}}),t,null,[[2,4]])}))),Me.apply(this,arguments)}function Le(t,e,n){return Pe.apply(this,arguments)}function Pe(){return Pe=Object(r["a"])(Object(i["a"])().m((function t(e,n,r){var o,a;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(o=null===e||void 0===e?void 0:e.interactions,Object(l["i"])(o)){t.n=1;break}return t.a(2);case 1:a=e.renderInteractions=[],o.forEach((function(t){if(Object(l["k"])(t)&&Object(l["i"])(t.interactions)){var e=t.renderInteractions=[];t.interactions.forEach((function(t){if(Object(l["k"])(t)){switch(t.trigger_type){case Te.tap:break;default:return}switch(t.type){case xe.goBack:case xe.closeCurrentOverlay:case xe.goBackAndCloseAllOverlay:case xe.goUrl:e.push(t);break;case xe.goToArtboard:case xe.overlay:case xe.replace:var i=t.toArtboard;if(!Object(l["j"])(i))return;var o=r[Ae(n,i)];t.toArtboardItem=o,e.push(t);break;default:return}var a=t.transition,s=t.animationType;if(s&&!a)switch(a=t.transition={duration:.3,easing:"linear"},s){case Se.slideFromBottom:a.type="slide",a.fromSide="T";break;case Se.slideFromLeft:a.type="slide",a.fromSide="R";break;case Se.slideFromRight:a.type="slide",a.fromSide="L";break;case Se.slideFromTop:a.type="slide",a.fromSide="B";break;default:a.type="dissolve";break}}})),e.length>0&&(t.renderTapInteraction=e.find((function(t){return t.trigger_type===Te.tap})),a.push(t),t.mlIgnoreEvent=!1,t.mlIgnoreLeftSide=!1,t.mlIgnoreScene=!1)}}));case 2:return t.a(2)}}),t)}))),Pe.apply(this,arguments)}function De(t,e){if(Object(l["k"])(t)){var n,i={artScale:null!==(n=Si(e.pageGuid,e.docGuid))&&void 0!==n?n:t.scale,fileType:null},r=t.interactions,o=t.artboardMap;switch(t.docGuid=e.docGuid,t.pluginPlatform){case"xd":i.fileType=a["r"].XD,Object(l["i"])(r)&&r.forEach((function(t){Un(o,t,null,i)}));break;case"figma":i.fileType=a["r"].FIGMA,Un(o,o,null,i),Object(l["i"])(r)&&r.forEach((function(t){t.reactions=t.interactions,delete t.interactions,Un(o,t,null,i)}));break;case"sketch":i.fileType=a["r"].SKETCH;var s={};if(Object(l["i"])(r)&&r.forEach((function(t){s[t.guid]=t})),Object(l["k"])(o)){var c=["boundsInParent","globalBounds","frame","globalDrawBounds","globalBounds","boundsInArtboard","boundSameWithArtboard"],u=function(t,e){var n;Un(o,t,e,i),null===(n=t.layers)||void 0===n||n.forEach((function(e){e&&(e.parentNode=t,u(e,t))}));var r=s[t.guid];r&&c.forEach((function(e){r[e]=t[e]}))};u(o,null)}break;default:throw new Error("lost pluginPlatform")}}}function Ne(t,e){var n=new wt(t.maxRect.x-t.rect.x,t.maxRect.y-t.rect.y),i=new wt(e.maxRect.x-e.rect.x,e.maxRect.y-e.rect.y);return i.x-=n.x,i.y-=n.y,i}function Ee(t,e,n,i,r,o,c){var l,u=null===e||void 0===e?void 0:e.renderTapInteraction;if(!u)return null;var d,h,f=!1,m=!1;switch(u.type){case xe.goToArtboard:case xe.overlay:l=!1;break;case xe.goBack:case xe.goBackAndCloseAllOverlay:case xe.closeCurrentOverlay:l=!0;break;case xe.goUrl:m=!0;break;default:return null}var v=!0;if(d=Object(s["a"])({},e.boundsInArtboard),l||m)h=Object(s["a"])(Object(s["a"])({},d),{},{width:1,height:1}),h.x+=80+d.width,h.y=h.y+Math.round(d.height/2)-40;else{if(!u.toArtboardItem)return;if(null!==o&&void 0!==o&&o.inSection&&u.toArtboardItem.topSectionId!==o.topSectionId)return;var p=u.toArtboardItem.pageGuid||u.toArtboardItem.docGuid;if(v=i===p,h=Object(s["a"])({},u.toArtboardItem.boundsInParentForList),h.x-=n.x,h.y-=n.y,!v){var b=t.find((function(t){return t.guid===i||t.docGuid===i})),g=t.find((function(t){return t.guid===p||t.docGuid===p}));if(!b)return;if(null!=g){var y=Ne(b,g);h.x-=y.x,h.y-=y.y}else f=!0,h=Object(s["a"])(Object(s["a"])({},d),{},{width:1,height:1}),h.x+=80+d.width,h.y=h.y+Math.round(d.height/2)-40}}var k=r?0:a["b"],C={width:20,height:20},x=C.width,S=d.x+d.width,T=d.y+k,O=T+Math.round(d.height/2),I=h.x-x,A=h.y+k-5,F=A+Math.round(h.height/2),j=Math.abs(I-S)<C.width;j&&Math.abs(F-O)<2*C.height&&(O=T+Math.round(2*d.height/3)),j&&Math.abs(F-O)<2*C.height&&(F=A+Math.round(h.height/3));var _,M,L,P,D=I-S,N=F-O,E=D>0?1:-1,R=N>0?1:-1;if(1===E)M=O+R*N*.2,_=S+.3*D,P=F-.1*R*N,L=S+.66*D;else{var V=Math.abs(D),B=Math.abs(N);V=Math.max(.3*V,200),B=Math.max(.1*V,80),_=S+V,M=O+R*B,L=I-V,P=F-R*B}var H=(new w).set(d.x,d.y+k,d.width,d.height),U={start:new wt(S,O).toJSON(),p1:new wt(_,M).toJSON(),p2:new wt(L,P).toJSON(),end:new wt(I+1,F).toJSON()},G=m?"link":f?"otherpage":l?"back":"go",W=G+"_default",$=Object(s["a"])(Object(s["a"])({},C),{},{x:I,y:F-x/2,href:r?void 0:fe.urls[G],href_default:r?void 0:fe.urls[W],img:r&&!c?fe.imgs[G]:void 0,img_default:r&&!c?fe.imgs[W]:void 0,key:G,key_default:W});return{isBack:l,isOtherPage:f,drawRect:Wt([(new w).set(H.x,H.y,H.width,H.height),(new w).set(U.start.x,U.start.y,1,1),(new w).set(U.p1.x,U.p1.y,1,1),(new w).set(U.p2.x,U.p2.y,1,1),(new w).set(U.end.x,U.end.y,1,1),(new w).set($.x,$.y,$.width,$.height)]),nodeRect:H,curve:U,arrowIcon:$,sameParent:v}}function Re(t,e,n,i,r){var o=Ee(t,e,n,i,!1,r);if(!o)return null;var a=o.nodeRect,s=o.curve;return o.nodeRect="M ".concat(a.x," ").concat(a.y," \n  l 0 ").concat(a.height,"\n  l ").concat(a.width," 0\n  l 0 -").concat(a.height,"\n  l -").concat(a.width," 0\n  Z"),o.curve="M ".concat(s.start.x," ").concat(s.start.y,"\n  C ").concat(s.p1.x,",").concat(s.p1.y,"\n    ").concat(s.p2.x,",").concat(s.p2.y,"\n  ").concat(s.end.x," ").concat(s.end.y),o}function Ve(t){if(!t)return null;if(!t.flowStart)return null;var e=t.docName,n=t.flowName,i=t.fileType,r=t.pageName;return"原型起始画板\n来自文档: ".concat(e).concat(a["r"].getFileExt(i)).concat(Object(l["j"])(r)?"/".concat(r):"").concat(Object(l["j"])(n)?"\n自定义标签名: ".concat(n):"")}function Be(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.width<=n||e.height<=n)i?t.fillRect(e.x,e.y,e.width,e.height):t.strokeRect(e.x,e.y,e.width,e.height);else{if(t.beginPath(),"function"===typeof t.roundRect)t.roundRect(e.x,e.y,e.width,e.height,n);else{var r=new wt(e.x+n,e.y),o=new wt(e.x+e.width,e.y),a=new wt(e.x+e.width,e.y+e.height),s=new wt(e.x,e.y+e.height),c=new wt(e.x,e.y);t.moveTo(r.x,r.y),t.arcTo(o.x,o.y,a.x,a.y,n),t.arcTo(a.x,a.y,s.x,s.y,n),t.arcTo(s.x,s.y,c.x,c.y,n),t.arcTo(c.x,c.y,r.x,r.y,n)}i?t.fill():t.stroke()}}var He=new Map;function Ue(t,e,n){var i="".concat(e,":").concat(n),r=He.get(i);if(null!=r)return r;var o=t.measureText(n),a=o.width,s=o.fontBoundingBoxAscent,c=o.fontBoundingBoxDescent,l=s+c;return("number"!==typeof l||isNaN(l))&&(l=e),r={width:a,height:l},He.set(i,r),r}function Ge(t,e,n,i){var r;if((null!==(r=null===n||void 0===n?void 0:n.length)&&void 0!==r?r:0)<1)return{text:"",maxHeight:0};t.font="".concat(e,"px Arial");var o=".",a=Ue(t,e,o).width,s=0,c=0;i-=Math.ceil(3*a);for(var l=0,u=n.length;l<u;l++){var d=n[l],h=Ue(t,e,d);if(s+=h.width,c=Math.max(c,h.height),s>=i)return l<u-1?{text:n.substring(0,l)+"...",maxHeight:c}:{text:n.substring(0,l),maxHeight:c}}return{text:n,maxHeight:c}}function We(t,e,n,i){try{t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high"}catch(r){}}function $e(t,e,n,i){var r={};return t?(r.x=-(t.width/2+t.x/2)*e+n/2,r.y=-(t.height/2+t.y/2)*e+i/2):r.x=r.y=0,r}var ze={Figma_Color:10,Figma_AngularGradientFill:11,Figma_LinearGradientFill:12,Figma_RadialGradientFill:13,XD_Color:20,XD_AngularGradientFill:21,XD_LinearGradientFill:22,XD_RadialGradientFill:23};function Ye(t,e,n,i){var r=t.roundRadii,o=t.color;e.fillStyle=o,Be(e,(new w).set(i(n.x),i(n.y),i(n.width),i(n.height)),i(r))}function Xe(t,e,n,i){n=(new w).set(i(n.x),i(n.y),i(n.width),i(n.height));var r=t.scaleX,o=t.scaleY,a=t.startX,s=t.startY,c=t.colorStops,l=t.roundRadii,u=Math.round(r*n.width),d=Math.round(o*n.height),h=n.x+Math.round(a*n.width),f=n.y+Math.round(s*n.height),m=e.createRadialGradient(h,f,0,h,f,Math.max(u,d));c.forEach((function(t){m.addColorStop(t.stop,t.color)})),e.fillStyle=m,Be(e,n,i(l))}function Ke(t,e,n,i){n=(new w).set(i(n.x),i(n.y),i(n.width),i(n.height));var r=t.colorStops,o=t.angle,a=t.startX,s=t.startY,c=t.roundRadii;a=n.x+a*n.width,s=n.y+s*n.height;var l=e.createConicGradient((o-90)*Math.PI/180,a,s);r.forEach((function(t){l.addColorStop(t.stop,t.color)})),e.fillStyle=l,Be(e,n,i(c))}function qe(t,e,n,i){n=(new w).set(i(n.x),i(n.y),i(n.width),i(n.height));var r=Object(_["a"])(t.endPoints,4),o=r[0],a=r[1],s=r[2],c=r[3],l=t.colorStops,u=t.roundRadii;o=Math.round(n.x+o*n.width),a=Math.round(n.y+a*n.height),s=Math.round(n.x+s*n.width),c=Math.round(n.y+c*n.height);var d=e.createLinearGradient(o,a,s,c);l.forEach((function(t){d.addColorStop(t.stop,t.color)})),e.fillStyle=d,Be(e,n,i(u))}function Je(t,e,n,i){if(t)switch(t.renderType){case ze.Figma_Color:case ze.XD_Color:return Ye(t,e,n,i);case ze.Figma_RadialGradientFill:case ze.XD_RadialGradientFill:return Xe(t,e,n,i);case ze.Figma_LinearGradientFill:case ze.XD_LinearGradientFill:return qe(t,e,n,i);case ze.Figma_AngularGradientFill:case ze.XD_AngularGradientFill:return Ke(t,e,n,i)}}n("caad"),n("2532");var Qe={thin:100,extralight:200,light:300,regular:400,book:400,medium:500,semibold:600,demibold:600,bold:700,extrabold:800,heavy:800,black:900,ultra:900,italic:400,"bold italic":700,"medium italic":500,"light italic":300};function Ze(t){if("string"!==typeof t)return 400;var e=t.toLowerCase();if(Qe[e])return Qe[e];for(var n in Qe)if(e.includes(n))return Qe[n];if(e.includes("semibold")||e.includes("demi"))return 600;if(e.includes("extrabold")||e.includes("heavy"))return 800;if(e.includes("bold"))return 700;if(e.includes("medium"))return 500;if(e.includes("extralight"))return 200;if(e.includes("light"))return 300;if(e.includes("black"))return 900;if(e.includes("thin"))return 100;var i=t.match(/wght\s*(\d+)/i);return i?parseInt(i[1]):400}function tn(t,e){if(400!==t&&null!=t)return t;var n=Ze(null===e||void 0===e?void 0:e.style);return n}function en(t,e,n){var i;e.guid||(e.guid=e.id),on(e);var r=e.x,o=e.y,a=e.width,s=e.height;if(!e.absoluteBoundingBox){if(n){var l=n.globalBounds,u=l.x,d=l.y;r+=u,o+=d}e.absoluteBoundingBox=e.absoluteRenderBounds={x:r,y:o,width:a,height:s}}if(e.globalBounds=e.absoluteBoundingBox,e.globalDrawBounds=null!==(i=e.absoluteRenderBounds)&&void 0!==i?i:e.absoluteBoundingBox,e.boundsInParent=t==e?e.absoluteBoundingBox:{x:r,y:o,width:a,height:s},e.blendMode){var h=c["e"][e.blendMode];h&&(e.blendMode=h)}bn(t,e),cn(t,e),an(e,n),gn(e),mn(e),vn(e),wn(e),yn(e),un(e),dn(t,e)}var nn={isMask:!1,layoutAlign:"INHERIT",constrainProportions:!1,layoutPositioning:"AUTO",layoutGrow:0,blendMode:"PASS_THROUGH"},rn=Object.keys(nn);function on(t){rn.forEach((function(e){void 0===t[e]&&(t[e]=nn[e])}));var e=t.textSegments,n=Object(l["i"])(e);if(n&&e.length>0){var i=e[0];i&&kn.forEach((function(e){void 0===t[e]&&(t[e]=i[e])}))}}function an(t,e){if(e&&t.isMask){t.mlIgnoreScene=!0;var n=e.children;if(n&&!(n.length<1))for(var i=!1,r=t.absoluteBoundingBox,o=0,a=n.length;o<a;o++){var s=n[o];if(s!==t){if(i){if(s.isMask)break;if(!s.markedForExport){var c=s.absoluteBoundingBox,l=I(c,r);l&&(y(l,c)||(c.x=l.x,c.y=l.y,c.width=l.width,c.height=l.height))}}}else i=!0}}}function sn(t){if(!t)return null;var e;while(null!=(e=t.parentNode)){var n=e,i=n.clipsContent;if(i)return e;t=e}return null}function cn(t,e){var n;if(!e.markedForExport){var i=null!==(n=sn(e))&&void 0!==n?n:t,r=e.absoluteBoundingBox,o=I(r,i.absoluteBoundingBox);o&&(y(o,r)||(r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height))}}function ln(t){switch(t){case"BOTTOM":case"TOP":case"RIGHT":return t=t.substring(0,1),"B"===t?t="T":"T"===t&&(t="B"),t;default:return"L"}}function un(t){var e=t.reactions;if(Object(l["i"])(e)){var n=[];e.forEach((function(t){if(Object(l["k"])(t)){var e=t.action,i=t.trigger;if(Object(l["k"])(e)&&Object(l["k"])(i)){var r=i.delay,o=i.type;switch(o){case"MOUSE_DOWN":case"MOUSE_UP":case"ON_CLICK":o=Te.tap;break;default:return void("number"!==typeof r&&(r=0))}var a,s=e.type,c=e.frameGuid,u=e.frameId,d=e.navigation,h=e.transition,f=e.overlayBackground,m=e.overlayBackgroundInteraction,v=e.overlayPositionType,p=e.url;if(Object(l["j"])(p)&&!/https?:\/\//i.test(p)&&(p="http://"+p),Object(l["k"])(f))try{f=V(U(f)).value}catch(B){}switch(s){case"BACK":s=xe.goBackAndCloseAllOverlay;break;case"CLOSE":s=xe.closeCurrentOverlay;break;case"URL":s=xe.goUrl;break;case"NODE":if(!Object(l["j"])(c))return;switch(d){case"NAVIGATE":s=xe.goToArtboard;break;case"OVERLAY":s=xe.overlay;break;case"SWAP":s=xe.replace;break;default:return}break;default:return}if(Object(l["k"])(h)){var b,g,w=h.type,y=h.easing,k=h.duration,C=h.direction,x=!1;switch(w){case"MOVE_IN":b=ln(C),w="move";break;case"MOVE_OUT":b=ln(C),w="move_out";break;case"PUSH":b=ln(C),w="push";break;case"SLIDE_IN":b=ln(C),w="slide";break;case"SLIDE_OUT":b=ln(C),w="slide_out";break;default:a=null,w="dissolve";break}if(Object(l["k"])(y)){var S=y.type,T=y.easingFunctionCubicBezier;switch(S){case"CUSTOM_CUBIC_BEZIER":g="cubic-bezier(".concat(T.x1,",").concat(T.y1,",").concat(T.x2,",").concat(T.y2,")"),x=!0;break;case"CUSTOM_SPRING":case"GENTLE":case"QUICK":case"BOUNCY":case"SLOW":g="ease-in-out",x=!0;break;case"EASE_IN_BACK":var O=.58,I=-.25,A=1,F=.42;g="cubic-bezier(".concat(O,", ").concat(I,", ").concat(A,", ").concat(F,")"),x=!0;break;case"EASE_OUT_BACK":var j=0,_=.58,M=.42,L=1.25;g="cubic-bezier(".concat(j,", ").concat(_,", ").concat(M,", ").concat(L,")"),x=!0;break;case"EASE_IN_AND_OUT_BACK":var P=.58,D=-.25,N=.42,E=1.25;g="cubic-bezier(".concat(P,", ").concat(D,", ").concat(N,", ").concat(E,")"),x=!0;break;case"EASE_IN":case"EASE_IN_AND_OUT":case"EASE_OUT":case"LINEAR":g=S.toLowerCase().replace(/_/g,"-").replace(/-and/g,"");break}}w&&(a={type:w,duration:k,fromSide:b,customEasing:x,easing:g})}var R={trigger_type:o,type:s,delay:r,toArtboard:c,toArtboardFigmaId:u,transition:a,overlayBackground:f,overlayBackgroundInteraction:m,overlayPositionType:v};s===xe.goUrl&&(R.toUrl=p),n.push(R)}}})),n.length>0&&(t.interactions=n)}}function dn(t,e){var n=e.types={GraphicNode:1},i=t.sharedStyles;switch(e.type){case"FRAME":t===e?n.Artboard=1:n.Group=1,e.clipsContent||(n.GroupVisibleOutChild=1);break;case"GROUP":n.Group=1;break;case"LINE":n.Line=1;break;case"TEXT":n.Text=1,Cn(e,i);break;case"VECTOR":n.Path=1;break;case"COMPONENT":case"COMPONENT_SET":case"INSTANCE":n.Group=1,e.clipsContent||(n.GroupVisibleOutChild=1),"INSTANCE"===e.type&&(n.FigmaInstance=1,void 0===e.isExposedInstance&&(e.isExposedInstance=!1));break;case"BOOLEAN_OPERATION":n.Group=1;var r=e.children;(null===r||void 0===r?void 0:r.length)>0&&r.forEach((function(t){if(t){var e=t.fills;e&&e.length>0&&e.splice(0)}}));break;case"RECTANGLE":n.Rectangle=1;break}}function hn(t){if(t){var e=4;t.cssStyle={data:{},style:{},render:{},nameSize:{}};var n=t.fills;if(Object(l["i"])(n)){n=t.fills=n.map((function(t){var e,n=!(null===(e=t)||void 0===e||!e.fromPage);return t=fn(t),t&&(t.fromPage=n),t})).filter((function(t){return!!t}));var i=function(e){var n,i=!(null===(n=e)||void 0===n||!n.fromPage);return e=q(e,!1,!1,t,null),e&&(e.fromPage=i),e},r=t.cssStyle.data.background=n.map(i).filter((function(t){return!!t})),o=r.find((function(t){return t&&!t.fromPage}));if(!o){var s=i({value:4282400832});s&&r.push(s)}if(n=t.cssStyle.data.background,n.length>0){var u,d=[];n.forEach((function(t){switch(t.type){case a["s"].FillColor:var n=E(t.color);d.push({color:n,image:"linear-gradient(0deg,".concat(n,",").concat(n,")"),roundRadii:e,renderType:ze.Figma_Color});break;case a["s"].RadialGradientFill:case a["s"].DiamondGradientFill:u="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(E(t.color)," ").concat(t.stop)})).join(","),")"),d.push({image:u,scaleX:Object(c["bb"])(t.scaleX),scaleY:Object(c["bb"])(t.scaleY),startX:Object(c["bb"])(t.startX),startY:Object(c["bb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["bb"])(t.stop);if(!isNaN(e)){var n=E(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),roundRadii:e,renderType:ze.Figma_RadialGradientFill});break;case a["s"].AngularGradientFill:u="conic-gradient(from ".concat(t.angle," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(E(t.color)," ").concat(t.stop)})).join(","),")"),d.push({image:u,angle:parseFloat(t.angle),startX:Object(c["bb"])(t.startX),startY:Object(c["bb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["bb"])(t.stop);if(!isNaN(e)){var n=E(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),roundRadii:e,renderType:ze.Figma_AngularGradientFill});break;case a["s"].LinearGradientFill:u="linear-gradient(".concat(t.angle,",").concat(t.colorStops.map((function(t){return"".concat(E(t.color)," ").concat(t.stop)})).join(","),")"),d.push({image:u,endPoints:t.endPoints,colorStops:t.colorStops.map((function(t){var e=Object(c["bb"])(t.stop);if(!isNaN(e)){var n=E(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),roundRadii:e,renderType:ze.Figma_LinearGradientFill});break;case a["s"].ImageFill:break}}));var h=d.length;h>0&&(u=d.map((function(t,e){var n=0===e;return n&&t.color?t.color:t.image})).reverse().join(","),t.cssStyle.render.backgrounds=d,t.cssStyle.style.background=u)}}}}function fn(t){var e,n;if(Object(l["i"])(t)){var i=[];return t.forEach((function(t){t=fn(t),t&&i.push(t)})),i}if(!t.visible)return null;var r={blendMode:null!==(e=c["e"][t.blendMode])&&void 0!==e?e:t.blendMode};switch(t.type){case"SOLID":var o=t.color;if(!o)return null;r.value=U(o,t.opacity),r.swatch=t.colorSwatch;break;case"IMAGE":return r.imageFill=!0,r;case"GRADIENT_LINEAR":var a=t.gradientStops,s=t.opacity,u=t.gradientParams;if(!a||!u)return null;var d=u.start,h=u.end;if(!d||!h)return null;"number"===typeof u.cssAngle&&(r.angle=Object(m["a"])(u.cssAngle,2)+"deg");var f=r.colorStops=[];a.forEach((function(t){f.push({stop:t.position,color:{value:U(t.color,s),swatch:t.colorSwatch}})})),r.endPoints=[d[0],d[1],h[0],h[1]];break;case"GRADIENT_RADIAL":case"GRADIENT_ANGULAR":case"GRADIENT_DIAMOND":var v=t.gradientStops,p=t.opacity,b=t.gradientParams;if(!v||!b)return null;var g,w=b.radius,y=b.center;if(!w||!y)return;switch(t.type){case"GRADIENT_RADIAL":g="gradientRadialTransform",b.cssAngle=Object(m["a"])((null!==(n=b.rotation)&&void 0!==n?n:0)+90,2);break;case"GRADIENT_ANGULAR":var k,C;g="gradientAngularTransform";var x=v[0],S=null!==(k=null===x||void 0===x?void 0:x.position)&&void 0!==k?k:0;0!=S&&(v.forEach((function(t){t.position-=S})),b.cssAngle+=Object(m["a"])(360*S,2));var T=v[v.length-1],O=null!==(C=null===T||void 0===T?void 0:T.position)&&void 0!==C?C:1;O<1&&x&&(null===T||void 0===T?void 0:T.color)!=x.color&&v.push({position:1,color:x.color});break;case"GRADIENT_DIAMOND":g="gradientDiamondTransform";break}r[g]={rotate:b.cssAngle,scaleX:w[0],scaleY:w[1],endR:1,startR:0},r.startX=y[0],r.startY=y[1],r.endPoints=[0,0,0,0];var I=r.colorStops=[];return v.forEach((function(t){I.push({stop:t.position,color:{value:U(t.color,p),swatch:t.colorSwatch}})})),r}return r}function mn(t){var e=t.rotation,n=t.markedForExport;null==e||0===e||n||(e=Object(m["a"])(e,2),e=-e,t.boxTransform={rotation:e,flippedHorizontally:!1,flippedVertically:!1})}function vn(t){var e,n,i,r=t.strokeWeight,o=t.strokeTopWeight,s=t.strokeBottomWeight,c=t.strokeLeftWeight,u=t.strokeRightWeight,d=t.strokeAlign,h=t.strokes,f=t.dashPattern,m=[];switch(d){case"INSIDE":e=a["lb"].Inside;break;case"OUTSIDE":e=a["lb"].Outside;break;default:e=a["lb"].Center;break}if(null!=o&&o===s&&o===c&&o===u?(n=o,i=null):(n=null!==r&&void 0!==r?r:o,null!=o&&(i=[o,u,s,c])),Object(l["i"])(h)&&h.length>0&&h.forEach((function(t){if(t&&t.visible){var r=fn(t);r&&m.push({stroke:r,strokePosition:e,strokeEnabled:!0,strokeWidth:n,strokeWidths:i,strokeDashArray:f})}})),m.length>0){var v=m[0];t.strokeArr=m,t.stroke=v.stroke,t.strokeEnabled=v.strokeEnabled,t.strokeWidth=v.strokeWidth,t.strokeWidthArr=v.strokeWidthArr,t.strokePosition=v.strokePosition,t.strokeDashArray=v.strokeDashArray}}function pn(t,e){if(!t||!e)return null;var n=t[e];return n?n.name:null}function bn(t,e){var n=t.sharedStyles;e.fillSN=pn(n,e.fillStyleId),e.strokeSN=pn(n,e.strokeStyleId),e.effectSN=pn(n,e.effectStyleId),e.charSN=pn(n,e.textStyleId)}function gn(t){var e=t.fills;if(e&&0!==e.length){var n=[];e.forEach((function(t){t&&t.visible&&(t=fn(t),t&&n.unshift({fill:t,fillEnabled:!0}))})),n.length>0&&(t.fillArr=n,t.fillEnabled=!0,t.fill=n[0].fill)}}function wn(t){var e=t.cornerRadius,n=t.bottomLeftRadius,i=t.bottomRightRadius,r=t.topLeftRadius,o=t.topRightRadius;0!==e&&("number"===typeof e&&(void 0===n&&(n=e),void 0===i&&(i=e),void 0===r&&(r=e),void 0===o&&(o=e)),void 0!==n&&void 0!==i&&void 0!==r&&void 0!==o&&(t.cornerRadii={bottomLeft:n,bottomRight:i,topLeft:r,topRight:o}))}function yn(t){var e=t.effects;if(Object(l["i"])(e)&&0!==e.length){var n=[],i=[],r=[];e.forEach((function(t){if(t&&t.visible)switch(t.type){case"GLASS":var e=t.depth,o=t.dispersion,a=t.lightAngle,s=t.lightIntensity,l=t.radius,u=t.refraction;n.push({visible:!0,isGlassEffect:!0,depth:e,blurAmount:l,dispersion:o,lightAngle:a,lightIntensity:s,refraction:u});break;case"BACKGROUND_BLUR":t.radius>=0&&n.push({visible:!0,blurAmount:t.radius,isBackgroundEffect:!0});break;case"LAYER_BLUR":t.radius>=0&&n.push({visible:!0,blurAmount:t.radius,isBackgroundEffect:!1});break;case"DROP_SHADOW":var d,h,f,m,v;i.push({visible:!0,x:null!==(d=null===(h=t.offset)||void 0===h?void 0:h.x)&&void 0!==d?d:0,y:null!==(f=null===(m=t.offset)||void 0===m?void 0:m.y)&&void 0!==f?f:0,blur:t.radius,spread:t.spread,showShadowBehindNode:t.showShadowBehindNode,color:{value:U(t.color),swatch:t.colorSwatch},blendMode:null!==(v=c["e"][t.blendMode])&&void 0!==v?v:t.blendMode});break;case"INNER_SHADOW":var p,b,g,w,y;r.push({visible:!0,x:null!==(p=null===(b=t.offset)||void 0===b?void 0:b.x)&&void 0!==p?p:0,y:null!==(g=null===(w=t.offset)||void 0===w?void 0:w.y)&&void 0!==g?g:0,blur:t.radius,spread:t.spread,showShadowBehindNode:t.showShadowBehindNode,color:{value:U(t.color),swatch:t.colorSwatch},blendMode:null!==(y=c["e"][t.blendMode])&&void 0!==y?y:t.blendMode});break}})),n.length>0&&(t.blurs=n),i.length>0&&(t.shadowArr=i,t.shadow=i[0]),r.length>0&&(t.innerShadowArr=r,t.innerShadow=r[0])}}var kn=["fontSize","fontName","fontWeight","textDecoration","textCase","lineHeight","letterSpacing","fills","textStyleId","fillStyleId","listOptions","indentation","hyperlink"];function Cn(t,e){var n,i,r,o;t.text=t.characters;var a=t.lineHeight;if(a)if("number"===typeof a)t.lineSpacing=a;else switch(a.unit){case"AUTO":t.lineSpacing=0;break;case"PIXELS":t.lineSpacing=a.value;break;case"PERCENT":t.lineSpacing=Object(m["a"])(a.value,3)+"%";break}else t.lineSpacing=0;t.textAlign=null!==(n=null===(i=t.textAlignHorizontal)||void 0===i?void 0:i.toLowerCase())&&void 0!==n?n:"left";var s=null!==(r=null===(o=t.textAlignVertical)||void 0===o?void 0:o.toLowerCase())&&void 0!==r?r:"top";"top"!==s&&(t.textVerticalAlign=s);var c=[],u=t.charSN,d=t.textSegments,h=t.fillSN;Object(l["i"])(d)&&d.forEach((function(n){var i,r=null!==(i=fn(n.fills))&&void 0!==i?i:[];r.reverse();var o={fill:r.length>0?r[r.length-1]:{},fills:r,fillSN:h,figmaFills:r.length>0?r.map((function(e){return q(e,!0,!1,t,null)})):void 0,textCase:n.textCase,charSpacing:n.letterSpacing&&0!==n.letterSpacing.value?"PIXELS"===n.letterSpacing.unit?n.letterSpacing.value:n.letterSpacing.value+"%":null,fontFamily:n.fontName.family,fontWeight:n.fontWeight,fontItalic:/italic/i.test(n.fontName.style)?"italic":"normal",fontSize:n.fontSize,underline:"UNDERLINE"===n.textDecoration,strikethrough:"STRIKETHROUGH"===n.textDecoration,charSN:pn(e,n.textStyleId)};o.fontWeight=tn(n.fontWeight,n.fontName),null!=u&&o.charSN===u&&(o.charSN=void 0),o.text=n.characters,o.length=n.characters.length,null==o.fontWeight&&(o.fontWeight=400),o.fontWeightCss=o.fontWeight.toString(),o.fontStyle=o.fontWeight.toString(),o.fontItalic?o.fontStyle+=" "+o.fontItalic:o.fontItalic="normal",c.push(o)})),t.styleRanges=c}function xn(t){switch(t){case"MIN":return a["B"].FlexStart;case"MAX":return a["B"].FlexEnd;case"CENTER":return a["B"].Center;case"SPACE_BETWEEN":return a["B"].SpaceBetween;case"SPACE_AROUND":return a["B"].SpaceAround;case"SPACE_EVENLY":return a["B"].SpaceEvenly;default:return t}}function Sn(t){switch(t){case"MIN":return a["x"].FlexStart;case"MAX":return a["x"].FlexEnd;case"CENTER":return a["x"].Center;case"SPACE_BETWEEN":return a["x"].SpaceBetween;case"SPACE_AROUND":return a["x"].SpaceAround;case"SPACE_EVENLY":return a["x"].SpaceEvenly;case"AUTO":return null;default:return t}}function Tn(t){switch(t){case"MIN":return a["y"].FlexStart;case"MAX":return a["y"].FlexEnd;case"CENTER":return a["y"].Center;case"BASELINE":return a["y"].Baseline;default:return t}}function On(t){switch(t){case"WRAP_REVERSE":return a["E"].WRAP_REVERSE;case"WRAP":return a["E"].WRAP;case"NO_WRAP":return a["E"].NO_WRAP;default:return t}}function In(t){switch(t){case"MIN":return a["z"].FlexStart;case"CENTER":return a["z"].Center;case"MAX":return a["z"].FlexEnd;case"STRETCH":return a["z"].Stretch;case"INHERIT":return a["z"].Inherit;default:return t}}function An(t){switch(t){case"MIN":return a["C"].FlexStart;case"CENTER":return a["C"].Center;case"MAX":return a["C"].FlexEnd;case"STRETCH":return a["C"].Stretch;case"INHERIT":return a["C"].Inherit;default:return t}}function Fn(t){switch(t){case"AUTO":return a["D"].Static;case"ABSOLUTE":return a["D"].Absolute;case"FIXED":return a["D"].Fixed;case"RELATIVE":return a["D"].Relative;case"STICKY":return a["D"].Sticky;default:return t}}function jn(t){if(null==t)return!1;var e=t.inferredAutoLayout,n=t.layoutMode;return("HORIZONTAL"===n||"VERTICAL"===n)&&Object(l["k"])(e)}function _n(t){if(null==t)return!1;var e=t.layoutMode;return"GRID"===e}function Mn(t,e){if(!t)return null;var n=t.paddingBottom,i=t.paddingLeft,r=t.paddingRight,o=t.paddingTop;if((null==n||null==i||null==r||null==o)&&jn(t)){var a=t.inferredAutoLayout;a&&(null!==n&&void 0!==n||(n=a.paddingBottom),null!==i&&void 0!==i||(i=a.paddingLeft),null!==r&&void 0!==r||(r=a.paddingRight),null!==o&&void 0!==o||(o=a.paddingTop))}var s=null===e||void 0===e?void 0:e(o,{isHorizintal:!1}),c=null===e||void 0===e?void 0:e(n,{isHorizintal:!1}),l=null===e||void 0===e?void 0:e(i,{isHorizintal:!0}),u=null===e||void 0===e?void 0:e(r,{isHorizintal:!0}),d=0!==o||0!==i||0!==n||0!==r;return{topOrigin:o,top:s,rightOrigin:r,right:u,bottomOrigin:n,bottom:c,leftOrigin:i,left:l,usePadding:d}}function Ln(t){if(t){var e=4;t.cssStyle={data:{},style:{},render:{},nameSize:{}};var n=t.fill,i=t.fillEnabled,r=t.fills=i&&Object(l["k"])(n)?[n]:[];if(Object(l["i"])(r)){var o=function(e){return e=q(e,!1,!1,t,null),e.fromPage=!1,e},s=t.cssStyle.data.background=r.map(o).filter((function(t){return!!t})),u=s.find((function(t){return t&&!t.fromPage}));if(!u){var d=o({value:4282400832});d&&s.push(d)}if(r=t.cssStyle.data.background,r.length>0){var h,f=[];r.forEach((function(t){switch(t.type){case a["s"].FillColor:var n=E(t.color);f.push({color:n,image:"linear-gradient(0deg,".concat(n,",").concat(n,")"),roundRadii:e,renderType:ze.XD_Color});break;case a["s"].RadialGradientFill:case a["s"].DiamondGradientFill:h="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(E(t.color)," ").concat(t.stop)})).join(","),")"),f.push({image:h,scaleX:Object(c["bb"])(t.scaleX),scaleY:Object(c["bb"])(t.scaleY),startX:Object(c["bb"])(t.startX),startY:Object(c["bb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["bb"])(t.stop);if(!isNaN(e)){var n=E(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),roundRadii:e,renderType:ze.XD_RadialGradientFill});break;case a["s"].AngularGradientFill:h="conic-gradient(from ".concat(t.angle," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(E(t.color)," ").concat(t.stop)})).join(","),")"),f.push({image:h,angle:parseFloat(t.angle),startX:Object(c["bb"])(t.startX),startY:Object(c["bb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["bb"])(t.stop);if(!isNaN(e)){var n=E(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),roundRadii:e,renderType:ze.XD_AngularGradientFill});break;case a["s"].LinearGradientFill:h="linear-gradient(".concat(t.angle,",").concat(t.colorStops.map((function(t){return"".concat(E(t.color)," ").concat(t.stop)})).join(","),")"),f.push({image:h,endPoints:t.endPoints,colorStops:t.colorStops.map((function(t){var e=Object(c["bb"])(t.stop);if(!isNaN(e)){var n=E(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),roundRadii:e,renderType:ze.XD_LinearGradientFill});break;case a["s"].ImageFill:break}}));var m=f.length;m>0&&(h=f.map((function(t,e){var n=0===e;return n&&t.color?t.color:t.image})).reverse().join(","),t.cssStyle.render.backgrounds=f,t.cssStyle.style.background=h)}}}}window.addEventListener("error",(function(t){var e=t.filename;if(e){var n=e.match(/marklion_artboard_id=(\w+)/);if(n&&(n=n[1],n)){e=e.replace(/\\/g,"/");var i=e.indexOf("/res/");-1!==i&&(e=e.substr(i+1)),i=e.indexOf("?"),-1!==i&&(e=e.substr(0,i)),e=decodeURIComponent(e);var r=Pn[n];r&&r(!1,"画板数据加载失败「".concat(e,"」"))}}}),!0),window.marklion_artboard=function(t,e){var n=null,i=null;if(arguments.length>2&&(n=arguments[0],t=arguments[1],e=arguments[2],arguments.length>3&&(i=arguments[3])),null!=t){var r=t._marklionBack,o=t._marklionCallId;if(r&&o){if(t._marklionBack=null,t._marklionCallId=null,Pn[o]=null,Object(l["i"])(n)){var a=n;n={},a.forEach((function(t){if(Object(l["k"])(t)){var e=t.name;Object(l["j"])(e)&&(n[e.toLowerCase()]=t.value)}}))}else if(Object(l["k"])(n)){var s=n;n={},Object.keys(s).forEach((function(t){n[t.toLowerCase()]=s[t]}))}r(!0,{artboard:e,linked:n,sizeMap:i})}}};var Pn={},Dn=1;function Nn(t){return new Promise((function(e,n){var i=document.createElement("script"),r=function(t){t&&null!=t.parentNode&&setTimeout((function(){t&&null!=t.parentNode&&(t.parentNode.removeChild(t),t=null)}),200)};i._marklionBack=function(t,o){i._marklionBack=null,i._marklionCallId=null,t?e(o):n(o),r(i),i=null},i.addEventListener("error",(function(e){var n=e.target._marklionBack;n&&n(!1,"画板数据加载失败「".concat(t,"」"))})),i.addEventListener("load",(function(t){r(t.target)}));var o="marklion_".concat(Date.now(),"_").concat(Dn++);i._marklionCallId=o,i.src=Object(c["h"])(t,{marklion_artboard_id:o}),Pn[o]=i._marklionBack,document.body.appendChild(i)}))}function En(t,e,n,i,r){void 0===t.markedForExport&&(t.markedForExport=!1),null==t.mlOutputTime&&(t.mlOutputTime=Date.now());var o=null!==i&&void 0!==i?i:n;if(n){var a,s,u,d,h,f,m,v,p,b,g,w,y,k,C,x,S,T,O,I;t.cid=n.cid,null!==(a=t.parentId)&&void 0!==a||(t.parentId=n.parentId),t.comments=n.comments,t.replies=n.replies,t.commentUpdateTime=n.commentUpdateTime,null!==(s=t.versionCount)&&void 0!==s||(t.versionCount=n.versionCount);var A=o.boundsInParent||o.frame,F=t.boundsInParent||t.frame;A&&F&&(c["O"].inCloudMode?(F.x=A.x,F.y=A.y,F.width=A.width,F.height=A.height):(F.x=A.x,F.y=A.y)),t.scale=o.scale,null!==(u=t.apm)&&void 0!==u||(t.apm=o.apm),null!==(d=t.flowStart)&&void 0!==d||(t.flowStart=null!==(h=o.flowStart)&&void 0!==h&&h),null!==(f=t.flowName)&&void 0!==f||(t.flowName=null!==(m=o.flowName)&&void 0!==m?m:""),null!==(v=t.sectionId)&&void 0!==v||(t.sectionId=null!==(p=o.sectionId)&&void 0!==p?p:null),null!==(b=t.sectionInfo)&&void 0!==b||(t.sectionInfo=null!==(g=o.sectionInfo)&&void 0!==g?g:null),null!==(w=t.topSectionId)&&void 0!==w||(t.topSectionId=null!==(y=o.topSectionId)&&void 0!==y?y:null),null!==(k=t.topSectionInfo)&&void 0!==k||(t.topSectionInfo=null!==(C=o.topSectionInfo)&&void 0!==C?C:null),null!==(x=t.pageGuid)&&void 0!==x||(t.pageGuid=o.pageGuid),null!==(S=t.docName)&&void 0!==S||(t.docName=o.docName),null!==(T=t.pageName)&&void 0!==T||(t.pageName=o.pageName),null!==(O=t.fileType)&&void 0!==O||(t.fileType=o.fileType),null!==(I=t.lastVersionId)&&void 0!==I||(t.lastVersionId=o.lastVersionId),t.resNodeCount=o.resNodeCount,t.pathData=o.pathData,t.pathPreview=o.pathPreview,t.pathPreviewWebp=o.pathPreviewWebp,t.pathInteraction=o.pathInteraction,t.pathPreviewMini=o.pathPreviewMini,t.updaterName=o.updaterName,t.updateTimeTimes=o.updateTimeTimes,t.docGuid=o.docGuid,t.interactionInfo=o.interactionInfo,t.boundsInParentForList=o.boundsInParentForList,o.name&&(t.name=o.name)}else c["O"].inCloudMode&&(t.interactionInfo={fetchState:c["a"].Normal,data:null,errMsg:null});c["O"].inCloudMode?(t.artboardPreviewPng=t.pathPreview,t.artboardPreviewWebp=t.pathPreviewWebp,t.artboardPreviewThumbPng=t.pathPreviewMini,t.artboardPreviewJS=null):t.artboardPath&&(t.artboardPath="res/".concat(encodeURIComponent(t.artboardPath)),t.artboardPreviewPng=t.artboardPath+"/preview.png",t.artboardPreviewWebp=null,t.artboardPreviewJS=t.artboardPath+"/preview.js",t.artboardPreviewThumbPng=t.artboardPath+"/preview.mini.png");var j=t.mlConfig;j||(j=t.mlConfig={});var _=j.scalesObj={};if(j.linked=e||{},j.sizeMap=r||{},Object(l["i"])(j.scales)){j.scales.forEach((function(t){_[t]=1}));var M=null;[2,3,1.5,1,4].forEach((function(t){null==M&&1===_[t]&&(M=t)})),j.previewScalePath=M?1===M?"":"@".concat(M,"x"):""}}var Rn=function(t){if(t){var e=t.guid;if(e)if(t.markedForExport){var n="".concat(c["O"].documentGuid,"_").concat(e),i=Object(c["F"])(n,!1);t.mlCustomName=Object(c["K"])(i)}else t.mlCustomName=null}};function Vn(t,e,n){n.mlUserSelectDown=!1,e.push(n);var i=n.mlConfig;i||(i=n.mlConfig={});var r=t.artboardPath;if(Object(c["R"])(t)){var o="".concat(n.exportPath).concat(t.mlConfig.previewScalePath,".png");i.pngPreview=Object(c["x"])(t,"".concat(r,"/png/"),o)}else if(Object(c["T"])(t)){var a="".concat(n.exportPath).concat(t.mlConfig.previewScalePath,".webp");i.pngPreview=Object(c["x"])(t,"".concat(r,"/png/"),a)}else if(Object(c["S"])(t)){var s="".concat(n.exportPath,".svg");i.svgPreview=Object(c["x"])(t,"".concat(r,"/svg/"),s)}else if(Object(c["Q"])(t)){var l="".concat(n.exportPath,".pdf");i.pdfPreview=Object(c["x"])(t,"".concat(r,"/svg/"),l)}}function Bn(t){if(t){var e=t;while(null!=(e=e.parentNode))if(e.maskGroup)return e}}function Hn(t,e){if(e!==t&&1!==e.types.Artboard&&!e.markedForExport){var n=Bn(e);if(n){var i=n.globalBounds,r=e.globalBounds;if(!g(i,r)){var o=I(i,r);o||(o=new w);var a=r.x-o.x,s=r.y-o.y,c=e.boundsInArtboard,l=e.boundsInParent;c&&(c.x-=a,c.y-=s,c.width=o.width,c.height=o.height),l&&(l.x-=a,l.y-=s,l.width=o.width,l.height=o.height),r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height}}}}function Un(t,e,n,i){var r,o;void 0===e.markedForExport&&(e.markedForExport=!1),i||(i=t.mlConfig);var s=null!==(r=null===(o=i)||void 0===o?void 0:o.fileType)&&void 0!==r?r:null;switch(null==s&&(s=a["r"].XD),s){case a["r"].FIGMA:en(t,e,n);break;case a["r"].SKETCH:vt(t,e,n);break;case a["r"].XD:switch(e.strokePosition){case"inside":e.strokePosition=a["lb"].Inside;break;case"outside":e.strokePosition=a["lb"].Outside;break;case"center":e.strokePosition=a["lb"].Center;break}var c=e.styleRanges;if(Object(l["i"])(c)&&c.length>0){var d=new Set;if(c.forEach((function(t){var e=t.fontStyle,n=t.charSN;if(d.add(null!==n&&void 0!==n?n:null),Object(l["j"])(e)){var i=/(?:\s|^)(thin|hairline|extralight|ultralight|light|regular|book|roman|medium|semibold|demibold|black|heavy|extrabold|ultrabold|bold|bolder|lighter|medium|\d+w?)(?:\s|$)/i.exec(e);if(i)switch(t.fontWeight=i[1],t.fontWeight.toLowerCase()){case"thin":case"hairline":t.fontWeightCss="100";break;case"ultralight":case"extralight":t.fontWeightCss="200";break;case"light":t.fontWeightCss="300";break;case"regular":case"book":case"roman":case"normal":t.fontWeight="normal",t.fontWeightCss="400";break;case"medium":t.fontWeightCss="500";break;case"semibold":case"demibold":t.fontWeightCss="600";break;case"bold":t.fontWeightCss="700";break;case"extrabold":case"ultrabold":t.fontWeightCss="800";break;case"black":case"heavy":t.fontWeightCss="900";break;default:/^\d+w$/i.test(t.fontWeight)?t.fontWeightCss=t.fontWeight.substr(0,t.fontWeight.length-1):t.fontWeightCss=t.fontWeight;break}else t.fontWeight="Normal",t.fontWeightCss="400";i=/(?:\s|^)(italic|oblique)(?:\s|$)/i.exec(e),t.fontItalic=i?i[1].toLowerCase():"normal"}else t.fontWeight="Normal",t.fontWeightCss="400",t.fontItalic="normal"})),!e.charSN&&1===d.size&&c.length>1){var h=Object(u["a"])(d)[0];h&&(e.charSN=h)}}Hn(t,e);break}Gn(t,e,i)}function Gn(t,e,n){var i,r=t.globalBounds;i=e.markedForExport?e.globalDrawBounds:e.globalBounds;var o=i.x-r.x,a=i.y-r.y,s=i.width,l=i.height;if(c["O"].inCloudMode){e.boundsInArtboardOrigin=(new w).set(o,a,s,l);var u=n?n.artScale:1;(null==u||u<=0)&&(u=1),1!==u&&(o=A(o,u,!1),a=A(a,u,!1),s=A(i.width,u,e.markedForExport),l=A(i.height,u,e.markedForExport))}e.boundsInArtboard=(new w).set(o,a,s,l),e.boundSameWithArtboard=t!==e&&e.boundsInArtboard.isSame(t.boundsInArtboard)}function Wn(t,e,n,i,r){var o=n.children||n.layers;o.forEach((function(o){if(o)if(o.parentNode=n,Un(t,o,n),Rn(o),o.markedForExport){if(Vn(t,r,o),e.push(o),i.push(o),Object(l["i"])(o.children||o.layers)){var a=[];Wn(t,e,o,a,r),o.children&&(o.children=a),o.layers&&(o.layers=a)}}else Object(l["i"])(o.children||o.layers)&&Wn(t,e,o,i,r),o.children=o.layers=null}))}function $n(t,e,n,i){if(!i.markedForExport){var r=i.types;if(1!==r.Text&&(t||!jn(i)&&!_n(i))&&(!t||!i.groupLayout)){var o=!0===e.sk25,s=i.opacity;if(0!=s||null!=i.shadow||null!=i.innerShadow||null!=i.fill&&i.fillEnabled||null!=i.stroke&&i.strokeEnabled){var c=gt(i,o);if(t){if(!O(e.boundsInArtboard,i.boundsInArtboard))return i.mlIgnoreEvent=!0,void(i.mlIgnoreLeftSide=!0);if((c||i.type===a["nb"].SymbolMaster)&&ct(n,i))return void(i.mlIgnoreEvent=!0);if(c&&1==s&&null==i.shadow&&null==i.innerShadow&&(null==i.stroke||!i.strokeEnabled)&&(null==i.fill||!i.fillEnabled||i.fill.value))return void(i.mlIgnoreEvent=!0)}(!i.boundSameWithArtboard||!c&&(1!==r.Path||null!=i.fill&&i.fillEnabled))&&(1!==s||1!==r.Path&&i.type!==a["nb"].HotSpot&&1!==r.RepeatGrid&&(!c||i.maskGroup||r.FigmaInstance)&&(1!==r.SymbolInstance||i.maskGroup)||null!=i.shadow||null!=i.innerShadow||null!=i.fill&&i.fillEnabled||null!=i.stroke&&i.strokeEnabled)&&(1!==s||1!==r.Rectangle||null!=i.shadow||null!=i.innerShadow||null!=i.fill&&i.fillEnabled||null!=i.stroke&&i.strokeEnabled||!n||n.mlIgnoreEvent||!y(n.boundsInArtboard,i.boundsInArtboard))||(i.mlIgnoreEvent=!0)}else i.mlIgnoreEvent=!0}}}function zn(t,e,n,i,r,o){Un(n,t,r),Rn(t);var a=t.markedForExport;a&&Vn(n,i,t);var s=t.children||t.layers;if(Object(l["i"])(s))if(a){var c=[];Wn(n,e,t,c,i),t.children=c}else s.forEach((function(r){r.parentNode=t,e.push(r);try{zn(r,e,n,i,t,o),$n(o,n,t,r)}finally{r.mlIgnoreEvent&&!r.mlIgnoreLeftSide&&(r.mlIgnoreLeftSide=!r.children||0===r.children.length)}}))}function Yn(t){var e=0;while(null!=(t=t.parentNode))if(e++,t.types.Artboard)break;return e}var Xn=function(t,e,n){return new Promise((function(i,r){if(t.isLoaded)return i(t);if(t.isFetching)return r(t);var s=t.artboard,u=t.artboardVerData,d=null!==u&&void 0!==u?u:s,h=!!u,f=d.pathData||d.artboardPath+"/data.js";n&&(f=n.combineResourcePath(f)),t.isLoaded=!1,t.isFetching=!0,t.isError=!1;var m=t.loadedCache[f];Object(l["k"])(m)?requestAnimationFrame((function(){var e=m.childs,n=m.exportNodes,r=m.artboard;h?t.artboardVerData=r:t.artboard=r,t.childs=e,t.exportNodes=n,t.isLoaded=!0,t.isFetching=!1,t.isError=!1,i(t)})):Nn(f).then((function(n){var r,d,m=n.artboard,v=n.linked,p=n.sizeMap,b=null!==(r=null===(d=m.mlConfig)||void 0===d?void 0:d.fileType)&&void 0!==r?r:a["r"].XD,g=b===a["r"].SKETCH;g&&ot(m),En(m,v,s,u,p);var w=[m],y=[];zn(m,w,m,y,null,g),F(m),h?t.artboardVerData=m:t.artboard=m,m.nodeDepthIndex=0;var k={interactions:[]};if(w.forEach((function(t){o["a"].set(t,"nodeDepthIndex",Yn(t)),Object(l["i"])(t.interactions)&&k.interactions.push(t)})),c["O"].inCloudMode){var C=Fe(e);Le(k,b,C)}t.childs=w,t.exportNodes=y,t.isLoaded=!0,t.isFetching=!1,t.isError=!1,t.loadedCache[f]={childs:w,exportNodes:y,artboard:m},i(t)})).catch((function(e){t.isLoaded=!0,t.isError=!0,t.isFetching=!1,t.loadErrMsg=e,console.error("artboard load error",e),r(t)}))}))};function Kn(t){t=Object(u["a"])(t);var e={};return t.forEach((function(t){var n=e[t.docGuid];n||(n=e[t.docGuid]=[]),n.push(t)})),Object.keys(e).forEach((function(n){var i=e[n];if(1!==i.length||i[0].type!==a["K"].Document){var r=i[0],o=r.docGuid,s=r.docName,u=r.fileType,d=[],h=[],f=new Set,m=new Set;if(i.forEach((function(t){t.arts.forEach((function(t){var e,n=null!==(e=t.artboard.guid)&&void 0!==e?e:t.artboard.cid;f.has(n)||(f.add(n),d.push(t))})),Object(l["i"])(t.sections)&&t.sections.length>0&&t.sections.forEach((function(t){var e=t.guid;m.has(e)||(m.add(e),h.push(t))}))})),c["O"].inCloudMode){if(t.find((function(t){return t.type===a["K"].Document&&t.guid===o})))return;var v={arts:d,guid:o,name:s,fileType:u,docFullName:s,sortText:"".concat(s,":").concat(o),docGuid:o,docName:s,pageGuid:void 0,pageName:void 0,docSeparator:!0,sections:h,type:a["K"].Document};v.maxRect=j(d,h),v.rect=(new w).set(0,0,v.maxRect.width,v.maxRect.height),t.push(v)}}else i[0].docSeparator=!0})),t.sort((function(t,e){return Object(c["Z"])(t.sortText,e.sortText)})),t}function qn(t,e,n,i){var r=i.orderDesc,o=i.sortType;if(o===a["n"].Date)t.sort((function(t,i){n===a["m"].Artboard&&(t=t.artboard,i=i.artboard);var o=t[e]>i[e]?1:-1;return r?-o:o}));else if(o===a["n"].ArtboardRect&&n===a["m"].Artboard){var s={},l=[];t.forEach((function(t){var e=t.artboard,n=e.docName,i=e.docGuid,r=e.pageGuid,o=e.pageName,a=r||i||"",c=o||n||"",u=s[a];u||(u=s[a]={arts:[],guid:a,name:c,fileType:e.fileType,docFullName:"".concat(n).concat(o?"/".concat(o):""),sortText:"".concat(n,":").concat(i).concat(o?"/".concat(o,":").concat(r):""),docGuid:i,docName:n},l.push(u)),u.arts.push(e)})),s=null;var u=function(t,e){var n=t.boundsInParent||t.frame,i=e.boundsInParent||e.frame;if(t.updateTimeTimes>0&&e.updateTimeTimes>0){var r=(new w).set(n.x,n.y,n.width,n.height),o=(new w).set(i.x,i.y,i.width,i.height);if(r.isOverlap(o)){var a=t.updateTimeTimes-e.updateTimeTimes;if(Math.abs(a)>1500){if(a>0)return 1;if(a<0)return-1}}}var s=n.y,c=i.y,l=s-c;if(l>100)return 1;if(l<-100)return-1;var u=n.x,d=i.x,h=u-d;return 0===h?0===l?0:l>0?1:-1:h>0?1:-1};l.sort((function(t,e){var n=Object(c["Z"])(t.sortText,e.sortText);return r?-n:n}));var d=0,h={};l.forEach((function(t){t.arts.sort((function(t,e){var n=u(t,e);return r?-n:n})),t.arts.forEach((function(t){h[t.cid]=d++}))})),t.sort((function(t,e){return h[t.artboard.cid]-h[e.artboard.cid]>0?1:-1}))}else t.sort((function(t,e){n===a["m"].Artboard&&(t=t.artboard,e=e.artboard);var i=Object(c["Z"])(t.name,e.name);return r?-i:i}))}function Jn(t,e,n,i){var r=i.orderDesc,o=i.sortType;t.sort((function(t,i){return n===a["m"].Artboard&&(t=t.artboard,i=i.artboard),t.rootId!==i.rootId||t.deepCount!==i.deepCount?0:(s=o===a["n"].Date?t[e]>i[e]?1:-1:Object(c["Z"])(t.name,i.name),r?-s:s);var s}))}function Qn(t,e){Object(l["i"])(t.subFolders)?(t.subFolders.forEach((function(t){null==t.customStatus&&(t.customStatus=a["q"].None),null==t.customStatusUpdateTimes&&(t.customStatusUpdateTimes=0)})),qn(t.subFolders,"updateTimes",a["m"].Folder,e)):t.subFolders=[],Object(l["i"])(t.subFiles)?(t.subFiles.forEach((function(t){t.name=t.fileName+t.fileExt})),qn(t.subFiles,"updateTimeTimes",a["m"].File,e)):t.subFiles=[]}function Zn(t){var e,n;if(!t)return null;var i=t,r=i.parent;while(r)t=r,r=r.parent;return null!==(n=(e=t).name)&&void 0!==n||(e.name="Untitled Section"),t}function ti(t){var e=t.artboardSections,n=t.artboards;Object(l["k"])(e)&&(Object.keys(e).forEach((function(t){var n=Object(c["ob"])(e[t]);Object(l["k"])(n)?e[t]=n:delete e[t]})),Object(l["i"])(n)&&n.forEach((function(t){var n,i;if(t){var r=t.sectionId,o=t.fileType;if(r){var a=e["".concat(o,":").concat(r)];t.sectionInfo=a||null}else t.sectionId=t.sectionInfo=null;t.topSectionInfo=Zn(t.sectionInfo),t.topSectionId=null!==(n=null===(i=t.topSectionInfo)||void 0===i?void 0:i.guid)&&void 0!==n?n:null}})))}function ei(t){c["O"].docsMinScale={},t.forEach((function(t){ni(t.artboard)}))}function ni(t){var e=t.boundsInParent,n=t.scale,i=t.docGuid,r=t.pageGuid;if(e&&(("number"!==typeof n||n<=0)&&(n=1),1!==n)){var o=r||i,a=c["O"].docsMinScale[o];null==a&&(a=1),a>n&&(c["O"].docsMinScale[o]=n)}}function ii(t,e){var n=t.artboard,i=e.artboard,r=n.boundsInParentForList||n.boundsInParent||n.frame,o=i.boundsInParentForList||i.boundsInParent||i.frame;if(n.updateTimeTimes>0&&i.updateTimeTimes>0){var a=(new w).set(r.x,r.y,r.width,r.height),s=(new w).set(o.x,o.y,o.width,o.height);if(a.isOverlap(s)){var c=n.updateTimeTimes-i.updateTimeTimes;if(Math.abs(c)>1500){if(c>0)return 1;if(c<0)return-1}}}var l=r.y,u=o.y,d=l-u;if(d>100)return 1;if(d<-100)return-1;var h=r.x,f=o.x,m=h-f;return 0===m?0===d?0:d>0?1:-1:m>0?1:-1}function ri(t,e){if(!Object(l["k"])(t))return!1;var n=t.fills,i=t.ver,r=t.types,o=t.fill;return 1===(null===r||void 0===r?void 0:r.Section)||!("number"!==typeof i||i<1)&&(e===a["r"].XD?Object(l["k"])(o):!(!Object(l["i"])(n)||n.length<1)&&null!=n.find((function(t){return!(!Object(l["k"])(t)||!t.visible)})))}function oi(t,e){if(t.splice(0),c["O"].inCloudMode){var n={},i=function(e,i,r,o,s,c,l,u,d,h){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:void 0,m=n[o];return m||(m=n[o]={arts:[],guid:o,name:r,fileType:i,docFullName:d,sortText:h,docGuid:u,docName:l,pageGuid:c,pageName:s,sections:[],type:e,docSeparator:e===a["K"].Document,no_section_artboard:f},t.push(m),m)},r={},o=function(t,e,n,i){if(t){if(i){var r=t.findIndex((function(t){return t.guid===e}));-1!=r&&t.splice(r,1)}t.push(n)}};e.forEach((function(t){var e=t.artboard,n=e.docName,c=e.docGuid,d=e.pageGuid,h=e.pageName,f=e.sectionId,m=e.sectionInfo,v=e.topSectionId,p=e.topSectionInfo,b=e.updateTimeTimes,g=e.fileType,w=d||c||"",y=h||n||"",k="".concat(n).concat(h?"/".concat(h):""),C="".concat(n,":").concat(c).concat(h?"/".concat(h,":").concat(d):"");Ti(e);var x,S=i(Object(l["j"])(d)?a["K"].Page:a["K"].Document,g,y,w,h,d,n,c,k,C);if(S.arts.push(t),v&&Object(l["k"])(p))x=i(a["K"].Section,g,p.name,p.guid,h,d,n,c,"".concat(k,"/").concat(p.name),"".concat(C,"/").concat(p.name,":").concat(p.guid)),x.arts.push(t);else{var T="".concat(S.guid,".").concat(a["db"]),O=a["eb"],I=S.type===a["K"].Page?S.guid:"",A=S.type===a["K"].Page?S.name:"";x=i(a["K"].Section,g,O,T,A,I,n,c,"".concat(k,"/").concat(O),"".concat(C,"/￿").concat(O,":").concat(T),!0),x.arts.push(t)}if(f&&ri(m,g)){var F=r[w];F||(F=r[w]={});var j=!F[f],_=!j&&F[f]<b;if(j||_){var M;if(F[f]=b,1===(null===(M=m.types)||void 0===M?void 0:M.Section))return o(S.sections,f,m,_),void o(x.sections,f,m,_);var L=m.frame,P=m.parent,D=m.fills,N=m.page;Object(l["i"])(D)||(D=m.fills=[]);while(null!=P){var E,R=P,V=R.frame,B=R.fills;if(Object(l["k"])(V)&&(L.x+=V.x,L.y+=V.y),Object(l["i"])(B))(E=D).unshift.apply(E,Object(u["a"])(B));P=P.parent}Object(l["k"])(N)&&Object(l["i"])(N.fills)&&N.fills.forEach((function(t){Object(l["k"])(t)&&(t=Object(s["a"])(Object(s["a"])({},t),{},{fromPage:!0}),D.unshift(t))})),m.boundsInArtboard=m.boundsInParent=L,m.pageGuid=d,m.docGuid=c,m.types={Section:1},Ti(m),g===a["r"].XD?Ln(m):hn(m),o(S.sections,f,m,_),o(x.sections,f,m,_)}}}));for(var d=t.reduce((function(t,e){var n,i=e.docGuid,r=e.pageGuid,o=e.type,s=e.no_section_artboard;if(o!==a["K"].Section)return t;if(!0===s)return t;var c="".concat(i,":").concat(r);return t[c]=(null!==(n=t[c])&&void 0!==n?n:0)+1,t}),{}),h=t.length-1;h>=0;h--){var f,m=t[h],v=m.docGuid,p=m.pageGuid,b=m.type,g=m.arts,y=m.sections,k=m.no_section_artboard;b===a["K"].Section&&k&&0===(null!==(f=d["".concat(v,":").concat(p)])&&void 0!==f?f:0)?t.splice(h,1):(g.sort(ii),m.maxRect=j(g,y),m.rect=(new w).set(0,0,m.maxRect.width,m.maxRect.height))}t.sort((function(t,e){return Object(c["Z"])(t.sortText,e.sortText)}))}else{if(e.forEach((function(t){var e=t.artboard;e.boundsInParentForList=e.boundsInParent})),c["O"].fileType==a["r"].SKETCH||c["O"].fileType==a["r"].FIGMA){var C={},x=c["O"].documentName,S=c["O"].documentGuid;return e.forEach((function(e){var n=e.artboard,i=n.pageGuid||"",r=n.pageName||x||"",o=C[i];o||(o=C[i]=[],t.push({arts:o,guid:i,name:r,fileType:c["O"].fileType,docFullName:r,sortText:"".concat(r,":").concat(i),docGuid:S,docName:x,type:n.pageGuid?a["K"].Page:a["K"].Document})),o.push(e)})),C=null,t.forEach((function(t){t.arts.sort(ii),t.maxRect=j(t.arts,null),t.rect=(new w).set(0,0,t.maxRect.width,t.maxRect.height)})),void t.sort((function(t,e){return Object(c["Z"])(t.sortText,e.sortText)}))}e.sort(ii);var T=c["O"].documentName,O=c["O"].documentGuid,I=O||"",A=T||"",F=a["r"].XD,_={arts:e,guid:I,name:A,fileType:F,docFullName:"".concat(T).concat(a["r"].getFileExt(F)),sortText:"".concat(T,":").concat(O),docGuid:O,docName:T};_.arts.sort(ii),_.maxRect=j(_.arts,null),_.rect=(new w).set(0,0,_.maxRect.width,_.maxRect.height),t.push(_)}}function ai(t){var e=1;while(t){var n=t,i=n.opacity;null==i&&(i=1),e*=i,t=t.parentNode}return e}function si(t){return null==t&&(t=1),Math.round(100*t)+"%"}function ci(t){var e;if(!t)return"";var n=null!==(e=t.artboardCount+t.folderCount+t.fileCount)&&void 0!==e?e:0,i="number"===typeof t.fileCount,r="共 ".concat(n," 项");n>0&&(r+="：".concat(t.artboardCount," 画板，").concat(i?"".concat(t.fileCount," 文件，"):"").concat(t.folderCount," 文件夹"));var o="".concat(t.name,"\n").concat(r).concat(t.updateTimes?"\n最后更新：".concat(Object(l["c"])(t.updateTimes)):"");return o}function li(t){var e,n,i;return t?(null!==(e=t.artboardCount)&&void 0!==e?e:0)+(null!==(n=t.folderCount)&&void 0!==n?n:0)+(null!==(i=t.fileCount)&&void 0!==i?i:0):0}function ui(t){if(!t)return"";var e=(null===t||void 0===t?void 0:t.fileType)===a["L"].Url;return"".concat(t.name,"\n文件大小: ").concat(Object(c["qb"])(t.fileSize)).concat(e?"\n链接到: ".concat(t.webLoc):"","\n提交者: ").concat(t.updaterName,"\n提交于: ").concat(Object(l["c"])(t.updateTimeTimes)).concat(t.versionCount>0?"\n版本总数: ".concat(t.versionCount):"")}function di(t){if(!t)return"";var e=t.comments,n=t.replies,i=t.updaterName,r=t.name,o=t.updateTimeTimes,a=t.versionCount,s=(null!==e&&void 0!==e?e:0)+(null!==n&&void 0!==n?n:0);return"".concat(r,"\n提交者: ").concat(i,"\n提交于: ").concat(Object(l["c"])(o)).concat(a>0?"\n版本总数: ".concat(a):"").concat(s>0?"\n评论总数: ".concat(s):"")}function hi(t){if(!t)return"";var e=t.updaterName,n=t.updateTimeTimes,i=t.updateTimes;return"".concat(Object(l["b"])(null!==n&&void 0!==n?n:i)," ").concat(e)}function fi(t){if(!t)return"";var e=t.updateTimeTimes,n=t.updateTimes;return Object(l["b"])(null!==e&&void 0!==e?e:n)}function mi(t,e){var n="";return e&&(n="".concat(t.updaterName," 提交于 ").concat(Object(l["b"])(t.updateTimeTimes),",")),"".concat(n,"双击查看 ").concat(t.name," 标注详情")}function vi(t){if(!t)return"";var e=t.updaterName,n=t.name,i=t.updateTimeTimes,r=t.updaterEmail,o=t.lastVersionId;return"".concat(n,"\n提交者: ").concat(e).concat(r?"(".concat(r,")"):"","\n提交于: ").concat(Object(l["c"])(i)).concat(o>0?"\n画板版本: ".concat(o):"")}function pi(t){if(!t)return"";var e=t.updaterName,n=t.name,i=t.updateTimeTimes,r=t.updaterEmail,o=t.lastVersionId,a=t.verId;return null!==a&&void 0!==a||(a=o),"".concat(n,"\n提交者: ").concat(e).concat(r?"(".concat(r,")"):"","\n提交于: ").concat(Object(l["c"])(i)).concat(a>0?"\n文件版本: ".concat(a):"")}function bi(t){return{artboard:t,childs:[],exportNodes:[],loadErrMsg:null,isLoaded:!1,isFetching:!1,isError:!1,mlUserSelectDown:!0,removed:!1,loadedCache:{},customStatus:a["i"].None,customStatusUpdateTimes:0,historyArtboards:null,artboardVerData:null}}function gi(t){var e=[];if(Object(l["i"])(t)&&t.length>0){var n=new Map,i=t.filter((function(t){return!t.parent}));t.forEach((function(t){if(t.parent){var e=t.parent.guid;n.has(e)||n.set(e,[]),n.get(e).push(t)}}));var r=function(t,e){e.push(t);var i=n.get(t.guid)||[];i.forEach((function(t){return r(t,e)}))};i.forEach((function(t){return r(t,e)}))}return e}function wi(t,e,n){if(!t)return!1;var i=t.docGuid,r=t.pageGuid,o=t.topSectionId;return n?null==o&&(i===e||r===e):i===e||r===e||o===e}function yi(t){var e=!1,n=a["db"];return Object(l["j"])(t)&&t.endsWith(".".concat(n))&&(t=t.substring(0,t.length-(n.length+1)),e=!0),{onlyNoSectionArtboard:e,filterDocumentGuid:t}}function ki(t){var e,n;if(Object(l["k"])(t)){var i=t.users,r=t.historyFiles,o=t.file,s=t.curVerId;Object(l["k"])(o)||console.error("error file data",t),Object(l["k"])(i)||(i=t.users={}),Object(l["i"])(r)||(r=t.historyFiles=[]);var u,d,h=function(t){if(t){var e=t.updaterId,n=i[e];n&&(t.updater=n,t.updaterName=n.nickName,t.updaterEmail=n.email)}};if(h(o),o.name="".concat(o.fileName).concat(null!==(e=o.fileExt)&&void 0!==e?e:""),null!==(n=o.verId)&&void 0!==n||(o.verId=o.lastVersionId),null==s||!(s>0))null!==(u=t.curVerId)&&void 0!==u||(t.curVerId=null!==(d=o.verId)&&void 0!==d?d:0);r.forEach((function(t){var e,n;h(t),o&&(t.name=o.name,t.fileExt=o.fileExt,t.fileName=o.fileName,t.parentId=o.parentId,t.versionCount=o.versionCount,null!==(e=t.viewUrl)&&void 0!==e||(t.viewUrl=Object(c["gb"])(null!==(n=o.viewUrl)&&void 0!==n?n:"",t.verId)),t.lastVersionId=t.verId,t.previewImage||(t.previewImage=t.fileType===a["L"].Url?null:t.previewPath),t.webLoc||(t.webLoc=t.fileType===a["L"].Url?t.previewPath:null))}))}}var Ci={count:0,loaded:0,resolve:null,initdata:[],artboards:null,defaultArtboardGuid:"",permission:!0,fileInfo:null,renderMode:a["W"].Normal,folderNotFound:!1,folderInSpecify:!1,cloudNeedLogin:!1,cloudIsLogin:!1,cloudNickName:null,cloudUserEmail:null,cloudUserId:0,cloudUserIsDesigner:!1,cloudUserIsOwner:!1,cloudUserKey:null,cloudName:null,cloudKey:null,resourceHost:null,cloudBaseInfoTime:0,resourceState:null,cloudVersion:null,cloudFolderUpdateTimes:null,cloudUserFolderSpecifyMemberAuthority:a["w"].ReadWrite,documents:[]};function xi(t){if(Ci.loaded+=1,t&&t({current:Ci.loaded,count:Ci.count}),Ci.loaded>=Ci.count){var e=Ci.resolve;e&&(Ci.resolve=null,oi(Ci.documents,Ci.initdata),e())}}function Si(t,e){var n=t||e||"",i=c["O"].docsMinScale[n];return null==i&&(i=1),i}function Ti(t){var e,n=Si(t.pageGuid,t.docGuid),i=t.boundsInParent;i&&(e=Object(s["a"])({},i)),e&&1!==n&&n>0&&(e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.ceil(e.width*n),e.height=Math.ceil(e.height*n)),t.boundsInParentForList=e}function Oi(t,e){var n={count:0,loaded:0,resolve:null,artboards:null,defaultArtboardGuid:"",permission:!0,fileInfo:null,folderNotFound:!1,folderInSpecify:!1,cloudNeedLogin:!1,cloudIsLogin:!1,cloudNickName:null,cloudUserEmail:null,cloudUserId:0,cloudUserIsDesigner:!1,cloudUserIsOwner:!1,cloudUserKey:null,cloudName:null,resourceHost:null,cloudBaseInfoTime:0,resourceState:null,cloudKey:null,cloudVersion:null};Ci.documents.splice(0),Ci.initdata.splice(0),Object.keys(n).forEach((function(t){Ci[t]=n[t]})),Object(l["k"])(t)||(t={artboards:[],guid:"No Data",name:"No Data",config:{guid:"",scales:[1,1.5,2,3,4],compressPNG:!0,supportFileProtocol:!1,platform:0}}),null==t.fileType&&(t.fileType=a["r"].XD);var i,r=t.cloudData;if(c["O"].docsMinScale={},c["O"].initTitle=document.title,c["O"].inCloudMode=Object(l["k"])(r),c["O"].fileType=t.fileType,c["O"].inCloudMode){var o;c["O"].documentGuid=r.folderId.toString(),c["O"].documentName=r.folderName,c["O"].config={guid:c["O"].documentGuid,scales:[1,1.5,2,3,4],compressPNG:!0,supportFileProtocol:!0,platform:0},Ci.defaultArtboardGuid=r.artboardGuid,Ci.parentFolder=r.parent,Ci.currentFolderId=r.folderId;var s,u,d=r.fileInfo,h=null;if(d&&(h={file:d,users:r.users,historyFiles:r.fileVers,curVerId:r.verId},ki(h)),Ci.fileInfo=h,Ci.renderMode=null!==(o=r.renderMode)&&void 0!==o?o:a["W"].Normal,c["O"].cloudFolderId=r.folderId,Ci.permission=r.permission,Ci.folderNotFound=r.folderNotFound,Ci.folderInSpecify=r.folderInSpecify,Ci.cloudNeedLogin=r.needLogin,Ci.cloudIsLogin=r.isLogin,Ci.cloudNickName=r.nickName,Ci.cloudUserEmail=r.email,Ci.cloudUserId=r.userId,Ci.cloudUserIsDesigner=r.isDesigner,Ci.cloudUserIsOwner=!!r.isOwner,c["O"].userKey=Ci.cloudUserKey=r.userKey,Ci.cloudName=r.cloudName,c["O"].resourceHost=Ci.resourceHost=r.resourceHost,c["O"].cloudBaseInfoTime=Ci.cloudBaseInfoTime=r.cbt,c["O"].resourceState=Ci.resourceState=r.resourceState,c["O"].cloudKey=Ci.cloudKey=r.cloudKey,Ci.cloudVersion=r.cloudVersion,Object(l["k"])(r.folderInfo))i=r.folderInfo.artboards,Ci.cloudFolderUpdateTimes=r.folderInfo.updateTimes,Ci.cloudUserFolderSpecifyMemberAuthority=null!==(s=r.folderInfo.userSpecifyMemberAuthority)&&void 0!==s?s:a["w"].ReadWrite,Ci.subFolders=r.folderInfo.folders,Ci.subFiles=r.folderInfo.files,ti(r.folderInfo);else Ci.cloudUserFolderSpecifyMemberAuthority=null!==(u=r.usma)&&void 0!==u?u:a["w"].ReadWrite}else switch(c["O"].userKey=null,c["O"].cloudKey=null,c["O"].documentGuid=t.guid,c["O"].documentName=t.name,c["O"].config=t.config,t.fileType){case a["r"].SKETCH:case a["r"].FIGMA:var f=t.pages;i=[],Object(l["i"])(f)&&f.forEach((function(t){t&&Object(l["i"])(t.artboards)&&t.artboards.forEach((function(e){e&&(e.pageGuid=t.guid,e.pageName=t.name,i.push(e))}))}));break;default:i=t.artboards;break}Qn(Ci,e),Object(l["i"])(i)||(i=[]),Ci.artboards=i,Ci.count=i.length}var Ii={dataInit:Oi,get inCloudMode(){return c["O"].inCloudMode},get documentName(){return c["O"].documentName},get documentGuid(){return c["O"].documentGuid},get config(){return c["O"].config},get permission(){return Ci.permission},get cloudNeedLogin(){return Ci.cloudNeedLogin},get cloudIsLogin(){return Ci.cloudIsLogin},get cloudNickName(){return Ci.cloudNickName},get cloudUserEmail(){return Ci.cloudUserEmail},get cloudUserId(){return Ci.cloudUserId},get cloudUserIsDesigner(){return Ci.cloudUserIsDesigner},get cloudUserIsOwner(){return Ci.cloudUserIsOwner},get cloudUserKey(){return Ci.cloudUserKey},get cloudName(){return Ci.cloudName},get resourceHost(){return Ci.resourceHost},get cloudBaseInfoTime(){return Ci.cloudBaseInfoTime},get resourceState(){return Ci.resourceState},get cloudKey(){return Ci.cloudKey},get cloudVersion(){return Ci.cloudVersion},get documentArtboards(){return Ci.initdata},get documents(){return Ci.documents},cloud:{get folderInSpecify(){return Ci.folderInSpecify},get folderNotFound(){return Ci.folderNotFound},get defaultArtboardGuid(){return Ci.defaultArtboardGuid},get parentFolder(){return Ci.parentFolder},get currentFolderId(){return Ci.currentFolderId},get subFolders(){return Ci.subFolders},get subFiles(){return Ci.subFiles},get renderMode(){return Ci.renderMode},get fileInfo(){return Ci.fileInfo},get folderUpdateTimes(){return Ci.cloudFolderUpdateTimes},get userFolderSpecifyMemberAuthority(){return Ci.cloudUserFolderSpecifyMemberAuthority}},allArtboardLoadChecked:function(t){return new Promise((function(e){0!==Ci.count?(Ci.resolve=e,Ci.artboards.forEach((function(e){En(e),F(e);var n=bi(e);if(Ci.initdata.push(n),c["O"].inCloudMode)return ni(e),void xi(t);Xn(n,[]).catch((function(t){var e=Ci.initdata.findIndex((function(e){return e===t}));-1!==e&&Ci.initdata.splice(e,1)})).finally((function(){xi(t)}))}))):e()}))}};n("b1f8"),n("841c");var Ai,Fi=n("2f62"),ji={device:{android:/([ ;/)(,]|^)Android([ ;/)(,]|$)/i,iphone:/([ ;/)(,]|^)iPhone([ ;/)(,]|$)/i,ipad:/([ ;/)(,]|^)ipad([ ;/)(,]|$)/i,ios:/([ ;/)(,]|^)ios([ ;/)(,]|$)/i,macos:/([ ;/)(,]|^)mac os([ ;/)(,]|$)/i,windows:/([ ;/)(,]|^)Windows([ ;/)(,]|$)/i,linux:/([ ;/)(,]|^)linux([ ;/)(,]|$)/i},maker:{mot:/([ ;/)(,]|^)mot([ ;/)(,]|$)/i},browser:{uc:/([ ;/)(,]|^)(UCBrowser|UCWEB)([ ;/)(,]|$)/i,safria:/([ ;/)(,]|^)Safari([ ;/)(,]|$)/i,aol:/([ ;/)(,]|^)aol([ ;/)(,]|$)/i,arora:/([ ;/)(,]|^)Arora([ ;/)(,]|$)/i,qqbrowser:/([ ;/)(,]|^)QQBrowser([ ;/)(,]|$)/i,mqqbrowser:/([ ;/)(,]|^)mQQBrowser([ ;/)(,]|$)/i,chrome:/([ ;/)(,]|^)(?:chrome|CriOS)([ ;/)(,]|$)/i,qq:/([ ;/)(,]|^)qq([ ;/)(,]|$)/i,microMessenger:/([ ;/)(,]|^)MicroMessenger([ ;/)(,]|$)/i,sogouMobileBrowser:/([ ;/)(,]|^)sogouMobileBrowser([ ;/)(,]|$)/i,baidubrowser:/([ ;/)(,]|^)baidubrowser([ ;/)(,]|$)/i,weibo:/([ ;/)(,]|^)weibo([ ;/)(,]|$)/i,firefox:/([ ;/)(,]|^)Firefox([ ;/)(,]|$)/i,baiduboxapp:/([ ;/)(,]|^)baiduboxapp([ ;/)(,]|$)/i,msie:/(?:[ ;/)(,]|^)(?:msie|rv)\s*:?\s*([\d.]+)/i,Edge:/(?:[ ;/)(,]|^)(?:Edge)\s*:?\s*([\d.]+)/i}},_i={safria:"Safria",firefox:"Firefox"},Mi=function(t){if(!t)return"";var e=ji.browser;if(e.uc.test(t))return"UC浏览器";if(e.aol.test(t))return"AOL";if(e.Edge.test(t))return"Edge";if(e.arora.test(t))return"Arora";if(e.sogouMobileBrowser.test(t))return"搜狗浏览器";if(e.baidubrowser.test(t))return"百度浏览器";if(e.baiduboxapp.test(t))return"手机百度";if(e.weibo.test(t))return"微博客户端";if(e.microMessenger.test(t))return ji.device.windows.test(t)||e.qqbrowser.test(t)?"微信电脑端":"微信手机端";if(e.qq.test(t))return"手机QQ";if(e.mqqbrowser.test(t))return"QQ浏览器";if(e.firefox.test(t))return _i.firefox;if(e.chrome.test(t))return"Chrome";if(e.safria.test(t))return _i.safria;var n=e.msie.exec(t);return n?"IE"+n[1]:"Other"},Li={android:"Android",iPhone:"iPhone",iPad:"iPad",iOS:"iOS",macOS:"macOS",windows:"Windows",linux:"Linux",other:"Other"},Pi=function(t){if(t){var e=ji.device;if(e.android.test(t))return{name:Li.android,type:"android"};if(e.iphone.test(t))return{name:Li.iPhone,type:"ios"};if(e.ipad.test(t))return{name:Li.iPad,type:"ios"};if(e.ios.test(t))return{name:Li.iOS,type:"ios"};if(e.macos.test(t))return{name:Li.macOS,type:"ios"};if(e.windows.test(t))return{name:Li.windows,type:"windows"};if(e.linux.test(t))return{name:Li.linux,type:"linux"}}return{name:Li.other,type:"other"}},Di=function(t){if(void 0!==Ai)return t(Ai),void(t=null);var e=new Image,n=function(i){e.onerror=e.onload=null;var r=!(!i||"load"!==i.type)&&1==e.width;Ai=r?Ni.Support:Ni.NotSupport,n=e=null,t(Ai),t=null};e.onerror=n,e.onload=n,e.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="},Ni={Checking:0,NotSupport:1,Support:2},Ei=!1,Ri=function(){var t=navigator.userAgent,e=Pi(t),n=Mi(t);switch(Ei=n===_i.firefox,e.name){case Li.macOS:case Li.iPhone:case Li.iPad:case Li.iOS:break;default:return!1}return n===_i.safria}(),Vi=Ei,Bi=Object(h["a"])((function t(){Object(d["a"])(this,t),Object(f["a"])(this,"X",0),Object(f["a"])(this,"Y",0),Object(f["a"])(this,"Width",0),Object(f["a"])(this,"Height",0),Object(f["a"])(this,"Down",null),Object(f["a"])(this,"Right",null),Object(f["a"])(this,"Used",!1)})),Hi=function(){function t(e,n){if(Object(d["a"])(this,t),Object(f["a"])(this,"Root",null),Object(f["a"])(this,"Margin",0),this.Margin=n,null!=e){e=Object(u["a"])(e);var i=0;e.forEach((function(t){i=Math.max(t.rect.width,i)})),e.unshift({rect:(new w).set(0,0,i,-n)});var r=e.length,o=null,a=null,s=0,c=0,l=2*n;if(!(r>0)){var h=this.Root=new Bi;return h.Width=l,h.Height=l,h.X=n,void(h.Y=n)}a=e[0],s=a.rect.width+l,c=a.rect.height+l;var m=this.Root=new Bi;m.Width=s,m.Height=c,m.X=n,m.Y=n;for(var v=0;v<r;v++){a=e[v],s=a.rect.width+n,c=a.rect.height+n,o=this.findNode(this.Root,s,c);var p=null;p=null!=o?this.splitNode(o,s,c):this.growNode(s,c),p&&(a.rect.x=p.X-n,a.rect.y=p.Y-n,a.rect.width=p.Width-n,a.rect.height=p.Height-n)}}}return Object(h["a"])(t,[{key:"compareMaxSide",value:function(t,e){var n;return n=this.compareMax_WH(t,e),0!=n?n>0?1:-1:(n=this.compareHeight_Width(t,e),0!=n?n>0?1:-1:1)}},{key:"compareMax_WH",value:function(t,e){var n=Math.max(e.rect.width,e.rect.height)-Math.max(t.rect.width,t.rect.height);return n}},{key:"compareHeight_Width",value:function(t,e){var n=this.compareHeight(t,e);return 0!=n?n>0?1:-1:this.compareWidth(t,e)}},{key:"compareWidth",value:function(t,e){return e.rect.width-t.rect.width}},{key:"compareHeight",value:function(t,e){return e.rect.height-t.rect.height}},{key:"findNode",value:function(t,e,n){if(null==t)return null;if(t.Used){var i=this.findNode(t.Right,e,n);return null!=i?i:this.findNode(t.Down,e,n)}return e<=t.Width&&n<=t.Height?t:null}},{key:"splitNode",value:function(t,e,n){t.Used=!0;var i=t.Right=new Bi;i.X=t.X+e,i.Y=t.Y,i.Width=t.Width-e,i.Height=n;var r=t.Down=new Bi;return r.X=t.X,r.Y=t.Y+n,r.Width=t.Width,r.Height=t.Height-n,t}},{key:"growNode",value:function(t,e){var n=!1;t<=this.Root.Width&&(n=!0);var i=!1;e<=this.Root.Height&&(i=!0);var r=i&&this.Root.Height>=this.Root.Width+t,o=n&&this.Root.Width>=this.Root.Height+e;return r?this.growRight(t,e):o?this.growDown(t,e):i?this.growRight(t,e):n?this.growDown(t,e):null}},{key:"growRight",value:function(t,e){var n=this.Root,i=this.Root=new Bi;i.Used=!0,i.Width=n.Width+t,i.Height=n.Height,i.Y=this.Margin,i.X=this.Margin,i.Down=n;var r=i.Right=new Bi;r.X=n.Width,r.Width=t,r.Height=n.Height,r.Y=this.Margin;var o=this.findNode(this.Root,t,e);return null!=o?this.splitNode(o,t,e):null}},{key:"growDown",value:function(t,e){var n=this.Root,i=this.Root=new Bi;i.Used=!0,i.Width=n.Width,i.Height=n.Height+e,i.Y=this.Margin,i.X=this.Margin,this.Root.Right=n;var r=this.Root.Down=new Bi;r.Y=n.Height,r.Width=n.Width,r.Height=e,r.X=this.Margin;var o=this.findNode(this.Root,t,e);return null!=o?this.splitNode(o,t,e):null}}])}(),Ui=Object(h["a"])((function t(e){var n=e.name,i=void 0===n?null:n,r=e.list,o=void 0===r?null:r;Object(d["a"])(this,t),Object(f["a"])(this,"name",null),Object(f["a"])(this,"list",null),Object(f["a"])(this,"type",Gi.Group),this.name=i,this.list=o})),Gi={Group:0,Web:1,Mobile:2,Custom:3},Wi=Object(h["a"])((function t(e){var n=e.name,i=void 0===n?null:n,r=e.width,o=void 0===r?0:r,a=e.height,s=void 0===a?0:a,c=e.type,l=void 0===c?Gi.Mobile:c,u=e.hasBangs,h=void 0!==u&&u,m=e.iosDynamicIsland,v=void 0!==m&&m;Object(d["a"])(this,t),Object(f["a"])(this,"name",null),Object(f["a"])(this,"type",Gi.Mobile),Object(f["a"])(this,"width",0),Object(f["a"])(this,"height",0),Object(f["a"])(this,"hasBangs",!1),Object(f["a"])(this,"iosDynamicIsland",!1),this.name=i,this.type=l,this.width=o,this.height=s,this.hasBangs=h,this.iosDynamicIsland=v})),$i=[new Wi({name:"Web",type:Gi.Web}),new Ui({name:"iPhone",list:[new Wi({name:"iPhone 16 Pro Max",width:440,height:956,hasBangs:!1,iosDynamicIsland:!0}),new Wi({name:"iPhone 15 Pro Max/16 Plus",width:430,height:932,hasBangs:!1,iosDynamicIsland:!0}),new Wi({name:"iPhone 16 Pro",width:402,height:874,hasBangs:!1,iosDynamicIsland:!0}),new Wi({name:"iPhone 15 Pro/16",width:393,height:852,hasBangs:!1,iosDynamicIsland:!0}),new Wi({name:"iPhone 13 Pro Max",width:428,height:926,hasBangs:!0}),new Wi({name:"iPhone 13 Pro",width:428,height:844,hasBangs:!0}),new Wi({name:"iPhone XR",width:414,height:896,hasBangs:!0}),new Wi({name:"iPhone X",width:375,height:812,hasBangs:!0}),new Wi({name:"iPhone 8 plus",width:414,height:736}),new Wi({name:"iPhone SE",width:375,height:667})]}),new Ui({name:"Android",list:[new Wi({name:"Google Pixel 6 Pro",width:412,height:891}),new Wi({name:"OnePlus 9 Pro",width:412,height:919}),new Wi({name:"HuaWei Mate40 Pro",width:448,height:924}),new Wi({name:"XiaoMi 11",width:412,height:915}),new Wi({name:"Oppo 11",width:360,height:780}),new Wi({name:"Vivo 11",width:360,height:760})]}),new Wi({name:"iPad",width:768,height:1024}),new Wi({name:"自定义尺寸",type:Gi.Custom})],zi=function(){for(var t="iPhone X",e=0,n=$i.length;e<n;e++){var i=$i[e];if(i)switch(i.type){case Gi.Group:var r,o=null===(r=i.list)||void 0===r?void 0:r.find((function(e){return(null===e||void 0===e?void 0:e.name)===t}));if(o)return o;break;default:if(i.name===t)return i}}return null}(),Yi=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"historyList",[]),Object(f["a"])(this,"historyIndex",0),Object(f["a"])(this,"onpopstate",null),l["g"]&&this.pushState(null)}return Object(h["a"])(t,[{key:"length",get:function(){return l["g"]?Math.min(this.historyList.length,this.historyIndex+1):history.length}},{key:"state",get:function(){if(l["g"]){var t=this.historyList[this.historyIndex];return t?t.state:null}return history.state}},{key:"href",get:function(){if(l["g"]){var t,e=this.historyList[this.historyIndex];return e&&(null!==(t=e.href)&&void 0!==t)?t:""}return location.href}},{key:"replaceState",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(l["g"]){var i=this.historyList,r=this.historyIndex,o=i.length;if(r!=o-1&&i.splice(r+1),n||(n=location.href),i.length>0){var a=i[i.length-1];a.state=t,a.href=n}else i.push({state:t,href:n});this.historyIndex=i.length-1}else n&&history.replaceState(t,e,n)}},{key:"pushState",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(l["g"]){var i=this.historyList,r=this.historyIndex,o=i.length;return r!=o-1&&i.splice(r+1),n||(n=location.href),i.push({state:t,href:n}),void(this.historyIndex=i.length-1)}n&&history.pushState(t,e,n)}},{key:"go",value:function(t){if(l["g"]){if(0===t)return;var e=this.historyList,n=this.historyIndex,i=this.onpopstate,r=e.length,o=t>0?Math.min(n+t,r-1):Math.max(0,n+t);if(n===o)return;this.historyIndex=o;var a=e[o];i&&i({state:a.state,marklion_href:a.href})}else history.go(t)}}])}(),Xi=new Yi;function Ki(t,e){if(c["O"].inCloudMode&&Object(l["i"])(e)){var n={};e.forEach((function(t){t&&(t.boundsInParentForList=t.boundsInParent,En(t),F(t),n[t.cid]=t)}));var i=[];return t.forEach((function(t,e){if(t){var r=t.artboard;if(r){var o=r.cid,s=r.updateTimeTimes,c=r.versionCount,u=r.topSectionId,d=r.boundsInParent,h=n[o];if(h){var f=h.updateTimeTimes,m=h.versionCount,v=h.topSectionId,p=h.boundsInParent;s===f&&c===m&&u===v?Object(l["k"])(d)&&Object(l["k"])(p)&&(d.x!==p.x||d.y!==p.y)&&i.push({type:a["u"].Change,art:t,newArtboard:h,index:e,changeFromLocation:!0}):i.push({type:a["u"].Change,art:t,newArtboard:h,index:e}),delete n[o]}else i.unshift({type:a["u"].Remove,art:t,index:e})}}})),Object.keys(n).forEach((function(t){i.push({type:a["u"].Add,newArtboard:n[t]})})),i}}var qi={SPACE:{filedetail:"filedetail"}},Ji={};function Qi(t,e,n,i){var r=Ji[t];r||(r=Ji[t]={});var o={diff:i,time:Date.now(),value:n};r[e]=o}function Zi(t,e){var n=Ji[t];n&&(null!=e?delete n[e]:delete Ji[t])}function tr(t,e){var n=Ji[t];if(!n)return null;var i=n[e];if(!i)return null;var r=i.time,o=Date.now(),a=o-r;return a<=0||a>=i.diff?(delete n[e],null):i.value}function er(t){return"cloud_recents:".concat(t)}function nr(t){return t?"guide.n-".concat(t):"guide.n"}function ir(){var t=+Object(c["F"])(nr(),!1);(isNaN(t)||"number"!==typeof t)&&(t=a["k"].None);var e=a["k"].None;return t>=0&&Object.keys(a["k"]).forEach((function(n){var i=a["k"][n];i!==a["k"].None&&(t&i)===i&&(e|=i)})),e}function rr(t){var e=nr();0==t?Object(c["eb"])(e):Object(c["jb"])(e,t.toString())}var or={_steps:null,get steps(){var t=this._steps;return null==t&&(t=this._steps=ir()),t},finishStep:function(t){var e=this.steps;e|=t,this._steps=e,rr(e)},removeStep:function(t){var e=this.steps;e|=t,e^=t,this._steps=e,rr(e)}};o["a"].use(Fi["a"]);var ar,sr=!1;function cr(){if(c["O"].inCloudMode&&history.pushState){var t=function(t){var e,n,i,r,o=t.state,a=t.marklion_href;if(Object(l["k"])(o))e=o.artboardGuid,n=o.nodeGuid,i=o.filterDocumentGuid,r=o.curArtboardExtral;else{var s=a||window.location.href,u=/\/(?:file|interaction)?viewer\/(\d+)(?:\/([\w-]+)(?:\/([\w-]+)\/)?)?/.exec(s);u?(e=u[2],n=u[3]):(n=null,e=null),i=Object(c["cb"])("filterDoc")}if("none"!==i&&Object(l["j"])(i)){if(i){var d=mr.state.sortDocumentsWithSketchDocument.find((function(t){return t.guid===i}));if(d){var h=yi(i),f=mr.state.documentArtboards.find((function(t){var n=t.artboard;return n.guid===e&&wi(n,h.filterDocumentGuid,h.onlyNoSectionArtboard)}));e&&!f&&(i=null)}else i=null}}else i=null;var m=null,v=null;e&&(m=mr.state.documentArtboards.find((function(t){return t.artboard.guid===e})),m&&n&&(v=m.childs.find((function(t){return t.guid===n})))),sr=!0,setTimeout((function(){sr=!1}),50),m!=mr.state.curArtboard&&mr.commit("curArtboard",{artboard:m,extral:r}),v!=mr.state.curNode&&mr.commit("curNode",v),i!=mr.state.filterDocumentGuid&&mr.commit("setFilterDocumentGuid",i)};Xi.onpopstate=t,window.addEventListener("popstate",t)}}function lr(){var t=mr.state,e=t.cloudNeedLogin,n=t.inCloudMode,i=t.cloudIsLogin,r=t.cloud,o=t.curArtboard,s=t.cloudName,l=t.permission,u="";if(n){if(e&&!i);else if(r.folderInSpecify)u+="没有访问权限 - ";else if(r.folderNotFound)u+="链接已失效 - ";else if(r.renderMode==a["W"].File){if(null!=r.fileInfo){var d=r.fileInfo,h=d.file,f=d.curVerId;u+="".concat(null===h||void 0===h?void 0:h.name).concat(f>0&&h&&h.verId!==f?"(#".concat(f,")"):""," - ")}else l&&(u+="文件不存在 - ");u+="".concat(c["O"].documentName," - ")}else u+=o?"".concat(o.artboard.name," - ").concat(c["O"].documentName," - "):"".concat(c["O"].documentName," - ");s&&(u+="".concat(s," - "))}else u+=o?"".concat(o.artboard.name," - ").concat(c["O"].documentName," - "):"".concat(c["O"].documentName," - ");document.title=u+c["O"].initTitle}function ur(t){if(Object(l["j"])(t)){var e=mr.state,n=e.inCloudMode,i=e.cloud;n&&i.renderMode===a["W"].File&&(lr(),Xi.replaceState(null,null,t))}}function dr(t){t.allArtboardLoadChecked?(clearTimeout(ar),ar=setTimeout((function(){hr(t),lr()}),33)):lr()}function hr(t){var e=t.curArtboard,n=t.filterDocumentGuid,i=t.curArtboardExtral;if(c["O"].inCloudMode){if(t.cloudNeedLogin&&!t.cloudIsLogin||!t.permission)return;if(!history.pushState)return;if(sr)return;var r,o,s=!1;switch(t.cloud.renderMode){case a["W"].File:r="fileviewer";break;case a["W"].Interaction:r="interactionviewer";break;default:r="viewer",s=!0;break}r="/".concat(r,"/").concat(c["O"].cloudFolderId,"/"),e&&(o=e.artboard.guid,r+="".concat(encodeURIComponent(o),"/"));var u=!1,d=function(t,e){r+="".concat(u?"&":"?").concat(t,"=").concat(encodeURIComponent(e)),u=!0};n&&d("filterDoc",n);var h=Xi.href;if(h.indexOf(r)===h.length-r.length)return;var f={artboardGuid:o,nodeGuid:null,filterDocumentGuid:n,curArtboardExtral:i};if(s){var m=/\/(?:file|interaction)?viewer\/(\d+)(?:\/([\w-]+)(?:\/([\w-]+)\/)?)?/.exec(h),v={folderId:null,artboardGuid:null,filterDocumentGuid:null};if(m&&(v.folderId=+m[1],v.artboardGuid=m[2],v.filterDocumentGuid=Object(c["cb"])("filterDoc",h),"none"!==v.filterDocumentGuid&&Object(l["j"])(v.filterDocumentGuid)||(v.filterDocumentGuid=null),v.folderId===c["O"].cloudFolderId&&v.artboardGuid===f.artboardGuid&&v.filterDocumentGuid===f.filterDocumentGuid))return void Xi.replaceState(f,null,r)}t.replaceInteractionCurrentState?(t.replaceInteractionCurrentState=!1,Xi.replaceState(f,null,r)):Xi.pushState(f,null,r)}else{var p,b="#";if(e&&(p=e.artboard.guid,b+="/artboard/".concat(p)),location.hash!==b){var g=/^#\/artboard\/([\w-]+)/.exec(location.hash),w={artboardGuid:null};if(g&&history.replaceState&&(w.artboardGuid=g[1],w.artboardGuid===p))return void history.replaceState(null,null,"".concat(location.origin).concat(location.pathname).concat(location.search).concat(b));location.hash=b}}}function fr(t){var e;if(!t)return null;var n=t.cid;return null!==(e=mr.state.documentArtboards.find((function(t){var e;return(null===t||void 0===t||null===(e=t.artboard)||void 0===e?void 0:e.cid)===n})))&&void 0!==e?e:null}var mr=new Fi["a"].Store({state:{automaticSync:{autoGetFolderPrecisKey:0},beginnerGuide:{steps:a["k"].None,rects:{}},winRect:{left:0,top:0,width:0,height:0},webViewHidden:Object(c["Y"])(),webViewFocus:!0,webViewStateTimes:0,folderPrecis:{changeArtboards:[],showArtboardLogNow:0},config:null,allArtboardLoadChecked:!1,replaceInteractionCurrentState:!1,artboardLoadProgress:{current:0,count:1},documentGuid:null,documentName:null,curArtboard:null,curArtboardExtral:null,curNode:null,clickedNode:null,enterNode:null,enterArtboard:null,documentArtboards:[],renderDocumentArtboards:[],documents:[],sortDocumentsWithSketchDocument:[],renderDocuments:[],filterDocumentGuid:null,isSupportWebp:Ni.Checking,netdiskUploader:{linkbox:{visible:!1,data:null},filebox:{visible:!1,parentId:0}},scale:{artboard:1,list:1,resetList:0,resetArtboard:0,resetCenterWithRect:null,resetCenterArtboard:null},setting:{color:{items:["rgba","hex","ahex","hexa","hsla"],current:0},numberAutoRound:!1,exportBoxBackground:a["ab"].Transparent},platform:{type:a["c"].WEB,customUnit:a["d"].PX,customDocWidth:0},unitTemplate:{template:"",enable:!1},androidUseMipmap:"1"===Object(c["F"])("androidUseMipmap",!1),textTip:{visible:!1,text:"",handle:0},inArtboardMultDownMode:!1,inOutput:!1,artboardMenu:{visible:!1,x:0,y:0,artboard:null},helper:{visible:!1,handle:0},inCloudMode:!1,permission:!0,cloudNeedLogin:!1,cloudIsLogin:!1,cloudNickName:null,cloudUserEmail:null,cloudUserId:0,cloudUserIsDesigner:!1,cloudUserIsOwner:!1,cloudUserKey:null,cloudName:null,resourceHost:null,cloudBaseInfoTime:0,resourceState:null,cloudKey:null,cloudVersion:null,cloudListSort:{sortType:a["n"].Name,orderDesc:!1},cloud:{folderNotFound:!1,folderInSpecify:!1,defaultArtboardGuid:"",parentFolder:null,currentFolderId:0,subFolders:[],subFiles:[],allFoldersBoxVisible:!1,renderMode:a["W"].Normal,fileInfo:null,folderUpdateTimes:null,userFolderSpecifyMemberAuthority:a["w"].ReadWrite,refreshRecents:{favoriteFolder:0,favoriteArtboard:0}},resetScaleSceneCenter:null,selectArtboardChanged:null,artRenderInCanvasMode:!0,artShowInListMode:!1,showArtListMap:!0,noviceGuide:{artShowInListMode:!1},artboardShowInteractionLine:!0,rightNavType:a["U"].Property,rightNavTypePropertyClicked:0,commentOnlyCurrentVerArtboard:!1,artboardCommentVisible:!1,pointCommentShowAlways:!1,sliceBorderLineHide:!1,editComment:{drawing:!1,instance:null,drawInfo:{action:Ct.None,histories:[],historyIndex:-1,historyIndexChanges:0,colorIndex:2,fontSize:St,brushSize:Tt.Normal,selectItem:null,enterItem:null},pointInfo:{preventPoint:{x:0,y:0,enable:!1},point:{x:0,y:0,enable:!1,pointIndex:0},instance:null}},imageViewer:{visible:!1,imgList:null,scale:0,currentIndex:0,resetScale:0},commentEditorVisibleId:0,userNotify:{cloudList:{},visible:!1,location:{top:120,right:0},sysTipIds:{},commentUpdateStates:{},cloudUsersByCloud:{}},autoIntoInfo:{commentId:0,commentArtboardId:0,isReply:!1},artboardDetail:{sliceScrollNode:null,initedScale:!1,leftSideVisible:"0"!==Object(c["F"])("leftside.visible",!1),artboardVerListVisible:!1,fetchState:c["a"].Normal,errorText:"",refreshDataTicks:0,comments:null,commentUsers:null,maxPointIndex:0,selectComment:null,notScrollList:!1,pixiLoadInfo:{progress:0,fetchState:c["a"].Normal,errorText:null},interactionSet:{hoverGuid:"",headerVisible:"0"!==Object(c["F"])("interaction.header.visible",!1),history:[],verticalAlign:a["H"].Middle,backgroundColor:"#f5f5f5",rectAlwaysVisible:"0"!==Object(c["F"])("interaction.rect-always-visible",!1),pcDeviceSet:{name:"Web",type:Gi.Web,width:0,height:0,isHorizontal:!1,hasBangs:!1,iosDynamicIsland:!1},overlayArtboards:[],gobackArtboard:null,gotoArtboard:null,goOverlayArtboard:null}},mobileInteraction:{listFetchState:c["a"].Normal,listConfig:{sortType:a["n"].Name,orderDesc:!1,renderType:a["o"].All},searchText:"",controlVisible:!1,mobileSize:{width:0,height:0},scrollYCache:{}},netdiskFileUploadDatas:{},netdiskFileVerListVisible:!1},mutations:{refreshRecents:function(t,e){var n=t.cloud.refreshRecents;switch(e){case a["Y"].FavoriteFolder:n.favoriteFolder=Date.now();break;case a["Y"].FavoriteArtboard:n.favoriteArtboard=Date.now();break}},autoGetFolderPrecisKey:function(t){t.automaticSync.autoGetFolderPrecisKey=Date.now()},netdiskFileVerListVisible:function(t,e){t.netdiskFileVerListVisible=e},setBeginnerGuideRect:function(t,e){var n=e.step,i=e.rect,r=t.beginnerGuide.rects;o["a"].set(r,n,i)},setRightNavTypePropertyClicked:function(t){t.rightNavTypePropertyClicked=Date.now()},setRightNavType:function(t,e){var n=!1;switch(e){case a["U"].Comment:n=!0;break;case a["U"].Slice:break;default:e=a["U"].Property;break}t.rightNavType=e,n?t.artboardCommentVisible=!0:t.artboardDetail.selectComment&&(t.artboardDetail.selectComment=null)},setFolderSubFile:function(t,e){if(t.inCloudMode&&Object(l["k"])(e)){var n=e.files,i=e.folderUpdateTimes;if(Object(l["i"])(n)){var r=t.cloud.subFiles,o=t.cloudListSort,a=t.cloud,s={};r.forEach((function(t,e){s[t.viewUrl]=e})),n.forEach((function(t){var e=s[t.viewUrl];if(null==e)r.push(t);else{var n=r[e];Object.keys(n).forEach((function(e){n[e]=t[e]}))}})),Qn({subFiles:r,subFolders:[]},o),i>0&&(a.folderUpdateTimes=i)}}},removeArtboard:function(t,e){if(t.inCloudMode&&Object(l["j"])(e)){var n=t.documentArtboards,i=t.documents,r=-1,o=n.find((function(t,n){var i;return(null===t||void 0===t||null===(i=t.artboard)||void 0===i?void 0:i.guid)===e&&(r=n,!0)}));if(-1!==r){o.removed=!0,n.splice(r,1);var a=!1;ei(n),oi(i,n),t.sortDocumentsWithSketchDocument=Kn(i);var s=t.filterDocumentGuid;s&&!i.find((function(t){return t.docGuid===s||t.pageGuid===s||t.guid===s}))?this.commit("setFilterDocumentGuid",null):this.commit("setRenderDocuments"),a&&this.commit("setScale",{reset:!0}),je(n)}}},setFolderPrecis:function(t,e){if(t.inCloudMode&&Object(l["k"])(e)){e.folders||(e.folders=[]),e.artboards||(e.artboards=[]),e.files||(e.files=[]);var n=e.updateTimes,i=e.userSpecifyMemberAuthority,r=e.name,o=t.cloud,s=t.documentArtboards,d=t.documents;if(null!=n){o.folderUpdateTimes=n,t.documentName=r,null!=i&&(o.userFolderSpecifyMemberAuthority=i);var h=o.renderMode,f=o.subFolders,m=o.subFiles;if(h===a["W"].Normal){f.splice(0);var v={subFolders:e.folders,subFiles:e.files};Qn(v,t.cloudListSort),ti(e),v.subFolders.length>0&&f.push.apply(f,Object(u["a"])(v.subFolders)),m.splice(0),v.subFiles.length>0&&m.push.apply(m,Object(u["a"])(v.subFiles))}var p=Ki(s,e.artboards),b=[];if((null===p||void 0===p?void 0:p.length)>0){var g,w,k=null===(g=t.curArtboard)||void 0===g?void 0:g.artboard;k&&(w=k.cid),null!==w&&void 0!==w||(w=0);var C=t.folderPrecis.changeArtboards,x={};C.forEach((function(t){x[t.cid]=1}));var S=!1,T=["versionCount","sectionId","sectionInfo","topSectionId","topSectionInfo"];p.forEach((function(t){var e,n,i,r,o,c=null!==(e=t.newArtboard)&&void 0!==e?e:null===(n=t.art)||void 0===n?void 0:n.artboard;switch(c&&(i=c.cid,r=c.guid,o=c.name,Zi("comment",i),i>0&&!x[i]&&(x[i]=1,C.push({cid:i,guid:r,name:o}))),t.type){case a["u"].Change:var l=t.art,u=t.newArtboard,d=t.changeFromLocation,h=l.artboard.updateTimeTimes===u.updateTimeTimes;if(h&&!d){T.forEach((function(t){l.artboard[t]=u[t]}));break}if(!S){var f=l.artboard,m=f.scale,v=f.boundsInParent,p=u.scale,g=u.boundsInParent;m==p&&y(v,g)||(S=!0)}var k=w===l.artboard.cid&&null!=l.artboardVerData;k||(l.isError=!1,l.isFetching=!1,l.isLoaded=!1,l.loadErrMsg=null),l.artboard=u,l.removed=!1,b.push(l);break;case a["u"].Remove:var O=t.index,I=t.art;I.removed=!0,s.splice(O,1),S=!0;break;case a["u"].Add:var A=t.newArtboard,F=bi(A);s.push(F),S=!0,b.push(F);break}})),C.sort((function(t,e){return Object(c["Z"])(t.name,e.name)})),ei(s),oi(d,s),t.sortDocumentsWithSketchDocument=Kn(d);var O=t.filterDocumentGuid;O&&!d.find((function(t){return t.docGuid===O||t.pageGuid===O||t.guid===O}))?this.commit("setFilterDocumentGuid",null):this.commit("setRenderDocuments"),S&&this.commit("setScale",{reset:!0}),je(s,b)}}}},setWebViewFocus:function(t,e){t.webViewFocus=e,e&&(t.webViewStateTimes=Date.now()),vr()},setWebViewHidden:function(t,e){t.webViewHidden=e,e||(t.webViewStateTimes=Date.now()),vr()},setCloudListSortConfig:function(t,e){var n="cloudlist-item-sort",i=t.cloudListSort,r=t.cloud,o=!1;if(Object(l["k"])(e)){if(e.sortType===i.sortType&&null==e.orderDesc)e.orderDesc=!i.orderDesc;else if(e.sortType!==i.sortType&&null==e.orderDesc)switch(e.sortType){case a["n"].Date:e.orderDesc=!0;break;default:e.orderDesc=!1;break}}else Object(c["eb"])(n),o=!0,e={sortType:a["n"].Name,orderDesc:!1};Object.keys(e).forEach((function(t){void 0!==i[t]&&(i[t]=e[t])})),Qn(r,i),o||Object(c["jb"])(n,i)},setMobileInteractionListConfig:function(t,e){var n="m-interaction-list-config",i=t.mobileInteraction.listConfig,r=!1;Object(l["k"])(e)||(Object(c["eb"])(n),r=!0,e={sortType:a["n"].Name,orderDesc:!1,renderType:a["o"].All}),Object.keys(e).forEach((function(t){void 0!==i[t]&&(i[t]=e[t])})),r||Object(c["jb"])(n,i)},setPCDeviceSet:function(t,e){if(Object(l["k"])(e)){var n=t.artboardDetail.interactionSet.pcDeviceSet;if(Object.keys(n).forEach((function(t){var i=e[t];void 0!==i&&(n[t]=i)})),n.type===Gi.Mobile){var i=Math.max(n.width,n.height),r=Math.min(n.width,n.height);n.isHorizontal?(n.width=i,n.height=r):(n.width=r,n.height=i)}else n.type===Gi.Custom&&(n.isHorizontal=n.width>n.height);Object(c["jb"])("interaction.pcdeviceset",n)}},setInteractionRectAlwaysVisible:function(t,e){t.artboardDetail.interactionSet.rectAlwaysVisible!==e&&(t.artboardDetail.interactionSet.rectAlwaysVisible=e,Object(c["jb"])("interaction.rect-always-visible",e?"1":"0"))},setInteractionBackground:function(t,e){t.artboardDetail.interactionSet.backgroundColor!==e&&(t.artboardDetail.interactionSet.backgroundColor=e,Object(c["jb"])("interaction.background",e))},setInteractionHeaderVisible:function(t,e){t.artboardDetail.interactionSet.headerVisible!==e&&(t.artboardDetail.interactionSet.headerVisible=e,Object(c["jb"])("interaction.header.visible",e?"1":"0"))},setInteractionArtboard:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function r(){var o,u,d,h,f,m,v,p,b,g,w,y,k,C,x,S,T,O,I,A,F,j,_,M,L,P,D,N,E;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:if(e){i.n=1;break}return i.a(2);case 1:if(o=t.artboardDetail.interactionSet,!(o.gotoArtboard||o.gobackArtboard||o.goOverlayArtboard)){i.n=2;break}return i.a(2);case 2:u=o.overlayArtboards,d=null,h=t.cloud.renderMode===a["W"].Interaction,f=e.type,f!==xe.overlay||h||(f=xe.goToArtboard),m=h&&(l["f"]||o.pcDeviceSet.type!==Gi.Web),E=f,i.n=E===xe.replace?3:E===xe.closeCurrentOverlay?9:E===xe.goBackAndCloseAllOverlay?14:E===xe.goBack?16:E===xe.goToArtboard?23:E===xe.overlay?28:E===xe.goUrl?33:34;break;case 3:if(d=fr(e.toArtboardItem),d){i.n=4;break}return n.commit("Tip_showTextTip",{text:"目标画板未上传到私有云"}),i.a(2);case 4:if(0!==u.length){i.n=6;break}if(d.artboard.cid!==(null===(v=t.curArtboard)||void 0===v||null===(v=v.artboard)||void 0===v?void 0:v.cid)){i.n=5;break}return n.commit("Tip_showTextTip",{text:"目标画板和当前画板是同一个画板"}),i.a(2);case 5:return t.replaceInteractionCurrentState=!0,e=Object(s["a"])({},e),e.type=xe.goToArtboard,n.commit("setInteractionArtboard",e),i.a(2);case 6:if(p=u[u.length-1],p.visible=!0,p.renderTapInteraction=e,p.artboard=d,!m){i.n=8;break}return o.goOverlayArtboard={renderTapInteraction:e,fromArtboard:d},i.n=7,Object(c["pb"])(1e3*((null===(b=e.transition)||void 0===b?void 0:b.duration)||0));case 7:o.goOverlayArtboard=null;case 8:return i.a(3,35);case 9:if(h){i.n=10;break}return n.commit("Tip_showTextTip",{text:"关闭当前最顶部遮罩层"}),i.a(2);case 10:if(0!==u.length){i.n=11;break}return n.commit("Tip_showTextTip",{text:"当前画板不是以遮罩层的形式打开的,关闭遮罩的命令无效"}),i.a(2);case 11:if(g=u[u.length-1],!g.visible){i.n=13;break}if(g.visible=!1,!m){i.n=13;break}return o.goOverlayArtboard={renderTapInteraction:g.renderTapInteraction,fromArtboard:fr(e.toArtboardItem)},i.n=12,Object(c["pb"])(1e3*((null===(w=g.renderTapInteraction.transition)||void 0===w?void 0:w.duration)||0));case 12:o.goOverlayArtboard=null;case 13:return u.splice(u.length-1),i.a(2);case 14:if(h){i.n=15;break}return n.commit("Tip_showTextTip",{text:"返回到原型的上一个画板"}),i.a(2);case 15:return u.length>0&&u.splice(0),n.commit("setInteractionArtboard",{type:xe.goBack}),i.a(2);case 16:if(h){i.n=17;break}return n.commit("Tip_showTextTip",{text:"返回到原型的上一个画板"}),i.a(2);case 17:if(!(u.length>0)){i.n=19;break}if(y=u[u.length-1],!y.visible){i.n=18;break}return y.visible=!1,i.n=18,Object(c["pb"])(1e3*((null===(k=y.renderTapInteraction.transition)||void 0===k?void 0:k.duration)||.3));case 18:return u.splice(0),i.a(2);case 19:if(null!=Xi.state){i.n=20;break}return n.commit("Tip_showTextTip",{text:"没有可返回的上一个画板"}),i.a(2);case 20:if(Xi.go(-1),C=t.curArtboardExtral,!Object(l["k"])(C)){i.n=22;break}if(x=C.renderTapInteraction,S=C.fromArtboard,!x||!S){i.n=22;break}if(!m){i.n=22;break}return o.gotoArtboard=null,o.goOverlayArtboard=null,o.gobackArtboard={renderTapInteraction:x,fromArtboard:t.curArtboard},i.n=21,Object(c["pb"])(1e3*((null===(T=x.transition)||void 0===T?void 0:T.duration)||.3));case 21:o.gobackArtboard=null;case 22:return i.a(3,35);case 23:if(d=fr(e.toArtboardItem),d){i.n=24;break}return n.commit("Tip_showTextTip",{text:"目标画板未上传到私有云"}),i.a(2);case 24:if(I=d.artboard.cid,I!==(null===(O=t.curArtboard)||void 0===O?void 0:O.artboard.cid)){i.n=25;break}return n.commit("Tip_showTextTip",{text:"目标画板和当前画板是同一个画板"}),i.a(2);case 25:if(A=t.mobileInteraction.scrollYCache,delete A[I],e=Object(s["a"])({},e),delete e.toArtboardItem,!m){i.n=27;break}return o.gobackArtboard=null,o.goOverlayArtboard=null,o.gotoArtboard={renderTapInteraction:e,fromArtboard:d},i.n=26,Object(c["pb"])(1e3*((null===(F=e.transition)||void 0===F?void 0:F.duration)||.3));case 26:o.gotoArtboard=null;case 27:return n.commit("curArtboard",{artboard:d,extral:{renderTapInteraction:e,fromArtboard:t.curArtboard}}),i.a(3,35);case 28:if(d=fr(e.toArtboardItem),d){i.n=29;break}return n.commit("Tip_showTextTip",{text:"目标画板未上传到私有云"}),i.a(2);case 29:if(e=Object(s["a"])({},e),delete e.toArtboardItem,!(u.length>0)){i.n=30;break}if(M=u[u.length-1],(null===(j=M.artboard)||void 0===j?void 0:j.cid)!==(null===(_=d.artboard)||void 0===_?void 0:_.cid)){i.n=30;break}return i.a(2);case 30:if(u.push({artboard:d,renderTapInteraction:e,visible:!0}),!m){i.n=32;break}return o.goOverlayArtboard={renderTapInteraction:e,fromArtboard:d},i.n=31,Object(c["pb"])(1e3*((null===(L=e.transition)||void 0===L?void 0:L.duration)||.3));case 31:o.goOverlayArtboard=null;case 32:return i.a(3,35);case 33:return P=e,D=P.toUrl,D?(N=window.open(D),N.opener=null):n.commit("Tip_showTextTip",{text:"无法跳转网址,因为网址参数丢失了"}),i.a(2);case 34:return n.commit("Tip_showTextTip",{text:"未知的原型操作,无法跳转"}),i.a(2);case 35:return i.a(2)}}),r)})))()},setRenderDocuments:function(t){var e,n=t.filterDocumentGuid,i=t.documents,r=t.inCloudMode;e=Object(l["j"])(n)?i.filter((function(t){return t.guid===n||t.docGuid===n||t.pageGuid===n})):t.documents;var o=e.reduce((function(t,e){return t.add("".concat(e.type,":").concat(e.guid)),t}),new Set);e=e.filter((function(t){switch(t.type){case void 0:return!r;case a["K"].Document:return!0;case a["K"].Page:return!o.has("".concat(a["K"].Document,":").concat(t.docGuid));case a["K"].Section:return!o.has("".concat(a["K"].Document,":").concat(t.docGuid))&&!o.has("".concat(a["K"].Page,":").concat(t.pageGuid))}return!1})),e.forEach((function(e){e.maxRect=j(e.arts,t.inCloudMode?e.sections:null),e.rect=(new w).set(0,0,e.maxRect.width,e.maxRect.height),Object(l["i"])(e.sections)&&(e.sections=gi(e.sections))})),e.length>1&&(new Hi(e,150),e.forEach((function(t){t.rect.width=t.maxRect.width,t.rect.height=t.maxRect.height}))),t.renderDocuments=e;var s=[],c=new Set;e.forEach((function(t){t&&Object(l["i"])(t.arts)&&t.arts.forEach((function(t){var e,n,i=null!==(e=null!==(n=t.artboard.guid)&&void 0!==n?n:t.artboard.cid)&&void 0!==e?e:null;i&&!c.has(i)&&(c.add(i),s.push(t))}))})),t.renderDocumentArtboards=s},setFilterDocumentGuid:function(t,e){if(t.filterDocumentGuid!=e){if(t.filterDocumentGuid=e,this.commit("setRenderDocuments"),e){var n=t.curArtboard;if(n){var i=n.artboard,r=i.docGuid,o=i.pageGuid,a=i.topSectionId;if(r!==e&&o!==e&&a!==e){var s=t.renderDocumentArtboards[0];return void this.commit("curArtboard",{artboard:s})}}}dr(t)}},setAllFoldersBoxVisible:function(t,e){t.cloud.allFoldersBoxVisible=e,e?Object(c["lb"])(a["f"],"1"):Object(c["fb"])(a["f"])},leftSideVisible:function(t,e){t.artboardDetail.leftSideVisible!==e&&(t.artboardDetail.leftSideVisible=e,Object(c["jb"])("leftside.visible",e?"1":"0"))},pointCommentShowAlways:function(t,e){t.pointCommentShowAlways=e,Object(c["jb"])("point-comment-showalways",e?"1":"0")},sliceBorderLineHide:function(t,e){t.sliceBorderLineHide=e,Object(c["jb"])("slice-border-line-hide",e?"1":"0")},artboardCommentVisible:function(t,e){t.artboardCommentVisible=e},setSelectComment:function(t,e){e=e||{};var n=e,i=n.comment,r=n.notScrollList,a=n.openEditor,s=t.artboardDetail;i&&(t.artboardCommentVisible=!0),s.notScrollList=!!r,a&&(null===i||void 0===i?void 0:i.id)>0&&o["a"].set(i,"autoOpenEditor",!0),s.selectComment=i},setCommentEditorVisibleId:function(t,e){t.commentEditorVisibleId=e},setImageViewer:function(t,e){var n=t.imageViewer;if(Object(l["k"])(e)&&Object(l["i"])(e.imgList)&&e.imgList.length>0){var i,r=location.origin.toLocaleLowerCase(),o=null===(i=c["O"].resourceOrigin)||void 0===i?void 0:i.toLocaleLowerCase();n.imgList=e.imgList.map((function(t){var e;if(Object(l["k"])(t)){var n,i=t;n=i.src,e=i.format,t=n}if(!e&&(t instanceof Blob||t instanceof File)){var a=t,s=a.type,c=a.name;if(Object(l["j"])(s)){var u=/\/([^/\\]+)$/.exec(s);u&&(e=u[1])}else if(Object(l["j"])(c)){var d=/\.([^./\\]+)$/.exec(c);d&&(e=d[1])}}else if(!e&&Object(l["j"])(t)){var h=/\.([^./\\]+)(?:\?.*)$/.exec(t);h&&(e=h[1])}if(e&&Object(l["j"])(t)&&0!==t.indexOf("blob:"))try{var f=new URL(t,location.href);f.origin===r||o&&o===f.origin||(e=void 0)}catch(m){e=void 0}return Object(l["j"])(e)&&(e=e.toLowerCase()),{imgSrc:t,format:e,width:0,height:0}})),n.currentIndex="number"===typeof e.currentIndex&&e.currentIndex>=0&&e.currentIndex<e.imgList.length?e.currentIndex:0,n.visible=!0}else n.currentIndex=0,n.visible=!1,n.imgList=null},startDraw:function(t,e){var n=t.editComment;n.drawing||(n.instance=e,n.drawing=!0)},artboardShowInteractionLine:function(t,e){Object(c["jb"])("list-interaction-line",e?"1":"0"),t.artboardShowInteractionLine=e},showArtListMap:function(t,e){Object(c["jb"])("art-list-map",e?"1":"0"),t.showArtListMap=e},artShowInListMode:function(t,e){Object(c["jb"])("art-in-list",e?"1":"0"),location.reload(!0),setTimeout((function(){t.artShowInListMode=e}),1e3)},artRenderInCanvasMode:function(t,e){Object(c["jb"])("list-view-mode",e?"1":"0"),ce.paused=!e,location.reload(!0),setTimeout((function(){t.artRenderInCanvasMode=e}),1e3)},selectArtboardChanged:function(t,e){t.selectArtboardChanged=e},resetScaleSceneCenter:function(t,e){t.resetScaleSceneCenter=e},isSupportWebp:function(t,e){t.isSupportWebp=e},artboardLoadProgress:function(t,e){if(Object(l["k"])(e)){var n=e.current,i=e.count;t.artboardLoadProgress.current=n,t.artboardLoadProgress.count=i}},allArtboardLoadChecked:function(t,e){t.allArtboardLoadChecked=e},setHelperVisible:function(t,e){var n=t.helper;clearTimeout(n.handle),e?n.visible=!0:n.handle=setTimeout((function(){n.visible=!1}),50)},setInOutput:function(t,e){t.inOutput=e},setAndroidUseMipmap:function(t,e){t.androidUseMipmap!==e&&(t.androidUseMipmap=e,Object(c["jb"])("androidUseMipmap",e?"1":"0"))},setArtboardMenu:function(t,e){if(Object(l["k"])(e)){var n=e.visible,i=e.x,r=e.y,o=e.artboard,a=t.artboardMenu;null!=i&&(a.x=Math.max(0,i)),null!=r&&(a.y=Math.max(0,r)),null!=n&&(a.visible=n),!1===n?a.artboard=null:null!=o&&(a.artboard=o)}},setInArtboardMultDownMode:function(t,e){t.inArtboardMultDownMode=e},Tip_showTextTip:function(t,e){var n=e.second,i=void 0===n?5:n,r=e.text,o=t.textTip;o.visible=!0,o.text=r,clearTimeout(o.handle),i>0&&(o.handle=setTimeout((function(t){clearTimeout(t.handle),t.handle=0,t.visible=!1}),1e3*i,o))},Tip_hideTextTip:function(t){var e=t.textTip;e.visible=!1,clearTimeout(e.handle),e.handle=0},setUnitTemplate:function(t,e){var n=e.enable,i=e.template,r=e.fromInited,o=e.guid,a=t.unitTemplate;if((a.enable!=n||a.template!=i)&&(a.enable=n,Object(l["j"])(i)||(i="rem(%num%)"),a.template=i,!r)){var s="unittemplate.".concat(o);a.enable||"rem(%num%)"!=a.template?Object(c["jb"])(s,a):Object(c["eb"])(s)}},setPlatform:function(t,e){var n=e.type,i=e.customUnit,r=e.customDocWidth,o=e.fromInited,s=e.guid,l=t.platform,u=!1;if(null!==n){var d;switch(n){case a["c"].ANDROID:case a["c"].IOS:case a["c"].CUSTOM:case a["c"].WE_CHAT_MINI_PROGRAM:d=n;break;default:d=a["c"].WEB;break}d!==l.type&&(u=!0,l.type=d)}if(null!=i&&null!=r){switch(u=!0,i){case a["d"].DP:case a["d"].PT:case a["d"].RPX:l.customUnit=i;break;default:l.customUnit=a["d"].PX;break}"number"===typeof r&&isFinite(r)&&!isNaN(r)&&r>=1?l.customDocWidth=Math.round(r):l.customDocWidth=0}if(u&&!o){var h="platform.".concat(s);Object(c["jb"])(h,l)}},resetCenterWithRect:function(t,e){t.scale.resetCenterWithRect=e},resetCenterArtboard:function(t,e){t.scale.resetCenterArtboard=e},setScale:function(t,e){if(Object(l["k"])(e)){var n=e.artboard,i=e.list,r=e.reset;null!=n&&(t.scale.artboard=Object(c["w"])(!1,n)),null!=i&&(t.scale.list=Object(c["w"])(!0,i)),!0===r&&(null==t.curArtboard?t.scale.resetList=Date.now():t.scale.resetArtboard=Date.now())}},exportBoxBackgroundType:function(t,e){t.setting.exportBoxBackground=e,Object(c["jb"])("export-box-background",e)},setInteractionArtboardVerticalAlign:function(t,e){t.artboardDetail.interactionSet.verticalAlign=e,Object(c["jb"])("interaction-vertical-align",e)},setNumberAutoRound:function(t,e){t.setting.numberAutoRound=e,Object(c["jb"])("number-auto-round",e?"1":"0")},setSettingColor:function(t,e){var n=t.setting.color;(e<0||e>=n.items.length)&&(e=0),n.current=e,Object(c["jb"])("colortype",e)},setCurArtboardVer:function(t,e){var n;if(Object(l["k"])(e)){var i=e.verId,r=e.noTipWhenCurrentVer,o=t.curArtboard,a=t.curArtboard,s=a.artboard,c=a.historyArtboards;if(i>0&&((null===(n=o.artboardVerData)||void 0===n?void 0:n.lastVersionId)===i||null==o.artboardVerData&&(null===s||void 0===s?void 0:s.lastVersionId)===i))!0!==r&&this.commit("Tip_showTextTip",{text:"当前画板版本已经是#".concat(i)});else{if(!c)return this.commit("Tip_showTextTip",{text:"无法切换到画板版本#".concat(i,",画板版本信息尚未加载")});var u;if(o.artboard.lastVersionId===i)u=null;else{var d=null===c||void 0===c?void 0:c.find((function(t){var e;return(null!==(e=null===t||void 0===t?void 0:t.lastVersionId)&&void 0!==e?e:t.verId)===i}));if(!d)return void this.commit("Tip_showTextTip",{text:"画板版本#".concat(i," 不存在,可能已经被删除")});u=d}o.isError=!1,o.isFetching=!1,o.isLoaded=!1,o.loadErrMsg=null,o.artboardVerData=u,this.commit("Tip_showTextTip",{text:"已切换到画板版本#".concat(i)})}}},curArtboard:function(t,e){var n;e||(e={});var i=e,r=i.artboard,o=i.extral;Object(l["k"])(r)||(r=null);var a=!1;if(null!==(n=r)&&void 0!==n&&n.artboardVerData&&(r.artboardVerData=null,a=!0,r.isError=!1,r.isFetching=!1,r.isLoaded=!1,r.loadErrMsg=null),t.curArtboard!==r){if(r){var s,u=t.filterDocumentGuid,d=null!==(s=r.artboard)&&void 0!==s?s:{},h=d.docGuid,f=d.pageGuid,m=d.topSectionId;u&&h!==u&&f!==u&&m!==u&&this.commit("setFilterDocumentGuid",null)}if(t.curArtboard=r,t.curArtboardExtral=null!==o&&void 0!==o?o:null,t.curNode=null,t.artboardDetail.interactionSet.overlayArtboards.splice(0),dr(t),null!=r&&r.isLoaded){var v=r.artboard;if(Object(l["k"])(v)){var p=v.mlConfig;if(Object(l["k"])(p)&&"number"===typeof p.platform){var b=Object(c["B"])(v.docGuid,p.platform);this.commit("setPlatform",b)}var g=Object(c["N"])(v.docGuid);this.commit("setUnitTemplate",g)}}}else a&&this.commit("Tip_showTextTip",{text:"已切换到画板版本#".concat(r.artboard.lastVersionId)})},curNode:function(t,e){Object(l["k"])(e)||(e=null),t.curNode=e,dr(t)},clickedNode:function(t,e){t.clickedNode=e},enterNode:function(t,e){t.enterNode=e},enterArtboard:function(t,e){t.enterArtboard=e},setCloudNickName:function(t,e){t.cloudNickName=e},setMyState:function(t,e){Object(l["k"])(e)&&(t.permission=e.permission,t.cloudNeedLogin=e.needLogin,t.cloudIsLogin=e.isLogin,t.cloudNickName=e.nickName,t.cloudUserEmail=e.email,t.cloudUserId=e.userId,t.cloudUserIsDesigner=e.isDesigner,t.cloudUserIsOwner=!!e.isOwner,c["O"].userKey=t.cloudUserKey=e.userKey,t.cloudName=e.cloudName,c["O"].resourceHost=t.resourceHost=e.resourceHost,c["O"].cloudBaseInfoTime=t.cloudBaseInfoTime=e.cloudBaseInfoTime,c["O"].resourceState=t.resourceState=e.resourceState,t.cloudVersion=e.cloudVersion)},setUserLogout:function(t){t.cloudIsLogin=!1,t.cloudNickName="",t.cloudUserEmail="",t.cloudUserId=0,t.cloudUserIsDesigner=!1,t.cloudUserIsOwner=!1,c["O"].userKey=t.cloudUserKey=""},setDocument:function(t,e){var n=e.documentName,i=e.documentArtboards,r=e.documentGuid,o=e.config,a=e.permission,s=e.inCloudMode,u=e.cloud,d=e.documents,h=e.cloudNeedLogin,f=e.cloudIsLogin,m=e.cloudNickName,v=e.cloudUserEmail,p=e.cloudUserId,b=e.cloudUserIsDesigner,g=e.cloudUserIsOwner,w=e.cloudUserKey,y=e.cloudName,k=e.resourceHost,C=e.cloudBaseInfoTime,x=e.resourceState,S=e.cloudKey,T=e.cloudVersion;t.documentArtboards=i,t.documents=d,t.sortDocumentsWithSketchDocument=Kn(d),t.documentName=n,t.documentGuid=r,t.config=o,t.permission=a,t.cloudNeedLogin=h,t.cloudIsLogin=f,t.cloudNickName=m,t.cloudUserEmail=v,t.cloudUserId=p,t.cloudUserIsDesigner=b,t.cloudUserIsOwner=g,c["O"].userKey=t.cloudUserKey=w,t.cloudName=y,c["O"].resourceHost=t.resourceHost=k,c["O"].cloudBaseInfoTime=t.cloudBaseInfoTime=C,c["O"].resourceState=t.resourceState=x,t.cloudKey=S,t.cloudVersion=T,t.inCloudMode=s,c["O"].cloudVersion=T;var O=t.cloud;Object(l["k"])(u)&&Object.keys(u).forEach((function(t){O[t]=u[t]})),this.commit("setRenderDocuments");var I=Object(c["B"])(r,o.platform);this.commit("setPlatform",I);var A=Object(c["N"])(r);this.commit("setUnitTemplate",A),lr()}},actions:{}});function vr(){var t=mr.state.artboardDetail.interactionSet,e=Object(c["F"])("interaction.background",!1)||"#f5f5f5";t.backgroundColor!==e&&(t.backgroundColor=e)}function pr(){var t=parseInt(Object(c["F"])("colortype",!1));if(!(isNaN(t)||!isFinite(t)||t<0)){var e=mr.state.setting.color;t<e.items.length&&(e.current=t)}}function br(){var t="1"===Object(c["F"])("number-auto-round",!1);t&&(mr.state.setting.numberAutoRound=!0)}function gr(){var t=+Object(c["F"])("interaction-vertical-align",!1);switch(t){case a["H"].Bottom:case a["H"].Top:case a["H"].Middle:break;default:t=a["H"].Middle;break}mr.state.artboardDetail.interactionSet.verticalAlign=t}function wr(){var t=+Object(c["F"])("export-box-background",!1);switch(t){case a["ab"].Black:case a["ab"].Transparent:break;default:t=a["ab"].Transparent}t!==a["ab"].Transparent&&(mr.state.setting.exportBoxBackground=t)}function yr(){var t=Object(c["F"])("list-interaction-line");switch(t){case"0":mr.state.artboardShowInteractionLine=!1;break;default:mr.state.artboardShowInteractionLine=!0;break}}function kr(){var t=Object(c["F"])("list-view-mode");switch(t){case"0":mr.state.artRenderInCanvasMode=!1;break;default:mr.state.artRenderInCanvasMode=!0;break}}function Cr(){var t=Object(c["F"])("art-in-list");switch(t){case"1":mr.state.artShowInListMode=!0;break;case"0":mr.state.artShowInListMode=!1;break;default:mr.state.artShowInListMode=!1,mr.state.noviceGuide.artShowInListMode=!0;break}}function xr(){var t=Object(c["F"])("art-list-map");switch(t){case"0":mr.state.showArtListMap=!1;break;default:mr.state.showArtListMap=!0;break}}function Sr(){var t=Object(c["F"])("interaction.pcdeviceset",!0);if(Object(l["k"])(t)){!t.hasBangs||"iPhone 14 Pro Max"!==t.name&&"iPhone 14 Pro"!==t.name||(t.hasBangs=!1,t.iosDynamicIsland=!0);var e=mr.state.artboardDetail.interactionSet.pcDeviceSet;Object.keys(e).forEach((function(n){var i=t[n];void 0!==i&&(e[n]=i)}))}else{var n=zi;n&&mr.commit("setPCDeviceSet",zi)}}function Tr(){var t=Object(c["F"])("point-comment-showalways");switch(t){case"0":mr.state.pointCommentShowAlways=!1;break;default:mr.state.pointCommentShowAlways=!0;break}}function Or(){var t=Object(c["F"])("slice-border-line-hide");switch(t){case"1":mr.state.sliceBorderLineHide=!0;break;default:mr.state.sliceBorderLineHide=!1;break}}function Ir(){var t=mr.state.mobileInteraction.listConfig,e=Object(c["F"])("m-interaction-list-config",!0);Object(l["k"])(e)||(e={}),t.sortType=function(t){switch(t){case a["n"].ArtboardRect:case a["n"].Date:return t;default:return a["n"].Name}}(e.sortType),t.orderDesc=!!e.orderDesc,t.renderType=function(t){switch(t){case a["o"].Artboard:return t;default:return a["o"].All}}(e.renderType)}function Ar(){var t;function e(){var n=mr.state,i=n.webViewHidden,r=n.webViewFocus,o=document.hasFocus();o!==r&&mr.commit("setWebViewFocus",o),clearTimeout(t),i||setTimeout(e,200)}document.addEventListener("visibilitychange",(function(){var t=mr.state.webViewHidden,n=Object(c["Y"])();t!=n&&mr.commit("setWebViewHidden",n),e()}),!1),e()}function Fr(){var t=mr.state.cloudListSort,e=Object(c["F"])("cloudlist-item-sort",!0);Object(l["k"])(e)||(e={}),t.sortType=function(t){switch(t){case a["n"].ArtboardRect:case a["n"].Date:return t;default:return a["n"].Name}}(e.sortType),t.orderDesc=!!e.orderDesc}function jr(){function t(){var t=mr.state.winRect;t.width=window.innerWidth,t.height=window.innerHeight}window.addEventListener("resize",t),t()}function _r(){}function Mr(){mr.state.beginnerGuide.steps=or.steps}var Lr=mr;function Pr(){Ar(),vr(),cr(),pr(),br(),wr(),kr(),Cr(),xr(),Sr(),yr(),Tr(),Or(),Ir(),gr(),jr(),_r(),Mr()}var Dr=function(){var t=this,e=t._self._c;return e("section",{ref:"main",attrs:{id:"main"}},[!t.cloudNeedLogin||t.cloudIsLogin?e("div",{staticClass:"loading",class:{on:!t.allArtboardLoadChecked,local:!t.inCloudMode}},[t._v("正在加载画板数据中("+t._s(t.artboardLoadProgressText)+"),请稍后...")]):t._e(),t.cloudNeedLogin&&!t.cloudIsLogin?e("CloudNeedLoginTip"):t.allArtboardLoadChecked?[e("Header"),e("main",[e("FolderNav"),t.cloudFolderNotFound?e("EmptyData",{attrs:{text:t.cloudFolderErrorText,showLoginBtn:t.cloudFolderInSpecify}}):t.permission?t.isEmptyFolder?e("EmptyData",{attrs:{text:t.emptyText}}):t.inNetDiskFileMode?e("NetDiskFileMain"):t.inArtboardMode?e("ArtboardInfo"):t._e():e("Authority",{attrs:{include:!0}}),e("keep-alive",[t.cloudFolderNotFound||!t.permission||t.isEmptyArtboardData||t.inArtboardMode||t.inNetDiskFileMode||t.artShowInListMode?t._e():e("ArtboardList")],1),e("InOutputTip"),e("ArtboardListItemMenu")],1)]:t._e(),t.inNetDiskFileMode?t._e():e("SafariWebpTip"),t.inNetDiskFileMode?t._e():e("ImageViewer"),e("Tip"),e("AutomaticSync"),e("ChangeArtboardsTip"),e("BeginnerGuide")],2)},Nr=[],Er=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"beginner-guide"},[e("Mark",{attrs:{rect:t.maskRect}}),e("div",{staticClass:"guide-box",class:t.guideBoxClass,style:t.guidBoxStyle},[t.currentStep===t.enumSteps.GlobalCloudFolderBoxMenu?e("div",{staticClass:"guide-popcloudfolder"},[e("div",{staticClass:"bg"}),t._m(0)]):t.currentStep===t.enumSteps.HelperMenu?e("div",{staticClass:"guide-helper"},[t._m(1)]):t.currentStep===t.enumSteps.ArtListMap?e("div",{staticClass:"guide-artlistmap"},[t._m(2)]):t.currentStep===t.enumSteps.ArtboardModeMenu?e("div",{staticClass:"guide-artrendermode"},[t.artShowInListMode?[e("div",{staticClass:"bg-art"}),t._m(3)]:[e("div",{staticClass:"bg-list"}),t._m(4)]],2):t.currentStep===t.enumSteps.SliceBorderLineMenu?e("div",{staticClass:"guide-slide-borderline"},[e("div",{staticClass:"bg"}),t._m(5)]):t.currentStep===t.enumSteps.ArtboardDevMode?e("div",{staticClass:"guide-artboard-dev"},[e("div",{staticClass:"bg"}),t._m(6)]):t._e(),e("div",{staticClass:"btns"},[e("div"),e("div",{staticClass:"btn",on:{click:function(e){return t.clickHideCurrentStep()}}},[t._v("我知道了")])])])],1):t._e()},Rr=[function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("显示文件夹树")]),e("dd",[t._v("点击可显示文件夹树，快速浏览所有文件夹或内容，快速搜索特定文件或文件夹。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("快捷操作指南")]),e("dd",[t._v("点击此处可查看常用快捷键和操作方法，帮助您更高效地使用标记狮。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("画板地图")]),e("dd",[t._v("点击此处可在菜单中重新开启画板地图。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("画布视图")]),e("dd",[t._v("点击按钮可切换为以画板为主的画布视图，与设计软件中画板位置一致。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("宫格视图")]),e("dd",[t._v("点击按钮可切换为宫格视图，画板、文件夹和文件整齐排列，方便浏览和管理文件。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("隐藏切图虚线框")]),e("dd",[t._v("点击更多按钮可隐藏切图虚线框，隐藏后[标注]模式下切图图层边缘不会再标识虚线框。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("标记画板为待开发")]),e("dd",[t._v("选中画板右键单击可将画板标记为[待开发]状态、便于快速找到所需画板。")])])}],Vr=function(){var t=this,e=t._self._c;return e("svg",{staticStyle:{"pointer-events":"none"},attrs:{width:t.winRect.width,height:t.winRect.height,viewBox:t.viewBox}},[e("defs",[e("mask",{attrs:{id:"hole"}},[e("rect",{attrs:{width:"100%",height:"100%",fill:"white"}}),e("rect",{attrs:{x:t.rect.x,y:t.rect.y,width:t.rect.width,height:t.rect.height,rx:"4",ry:"4",fill:"black"}})])]),e("rect",{attrs:{width:"100%",height:"100%",fill:"rgba(0,0,0,0.6)",mask:"url(#hole)"}})])},Br=[],Hr={computed:{viewBox:function(){var t=this.winRect;return"0 0 ".concat(t.width," ").concat(t.height)},winRect:function(){return this.$store.state.winRect}},props:{rect:Object}},Ur=Hr,Gr=n("2877"),Wr=Object(Gr["a"])(Ur,Vr,Br,!1,null,null,null),$r=Wr.exports,zr={components:{Mark:$r},methods:{clickHideCurrentStep:function(){or.finishStep(this.currentStep),this.beginnerGuide.steps=or.steps}},computed:{guidBoxStyle:function(){var t=this.maskRect,e=t.x,n=t.y,i=t.width,r=t.height,o=t.direction,s=this.winRect,c=10;n+=r+c;var l,u,d=25;switch(o){case a["j"].TopRight:case a["j"].Right:l=Math.round(s.width-e-i/2-d)+"px";break;case a["j"].Left:u=e+i+c+"px",n-=r+d-c;break;default:l=void 0,u=e+Math.round(i/2-d)+"px";break}return{top:n+"px",left:u,right:l}},guideBoxClass:function(){var t=this.visible,e=this.maskRect.direction;if(!t)return null;switch(e){case a["j"].TopRight:return"in-topright";case a["j"].Left:return"in-left";case a["j"].Right:return"in-right";default:return null}},visible:function(){var t=this.maskRect;return t.width>0&&t.height>0},maskRect:function(){var t;return null!==(t=this.currentRect)&&void 0!==t?t:{x:0,y:0,width:0,height:0,direction:a["j"].TopLeft}},beginnerGuide:function(){return this.$store.state.beginnerGuide},steps:function(){return this.beginnerGuide.steps},currentStep:function(){var t=this.steps,e=this.beginnerGuide.rects,n=this.orderStepList,i=n.find((function(n){if((t&n)===n)return!1;var i=e[n];return!(!i||0===i.width||0===i.height)}));return null!==i&&void 0!==i?i:a["k"].None},currentRect:function(){var t,e=this.beginnerGuide.rects,n=this.currentStep;return n===a["k"].None?null:null!==(t=e[n])&&void 0!==t?t:null},enumSteps:function(){return a["k"]},winRect:function(){return this.$store.state.winRect}},data:function(){return{orderStepList:a["k"].getSortValues()}},created:function(){}},Yr=zr,Xr=(n("87fc"),Object(Gr["a"])(Yr,Er,Rr,!1,null,"64734533",null)),Kr=Xr.exports,qr=function(){var t=this,e=t._self._c;return t.visible?e("div"):t._e()},Jr=[],Qr={notSupportRecycle:function(t){return Object(c["n"])("6.0.7890.0",t)},notSupportNetDiskFileVersion:function(t){return Object(c["n"])("6.0.7890.0",t)},notSupportSourceFilePreviewImg:function(t){return Object(c["n"])("5.2.6290.0",t)},notSupportAiPrompt:function(t){return Object(c["n"])("5.3.6840.0",t)},notSupportRecentData:function(t){return!Object(c["n"])(t,"7.0.8222.0")},notSupportSourceFile:function(t){return Object(c["n"])("1.2.1989.0",t)},notSupportArtboardComment:function(t){return Object(c["n"])("1.3.2470.0",t)},notSupportGetFolders:function(t){return Object(c["n"])("1.5.2772.0",t)},notSupportNetDisk:function(t){return Object(c["n"])("1.6.3656.0",t)},notSupportInteraction:function(t){return Object(c["n"])("1.6.3656.0",t)},notSupportWebItemSearch:function(t){return Object(c["n"])("1.6.3656.0",t)},notSupportPublicCloudShowComment:function(t){return Object(c["n"])("1.6.3656.0",t)},notSupportPdfResource:function(t){return Object(c["n"])("5.1.5868.0",t)},notSupportSetFolderColor:function(t){return Object(c["n"])("2.1.4376.0",t)},notSupportFolderLog:function(t){return Object(c["n"])("2.1.4376.0",t)},notSupportFolderSpecifyMember:function(t){return Object(c["n"])("3.0.5050.0",t)},notSupportNetDiskFileWebUpload:function(t){return Object(c["n"])("3.0.5050.0",t)},supportPreviewButNeedAddTypePage:function(t){return Object(c["n"])(t,"6.0.7890")&&Object(c["n"])("6.0.7891",t)},supportPreviewAddTypePage:function(t){return Object(c["n"])(t,"6.0.7890")},previewTxtNeedAddTypePage:function(t){return Object(c["n"])("6.0.7890",t)},supportPreviewAnyFile:function(){return!1},supportRecent:function(t){return Object(c["n"])(t,"6.0.7890.1")},supportDocxPreview:function(t){var e=Object(c["n"])(t,"6.0.7890"),n=!!e&&Object(c["n"])("6.0.7891",t);return{support:e,needAddTypePage:n}},supportPreviewHD:function(t){return Object(c["n"])(t,"6.0.7891")}},Zr=1e4,to={methods:{autoGetCurrentFolderFavoriteStatusLater:function(){clearTimeout(this.autoGetCurrentFolderFavoriteStatusHandler),this.autoGetCurrentFolderFavoriteStatusHandler=setTimeout(this.autoGetCurrentFolderFavoriteStatus,500)},autoGetCurrentFolderFavoriteStatus:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,s,c,l,u,d,h,f,m,v,p,b;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.cloudIsLogin,r=t.documentArtboards,o=t.cloudCurrentFolderId,s=t.autoGetCurrentFolderFavoriteStatusHandler,c=t.inCloudViewerMode,l=t.notSupportArtboardStatusVersion,u=t.cloudSubFolders,clearTimeout(s),!l){e.n=1;break}return e.a(2);case 1:if(c&&(0!==r.length||0!==u.length)){e.n=2;break}return e.a(2);case 2:if(!t.webViewHidden&&t.webViewFocus){e.n=3;break}return e.a(2);case 3:if(d={status:a["i"].None,recentTimes:0},h={status:a["q"].None,recentTimes:0},n){e.n=4;break}return u.forEach((function(t){t.customStatus=h.status,t.customStatusUpdateTimes=h.recentTimes})),r.forEach((function(t){t.customStatus=d.status,t.customStatusUpdateTimes=d.recentTimes})),e.a(2);case 4:return e.p=4,e.n=5,t.getUserFolderRecentsAsync(o,!0,"auto-get-user-folder-recents");case 5:f=e.v,m=f.favArtboards,v=f.favFolders,p=new Set,b=new Set,u.forEach((function(t){var e,n=null!==t&&void 0!==t?t:{},i=n.id;if(i){var r=null!==(e=v[i])&&void 0!==e?e:h;r.status===t.customStatus&&t.customStatusUpdateTimes===r.recentTimes||(t.customStatus=r.status,t.customStatusUpdateTimes=r.recentTimes,p.add(i))}})),r.forEach((function(t){var e,n,i=null!==(e=null===t||void 0===t?void 0:t.artboard)&&void 0!==e?e:{},r=i.id,o=i.cid;if(null!==o&&void 0!==o||(o=r),o){var a=null!==(n=m[o])&&void 0!==n?n:d;a.status===t.customStatus&&t.customStatusUpdateTimes===a.recentTimes||(t.customStatus=a.status,t.customStatusUpdateTimes=a.recentTimes,b.add(o))}})),p.size>0&&t.$store.commit("refreshRecents",a["Y"].FavoriteFolder),b.size>0&&t.$store.commit("refreshRecents",a["Y"].FavoriteArtboard),e.n=7;break;case 6:e.p=6,e.v;case 7:return e.p=7,t.autoGetCurrentFolderFavoriteStatusHandler=setTimeout((function(){t.autoGetCurrentFolderFavoriteStatus()}),Zr),e.f(7);case 8:return e.a(2)}}),e,null,[[4,6,7,8]])})))()},autoGetFolderPrecis:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(clearTimeout(t.autoGetFolderPrecisHandler),t.inCloudMode){e.n=1;break}return e.a(2);case 1:if(!t.cloudFolderNotFound){e.n=2;break}return e.a(2);case 2:if(!t.cloudIsLogin){e.n=3;break}return e.a(2);case 3:if(!t.inNetDiskFileMode){e.n=4;break}return e.a(2);case 4:if(e.p=4,!t.webViewHidden&&t.webViewFocus){e.n=5;break}return e.a(2);case 5:return t.lastAutoGetTime=Date.now(),e.n=6,t.getFolderPrecis(t.cloudCurrentFolderId,t.folderUpdateTimes);case 6:e.n=8;break;case 7:e.p=7,e.v;case 8:return e.p=8,t.autoGetFolderPrecisHandler=setTimeout((function(){t.autoGetFolderPrecis()}),Zr),e.f(8);case 9:return e.a(2)}}),e,null,[[4,7,8,9]])})))()},autoCheckCloudNotify:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,c,u,d,h,f;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(clearTimeout(t.autoCheckCloudNotifyHandler),t.inCloudMode&&t.cloudIsLogin){e.n=1;break}return e.a(2);case 1:if(e.p=1,!t.webViewHidden&&t.webViewFocus){e.n=2;break}return e.a(2);case 2:return o=t.cloudKey,a=t.userNotifyCloudList[o],s=0,c=null!==(n=t.sysTipIds[o])&&void 0!==n?n:0,u=null!==(r=t.curArtboardId)&&void 0!==r?r:0,a&&(s=null!==(d=null===(h=a.list[0])||void 0===h?void 0:h.id)&&void 0!==d?d:0),t.lastAutoGetTime=Date.now(),e.p=3,e.n=4,t.getCloudNotifies(s,u,t.cloudCurrentFolderId,t.folderUpdateTimes);case 4:if(f=e.v,Object(l["i"])(f)){e.n=5;break}return e.a(2);case 5:if(f=f.filter((function(t){return t.id>c&&!t.readed})),0!==f.length){e.n=6;break}return e.a(2);case 6:e.n=8;break;case 7:e.p=7,e.v;case 8:e.n=10;break;case 9:e.p=9,e.v;case 10:return e.p=10,t.checkUpdateCloudUsers(),t.autoCheckCloudNotifyHandler=setTimeout((function(){t.autoCheckCloudNotify()}),Zr),e.f(10);case 11:return e.a(2)}}),e,null,[[3,7],[1,9,10,11]])})))()},checkUpdateCloudUsers:function(){var t=this;clearTimeout(this.checkUpdateCloudUsersHandler);var e=this.cloudUsersByCloudData,n=e.userListState,o=e.needUpdate;if(o){var a=Object(c["F"])("getcloudusers",!0);Object(l["k"])(a)||(a={});var s=a,u=s.time,d=s.state;d===n&&u>0&&Math.abs(Date.now()-u)<18e4||(this.checkUpdateCloudUsersHandler=setTimeout(Object(r["a"])(Object(i["a"])().m((function e(){var r,o,a,s,u;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return Object(c["jb"])("getcloudusers",{time:Date.now(),state:n}),e.p=1,e.n=2,t.cryptoMarklionWeb2("getcloudusers",{userListState:n},1e4);case 2:r=e.v,Object(l["k"])(r.data)&&(o=r.data,a=o.cloudUserListNeedUpdate,s=o.cloudUserListState,u=o.cloudUserListTimes,t.updateCloudUsersByCloud({needUpdate:a,userListState:s,times:u})),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}}),e,null,[[1,3]])}))),100))}},autoResetWebViewStateTimes:function(){var t=this;clearTimeout(this.autoResetWebViewStateTimesHandler);try{if(this.webViewHidden)return;var e=this.webViewStateTimes,n=Date.now(),i=Math.abs(n-e),r=3e5;i>=r&&(this.$store.state.webViewStateTimes=n)}catch(o){}finally{this.autoResetWebViewStateTimesHandler=setTimeout((function(){t.autoResetWebViewStateTimes()}),Zr)}}},computed:{autoGetFolderPrecisKey:function(){return this.automaticSync.autoGetFolderPrecisKey},automaticSync:function(){return this.$store.state.automaticSync},notSupportArtboardStatusVersion:function(){return Qr.notSupportAiPrompt(this.cloudVersion)},folderUpdateTimes:function(){return this.inCloudMode?this.$store.state.cloud.folderUpdateTimes:0},cloudUsersByCloudData:function(){var t;return null!==(t=this.$store.state.userNotify.cloudUsersByCloud[this.cloudKey])&&void 0!==t?t:{}},sysTipIds:function(){return this.$store.state.userNotify.sysTipIds},userNotifyCloudList:function(){return this.$store.state.userNotify.cloudList}},watch:{autoGetFolderPrecisKey:function(t){t>0&&(this.automaticSync.autoGetFolderPrecisKey=0,this.autoGetFolderPrecisHandler=setTimeout(this.autoGetFolderPrecis,1e3),this.autoCheckCloudNotifyHandler=setTimeout(this.autoCheckCloudNotify,1e3))},webViewFocus:function(t){if(t){var e=Date.now()-this.lastAutoGetTime;e>=Zr&&(this.autoCheckCloudNotify(),this.autoGetFolderPrecis(),this.autoGetCurrentFolderFavoriteStatusLater(),this.autoResetWebViewStateTimes())}},webViewHidden:function(t){if(!t){var e=Date.now()-this.lastAutoGetTime;e>=Zr&&(this.autoCheckCloudNotify(),this.autoGetFolderPrecis(),this.autoGetCurrentFolderFavoriteStatusLater(),this.autoResetWebViewStateTimes())}},cloudIsLogin:function(){this.autoCheckCloudNotify(),this.autoGetFolderPrecis(),this.autoGetCurrentFolderFavoriteStatusLater()}},data:function(){return{visible:!1,checkUpdateCloudUsersHandler:0,autoCheckCloudNotifyHandler:0,autoGetFolderPrecisHandler:0,lastAutoGetTime:0,autoGetCurrentFolderFavoriteStatusHandler:0,autoResetWebViewStateTimesHandler:0}},beforeDestroy:function(){clearTimeout(this.autoCheckCloudNotifyHandler),clearTimeout(this.autoGetFolderPrecisHandler),clearTimeout(this.checkUpdateCloudUsersHandler),clearTimeout(this.autoGetCurrentFolderFavoriteStatusHandler),clearTimeout(this.autoResetWebViewStateTimesHandler)},created:function(){this.autoCheckCloudNotifyHandler=setTimeout(this.autoCheckCloudNotify,1e3),this.autoGetFolderPrecisHandler=setTimeout(this.autoGetFolderPrecis,1e3),this.autoResetWebViewStateTimesHandler=setTimeout(this.autoResetWebViewStateTimes,1e4),this.autoGetCurrentFolderFavoriteStatusLater()}},eo=to,no=Object(Gr["a"])(eo,qr,Jr,!1,null,null,null),io=no.exports,ro=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"change-artboards-tip"},[e("div",{staticClass:"box"},[t._v("发现"+t._s(t.changeArtboardsCount)+"个画板有更新"),e("a",{staticClass:"btn-review-log",attrs:{href:"javascript:;"},on:{click:t.clickShowLog}},[t._v("查看日志")]),e("a",{staticClass:"btn-close",attrs:{href:"javascript:;"},on:{click:t.clearChangeArtboards}})])]):t._e()},oo=[],ao={methods:{clickShowLog:function(){var t=this;requestAnimationFrame((function(){t.folderPrecis.showArtboardLogNow=Date.now()})),this.clearChangeArtboards()},clearChangeArtboards:function(){this.changeArtboards.splice(0)}},computed:{visible:function(){return this.changeArtboardsCount>0},changeArtboardsCount:function(){return this.changeArtboards.length},folderPrecis:function(){return this.$store.state.folderPrecis},changeArtboards:function(){return this.folderPrecis.changeArtboards}}},so=ao,co=(n("9fec"),Object(Gr["a"])(so,ro,oo,!1,null,"3cef9beb",null)),lo=co.exports,uo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-main"},[t.EnumNetDiskFileType.Pdf===t.fileType?e("ViewPdf"):t.EnumNetDiskFileType.Media===t.fileType?e("ViewMedia"):t.EnumNetDiskFileType.Image===t.fileType?e("ViewImage"):t.EnumNetDiskFileType.Lottie===t.fileType?e("ViewLottie"):t.isDocx?e("ViewDocx"):t.isMarkdown?e("ViewMarkdown"):t.isTextFile?e("ViewText"):e("ViewBase")],1)},ho=[],fo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-docx"},[e("ImageViewer",{attrs:{canClose:!0}}),t.fetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[e("b",[t._v("文档打开中...")]),e("span",{domProps:{textContent:t._s("".concat(t.fetchData.current,"/").concat(t.fetchData.total))}})]),e("div",{staticClass:"percentage"},[e("p",{style:{width:t.fetchData.percentage}})])])]):t.isError?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v(t._s(t.errorText))])]):t._e(),e("div",{ref:"container",staticClass:"container"})],1)},mo=[],vo=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"image-viewer"},[e("div",{staticClass:"header"},[e("div",{staticClass:"control"},[e("div",{staticClass:"btn-prev",class:{disable:0===t.imgList.length||t.currentIndex<1},on:{click:t.clickPrev}}),e("ScaleControl",{attrs:{type:t.EnumScaleType.ImageViewer}}),e("div",{staticClass:"btn-next",class:{disable:0===t.imgList.length||t.currentIndex>=t.imgList.length-1},on:{click:t.clickNext}}),t.canClose?e("div",{staticClass:"line"}):t._e(),t.canClose?e("div",{staticClass:"btn-close",attrs:{title:"关闭 (Esc)"},on:{click:t.clickHide}}):t._e()],1)]),e("div",{staticClass:"main"},[e("ZoomContainer",{attrs:{type:t.EnumScaleType.ImageViewer}})],1)]):t._e()},po=[],bo=function(){var t=this,e=t._self._c;return e("section",{staticClass:"scale-control",class:{light:t.lightTheme}},[e("a",{staticClass:"btn-zoom btn-zoom-out",attrs:{href:"javascript:;"},on:{click:function(e){return t.setScaleZoomOut()}}}),e("span",{staticClass:"text"},[e("a",{attrs:{href:"javascript:;",title:"设置缩放为100%"},on:{click:function(e){return t.setScale(1)}}},[t._v(t._s(t.scaleText))])]),e("a",{staticClass:"btn-zoom btn-zoom-in",attrs:{href:"javascript:;"},on:{click:function(e){return t.setScaleZoomIn()}}}),e("a",{staticClass:"btn-scene-reset",attrs:{href:"javascript:;",title:"重置场景比例和偏移信息"},on:{click:t.clickResetScene}})])},go=[],wo=(n("a9e3"),n("b680"),{methods:{clickResetScene:function(){switch(this.type){case a["V"].ArtboardList:case a["V"].ArtboardDetail:this.$store.commit("setScale",{reset:!0});break;case a["V"].ImageViewer:this.resetImageViewerScale();break}},quickKey:function(t){var e=t.code||t.key;switch(e){case"-":case"Minus":var n=t.ctrlKey||t.metaKey;n&&(this.setScaleZoomOut(),t.preventDefault());break;case"=":case"Equal":var i=t.ctrlKey||t.metaKey;i&&(this.setScaleZoomIn(),t.preventDefault());break}},setScaleZoomOut:function(){var t=this.scale,e=Math.max(.3*t,.25);e=Math.min(2,e);var n=t-e;this.setScale(Object(c["G"])(t,n))},setScaleZoomIn:function(){var t=this.scale,e=Math.max(.3*t,.25);e=Math.min(2,e);var n=t+e;this.setScale(Object(c["G"])(t,n))},setScale:function(t){var e=this.type,n=this.scale;switch(t=Object(c["w"])(e===a["V"].ArtboardList,t),e){case a["V"].ArtboardList:this.setScaleList(t),this.resetScaleSceneCenter(t,n);break;case a["V"].ArtboardDetail:this.setScaleArtboard(t),this.resetScaleSceneCenter(t,n);break;case a["V"].ImageViewer:this.setScaleImageViewer(t);break}},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})}},computed:{lightTheme:function(){return this.type===a["V"].ImageViewer},EnumScaleType:function(){return a["V"]},scale:function(){switch(this.type){case a["V"].ArtboardList:return this.scaleList;case a["V"].ArtboardDetail:return this.scaleArtboard;case a["V"].ImageViewer:return this.scaleImageViewer;default:return 0}},scaleText:function(){var t=m["b"].mul(this.scale,100).toFixed(1);return-1!=t.indexOf(".0")&&(t=t.replace(".0","")),t+"%"}},created:function(){window.addEventListener("keydown",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey)},props:{type:Number}}),yo=wo,ko=(n("6bdc"),Object(Gr["a"])(yo,bo,go,!1,null,"7fbfd448",null)),Co=ko.exports,xo=function(){var t=this,e=t._self._c;return e("section",{ref:"$info",staticClass:"zoom-container",on:{dragstart:function(t){t.preventDefault()},click:function(e){return e.target!==e.currentTarget?null:t.clickZoomContainer(e)},mousedown:function(e){return t.mousedownZoomContainer(e)}}},[t.inCloudMode&&t.inArtboardInfoMode?e("DrawView",{attrs:{sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneX:t.sceneX,sceneY:t.sceneY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY,scale:t.scale}}):t._e(),t.cloudArtInfoMode?e("section",{staticClass:"zoom-box info-canvas"},[e("CanvasModeArtboardInfo",{attrs:{dragging:t.dragging,scale:t.scale,sceneX:t.sceneX,sceneY:t.sceneY,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneScaleKeepX:t.sceneScaleKeepX,sceneScaleKeepY:t.sceneScaleKeepY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY}})],1):t._e(),e("section",{staticClass:"zoom-box",style:t.zoomBoxOffset,on:{click:function(e){return e.target!==e.currentTarget?null:t.clickZoomContainer(e)}}},[t.cloudArtListMode?e("CanvasModeArtboardList",{ref:"$instance",attrs:{dragging:t.dragging,scale:t.scale,sceneX:t.sceneX,sceneY:t.sceneY,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneScaleKeepX:t.sceneScaleKeepX,sceneScaleKeepY:t.sceneScaleKeepY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY}}):t.type===t.EnumScaleType.ArtboardList?e("ArtboardList",{ref:"$instance",attrs:{dragging:t.dragging,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight}}):t.inArtboardInfoMode?e("ArtboardInfo",{ref:"$instance",attrs:{dragging:t.dragging,scaling:t.scaling,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight}}):t.imageViewboxUseCanvas?e("ViewerBoxCanvas",{ref:"$instance",attrs:{sceneX:t.sceneX,sceneY:t.sceneY,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight},on:{setConfig:t.setConfig}}):t.inImageViewerMode&&!t.imageViewboxUseCanvas?e("ViewerBox",{ref:"$instance",attrs:{sceneX:t.sceneX,sceneY:t.sceneY,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight},on:{setConfig:t.setConfig}}):t._e()],1),t.inCloudMode&&t.inArtboardInfoMode?e("CommentPoints",{attrs:{sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneX:t.sceneX,sceneY:t.sceneY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY,scale:t.scale*t.calcArtScale},on:{setConfig:t.setConfig}}):t._e(),t.type===t.EnumScaleType.ArtboardList&&t.showArtListMap?e("ArtboardPreviewsMap",{attrs:{cloudArtListMode:t.cloudArtListMode,sceneX:t.sceneX,sceneY:t.sceneY,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneScale:t.scale},on:{setRectToCenter:t.setRectToCenter}}):t._e()],1)},So=[],To=function(){var t=this,e=t._self._c;return e("div",{ref:"box",staticClass:"artboard-previews",style:t.canvasStyle,attrs:{"no-wheel":"1"},on:{mousedown:function(e){return e.stopPropagation(),t.mousedownCanvas.apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("canvas",{ref:"canvas",attrs:{width:t.canvasWidth,height:t.canvasHeight}}),e("canvas",{ref:"canvasRect",attrs:{width:t.canvasWidth,height:t.canvasHeight}}),e("ContextMenu",{ref:"contextMenu"},[e("dl",{staticClass:"contextmenu-box",on:{mousedown:function(t){t.stopPropagation()}}},[e("dd",{on:{click:t.clickHideArtListMap}},[t._v("关闭地图")])])])],1)},Oo=[],Io=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"contextmenu",staticClass:"r-contextmenu",style:t.menuStyle},[t._t("default")],2):t._e()},Ao=[],Fo={methods:{resetOffset:function(){if(this.visible){var t=window,e=t.innerWidth,n=t.innerHeight,i=this.$refs.contextmenu;if(i){var r=i.getBoundingClientRect(),o=e-r.width-3,a=n-r.height-3;this.clientX>o&&(this.clientX=o),this.clientY>a&&(this.clientY=a)}}},$show:function(t,e){clearTimeout(this.handle),this.clientX=t,this.clientY=e,this.showTime=Date.now(),this.visible=!0},$hide:function(){this.visible=!1},autoHide:function(t){var e=this,n=t.type,i=t.button;"mouseup"===n&&0!==i||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.$hide()}),67))}},computed:{autoResetOffsetKey:function(){var t=this.showTime,e=this.visible;return e?"1:".concat(t):""},menuStyle:function(){var t=this.clientX,e=this.clientY;return"left:".concat(t,"px;top:").concat(e,"px;")}},watch:{visible:function(t){clearTimeout(this.handle),window.removeEventListener("contextmenu",this.autoHide,!0),window.removeEventListener("mouseup",this.autoHide,!0),t&&(window.addEventListener("contextmenu",this.autoHide,!0),window.addEventListener("mouseup",this.autoHide,!0))},autoResetOffsetKey:function(t){var e=this;""!==t&&this.$nextTick((function(){e.resetOffset()}))}},data:function(){return{clientX:0,clientY:0,visible:!1,showTime:0,handle:0}},beforeDestroy:function(){this.$hide()}},jo=Fo,_o=(n("40ff"),Object(Gr["a"])(jo,Io,Ao,!1,null,"f762bbe0",null)),Mo=_o.exports,Lo={components:{ContextMenu:Mo},methods:{onContextmenu:function(t){var e;null===(e=this.$refs.contextMenu)||void 0===e||e.$show(t.clientX,t.clientY)},clickHideArtListMap:function(){this.$store.commit("showArtListMap",!1);var t=document.querySelector("header>div.set>div.user-info");if(t){var e=t.getBoundingClientRect(),n=e.x,i=e.y,r=e.width,o=e.height;i-=4,o+=8,this.setBeginnerGuideRect(a["k"].ArtListMap,{x:n,y:i,width:r,height:o,direction:a["j"].TopRight})}},resetCanvasSmoothing:function(){var t=this.$refs,e=t.canvas,n=t.canvasRect,i=this.canvasScale,r=e.getContext("2d");r&&We(r,1,i,2),r=n.getContext("2d"),r&&We(r,1,i,2)},_drawSectionBackground:function(t,e){t.fillStyle="rgba(141, 149, 158, 1)";var n=this.sceneInfo,i=n.sceneX,r=n.sceneY,o=n.scale,a=e.x,s=e.y,c=e.width,l=e.height;t.fillRect(i+Math.round(a*o),r+Math.round(s*o),Math.round(c*o),Math.round(l*o))},_drawArtboardBackground:function(t,e){t.fillStyle="#fff";var n=this.sceneInfo,i=n.sceneX,r=n.sceneY,o=n.scale,a=e.x,s=e.y,c=e.width,l=e.height;a=i+Math.round(a*o),s=r+Math.round(s*o),c=Math.round(c*o),l=Math.round(l*o),t.fillRect(a,s,c,l)},_draw:function(){var t=this;cancelAnimationFrame(this.handle),this.sceneDelayTimes.artboard=Date.now();var e=this.$refs.canvas;if(e){var n=e.getContext("2d");this.drawAllTime=Date.now();var i=this.canvasWidth,r=this.canvasHeight;n.clearRect(0,0,i,r);var o=this.artboards,a=this.sections;a.forEach((function(e){t._drawSectionBackground(n,e.rect)})),o.forEach((function(e){t._drawArtboardBackground(n,e.rect)}))}},draw:function(){this.handle=requestAnimationFrame(this._draw)},mouseupCanvas:function(){var t;null===(t=this.$refs.box)||void 0===t||t.removeEventListener("mousemove",this.mousedownCanvas),window.removeEventListener("mouseup",this.mouseupCanvas)},mousemoveCanvas:function(t){var e=this.parseMousePointToScene(t);e.width=1,e.height=1,this.$emit("setRectToCenter",e)},mousedownCanvas:function(t){var e;if(0===t.button){null===(e=this.$refs.box)||void 0===e||e.addEventListener("mousemove",this.mousedownCanvas),window.addEventListener("mouseup",this.mouseupCanvas);var n=this.parseMousePointToScene(t);n.width=1,n.height=1,this.$emit("setRectToCenter",n)}},drawLightRect:function(){cancelAnimationFrame(this.drawLightRectHandle);var t=this.$refs.canvasRect,e=this.canvasWidth,n=this.canvasHeight;if(t){var i=t.getContext("2d"),r=this.lightRectDrawRect;r?(this.lightRectDrawRect=null,i.clearRect(r.x-1,r.y-1,r.width+2,r.height+2)):i.clearRect(0,0,e,n),i.strokeStyle="rgba(255, 120, 0, 1)",i.lineWidth=1;var o=this.boxRect;o=o.toJSON(),o.x+=.5,o.y+=.5,Be(i,o,2,!1),this.lightRectDrawRect=o}},drawLightRectLater:function(){cancelAnimationFrame(this.drawLightRectHandle),this.drawLightRectHandle=requestAnimationFrame(this.drawLightRect)},drawAllDelay:function(){var t=this,e=Date.now();e-this.drawAllTime>=100?(this.drawAllTime=e,clearTimeout(this.handleDrawAllDelay),this.draw(),this.drawLightRectLater()):(clearTimeout(this.handleDrawAllDelay),this.handleDrawAllDelay=setTimeout((function(){clearTimeout(t.handleDrawAllDelay),t.draw(),t.drawLightRectLater()}),66.67))},parseMousePointToScene:function(t){var e=t.layerX,n=t.layerY,i=this.sceneInfo,r=this.canvasScale;return e=Math.round((e*r-i.sceneX)/i.scale),n=Math.round((n*r-i.sceneY)/i.scale),{x:e,y:n}}},computed:{rect:function(){var t=this.renderDocuments,e=t.map((function(t){return{artboard:{boundsInParent:t.rect}}})),n=j(e);return n},boxRect:function(){var t=this.sceneInfo,e=this.sceneWidth,n=this.sceneHeight,i=this.sceneScale,r=this.sceneX,o=this.sceneY,a=this.cloudArtListMode,s=(new w).set(-r/i,-o/i,e/i,n/i);if(s.x=Math.round(s.x*t.scale),s.y=Math.round(s.y*t.scale),s.width=Math.round(s.width*t.scale),s.height=Math.round(s.height*t.scale),s.x+=t.sceneX,s.y+=t.sceneY,!a){var c=this.rect;s.x-=Math.round((e/i-c.width)/2*t.scale),s.y-=Math.round((n/i-c.height)/2*t.scale)}return s},sceneInfo:function(){var t=this.rect,e=this.canvasWidth,n=this.canvasHeight,i=.85,r=t.width>0?e/t.width*i:1,o=t.height>0?n/t.height*i:1,a=Math.min(r,o),s=Math.round(t.x*a),c=Math.round(t.y*a);return s+=Math.round((e-a*t.width)/2),c+=Math.round((n-a*t.height)/2),{scale:a,sceneY:c,sceneX:s,scaleBox:i}},sections:function(){var t=[],e=this.renderDocuments;return Object(l["i"])(e)?(e.forEach((function(e){var n=e.maxRect.x-e.rect.x,i=e.maxRect.y-e.rect.y,r=e.sections;Object(l["i"])(r)&&r.forEach((function(e){var r,o=null!==(r=e.boundsInParentForList)&&void 0!==r?r:e.boundsInParent,a={rect:{x:Math.floor(o.x-n),y:Math.floor(o.y-i),width:Math.ceil(o.width),height:Math.ceil(o.height)},section:e};t.push(a)}))})),t):t},artboards:function(){var t=[],e=this.renderDocuments;return Object(l["i"])(e)?(e.forEach((function(e){var n=e.maxRect.x-e.rect.x,i=e.maxRect.y-e.rect.y,r=e.arts;Object(l["i"])(r)&&r.forEach((function(e){var r,o=e.artboard;if(o){var a=null!==(r=o.boundsInParentForList)&&void 0!==r?r:o.boundsInParent,s={rect:{x:Math.floor(a.x-n),y:Math.floor(a.y-i),width:Math.ceil(a.width),height:Math.ceil(a.height)},artboard:e};t.push(s)}}))})),t):t},resetSmoothKey:function(){var t=this.canvasScale;return"".concat(t)},canvasScale:function(){return Object(c["J"])()},canvasWidth:function(){return 180*this.canvasScale},canvasHeight:function(){return 130*this.canvasScale},canvasStyle:function(){var t=this.canvasWidth,e=this.canvasHeight,n=this.canvasScale;return{width:Math.round(t/n)+"px",height:Math.round(e/n)+"px"}},winRect:function(){return this.$store.state.winRect},reDrawRectKey:function(){var t=this.sceneWidth,e=this.sceneHeight,n=this.sceneX,i=this.sceneY,r=this.sceneScale;return"".concat(t,"x").concat(e,"x").concat(n,"x").concat(i,"x").concat(r)},reDrawArtKey:function(){var t=this.canvasWidth,e=this.canvasHeight;return"".concat(t,"x").concat(e)}},watch:{resetSmoothKey:function(){this.resetCanvasSmoothing()},reDrawRectKey:function(){this.drawLightRectLater()},reDrawArtKey:function(){this.draw()},artboards:function(){this.draw(),this.drawLightRectLater()},sections:function(){this.draw(),this.drawLightRectLater()}},props:{sceneWidth:Number,sceneHeight:Number,sceneScale:Number,sceneY:Number,sceneX:Number,cloudArtListMode:Boolean},data:function(){return{handle:0,drawLightRectHandle:0,handleDrawAllDelay:0,drawAllTime:0,sceneDelayTimes:{artboard:0},lightRectDrawRect:null}},mounted:function(){this.resetCanvasSmoothing(),this.drawAllDelay()}},Po=Lo,Do=(n("2f70"),Object(Gr["a"])(Po,To,Oo,!1,null,"096a6248",null)),No=Do.exports,Eo=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"draw-view"},[e("DrawControl"),e("canvas",{ref:"canvas_history",class:{move:t.inElementMoveState},attrs:{width:t.sceneWidth*t.canvasScale,height:t.sceneHeight*t.canvasScale},on:{mousedown:t.onMouseDown,mousemove:t.onMouseMoveInCanvas,dragstart:function(t){t.preventDefault()}}}),e("canvas",{ref:"canvas_current",staticClass:"current",attrs:{width:t.sceneWidth*t.canvasScale,height:t.sceneHeight*t.canvasScale}}),e("div",{staticClass:"input"},[t.isCurrentInTextMode?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentDrawData.text,expression:"currentDrawData.text"}],ref:"input",style:t.textareaStyle,attrs:{spellcheck:"false"},domProps:{value:t.currentDrawData.text},on:{input:[function(e){e.target.composing||t.$set(t.currentDrawData,"text",e.target.value)},t.resetTextareaSize],keydown:t.onInputKeyDown,mousedown:function(t){t.stopPropagation()}}}):t._e()])],1):t._e()},Ro=[],Vo=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"draw-control-box"},[e("div",{staticClass:"draw-control",class:{black:t.artboardDetailSkin},on:{mousedown:function(t){t.stopPropagation()}}},[e("ul",[e("li",{staticClass:"tool_move",class:{on:t.drawAction===t.EnumDrawAction.Move},attrs:{title:"选择对象"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Move)}}}),e("li",{staticClass:"tool_pen",class:{on:t.drawAction===t.EnumDrawAction.Brush},attrs:{title:"画笔"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Brush)}}}),e("li",{staticClass:"tool_text",class:{on:t.drawAction===t.EnumDrawAction.Text},attrs:{title:"文本输入"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Text)}}}),e("li",{staticClass:"tool_rectangle",class:{on:t.drawAction===t.EnumDrawAction.Rectangle},attrs:{title:"矩形"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Rectangle)}}}),e("li",{staticClass:"tool_ellipse",class:{on:t.drawAction===t.EnumDrawAction.Ellipse},attrs:{title:"椭圆"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Ellipse)}}}),e("li",{staticClass:"tool_arrow",class:{on:t.drawAction===t.EnumDrawAction.Arrow},attrs:{title:"箭头"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Arrow)}}})]),e("ul",[e("li",{staticClass:"his_prev",class:{off:0===t.historyCount||t.historyIndex<0},attrs:{title:"回退到上一步"},on:{click:t.clickHistoryPrev}}),e("li",{staticClass:"his_next",class:{off:0===t.historyCount||t.historyIndex>=t.historyCount-1},attrs:{title:"前进到下一步"},on:{click:t.clickHistoryNext}})]),e("ul",[e("li",{staticClass:"sys_save",attrs:{title:"保存截图"},on:{click:t.clickSave}}),e("li",{staticClass:"sys_cancel",attrs:{title:"取消截图"},on:{click:t.clickCancel}})])]),t.subControlVisible?e("div",{staticClass:"draw-control-sub",class:{black:t.artboardDetailSkin},on:{mousedown:function(t){t.stopPropagation()}}},[e("div",{staticClass:"box"},[t.drawAction===t.EnumDrawAction.Text?e("div",{staticClass:"font-size"},[e("div",{staticClass:"select"},[e("div",{staticClass:"select-text",class:{on:t.fontSizeSelectOpen},on:{click:function(e){t.fontSizeSelectOpen=!t.fontSizeSelectOpen}}},[t._v(t._s(t.drawInfo.fontSize)+"px")]),t.fontSizeSelectOpen?e("ul",{staticClass:"select-list",on:{mousewheel:function(t){t.stopPropagation()},DOMMouseScroll:function(t){t.stopPropagation()}}},t._l(t.DrawFontSize,(function(n,i){return e("li",{key:i,staticClass:"select-item",class:{on:n===t.drawInfo.fontSize},on:{click:function(e){return t.clickFontSize(n)}}},[t._v(t._s(n)+"px")])})),0):t._e()])]):e("ul",{staticClass:"brush-size"},t._l(t.EnumBrushSizeType,(function(n,i){return e("li",{key:i,class:[i,t.drawInfo.brushSize===n?"on":""],on:{click:function(e){t.drawInfo.brushSize=n}}})})),0),e("ul",{staticClass:"colors"},t._l(t.DrawColors,(function(n,i){return e("li",{key:i,class:{on:t.drawInfo.colorIndex===i},on:{click:function(e){t.drawInfo.colorIndex=i}}},[e("span",{style:{borderColor:n.border,backgroundColor:n.color}})])})),0)])]):t._e()]):t._e()},Bo=[],Ho=".webp",Uo=[".jpeg",".jpg",".gif",".png",Ho,".bmp"],Go=10485760,Wo=5;function $o(t,e,n,i,r){if(Object(l["k"])(t)&&i){Object(l["j"])(n)&&Yo(t,n),0===e.id&&(e.id=t.userId);var o=r[e.id];o?Object.keys(e).forEach((function(t){o[t]=e[t]})):o=r[e.id]=e,t.user=o;var a=0===i.id;return a||(0!=t.replyUserId&&(o=r[t.replyUserId],t.replyUser=o||null),t.parent=i),t.atUsers={},Object(l["i"])(t.atUserIds)&&t.atUserIds.forEach((function(e){t.atUsers[e]=r[e]})),i.comments.push(t),t}}function zo(t,e,n){Object(l["k"])(t)||(t={});var i=t,r=i.list,o=i.users;o||(o=null!==n&&void 0!==n?n:{});var a=Object(l["j"])(e);return Object(l["i"])(r)?r.forEach((function(t){Object(l["k"])(t)&&(t.user=o[t.userId],t.replyUser=null,t.atUsers={},Object(l["i"])(t.atUserIds)&&t.atUserIds.forEach((function(e){t.atUsers[e]=o[e]})),Object(l["i"])(t.comments)&&t.comments.forEach((function(n){n.parent=t,n.user=o[n.userId],n.replyUser=o[n.replyUserId],n.atUsers={},Object(l["i"])(n.atUserIds)&&n.atUserIds.forEach((function(t){n.atUsers[t]=o[t]})),a&&Yo(n,e)})),a&&Yo(t,e))})):r=[],r}function Yo(t,e){var n=t.attachMents;if(Object(l["i"])(n))for(var i=0,r=n.length;i<r;i++){var o=n[i];if(o){var a=o.fold;a&&"/"===a[0]&&(o.fold=e+a.substr(1))}}else t.attachMents=[]}var Xo={methods:{clickHistoryPrev:function(){var t=this.historyIndex,e=this.drawInfo;t<0||(t-=1,e.historyIndex=t,e.historyIndexChanges=Date.now())},clickHistoryNext:function(){var t=this.historyIndex,e=this.drawInfo,n=this.histories;t>=n.length-1||(t+=1,e.historyIndex=t,e.historyIndexChanges=Date.now())},clickCleanHistory:function(){this.histories.splice(0),this.drawInfo.historyIndex=-1},clickFontSize:function(t){this.drawInfo.fontSize=t},clickDrawAction:function(t){var e;switch(this.drawAction===t&&(t=Ct.None),t){case Ct.Move:e="进入拖拽模式,可拖动对象,选中后可按delete键删除";break}e&&this.showTextTip(e),this.drawInfo.action=t},clickSave:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(!0!==t.saving){e.n=1;break}return e.a(2);case 1:if(-1!==t.historyIndex&&0!==t.histories.length){e.n=2;break}return t.alert({text:"没有修改信息,无法保存"}),e.a(2);case 2:if(n=t.curArtboardVerData,r=t.rect,n){e.n=3;break}return t.showTextTip("画板信息异常,无法找到画板信息"),e.a(2);case 3:return e.p=3,t.saving=!0,e.n=4,Jt.save(r,t.pathPreview,t.histories,t.historyIndex);case 4:if(a=e.v,a&&!(a.size<1)){e.n=5;break}return t.alert({text:"保存信息失败,请联系我们反馈该问题"}),e.a(2);case 5:if(!(a.size>Go)){e.n=6;break}return t.alert({text:"保存信息失败,图片大小「".concat(Object(c["qb"])(a.size),"」太大,不能超过「").concat(Object(c["qb"])(Go),"」")}),e.a(2);case 6:a.name="userdraw.jpg",a.lastModified=Date.now(),a.lastModifiedDate=new Date(a.lastModified),null===(o=t.editComment.instance)||void 0===o||o.addAttachMent(a).then((function(){t.showTextTip("图片已添加到评论附件列表")})).catch((function(e){t.showTextTip(e)})),t.editComment.drawing=!1,e.n=8;break;case 7:e.p=7,s=e.v,t.showTextTip(s);case 8:return e.p=8,t.saving=!1,e.f(8);case 9:return e.a(2)}}),e,null,[[3,7,8,9]])})))()},clickCancel:function(){this.saving=!1,this.editComment.drawing=!1},hideFontSizeSelectLater:function(){this.fontSizeSelectOpen=!1}},computed:{artboardScale:function(){var t,e=null===(t=this.curArtboardVerData)||void 0===t?void 0:t.scale;return e>0?e:1},rect:function(){var t,e=this.curArtboardVerData,n=this.artboardScale,i=null!==(t=null===e||void 0===e?void 0:e.boundsInParent)&&void 0!==t?t:new w;return(new w).set(0,0,Math.round(i.width*n),Math.round(i.height*n))},curArtboardVerData:function(){var t,e=this.curArtboard;return null!==(t=null===e||void 0===e?void 0:e.artboardVerData)&&void 0!==t?t:null===e||void 0===e?void 0:e.artboard},pathPreview:function(){var t,e=this.curArtboardVerData;return e?(this.isSupportWebp&&(t=e.pathPreviewWebp),t||(t=e.pathPreview),this.combineResourcePath(t)):null},isSupportWebp:function(){return this.$store.state.isSupportWebp===Ni.Support},DrawFontSize:function(){return xt},EnumBrushSizeType:function(){return Tt},DrawColors:function(){return Ot},artboardDetailSkin:function(){return this.$store.state.artboardDetailSkin},drawInfo:function(){return this.editComment.drawInfo},EnumDrawAction:function(){return Ct},drawAction:function(){return this.drawInfo.action},historyIndex:function(){return this.drawInfo.historyIndex},historyCount:function(){return this.histories.length},histories:function(){return this.drawInfo.histories},subControlVisible:function(){var t=this.drawAction;return t!==Ct.None&&t!==Ct.Move},visible:function(){return this.editComment.drawing}},watch:{fontSizeSelectOpen:function(t){var e=this;clearTimeout(this.fontSizeHandle),t?this.fontSizeHandle=setTimeout((function(){window.addEventListener("click",e.hideFontSizeSelectLater)}),66.67):window.removeEventListener("click",this.hideFontSizeSelectLater)}},beforeDestroy:function(){clearTimeout(this.fontSizeHandle),window.removeEventListener("click",this.hideFontSizeSelectLater)},data:function(){return{fontSizeSelectOpen:!1,fontSizeHandle:0,saving:!1}}},Ko=Xo,qo=(n("8c31"),Object(Gr["a"])(Ko,Vo,Bo,!1,null,"7f61cfcf",null)),Jo=qo.exports;n("e9c4");function Qo(t){return new Promise((function(e,n){var i=new FileReader;i.onload=function(t){var n=t.target.result;e(n)},i.onerror=function(){n("read error")},i.readAsText(t)}))}function Zo(t,e){return ta.apply(this,arguments)}function ta(){return ta=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o,a,s,c,l,u,d,h,f,m,v;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Qo(e);case 1:if(s=t.v,c=new DOMParser,l=c.parseFromString(s,"image/svg+xml"),u=null!==(r=null===l||void 0===l?void 0:l.documentElement)&&void 0!==r?r:null===l||void 0===l?void 0:l.rootElement,d=null!==(o=null===u||void 0===u||null===(a=u.viewBox)||void 0===a?void 0:a.baseVal)&&void 0!==o?o:{},h=d.width,f=d.height,!("number"!==typeof h||"number"!==typeof f||h<=0||f<=0)){t.n=2;break}throw"error svg";case 2:if(m=+u.getAttribute("width"),v=+u.getAttribute("height"),!(m>0&&v>0)){t.n=3;break}return t.a(2,e);case 3:return(isNaN(m)||m<=0)&&(m=n),(isNaN(v)||v<=0)&&(v=Math.round(m/h*f)),u.setAttribute("width",m),u.setAttribute("height",v),t.a(2,new Blob([u.outerHTML],{type:"image/svg+xml"}))}}),t)}))),ta.apply(this,arguments)}function ea(t,e,n,i,r){return na.apply(this,arguments)}function na(){return na=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o,a){var s,c,l,u,d,h,f,m,v,p,b,g;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(!a){t.n=4;break}return t.p=1,t.n=2,Zo(e,n);case 2:e=t.v,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.n=5,new Promise((function(t,i){var r=URL.createObjectURL(e),o=new Image;o.onerror=function(t){var e=t.target;e.onerror=e.onload=null,r&&URL.revokeObjectURL(r),i("img load error")},o.onload=function(e){var n=e.target;n.onerror=n.onload=null,r&&URL.revokeObjectURL(r),t(n)},o.width=n,o.src=r}));case 5:return l=t.v,u=null!==(s=l.naturalWidth)&&void 0!==s?s:l.width,d=null!==(c=l.naturalHeight)&&void 0!==c?c:l.height,h=n/u,m="function"===typeof self.OffscreenCanvas,t.p=6,f=m?new self.OffscreenCanvas(10,10):document.createElement("canvas"),m||(f.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(f)),v=f.getContext("2d"),t.n=7,Ea(l,f,v,m,h,r);case 7:if(p=t.v,o){t.n=8;break}return t.a(2,p);case 8:return t.n=9,new Promise((function(t,e){var n=new FileReader;n.addEventListener("load",(function(e){t(e.target.result)})),n.addEventListener("error",(function(){e("blob转换成base64失败")})),n.readAsDataURL(p)}));case 9:return p=t.v,b=Math.max(Math.round(d*h),1),t.a(2,new Blob(['<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'.concat(n,'" height="').concat(b,'" viewBox="0 0 ').concat(n," ").concat(b,'"><image width="').concat(n,'" height="').concat(b,'" xlink:href="').concat(p,'"/></svg>')],{type:"image/svg+xml"}));case 10:return t.p=10,f&&(g=f.parentNode,g&&g.removeChild(f)),f=null,t.f(10);case 11:return t.a(2)}}),t,null,[[6,,10,11],[1,3]])}))),na.apply(this,arguments)}var ia=Object(Qt["createLoadGlobalLibraryFunc"])("zip","zip-full.min.js"),ra=function(){function t(){Object(d["a"])(this,t)}return Object(h["a"])(t,null,[{key:"getSketchFileImgPreviewAsync",value:function(){var e=Object(r["a"])(Object(i["a"])().m((function e(n,r){return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.geZipFileImgPreviewAsync(n,r,["previews/preview.png"]);case 1:return e.a(2,e.v)}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"getXDFileImgPreviewAsync",value:function(){var e=Object(r["a"])(Object(i["a"])().m((function e(n,r){return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.geZipFileImgPreviewAsync(n,r,["preview.png","thumbnail.png"]);case 1:return e.a(2,e.v)}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"getFigmaFileImgPreviewAsync",value:function(){var e=Object(r["a"])(Object(i["a"])().m((function e(n,r){return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.geZipFileImgPreviewAsync(n,r,["thumbnail.png"]);case 1:return e.a(2,e.v)}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"geZipFileImgPreviewAsync",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n,r){var o,a,s,u,d,h,f,m,v,p;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,n.file=null,t.n=1,ia.loadAsync();case 1:return o=t.v,a=null,s=new o.ZipReader(new o.BlobReader(e)),u=!1,t.p=2,t.n=3,s.getEntries();case 3:if(d=t.v,!(d.length<1)){t.n=4;break}return t.a(2,!1);case 4:h={},f={},r.forEach((function(t){f[t]=1})),d.forEach((function(t){var e,n=null===(e=t.filename)||void 0===e?void 0:e.toLowerCase();Object(l["j"])(n)&&f[n]&&(h[n]=t)})),v=0;case 5:if(!(v<r.length)){t.n=7;break}if(p=r[v],m=h[p],!m){t.n=6;break}return t.a(3,7);case 6:v++,t.n=5;break;case 7:if(m){t.n=8;break}return t.a(2,!1);case 8:return t.n=9,m.getData(new o.BlobWriter);case 9:a=t.v;case 10:return t.p=10,u||s.close(),t.f(10);case 11:if(null!=a){t.n=12;break}return t.a(2,!1);case 12:return t.n=13,ea(a,c["g"],.6,!1,!1);case 13:return n.file=t.v,t.a(2,null!=n.file);case 14:return t.p=14,t.v,t.a(2,!1)}}),t,null,[[2,,10,11],[0,14]])})));function e(e,n,i){return t.apply(this,arguments)}return e}()}])}(),oa=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"files",[]),Object(f["a"])(this,"ZipLib",null)}return Object(h["a"])(t,[{key:"init",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,ia.loadAsync();case 1:this.ZipLib=t.v;case 2:return t.a(2)}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o,a,s,l,u;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(0!==this.files.length){t.n=1;break}throw"文件列表为空";case 1:return r=this.ZipLib,o=new r.BlobWriter,a=new r.ZipWriter(o),s=!1,t.p=2,t.n=3,this.fetch(a,n);case 3:return t.n=4,a.close();case 4:return s=!0,t.n=5,o.getData();case 5:return l=t.v,Object(c["t"])(e,l),t.a(2,"success");case 6:throw t.p=6,u=t.v,s||a.close(),u;case 7:return t.a(2)}}),t,this,[[2,6]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"fetch",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o,a;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(r=this.ZipLib,o=this.files.splice(0,1)[0],void 0!==o){t.n=1;break}return t.a(2);case 1:if(!o.isPdf||!n){t.n=3;break}return t.n=2,n(o.resSrc,o.scale,o.isPdf);case 2:a=t.v,t.n=7;break;case 3:return t.n=4,Object(c["u"])(o.resSrc,o.base64ResSrc);case 4:if(a=t.v,"string"!==typeof a){t.n=5;break}t.n=7;break;case 5:if(!n){t.n=7;break}return t.n=6,n(a,o.scale,o.isPdf);case 6:a=t.v;case 7:return t.n=8,e.add(o.filename,"string"===typeof a?new r.Data64URIReader(a):new r.BlobReader(a));case 8:return t.n=9,this.fetch(e,n);case 9:return t.a(2)}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"addFile",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.files.push({filename:t,resSrc:e,base64ResSrc:n,scale:i,isPdf:r})}}])}(),aa=n("8ae6"),sa={};function ca(t,e,n){return la.apply(this,arguments)}function la(){return la=Object(r["a"])(Object(i["a"])().m((function t(e,n,r){var o,a=arguments;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return o=a.length>3&&void 0!==a[3]&&a[3],t.a(2,ua(e,n,"image/jpeg",r,o))}}),t)}))),la.apply(this,arguments)}function ua(t,e,n,i){return da.apply(this,arguments)}function da(){return da=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o){var a,s,l,u,d=arguments;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return a=d.length>4&&void 0!==d[4]&&d[4],t.p=1,s=document.createElement("iframe"),s.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",t.n=2,new Promise((function(t,i){var l=Object(c["hb"])();sa[l]={resolve:t,reject:i},s.onload=function(){s.onerror=s.onload=null;var t=Object(aa["a"])(),i=s.contentWindow,c=i.document;c.open(),c.write('<!DOCTYPE html>\n        <html lang="zh-CN">\n          <head>\n            <meta charset="utf-8">\n            <meta http-equiv="X-UA-Compatible" content="IE=edge">\n            <meta name="viewport" content="width=device-width,initial-scale=1.0">\n            <title>标记狮 MarkLion - https://www.marklion.cn</title>\n            <style>\n            *{margin:0;padding:0;}\n            html,body{width:100%;height:100%;overflow:hidden}\n            #pdfViewer{display:block;position:absolute;}\n            </style>\n          </head>\n          <body>            \n           <canvas id="pdfViewer"></canvas>\n           <script>if(!window.globalThis)window.globalThis=window;<\/script>\n            <script src="'.concat(t,'pdf.util.min.js" charset="utf-8"><\/script>\n            <script>pdfjsLib.GlobalWorkerOptions.workerSrc="').concat(t,"pdf.worker.min.js\";pdf_util.cloverPdfToImage('").concat(e,"',").concat(n,",'").concat(r,"',").concat(JSON.stringify(o),",").concat((!!a).toString(),").then(function(blobs){parent.__cloverPdfToImageCallback('").concat(l,"',true,blobs)}).catch(function(reason){parent.__cloverPdfToImageCallback('").concat(l,"',false,reason)});<\/script>\n          </body>\n        </html>")),c.close()},s.onerror=function(){s.onerror=s.onload=null,parent.__cloverPdfToImageCallback("".concat(l),!1,"iframe error")},s.src="about:blank",document.body.appendChild(s)}));case 2:return t.a(2,t.v);case 3:t.p=3;try{u=null===(l=s)||void 0===l?void 0:l.parentNode,u&&u.removeChild(s)}catch(i){}return t.f(3);case 4:return t.a(2)}}),t,null,[[1,,3,4]])}))),da.apply(this,arguments)}function ha(t,e){var n=t.contentWindow;if(n&&n.pdf_util)n.pdf_util.renderPdf("#pdfViewer",e);else{var i=Object(aa["a"])(),r='<!DOCTYPE html>\n    <html lang="zh-CN">\n      <head>\n        <meta charset="utf-8">\n        <meta http-equiv="X-UA-Compatible" content="IE=edge">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <title>标记狮 MarkLion - https://www.marklion.cn</title>\n        <style>\n        *{margin:0;padding:0;}\n        html,body{width:100%;height:100%;overflow:hidden}\n        #pdfViewer{display:block;position:absolute;}\n        </style>\n      </head>\n      <body>            \n       <canvas id="pdfViewer"></canvas>\n       <script>if(!window.globalThis)window.globalThis=window;<\/script>\n        <script src="'.concat(i,'pdf.util.min.js" charset="utf-8"><\/script>\n        <script>pdfjsLib.GlobalWorkerOptions.workerSrc="').concat(i,"pdf.worker.min.js\";pdf_util.renderPdf('#pdfViewer','").concat(e,"');<\/script>\n      </body>\n    </html>"),o=function(){t.onload=null;var e=t.contentWindow;e.__pluginloaded=!0;var n=e.document;n.open(),n.write(r),n.close()};t.src="about:blank",requestAnimationFrame((function(){var e=t.contentWindow;e&&!e.__pluginloaded?o():t.onload=o}))}}function fa(t,e,n,i){return ma.apply(this,arguments)}function ma(){return ma=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o){var a;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,ca(n,r,o);case 1:if(a=t.v[0],a){t.n=2;break}throw"fail";case 2:return Object(c["t"])(e,a),t.a(2,"success")}}),t)}))),ma.apply(this,arguments)}self.__cloverPdfToImageCallback=function(t,e,n){if(Object(l["j"])(t)){var i=sa[t];i&&(delete sa[t],e?i.resolve(n):i.reject(n))}};n("c19f"),n("ace4"),n("2c66"),n("249d"),n("40e9"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("986a"),n("1d02"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("6ce5"),n("2834"),n("72f7"),n("4ea1"),n("61ae"),n("0a00"),n("b6f3"),n("4801");function va(t){return pa.apply(this,arguments)}function pa(){return pa=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Object(Qt["createFetch"])(e,{method:"GET"});case 1:n=t.v,a=n.status,t.n=200===a?2:500===a||403===a?4:404===a?6:7;break;case 2:return t.n=3,n.text();case 3:return r=t.v,t.a(2,Object(c["p"])(r));case 4:return t.n=5,n.text();case 5:throw o=t.v,"[".concat(n.status,"] ").concat(o);case 6:throw"[404] 资源不存在";case 7:throw"请求失败:".concat(e);case 8:return t.a(2)}}),t)}))),pa.apply(this,arguments)}var ba={ANDROID_MIPMAP:[{name:"mdpi",minname:"mdpi",scale:1,filepath:"mipmap-mdpi/{$name$}.png",resname:"{$name$}.png",errorField:"exportErrPng"},{name:"hdpi",minname:"hdpi",scale:1.5,filepath:"mipmap-hdpi/{$name$}.png",resname:"{$name$}@1.5x.png",errorField:"exportErrPng@1.5x"},{name:"xhdpi",minname:"xhdpi",scale:2,filepath:"mipmap-xhdpi/{$name$}.png",resname:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"xxhdpi",minname:"xxhdpi",scale:3,filepath:"mipmap-xxhdpi/{$name$}.png",resname:"{$name$}@3x.png",errorField:"exportErrPng@3x"},{name:"xxxhdpi",minname:"xxxhdpi",scale:4,filepath:"mipmap-xxxhdpi/{$name$}.png",resname:"{$name$}@4x.png",errorField:"exportErrPng@4x"}],ANDROID:[{name:"mdpi",minname:"mdpi",scale:1,filepath:"drawable-mdpi/{$name$}.png",resname:"{$name$}.png",errorField:"exportErrPng"},{name:"hdpi",minname:"hdpi",scale:1.5,filepath:"drawable-hdpi/{$name$}.png",resname:"{$name$}@1.5x.png",errorField:"exportErrPng@1.5x"},{name:"xhdpi",minname:"xhdpi",scale:2,filepath:"drawable-xhdpi/{$name$}.png",resname:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"xxhdpi",minname:"xxhdpi",scale:3,filepath:"drawable-xxhdpi/{$name$}.png",resname:"{$name$}@3x.png",errorField:"exportErrPng@3x"},{name:"xxxhdpi",minname:"xxxhdpi",scale:4,filepath:"drawable-xxxhdpi/{$name$}.png",resname:"{$name$}@4x.png",errorField:"exportErrPng@4x"}],IOS:[{name:"标准尺寸 @1x",scale:1,filepath:"{$name$}.png",errorField:"exportErrPng"},{name:"视网膜 @2x",scale:2,filepath:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"高清视网膜 @3x",scale:3,filepath:"{$name$}@3x.png",errorField:"exportErrPng@3x"}],WEB:[{name:"Web @1x",scale:1,filepath:"{$name$}.png",errorField:"exportErrPng"},{name:"Web @2x",scale:2,filepath:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"Web @3x",scale:3,filepath:"{$name$}@3x.png",errorField:"exportErrPng@3x"}],WeChatMiniProgram:[{name:"标准尺寸 @1x",scale:1,filepath:"{$name$}.png",errorField:"exportErrPng"},{name:"视网膜 @2x",scale:2,filepath:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"高清视网膜 @3x",scale:3,filepath:"{$name$}@3x.png",errorField:"exportErrPng@3x"}]},ga={name:"SVG",scale:1,filepath:"{$name$}.svg",errorField:"exportErrSvg"},wa={name:"PDF",scale:1,filepath:"{$name$}.pdf",errorField:"exportErrPdf"},ya=[{scale:1,ext:".png"},{scale:1,ext:".svg"},{scale:2,ext:"@2x.png"},{scale:3,ext:"@3x.png"},{scale:4,ext:"@4x.png"},{scale:1.5,ext:"@1.5x.png"}],ka=function(t,e,n,i,r,o,s,c){if(i)return[{value:ga,enabled:!0}];if(r)return[{value:wa,enabled:!0}];var l;switch(e){case a["c"].ANDROID:l=n?ba.ANDROID_MIPMAP:ba.ANDROID;break;case a["c"].IOS:l=ba.IOS;break;case a["c"].WE_CHAT_MINI_PROGRAM:l=ba.WeChatMiniProgram;break;default:l=ba.WEB;break}var u=Ha(t,c),d=u.mlConfig.scalesObj;return l.map((function(t){return{value:t,enabled:o&&1===t.scale||s&&1===t.scale||!o&&!s&&1===d[t.scale]}}))},Ca=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n,r){var o,a,s,u,d,h,f,m,v,p,b,g,w,y;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(o=Ha(n,r),Object(c["l"])(o)){t.n=1;break}return t.a(2);case 1:if(Object(l["i"])(e)&&0!==e.length){t.n=2;break}throw"至少需要选中一个节点才能激活下载";case 2:if(a=Object(c["Q"])(o),a){t.n=3;break}throw"设计狮没有为该画板导出「PDF」格式的切图";case 3:if(s=0,u={},d=[],e.forEach((function(t){if(Object(l["k"])(t)&&t.markedForExport){var e=Object(c["H"])(t);if(Object(l["j"])(e)){var n=Object(c["K"])(e),i=wa.filepath;i=i.replace("{$name$}",n);var r=u[i];if(r){var o=++r.index;i=wa.filepath,i=i.replace("{$name$}","".concat(n,"(").concat(o,")"))}else u[i]={index:0};d.push({filepath:i,node:t,nodeName:e}),s+=1}}})),0!==d.length){t.n=4;break}throw"至少需要选中一个节点才能激活下载";case 4:if(1!==d.length){t.n=6;break}return h=d[0],f=h.node,m=h.nodeName,v=Xa(o,f),p=v.png,b=v.base64Png,g="".concat(m,".pdf"),t.n=5,Object(c["r"])(g,p,b);case 5:return t.a(2,t.v);case 6:return w=new oa,t.n=7,w.init();case 7:return d.forEach((function(t){var e=t.node,n=t.filepath,i=Xa(o,e),r=i.png,a=i.base64Png;w.addFile(n,r,a)})),y=1===s?d[0].nodeName:o.name,t.n=8,w.start("pdf_".concat(y,".zip"));case 8:return t.a(2,t.v);case 9:return t.a(2)}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}();function xa(t,e,n){return Sa.apply(this,arguments)}function Sa(){return Sa=Object(r["a"])(Object(i["a"])().m((function t(e,n,r){var o,a,s,u;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(o=Ha(n,r),Object(c["l"])(o)){t.n=1;break}return t.a(2);case 1:if(Object(l["k"])(e)&&e.markedForExport){t.n=2;break}return t.a(2);case 2:return a=Ya(o,e),s=a.png,u=a.base64Png,t.a(2,va(null!==s&&void 0!==s?s:u))}}),t)}))),Sa.apply(this,arguments)}var Ta=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n,r){var o,a,s,u,d,h,f,m,v,p,b,g,w,y;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(o=Ha(n,r),Object(c["l"])(o)){t.n=1;break}return t.a(2);case 1:if(Object(l["i"])(e)&&0!==e.length){t.n=2;break}throw"至少需要选中一个节点才能激活下载";case 2:if(a=Object(c["S"])(o),a){t.n=3;break}throw"设计狮没有为该画板导出「SVG」格式的切图";case 3:if(s=0,u={},d=[],e.forEach((function(t){if(Object(l["k"])(t)&&t.markedForExport){var e=Object(c["H"])(t);if(Object(l["j"])(e)){var n=Object(c["K"])(e),i=ga.filepath;i=i.replace("{$name$}",n);var r=u[i];if(r){var o=++r.index;i=ga.filepath,i=i.replace("{$name$}","".concat(n,"(").concat(o,")"))}else u[i]={index:0};d.push({filepath:i,node:t,nodeName:e}),s+=1}}})),0!==d.length){t.n=4;break}throw"至少需要选中一个节点才能激活下载";case 4:if(1!==d.length){t.n=6;break}return h=d[0],f=h.node,m=h.nodeName,v=Ya(o,f),p=v.png,b=v.base64Png,g="".concat(m,".svg"),t.n=5,Object(c["r"])(g,p,b);case 5:return t.a(2,t.v);case 6:return w=new oa,t.n=7,w.init();case 7:return d.forEach((function(t){var e=t.node,n=t.filepath,i=Ya(o,e),r=i.png,a=i.base64Png;w.addFile(n,r,a)})),y=1===s?d[0].nodeName:o.name,t.n=8,w.start("svg_".concat(y,".zip"));case 8:return t.a(2,t.v);case 9:return t.a(2)}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}();function Oa(t){return Ia.apply(this,arguments)}function Ia(){return Ia=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a,s,l,u,d;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.n=1,new Promise((function(t,n){var i=new Image;i.onerror=function(t){var e=t.target;e.onerror=e.onload=null,n("img load error")},i.onload=function(e){var n=e.target;n.onerror=n.onload=null,t(n)},i.src=c["O"].combineResourcePath(e)}));case 1:if(r=t.v,o=null!==(n=r.naturalWidth)&&void 0!==n?n:r.width,a=c["g"]/o,!(a>=1)){t.n=2;break}return t.a(2,e);case 2:return l="function"===typeof self.OffscreenCanvas,t.p=3,s=l?new self.OffscreenCanvas(10,10):document.createElement("canvas"),l||(s.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(s)),u=s.getContext("2d"),t.n=4,La(r,s,u,l,a);case 4:return t.a(2,t.v);case 5:return t.p=5,s&&(d=s.parentNode,d&&d.removeChild(s)),s=null,t.f(5);case 6:return t.a(2)}}),t,null,[[3,,5,6]])}))),Ia.apply(this,arguments)}function Aa(t){if(!t)throw new Error("artboard is null");var e=t.boundsInArtboard,n=t.boundsInParent,i=t.mlConfig,r=t.scale;if(e){var o=e.width,a=e.height;return{width:o,height:a}}if(n){var s,c,l=n.width,u=n.height,d=null!==(s=null!==(c=null===i||void 0===i?void 0:i.artScale)&&void 0!==c?c:r)&&void 0!==s?s:1;if(0==d&&(d=1),l=A(l,d,!1),u=A(u,d,!1),isNaN(l)||isNaN(u))throw new Error("artboard size error,bounds=".concat(JSON.stringify(n),",scale=").concat(d));return{width:l,height:u}}throw new Error("try get artboard size failed")}function Fa(t,e,n,i){return ja.apply(this,arguments)}function ja(){return ja=Object(r["a"])(Object(i["a"])().m((function t(e,n,o,a){var s,l,u,d,h,f=arguments;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(s=f.length>4&&void 0!==f[4]?f[4]:2,Object(c["l"])(a)){t.n=1;break}return t.a(2);case 1:return c["O"].inCloudMode&&(u=Aa(a),d=u.width,h=u.height,d=Math.ceil(d*s),h=Math.ceil(h*s),l=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return r="function"===typeof self.OffscreenCanvas,t.p=1,n=r?new self.OffscreenCanvas(10,10):document.createElement("canvas"),r||(n.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(n)),o=n.getContext("2d"),t.n=2,Da(e,n,o,r,d,h);case 2:return t.a(2,t.v);case 3:return t.p=3,n&&(a=n.parentNode,a&&a.removeChild(n)),n=null,t.f(3);case 4:return t.a(2)}}),t,null,[[1,,3,4]])})));return function(e){return t.apply(this,arguments)}}()),t.a(2,Object(c["r"])(e,n,o,l))}}),t)}))),ja.apply(this,arguments)}function _a(t,e,n){return Ma.apply(this,arguments)}function Ma(){return Ma=Object(r["a"])(Object(i["a"])().m((function t(e,n,o){var a,s,u,d,h,f,m,v,p,b,g,w,y;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(Object(l["i"])(n)&&0!==n.length){t.n=1;break}throw"至少需要选中一个画板才能激活下载";case 1:if(o*=2,a=[],s={},n.forEach((function(t){if(Object(c["l"])(t)){var e=Object(c["K"])(t.name),n=e,i=s[n],r=t.artboardPreviewPng,u=Object(l["j"])(r)&&/\.webp$/i.test(r)?".webp":".png",d=t.artboardPreviewJS;if(i){var h=++i.index;n="".concat(e,"(").concat(h,")")}else s[n]={index:0};var f="".concat(e).concat(1===o?"":"@".concat(o,"x")).concat(u);n+=u,a.push({filename:n,pngurl:r,jsurl:d,artboard:t,filenameAlone:f})}})),0!==a.length){t.n=2;break}throw"至少需要选中一个画板才能激活下载";case 2:if(1!==a.length){t.n=4;break}return u=a[0],d=u.filenameAlone,h=u.pngurl,f=u.jsurl,m=u.artboard,t.n=3,Fa(d,h,f,m,o);case 3:return t.a(2,t.v);case 4:return v=new oa,t.n=5,v.init();case 5:return a.forEach((function(t){var e=t.filename,n=t.pngurl,i=t.jsurl,r=t.artboard,a=Aa(r),s=a.width,c=a.height;s=Math.ceil(s*o),c=Math.ceil(c*o),v.addFile(e,n,i,{width:s,height:c})})),t.p=6,c["O"].inCloudMode&&(g="function"===typeof self.OffscreenCanvas,p=g?new self.OffscreenCanvas(10,10):document.createElement("canvas"),g||(p.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(p)),w=p.getContext("2d"),b=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return r=n.width,o=n.height,t.n=1,Da(e,p,w,g,r,o);case 1:return t.a(2,t.v)}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),t.n=7,v.start(e+".zip",b);case 7:return t.a(2,t.v);case 8:return t.p=8,p&&(y=p.parentNode,y&&y.removeChild(p)),p=null,t.f(8);case 9:return t.a(2)}}),t,null,[[6,,8,9]])}))),Ma.apply(this,arguments)}function La(t,e,n,i,r){return Pa.apply(this,arguments)}function Pa(){return Pa=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o,a){var s,c,l,u,d,h,f=arguments;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(s=f.length>5&&void 0!==f[5]?f[5]:.7,1!==a){t.n=1;break}return t.a(2,e);case 1:return t.n=2,jt(e);case 2:if(c=t.v,l=c.naturalWidth||c.width,u=c.naturalHeight||c.height,d=Math.round(l*a),h=Math.round(u*a),n.width=d,n.height=h,r.drawImage(c,0,0,l,u,0,0,d,h),!o||!n.convertToBlob){t.n=4;break}return t.n=3,n.convertToBlob({type:"image/png",quality:s});case 3:return t.a(2,t.v);case 4:return t.n=5,qt(n,"image/png",s);case 5:return t.a(2,t.v)}}),t)}))),Pa.apply(this,arguments)}function Da(t,e,n,i,r,o){return Na.apply(this,arguments)}function Na(){return Na=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o,a,s){var c,l,u,d,h=arguments;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return c=h.length>6&&void 0!==h[6]?h[6]:.7,t.n=1,jt(e);case 1:if(l=t.v,u=l.naturalWidth||l.width,d=l.naturalHeight||l.height,Math.abs(u-a)<=5&&(a=u),Math.abs(d-s)<=5&&(s=d),u!==a||d!==s){t.n=2;break}return t.a(2,e);case 2:if(n.width=a,n.height=s,r.drawImage(l,0,0,u,d,0,0,a,s),!o||!n.convertToBlob){t.n=4;break}return t.n=3,n.convertToBlob({type:"image/png",quality:c});case 3:return t.a(2,t.v);case 4:return t.n=5,qt(n,"image/png",c);case 5:return t.a(2,t.v)}}),t)}))),Na.apply(this,arguments)}function Ea(t,e,n,i,r){return Ra.apply(this,arguments)}function Ra(){return Ra=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o,a){var s,c,l,u,d,h,f=arguments;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return s=f.length>5&&void 0!==f[5]?f[5]:.7,t.n=1,jt(e);case 1:if(c=t.v,l=c.naturalWidth||c.width,u=c.naturalHeight||c.height,d=Math.round(l*a),h=Math.round(u*a),n.width=d,n.height=h,r.drawImage(c,0,0,l,u,0,0,d,h),!o||!n.convertToBlob){t.n=3;break}return t.n=2,n.convertToBlob({type:"image/png",quality:s});case 2:return t.a(2,t.v);case 3:return t.n=4,qt(n,"image/png",s);case 4:return t.a(2,t.v)}}),t)}))),Ra.apply(this,arguments)}function Va(t,e,n,i,r){return Ba.apply(this,arguments)}function Ba(){return Ba=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o,a){var s,c,l;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,jt(e);case 1:if(s=t.v,c=s.naturalWidth||s.width,l=s.naturalHeight||s.height,n.width=c,n.height=l,r.fillStyle="#fff",r.fillRect(0,0,c,l),r.drawImage(s,0,0,c,l,0,0,c,l),!o||!n.convertToBlob){t.n=3;break}return t.n=2,n.convertToBlob({type:"image/jpeg",quality:a});case 2:return t.a(2,t.v);case 3:return t.n=4,qt(n,"image/jpeg",a);case 4:return t.a(2,t.v)}}),t)}))),Ba.apply(this,arguments)}function Ha(t,e){var n;if(!t)return null;var i=t.artboardVerData,r=t.artboard;return e||(i=null),null!==(n=null!==i&&void 0!==i?i:r)&&void 0!==n?n:null}var Ua,Ga,Wa=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n,o,s,u,d,h){var f,m,v,p,b,g,w,y,k,C,x,S,T,O,I,A,F,j,_,M,L,P,D,N,E,R,V,B;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(f=Ha(u,h),Object(c["l"])(f)){t.n=1;break}return t.a(2);case 1:if(Object(l["i"])(s)&&0!==s.length){t.n=2;break}throw"至少需要选中一个节点才能激活下载";case 2:if(Object(l["k"])(o)){t.n=3;break}throw"至少需要选中一个图片规格才能激活下载";case 3:if(!Object(c["R"])(f)){t.n=4;break}m=a["fb"].PNG,t.n=8;break;case 4:if(!Object(c["T"])(f)){t.n=5;break}m=a["fb"].WEBP,t.n=8;break;case 5:if(!Object(c["S"])(f)){t.n=6;break}m=a["fb"].SVG,t.n=8;break;case 6:if(!Object(c["Q"])(f)){t.n=7;break}m=a["fb"].PDF,t.n=8;break;case 7:throw"设计狮没有为该画板导出任何格式的切图";case 8:if(v=m===a["fb"].SVG,p=m===a["fb"].PDF,b=[],v||p?o[1]&&b.push(1):(g=f.mlConfig.scalesObj,Object.keys(o).forEach((function(t){g[t]&&o[t]&&b.push(t)}))),0!==b.length){t.n=9;break}throw"至少需要选中一个图片规格才能激活下载";case 9:if(w=ka(u,e,n,!1,!1,v,p,h),y=[],k={},C={},b.forEach((function(t){var e=w.find((function(e){return e.enabled&&e.value.scale==t}));if(null==e)throw"意外的程序性异常,丢失downloadType";k[t]=e.value.filepath})),x=!v&&!p&&m===a["fb"].WEBP,S=0,s.forEach((function(t){if(Object(l["k"])(t)&&t.markedForExport){var e=Object(c["H"])(t);if(Object(l["j"])(e)){var n=Object(c["K"])(e);b.forEach((function(i){var r=k[i];r=r.replace("{$name$}",n).replace(/\.(png|svg|pdf)$/i,".jpg");var o=C[r];if(o){var a=++o.index;r=k[i],r=r.replace("{$name$}","".concat(n,"(").concat(a,")")).replace(/\.(png|svg|pdf)$/i,".jpg")}else C[r]={index:0};y.push({filepath:r,node:t,scale:i,nodeName:e})})),S+=1}}})),0!==y.length){t.n=10;break}throw"至少需要选中一个节点才能激活下载";case 10:if(O="function"===typeof self.OffscreenCanvas,t.p=11,T=O?new self.OffscreenCanvas(10,10):document.createElement("canvas"),O||(T.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(T)),I=T.getContext("2d"),1!==y.length){t.n=14;break}if(A=y[0],F=A.node,j=A.scale,_=A.nodeName,M=p?Xa(f,F):v?Ya(f,F):za(f,F,j,x),L=M.png,P=M.base64Png,D=Object(c["C"])(e,j,_,a["fb"].JPG),!p){t.n=12;break}return t.a(2,fa(D,L,d,[j]));case 12:return t.n=13,Object(c["s"])(D,L,P,function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Va(e,T,I,O,d);case 1:return t.a(2,t.v)}}),t)})));return function(e){return t.apply(this,arguments)}}());case 13:return t.a(2,t.v);case 14:return N=new oa,t.n=15,N.init();case 15:y.forEach((function(t){var e=t.node,n=t.scale,i=t.filepath,r=p?Xa(f,e):v?Ya(f,e):za(f,e,n,x),o=r.png,a=r.base64Png;N.addFile(i,o,a,n,p)})),E=1===S?y[0].nodeName:f.name,B=e,t.n=B===a["c"].ANDROID?16:B===a["c"].IOS?17:B===a["c"].WE_CHAT_MINI_PROGRAM?18:19;break;case 16:return R="android_",t.a(3,20);case 17:return R="ios_",t.a(3,20);case 18:return R="wxmp_",t.a(3,20);case 19:return R="web_",t.a(3,20);case 20:return t.n=21,N.start(R+E+".zip",function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n,r){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(!r){t.n=2;break}return t.n=1,ca(e,d,[n]);case 1:return t.a(2,t.v[0]);case 2:return t.n=3,Va(e,T,I,O,d);case 3:return t.a(2,t.v)}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}());case 21:return t.a(2,t.v);case 22:return t.p=22,T&&(V=T.parentNode,V&&V.removeChild(T)),T=null,t.f(22);case 23:return t.a(2)}}),t,null,[[11,,22,23]])})));return function(e,n,i,r,o,a,s){return t.apply(this,arguments)}}(),$a=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o,s,u,d){var h,f,m,v,p,b,g,w,y,k,C,x,S,T,O,I,A,F,j,_,M;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(h=Ha(s,d),Object(c["l"])(h)){t.n=1;break}return t.a(2);case 1:if(Object(l["i"])(o)&&0!==o.length){t.n=2;break}throw"至少需要选中一个节点才能激活下载";case 2:if(Object(l["k"])(r)){t.n=3;break}throw"至少需要选中一个图片规格才能激活下载";case 3:if(!u){t.n=5;break}if(f=Object(c["T"])(h),f){t.n=4;break}throw"设计狮没有为该画板导出「WEBP」格式的切图";case 4:t.n=6;break;case 5:if(f=Object(c["R"])(h),f){t.n=6;break}throw"设计狮没有为该画板导出「PNG」格式的切图";case 6:if(m=[],v=h.mlConfig.scalesObj,Object.keys(r).forEach((function(t){v[t]&&r[t]&&m.push(t)})),0!==m.length){t.n=7;break}throw"至少需要选中一个图片规格才能激活下载";case 7:if(p=ka(s,e,n,!1,!1,!1,!1,d),b=[],g={},w={},m.forEach((function(t){var e=p.find((function(e){return e.enabled&&e.value.scale==t}));if(null==e)throw"意外的程序性异常,丢失downloadType";g[t]=e.value.filepath})),y=0,o.forEach((function(t){if(Object(l["k"])(t)&&t.markedForExport){var e=Object(c["H"])(t);if(Object(l["j"])(e)){var n=Object(c["K"])(e);m.forEach((function(i){var r=g[i];r=r.replace("{$name$}",n),u&&(r=r.replace(/\.png$/i,".webp"));var o=w[r];if(o){var a=++o.index;r=g[i],r=r.replace("{$name$}","".concat(n,"(").concat(a,")")),u&&(r=r.replace(/\.png$/i,".webp"))}else w[r]={index:0};b.push({filepath:r,node:t,scale:i,nodeName:e})})),y+=1}}})),0!==b.length){t.n=8;break}throw"至少需要选中一个节点才能激活下载";case 8:if(1!==b.length){t.n=10;break}return k=b[0],C=k.node,x=k.scale,S=k.nodeName,T=za(h,C,x,u),O=T.png,I=T.base64Png,A=Object(c["C"])(e,x,S,u?a["fb"].WEBP:a["fb"].PNG),t.n=9,Object(c["r"])(A,O,I);case 9:return t.a(2,t.v);case 10:return F=new oa,t.n=11,F.init();case 11:b.forEach((function(t){var e=t.node,n=t.scale,i=t.filepath,r=za(h,e,n,u),o=r.png,a=r.base64Png;F.addFile(i,o,a)})),j=1===y?b[0].nodeName:h.name,M=e,t.n=M===a["c"].ANDROID?12:M===a["c"].IOS?13:M===a["c"].WE_CHAT_MINI_PROGRAM?14:15;break;case 12:return _="android_",t.a(3,16);case 13:return _="ios_",t.a(3,16);case 14:return _="wxmp_",t.a(3,16);case 15:return _="web_",t.a(3,16);case 16:return t.n=17,F.start(_+j+".zip");case 17:return t.a(2,t.v);case 18:return t.a(2)}}),t)})));return function(e,n,i,r,o,a,s){return t.apply(this,arguments)}}(),za=function(t,e,n,i){if(!t||!e)return{};var r,o=t.artboardPath,a=e.exportPath,s=Object(c["L"])(n),l=i?".webp":".png",u=Object(c["x"])(t,"".concat(o,"/png/"),"".concat(a).concat(s).concat(l));return r=i?u.replace(/\/png\/(.*)\.webp$/,"/base64/$1.webp.js"):u.replace(/\/png\/(.*)\.png$/,"/base64/$1.js"),{png:u,base64Png:r}},Ya=function(t,e){if(!t||!e)return{};var n=t.artboardPath,i=e.exportPath,r=Object(c["x"])(t,"".concat(n,"/svg/"),"".concat(i,".svg")),o=r.replace(/\/svg\/(.*)\.svg$/,"/base64/$1@svg.js");return{png:r,base64Png:o}},Xa=function(t,e){if(!t||!e)return{};var n=t.artboardPath,i=e.exportPath,r=Object(c["x"])(t,"".concat(n,"/svg/"),"".concat(i,".pdf")),o=r.replace(/\/svg\/(.*)\.pdf$/,"/base64/$1@pdf.js");return{png:r,base64Png:o}},Ka={components:{DrawControl:Jo},methods:{onCanvasKeyDown:function(t){var e=t.keyCode,n=t.target;if(n){var i=n.tagName;if("INPUT"!==i&&"TEXTAREA"!==i){var r=n,o=document.documentElement;while(null!=r&&r!=o){if(r.isContentEditable)return;r=r.parentNode}if(46===e||8===e){var a=this.drawInfo,s=this.histories,c=this.historyIndex,l=a.selectItem;if(!l)return;a.selectItem=null;var u=new zt;u.action=Ct.Deleted,u.dragTarget=l,u.drawOffset=new wt,u.makePoint(),u.isVaildData(),c<s.length-1&&s.splice(c+1),s.push(u),a.historyIndex=s.length-1;var d=u.dragTarget,h=s.findIndex((function(t){return t===d}));if(-1===h)console.error("异常信息,无法找到原始数据",u);else{var f=0;while(-1!==f){if(f=s.findIndex((function(t){return t.action===Ct.Move&&t.dragFrom===h})),-1===f)break;var m=s[f];d.dragOn=f,h=f,d=m}u.dragFrom=h,d.dragOn=s.length-1}this.drawAll()}}}},getCanvasDrawNum:function(t){return Math.round(t*this.canvasScale)},getLocation:function(t){var e=t.pageX,n=t.pageY,i=t.sceneX,r=t.sceneY,o=t.scale,a=t.sceneWidth,s=t.sceneHeight,c=e,l=n,u=this.sceneOffsetX,d=this.sceneOffsetY,h=this.rect,f=(a-h.width*o)/2,m=(s-h.height*o)/2;return c-=u,l-=d,c-=f,l-=m,c-=i,l-=r,c=Math.round(c/o),l=Math.round(l/o),new wt(c,l)},saveTextToHistory:function(){if(this.isCurrentInTextMode){var t=this.currentDrawData;if(t.isVaildData()){t.makePoint(this.getCurrentContext(),this.currentSceneInfo);var e=this.histories,n=this.historyIndex;n<e.length-1&&e.splice(n+1),e.push(t),this.drawInfo.historyIndex=e.length-1,this.drawHistories(t)}return this.currentDrawData=null,!0}return!1},getHistoryTagetWithDragFrom:function(t){if(null==t)return null;if(t.action!==Ct.Move)return null;var e=t.dragFrom;if(-1===e)return null;var n=this.histories;while(-1!==e){var i=n[e];if(!i)return null;if(i.action!==Ct.Move)return i;if(e=i.dragFrom,-1===e)return null}},getHistoryByPointExact:function(t){for(var e=this.histories,n=Math.min(this.historyIndex+1,e.length),i=(new w).set(t.x,t.y,1,1),r=n-1;r>=0;r--){var o=e[r],a=this.getRectOverlapDrawData(i,e,o,r);if(null!=a)return a}return null},getHistoryByPoint:function(t){for(var e=this.histories,n=Math.min(this.historyIndex+1,e.length),i=(new w).set(t.x,t.y,1,1),r=n-1;r>=0;r--){var o=e[r],a=this.getRectOverlapDrawData(i,e,o,r);if(null!=a)return a}return null},getRectOverlapDrawData:function(t,e,n,i){var r,o=n.action,a=null!==(r=n.dragOffset)&&void 0!==r?r:new wt;if(o===Ct.Deleted)return null;if(o===Ct.Move){if(-1!==n.dragOn){var s=e[n.dragOn];if(s&&(s.action===Ct.Move||s.action===Ct.Deleted)&&s.dragFrom===i)return null}var c=this.getHistoryTagetWithDragFrom(n);if(!c)return null;var l=c.eventRect;if(!l)return null;var u=(new w).set(l.x+a.x,l.y+a.y,l.width,l.height);if(u.isOverlap(t))return{target:c,offset:a}}else{var d=Jt.getHistoryTagetWithDragOn(e,n,this.historyIndex);if(d&&d.action===Ct.Deleted)return null;d||(d=n);var h,f=n.eventRect;if(d===n)return f&&f.isOverlap(t)?{target:d,offset:new wt}:null;a=null!==(h=d.dragOffset)&&void 0!==h?h:new wt;var m=(new w).set(f.x+a.x,f.y+a.y,f.width,f.height);if(m.isOverlap(t))return{target:n,offset:a}}return null},onMouseMoveInCanvas:function(t){var e=this.currentDrawData,n=this.drawInfo,i=this.inDrawAndNotMove,r=this.histories,o=this.moveInfo,a=n.action;if(a===Ct.Move&&!e&&0!==r.length){var s=this.inMacOS?t.metaKey:t.ctrlKey;if(!i||!s){o.pageX=t.pageX,o.pageY=t.pageY,o.scale=this.scale,o.sceneX=this.sceneX,o.sceneY=this.sceneY,o.sceneWidth=this.sceneWidth,o.sceneHeight=this.sceneHeight;var c=this.getLocation(o),l=this.getHistoryByPointExact(c),u=n.enterItem,d=null===l||void 0===l?void 0:l.target;u!=d&&(n.enterItem=d,this.drawAll())}}},onMouseDown:function(t){var e=this.inMacOS?t.metaKey:t.ctrlKey,n=this.startInfo,i=this.inDrawAndNotMove,r=this.drawAction,o=this.drawInfo;if(i){if(e)return;t.stopPropagation()}if(r!==Ct.Text||!this.saveTextToHistory()){switch(r){case Ct.Move:case Ct.Brush:case Ct.Text:case Ct.Rectangle:case Ct.Ellipse:case Ct.Arrow:n.pageX=t.pageX,n.pageY=t.pageY,n.scale=this.scale,n.sceneX=this.sceneX,n.sceneY=this.sceneY,n.sceneWidth=this.sceneWidth,n.sceneHeight=this.sceneHeight;break;default:return}var a=this.getLocation(n),s=new zt;if(r===Ct.Move){var c=this.getHistoryByPoint(a);if(null==c)return void(o.selectItem&&(o.selectItem=null,this.drawAll()));if(c.action===Ct.Deleted)return;s.dragTarget=c.target,s.dragOffset=c.offset}switch(this.currentDrawData=s,s.action=r,s.color=this.currentColor.color,r!==Ct.Move&&this.cleanCurrent(),r){case Ct.Move:s.startPoint=s.endPoint=a,this.drawHistories(),this.drawCurrent();break;case Ct.Brush:s.brushSize=this.currentBrushSize,s.points=[a];break;case Ct.Rectangle:case Ct.Ellipse:case Ct.Arrow:s.brushSize=this.currentBrushSize,s.startPoint=a;break;case Ct.Text:return s.startPoint=a,s.text="",s.fontSize=this.currentFontSize,s.lineHeight=s.fontSize+2,s.textareaSize=new Nt(Rt,s.lineHeight),void(s.family=l["e"]?'-apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n\t\t"Helvetica Neue", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"':'-apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", "PingFang SC", "Hiragino Sans GB",\n\t\t\t"Helvetica Neue", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"')}window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)}},onMouseMove:function(t){var e=this.currentDrawData;if(e){var n=e.action;if(n!==Ct.Text){var i=this.getCurrentContext();if(i){var r=this.getLocation({pageX:t.pageX,pageY:t.pageY,scale:this.scale,sceneX:this.sceneX,sceneY:this.sceneY,sceneWidth:this.sceneWidth,sceneHeight:this.sceneHeight}),o=this.currentSceneInfo;switch(n){case Ct.Move:e.endPoint=r,this.drawCurrent();break;case Ct.Brush:e.points.push(r),this.cleanCurrent(i),Jt.drawBrush(i,e,o,!1,!1,null);break;case Ct.Rectangle:e.endPoint&&this.cleanCurrent(i),e.endPoint=r,Jt.drawRectangle(i,e,o);break;case Ct.Ellipse:e.endPoint&&this.cleanCurrent(i),e.endPoint=r,Jt.drawEllipse(i,e,o);break;case Ct.Arrow:e.endPoint&&this.cleanCurrent(i),e.endPoint=r,Jt.drawArrow(i,e,o);break;default:return}}}}},onMouseUp:function(t){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp);var e=this.currentDrawData;this.currentDrawData=null;var n=this.drawInfo;if(e&&e.isVaildData()){e.makePoint();var i=this.histories,r=this.historyIndex;if(r<i.length-1&&i.splice(r+1),i.push(e),n.historyIndex=i.length-1,e.action===Ct.Move){var o=e.dragTarget,a=i.findIndex((function(t){return t===o}));if(-1===a)console.error("异常信息,无法找到原始数据",e);else{var s=0;while(-1!==s){if(s=i.findIndex((function(t){return t.action===Ct.Move&&t.dragFrom===a})),-1===s)break;var c=i[s];o.dragOn=s,a=s,o=c}e.dragFrom=a,o.dragOn=i.length-1}n.selectItem=this.getDrawDataFromMouse(t)}this.drawHistories(e.action===Ct.Move?null:e),this.cleanCurrent()}else e.action===Ct.Move&&(n.selectItem=this.getDrawDataFromMouse(t),this.drawHistories(),this.cleanCurrent())},getDrawDataFromMouse:function(t){var e=this.getLocation({pageX:t.pageX,pageY:t.pageY,scale:this.scale,sceneX:this.sceneX,sceneY:this.sceneY,sceneWidth:this.sceneWidth,sceneHeight:this.sceneHeight}),n=this.getHistoryByPointExact(e);return null===n||void 0===n?void 0:n.target},getDrawTarget:function(){},drawHistories:function(t){var e,n=this.getHistoryContext();if(n){var i,r=!t,o=this.histories,a=this.historyIndex,s=this.drawInfo;if(r){if(n.clearRect(0,0,this.getCanvasDrawNum(this.sceneWidth),this.getCanvasDrawNum(this.sceneHeight)),-1===a)return;if(i=a>=o.length-1?o:o.slice(0,a+1),0===i.length)return}else i=[t];var c=this.currentSceneInfo,l=null===(e=this.currentDrawData)||void 0===e?void 0:e.dragTarget;i.forEach((function(t){if(t!==l){var e,i=s.action===Ct.Move,r=i&&t==s.enterItem,u=i&&t==s.selectItem,d=t.action;switch(d){case Ct.Brush:case Ct.Rectangle:case Ct.Ellipse:case Ct.Arrow:case Ct.Text:var h=Jt.getHistoryTagetWithDragOn(o,t,a);if(h){if(h.action===Ct.Deleted)return;e=h.dragOffset}break}switch(d){case Ct.Brush:var f=!1;Jt.drawBrush(n,t,c,r,u,e,f);break;case Ct.Rectangle:Jt.drawRectangle(n,t,c,r,u,e);break;case Ct.Ellipse:Jt.drawEllipse(n,t,c,r,u,e);break;case Ct.Arrow:Jt.drawArrow(n,t,c,r,u,e);break;case Ct.Text:Jt.drawText(n,t,c,r,u,e);break;default:return}}}))}},cleanCurrent:function(t){(t||(t=this.getCurrentContext(),t))&&t.clearRect(0,0,this.getCanvasDrawNum(this.sceneWidth),this.getCanvasDrawNum(this.sceneHeight))},drawCurrent:function(){var t=this.currentDrawData;if(t){var e=this.getCurrentContext();if(e){this.cleanCurrent(e);var n=this.currentSceneInfo,i=t.action,r=i!==Ct.Move,o=!r;switch(i){case Ct.Move:var a=t.dragTarget;if(!a)return;var s=t.startPoint,c=t.endPoint,l=t.dragOffset;if(!s||!c)return;var u=new wt(c.x-s.x+l.x,c.y-s.y+l.y);switch(a.action){case Ct.Brush:var d=!1;Jt.drawBrush(e,a,n,r,o,u,d);break;case Ct.Rectangle:Jt.drawRectangle(e,a,n,r,o,u);break;case Ct.Ellipse:Jt.drawEllipse(e,a,n,r,o,u);break;case Ct.Arrow:Jt.drawArrow(e,a,n,r,o,u);break;case Ct.Text:Jt.drawText(e,a,n,r,o,u);break}break;case Ct.Brush:Jt.drawBrush(e,t,n,!1,!1,null);break;case Ct.Rectangle:Jt.drawRectangle(e,t,n);break;case Ct.Ellipse:Jt.drawEllipse(e,t,n);break;case Ct.Arrow:Jt.drawArrow(e,t,n);break;default:return}}}},getHistoryContext:function(){var t=this.$refs.canvas_history;if(t){var e=t.getContext("2d");return e}},getCurrentContext:function(){var t=this.$refs.canvas_current;if(t){var e=t.getContext("2d");return e}},drawAll:function(){var t=this;this.visible&&(cancelAnimationFrame(this.handleDraw),this.handleDraw=requestAnimationFrame((function(){try{t.drawCurrent(),t.drawHistories()}finally{}})))},measureTextSize:function(t,e,n){var i,r=this.currentSceneInfo,o=r.scale;o=1;var a=Math.max(12,Math.round(e.fontSize*o*1e3)/1e3);t.font="".concat(a,"px ").concat(null!==(i=e.family)&&void 0!==i?i:"sans-serif");for(var s=e.lineHeight,c=n||e.text,l=new Nt(0,s),u=0,d=Math.round(Bt*o),h={},f=0,m=c.length;f<m;f++){var v=c[f];if("\n"!==v){if("\r"!==v){var p=h[v];p||(p=h[v]=Math.ceil(t.measureText(v).width));var b=u+p+1;b>d?(l.width=Math.max(u,l.width),l.height+=s,u=p):u=b}}else l.width=Math.max(u,l.width),u=0,l.height+=s}return l.width=Math.ceil(Math.max(u,l.width)/o),l},resetTextareaSize:function(){var t=this.currentDrawData;if(t&&t.action===Ct.Text){var e=this.$refs.input;if(e){var n=this.getCurrentContext();if(n){var i=this.measureTextSize(n,t,e.value);i.width=Math.max(i.width,Rt),t.textareaSize=i}}}},onInputKeyDown:function(t){var e=t.keyCode;switch(e){case 27:this.isCurrentInTextMode&&(this.currentDrawData=null)}},resetData:function(){this.currentDrawData=null;var t=this.drawInfo,e=this.histories;e.splice(0),t.historyIndex=-1,t.action=Ct.None}},watch:{inElementSelect:function(t){t?window.addEventListener("keydown",this.onCanvasKeyDown):window.removeEventListener("keydown",this.onCanvasKeyDown)},artboardInComment:function(t){t||(this.editComment.drawing=!1)},historyIndexChanges:function(){this.drawAll()},visible:function(t){t&&this.resetData()},curArtboardId:function(){this.editComment.drawing=!1},"curArtboardVerData.lastVersionId":function(){this.editComment.drawing=!1},currentFontSize:function(t){var e=this;if(this.isCurrentInTextMode){var n=this.currentDrawData;n&&(n.fontSize=t,n.lineHeight=n.fontSize+2,requestAnimationFrame((function(){e.resetTextareaSize();var t=e.$refs.input;t&&t.focus()})))}},scale:function(){var t=this;requestAnimationFrame((function(){t.resetTextareaSize()}))},currentColor:function(t){var e=this;if(this.isCurrentInTextMode){var n=this.currentDrawData;n&&(n.color=t.color,requestAnimationFrame((function(){var t=e.$refs.input;t&&t.focus()})))}},isCurrentInTextMode:function(t){var e=this;t&&this.$nextTick((function(){requestAnimationFrame((function(){var t=e.$refs.input;t&&t.focus()}))}))},drawAction:function(t,e){if(e===Ct.Text&&this.saveTextToHistory(),e===Ct.Move||t===Ct.Move){var n=this.drawInfo;n.enterItem=n.selectItem=null,this.drawAll()}},"histories.length":function(t,e){t<e&&this.drawAll()},currentSceneInfo:function(){this.drawAll()}},computed:{inElementSelect:function(){var t=this.drawInfo,e=t.action;return e===Ct.Move&&null!=t.selectItem},inElementMoveState:function(){var t=this.drawInfo,e=t.action;return e===Ct.Move&&null!=t.enterItem},historyIndexChanges:function(){return this.drawInfo.historyIndexChanges},isCurrentInTextMode:function(){var t=this.currentDrawData;return t&&t.action===Ct.Text},currentSceneInfo:function(){var t=new Xt,e=this.sceneX,n=this.sceneY,i=this.scale,r=this.sceneWidth,o=this.sceneHeight,a=this.canvasScale,s=this.sceneOffsetX,c=this.sceneOffsetY,l=this.getLocation({pageX:s,pageY:c,sceneX:e,sceneY:n,scale:i,sceneWidth:r,sceneHeight:o});return t.offset=l,t.scale=i,t.canvasScale=a,t.sceneWidth=r,t.sceneHeight=o,t},currentBrushSize:function(){return this.drawInfo.brushSize},currentFontSize:function(){return this.drawInfo.fontSize},textareaStyleLeft:function(){var t=this.currentSceneInfo,e=this.currentDrawData;return Math.round((e.startPoint.x-t.offset.x-Vt)*this.scale)},textareaStyle:function(){if(this.isCurrentInTextMode){var t=this.currentDrawData,e=this.currentSceneInfo,n=this.scale,i=Math.max(1,Math.round(t.lineHeight*n)),r=Math.max(1,Math.round(t.fontSize*n*1e3)/1e3),o=1,a=12;return r<a&&(o=r/a,r=a),{backgroundColor:this.currentTextBackgroundColor,borderColor:this.currentColor.color,color:this.currentColor.color,fontSize:r+"px",transform:"scale(".concat(o.toFixed(5),")"),lineHeight:i+"px",left:this.textareaStyleLeft+"px",top:Math.round((t.startPoint.y-e.offset.y-t.lineHeight/2-Vt+1)*n)+"px",padding:Math.round(Vt*n)+"px",height:Math.max(1,Math.round(t.textareaSize.height*n))+"px",width:Math.max(1,Math.round((t.textareaSize.width+2)*n/o))+"px"}}},currentTextBackgroundColor:function(){var t=this.currentColor.color,e=this.drawAction;return e===Ct.Text&&(t=Ht(t,.2)),t},currentColor:function(){var t;return null!==(t=Ot[this.drawInfo.colorIndex])&&void 0!==t?t:Ot[0]},artboardDetail:function(){return this.$store.state.artboardDetail},curArtboardVerData:function(){return Ha(this.curArtboard,this.inCloudViewerArtboardInfoMode)},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardScale:function(){var t,e=null===(t=this.curArtboardVerData)||void 0===t?void 0:t.scale;return e>0?e:1},rect:function(){var t,e=this.curArtboardVerData,n=this.artboardScale,i=null!==(t=null===e||void 0===e?void 0:e.boundsInParent)&&void 0!==t?t:new w;return(new w).set(0,0,Math.round(i.width*n),Math.round(i.height*n))},inDrawAndNotMove:function(){var t=this.drawAction;switch(t){case Ct.None:return!1;default:return!0}},drawInfo:function(){return this.editComment.drawInfo},EnumDrawAction:function(){return Ct},drawAction:function(){return this.drawInfo.action},histories:function(){return this.drawInfo.histories},historyIndex:function(){return this.drawInfo.historyIndex},visible:function(){return this.editComment.drawing}},data:function(){return{handleDraw:0,canvasScale:Object(c["J"])(),startInfo:{pageX:0,pageY:0,sceneX:0,sceneY:0,scale:1,sceneWidth:0,sceneHeight:0},moveInfo:{pageX:0,pageY:0,sceneX:0,sceneY:0,scale:1,sceneWidth:0,sceneHeight:0},currentDrawData:null}},props:{sceneWidth:Number,sceneHeight:Number,sceneX:Number,sceneY:Number,sceneOffsetX:Number,sceneOffsetY:Number,scale:Number},created:function(){this.resetData()},beforeDestroy:function(){this.editComment.drawing=!1,cancelAnimationFrame(this.handleDraw),window.removeEventListener("keydown",this.onCanvasKeyDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)}},qa=Ka,Ja=(n("ba17"),Object(Gr["a"])(qa,Eo,Ro,!1,null,"c05a49c4",null)),Qa=Ja.exports,Za=function(){var t=this,e=t._self._c;return e("div",{ref:"box",staticClass:"viewer-box",on:{contextmenu:function(t){t.preventDefault()}}},[t.fetchState===t.FetchState.Fetching||t.initInfo.fetchState===t.FetchState.Fetching?e("div",{staticClass:"loading"},[t._v("图片加载中...")]):t.fetchState===t.FetchState.Error||t.initInfo.fetchState===t.FetchState.Error?e("div",{staticClass:"error"},[t._v(t._s(t.initInfo.fetchState===t.FetchState.Error?t.initInfo.errorText:t.errorText)+","),e("a",{attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v("重新加载")])]):t._e(),e("div",{staticClass:"canvas-box"},[e("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:t.canvasWidth,height:t.canvasHeight}})])])},ts=[],es=!1,ns=[],is={};function rs(){clearTimeout(Ga),Ga=setTimeout((function(){if(Ua){try{is={},Ua.terminate()}catch(t){}Ua=null}}),12e4)}function os(t,e){return as.apply(this,arguments)}function as(){return as=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o,a,s,c,l,u;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if("string"===typeof e&&0!==e.indexOf("blob:")){t.n=1;break}return t.a(2,{src:e,isBlob:!1,disposeBlobUrl:function(){}});case 1:if(r=location,o=r.href,a=r.origin,s=new URL(e,o),a!==s.origin){t.n=2;break}return t.a(2,{src:e,isBlob:!1,disposeBlobUrl:function(){}});case 2:return t.n=3,fetch(e,{mode:"cors",credentials:"include",cache:"no-cache"});case 3:return c=t.v,t.n=4,c.text();case 4:if(l=t.v,c.ok){t.n=5;break}throw"[".concat(c.status,"]").concat(l);case 5:return"function"===typeof n&&(l=n(l)),u=new Blob([l],{type:"application/javascript"}),t.a(2,{src:URL.createObjectURL(u),isBlob:!0,disposeBlobUrl:function(){var t=this.src;t&&(URL.revokeObjectURL(t),this.src=null)}})}}),t)}))),as.apply(this,arguments)}function ss(){return new Promise((function(t,e){if(Ua)return t(Ua);if(es)ns.push({resolve:t,reject:e});else{es=!0;var n=function(t,e,n){var i=ns;ns=[],i.forEach((function(i){var r=i.resolve,o=i.reject;e?r(t):o(n)}))};Object(r["a"])(Object(i["a"])().m((function r(){var o,a,s;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:return o=Object(aa["a"])(),i.n=1,os(o+"marklion_cloud_web_worker.js",(function(t){return t=t.replace(/(['"])(?:\.\/)?(marklion_cloud_web_bg.wasm)\1/gi,"$1".concat(o,"$2$1")),t}));case 1:a=i.v,s=new Worker(a.src),s.addEventListener("message",(function(i){rs();var r=i.data;if(r&&!0===r.__mcww){delete r.__mcww;var o=r.command;switch(delete r.command,o){case"inited":var c;a&&(a.disposeBlobUrl(),a=null),es=!1,is={};try{if(r.success)Ua=s,t(s);else{try{s.terminate()}catch(u){}c=r.errMsg||"error",e(c)}}catch(u){}n(s,r.success,c);break;default:var l=is[o];l&&(delete is[o],l(r));break}}})),s.addEventListener("error",(function(t){a&&(a.disposeBlobUrl(),a=null),rs(),console.error(t)}));case 2:return i.a(2)}}),r)})))()}}))}function cs(t,e){is[t]=e}function ls(t){return us.apply(this,arguments)}function us(){return us=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a,s,l,u,d,h=arguments;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:for(n=c["O"].cloudKey,r=c["O"].userKey,o="".concat(e,"-").concat(Math.random().toString(16).substring(2)),a=h.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=h[l];return u={__mcww:!0,command:e,arg_len:s.length+1,arg0:"".concat(n,"-").concat(r||"null"),key:o},s.forEach((function(t,e){u["arg".concat(e+1)]=t})),t.n=1,ss();case 1:return d=t.v,t.n=2,new Promise((function(t,e){cs(o,(function(n){n&&(n.success?t(n.data):e(n.errMsg))})),d.postMessage(u)}));case 2:return t.a(2,t.v)}}),t)}))),us.apply(this,arguments)}var ds=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"key",null),Object(f["a"])(this,"worker",null),Object(f["a"])(this,"msg",null)}return Object(h["a"])(t,[{key:"startAsync",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o=this;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,ss();case 1:return r=t.v,this.worker=r,t.n=2,new Promise((function(t){n||(n={});var i=o.key=Math.random().toString(16).substring(2),r="filemd5.".concat(i,"."),a=r+"completed",s=r+"progress",c=o.msg=function(e){var i=e.data;if(i&&"object"===Object(M["a"])(i)&&!0===i.__filemd5){var r=i.command;switch(r){case a:delete i.__filemd5,delete i.command;try{var l=o.worker;l&&(l.removeEventListener("message",c),o.worker=o.key=o.msg=c=n=null)}catch(u){}t(i);break;case s:delete i.__filemd5,delete i.command,n&&n.onprogress&&n.onprogress(i);break}}},l=o.worker;l.addEventListener("message",c),l.postMessage({__filemd5:!0,command:"filemd5.start",key:i,file:e,needHash:n.needHash,needQuickHash:n.needQuickHash})}));case 2:return t.a(2,t.v)}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"cancelAsync",value:function(){var t=this.key,e=this.worker,n=this.msg;t&&e&&(this.key=this.worker=null,n&&(e.removeEventListener("message",n),this.msg=null),e.postMessage({__filemd5:!0,command:"filemd5.cancel",key:t}))}}])}();function hs(t){switch(t){case"png":case"jpg":case"jpeg":case"webp":case"avif":return!0;default:return!1}}var fs={worker:null,workerInited:!1,onWorkerMessage:null,postMessage:function(t,e){if(this.workerInited)try{var n;null===(n=this.worker)||void 0===n||n.postMessage(t,e)}catch(i){return console.error(i),i}}},ms=!1;function vs(){if(!ms)return!1;if("function"!==typeof Worker)return!1;if("function"!==typeof OffscreenCanvas)return!1;var t;try{t=document.createElement("canvas");var e=t.getContext("bitmaprenderer");return null!=e}catch(i){return!1}finally{var n;null===(n=t)||void 0===n||n.remove()}}function ps(t){return bs.apply(this,arguments)}function bs(){return bs=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(null==fs.worker){t.n=1;break}return t.a(2,{postMessage:postMessage});case 1:return n=Object(aa["a"])(),t.n=2,os(n+"arts_w.js");case 2:return r=t.v,t.a(2,new Promise((function(t,n){try{var i=fs.worker=new Worker(r.src);fs.workerInited=!1;var o=function(t,e){return fs.postMessage(t,e)},a=function(n){"loaded"===n.data&&(r&&(r.disposeBlobUrl(),r=null),i.removeEventListener("message",a),fs.workerInited=!0,a=null,fs.onWorkerMessage=e,i.addEventListener("message",e),t({postMessage:o}))};i.addEventListener("message",a),i.addEventListener("error",(function(t){fs.workerInited||gs(),console.error(t)}))}catch(s){gs(),r&&(r.disposeBlobUrl(),r=null),n(s)}})))}}),t)}))),bs.apply(this,arguments)}function gs(){null!=fs.worker&&(fs.workerInited=!1,fs.onWorkerMessage&&(fs.worker.removeEventListener("message",fs.onWorkerMessage),fs.onWorkerMessage=null),fs.worker.terminate(),fs.worker=null)}var ws={SceneInfoChanged:"SceneInfoChanged",FirstFrame:"FirstFrame",Frame:"Frame",SectionFirstFrame:"SectionFirstFrame",SectionFrame:"SectionFrame",SectionSceneInfoChanged:"SectionSceneInfoChanged",ImageLoad:"ImageLoad"},ys=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"imgSize",{width:0,height:0}),Object(f["a"])(this,"img",null),Object(f["a"])(this,"loaded",!1),Object(f["a"])(this,"miniImgSize",{width:0,height:0}),Object(f["a"])(this,"miniImg",null),Object(f["a"])(this,"miniLoaded",!1)}return Object(h["a"])(t,[{key:"destroy",value:function(){var t,e,n=this.img,i=this.miniImg;n&&(null===(t=n.close)||void 0===t||t.call(n),this.img=null);i&&(null===(e=i.close)||void 0===e||e.call(i),this.miniImg=null);this.loaded=this.miniLoaded=!1}}])}(),ks=function(){function t(e,n){var i=this;Object(d["a"])(this,t),Object(f["a"])(this,"handleDrawAllDelay",0),Object(f["a"])(this,"sceneDelayHandle",0),Object(f["a"])(this,"handle",0),Object(f["a"])(this,"sceneDelayHandleSection",-1),Object(f["a"])(this,"handleSection",-1),Object(f["a"])(this,"sceneInfo",{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0,inArtboardMultDownMode:!1}),Object(f["a"])(this,"drawInfo",{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,inArtboardMultDownMode:!1}),Object(f["a"])(this,"drawInfoSection",{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0}),Object(f["a"])(this,"sceneInfoSection",{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0}),Object(f["a"])(this,"sceneDelayTimes",{artboard:0,section:0}),Object(f["a"])(this,"titleHeight",a["b"]),Object(f["a"])(this,"newestSceneInfo",{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,inArtboardMultDownMode:!1}),Object(f["a"])(this,"artboardShowInteractionLine",!1),Object(f["a"])(this,"offscreenCanvas",null),Object(f["a"])(this,"context",null),Object(f["a"])(this,"sectionOffscreenCanvas",null),Object(f["a"])(this,"sectionContext",null),Object(f["a"])(this,"canvasScale",1),Object(f["a"])(this,"inViewerArtboards",[]),Object(f["a"])(this,"inViewerSections",[]),Object(f["a"])(this,"mouseenterArtboard",null),Object(f["a"])(this,"artboardInteractions",{}),Object(f["a"])(this,"artboardUserSelectDowns",{}),Object(f["a"])(this,"webViewFocus",!1),Object(f["a"])(this,"firstFrameSended",!1),Object(f["a"])(this,"sectionFirstFrameSended",!1),Object(f["a"])(this,"drawAllTime",0),Object(f["a"])(this,"drawAllTimeSection",0),Object(f["a"])(this,"useWorker",!1),Object(f["a"])(this,"inWorker",!1),Object(f["a"])(this,"onMessage",null),Object(f["a"])(this,"artboards",[]),Object(f["a"])(this,"sections",[]),Object(f["a"])(this,"workerChannel",null),Object(f["a"])(this,"imgBitmapContainer",null),Object(f["a"])(this,"onWorkerMessage",(function(t){var e;if(Object(l["k"])(t.data)){var n=t.data,r=n.type,o=n.data;switch(r){case"onCustomMessage":null===(e=i.onMessage)||void 0===e||e.call(i,o);break}}})),Object(f["a"])(this,"imgLoaded",(function(t,e){if(e){var n=e.imageInfo;if(n){var r,o,a;n.loaded=!0,n.img=t;var s=!1,c=e.imgSrc;try{if(t){var l,u,d=n.imgSize,h=n.miniLoaded;o=d.width=null!==(l=t.naturalWidth)&&void 0!==l?l:t.width,a=d.height=null!==(u=t.naturalHeight)&&void 0!==u?u:t.height,r=!0;var f=i.isDrawMiniImg(e);if(f&&!h)return}else r=!1,o=0,a=0}finally{i._callMessage(ws.ImageLoad,{key:e.key,success:r,width:o,height:a,mini:s,src:c})}i.drawAllDelay(e)}}})),Object(f["a"])(this,"miniImgLoaded",(function(t,e){if(e){var n=e.imageInfo;if(n){var r,o,a;n.miniLoaded=!0,n.miniImg=t;var s=!0,c=e.miniImgSrc;try{if(t){var l,u,d=n.miniImgSize,h=n.loaded;o=d.width=null!==(l=t.naturalWidth)&&void 0!==l?l:t.width,a=d.height=null!==(u=t.naturalHeight)&&void 0!==u?u:t.height,r=!0;var f=i.isDrawMiniImg(e);if(!f&&h&&n.img)return}else r=!1,o=0,a=0}finally{i._callMessage(ws.ImageLoad,{key:e.key,success:r,width:o,height:a,mini:s,src:c})}i.drawAllDelay(e)}}})),Object(f["a"])(this,"getCanvasDrawNum",(function(t){return Math.round(t*i.canvasScale)})),this.useWorker=e,this.inWorker=!!n}return Object(h["a"])(t,[{key:"updateProp",value:function(t){if(Object(l["k"])(t)){if(this.useWorker){var e,n=t.inViewerArtboards,i=t.mouseenterArtboard,r=t.inViewerSections;return Object(l["i"])(n)&&(t.inViewerArtboards=n.map((function(t){return t.key}))),void 0!==i&&(t.mouseenterArtboard=i?i.key:""),Object(l["i"])(r)&&(t.inViewerSections=r.map((function(t){return t.key}))),void(null===(e=this.workerChannel)||void 0===e||e.postMessage({type:"updateProp",data:[t]}))}var o=t.newestSceneInfo,a=t.artboardShowInteractionLine,s=t.inViewerArtboards,c=t.mouseenterArtboard,u=t.artboardInteractions,d=t.artboardUserSelectDowns,h=t.webViewFocus,f=t.inViewerSections;if(Object(l["k"])(o)){var m=this.newestSceneInfo,v=o.sceneX,p=o.sceneY,b=o.scale,g=o.sceneWidth,w=o.sceneHeight,y=o.inArtboardMultDownMode,k=!1;if(void 0!==v&&(m.sceneX=v),void 0!==p&&(m.sceneY=p),void 0!==b&&(m.scale=b),void 0!==g&&m.sceneWidth!==g&&(m.sceneWidth=g,k=!0),void 0!==w&&m.sceneHeight!==w&&(m.sceneHeight=w,k=!0),k){var C=this.canvasScale,x=C*g,S=C*w,T=[this.offscreenCanvas,this.sectionOffscreenCanvas];T.forEach((function(t){t&&(t.width=x,t.height=S)}))}void 0!==y&&(m.inArtboardMultDownMode=y)}void 0!==a&&(this.artboardShowInteractionLine=a),void 0!==s&&(this.inViewerArtboards=s),void 0!==c&&(this.mouseenterArtboard=c),void 0!==u&&(this.artboardInteractions=u),void 0!==d&&(this.artboardUserSelectDowns=d),void 0!==h&&(this.webViewFocus=h),void 0!==f&&(this.inViewerSections=f)}}},{key:"initAsync",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o,a){var s,c,l,u,d,h,f,m;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(s=this.useWorker,c=this.inWorker,this.canvasScale=n,this.imgBitmapContainer=o,this.webViewFocus=a,c?(this.offscreenCanvas=new OffscreenCanvas(1,1),l=this.context=this.offscreenCanvas.getContext("2d")):l=this.context=s?e.getContext("bitmaprenderer"):e.getContext("2d"),this.onMessage=r,l&&(l.imageSmoothingEnabled=!0,l.imageSmoothingQuality="high"),!s){t.n=2;break}return t.n=1,ps(this.onWorkerMessage);case 1:if(u=this.workerChannel=t.v,d=null,h=[],f=null===o||void 0===o?void 0:o.imgs,f&&Object.keys(f).reduce((function(t,e){var n=f[e];return n&&n instanceof ImageBitmap&&t.push(n),t}),h),m=u.postMessage({type:"initAsync",data:[d,n,o,a]},h.length>0?h:void 0),!m){t.n=2;break}throw m;case 2:return t.a(2)}}),t,this)})));function e(e,n,i,r,o){return t.apply(this,arguments)}return e}()},{key:"updateSections",value:function(t){var e;this.useWorker?null===(e=this.workerChannel)||void 0===e||e.postMessage({type:"updateSections",data:[t]}):(null!==t&&void 0!==t||(t=[]),this.sections=t)}},{key:"updateArtboards",value:function(t){var e,n,i,r;if(this.useWorker){var o;null===(o=this.workerChannel)||void 0===o||o.postMessage({type:"updateArtboards",data:[t]})}else{var a=this.artboards;null!==t&&void 0!==t||(t=[]);var s=null!==(e=null===a||void 0===a?void 0:a.reduce((function(t,e){return t[e.key]=e,t}),{}))&&void 0!==e?e:{},c=null!==(n=null===(i=t)||void 0===i?void 0:i.reduce((function(t,e){return t[e.key]=e,t}),{}))&&void 0!==n?n:{},l=null===a||void 0===a?void 0:a.filter((function(t){return!c[t.key]})),u=null===(r=t)||void 0===r?void 0:r.filter((function(t){var e=s[t.key];if(!e)return!0;var n=e.imageInfo;return!n||(!n.miniLoaded||!n.loaded||e.miniImgSrc!==t.miniImgSrc||e.imgSrc!==t.imgSrc||(t.imageInfo=n,!1))}));this.attachImgs(l,!1),this.attachImgs(u,!0),this.artboards=t}}},{key:"attachImgs",value:function(t,e){var n,i=this;Object(l["i"])(t)&&(this.useWorker?null===(n=this.workerChannel)||void 0===n||n.postMessage({type:"attachImgs",data:[t,e]}):e?t.forEach((function(t){var e=t.imageInfo;e&&e.destroy(),t.imageInfo=new ys,ce.add(t.miniImgSrc,i.miniImgLoaded,t),ce.add(t.imgSrc,i.imgLoaded,t)})):t.forEach((function(t){var e=t.imageInfo;e&&(e.destroy(),t.imageInfo=null),ce.remove(t.imgSrc,i.imgLoaded,t),ce.remove(t.miniImgSrc,i.miniImgLoaded,t)})))}},{key:"cleanDelay",value:function(){clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle)}},{key:"drawAllDelay",value:function(){var t=this;if(this.useWorker){var e;null===(e=this.workerChannel)||void 0===e||e.postMessage({type:"drawAllDelay",data:void 0})}else{var n=Date.now();n-this.drawAllTime>=100?(this.drawAllTime=n,clearTimeout(this.handleDrawAllDelay),this.draw(null,!0)):(clearTimeout(this.handleDrawAllDelay),this.handleDrawAllDelay=setTimeout((function(){clearTimeout(t.handleDrawAllDelay),t.draw(null,!0)}),66.67))}}},{key:"draw",value:function(t,e){var n,i=this;if(this.useWorker)null===(n=this.workerChannel)||void 0===n||n.postMessage({type:"draw",data:[t,e]});else if(t||e)requestAnimationFrame((function(){i._draw(t,e)}));else{var r=this.sceneInfo,o=this.newestSceneInfo,a=r.sceneWidth!==o.sceneWidth||r.sceneHeight!==o.sceneHeight||Date.now()-this.sceneDelayTimes.artboard>100?1:0;if(a||o.inArtboardMultDownMode!=r.inArtboardMultDownMode)return this.cleanDelay(),void(this.handle=requestAnimationFrame((function(){i._draw(t)})));this.cleanDelay(),this.sceneDelayHandle=setTimeout((function(){cancelAnimationFrame(i.handle),i.handle=requestAnimationFrame((function(){i._draw(t)}))}),33)}}},{key:"_callMessage",value:function(t,e,n){try{var i;null===(i=this.onMessage)||void 0===i||i.call(this,{type:t,data:e},n)}catch(r){}}},{key:"_draw",value:function(t,e){var n=this;this.cleanDelay(),this.sceneDelayTimes.artboard=Date.now();var i=this.sceneInfo,r=this.newestSceneInfo,o=r.sceneX,a=r.sceneY,s=r.scale,c=r.sceneWidth,l=r.sceneHeight,u=r.inArtboardMultDownMode,d=!1;i.sceneX===o&&i.sceneY===a&&i.scale===s&&i.sceneWidth===c&&i.sceneHeight===l&&i.inArtboardMultDownMode===u||(i.sceneX=o,i.sceneY=a,i.scale=s,i.sceneWidth=c,i.sceneHeight=l,i.inArtboardMultDownMode=u,d=!0);try{if(0===s||0===c||0===l)return;var h=this.drawInfo,f=!t,m=!(h.scale===s&&h.sceneX===o&&h.sceneY===a&&h.sceneWidth===c&&h.sceneHeight===l&&h.inArtboardMultDownMode===u);if(f&&!m&&!e)return;var v,p=this.context;if(!p)return;h.scale=s,h.sceneX=o,h.sceneY=a,h.sceneWidth=c,h.sceneHeight=l,h.inArtboardMultDownMode=u;var b=!1;f||m?(this.drawAllTime=Date.now(),p.clearRect(0,0,this.getCanvasDrawNum(c),this.getCanvasDrawNum(l)),v=this.inViewerArtboards,b=!0):v=this.getRectArtboards(t);var g=(new w).set(-o,-a,c,l),y=(new w).set(g.x/s,g.y/s,g.width/s,g.height/s),k=Math.max(2,Math.min(6,Math.ceil(3*s)));!b&&v.forEach((function(t){n._cleanBackground(p,t,g,s)}));var C=this.artboardShowInteractionLine&&!u;if(v.forEach((function(t){n._drawArtboard(p,g,y,s,t,u,k)})),C){var x=this.getInViewerInteractions();x.forEach((function(t){var e=t.canvasData.drawRect,i=t.art.rect,r=(new w).set(i.x+e.x,i.y+e.y,e.width,e.height),o=O(r,y);o&&n._drawInteraction(p,t.art,t,g,y,s)}))}var S=this.firstFrameSended,T=this.inWorker;if(T&&!S&&this._callMessage(ws.FirstFrame),T)try{var I,A=null===(I=this.offscreenCanvas)||void 0===I?void 0:I.transferToImageBitmap();A&&this._callMessage(ws.Frame,A,[A])}catch(F){}S||(this.firstFrameSended=!0)}finally{d&&this._callMessage(ws.SceneInfoChanged,i)}}},{key:"_drawInteraction",value:function(t,e,n,i,r,o){var a,c,l=e.rect,u="#1886ff",d="#cdcdda",h="rgba(24, 134, 255, 0.05)",f=n.canvasData,m=n.isEnter;t.lineWidth=1,t.lineWidth=.5;var v=Object(s["a"])({},f.nodeRect);v.x+=l.x,v.y+=l.y,O(v,r)&&(t.setLineDash([5,2]),t.lineDashOffset=2,v=this._getScaleRect(v.x,v.y,v.width,v.height,i,o),m&&(t.fillStyle=h,t.fillRect(this.getCanvasDrawNum(v.x),this.getCanvasDrawNum(v.y),this.getCanvasDrawNum(v.width),this.getCanvasDrawNum(v.height))),t.fillStyle=t.strokeStyle=m?u:d,t.strokeRect(this.getCanvasDrawNum(v.x),this.getCanvasDrawNum(v.y),this.getCanvasDrawNum(v.width),this.getCanvasDrawNum(v.height))),t.strokeStyle=m?u:d,t.lineWidth=Math.max(Math.min(2*o,2),.5),t.setLineDash([]),t.lineDashOffset=0;var p=f.curve;v=(new w).set(p.start.x+l.x,p.start.y+l.y,1,1),t.beginPath(),v=this._getScaleRect(v.x,v.y,v.width,v.height,i,o),t.moveTo(this.getCanvasDrawNum(v.x),this.getCanvasDrawNum(v.y));var b=this._getScaleRect(p.p1.x+l.x,p.p1.y+l.y,1,1,i,o),g=this._getScaleRect(p.p2.x+l.x,p.p2.y+l.y,1,1,i,o),y=this._getScaleRect(p.end.x+l.x,p.end.y+l.y,1,1,i,o);t.bezierCurveTo(this.getCanvasDrawNum(b.x),this.getCanvasDrawNum(b.y),this.getCanvasDrawNum(g.x),this.getCanvasDrawNum(g.y),this.getCanvasDrawNum(y.x),this.getCanvasDrawNum(y.y)),t.stroke();var k=f.arrowIcon,C=this.imgBitmapContainer;v=(new w).set(k.x+l.x,k.y+l.y,k.width,k.height);var x=m?null!==(a=k.img)&&void 0!==a?a:null===C||void 0===C?void 0:C.imgs[k.key]:null!==(c=k.img_default)&&void 0!==c?c:null===C||void 0===C?void 0:C.imgs[k.key_default];O(v,r)&&x&&(v=this._getScaleRect(v.x,v.y,v.width,v.height,i,o),t.drawImage(x,0,0,k.width,k.height,this.getCanvasDrawNum(v.x),this.getCanvasDrawNum(v.y),this.getCanvasDrawNum(v.width),this.getCanvasDrawNum(v.height)))}},{key:"getInViewerInteractions",value:function(){var t=[];if(!this.artboardShowInteractionLine)return t;var e=this.newestSceneInfo,n=e.sceneX,i=e.sceneY,r=e.scale,o=e.sceneWidth,a=e.sceneHeight,c=this.artboardInteractions,u=this.mouseenterArtboard;if(0===r||0===o||0===a)return t;var d=(new w).set(-n/r,-i/r,o/r,a/r);return Object.keys(c).forEach((function(e){if("_length__"!==e){var n=c[e];Object(l["i"])(n)&&0!==n.length&&n.forEach((function(e){var n,i,r=Object(s["a"])({},e.canvasData.drawRect);r.x+=e.art.rect.x,r.y+=e.art.rect.y,e.isEnter=null!=u&&(u.cid===(null===(n=e.art)||void 0===n?void 0:n.cid)||(null===(i=e.toArtboardItem)||void 0===i?void 0:i.cid)===u.cid);var o=O(r,d);o&&t.push(e)}))}})),t.sort((function(t,e){return t.isEnter&&e.isEnter?0:t.isEnter?1:e.isEnter?-1:0})),t}},{key:"_cleanBackground",value:function(t,e,n,i){var r=this._getScaleRect(e.rect.x,e.rect.y,e.rect.width,e.rect.height,n,i),o=Math.round(this.titleHeight*i);t.clearRect(this.getCanvasDrawNum(r.x),this.getCanvasDrawNum(r.y-o),this.getCanvasDrawNum(r.width),this.getCanvasDrawNum(r.height+o)),e.flowStart&&(r=this.getFlowStartIconRect(e),r=this._getScaleRect(r.x,r.y,r.width,r.height,n,i),t.clearRect(this.getCanvasDrawNum(r.x),this.getCanvasDrawNum(r.y),this.getCanvasDrawNum(r.width),this.getCanvasDrawNum(r.height)))}},{key:"isDrawMiniImg",value:function(t){var e,n,i=t.imageInfo;return!!i&&(!(!i.miniLoaded||!i.miniImg)&&(!i.img||2*i.miniImgSize.width/3>this.newestSceneInfo.scale*(null!==(e=null===(n=t.rect)||void 0===n?void 0:n.width)&&void 0!==e?e:0)))}},{key:"_drawArtboard",value:function(t,e,n,i,r,o,a){var s,c,l=O(r.rect,n);if(l){var u=this._getScaleRect(r.rect.x,r.rect.y,r.rect.width,r.rect.height,e,i);this._drawArtboardBackground(t,u,r.name,r.customStatus,i,r.fileType);var d=null!==(s=r.imageInfo)&&void 0!==s?s:{},h=d.miniImgSize,f=d.miniImg,m=d.img,v=d.imgSize,p=d.loaded,b=this.isDrawMiniImg(r);if(b?t.drawImage(f,0,0,h.width,h.height,this.getCanvasDrawNum(u.x),this.getCanvasDrawNum(u.y),this.getCanvasDrawNum(u.width),this.getCanvasDrawNum(u.height)):p?m?t.drawImage(m,0,0,v.width,v.height,this.getCanvasDrawNum(u.x),this.getCanvasDrawNum(u.y),this.getCanvasDrawNum(u.width),this.getCanvasDrawNum(u.height)):this._drawArtboardText(t,"预览图加载失败",u):this._drawArtboardText(t,"画板预览图加载中...",u),r.flowStart){var g,w,y,k,C=this.imgBitmapContainer,x=null!==(g=null===C||void 0===C||null===(w=C.imgs)||void 0===w?void 0:w.flowStartIcon)&&void 0!==g?g:fe.imgs.flowStartIcon,S=null!==(y=null===C||void 0===C||null===(k=C.sizes)||void 0===k?void 0:k.flowStartIcon)&&void 0!==y?y:fe.sizes.flowStartIcon;if(x){var T=this.getFlowStartIconRect(r);T=this._getScaleRect(T.x,T.y,T.width,T.height,e,i),t.drawImage(x,0,0,S.width,S.height,this.getCanvasDrawNum(T.x),this.getCanvasDrawNum(T.y),this.getCanvasDrawNum(T.width),this.getCanvasDrawNum(T.height))}}if(o&&1===(null===(c=this.artboardUserSelectDowns)||void 0===c?void 0:c[r.cid])){var I=Math.round(a/2);t.strokeStyle="#1886ff",t.setLineDash([]),t.lineDashOffset=2,t.lineWidth=this.getCanvasDrawNum(a),t.strokeRect(this.getCanvasDrawNum(u.x+I),this.getCanvasDrawNum(u.y+I),this.getCanvasDrawNum(u.width-a),this.getCanvasDrawNum(u.height-a))}}}},{key:"_drawArtboardText",value:function(t,e,n){t.textAlign="center",t.font="".concat(this.getCanvasDrawNum(Math.min(Math.max(6,Math.min(n.width,n.height)/15),36)),"px Arial"),t.fillText(e,this.getCanvasDrawNum(Math.floor(n.x+n.width/2)),this.getCanvasDrawNum(Math.ceil(n.y+n.height/2)),this.getCanvasDrawNum(n.width))}},{key:"_drawArtboardBackground",value:function(t,e,n,i,r,o){var s=Math.round(this.titleHeight*r),c=o===a["r"].FIGMA;c?(t.lineWidth=Math.max(1*r,1),t.strokeStyle="rgba(166,169,180, 0.1)",t.strokeRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height))):t.clearRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height));var l=i===a["i"].Dev,u={width:0,height:0,naturalWidth:0,naturalHeight:0};if(l){var d,h,f,m,v=this.imgBitmapContainer,p=null!==(d=null===v||void 0===v||null===(h=v.imgs)||void 0===h?void 0:h.dev)&&void 0!==d?d:fe.imgs.dev,b=null!==(f=null===v||void 0===v||null===(m=v.sizes)||void 0===m?void 0:m.dev)&&void 0!==f?f:fe.sizes.dev;p&&(u.width=this.getCanvasDrawNum(r*b.width),u.height=this.getCanvasDrawNum(r*b.height),u.naturalWidth=b.width,u.naturalHeight=b.height,t.drawImage(p,0,0,u.naturalWidth,u.naturalHeight,this.getCanvasDrawNum(e.x+e.width-u.width),this.getCanvasDrawNum(e.y-s/2)-Math.round(u.height/2),u.width,u.height))}if(n){var g=this.getCanvasDrawNum(Math.min(Math.max(2,Math.round(12*r)),1024));if(g>3){t.fillStyle="#71717a",t.textAlign="left",t.textBaseline="middle",t.font="".concat(g,"px Arial");var w=this.getCanvasDrawNum(e.width)-(u.width>0?u.width+5:0),y=Ge(t,g,n,w);t.fillText(y.text,this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y-s/2))}}}},{key:"_getScaleRect",value:function(t,e,n,i,r,o){var a={x:t,y:e,width:n,height:i};return a.x=a.x*o-r.x,a.y=a.y*o-r.y,a.width=a.width*o,a.height=a.height*o,a}},{key:"getRectArtboards",value:function(t){var e,n=this,i=[],r=null===t||void 0===t?void 0:t.rect;if(!r)return i;r=(new w).set(r.x,r.y,r.width,r.height),t.flowStart&&(e=this.getFlowStartIconRect(t),e=(new w).set(e.x,e.y,e.width,e.height));var o=this.inViewerArtboards;return o.forEach((function(t){var o=(new w).set(t.rect.x,t.rect.y,t.rect.width,t.rect.height);if(o.isOverlap(r))i.push(t);else if(e&&e.isOverlap(o))i.push(t);else if(t.flowStart){var a=n.getFlowStartIconRect(t);if(a=(new w).set(a.x,a.y,a.width,a.height),a.isOverlap(r))return void i.push(t);if(e&&e.isOverlap(a))return void i.push(t)}})),i}},{key:"getFlowStartIconRect",value:function(t){var e=t.rect,n=e.x,i=e.y;n-=16;var r=16,o=26;return{x:n,y:i,width:r,height:o}}},{key:"destroy",value:function(){this.cleanDelay(),clearTimeout(this.handleDrawAllDelay),this.offscreenCanvas=null,this.context=null,this.onMessage=null,this.useWorker&&(this.workerChannel=null,gs());var t=this.artboards,e=this.imgBitmapContainer;e&&(Object.keys(e.imgs).forEach((function(t){var n,i=e.imgs[t];i&&(null===(n=i.close)||void 0===n||n.call(i),delete e.imgs[t])})),this.imgBitmapContainer=null),Object(l["i"])(t)&&(t.forEach((function(t){var e;null===(e=t.imageInfo)||void 0===e||e.destroy(),t.imageInfo=null})),this.artboards.splice(0)),this.sectionContext=null,this.sectionOffscreenCanvas=null,this.cleanSectionDelay()}},{key:"cleanSectionDelay",value:function(){clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection)}},{key:"initSectionAsync",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a,s,c;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(n=this.useWorker,r=this.inWorker,r?(this.sectionOffscreenCanvas=new OffscreenCanvas(1,1),o=this.sectionContext=this.sectionOffscreenCanvas.getContext("2d")):o=this.sectionContext=n?e.getContext("bitmaprenderer"):e.getContext("2d"),o&&(o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high"),!n){t.n=1;break}if(a=this.workerChannel,s=null,c=a.postMessage({type:"initSectionAsync",data:[s]},s?[s]:void 0),!c){t.n=1;break}throw c;case 1:return t.a(2)}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"drawSection",value:function(t,e){var n,i=this;if(this.useWorker)null===(n=this.workerChannel)||void 0===n||n.postMessage({type:"drawSection",data:[t,e]});else if(t||e)requestAnimationFrame((function(){i._drawSection(t,e)}));else{var r=this.sceneInfoSection,o=this.newestSceneInfo,a=o.sceneWidth,s=o.sceneHeight,c=r.sceneWidth!==a||r.sceneHeight!==s||Date.now()-this.sceneDelayTimes.section>100?1:0;if(c)return clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection),void(this.handleSection=requestAnimationFrame((function(){i._drawSection(t)})));clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection),this.sceneDelayHandleSection=setTimeout((function(){cancelAnimationFrame(i.handleSection),i.handleSection=requestAnimationFrame((function(){i._drawSection(t)}))}),33)}}},{key:"_drawSection",value:function(t,e){var n=this;clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection),this.sceneDelayTimes.section=Date.now();var i=this.newestSceneInfo,r=i.sceneX,o=i.sceneY,a=i.scale,s=i.sceneWidth,c=i.sceneHeight,l=this.sceneInfoSection,u=this.drawInfoSection,d=!1;l.sceneX===r&&l.sceneY===o&&l.scale===a&&l.sceneWidth===s&&l.sceneHeight===c||(l.sceneX=r,l.sceneY=o,l.scale=a,l.sceneWidth=s,l.sceneHeight=c,d=!0);try{if(0===a||0===s||0===c)return;var h=!t,f=!(u.scale===a&&u.sceneX===r&&u.sceneY===o&&u.sceneWidth===s&&u.sceneHeight===c);if(h&&!f&&!e)return;var m,v=this.sectionContext;if(!v)return;u.scale=a,u.sceneX=r,u.sceneY=o,u.sceneWidth=s,u.sceneHeight=c;var p=!1;h||f?(this.drawAllTimeSection=Date.now(),v.clearRect(0,0,this.getCanvasDrawNum(s),this.getCanvasDrawNum(c)),m=this.inViewerSections,p=!0):m=this.getRectSections(t);var b=(new w).set(-r,-o,s,c),g=(new w).set(b.x/a,b.y/a,b.width/a,b.height/a);!p&&m.forEach((function(t){n._cleanBackgroundSection(v,t,b,a)})),m.forEach((function(t){n._drawSectionItem(v,b,g,a,t)}));var y=this.sectionFirstFrameSended,k=this.inWorker;if(k&&!y&&this._callMessage(ws.SectionFirstFrame),k)try{var C,x=null===(C=this.sectionOffscreenCanvas)||void 0===C?void 0:C.transferToImageBitmap();x&&this._callMessage(ws.SectionFrame,x,[x])}catch(S){}y||(this.sectionFirstFrameSended=!0)}finally{d&&this._callMessage(ws.SectionSceneInfoChanged,l)}}},{key:"_drawSectionBackground",value:function(t,e,n,i){var r=this,o=n.cssStyle,a=n.name,s=null===o||void 0===o?void 0:o.render.backgrounds;if(s){var c=s.length-1;s.forEach((function(n,o){try{c===o&&(t.shadowBlur=Math.max(5*i,5),t.shadowColor="rgba(24, 134, 255, 0.08)"),Je(n,t,e,r.getCanvasDrawNum),c===o&&(t.shadowBlur=0,t.shadowColor="")}catch(a){}}))}if(a){var l=Math.round(this.titleHeight*i),u=Math.min(Math.max(2,Math.round(14*i)),24);if(u<4)return;t.font="".concat(this.getCanvasDrawNum(u),"px Arial");var d=o.nameSize[u];if(null==d){var h=t.measureText(a),f=h.width;d=o.nameSize[u]={width:f}}var m=Math.round(.1*d.width),v=Math.ceil(2*m+d.width),p=this.getCanvasDrawNum(3*i),b=this.getCanvasDrawNum(Math.min(2*u,l-p)),g=this.getCanvasDrawNum(e.x),y=this.getCanvasDrawNum(e.y)-b-p;t.fillStyle="#404040",Be(t,(new w).set(g,y,v,b),5),t.fillStyle="#fff",t.textAlign="left",t.textBaseline="middle",t.fillText(a,g+m,y+b/2,this.getCanvasDrawNum(e.width))}}},{key:"_drawSectionItem",value:function(t,e,n,i,r){var o=O(r.rect,n);if(o){var a=this._getScaleRect(r.rect.x,r.rect.y,r.rect.width,r.rect.height,e,i);this._drawSectionBackground(t,a,r.section,i)}}},{key:"_cleanBackgroundSection",value:function(t,e,n,i){var r=this._getScaleRect(e.rect.x,e.rect.y,e.rect.width,e.rect.height,n,i),o=Math.round(this.titleHeight*i);t.clearRect(this.getCanvasDrawNum(r.x),this.getCanvasDrawNum(r.y-o),this.getCanvasDrawNum(r.width),this.getCanvasDrawNum(r.height+o))}},{key:"getRectSections",value:function(t){var e=[],n=null===t||void 0===t?void 0:t.rect;if(!n)return e;n=(new w).set(n.x,n.y,n.width,n.height);var i=this.inViewerSections;return i.forEach((function(t){var i=(new w).set(t.rect.x,t.rect.y,t.rect.width,t.rect.height);i.isOverlap(n)&&e.push(t)})),e}}])}(),Cs=vs(),xs=new ks(Cs,!1),Ss={methods:{draw:function(t,e){xs.draw(t,e)},onCanvasMessage:function(t){switch(t.type){case ws.SceneInfoChanged:var e=t.data,n=e.sceneX,i=e.sceneY,r=e.scale,o=e.sceneWidth,a=e.sceneHeight,s=this.sceneInfo;s.scale=r,s.sceneX=n,s.sceneY=i,s.sceneWidth=o,s.sceneHeight=a;break;case ws.Frame:if(this.useWorker){var c,u=t.data;if(u)null===(c=xs.context)||void 0===c||c.transferFromImageBitmap(u),null===u||void 0===u||u.close()}break;case ws.ImageLoad:var d=t.data;if(Object(l["k"])(d)){var h=this.currentImgSrcBlobUrl||this.currentImgSrc;(d.src===h||null!=d.src&&-1!==d.src.indexOf(h))&&(d.success?this.onImgLoad(d):this.onImgError(d,"无法加载图片资源(".concat(d.src,")")))}break}},clickReload:function(){this.fetchState=c["a"].Fetching,this.randomUrl=Date.now()},clickZoomContainer:function(){},canEmitEvent:function(){return this.fetchState===c["a"].Success},onSceneResize:function(t,e,n){var i=this.canScale&&0!==this.scale;if(!i||n){var r=this.rect;if(r&&0!==t&&0!==e){var o=r.width/t,a=r.height/e,s=Math.max(o,a);0!==s&&(s=.92/s,s>2&&(s=2),this.setScaleImageViewer(s))}}},onImgLoad:function(t){this.fetchState=c["a"].Success;var e=this.currentImg,n=this.currentImgSrcBlobUrl||this.currentImgSrc;-1!==t.src.indexOf(n)&&(e.width=t.width,e.height=t.height),this.resetImageViewerScale(),this.disposeBlobUrl()},onImgError:function(t){this.fetchState=c["a"].Error,this.errorText=t,this.disposeBlobUrl()},disposeBlobUrl:function(t){var e=this.currentImgSrcBlobUrl;e&&(URL.revokeObjectURL(e),t&&(this.currentImgSrcBlobUrl=null))},createBlobUrl:function(t){(t instanceof File||t instanceof Blob)&&(this.currentImgSrcBlobUrl=URL.createObjectURL(t))},initAsync:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,l,u,d,h,f,m,v,p,b,g,w;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return n=t.initInfo,n.fetchState=c["a"].Fetching,e.p=1,r=null,e.n=2,xs.initAsync(t.$refs.canvas,t.canvasScale,t.onCanvasMessage,r,t.webViewFocus);case 2:t.useWorker=xs.useWorker,n.fetchState=c["a"].Success,o=t.artboards,xs.updateArtboards(o),a=t.stageOffset,s=a.x,l=a.y,u=t.scale,d=t.sceneWidth,h=t.sceneHeight,f=t.inArtboardMultDownMode,m=t.artboardShowInteractionLine,v=t.inViewerArtboards,p=t.mouseenterArtboard,b=t.artboardInteractions,g=t.artboardUserSelectDowns,xs.updateProp({newestSceneInfo:{sceneX:s,sceneY:l,scale:u,sceneWidth:d,sceneHeight:h,inArtboardMultDownMode:f},artboardShowInteractionLine:m,inViewerArtboards:v,mouseenterArtboard:p,artboardInteractions:b,artboardUserSelectDowns:g}),e.n=4;break;case 3:e.p=3,w=e.v,console.error(w),n.errorText=w.toString(),n.fetchState=c["a"].Error;case 4:return e.a(2)}}),e,null,[[1,3]])})))()}},computed:{reDrawKey:function(){var t=this.scale,e=this.stageOffset,n=e.x,i=e.y,r=this.sceneWidth,o=this.sceneHeight;return"".concat(t,"-").concat(n,"x").concat(i,"-").concat(r,"x").concat(o)},artboardUserSelectDowns:function(){return null},mouseenterArtboard:function(){return null},artboardShowInteractionLine:function(){return!1},inArtboardMultDownMode:function(){return!1},canvasWidth:function(){var t=this.sceneWidth,e=this.canvasScale;return t*e},canvasHeight:function(){var t=this.sceneHeight,e=this.canvasScale;return t*e},canvasStyle:function(){var t=this.sceneInfo;if(0!==t.scale){var e=this.stageOffset,n=e.x,i=e.y,r=this.scale,o=this.sceneWidth,a=this.sceneHeight,s=Math.round(n-t.sceneX),c=Math.round(i-t.sceneY),l=r/t.scale;if(0!==s||0!==c||1!==l||t.sceneWidth!==o||t.sceneHeight!==a){var u={};return 1!==l?(s=t.sceneX/t.scale*r-n,c=t.sceneY/t.scale*r-i,s=-Math.round(s),c=-Math.round(c),u.transform="translate3d(".concat(s,"px, ").concat(c,"px, 0px) scale(").concat(l.toFixed(5),")")):0===s&&0===c||(u.transform=" translate3d(".concat(s,"px, ").concat(c,"px, 0px)")),u}}},artboards:function(){var t="",e="",n="",i=this.rect,r=this.currentImgShowSrc,o=this.currentIndex,s=this.imgCount,c="viewerbox_image_".concat(o,"_").concat(s),l=i,u=null,d=null;return[{topSectionId:n,pageGuid:t,docGuid:e,guid:c,boundsInParentForList:l,key:"".concat(e,":").concat(t,":").concat(c),name:u,customStatus:a["i"].None,fileType:a["r"].ALL,flowStart:!1,cid:12138,rect:i,imgSrc:r,miniImgSrc:d,artboard:null}]},inViewerArtboards:function(){var t=this.stageOffset,e=t.x,n=t.y,i=this.scale,r=this.sceneWidth,o=this.sceneHeight,a=this.artboards;if(0===i||0===r||0===o)return[];var s=(new w).set(-e/i,-n/i,r/i,o/i);return a.reduce((function(t,e){var n=O(e.rect,s);return n&&t.push(e),t}),[])},artboardInteractions:function(){var t={_length__:0};return t},FetchState:function(){return c["a"]},rect:function(){var t,e,n=this.currentImg;return(new w).set(0,0,Math.max(1,null!==(t=null===n||void 0===n?void 0:n.width)&&void 0!==t?t:0),Math.max(null!==(e=null===n||void 0===n?void 0:n.height)&&void 0!==e?e:0,1))},canScale:function(){var t=this.currentImg;return!!t&&(0!==t.width||0!==t.height)},imgList:function(){return this.imageViewer.imgList},imgCount:function(){var t,e;return null!==(t=null===(e=this.imgList)||void 0===e?void 0:e.length)&&void 0!==t?t:0},currentIndex:function(){return this.imageViewer.currentIndex},currentImg:function(){var t=this.imgList;return t?t[this.currentIndex]:null},currentImgFormat:function(){var t;return null===(t=this.currentImg)||void 0===t?void 0:t.format},currentImgSrc:function(){var t,e;return null!==(t=null===(e=this.currentImg)||void 0===e?void 0:e.imgSrc)&&void 0!==t?t:""},currentImgShowSrc:function(){var t=this.currentImgSrcBlobUrl;if(t)return t;if(t=this.currentImgSrc,!t)return t;var e=this.randomUrl;return 0===e?t:Object(c["h"])(t,{r:e})},imageViewer:function(){return this.$store.state.imageViewer},scale:function(){return this.scaleImageViewer},stageOffset:function(){var t=this.centerPoint,e=this.sceneX,n=this.sceneY,i=t.x+e,r=t.y+n;return{x:i,y:r}},centerPoint:function(){var t=this.scale,e=this.rect,n=this.sceneWidth,i=this.sceneHeight;return $e(e,t,n,i)}},watch:{webViewFocus:function(t){xs.updateProp({webViewFocus:t})},inViewerArtboards:function(t){setTimeout((function(){xs.updateProp({inViewerArtboards:t})}),10)},artboards:function(t){xs.updateArtboards(t)},reDrawKey:function(){var t=this.scale,e=this.stageOffset,n=e.x,i=e.y,r=this.sceneWidth,o=this.sceneHeight;xs.updateProp({newestSceneInfo:{scale:t,sceneX:n,sceneY:i,sceneWidth:r,sceneHeight:o}}),this.draw()},currentImgSrc:function(t){this.disposeBlobUrl(!0),this.fetchState=c["a"].Fetching,this.randomUrl=0,this.$emit("setConfig",{sceneX:0,sceneY:0}),this.createBlobUrl(t)}},data:function(){var t=Object(c["J"])();return{useWorker:Cs,canvasScale:t,fetchState:c["a"].Normal,errorText:null,randomUrl:0,currentImgSrcBlobUrl:"",initInfo:{progress:0,fetchState:c["a"].Normal,errorText:null},sceneInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0}}},props:{sceneWidth:Number,sceneHeight:Number,sceneX:Number,sceneY:Number},beforeDestroy:function(){xs.attachImgs(this.artboards,!1),xs.destroy(),this.disposeBlobUrl(!0)},created:function(){0},mounted:function(){var t=this.currentImgSrc;t&&(this.fetchState=c["a"].Fetching,this.createBlobUrl(t)),this.initAsync()}},Ts=Ss,Os=(n("6edc"),Object(Gr["a"])(Ts,Za,ts,!1,null,"11f767e2",null)),Is=Os.exports,As=function(){var t=this,e=t._self._c;return e("div",{ref:"box",staticClass:"viewer-box",style:t.style,on:{contextmenu:function(t){t.preventDefault()}}},[t.fetchState===t.FetchState.Fetching?e("div",{staticClass:"loading"},[t._v("图片加载中...")]):t.fetchState===t.FetchState.Error?e("div",{staticClass:"error"},[t._v("图片加载失败,"),e("a",{attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v("重新加载")])]):t._e(),e("img",{directives:[{name:"show",rawName:"v-show",value:t.fetchState===t.FetchState.Success,expression:"fetchState === FetchState.Success"}],staticClass:"preview",attrs:{src:t.currentImgShowSrc},on:{load:t.onImgLoad,error:t.onImgError}})])},Fs=[],js={methods:{clickReload:function(){this.fetchState=c["a"].Fetching,this.randomUrl=Date.now()},clickZoomContainer:function(){},canEmitEvent:function(){return this.fetchState===c["a"].Success},onSceneResize:function(t,e,n){var i=this.canScale&&0!==this.scale;if(!i||n){var r=this.rect;if(r&&0!==t&&0!==e){var o=r.width/t,a=r.height/e,s=Math.max(o,a);0!==s&&(s=.92/s,s>2&&(s=2),this.setScaleImageViewer(s))}}},onImgLoad:function(t){var e=this.currentImg;if(e){var n=t.target;if(n){this.fetchState=c["a"].Success;var i=this.currentImgSrcBlobUrl||this.currentImgSrc,r=n.src;-1!==r.indexOf(i)&&(e.width=n.naturalWidth,e.height=n.naturalHeight),this.resetImageViewerScale(),this.disposeBlobUrl()}}},onImgError:function(){this.fetchState=c["a"].Error,this.disposeBlobUrl()},disposeBlobUrl:function(t){var e=this.currentImgSrcBlobUrl;e&&(URL.revokeObjectURL(e),t&&(this.currentImgSrcBlobUrl=null))},createBlobUrl:function(t){(t instanceof File||t instanceof Blob)&&(this.currentImgSrcBlobUrl=URL.createObjectURL(t))}},computed:{FetchState:function(){return c["a"]},rect:function(){if(this.canScale){var t=this.currentImg;return(new w).set(0,0,t.width,t.height)}},canScale:function(){var t=this.currentImg;return!!t&&(0!==t.width||0!==t.height)},imgList:function(){return this.imageViewer.imgList},currentIndex:function(){return this.imageViewer.currentIndex},currentImg:function(){var t=this.imgList;return t?t[this.currentIndex]:null},currentImgSrc:function(){var t,e;return null!==(t=null===(e=this.currentImg)||void 0===e?void 0:e.imgSrc)&&void 0!==t?t:""},currentImgShowSrc:function(){var t=this.currentImgSrcBlobUrl;if(t)return t;if(t=this.currentImgSrc,!t)return t;var e=this.randomUrl;return 0===e?t:Object(c["h"])(t,{r:e})},imageViewer:function(){return this.$store.state.imageViewer},scale:function(){return this.scaleImageViewer},style:function(){var t=this.scale,e=this.currentImg;return e?this.fetchState!==c["a"].Success?{transform:"translate3d(".concat(-this.sceneX,"px, ").concat(-this.sceneY,"px, 1px)")}:{width:Math.ceil(e.width*t)+"px",height:Math.ceil(e.height*t)+"px"}:null}},watch:{currentImgSrc:function(t){this.disposeBlobUrl(!0),this.fetchState=c["a"].Fetching,this.randomUrl=0,this.$emit("setConfig",{sceneX:0,sceneY:0}),this.createBlobUrl(t)}},data:function(){return{fetchState:c["a"].Normal,randomUrl:0,currentImgSrcBlobUrl:""}},props:{sceneWidth:Number,sceneHeight:Number,sceneX:Number,sceneY:Number},beforeDestroy:function(){this.disposeBlobUrl(!0)},created:function(){var t=this.currentImgSrc;t&&(this.fetchState=c["a"].Fetching,this.createBlobUrl(t))}},_s=js,Ms=(n("7bff"),Object(Gr["a"])(_s,As,Fs,!1,null,"bd8670e4",null)),Ls=Ms.exports,Ps=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"commentPoints",staticClass:"comment-points",class:{prevent:t.preventPointEnable,"in-drawing":t.inDrawing},on:{mousedown:t.onMouseDownInScene}},[t._l(t.renderPointComments,(function(n){return e("CommentPointItem",{key:n.id,attrs:{comment:n,text:n.pointIndex,pointX:n.pointX,pointY:n.pointY,sceneInfo:t.currentSceneInfo,artboardRect:t.rect},on:{onLocationChange:t.onLocationChangeComment,setConfig:t.setConfig}})})),t.pointInfo.point.enable?e("CommentPointItem",{attrs:{comment:null,text:t.nextPointIndex,pointX:t.pointInfo.point.x,pointY:t.pointInfo.point.y,sceneInfo:t.currentSceneInfo,artboardRect:t.rect},on:{onLocationChange:t.onLocationChangeEditor,setConfig:t.setConfig}}):t._e(),t.preventPointEnable?e("CommentPointItem",{attrs:{comment:null,text:t.nextPointIndex,pointX:t.pointInfo.preventPoint.x,pointY:t.pointInfo.preventPoint.y,prevent:!0,artboardRect:t.rect,sceneInfo:t.currentSceneInfo}}):t._e()],2):t._e()},Ds=[],Ns=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"comment-point",class:{prevent:t.prevent,on:t.isSelectCurrent,canMove:t.canMove},style:t.style},[e("div",{staticClass:"text",class:{on:t.isSelectCurrent},on:{mousedown:function(e){return e.stopPropagation(),t.onMouseDown.apply(null,arguments)},click:t.onClick}},[t._v(t._s(t.text))]),t.comment&&t.popMsg.visible?e("CommentPointItemCommentContent",{attrs:{comment:t.comment,popMsg:t.popMsg},on:{clickGoComment:t.setSelectComment,clickIgnore:t.ignoreThisClickPopMsg}}):t._e()],1):t._e()},Es=[],Rs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-detail",on:{"!click":function(e){return t.clickIgnore.apply(null,arguments)}}},[e("div",{staticClass:"content"},[e("div",{staticClass:"summary"},[e("span",{domProps:{innerHTML:t._s(t.summaryHTML)}})]),t.attachMentImgs.length>0?e("ul",{staticClass:"attachments"},t._l(t.attachMentImgs,(function(n,i){return e("li",{key:i,on:{click:function(e){return e.preventDefault(),t.clickAttach(n)}}},[e("BlobImage",{attrs:{image:n.preview}})],1)})),0):t._e(),e("div",{staticClass:"date"},[t.artboardVer?e("span",{staticClass:"artboard-ver",attrs:{title:"评论的画板版本#".concat(t.comment.artboardVer)},domProps:{textContent:t._s(t.artboardVer)},on:{click:function(e){return t.setCurArtboardVer(t.comment.artboardVer)}}}):t._e(),t._v(t._s(t.comment.dateStr))])]),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[e("UserFace2",{attrs:{self:t.isSelfComment,tourist:t.isTourist,title:t.userFaceTitle,text:t.userFaceText}}),e("span",{staticClass:"name-value",attrs:{title:t.userFaceTitle}},[t._v(t._s(t.userNickName))])],1),e("a",{attrs:{href:"javascript:;"},on:{click:t.clickGoComment}},[t._v("回复")])])])},Vs=[],Bs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"image"},[t.loadState===t.FetchState.Fetching?e("div",{staticClass:"loading"}):t.loadState===t.FetchState.Error?e("div",{staticClass:"error",attrs:{title:"图片加载失败"}}):t._e(),t.localUrl&&t.loadState!==t.FetchState.Error?e("img",{class:{on:t.loadState===t.FetchState.Success},attrs:{src:t.localUrl},on:{load:t.onImageLoad,error:t.onImgError}}):t._e()])},Hs=[],Us={methods:{onImageLoad:function(){this.loadState=c["a"].Success,this.disposeBlobUrl()},onImgError:function(){this.loadState=c["a"].Error,this.disposeBlobUrl()},loadImage:function(){var t=this.image;if(t){if(Object(l["j"])(t))return this.localUrl=t,void(this.loadState=c["a"].Fetching);this.loadState=c["a"].Fetching;try{this.localUrl=URL.createObjectURL(t)}catch(e){this.loadState=c["a"].Error,this.localUrl=""}}},disposeBlobUrl:function(){var t=this.localUrl;t&&0===t.indexOf("blob:")&&URL.revokeObjectURL(t)},unloadImage:function(){var t=this.localUrl;t&&0===t.indexOf("blob:")&&(URL.revokeObjectURL(t),this.localUrl="",this.loadState=c["a"].Normal)}},computed:{FetchState:function(){return c["a"]}},watch:{image:function(){this.unloadImage(),this.loadImage()}},beforeDestroy:function(){this.unloadImage()},created:function(){this.loadImage()},data:function(){return{localUrl:"",loadState:c["a"].Normal}},props:{image:{type:[File,Blob,String]}}},Gs=Us,Ws=(n("1491"),Object(Gr["a"])(Gs,Bs,Hs,!1,null,"a98298fc",null)),$s=Ws.exports,zs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userface",class:{self:t.self,tourist:t.tourist},attrs:{title:t.title}},[t._v(" "+t._s(t.text)+" ")])},Ys=[],Xs={props:{title:String,text:String,self:Boolean,tourist:Boolean}},Ks=Xs,qs=(n("4d32"),Object(Gr["a"])(Ks,zs,Ys,!1,null,"1eb5422f",null)),Js=qs.exports,Qs=[{name:"solve",text:"确认",enumValue:7},{name:"lookat",text:"看这",enumValue:8},{name:"great",text:"哇",enumValue:9},{name:"compare",text:"对比",enumValue:10},{name:"zhenbang",text:"赞",enumValue:6},{name:"aixin",text:"爱心",enumValue:1},{name:"wenhao",text:"问号",enumValue:4},{name:"666",text:"666",enumValue:11},{name:"tanhao",text:"惊叹",enumValue:3},{name:"zantong",text:"+1",enumValue:5},{name:"haode",text:"OK",enumValue:2},{name:"tuding",text:"图钉",enumValue:12}],Zs={};function tc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if(t.length<=e)return t;var n="...",i=e-n.length,r=t.substring(0,i)+n;return r}Qs.forEach((function(t){Zs[t.text]=t,t.texts&&t.texts.forEach((function(e){Zs[e]=t}))}));var ec=Object(c["hb"])();function nc(t,e){var n=t.index++;return t[n]=e,"\\--".concat(ec,"-{map:").concat(n,"}--\\")}function ic(t,e){return"string"!==typeof e?e:ac(e).replace(/\\--([\w]+)-{map:(\d+)}--\\/gi,(function(e,n,i){var r;return n!==ec?e:null!==(r=t[i])&&void 0!==r?r:""}))}function rc(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(l["j"])(e)?e.replace(/\[([^\]]{1,4})\]/g,(function(e,i){var r=Zs[i];return r?n?"":nc(t,'<span class="icon-emoji emoji-'.concat(r.name,'"></span>')):e})):e}function oc(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.replace(/https?:\/\/([\w-]+\.)+[\w-]+(:\d+)?(\/[\w-+./?%&=#]*)?/gi,(function(e){var i=e;return n&&(i=tc(e)),nc(t,'<a class="out-link" target="_blank" title="'.concat(e,'" href="').concat(e,'">').concat(i,"</a>"))}))}function ac(t){return t.replace(/[&<>"']/g,(function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return t}}))}function sc(t){if(!Object(l["j"])(t))return t;var e={index:0};return ic(e,oc(e,t,!0))}function cc(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Object(l["j"])(t)?(i=i||{index:0},n||(t=rc(i,t),t=oc(i,t)),Object(l["k"])(e)&&(t=t.replace(/\[@uid:(\d+);\]/g,(function(t,r){var o=e[r];if(!o)return t;var a=ac(o.nickName);return n?"@".concat(a):nc(i,'<span class="at-user-item" title="'.concat(a,"(").concat(o.email,')">@').concat(a,"</span>"))}))),ic(i,t)):t}var lc={components:{UserFace2:Js,BlobImage:$s},methods:{clickGoComment:function(){this.$emit("clickGoComment",this.comment,!0)},clickIgnore:function(){this.$emit("clickIgnore")},setCommentEditorVisibleId:function(t){this.$store.commit("setCommentEditorVisibleId",t)},clickAttach:function(t){var e=this.attachMentImgs.map((function(t){return t.imgSrc})),n=e.findIndex((function(e){return e===t.imgSrc}));-1===n&&(n=0),this.$store.commit("setImageViewer",{imgList:e,currentIndex:n})}},computed:{isReply:function(){var t=this.comment;return!!t&&0!==t.commentId},artboardVer:function(){var t=this.comment.artboardVer,e=this.isReply;return null==t||e?null:"#".concat(t)},summaryHTML:function(){return cc(this.comment.summary,this.comment.atUsers)},users:function(){var t;return null!==(t=this.$store.state.artboardDetail.commentUsers)&&void 0!==t?t:{}},selectComment:function(){return this.$store.state.artboardDetail.selectComment},attachMentImgs:function(){var t,e=null===(t=this.comment)||void 0===t?void 0:t.attachMents,n=[];return e?(e.forEach((function(t){if(t){var e=t.thumbFileName||t.fileName;e&&n.push({imgSrc:t.fold+t.fileName,preview:t.fold+e})}})),n):n},userFaceTitle:function(){var t=this.comment;if(!t)return null;var e=t.user;return e?"".concat(e.nickName,"(").concat(e.email,")"):null},userNickName:function(){var t=this.comment;if(!t)return"-";var e=t.user;if(!e)return"-";var n=e.nickName;return n||"-"},isSelfComment:function(){var t=this.comment;if(!t)return!1;var e=t.user;return!!e&&e.userKey===this.cloudUserKey},isTourist:function(){var t=this.comment;if(!t)return!1;var e=t.user;if(!e)return!1;switch(e.authority){case a["p"].Admin:case a["p"].Designer:return!1}return!0},userFaceText:function(){var t=this.userNickName;return t[t.length-1]}},props:{popMsg:Object,comment:Object}},uc=lc,dc=(n("4c8d"),Object(Gr["a"])(uc,Rs,Vs,!1,null,"607c677e",null)),hc=dc.exports,fc=300,mc=227,vc=270,pc={components:{CommentPointItemCommentContent:hc},methods:{onMouseDown:function(t){this.moving=!1,window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp);var e=this.moveData;e.startX=t.clientX,e.startY=t.clientY},onMouseMove:function(t){var e=this.moveData;e.endX=t.clientX,e.endY=t.clientY,!this.moving&&(Math.abs(e.endX-e.startX)>=3||Math.abs(e.endY-e.startY)>=3)&&(this.moving=!0,this.canMove||this.showTextTip("只能移动自己发表的评注,请联系评论发布者或管理员")),this.canMove||(e.endX=e.startX,e.endY=e.startY)},onMouseUp:function(t){var e=this;window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp);var n=this.moveData,i=this.moving,r=this.canMove;if(r){if(i&&!this.prevent){n.endX=t.clientX,n.endY=t.clientY;var o=new wt(this.pointX,this.pointY);if(!this.prevent){var a=this.moveData;o=Jt.getCanvasLocation(this.sceneInfo,o),this.moving&&(o.left+=a.endX-a.startX,o.top+=a.endY-a.startY)}requestAnimationFrame((function(){e.$emit("onLocationChange",e.comment,o.x,o.y)}))}}else requestAnimationFrame((function(){e.moving=!1}))},onClick:function(){var t=this,e=this.comment,n=this.moving;if(!n)if(e){if(this.pointCommentShowAlways&&!this.artboardInComment)return void setTimeout((function(){var e=t.popMsg;e.ignoreThisClick=!1,e.visible=!0,t.pointInView||t.movePointToSceneCenter()}),10);this.setSelectComment(e)}else{this.showTextTip("待提交的评论评注"),this.artboardInComment||this.$store.commit("setRightNavType",a["U"].Comment);var i=300;this.artboardCommentVisible&&(i=50),this.$store.commit("artboardCommentVisible",!0),setTimeout((function(){var e=t.pointInfo.instance;e&&e.focus()}),i)}},setSelectComment:function(t,e){this.artboardInComment||this.$store.commit("setRightNavType",a["U"].Comment),this.$store.commit("setSelectComment",{comment:t,openEditor:e})},movePointToSceneCenter:function(){var t=this.sceneInfo,e=this.artboardRect,n=this.pointX,i=this.pointY,r=t.scale,o=(e.width/2-n)*r,a=(e.height/2-i)*r;this.$emit("setConfig",{sceneX:o,sceneY:a})},ignoreThisClickPopMsg:function(){var t=this.popMsg;t.ignoreThisClick=!0},hidePopMsg:function(){var t=this.popMsg;this.moving||(clearTimeout(t.handleHide),t.handleHide=setTimeout((function(){t.ignoreThisClick?t.ignoreThisClick=!1:t.visible=!1}),50))}},beforeDestroy:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("click",this.popMsg.hidePopMsg,!0),clearTimeout(this.popMsg.handleHide)},computed:{pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},commentVisible:function(){return this.artboardInComment&&this.artboardCommentVisible},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},leftVisible:function(){return this.$store.state.artboardDetail.leftSideVisible},pointInfo:function(){return this.$store.state.editComment.pointInfo},isSelectCurrent:function(){var t=this.comment,e=this.selectComment;return e===t&&null!=t},selectComment:function(){return this.$store.state.artboardDetail.selectComment},canMove:function(){return!this.prevent&&(this.isSelfComment||this.cloudUserIsOwner)},isSelfComment:function(){var t=this.comment;if(!t)return!0;var e=t.user;return!!e&&e.userKey===this.cloudUserKey},pointInView:function(){var t=this.location,e=this.pointRadius/2,n=this.sceneInfo,i=n.sceneWidth,r=n.sceneHeight,o=(new w).set(e,e,i-2*e,r-2*e);this.leftVisible&&(o.x+=mc),this.commentVisible?o.width-=fc:this.artboardInComment||(this.curNode&&(o.width-=fc),o.width-=vc,o.width+=2*e);var a=(new w).set(t.x,t.y,1,1);return a.isOverlap(o)},visible:function(){if(this.prevent)return!0;if(this.isSelectCurrent)return!0;if(this.moving)return!0;var t=this.location,e=2*this.pointRadius,n=this.sceneInfo,i=n.sceneWidth,r=n.sceneHeight,o=(new w).set(0,0,i,r),a=(new w).set(t.x-e,t.y-e,2*e,2*e);return a.isOverlap(o)},location:function(){var t=new wt(this.pointX,this.pointY);if(!this.prevent){var e=this.moveData,n=this.sceneInfo;t=Jt.getCanvasLocation(n,t),this.moving&&(t.left+=e.endX-e.startX,t.top+=e.endY-e.startY)}return t},style:function(){var t=this.location,e=this.pointRadius;return{top:t.top-e+"px",left:t.left-e+"px"}}},watch:{"popMsg.visible":function(t){t?window.addEventListener("click",this.hidePopMsg,!0):window.removeEventListener("click",this.hidePopMsg,!0)},artboardInComment:function(t){t&&(this.popMsg.visible=!1)},isSelectCurrent:function(t){t&&(this.pointInView||this.movePointToSceneCenter())},pointX:function(){this.moving=!1},pointY:function(){this.moving=!1}},props:{artboardRect:{type:Object,default:null},sceneInfo:{type:Object,default:null},comment:{type:Object,default:null},text:[String,Number],pointX:Number,pointY:Number,prevent:{type:Boolean,default:!1}},data:function(){return{popMsg:{visible:!1,handleHide:0,ignoreThisClick:!1},pointRadius:15,moving:!1,moveData:{startX:0,startY:0,endX:0,endY:0}}}},bc=pc,gc=(n("3042"),Object(Gr["a"])(bc,Ns,Es,!1,null,"2b563526",null)),wc=gc.exports,yc={components:{CommentPointItem:wc},methods:{setConfig:function(t){this.$emit("setConfig",t)},onLocationChangeComment:function(t,e,n){var o=this;return Object(r["a"])(Object(i["a"])().m((function r(){var a,s,c,u,d,h,f,m;return Object(i["a"])().w((function(i){while(1)switch(i.p=i.n){case 0:if(t){i.n=1;break}return i.a(2);case 1:if(a=o.getLocation({pageX:e+o.sceneOffsetX,pageY:n+o.sceneOffsetY}),a.x!==t.pointX||a.y!==t.pointY){i.n=2;break}return i.a(2);case 2:return t.pointX=a.x,t.pointY=a.y,s=t.id,c=t.artboardId,u=t.commentId,d=t.pointX,h=t.pointY,i.p=3,i.n=4,o.fetchPostCloudApi("setcommentpointbyweb",{body:{id:s,commentId:u,artboardId:c,pointEnable:!0,pointX:d,pointY:h}});case 4:if(f=i.v,Object(l["k"])(f)){i.n=5;break}return i.a(2);case 5:if(f.success){i.n=6;break}throw new Error(f.errMsg);case 6:i.n=8;break;case 7:i.p=7,m=i.v,o.showTextTip("移动评注失败:".concat(m));case 8:return i.a(2)}}),r,null,[[3,7]])})))()},onLocationChangeEditor:function(t,e,n){var i=this.pointInfo.point,r=this.getLocation({pageX:e+this.sceneOffsetX,pageY:n+this.sceneOffsetY});r.x===i.x&&r.y===i.y||(i.x=r.x,i.y=r.y)},getLocation:function(t){var e=t.pageX,n=t.pageY,i=e,r=n,o=this.sceneOffsetX,a=this.sceneOffsetY,s=this.rect,c=this.sceneX,l=this.sceneY,u=this.scale,d=this.sceneWidth,h=this.sceneHeight,f=(d-s.width*u)/2,m=(h-s.height*u)/2;return i-=o,r-=a,i-=f,r-=m,i-=c,r-=l,i=Math.round(i/u),r=Math.round(r/u),new wt(i,r)},onMouseMove:function(t){if(this.preventPointEnable){var e=this.pointInfo.preventPoint;e.x=t.clientX,e.y=t.clientY}},onMouseDownInScene:function(t){if(this.preventPointEnable){var e=this.getLocation({pageX:t.clientX,pageY:t.clientY}),n=this.pointInfo,i=n.point,r=n.preventPoint,o=n.instance;r.enable=!1,i.pointIndex=this.nextPointIndex,i.enable=!0,i.x=e.x,i.y=e.y,requestAnimationFrame((function(){o&&o.focus()}))}},onMouseDown:function(){var t=this.pointInfo.preventPoint;t.enable=!1}},watch:{nextPointIndex:function(t){var e=this.pointInfo.point;e.enable&&(e.pointIndex=t)},preventPointEnable:function(t){t?(window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mousedown",this.onMouseDown)):(window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mousedown",this.onMouseDown))}},computed:{initedScale:function(){return this.artboardDetail.initedScale},currentSceneInfo:function(){var t=new Xt,e=this.scale,n=this.sceneWidth,i=this.sceneHeight,r=this.sceneOffsetX,o=this.sceneOffsetY,a=this.getLocation({pageX:r,pageY:o});return t.offset=a,t.scale=e,t.canvasScale=1,t.sceneWidth=n,t.sceneHeight=i,t},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardDetail:function(){return this.$store.state.artboardDetail},curArtboardVerData:function(){var t,e=this.curArtboard,n=this.artboard;return null!==(t=null===e||void 0===e?void 0:e.artboardVerData)&&void 0!==t?t:n},rect:function(){var t,e=this.curArtboardVerData,n=this.calcArtScale,i=null!==(t=null===e||void 0===e?void 0:e.boundsInArtboard)&&void 0!==t?t:new w,r=i.width,o=i.height;return n>0&&(r=Math.round(r/n),o=Math.round(o/n)),(new w).set(0,0,r,o)},preventPointEnable:function(){return this.pointInfo.preventPoint.enable},pointInfo:function(){return this.$store.state.editComment.pointInfo},comments:function(){return this.$store.state.artboardDetail.comments},maxPointIndex:function(){return this.$store.state.artboardDetail.maxPointIndex},nextPointIndex:function(){var t=this.pointComments,e=this.maxPointIndex;if(e>0)return e+1;var n=t[t.length-1];return n?n.pointIndex+1:1},commentOnlyCurrentVerArtboard:function(){return!this.notSupportArtboardVerCloudVersion&&this.$store.state.commentOnlyCurrentVerArtboard},pointComments_onlyCurrentVer:function(){var t,e,n=this.artboardVerId;return null!==(t=null===(e=this.pointComments)||void 0===e?void 0:e.filter((function(t){return t.artboardVer===n})))&&void 0!==t?t:[]},renderPointComments:function(){var t=this.pointComments,e=this.pointComments_onlyCurrentVer,n=this.commentOnlyCurrentVerArtboard;return n?e:null!==t&&void 0!==t?t:[]},artboardVerId:function(){var t,e;return null!==(t=null===(e=this.curArtboardVerData)||void 0===e?void 0:e.lastVersionId)&&void 0!==t?t:0},pointComments:function(){var t=[],e=this.comments;return Object(l["i"])(e)?(e.forEach((function(e){Object(l["k"])(e)&&(e.pointEnable&&t.push(e),Object(l["i"])(e.comments)&&e.comments.forEach((function(e){Object(l["k"])(e)&&e.pointEnable&&t.push(e)})))})),t.sort((function(t,e){var n=t.pointIndex,i=e.pointIndex;return n===i&&(n=t.id,i=e.id),n>i?1:-1})),t):t},visible:function(){var t=this.sceneWidth,e=this.sceneHeight,n=this.rect;return 0!==t&&0!==e&&0!==n.width&&0!==n.height&&(this.artboardInComment||!this.inMultDownMode&&this.pointCommentShowAlways)},inDrawing:function(){var t=this.$store.state.editComment;return t.drawing},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},notSupportArtboardVerCloudVersion:function(){return Qr.notSupportAiPrompt(this.cloudVersion)}},props:{sceneWidth:Number,sceneHeight:Number,sceneX:Number,sceneY:Number,sceneOffsetX:Number,sceneOffsetY:Number,scale:Number},beforeDestroy:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mousedown",this.onMouseDown)},created:function(){0}},kc=yc,Cc=(n("7261"),Object(Gr["a"])(kc,Ps,Ds,!1,null,"e087701c",null)),xc=Cc.exports,Sc=function(){var t=this,e=t._self._c;return e("section",{ref:"box",staticClass:"art-info",class:{dragging:t.dragging,scaling:t.scaling,canvas:t.useCanvasMode,figma:t.isFigmaArtboard},style:t.style,on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},click:t.clickInfoBox}},[e("div",{staticClass:"info",on:{click:function(e){t.currentClickInInfo=!0}}},[e("div",{staticClass:"name",attrs:{title:t.title}},[t.curArtboardLoadedVerData.lastVersionId?e("div",{staticClass:"ver",domProps:{textContent:t._s(t.verShowtext)},on:{click:t.clickShowVerList}}):t._e(),e("div",{staticClass:"text",domProps:{textContent:t._s(t.curArtboardLoadedVerData.name)}})]),t.artboardInDevStatus?e("div",{staticClass:"dev"}):t._e()]),t.useCanvasMode?[t.isPixiError?e("div",{staticClass:"pixi-error",on:{mousedown:function(t){t.stopPropagation()}}},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v(t._s(t.pixiLoadInfo.errorText))]),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v("重新加载")])])])]):t.isPixiFetching?e("div",{staticClass:"pixi-loading"},[e("div",{staticClass:"box"},[t._v("正在加载画板详情...")])]):t._e()]:[e("img",{staticClass:"preview",class:{loading:t.imgLoading},attrs:{src:t.artboardPreviewPng},on:{load:t.onImgLoad,error:t.onImgError}}),t.imgLoading?e("div",{staticClass:"img-loading"},[e("div",{staticClass:"loading"},[t._v("正在加载画板预览图...")])]):t._e()],t.artboardInComment||t.scaling||t.useCanvasMode&&(t.isPixiError||t.isPixiFetching)?t._e():[e("NodeItem",{attrs:{parentRect:t.parentRect,item:t.curArtboardLoadedVerData,shiftKey:t.shiftKey}}),t._l(t.exportNodes,(function(t,n){return e("SliceTip",{key:"".concat(n,"+").concat(t.guid),attrs:{node:t}})})),e("NodeInfoCurrent"),e("NodeIntersectInfo",{attrs:{width:t.rect.width,height:t.rect.height}})]],2)},Tc=[],Oc=function(){var t=this,e=t._self._c;return t.visibleMax?e("div",{staticClass:"node-item-wrap",class:{master:t.visibleOutChild},style:t.style,attrs:{title:t.item.name}},[t.item.mlIgnoreEvent?t._e():e("div",{staticClass:"node-item",attrs:{title:t.item.name},on:{click:function(e){return e.stopPropagation(),t.clickNode.apply(null,arguments)},mouseenter:function(e){return e.stopPropagation(),t.mouseEnterNode.apply(null,arguments)},mouseleave:function(e){return e.stopPropagation(),t.mouseLeaveNode.apply(null,arguments)}}}),t._l(t.children,(function(n,i){return e("NodeItem",{key:"".concat(i,"_").concat(n.guid),attrs:{parentRect:t.item.boundsInArtboard,item:n,shiftKey:t.shiftKey}})}))],2):t.visibleMin?e("div",{staticClass:"node-item-wrap on",class:{hotspot:t.isHotSpot},style:t.style,attrs:{title:t.item.name},on:{click:function(e){return e.stopPropagation(),t.clickNode.apply(null,arguments)},mouseenter:function(e){return e.stopPropagation(),t.mouseEnterNode.apply(null,arguments)},mouseleave:function(e){return e.stopPropagation(),t.mouseLeaveNode.apply(null,arguments)}}}):t._e()},Ic=[],Ac={name:"NodeItem",methods:{mouseLeaveNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(null)},mouseEnterNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(this.item)},getNodesFromPoint:function(t){var e=t.target;if(e){var n,i=t.offsetX;null==i?(i=t.layerX,n=t.layerY):n=t.offsetY;var r=this.scale;i/=r,n/=r;var o="".concat(i,"_").concat(n),a=this.cachePointNodes;if(a.key===o)return a.nodes;var s=this.item.boundsInArtboard,c=(new w).set(s.x+i,s.y+n,1,1),l=this.curArtboard.childs,u=[];return l.forEach((function(t){if(t&&t.visible&&!t.mlIgnoreEvent){var e=t.boundsInArtboard;if(e.width<=2||e.height<=2){var n=e,i=n.x,r=n.y,o=n.width,a=n.height;e=(new w).set(i,r,o,a),e.width<=2&&(e.width+=2,e.x-=1),e.height<=2&&(e.height+=2,e.y-=1)}O(e,c)&&u.push(t)}})),a.key=o,a.nodes=u,u}},clickNode:function(t){var e=this.item;if(this.inMultDownMode)e.markedForExport&&(e.mlUserSelectDown=!e.mlUserSelectDown);else{var n=this.curNode,i=!1;if(null!=n&&this.shiftKey&&(n=this.enterNode,i=!0),null!=n&&this.clickedNode===e&&Math.abs(this.clickPageX-t.pageX)<2&&Math.abs(this.clickPageY-t.pageY)<2){var r=this.getNodesFromPoint(t),o=r.findIndex((function(t){return t===n}));if(-1===o)o=r.length-1;else{var a=this.isSketch2025Artboard,s=n.boundsInArtboard;while(o--&&o>=0){var c=r[o],l=c.boundsInArtboard;if(y(l,s)){var u=gt(c,a);if(!c.markedForExport&&!c.renderTapInteraction&&1!==c.types.Artboard&&(u||1===c.types.SymbolMaster||1===c.types.SymbolInstance)&&!c.fillEnabled&&!c.strokeEnable&&!c.shadow&&!c.innerShadow)continue}break}o<0&&(o=r.length-1)}var d=r[o];n=d||e}else n=e;this.clickPageX=t.pageX,this.clickPageY=t.pageY,i?this.setEnterNode(n):this.setCurNode(n),this.setClickedNode(e)}}},computed:{isSketchArtboard:function(){var t,e,n=this.curArtboardLoadedVerData;return!!n&&(null!==(t=n.fileType)&&void 0!==t?t:null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)===a["r"].SKETCH},isSketch2025Artboard:function(){return this.isSketchArtboard&&!0===this.curArtboardLoadedVerData.sk25},visibleOutChild:function(){var t;return 1===(null===(t=this.item.types)||void 0===t?void 0:t.GroupVisibleOutChild)},children:function(){return this.item.children||[]},visibleMax:function(){return this.visible&&this.children.length>0},visibleMin:function(){return!this.visibleMax&&this.visible&&!this.item.mlIgnoreEvent&&!this.item.mlIgnoreScene},visible:function(){var t=this.item;return!!t&&(!!t.visible&&!t.mlIgnoreLeftSide)},isHotSpot:function(){var t=this.item;return!!t&&t.type===a["nb"].HotSpot},scale:function(){return this.scaleArtboard},style:function(){var t=this.item.boundsInArtboard,e=this.parentRect,n=this.scale,i=Math.ceil(Math.max(1,t.width*n)),r=Math.ceil(Math.max(1,t.height*n)),o=Math.round((t.y-e.y)*n),a=Math.round((t.x-e.x)*n);return i<3&&(i+=2,a-=1),r<3&&(r+=2,o-=1),{top:o+"px",left:a+"px",width:i+"px",height:r+"px"}}},props:{item:Object,shiftKey:Boolean,parentRect:Object},data:function(){return{clickPageX:0,clickPageY:0,cachePointNodes:{nodes:null,key:""}}}},Fc=Ac,jc=(n("5a06"),Object(Gr["a"])(Fc,Oc,Ic,!1,null,"0acab07a",null)),_c=jc.exports,Mc=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"node-info-current",class:{"only-enter":null==t.curNode},style:t.showNodeStyle},[t.curNode?t._l(t.borRadios,(function(n){return e("div",{key:n,class:["bor bor-"+n],style:t.borderStyle})})):t._e(),t.showNodeSize?[e("div",{staticClass:"item width",style:t.nodeWidthStyle},[e("span",[t._v(t._s(t.nodeRect.showWidth))])]),e("div",{staticClass:"item height",style:t.nodeHeightStyle},[e("span",[t._v(t._s(t.nodeRect.showHeight))])])]:t._e()],2):t._e()},Lc=[],Pc={computed:{showNodeSize:function(){var t=this.curNode,e=this.enterNode;return t?!e||e===t:!!e},nodeRect:function(){if(!this.showNodeSize)return{width:0,height:0,top:0,left:0};var t=this.showNode,e=t.boundsInArtboard,n=this.scaleArtboard,i=t.markedForExport,r={width:Math.ceil(e.width*n),height:Math.ceil(e.height*n),left:Math.floor(e.x*n),top:Math.floor(e.y*n),showWidth:this.getCalcPlatformValue(e.width,{markedForExport:i,isHorizintal:!0}),showHeight:this.getCalcPlatformValue(e.height,{markedForExport:i,isHorizintal:!1})};return r},nodeWidthStyle:function(){var t=this.nodeRect;return{left:Math.ceil(t.width/2)+"px"}},nodeHeightStyle:function(){var t=this.nodeRect;return{left:t.width+1+"px",top:Math.ceil(t.height/2)+"px"}},borderStyle:function(){var t=this.borderWidth;return"width:".concat(t,";height:").concat(t,";")},borderWidth:function(){var t=2.3*this.scaleArtboard+3;return t=Math.round(t),t+"px"},borRadios:function(){return[0,1,2,3]},visible:function(){if(this.inMultDownMode)return!1;var t=this.showNode;return!!t},showNode:function(){var t=this.curNode;return t||(t=this.enterNode),t},showNodeStyle:function(){var t=this.showNode;if(t){var e=t.boundsInArtboard,n=this.scaleArtboard;return{top:Math.floor(e.y*n)+"px",left:Math.floor(e.x*n)+"px",width:Math.ceil(Math.max(1,e.width)*n)+"px",height:Math.ceil(Math.max(1,e.height)*n)+"px"}}}}},Dc=Pc,Nc=(n("c67e"),Object(Gr["a"])(Dc,Mc,Lc,!1,null,"13682106",null)),Ec=Nc.exports,Rc=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"node-info"},[e("div",{staticClass:"enter-item-box",style:t.enterNodeStyle}),t._l(t.markLines,(function(n){return e("div",{key:n.id,staticClass:"item",class:{horizintal:n.isHorizintal,vertical:!n.isHorizintal,dashed:n.isDashed},style:t.getMarkStyle(n)},[n.text?e("span",[t._v(t._s(n.text))]):t._e()])}))],2):t._e()},Vc=[],Bc={methods:{getMarkStyle:function(t){var e=this.scale,n=this.markScale;0===n&&(n=1),e/=n;var i,r,o=t.rect,a={top:Math.floor(o.top*e)+"px",left:Math.floor(o.left*e)+"px"};return t.isHorizintal?(i="height",r="width"):(i="width",r="height"),a[i]=o[i]+"px",a[r]=Math.ceil(o[r]*e)+"px",a},refreshMarkLines:function(){var t=this;if(!this.visible)return[];var e=this.curNode,n=this.enterNode,i=e.boundsInArtboard,r=n.boundsInArtboard,o=(new w).set(i.x,i.y,i.width,i.height),a=(new w).set(r.x,r.y,r.width,r.height),s={width:this.getCalcValue(this.width),height:this.getCalcValue(this.height)},c=e.markedForExport;o.x=this.getCalcValue(o.x),o.y=this.getCalcValue(o.y),o.width=this.getCalcValue(o.width,c),o.height=this.getCalcValue(o.height,c);var l=n.markedForExport;return a.x=this.getCalcValue(a.x),a.y=this.getCalcValue(a.y),a.width=this.getCalcValue(a.width,l),a.height=this.getCalcValue(a.height,l),this.markScale=this.getCalcRectScale(),T(o,a,s,(function(e,n){return t.getCalcUnitTemplateValue(e,!1,n)}))}},watch:{curNode:function(){this.markLines=this.refreshMarkLines()},enterNode:function(){this.markLines=this.refreshMarkLines()},visible:function(t){t&&(this.markLines=this.refreshMarkLines())}},computed:{enterNodeStyle:function(){var t=this.enterNode;if(t){var e=t.boundsInArtboard,n=this.scaleArtboard;return{top:Math.floor(e.y*n)+"px",left:Math.floor(e.x*n)+"px",width:Math.ceil(Math.max(1,e.width)*n)+"px",height:Math.ceil(Math.max(1,e.height)*n)+"px"}}},scale:function(){return this.scaleArtboard},visible:function(){return!this.inMultDownMode&&null!=this.curNode&&null!=this.enterNode&&this.enterNode!==this.curNode}},props:{width:Number,height:Number},data:function(){return{markScale:1,markLines:[]}},mounted:function(){this.markLines=this.refreshMarkLines()}},Hc=Bc,Uc=(n("40a0"),Object(Gr["a"])(Hc,Rc,Vc,!1,null,"7e7e35ee",null)),Gc=Uc.exports,Wc=function(){var t=this,e=t._self._c;return t.visibleSelected?e("div",{staticClass:"slice-tip",class:{out:!t.inArtboard||t.inMultDownMode},style:t.style,on:{click:function(e){return e.stopPropagation(),t.clickSliceTipSelected(!1)}}},[e("div",{staticClass:"name",attrs:{title:"点击取消选择\n".concat(t.nodeName)}},[t._v(" "+t._s(t.nodeName)+" ")])]):t.visibleMin?e("div",{staticClass:"slice-tip-min",class:{off:!t.inMultDownMode&&(t.curNode==t.node||t.enterNode==t.node),out:!t.inArtboard||t.inMultDownMode},style:t.style,on:{click:function(e){return t.clickSliceTipSelected(!0)}}}):t._e()},$c=[],zc={methods:{clickSliceTipSelected:function(t){this.inMultDownMode&&this.inArtboard&&(this.node.mlUserSelectDown=t,this.artboardDetail.sliceScrollNode=this.node)}},computed:{artboardDetail:function(){return this.$store.state.artboardDetail},sliceBorderLineHide:function(){return this.$store.state.sliceBorderLineHide},visibleMin:function(){var t=this.inMultDownMode,e=this.sliceBorderLineHide,n=this.inArtboard;return t||!e&&n},visibleSelected:function(){var t=this.inMultDownMode,e=this.node;return t&&e.mlUserSelectDown},nodeName:function(){return Object(c["H"])(this.node)},style:function(){var t=this.node.boundsInArtboard,e=this.scaleArtboard;return{top:Math.floor(t.y*e)+"px",left:Math.floor(t.x*e)+"px",width:Math.ceil(Math.max(1,t.width)*e)+"px",height:Math.ceil(Math.max(1,t.height)*e)+"px"}},inArtboard:function(){var t=this.node.boundsInArtboard,e=O(t,this.curArtboardLoadedVerData.boundsInArtboard);return e}},props:{node:Object}},Yc=zc,Xc=(n("7eb1"),Object(Gr["a"])(Yc,Wc,$c,!1,null,"a1aa3b96",null)),Kc=Xc.exports,qc={components:{NodeItem:_c,NodeIntersectInfo:Gc,NodeInfoCurrent:Ec,SliceTip:Kc},methods:{clickReload:function(){window.location.reload()},clickShowVerList:function(){this.artboardDetail.artboardVerListVisible=!0},onImgLoad:function(){this.imgState=c["a"].Success},onImgError:function(){this.imgState=c["a"].Error},setSelectComment:function(t){this.$store.commit("setSelectComment",t)},onContextmenu:function(t){var e=this,n=t.pageX,i=t.pageY,r=this.curArtboard;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:i,artboard:r})}))},setArtboardCommentVisible:function(t){this.$store.commit("artboardCommentVisible",t)},clickInfoBox:function(){this.currentClickInInfo?this.currentClickInInfo=!1:(this.setSelectComment(null),this.setArtboardCommentVisible(!0))},clickZoomContainer:function(){this.artboardInComment?(this.setSelectComment(null),this.setArtboardCommentVisible(!1)):this.inMultDownMode||this.setCurNode(null)},canEmitEvent:function(){var t=this.pixiLoadInfo.fetchState,e=this.useCanvasMode;if(e)switch(t){case c["a"].Error:case c["a"].Fetching:return!1}return!0},onSceneResize:function(t,e,n){if(!this.initedScale||n){var i=this.rect;if(i&&0!==t&&0!==e){var r=i.width/t,o=i.height/e,a=Math.max(r,o);0!==a&&(this.artboardDetail.initedScale=!0,this.setScaleArtboard(.92/a))}}},quickKey:function(t){this.shiftKey=t.shiftKey}},computed:{isPixiError:function(){return this.pixiLoadInfo.fetchState===c["a"].Error},isPixiFetching:function(){return this.pixiLoadInfo.fetchState===c["a"].Fetching},pixiLoadInfo:function(){return this.$store.state.artboardDetail.pixiLoadInfo},artboardDetail:function(){return this.$store.state.artboardDetail},initedScale:function(){return this.artboardDetail.initedScale},verShowtext:function(){var t,e=this.curArtboardLoadedVerData,n=this.curArtboard;return e&&n?"".concat(e.lastVersionId===(null===(t=n.artboard)||void 0===t?void 0:t.lastVersionId)?"最新":"历史","版本 #").concat(e.lastVersionId):null},title:function(){return di(this.curArtboardLoadedVerData)},artboardInDevStatus:function(){var t=this.curArtboard,e=this.inCloudViewerMode;return e&&t.customStatus===a["i"].Dev},isFigmaArtboard:function(){return this.fileType===a["r"].FIGMA},fileType:function(){var t,e,n=this.artboard;return null!==(t=null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)&&void 0!==t?t:n.fileType},artRenderInCanvasMode:function(){return this.$store.state.artRenderInCanvasMode},useCanvasMode:function(){return this.inCloudMode&&this.artRenderInCanvasMode},imgLoading:function(){return this.imgState===c["a"].Fetching},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},exportNodes:function(){var t=this.curArtboard;if(!t)return[];var e=t.exportNodes;return e||[]},rect:function(){var t=this.parentRect,e=a["b"]/2;if(!t)return new w;var n=t.x+t.width,i=t.y+t.height;return(new w).set(0,-e,n,i+e)},parentRect:function(){var t,e,n,i=this.curArtboardLoadedVerData,r=this.artboard;return null!==(t=null!==(e=null!==(n=i.boundsInArtboard)&&void 0!==n?n:null===r||void 0===r?void 0:r.boundsInArtboard)&&void 0!==e?e:i.boundsInParent)&&void 0!==t?t:null},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardPreviewPng:function(){var t,e=this.inCloudMode,n=this.curArtboardLoadedVerData;return e&&this.isSupportWebp&&(t=n.artboardPreviewWebp),t||(t=n.artboardPreviewPng),e?c["O"].combineResourcePath(t):"".concat(t,"?").concat(n.mlOutputTime)},isSupportWebp:function(){return this.$store.state.isSupportWebp===Ni.Support},style:function(){var t=this.useCanvasMode,e=this.curArtboardLoadedVerData,n=this.scale,i=this.parentRect,r=null!==i&&void 0!==i?i:{width:0,height:0},o="none";return!t&&e.fillEnabled&&e.fill&&!1===e.fill.includedInExport&&(o=V(e.fill.value).value),{background:o,width:Math.ceil(r.width*n)+"px",height:Math.ceil(r.height*n)+"px"}},scale:function(){return this.scaleArtboard}},watch:{artboardPreviewPng:function(t){t&&(this.imgState=c["a"].Fetching)},curArtboardLoadedVerData:function(){this.artboardDetail.initedScale=!1}},data:function(){return{imgState:c["a"].Normal,previewImage:null,shiftKey:!1,currentClickInInfo:!1}},props:{sceneWidth:Number,sceneHeight:Number,dragging:Boolean,scaling:Boolean},created:function(){window.addEventListener("keydown",this.quickKey),window.addEventListener("keyup",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey),window.removeEventListener("keyup",this.quickKey);var t=this.previewImage;t&&(t.src=null,t=null)}},Jc=qc,Qc=(n("3e9d"),Object(Gr["a"])(Jc,Sc,Tc,!1,null,"5022809b",null)),Zc=Qc.exports,tl=function(){var t=this,e=t._self._c;return e("section",{ref:"box",staticClass:"art-list",class:{dragging:t.dragging},style:t.style},[e("div",{staticClass:"box-size",style:t.boxSize}),t._l(t.renderDocuments,(function(n){return e("div",{key:n.guid,staticClass:"art-doc"},[n.sections?t._l(n.sections,(function(i){return e("SectionItem",{key:n.guid+i.guid,attrs:{sectionItem:i,maxRect:{x:n.maxRect.x-n.rect.x+t.rect.x,y:n.maxRect.y-n.rect.y+t.rect.y}}})})):t._e(),t._l(n.arts,(function(i){return e("ArtboardListItem",{key:n.guid+i.artboard.guid,attrs:{item:i,maxRect:{x:n.maxRect.x-n.rect.x+t.rect.x,y:n.maxRect.y-n.rect.y+t.rect.y}}})}))],2)}))],2)},el=[],nl=function(){var t=this,e=t._self._c;return e("section",{ref:"$item",staticClass:"item",class:{on:t.selected,figma:t.isFigmaArtboard},style:t.style},[e("div",{staticClass:"info"},[e("div",{staticClass:"name",attrs:{title:t.title}},[e("div",{staticClass:"text",domProps:{textContent:t._s(t.artboard.name)}})]),t.artboardInDevStatus?e("div",{staticClass:"dev"}):t._e()]),e("div",{staticClass:"img",style:t.imgStyle,attrs:{title:t.goInfoTip},on:{mouseenter:t.onMouseEnter,dblclick:function(e){return t.dlbClickArtboard()},click:t.clickArtboard,mouseleave:t.onMouseLevel,contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[t.artboard.flowStart?e("div",{staticClass:"interaction-home"}):t._e(),t.errorText?e("div",{staticClass:"error"},[t._v(t._s(t.errorText))]):e("img",{attrs:{src:t.artboardPreviewPng}})]),t.interactionVisible?e("artboard-item-interactions",{attrs:{renderInteractions:t.renderInteractions,item:t.item}}):t._e()],1)},il=[],rl=function(){var t=this,e=t._self._c;return t.visible?e("svg",{staticClass:"artboard-interaction-list",class:{light:t.light}},[t._l(t.arrows,(function(n){return[e("path",{key:n.key+"_rect",class:t.getPathCls(n,"rect"),attrs:{d:n.item.nodeRect}}),e("path",{key:n.key+"_line",class:t.getPathCls(n,"line"),attrs:{d:n.item.curve}}),e("image",{key:n.key+"_arrow_icon",attrs:{x:n.item.arrowIcon.x,y:n.item.arrowIcon.y,width:n.item.arrowIcon.width,height:n.item.arrowIcon.height,href:t.isLightArrow(n)?n.item.arrowIcon.href:n.item.arrowIcon.href_default}})]}))],2):t._e()},ol=[],al={methods:{isLightArrow:function(t){var e,n=this.enterArtboard,i=this.light;return!!i||null!=t.toArtboardItem&&null!=n&&(null===(e=n.artboard)||void 0===e?void 0:e.cid)===t.toArtboardItem.cid},getPathCls:function(t,e){var n,i=[];e&&(Object(l["i"])(e)||(e=[e]),i.push.apply(i,Object(u["a"])(e)));var r=this.enterArtboard;return null!=t.toArtboardItem&&null!=r&&(null===(n=r.artboard)||void 0===n?void 0:n.cid)===t.toArtboardItem.cid&&i.push("light"),i}},computed:{light:function(){var t=this.enterArtboard,e=this.item;return t===e},enterArtboard:function(){return this.$store.state.enterArtboard},visible:function(){return!this.inArtboardMultDownMode&&this.arrows.length>0},arrows:function(){var t=[],e=this.item.artboard,n=this.renderDocuments,i=this.filterDocumentType,r=i===a["K"].Section,o=e.pageGuid||e.docGuid,s=e.boundsInParentForList;return this.renderInteractions.forEach((function(i){var a,c=Re(n,i,s,o,{inSection:r,topSectionId:e.topSectionId});c&&t.push({item:c,key:i.guid,toArtboardItem:null===(a=i.renderTapInteraction)||void 0===a?void 0:a.toArtboardItem})})),t}},props:{renderInteractions:Array,item:Object}},sl=al,cl=(n("dbb2"),Object(Gr["a"])(sl,rl,ol,!1,null,"63ff2ae6",null)),ll=cl.exports,ul={components:{ArtboardItemInteractions:ll},methods:{onMouseEnter:function(){this.$store.commit("enterArtboard",this.item)},onMouseLevel:function(){this.$store.commit("enterArtboard",null)},onContextmenu:function(t){var e=this,n=t.pageX,i=t.pageY,r=this.item;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:i,artboard:r})}))},dlbClickArtboard:function(){clearTimeout(this.tipHandle),this.inArtboardMultDownMode||(this.hideTextTip(),this.setCurArtboard(this.item))},clickArtboard:function(){var t=this;clearTimeout(this.tipHandle),this.inArtboardMultDownMode?this.item.mlUserSelectDown=!this.item.mlUserSelectDown:this.tipHandle=setTimeout((function(){t.showTextTip(t.goInfoTip2,7)}),200)},loadedImage:function(t){if(null==t)return this.imgErrored=!0,void(this.imgLoaded=!1);this.imgErrored=!1,this.imgLoaded=!0},loadImage:function(){var t=this.artboardPreviewPng;t&&(this.imgErrored=!1,this.imgLoaded=!1,ce.add(t,this.loadedImage))}},beforeDestroy:function(){clearTimeout(this.tipHandle),ce.remove(this.artboardPreviewPng,this.loadedImage)},created:function(){this.loadImage()},watch:{artboardPreviewPng:function(t,e){this.imgErrored=!1,ce.remove(e,this.loadedImage),this.loadImage()}},computed:{title:function(){return di(this.artboard)},artboardInDevStatus:function(){var t=this.item,e=this.inCloudViewerMode;return e&&t.customStatus===a["i"].Dev},isFigmaArtboard:function(){return this.fileType===a["r"].FIGMA},fileType:function(){var t,e,n=this.artboard;return null!==(t=null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)&&void 0!==t?t:n.fileType},artboardShowInteractionLine:function(){return this.$store.state.artboardShowInteractionLine},renderInteractions:function(){var t;if(!this.inCloudMode)return null;var e=this.item.artboard.interactionInfo;if(!e)return null;if(e.fetchState!==c["a"].Success)return null;var n=null===(t=e.data)||void 0===t?void 0:t.renderInteractions;return Object(l["i"])(n)&&n.length>0?n:null},interactionVisible:function(){return this.artboardShowInteractionLine&&!!this.renderInteractions},errorText:function(){return this.imgErrored?"画板预览图加载失败":this.imgLoaded?null:"预览图加载中..."},outlineWidth:function(){if(this.inArtboardMultDownMode)return Math.ceil(3/this.scaleList)+"px"},selected:function(){return this.inArtboardMultDownMode&&this.item.mlUserSelectDown},goInfoTip2:function(){return mi(this.item.artboard,this.inCloudMode)},goInfoTip:function(){if(this.inArtboardMultDownMode)return"单击选中/取消选中";var t=this.item.artboard;return this.inCloudMode?di(t):"双击查看 ".concat(t.name," 标注详情")},style:function(){var t=a["b"]/2,e=this.artboard.boundsInParentForList,n=this.maxRect,i=Math.floor(e.y-n.y-t),r=Math.floor(e.x-n.x),o=Math.ceil(e.width),s=Math.ceil(e.height+t);return"top:".concat(i,"px;left:").concat(r,"px;width:").concat(o,"px;height:").concat(s,"px;")},imgStyle:function(){var t=this.artboard.boundsInParentForList;return"height:".concat(t.height,"px;outline-width:").concat(this.outlineWidth)},artboardPreviewPng:function(){var t,e=this.inCloudMode,n=this.artboard;return e&&this.isSupportWebp&&(t=n.artboardPreviewWebp),t||(t=n.artboardPreviewPng),e?c["O"].combineResourcePath(t):"".concat(t,"?").concat(n.mlOutputTime)},isSupportWebp:function(){return this.$store.state.isSupportWebp===Ni.Support},artboard:function(){return this.item.artboard}},data:function(){return{tipHandle:0,imgErrored:!1,imgLoaded:!1}},props:{item:Object,maxRect:Object}},dl=ul,hl=(n("e6fc"),Object(Gr["a"])(dl,nl,il,!1,null,"91d28004",null)),fl=hl.exports,ml=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section-item",style:t.style},[e("div",{staticClass:"title"},[t._v(t._s(t.sectionItem.name))])])},vl=[],pl={computed:{style:function(){var t,e,n=this.sectionItem,i=0,r=n.boundsInParentForList,o=this.maxRect,a=Math.floor(r.y-o.y-i)+"px",c=Math.floor(r.x-o.x)+"px",l=Math.ceil(r.width)+"px",u=Math.ceil(r.height+i)+"px";return Object(s["a"])(Object(s["a"])({},null!==(t=null===(e=n.cssStyle)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),{},{top:a,left:c,width:l,height:u})}},props:{maxRect:Object,sectionItem:Object}},bl=pl,gl=(n("2a09"),Object(Gr["a"])(bl,ml,vl,!1,null,"29c65c03",null)),wl=gl.exports,yl={components:{ArtboardListItem:fl,SectionItem:wl},methods:{quickKey:function(t){if(!this.inArtboardMode){var e=t.keyCode||t.which;switch(e){case 112:case 113:case 114:t.preventDefault();break}}},onSceneResize:function(t,e,n){if(!this.initScale||n){var i=this.rect;if(i&&0!==t&&0!==e){this.initScale=!0;var r=i.width/t,o=i.height/e,a=Math.max(r,o);if(0!==a){a=.96/a;var s=this.scale;this.setScaleList(a),a=this.scale,this.resetScaleSceneCenter(a,s)}}}},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})}},created:function(){window.addEventListener("keydown",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey)},data:function(){return{initScale:!1}},computed:{rect:function(){var t=a["b"],e=this.renderDocuments,n=[];e.forEach((function(t){n.push({artboard:{boundsInParent:t.rect}})}));var i=j(n);return i.y-=t,i.height+=t,i},scale:function(){return this.scaleList},style:function(){var t=this.rect;if(t)return{transform:"scale(".concat(this.scale,") translate3d(0,0,0)")}},boxSize:function(){var t=this.rect;if(t)return{width:t.width+"px",height:t.height+"px"}}},props:{sceneWidth:Number,sceneHeight:Number,dragging:Boolean}},kl=yl,Cl=(n("e78b"),Object(Gr["a"])(kl,tl,el,!1,null,"6adf1a2e",null)),xl=Cl.exports,Sl=function(){var t=this,e=t._self._c;return e("div",{staticClass:"canvas-box",attrs:{title:t.mouseenterArtboardTitle},on:{mousemove:t.onMouseMove,mouseleave:t.onMouseLeave,dblclick:t.dblClickCanvas,click:t.clickCanvas,contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("canvas",{ref:"canvasSection",class:{off:!t.sectionVisible},style:t.canvasStyleSection,attrs:{width:t.canvasWidth,height:t.canvasHeight}}),e("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:t.canvasWidth,height:t.canvasHeight}}),t.mouseenterArtboardStyle?e("div",{staticClass:"artboard-hover",style:t.mouseenterArtboardStyle}):t._e()])},Tl=[],Ol=vs(),Il=new ks(Ol,!1);var Al={methods:{onCanvasMessage:function(t){switch(t.type){case ws.SceneInfoChanged:var e=t.data,n=e.sceneX,i=e.sceneY,r=e.scale,o=e.sceneWidth,a=e.sceneHeight,s=this.sceneInfo;s.scale=r,s.sceneX=n,s.sceneY=i,s.sceneWidth=o,s.sceneHeight=a;break;case ws.Frame:if(this.useWorker){var c,l=t.data;if(l)null===(c=Il.context)||void 0===c||c.transferFromImageBitmap(l),null===l||void 0===l||l.close()}break;case ws.SectionSceneInfoChanged:var u=t.data,d=u.sceneX,h=u.sceneY,f=u.scale,m=u.sceneWidth,v=u.sceneHeight,p=this.sceneInfoSection;p.scale=f,p.sceneX=d,p.sceneY=h,p.sceneWidth=m,p.sceneHeight=v;break;case ws.SectionFrame:if(this.useWorker){var b,g=t.data;if(g)null===(b=Il.sectionContext)||void 0===b||b.transferFromImageBitmap(g),null===g||void 0===g||g.close()}break}},getRenderInteractions:function(t){var e;if(!this.inCloudMode)return null;var n=t.interactionInfo;if(!n)return null;if(n.fetchState!==c["a"].Success)return null;var i=null===(e=n.data)||void 0===e?void 0:e.renderInteractions;return Object(l["i"])(i)&&i.length>0?i:null},onContextmenu:function(t){var e=this,n=this.mouseenterArtboard;if(n){var i=t.pageX,r=t.pageY;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:i,y:r,artboard:n.artboard})}))}},dblClickCanvas:function(){var t=this.mouseenterArtboard,e=this.inArtboardMultDownMode;!e&&t&&(clearTimeout(this.tipHandle),this.hideTextTip(),this.setCurArtboard(t.artboard))},clickCanvas:function(){var t=this,e=Math.abs(Date.now()-this.draggingTime);if(!(e<66)){clearTimeout(this.tipHandle);var n=this.mouseenterArtboard,i=this.inArtboardMultDownMode;if(n){if(i)return n.artboard.mlUserSelectDown=!n.artboard.mlUserSelectDown,void this.draw(n,!0);var r=n.artboard;this.tipHandle=setTimeout((function(){t.showTextTip(t.goInfoTip2(r),7)}),200)}}},goInfoTip2:function(t){return mi(t.artboard,this.inCloudMode)},onMouseMove:function(t){var e=this.mouseLoc;e.x=t.layerX,e.y=t.layerY,null==e.x&&(e.x=t.pageX-this.sceneOffsetX,e.y=t.pageY-this.sceneOffsetY)},onMouseLeave:function(){var t=this.mouseLoc;t.x=t.y=-10},quickKey:function(t){var e=t.keyCode||t.which;switch(e){case 112:case 113:case 114:t.preventDefault();break}},drawSection:function(t,e){Il.drawSection(t,e)},draw:function(t,e){Il.draw(t,e)},getFlowStartIconRect:function(t){var e=t.rect,n=e.x,i=e.y;n-=16;var r=16,o=26;return{x:n,y:i,width:r,height:o}},_getScaleRect:function(t,e,n,i,r,o){var a={x:t,y:e,width:n,height:i};return a.x=a.x*o-r.x,a.y=a.y*o-r.y,a.width=a.width*o,a.height=a.height*o,a},onSceneResize:function(t,e,n){if(!this.initScale||n){var i=this.rect;if(i&&0!==t&&0!==e){this.initScale=!0;var r=i.width/t,o=i.height/e,a=Math.max(r,o);if(0!==a){a=.96/a;var s=this.scale;this.setScaleList(a),a=this.scale,this.resetScaleSceneCenter(a,s)}}}},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})},isArtboardHasAnyInteraction:function(t){if(!t)return!1;var e=t.cid,n=this.artboardInteractions,i=n[e];return!!(Object(l["i"])(i)&&i.length>0)||null!=Object.keys(n).find((function(t){var i=n[t];return!(!Object(l["i"])(i)||0===i.length)&&null!=i.find((function(t){var n;return(null===(n=t.toArtboardItem)||void 0===n?void 0:n.cid)===e}))}))}},computed:{artboardUserSelectDowns:function(){return this.renderDocumentArtboards.reduce((function(t,e){if(e.mlUserSelectDown){var n,i=null===(n=e.artboard)||void 0===n?void 0:n.cid;i>0&&(t[i]=1)}return t}),{})},reDrawKey:function(){var t=this.scale,e=this.sceneX,n=this.sceneY,i=this.sceneWidth,r=this.sceneHeight;return"".concat(t,"-").concat(e,"x").concat(n,"-").concat(i,"x").concat(r)},sectionVisible:function(){return this.sections.length>0},selectNodeCount:function(){return this.renderDocumentArtboards.reduce((function(t,e){return e.mlUserSelectDown&&(t+=1),t}),0)},mouseenterArtboardTitle:function(){var t=this.mouseenterArtboard,e=this.inArtboardMultDownMode;if(t){if(e)return"单击选中/取消选中";var n=t.artboard.artboard;return this.inCloudMode?di(n):"双击查看 ".concat(n.name," 标注详情")}},mouseenterArtboardStyle:function(){var t=this.canvasStyle;if(t)return null;var e=this.mouseenterArtboard;if(!e)return null;var n=this.sceneInfo,i=n.sceneX,r=n.sceneY,o=n.scale,a=e.rect,s={};s.left=Math.floor(a.x*o+i)+"px",s.top=Math.floor(a.y*o+r)+"px",s.width=Math.ceil(a.width*o)+"px",s.height=Math.ceil(a.height*o)+"px";var c=Math.min(20,Math.max(5,Math.round(6*o)));return s.webkitBoxShadow=s.boxShadow="0 0 ".concat(c,"px rgba(24, 134, 255, 0.3)"),s},canvasWidth:function(){var t=this.sceneWidth,e=this.canvasScale;return t*e},canvasHeight:function(){var t=this.sceneHeight,e=this.canvasScale;return t*e},canvasStyleSection:function(){var t=this.sceneInfoSection,e=this.sectionVisible;if(e&&0!==t.scale){var n=this.sceneX,i=this.sceneY,r=this.scale,o=this.sceneWidth,a=this.sceneHeight,s=Math.round(n-t.sceneX),c=Math.round(i-t.sceneY),l=r/t.scale;if(0!==s||0!==c||1!==l||t.sceneWidth!==o||t.sceneHeight!==a){var u={};return 1!==l?(s=t.sceneX/t.scale*r-n,c=t.sceneY/t.scale*r-i,s=-Math.round(s),c=-Math.round(c),u.transform="translate3d(".concat(s,"px, ").concat(c,"px, 0px) scale(").concat(l.toFixed(5),")")):0===s&&0===c||(u.transform=" translate3d(".concat(s,"px, ").concat(c,"px, 0px)")),u}}},canvasStyle:function(){var t=this.sceneInfo;if(0!==t.scale){var e=this.sceneX,n=this.sceneY,i=this.scale,r=this.sceneWidth,o=this.sceneHeight,a=Math.round(e-t.sceneX),s=Math.round(n-t.sceneY),c=i/t.scale;if(0!==a||0!==s||1!==c||t.sceneWidth!==r||t.sceneHeight!==o){var l={};return 1!==c?(a=t.sceneX/t.scale*i-e,s=t.sceneY/t.scale*i-n,a=-Math.round(a),s=-Math.round(s),l.transform="translate3d(".concat(a,"px, ").concat(s,"px, 0px) scale(").concat(c.toFixed(5),")")):0===a&&0===s||(l.transform=" translate3d(".concat(a,"px, ").concat(s,"px, 0px)")),l}}},rect:function(){var t=this.titleHeight,e=this.renderDocuments,n=[];e.forEach((function(t){n.push({artboard:{boundsInParent:t.rect}})}));var i=j(n);return i.y-=t,i.height+=t,i},isSupportWebp:function(){return this.$store.state.isSupportWebp===Ni.Support},artboardShowInteractionLine:function(){return this.$store.state.artboardShowInteractionLine},mouseenterArtboard:function(){if(this.dragging)return null;var t=this.mouseLoc,e=this.scale,n=this.sceneX,i=this.sceneY,r=this.inViewerArtboards,o=r.length;if(0===o)return null;for(var a=(new w).set((t.x-n)/e,(t.y-i)/e,1,1),s=o-1;s>=0;s--){var c=r[s];if(O(c.rect,a))return c}return null},inViewerSections:function(){var t=[],e=this.sceneX,n=this.sceneY,i=this.scale,r=this.sceneWidth,o=this.sceneHeight,a=this.sections;if(0===i||0===r||0===o)return t;var s=(new w).set(-e/i,-n/i,r/i,o/i);return a.forEach((function(e){var n=O(e.rect,s);n&&t.push(e)})),t},inViewerArtboards:function(){var t=this.sceneX,e=this.sceneY,n=this.scale,i=this.sceneWidth,r=this.sceneHeight,o=this.artboards;if(0===n||0===i||0===r)return[];var a=(new w).set(-t/n,-e/n,i/n,r/n);return o.reduce((function(t,e){var n=O(e.rect,a);return n&&t.push(e),t}),[])},sections:function(){var t=[],e=this.renderDocuments;return Object(l["i"])(e)?(e.forEach((function(e){var n=e.maxRect.x-e.rect.x,i=e.maxRect.y-e.rect.y,r=e.sections;Object(l["i"])(r)&&r.forEach((function(e){var r,o=null!==(r=e.boundsInParentForList)&&void 0!==r?r:e.boundsInParent,a={key:"".concat(e.docGuid,":").concat(e.pageGuid,":").concat(e.guid),rect:{x:Math.floor(o.x-n),y:Math.floor(o.y-i),width:Math.ceil(o.width),height:Math.ceil(o.height)},section:e};t.push(a)}))})),t):t},artboardInteractions:function(){var t=this,e={_length__:0},n=this.artboards,i=this.renderDocuments,r=this.filterDocumentType,o=r===a["K"].Section;return n.forEach((function(n){var r=n.artboard.artboard,a=n.pageGuid,s=n.docGuid,c=n.topSectionId,l=n.boundsInParentForList,u=a||s,d=t.getRenderInteractions(r),h=[];d&&d.forEach((function(e){var r,a=Ee(i,e,l,u,!0,{inSection:o,topSectionId:c},t.useWorker);a&&h.push({art:n,canvasData:a,key:e.guid,toArtboardItem:null===(r=e.renderTapInteraction)||void 0===r?void 0:r.toArtboardItem,isEnter:!1})})),h.length>0&&(e[n.cid]=h,e._length__++)})),e},artboards:function(){var t=this,e=[],n=this.renderDocuments;if(!Object(l["i"])(n))return e;var i=this.isSupportWebp;return n.forEach((function(n){var r=n.maxRect.x-n.rect.x,o=n.maxRect.y-n.rect.y,a=n.arts;Object(l["i"])(a)&&a.forEach((function(n){var a,s,c=n.artboard;if(c){var l,u=c.topSectionId,d=c.pageGuid,h=c.docGuid,f=c.guid,m=c.boundsInParentForList,v=c.name,p=c.flowStart,b=c.cid,g=null!==m&&void 0!==m?m:c.boundsInParent;i&&(l=c.pathPreviewWebp),l||(l=c.pathPreview);var w=c.pathPreviewMini;l=t.combineResourcePath(l),w=t.combineResourcePath(w);var y={topSectionId:u,pageGuid:d,docGuid:h,guid:f,boundsInParentForList:m,key:"".concat(h,":").concat(d,":").concat(f),name:v,customStatus:n.customStatus,fileType:null!==(a=null===(s=c.mlConfig)||void 0===s?void 0:s.fileType)&&void 0!==a?a:c.fileType,flowStart:p,cid:b,rect:{x:Math.floor(g.x-r),y:Math.floor(g.y-o),width:Math.ceil(g.width),height:Math.ceil(g.height)},imgSrc:l,miniImgSrc:w,artboard:n};e.push(y)}}))})),e},selectArtboardChanged:function(){return this.$store.state.selectArtboardChanged},customStatusKey:function(){return this.inViewerArtboards.map((function(t){return"".concat(t.cid,":").concat(t.customStatus)})).join(":")},canvasScale:function(){return Object(c["J"])()}},watch:{webViewFocus:function(t){Il.updateProp({webViewFocus:t})},artboardUserSelectDowns:function(t){Il.updateProp({artboardUserSelectDowns:t})},inViewerArtboards:function(t){setTimeout((function(){Il.updateProp({inViewerArtboards:t})}),10)},inViewerSections:function(t){var e=this;setTimeout((function(){Il.updateProp({inViewerSections:t}),e.drawSection(null,!0)}),10)},mouseenterArtboard:function(t,e){if(t!==e&&(Il.updateProp({mouseenterArtboard:null!==t&&void 0!==t?t:null}),!this.dragging&&this.artboardShowInteractionLine&&this.artboardInteractions._length__>0)){var n=null===t||void 0===t?void 0:t.cid,i=null===e||void 0===e?void 0:e.cid;n!==i&&(this.isArtboardHasAnyInteraction(t)||this.isArtboardHasAnyInteraction(e))&&this.draw(null,!0)}},artboardShowInteractionLine:function(t){Il.updateProp({artboardShowInteractionLine:t}),this.draw(null,!0)},artboardInteractions:function(t){Il.updateProp({artboardInteractions:null!==t&&void 0!==t?t:null}),this.artboardShowInteractionLine&&Il.drawAllDelay()},selectArtboardChanged:function(t){var e=this;t&&0!==t.length&&(t.length>10?this.draw(null,!0):this.inViewerArtboards.forEach((function(n){var i=n.artboard.artboard.guid;t[i]&&e.draw(n)})))},dragging:function(){this.draggingTime=Date.now()},sections:function(t){Il.updateSections(t)},artboards:function(t){Il.updateArtboards(t)},reDrawKey:function(){var t=this.scale,e=this.sceneX,n=this.sceneY,i=this.sceneWidth,r=this.sceneHeight;Il.updateProp({newestSceneInfo:{scale:t,sceneX:e,sceneY:n,sceneWidth:i,sceneHeight:r}}),this.drawSection(),this.draw()},customStatusKey:function(){Il.updateProp({inViewerArtboards:this.inViewerArtboards}),this.draw(null,!0)},inArtboardMultDownMode:function(t){Il.updateProp({newestSceneInfo:{inArtboardMultDownMode:t}}),this.draw()}},data:function(){return{useWorker:Ol,mouseLoc:{x:-10,y:-10},sceneInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0},sceneInfoSection:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0},sceneDelayTimes:{artboard:0,section:0},titleHeight:a["b"],initScale:!1,useOffscreen:!1,worker:null,workerInited:!1,tipHandle:0,draggingTime:0}},beforeDestroy:function(){clearTimeout(this.tipHandle),window.removeEventListener("keydown",this.quickKey),Il.attachImgs(this.artboards,!1),Il.destroy()},mounted:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,c,l,u,d,h,f,m,v,p,b,g;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,we(Ol);case 1:return n=e.v,e.n=2,Il.initAsync(t.$refs.canvas,t.canvasScale,t.onCanvasMessage,n,t.webViewFocus);case 2:return t.useWorker=Il.useWorker,e.n=3,Il.initSectionAsync(t.$refs.canvasSection);case 3:r=t.artboards,o=t.sections,Il.updateArtboards(r),Il.updateSections(o),a=t.sceneX,s=t.sceneY,c=t.scale,l=t.sceneWidth,u=t.sceneHeight,d=t.inArtboardMultDownMode,h=t.artboardShowInteractionLine,f=t.inViewerArtboards,m=t.mouseenterArtboard,v=t.artboardInteractions,p=t.artboardUserSelectDowns,b=t.inViewerSections,Il.updateProp({newestSceneInfo:{sceneX:a,sceneY:s,scale:c,sceneWidth:l,sceneHeight:u,inArtboardMultDownMode:d},artboardShowInteractionLine:h,inViewerArtboards:f,mouseenterArtboard:m,artboardInteractions:v,artboardUserSelectDowns:p,inViewerSections:b}),Il.drawSection(null,!1),e.n=5;break;case 4:e.p=4,g=e.v,console.error(g);case 5:return e.a(2)}}),e,null,[[0,4]])})))()},created:function(){window.addEventListener("keydown",this.quickKey)},props:{scale:Number,sceneX:Number,sceneY:Number,sceneWidth:Number,sceneHeight:Number,dragging:Boolean,sceneScaleKeepX:Number,sceneScaleKeepY:Number,sceneOffsetX:Number,sceneOffsetY:Number}},Fl=Al,jl=(n("db69"),Object(Gr["a"])(Fl,Sl,Tl,!1,null,"19d315a9",null)),_l=jl.exports,Ml=function(){var t=this,e=t._self._c;return e("div",{staticClass:"canvas-box"},[e("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:t.sceneWidth*t.canvasScale,height:t.sceneHeight*t.canvasScale}})])},Ll=[],Pl={methods:{draw:function(t,e){var n=this;if(t||e)requestAnimationFrame((function(){n._draw(t,e)}));else{var i=this.sceneInfo,r=this.sceneWidth,o=this.sceneHeight,a=i.sceneWidth!==r||i.sceneHeight!==o?1:0;if(a)return clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),void(this.handle=requestAnimationFrame((function(){n._draw(t)})));clearTimeout(this.sceneDelayHandle),this.sceneDelayHandle=setTimeout((function(){cancelAnimationFrame(n.handle),n.handle=requestAnimationFrame((function(){n._draw(t)}))}),33)}},resetCanvasSmoothing:function(){var t=this.$refs.canvas,e=this.scale,n=this.canvasScale;[t].forEach((function(t){if(t){var i=t.getContext("2d");i&&We(i,e,n,2)}}))},_draw:function(t,e){var n=this;clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle);var i=this.stageOffset,r=this.scale,o=this.sceneWidth,a=this.sceneHeight,s=this.sceneInfo;if(s.sceneX=i.x,s.sceneY=i.y,s.scale=r,s.sceneWidth=o,s.sceneHeight=a,0!==r&&0!==o&&0!==a){var c=this.drawInfo,l=!t,u=!(c.scale===r&&c.sceneX===i.x&&c.sceneY===i.y&&c.sceneWidth===o&&c.sceneHeight===a);if(!l||u||e){var d=this.$refs.canvas;if(d){c.scale=r,c.sceneX=i.x,c.sceneY=i.y,c.sceneWidth=o,c.sceneHeight=a;var h,f=d.getContext("2d"),m=!1;l||u?(f.clearRect(0,0,this.getCanvasDrawNum(o),this.getCanvasDrawNum(a)),h=this.inViewerArtboards,m=!0):h=[t];var v=(new w).set(-i.x,-i.y,o,a),p=(new w).set(v.x/r,v.y/r,v.width/r,v.height/r),b=Math.max(2,Math.min(6,Math.ceil(3*this.scale)));f.strokeStyle="#1886ff",f.lineWidth=this.getCanvasDrawNum(b),h.forEach((function(t){n._drawArtboard(f,v,p,r,t,m,b)}))}}}},_drawArtboardBackground:function(t,e,n,i,r){var o,s,c,l=null,u=Math.round(this.titleHeight*r);n||t.clearRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y-u),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height+u));var d=!0;if(i.fill&&i.fillEnabled){var h=i.fill,f=h.value,m=h.includedInExport;d=m,!m&&f&&(c=V(f).value)}var v=null!==(o=null===(s=i.mlConfig)||void 0===s?void 0:s.fileType)&&void 0!==o?o:i.fileType,p=v===a["r"].FIGMA;c||d||p||(c="#fff"),c&&(t.fillStyle=c,t.fillRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height))),t.fillStyle="#a6a9b4",t.textAlign="left",t.textBaseline="bottom",t.font="".concat(this.getCanvasDrawNum(Math.min(Math.max(2,14*r),24)),"px Arial"),l&&t.fillText(l,this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(Math.round(e.y-Math.min(u/2,8*r))),this.getCanvasDrawNum(e.width))},_drawArtboardText:function(t,e,n){t.textAlign="center",t.font="".concat(this.getCanvasDrawNum(Math.min(Math.max(6,Math.min(n.width,n.height)/15),36)),"px Arial"),t.fillText(e,this.getCanvasDrawNum(Math.floor(n.x+n.width/2)),this.getCanvasDrawNum(Math.ceil(n.y+n.height/2)),this.getCanvasDrawNum(n.width))},_drawArtboard:function(t,e,n,i,r,o){var a=O(r.rect,n);if(a){var s=Object.assign({},r.rect);s.x=Math.round(s.x*i-e.x),s.y=Math.round(s.y*i-e.y),s.width=Math.round(s.width*i),s.height=Math.round(s.height*i);var c=Ha(r.artboard,this.inCloudViewerArtboardInfoMode);this._drawArtboardBackground(t,s,o,c,i);var l=r.miniImgSize,u=r.miniImg,d=r.img,h=this.isDrawMiniImg(r);if(h)t.drawImage(u,0,0,l.width,l.height,this.getCanvasDrawNum(s.x),this.getCanvasDrawNum(s.y),this.getCanvasDrawNum(s.width),this.getCanvasDrawNum(s.height));else if(r.loaded)if(d){var f=r.imgSize;t.drawImage(d,0,0,f.width,f.height,this.getCanvasDrawNum(s.x),this.getCanvasDrawNum(s.y),this.getCanvasDrawNum(s.width),this.getCanvasDrawNum(s.height))}else this._drawArtboardText(t,"预览图加载失败",s);else this._drawArtboardText(t,"画板预览图加载中...",s)}},getCanvasDrawNum:function(t){return Math.round(t*this.canvasScale)},isDrawMiniImg:function(t){return t.miniLoaded&&t.loaded&&t.miniImg&&t.img&&2*t.miniImgSize.width/3>this.scale*t.rect.width},imgLoaded:function(t,e){if(e.loaded=!0,e.img=t,t){var n=e.imgSize;n.width=t.width,n.height=t.height;var i=this.isDrawMiniImg(e);if(i&&!e.miniLoaded)return}this.draw(e)},miniImgLoaded:function(t,e){if(e.miniLoaded=!0,e.miniImg=t,t){var n=e.miniImgSize;n.width=t.width,n.height=t.height;var i=this.isDrawMiniImg(e);if(!i&&e.loaded&&e.img)return}this.draw(e)},attachImgs:function(t,e){var n=this;Object(l["i"])(t)&&(e?t.forEach((function(t){ce.add(t.imgSrc,n.imgLoaded,t),ce.add(t.miniImgSrc,n.miniImgLoaded,t)})):t.forEach((function(t){ce.remove(t.imgSrc,n.imgLoaded,t),ce.remove(t.miniImgSrc,n.miniImgLoaded,t);var e,i,r=t.img,o=t.miniImg;r&&(null===(e=r.close)||void 0===e||e.call(r),t.img=null);o&&(null===(i=o.close)||void 0===i||i.call(o),t.miniImg=null);t.loaded=t.miniLoaded=!1})))}},computed:{artboard:function(){return Ha(this.curArtboard,this.inCloudViewerArtboardInfoMode)},canvasStyle:function(){var t=this.sceneInfo;if(0!==t.scale){var e=this.stageOffset,n=this.scale,i=this.sceneWidth,r=this.sceneHeight,o=Math.round(e.x-t.sceneX),a=Math.round(e.y-t.sceneY),s=n/t.scale;if(0!==o||0!==a||1!==s||t.sceneWidth!==i||t.sceneHeight!==r){var c={transform:""};return 1!==s?(o=t.sceneX/t.scale*n-e.x,a=t.sceneY/t.scale*n-e.y,o=-Math.round(o),a=-Math.round(a),c.transform+="translate3d(".concat(o,"px, ").concat(a,"px, 0px) scale(").concat(s.toFixed(5),")")):0===o&&0===a||(c.transform+=" translate3d(".concat(o,"px, ").concat(a,"px, 0px)")),c}}},rect:function(){var t=this.titleHeight,e=this.artboard,n=e.boundsInArtboard;return(new w).set(0,0-t,n.width,n.height+t)},isSupportWebp:function(){return this.$store.state.isSupportWebp===Ni.Support},inViewerArtboards:function(){var t=[],e=this.stageOffset,n=this.scale,i=this.sceneWidth,r=this.sceneHeight,o=this.artboards;if(0===n||0===i||0===r)return t;var a=(new w).set(-e.x/n,-e.y/n,i/n,r/n);return o.forEach((function(e){var n=O(e.rect,a);n&&t.push(e)})),t},stageOffset:function(){var t=this.centerPoint,e=this.sceneX,n=this.sceneY,i=t.x+e,r=t.y+n;return{x:i,y:r}},centerPoint:function(){var t=this.scale,e=this.rect,n=this.sceneWidth,i=this.sceneHeight;return $e(e,t,n,i)},artboards:function(){var t=this,e=[],n=this.isSupportWebp,i=this.curArtboard,r=this.inCloudViewerArtboardInfoMode;return i?(function(i){var o=Ha(i,r);if(o){var a=o.boundsInArtboard;if(a){var s;n&&(s=o.pathPreviewWebp),s||(s=o.pathPreview);var c=o.pathPreviewMini;s=t.combineResourcePath(s),c=t.combineResourcePath(c);var l={rect:{x:0,y:0,width:Math.ceil(a.width),height:Math.ceil(a.height)},imgSrc:s,imgSize:{width:0,height:0},img:null,miniImgSrc:c,miniImgSize:{width:0,height:0},miniImg:null,miniLoaded:!1,loaded:!1,artboard:i};e.push(l)}}}(i),e):e},refreshKey:function(){var t=this.scale,e=this.sceneWidth,n=this.sceneHeight,i=this.stageOffset;return"".concat(t,":").concat(i.x,":").concat(i.y,":").concat(e,":").concat(n)},resetSmoothKey:function(){var t=this.scale,e=this.canvasScale;return"".concat(t,"-").concat(e)}},watch:{resetSmoothKey:function(){this.resetCanvasSmoothing()},dragging:function(){this.draggingTime=Date.now()},artboards:function(t,e){this.attachImgs(e,!1),this.attachImgs(t,!0)},refreshKey:function(){this.draw()}},data:function(){return{canvasScale:Object(c["J"])(),mouseLoc:{x:-10,y:-10},drawInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0},sceneInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0},sceneDelayHandle:-1,titleHeight:0,handle:0,draggingTime:0}},beforeDestroy:function(){this.attachImgs(this.artboards,!1)},mounted:function(){this.resetCanvasSmoothing()},created:function(){this.attachImgs(this.artboards,!0)},props:{scale:Number,sceneX:Number,sceneY:Number,sceneWidth:Number,sceneHeight:Number,dragging:Boolean,sceneScaleKeepX:Number,sceneScaleKeepY:Number,sceneOffsetX:Number,sceneOffsetY:Number}},Dl=Pl,Nl=(n("9a2b"),Object(Gr["a"])(Dl,Ml,Ll,!1,null,"4d3fa2ac",null)),El=Nl.exports,Rl={passive:!1},Vl={passive:!1,capture:!0},Bl={x:0,y:0,sceneX:0,sceneY:0},Hl={components:{ArtboardInfo:Zc,ArtboardList:xl,CanvasModeArtboardList:_l,CanvasModeArtboardInfo:El,ViewerBox:Ls,ViewerBoxCanvas:Is,DrawView:Qa,CommentPoints:xc,ArtboardPreviewsMap:No},created:function(){var t=this;window.addEventListener("wheel",this.mouseWheel,Rl),window.addEventListener("resize",this.resizeNextTick,Rl),this.$nextTick((function(){(t.type===a["V"].ArtboardDetail||t.allArtboardLoadChecked)&&(t.resize(),t.resetSceneLocation())}))},beforeDestroy:function(){var t=document.documentElement;t.removeEventListener("mousemove",this.mouseMove,Vl),t.removeEventListener("mouseup",this.mouseUp,Vl),window.removeEventListener("wheel",this.mouseWheel,Rl),window.removeEventListener("resize",this.resizeNextTick,Rl),clearTimeout(this.scalingChangeHandle)},watch:{resetCenterWithRect:function(t){t&&(this.type===a["V"].ArtboardList&&this.setRectToCenterAndScale(t),this.$store.commit("resetCenterWithRect",null))},resetCenterArtboard:function(t){t&&(this.type!==a["V"].ArtboardList||this.artShowInListMode||this.setArtboardToCenterAndScale(t),this.$store.commit("resetCenterArtboard",null))},"imageViewer.resetScale":function(){this.inImageViewerMode&&this.resetSceneLocation()},scale:function(){this.setScaling()},rightNavType:function(){this.resizeNextTick()},resetScaleSceneCenter:function(t){var e,n;t&&(e=Math.round(this.sceneOffsetX+this.sceneWidth/2),n=Math.round(this.sceneOffsetY+this.sceneHeight/2),this.resetScaleScene(e,n,t.oldScale,t.newScale))},curArtboard:function(t){null==t?this.type===a["V"].ArtboardList&&this.resetSceneLocation():this.type===a["V"].ArtboardDetail&&this.resetSceneLocation()},curArtboardLoadedVerData:function(t){t&&this.type===a["V"].ArtboardDetail&&this.resetSceneLocation()},resetList:function(){this.type===a["V"].ArtboardList&&this.resetSceneLocation()},resetArtboard:function(){this.type===a["V"].ArtboardDetail&&this.resetSceneLocation()},filterDocumentGuid:function(){this.type===a["V"].ArtboardList&&this.resetSceneLocation()},allArtboardLoadChecked:function(t){this.type===a["V"].ArtboardList&&t&&this.resizeNextTick()}},computed:{rightNavType:function(){return this.$store.state.rightNavType},imageViewer:function(){return this.$store.state.imageViewer},inImageViewerMode:function(){return this.type===a["V"].ImageViewer},EnumScaleType:function(){return a["V"]},artRenderInCanvasMode:function(){return this.$store.state.artRenderInCanvasMode},resetScaleSceneCenter:function(){return this.$store.state.resetScaleSceneCenter},cloudArtListMode:function(){return this.type===a["V"].ArtboardList&&this.useCanvasMode},imageViewboxUseCanvas:function(){var t=this.inImageViewerMode,e=this.useCanvasMode;if(t&&e){var n=this.imageViewer,i=n.imgList,r=n.currentIndex,o=null===i||void 0===i?void 0:i[r];if(!o)return!1;var a=o.format;return Object(l["j"])(a)&&hs(a)}return!1},cloudArtInfoMode:function(){return this.inArtboardInfoMode&&this.useCanvasMode},useCanvasMode:function(){return this.inCloudMode&&this.artRenderInCanvasMode},zoomBoxOffset:function(){return this.cloudArtListMode||this.imageViewboxUseCanvas?null:{transform:"translate3d(".concat(this.sceneX,"px,").concat(this.sceneY,"px,1px)")}},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},scale:function(){switch(this.type){case a["V"].ArtboardList:return this.scaleList;case a["V"].ArtboardDetail:return this.scaleArtboard;case a["V"].ImageViewer:return this.scaleImageViewer;default:return 0}},resetList:function(){return this.$store.state.scale.resetList},resetCenterArtboard:function(){return this.$store.state.scale.resetCenterArtboard},resetCenterWithRect:function(){return this.$store.state.scale.resetCenterWithRect},resetArtboard:function(){return this.$store.state.scale.resetArtboard},inArtboardInfoMode:function(){return this.type===a["V"].ArtboardDetail}},data:function(){return{sceneX:0,sceneY:0,sceneWidth:0,sceneHeight:0,sceneOffsetX:0,sceneOffsetY:0,dragging:!1,scaling:!1,sceneScaleKeepX:0,sceneScaleKeepY:0,draggedNotclick:!1,scalingChangeHandle:0}},props:{type:Number},methods:{setScaling:function(){var t=this;clearTimeout(this.scalingChangeHandle),this.scaling=!0,this.scalingChangeHandle=setTimeout((function(){t.scaling=!1}),360)},getInfoCanvasOffset:function(){var t=this.scale,e=this.sceneWidth,n=this.sceneHeight,i=this.childRect();return $e(i,t,e,n)},setConfig:function(t){if(Object(l["k"])(t)){var e=t.scale,n=t.sceneX,i=t.sceneY;"number"===typeof e&&this.setScale(e),"number"===typeof n&&(this.sceneX=n),"number"===typeof i&&(this.sceneY=i)}},resetSceneLocation:function(){if(this.resize(!0),this.sceneX=this.sceneY=0,this.cloudArtListMode){var t=this.getInfoCanvasOffset();this.sceneX=t.x,this.sceneY=t.y}},mouseMove:function(t){t.preventDefault();var e=t.clientX-Bl.x,n=t.clientY-Bl.y;this.sceneX=Math.round(Bl.sceneX+e),this.sceneY=Math.round(Bl.sceneY+n),!this.dragging&&(Math.abs(e)>=3||Math.abs(n)>=3)&&(this.dragging=!0,this.draggedNotclick=!0)},mouseUp:function(t){t.preventDefault(),this.dragging&&Object(c["db"])(),this.dragging=!1;var e=document.documentElement;e.removeEventListener("mousemove",this.mouseMove,Vl),e.removeEventListener("mouseup",this.mouseUp,Vl)},mousedownZoomContainer:function(t){if(0===t.button){this.draggedNotclick=!1,this.dragging=!1,Bl.x=t.clientX,Bl.y=t.clientY,Bl.sceneX=this.sceneX,Bl.sceneY=this.sceneY;var e=document.documentElement;e.addEventListener("mousemove",this.mouseMove,Vl),e.addEventListener("mouseup",this.mouseUp,Vl)}},setScale:function(t){var e=this.scale;switch(t=Object(c["G"])(e,t),this.type){case a["V"].ArtboardList:this.setScaleList(t);break;case a["V"].ArtboardDetail:this.setScaleArtboard(t);break;case a["V"].ImageViewer:this.setScaleImageViewer(t);break}},clickZoomContainer:function(t){var e=this.$refs.$instance;if(e)if(this.draggedNotclick)this.draggedNotclick=!1;else{var n=e.clickZoomContainer;n&&n(t)}},inBox:function(t){var e=this.$refs.$info;if(!e)return!0;while(null!=t){if(t===e)return!0;t=t.parentNode}return!1},canEmitEvent:function(t,e){var n=t.target;e.target=n;var i=this.$refs.$instance;if(!i)return!1;var r=i.canEmitEvent;return!(r&&!r(e))&&(!!e.isScale||this.inBox(n))},childRect:function(){var t=this.$refs.$instance;if(t){var e=t.rect;return e?e.toJSON():null}},canEmitWindowEvent:function(){switch(this.type){case a["V"].ArtboardList:if(this.inArtboardMode)return!1;break;case a["V"].ArtboardDetail:if(!this.inArtboardMode)return!1;break;case a["V"].ImageViewer:return!0}return!0},resizeNextTick:function(t){var e=this;this.$nextTick((function(){e.resize(t)}))},resize:function(t){if(this.canEmitWindowEvent()){var e=!0===t,n=this.$refs.$info;if(n){var i=n.getBoundingClientRect();this.sceneWidth=i.width,this.sceneHeight=i.height,this.sceneOffsetX=i.left,this.sceneOffsetY=i.top;var r=this.$refs.$instance;if(r){var o=r.onSceneResize;o&&o(this.sceneWidth,this.sceneHeight,e)}}}},setArtboardToCenterAndScale:function(t){var e=this;if(t){var n=t.docGuid,i=t.pageGuid,r=t.name,o=t.topSectionId,a=this.filterDocumentGuid;a&&n!==a&&i!==a&&o!==a&&this.$store.commit("setFilterDocumentGuid",null),this.$nextTick((function(){var n,i=e.renderDocuments;i.find((function(e){var i,r=e.maxRect.x-e.rect.x,o=e.maxRect.y-e.rect.y,a=null===(i=e.arts)||void 0===i?void 0:i.find((function(e){return e.artboard.cid===t.cid}));if(a){var s,c=a.artboard,l=null!==(s=c.boundsInParentForList)&&void 0!==s?s:c.boundsInParent;return n=(new w).set(Math.floor(l.x-r),Math.floor(l.y-o),Math.ceil(l.width),Math.ceil(l.height)),!0}})),n?(e.setRectToCenterAndScale(n),e.showTextTip("已定位到画板「".concat(r,"」"))):e.showTextTip("无法定位到画板「".concat(r,"」"))}))}},setRectToCenterAndScale:function(t){if(t){var e=this.sceneWidth,n=this.sceneHeight,i=this.cloudArtListMode;if(0!==e&&0!==n){var r=t,o=r.x,s=r.y,c=r.width,l=r.height,u=a["b"],d=c/e,h=(l+u)/n,f=Math.max(d,h);if(0!==f){f=.96/f,this.setScale(f),f=this.scale,t=this.childRect();var m=new wt;m.x-=(c/2+o)*f,m.y-=(l/2+s)*f,i?(m.x+=e/2,m.y+=n/2+u/2):(m.x+=t.width/2*f,m.y+=t.height/2*f,m.x=-(c/2+o-t.width/2)*f,m.y=-(l/2+s-t.height/2+u/2)*f),this.sceneX=Math.round(m.x),this.sceneY=Math.round(m.y)}}}},setRectToCenter:function(t){if(t){var e=this.sceneWidth,n=this.sceneHeight,i=this.cloudArtListMode;if(0!==e&&0!==n){var r=t,o=r.x,s=r.y,c=r.width,l=r.height,u=a["b"],d=this.scale;t=this.childRect();var h=new wt;h.x-=(c/2+o)*d,h.y-=(l/2+s)*d,i?(h.x+=e/2,h.y+=n/2+u/2):(h.x+=t.width/2*d,h.y+=t.height/2*d,h.x=-(c/2+o-t.width/2)*d,h.y=-(l/2+s-t.height/2+u/2)*d),this.sceneX=Math.round(h.x),this.sceneY=Math.round(h.y)}}},getBoxLocation:function(t,e,n,i){var r=0,o=0,a=i.width,s=i.height,c=(new w).set(this.sceneOffsetX+this.sceneX,this.sceneOffsetY+this.sceneY,this.sceneWidth,this.sceneHeight);if(this.cloudArtListMode)return t-=this.sceneOffsetX,e-=this.sceneOffsetY,r=this.sceneX,o=this.sceneY,t-=r,e-=o,a*=n,s*=n,{x:t/a,y:e/s};a*=n,s*=n,r=c.x,o=c.y,r+=c.width/2,o+=c.height/2,r-=a/2,o-=s/2;var l=(new w).set(r,o,a,s);return 0!==l.width&&0!==l.height?(t-=l.x,e-=l.y,t/=l.width,e/=l.height,{x:t,y:e}):void 0},resetScaleScene:function(t,e,n,i){var r=this.$refs.$instance;if(r){var o=this.childRect(),a=this.getBoxLocation(t,e,n,o);if(a){var s=this.getBoxLocation(t,e,i,o);if(s){this.sceneScaleKeepX=t-this.sceneOffsetX,this.sceneScaleKeepY=e-this.sceneOffsetY;var c=s.x-a.x,l=s.y-a.y,u=c*o.width*i,d=l*o.height*i;this.sceneX+=Math.round(u),this.sceneY+=Math.round(d)}}}},mouseWheel:function(t){var e;if(this.canEmitWindowEvent()){var n=t.ctrlKey||t.metaKey,i=t.shiftKey;if("1"!==(null===(e=t.target)||void 0===e?void 0:e.getAttribute("no-wheel"))&&this.inBox(t.target))if(this.canEmitEvent(t,{isScale:n,isMove:!n})){t.preventDefault();var r=t.deltaX,o=t.deltaY,a=t.deltaMode;if(0===a){var s=Math.abs(r),c=Math.abs(o),l=c>50&&o===Math.ceil(o),u=o>0?-1:1,d=t.altKey?5:1;if(n){var h,f=this.scale;h=f<.1?.01:f<=.2?.03:f<=.3?.05:.11,l||(h*=Math.min(1,c/10));var m=f+u*h*d,v=m-f;if(0===v)return;this.setScale(m),this.resetScaleScene(t.pageX,t.pageY,f,this.scale)}else if(l&&0===r)this[i?"sceneX":"sceneY"]+=Math.round(50*u*d);else{var p=r<0?1:0===r?0:-1,b=o<0?1:0===o?0:-1;p*=Math.min(2.5,s/10),b*=Math.min(2.5,c/10),0!==p&&(this.sceneX+=Math.round(10*p*d)),0!==b&&(this.sceneY+=Math.round(10*b*d))}}}else n&&t.preventDefault();else n&&t.preventDefault()}}}},Ul=Hl,Gl=(n("99c2"),Object(Gr["a"])(Ul,xo,So,!1,null,"c93e5e58",null)),Wl=Gl.exports,$l={components:{ZoomContainer:Wl,ScaleControl:Co},methods:{clickHide:function(){this.canClose&&this.$store.commit("setImageViewer",null)},clickPrev:function(){var t=this.currentIndex-1;t<0&&(t=0),this.imageViewer.currentIndex=t,this.imageViewer.resetScale=Date.now()},clickNext:function(){var t=this.currentIndex+1,e=this.imgList.length-1;t>=e&&(t=e),this.imageViewer.currentIndex=t,this.imageViewer.resetScale=Date.now()},onKeyup:function(t){var e=t.keyCode||t.which;27===e&&this.clickHide()}},computed:{EnumScaleType:function(){return a["V"]},visible:function(){return this.imageViewer.visible&&Object(l["i"])(this.imgList)},imgList:function(){return this.imageViewer.imgList},currentIndex:function(){return this.imageViewer.currentIndex},imageViewer:function(){return this.$store.state.imageViewer}},props:{canClose:{type:Boolean,default:!0}},beforeDestroy:function(){window.removeEventListener("keyup",this.onKeyup,!0)},created:function(){window.addEventListener("keyup",this.onKeyup,!0)}},zl=$l,Yl=(n("45cf"),Object(Gr["a"])(zl,vo,po,!1,null,"42f20b58",null)),Xl=Yl.exports,Kl={jszip:Object(Qt["createLoadGlobalLibraryFunc"])("JSZip","jszip.min.js",!1),docx:Object(Qt["createLoadGlobalLibraryFunc"])("docx","docx-preview.min.js")};function ql(t,e,n,i){return Jl.apply(this,arguments)}function Jl(){return Jl=Object(r["a"])(Object(i["a"])().m((function t(e,n,o,a){var s,c,l,u;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Promise.all([Object(Qt["fetchWithProgress"])(n,o,a),Object(r["a"])(Object(i["a"])().m((function t(){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Kl.jszip.loadAsync();case 1:return t.n=2,Kl.docx.loadAsync();case 2:return t.a(2,t.v)}}),t)})))()]);case 1:return s=t.v,c=Object(_["a"])(s,2),l=c[0],u=c[1],t.n=2,u.renderAsync(l,e);case 2:return t.a(2)}}),t)}))),Jl.apply(this,arguments)}var Ql={components:{ImageViewer:Xl},computed:{fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error},curVerId:function(){return this.curFileInfo.curVerId}},methods:{getImgUrl:function(t){var e,n,i=t.tagName.toUpperCase();return"IMG"===i?t.src:"IMAGE"===i?null!==(e=t.getAttribute("href"))&&void 0!==e?e:null===(n=t.href)||void 0===n?void 0:n.baseVal:null},tryRemoveBlobUrl:function(){var t=this;try{var e=this.$refs.container;if(!e)return;var n=Object(u["a"])(e.querySelectorAll("img,image")).map((function(e){return t.getImgUrl(e)})).filter((function(t){return Object(l["j"])(t)&&0===t.indexOf("blob:")}));n.forEach((function(t){URL.revokeObjectURL(t)}))}catch(i){}},initListener:function(t){var e=this.$refs.container;e&&e[t?"addEventListener":"removeEventListener"]("click",this.checkImageEvent)},checkImageEvent:function(t){var e,n=this,i=null!==(e=t.target)&&void 0!==e?e:t.srcElement;if(i){var r=this.getImgUrl(i);Object(l["j"])(r)&&setTimeout((function(){n.viewImage(r)}),34)}},viewImage:function(t){Object(l["j"])(t)&&this.$store.commit("setImageViewer",{imgList:[t],currentIndex:0})},loadDataAsync:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a,s,u;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:return r=e.curNetDiskFile,o=e.curFileDownloadUrl,a=e.fetchData,e.fetchState=c["a"].Fetching,e.errorText=null,n.p=1,n.n=2,ql(e.$refs.container,o,(function(t){if(Object(l["k"])(t)){var e=t.percentage,n=void 0===e?"":e,i=t.total,r=void 0===i?"":i,o=t.current,s=void 0===o?"":o;a.total=r,a.percentage=n,a.current=s}}),null!==(s=r.fileSize)&&void 0!==s?s:-1);case 2:e.fetchState=c["a"].Success,t&&e.$nextTick((function(){e.resetScroll()})),n.n=4;break;case 3:n.p=3,u=n.v,e.errorText="文档加载失败: ".concat(u.toString()),e.fetchState=c["a"].Error;case 4:return n.a(2)}}),n,null,[[1,3]])})))()},resetScroll:function(){var t=this.$refs.container;t&&(t.scrollTop=t.scrollLeft=0)}},data:function(){return{fetchState:c["a"].Normal,errorText:null,fetchData:{percentage:"",current:"",total:""}}},watch:{curVerId:function(){var t,e;this.tryRemoveBlobUrl(),null===(t=this.$refs.container)||void 0===t||null===(e=t.replaceChildren)||void 0===e||e.call(t),this.loadDataAsync()}},mounted:function(){this.initListener(!0),this.loadDataAsync()},beforeDestroy:function(){this.initListener(!1),this.$store.commit("setImageViewer",null),this.tryRemoveBlobUrl()}},Zl=Ql,tu=(n("b99f"),Object(Gr["a"])(Zl,fo,mo,!1,null,"4e65f62f",null)),eu=tu.exports,nu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-pdf"},[e("object",{staticClass:"object",attrs:{data:t.curFileViewUrl,type:t.contentType}},[t._v(" 当前浏览器不支持预览PDF文件,请下载PDF到本地查看:"),e("a",{attrs:{href:t.curFileDownloadUrl}},[t._v("下载 PDF")])])])},iu=[],ru={computed:{curVerId:function(){return this.curFileInfo.curVerId}},data:function(){return{contentType:Ri?null:"application/pdf"}}},ou=ru,au=(n("1257"),Object(Gr["a"])(ou,nu,iu,!1,null,"7d80c280",null)),su=au.exports,cu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-media"},[e("video",{staticClass:"video",attrs:{src:t.curFileViewUrl,autoplay:"",controls:""}},[t._v(" 当前浏览器不支持预览媒体文件,请下载到本地查看:"),e("a",{attrs:{href:t.curFileDownloadUrl}},[t._v("下载 媒体文件")])])])},lu=[],uu={computed:{curVerId:function(){return this.curFileInfo.curVerId}}},du=uu,hu=(n("b35d"),Object(Gr["a"])(du,cu,lu,!1,null,"910f16aa",null)),fu=hu.exports,mu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-image"},[e("ImageViewer",{attrs:{canClose:!1}})],1)},vu=[],pu={components:{ImageViewer:Xl},methods:{initImage:function(){var t=this.curNetDiskFile,e=this.curFileViewUrl,n=null===t||void 0===t?void 0:t.fileExt,i=Object(l["j"])(n)&&"."===n[0]?n.substring(1):n;this.$store.commit("setImageViewer",{imgList:[{src:e,format:i}],currentIndex:0})}},computed:{curVerId:function(){return this.curFileInfo.curVerId}},watch:{curVerId:function(){this.initImage()}},created:function(){this.initImage()}},bu=pu,gu=(n("fe9c"),Object(Gr["a"])(bu,mu,vu,!1,null,"9ce0166e",null)),wu=gu.exports,yu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-lottie"},[t.lottieError||t.lottieIniting?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在加载lottie文件...",errorText:"lottie文件加载失败,请刷新重试",isLoading:t.lottieIniting,isError:t.lottieError,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t._e(),e("div",{ref:"lottiebox",staticClass:"lottie-box",class:{off:t.lottieError||t.lottieIniting},style:t.lottieBoxStyle})])},ku=[],Cu=function(){var t=this,e=t._self._c;return t.isLoading?e("div",{staticClass:"n-loading",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"text"},[t._v(t._s(t.loadText))])]):t.isError?e("div",{staticClass:"n-error",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"text"},[t._v(t._s(t.errorText))]),t.reLoadText?e("div",[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v(t._s(t.reLoadText))])]):t._e(),t.showCustomService&&t.canShowContactUs?e("div",[e("a",{staticClass:"contactus",attrs:{href:"javascript:;"},on:{click:t.clickContactUS}},[t._v("联系我们")])]):t._e()]):t._e()},xu=[],Su={methods:{clickReload:function(){this.$emit("reload")},clickContactUS:function(){this.setContactUsVisible(!0)}},props:{isLoading:Boolean,loadText:{type:String,default:"数据加载中..."},isError:Boolean,errorText:{validator:function(){return!0}},reLoadText:{type:String,default:"重新加载"},showCustomService:{type:Boolean,default:!1}}},Tu=Su,Ou=(n("7970"),Object(Gr["a"])(Tu,Cu,xu,!1,null,"6bfca491",null)),Iu=Ou.exports,Au=Object(Qt["createLoadGlobalLibraryFunc"])(["bodymovin","lottie"],"lottie.min.js"),Fu=function(t,e,n,i,r){"string"===typeof i&&(i=+i),"string"===typeof r&&(r=+r);var o=0,a=0,s=e/n,c=i/r;s!==c&&(s>c?(o=Math.ceil((e-c*n)/2),e-=o):s<c&&(a=Math.ceil((n-e/c)/2),n-=a));for(var l=Math.floor(e/6),u=Math.floor(n/6),d=!0,h=o;h<e;h+=l)for(var f=a;f<n;f+=u){var m=Object(_["a"])(t.getImageData(h,f,1,1).data,4),v=m[0],p=m[1],b=m[2],g=m[3];if(0!==v||255!==p||0!==b||255!==g){d=!1;break}}return d},ju={_data:{},clear:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._data,n=Object.keys(e);t>0&&t>n.length||(n.forEach((function(t){try{var n=e[t];if(n&&n.lottie){try{n.lottie.pause()}catch(i){}try{n.lottie.destroy()}catch(i){}n.lottie=null}}catch(i){}})),delete this._data,this._data={})},_getId:function(t){var e,n,i=t.viewUrl,r=t.fileName,o=t.verId,a=t.lastVersionId;i&&(e=null!==(n=Object(c["E"])(i))&&void 0!==n?n:i);return e=null!==e&&void 0!==e?e:r,"lottie-".concat(t.parentId,"-").concat(e,":").concat(null!==o&&void 0!==o?o:a)},unbind:function(t){var e=this._getId(t),n=this._data[e];if(n){var i=n.lottie;try{i.stop(),i.wrapper=null}catch(r){try{i.destroy()}catch(r){}delete this._data[e]}}},remove:function(t){var e=this._getId(t),n=this._data[e];if(n){var i=n.lottie;if(i){try{i.pause()}catch(r){}try{i.destroy()}catch(r){}}delete this._data[e]}},get:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new Promise((function(r,o){try{var a=n._getId(e),s=n._data[a];if(s&&s.fetchState!==c["a"].Error){var l=s.lottie;if(l.container){var u=!1;return l.wrapper!==t&&(l.wrapper=t,t.appendChild(l.container),l.resize(),u=!0),l.play(),r({lottie:l,resized:u})}}var d=e.viewUrl;Au.loadAsync().then((function(s){var l=s.loadAnimation({container:t,path:Object(c["h"])(d,{type:"res"}),renderer:i,loop:!0,autoplay:!0,name:a,rendererSettings:{}});l.setSubframe(!1);var u=n._data[a]={lottie:l,fetchState:c["a"].Fetching},h=function(){if(u){if(h&&(l.removeEventListener("drawnFrame",h),h=null),f&&(l.removeEventListener("data_failed",f),f=null),"canvas"===i){var s=t.querySelector("canvas");if(s){var d=s.width,m=s.height,v=s.getContext("2d",{willReadFrequently:!0}),p=l.animationData,b=Fu(v,d,m,p.w,p.h);if(b){try{l.pause()}catch(g){}try{l.destroy()}catch(w){}return l=null,void n.get(t,e,"svg").then(r).catch(o)}}}r({lottie:u.lottie,resized:!0}),u.fetchState=c["a"].Success,u=a=null}},f=function(){u&&(h&&(l.removeEventListener("drawnFrame",h),h=null),f&&(l.removeEventListener("data_failed",f),f=null),u.fetchState=c["a"].Error,delete n._data[a],o(new Error("lottie data failed")),u=a=null)};l.addEventListener("drawnFrame",h),l.addEventListener("data_failed",f)})).catch((function(t){o(t)}))}catch(h){o(h)}}))}};function _u(){var t,e=c["g"];function n(){var t=document.createElement("div");return t.style.cssText="width:1px!important;height:1px!important;position:absolute!important;z-index: -1!important;top:0;left:0;overflow: hidden!important;pointer-events: none!important;",document.body.appendChild(t),t}function o(t){var e,n,i=null!==(e=null===(n=t.animationData)||void 0===n?void 0:n.fr)&&void 0!==e?e:30,r=t.totalFrames;if(0==r)return[];var o=Math.round(r/i*4);if(o<=1)return[0,r-1];var a=6;o>a&&(o=a);var s=Math.ceil(r/(o-1)),c=[],l=0;do{c.push(l),l+=s}while(l<r);return c.length<o&&c.push(r-1),c}function a(t,e,n,i,r,o,a,s,c,l){return new Promise((function(u,d){l&&(a=t);var h=function(){a.toBlob((function(t){u(t)}),"image/png")},f=function(){e.removeEventListener("drawnFrame",f),f=null;try{if(l){if(i<2){s||(s=a.getContext("2d",{willReadFrequently:!0}));var n=Math.floor(r/8),u=Math.floor(o/8);r-=n,o-=u;for(var m=!0,v=n;v<r;v+=n)for(var p=u;p<o;p+=u){var b=Object(_["a"])(s.getImageData(v,p,1,1).data,4),g=b[0],w=b[1],y=b[2],k=b[3];if(0!==g||255!==w||0!==y||255!==k){m=!1;break}}m&&d("canvas not good")}h()}else{var C=function(){S&&URL.revokeObjectURL(S),S=void 0},x=new Blob([t.outerHTML],{type:"image/svg+xml;charset=utf-8"}),S=URL.createObjectURL(x);c.onload=function(t){s.clearRect(0,0,r,o),s.drawImage(t.target,0,0,r,o),C(),h()},c.onerror=function(){C(),d("load svg to image failed")},c.src=S}}catch(T){d(T)}};e.currentFrame!==n?(e.addEventListener("drawnFrame",f),e.goToAndStop(n,!0)):f()}))}return function(){var s=Object(r["a"])(Object(i["a"])().m((function s(u){var d,h,f,m=arguments;return Object(i["a"])().w((function(s){while(1)switch(s.n){case 0:if(d=m.length>1&&void 0!==m[1]?m[1]:"canvas",null!=u){s.n=1;break}throw"file missing";case 1:return h=document.createElement("div"),h.style.cssText="width: ".concat(e,"px;"),t||(t=n(e)),t.appendChild(h),s.n=2,Au.loadAsync();case 2:return f=s.v,s.n=3,new Promise((function(n,s){var m="lottie-g-".concat(Object(c["hb"])()),v=URL.createObjectURL(u),p=f.loadAnimation({container:h,path:v,renderer:d,loop:!1,autoplay:!1,name:m,rendererSettings:{id:m}});p.setSubframe(!1);var b="canvas"===d;function g(){w||(w=!0,v&&(URL.revokeObjectURL(v),v=null),p&&(p.destroy(),p=null),h&&(t.removeChild(h),h=null))}var w=!1;function y(t){return k.apply(this,arguments)}function k(){return k=Object(r["a"])(Object(i["a"])().m((function t(e){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:n(e);case 1:return t.a(2)}}),t)}))),k.apply(this,arguments)}function C(){return x.apply(this,arguments)}function x(){return x=Object(r["a"])(Object(i["a"])().m((function t(){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:s("failed");case 1:return t.a(2)}}),t)}))),x.apply(this,arguments)}p.addEventListener("data_failed",(function(){w||(g(),C())})),p.addEventListener("DOMLoaded",Object(r["a"])(Object(i["a"])().m((function t(){var r,c,d,f,m,v,k,x,S,T,O,I,A,F;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(!w){t.n=1;break}return t.a(2);case 1:t.p=1,r=p.animationData,c=r.w,d=r.h,f=Math.ceil(d/c*e),h.style.height=f+"px",p.resize(),m=h.querySelector(b?"canvas":"svg"),v=o(p),b||(x=document.createElement("canvas"),x.width=e,x.height=f,S=x.getContext("2d",{willReadFrequently:!0}),T=new Image(e,f)),O=0;case 2:if(!(O<v.length)){t.n=5;break}return I=v[O],t.n=3,a(m,p,I,O,e,f,x,S,T,b);case 3:A=t.v,k?k.size<A.size&&(k=A):k=A;case 4:O++,t.n=2;break;case 5:if(x=S=T=void 0,k){t.n=6;break}return C(),t.a(2);case 6:return t.n=7,y(k);case 7:k=null,t.n=9;break;case 8:t.p=8,F=t.v,"canvas not good"===F?l(u,"svg").then(n).catch(s):C();case 9:return t.p=9,g(),t.f(9);case 10:return t.a(2)}}),t,null,[[1,8,9,10]])}))))}));case 3:return s.a(2,s.v)}}),s)})));function l(t){return s.apply(this,arguments)}return l}()}var Mu=_u(),Lu={components:{NetworkLoading:Iu},methods:{clickReload:function(){window.location.reload()},resize:function(){var t=this;this.$nextTick((function(){var e=t.$lottie;null===e||void 0===e||e.resize()}))},initLottie:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(!t.lottieIniting&&!t.$lottie){e.n=1;break}return e.a(2);case 1:return t.lottieLoadState=c["a"].Fetching,t.$lottie=null,e.p=2,e.n=3,ju.get(t.$refs.lottiebox,t.curNetDiskFile);case 3:n=e.v,r=n.lottie,t.$lottie=r,t.lottieSize=t.getLottieSize(r),t.lottieLoadState=c["a"].Success,e.n=5;break;case 4:e.p=4,e.v,t.lottieSize=new Nt,t.lottieLoadState=c["a"].Error;case 5:return e.a(2)}}),e,null,[[2,4]])})))()},getLottieSize:function(t){var e=new Nt(0,0);if(!t)return e;var n=t.animationData;if(!n)return e;var i=n.w,r=n.h;return"string"===typeof i&&(i=+i),"string"===typeof r&&(r=+r),e.width=i,e.height=r,e}},computed:{lottieError:function(){return this.lottieLoadState===c["a"].Error},lottieIniting:function(){return this.lottieLoadState===c["a"].Fetching},lottieBoxStyle:function(){var t=this.lottieSize;return{width:t.width>0?t.width+"px":"100%",height:t.height>0?t.height+"px":"100%"}},curVerId:function(){return this.curFileInfo.curVerId}},watch:{lottieSize:function(){this.resize()},webViewHidden:function(t){var e=this.$lottie;e&&(t?e.pause():e.play())},curNetDiskFile:function(t,e){var n=this;e&&(ju.remove(e),this.$lottie=null),this.$nextTick((function(){n.initLottie()}))}},data:function(){return{lottieLoadState:c["a"].Normal,lottieSize:new Nt}},beforeDestroy:function(){window.removeEventListener("resize",this.resize),ju.unbind(this.curNetDiskFile),this.$lottie=null},mounted:function(){var t=this;this.$nextTick((function(){t.initLottie()}))},created:function(){window.addEventListener("resize",this.resize)}},Pu=Lu,Du=(n("2413"),Object(Gr["a"])(Pu,yu,ku,!1,null,"00087742",null)),Nu=Du.exports,Eu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-base"},[e("div",{staticClass:"img",class:{mini:t.notPreviewImage}},[t.notPreviewImage?e("div",{staticClass:"icon-netdiskfile",class:t.iconCls}):t._e(),e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.previewImage},on:{resize:t.onPreviewImgResize}})],1),e("div",{staticClass:"name",domProps:{textContent:t._s(t.fileName)}}),e("div",{staticClass:"info"},[t.verDataNotFound?e("div",{staticClass:"ver",domProps:{textContent:t._s("不存在版本 #".concat(t.curFileInfo.curVerId))}}):t.fileInfo?[t.fileInfo.verId?e("div",{staticClass:"ver",domProps:{textContent:t._s(t.fileInfo.verId)}}):t._e(),e("div",{staticClass:"size",domProps:{textContent:t._s(t.fileInfo.fileSize)}}),e("div",{staticClass:"time",attrs:{title:t.fileInfo.updateTimeTitle},domProps:{textContent:t._s(t.fileInfo.updateTimeText)}}),e("div",{staticClass:"updater",domProps:{textContent:t._s(t.fileInfo.updater)}})]:t._e()],2),e("div",{staticClass:"btns"},[e("div",{staticClass:"button noborder",on:{click:function(e){return t.clickVerList()}}},[t._v("查看历史版本")]),t.urlLink?e("a",{staticClass:"button light",attrs:{href:t.urlLink,target:"_blank"}},[t._v("打开链接")]):e("div",{staticClass:"button light",on:{click:function(e){return t.clickDownloadNetDiskFile(t.curNetDiskFile)}}},[t._v("下载文件")])])])},Ru=[],Vu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"preview",style:t.imgStyle},[t.imgSrc?e("img",{directives:[{name:"show",rawName:"v-show",value:!t.errored,expression:"!errored"}],staticClass:"img",attrs:{src:t.imgSrc},on:{error:t.onError,load:t.onLoad}}):t._e()])},Bu=[],Hu={methods:{onLoad:function(t){var e=t.target;this.width=e.naturalWidth,this.height=e.naturalHeight,this.$emit("resize",this.width,this.height)},onError:function(){this.errored||(this.errored=!0)}},watch:{pathPreview:function(){this.errored=!1}},computed:{imgStyle:function(){var t=this.imgHeight;return t>0?"height:".concat(t,"px;"):null},imgSrc:function(){return this.combineResourcePath(this.pathPreview)}},data:function(){return{errored:!1,width:0,height:0}},props:{pathPreview:String,imgHeight:Number}},Uu=Hu,Gu=(n("cf3d"),Object(Gr["a"])(Uu,Vu,Bu,!1,null,"46dabef8",null)),Wu=Gu.exports,$u={components:{ArtboardPreviewImg:Wu},methods:{clickVerList:function(){this.$store.commit("netdiskFileVerListVisible",!0)},onPreviewImgResize:function(t,e){var n=this.imgSize;n.width=t,n.height=e}},computed:{fileName:function(){return this.curFileInfo.name},verDataNotFound:function(){var t=this.curFileInfo,e=t.renderFile,n=t.inVerData;return n&&!e},notPreviewImage:function(){var t=this.imgSize;return 0===t.width&&0===t.height},fileInfo:function(){var t=this.curNetDiskFile;if(!t)return null;var e={fileSize:Object(c["qb"])(t.fileSize),updater:t.updaterName,updateTimeText:Object(l["d"])(t.updateTimeTimes),updateTimeTitle:Object(l["c"])(t.updateTimeTimes)};return t.verId>0&&(e.verId="#".concat(t.verId)),e},urlLink:function(){var t,e=this.curNetDiskFile;return e&&e.fileType===a["L"].Url?null!==(t=e.previewPath)&&void 0!==t?t:e.webLoc:null},previewImage:function(){var t,e=this.curNetDiskFile;return e?(null!==(t=e.previewImage)&&void 0!==t?t:e.fileType===a["L"].Url)?null:e.previewPath:null},fileType:function(){var t,e,n=this.curFileInfo,i=n.renderFile,r=n.mainFile;return null!==(t=null!==(e=null===i||void 0===i?void 0:i.fileType)&&void 0!==e?e:r.fileType)&&void 0!==t?t:a["L"].Other},iconCls:function(){var t=this.fileType;return a["L"].getName(t,a["M"].Big)}},created:function(){},data:function(){return{imgSize:{width:0,height:0}}}},zu=$u,Yu=(n("da5a"),Object(Gr["a"])(zu,Eu,Ru,!1,null,"4ba33741",null)),Xu=Yu.exports,Ku=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-docx"},[e("ImageViewer",{attrs:{canClose:!0}}),t.fetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[e("b",[t._v("文档打开中...")]),e("span",{domProps:{textContent:t._s("".concat(t.fetchData.current,"/").concat(t.fetchData.total))}})]),e("div",{staticClass:"percentage"},[e("p",{style:{width:t.fetchData.percentage}})])])]):t.isError?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v(t._s(t.errorText))])]):t._e(),e("div",{ref:"container",staticClass:"container"},[e("div",{staticClass:"markdown-box markdown-reset",domProps:{innerHTML:t._s(t.fetchData.markdownHTML)}})])],1)},qu=[],Ju={codemirror:Object(Qt["createLoadGlobalLibraryFunc"])("CodeMirror","codemirror/codemirror.min.js"),modemeta:Object(Qt["createLoadGlobalLibraryFunc"])(null,"codemirror/mode/meta.min.js")},Qu=!1,Zu={},td=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return n=Zu[e],n||(n=Zu[e]=Object(Qt["createLoadGlobalLibraryFunc"])(null,"codemirror/mode/".concat(e,"/").concat(e,".min.js"))),t.p=1,t.n=2,n.loadAsync();case 2:return t.a(2,t.v);case 3:return t.p=3,t.v,t.a(2,null)}}),t,null,[[1,3]])})));return function(e){return t.apply(this,arguments)}}();function ed(t,e){if(!t)return null;if(!Object(l["j"])(e))return null;var n=e.toLowerCase(),i=t.modeInfo;if(!Object(l["i"])(i))return null;var r=i.find((function(t){var i;return!!t&&(t.mode===e||((null===(i=t.name)||void 0===i?void 0:i.toLowerCase())===n||(t.mime==n||(!(!Object(l["i"])(t.alias)||-1===t.alias.findIndex((function(t){return(null===t||void 0===t?void 0:t.toLocaleLowerCase())===n})))||(!(!Object(l["i"])(t.mimes)||-1===t.mimes.findIndex((function(t){return t===n})))||!(!Object(l["i"])(t.ext)||-1===t.ext.findIndex((function(t){return t===n}))))))))}));if(!r){var o=/\+(xml|json)$/.exec(n);o&&(r=t.findModeByMIME("application/".concat(o[1])))}return r}function nd(t,e){return id.apply(this,arguments)}function id(){return id=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o,a;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return Object(l["k"])(n)||(n={}),t.n=1,rd(n.mode,n.theme);case 1:return r=t.v,o=r.mode,a=r.CodeMirror,delete n.mode,t.a(2,a(e,Object(s["a"])(Object(s["a"])({lineNumbers:!0,gutters:["CodeMirror-linenumbers"],lineWrapping:!0,readOnly:!0,cursorBlinkRate:-1,dragDrop:!1},n),{},{mode:null!==o&&void 0!==o?o:null})))}}),t)}))),id.apply(this,arguments)}function rd(t,e){return od.apply(this,arguments)}function od(){return od=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(Qu){t.n=6;break}return t.n=1,Object(Qt["loadCssFileAsync"])("codemirror/codemirror.css");case 1:if(!n||"default"===n){t.n=5;break}return t.p=2,t.n=3,Object(Qt["loadCssFileAsync"])("codemirror/theme/".concat(n,".css"));case 3:t.n=5;break;case 4:t.p=4,t.v;case 5:Qu=!0;case 6:return t.n=7,Ju.codemirror.loadAsync();case 7:return r=t.v,self.CodeMirror=r,t.p=8,t.n=9,Ju.modemeta.loadAsync();case 9:if(e=null===(o=ed(r,e))||void 0===o?void 0:o.mode,"null"===e&&(e=null),e){t.n=10;break}return t.a(2,{CodeMirror:r,mode:e});case 10:return t.n=11,td(e);case 11:t.p=11,self.CodeMirror=void 0;try{delete self.CodeMirror}catch(i){}return t.f(11);case 12:return t.a(2,{CodeMirror:r,mode:e})}}),t,null,[[8,,11,12],[2,4]])}))),od.apply(this,arguments)}n("2ca0");var ad=n("751a"),sd=ad.createLoadGlobalLibraryFunc,cd=ad.fetchTextWithProgress,ld=sd("DOMPurify","purify.min.js"),ud=sd("marked","marked.min.js");function dd(t,e,n){return hd.apply(this,arguments)}function hd(){return hd=Object(r["a"])(Object(i["a"])().m((function t(e,n,r){var o,a,s,c,l;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Promise.all([cd(e,n,r),ld.loadAsync(),ud.loadAsync()]);case 1:return o=t.v,a=Object(_["a"])(o,3),s=a[0],c=a[1],l=a[2],t.a(2,c.sanitize(l.parse(s)))}}),t)}))),hd.apply(this,arguments)}function fd(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"language-";if(null==t)return null;var i=null===(e=Object(u["a"])(t.classList).find((function(t){return Object(l["j"])(t)&&t.startsWith(n)})))||void 0===e?void 0:e.substring(n.length);return i||null}var md={components:{ImageViewer:Xl},computed:{fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error},curVerId:function(){return this.curFileInfo.curVerId}},methods:{parseHightlightCode:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,o,a,s,c;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(n=t.$refs.container,n){e.n=1;break}return e.a(2);case 1:if(o=n.querySelectorAll('pre code[class^="language-"]'),0!==o.length){e.n=2;break}return e.a(2);case 2:a=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(r=(null!==(n=e.textContent)&&void 0!==n?n:"").replace(/\r?\n$/,""),Object(l["j"])(r)){t.n=1;break}return t.a(2);case 1:return o=fd(e),t.n=2,nd((function(t){var n=e.parentNode;n.insertBefore(t,e),n.removeChild(e);var i=n.classList;i.add("cm-wrapper"),i.add("cm-mode-".concat(o))}),{value:r,mode:o,lineNumbers:!1});case 2:return t.a(2)}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=0;case 3:if(!(s<o.length)){e.n=5;break}return c=o[s],e.n=4,a(c);case 4:s++,e.n=3;break;case 5:return e.a(2)}}),e)})))()},getImgUrl:function(t){var e,n,i=t.tagName.toUpperCase();return"IMG"===i?t.src:"IMAGE"===i?null!==(e=t.getAttribute("href"))&&void 0!==e?e:null===(n=t.href)||void 0===n?void 0:n.baseVal:null},tryRemoveBlobUrl:function(){var t=this;try{var e=this.$refs.container;if(!e)return;var n=Object(u["a"])(e.querySelectorAll("img,image")).map((function(e){return t.getImgUrl(e)})).filter((function(t){return Object(l["j"])(t)&&0===t.indexOf("blob:")}));n.forEach((function(t){URL.revokeObjectURL(t)}))}catch(i){}},initListener:function(t){var e=this.$refs.container;e&&e[t?"addEventListener":"removeEventListener"]("click",this.checkImageEvent)},checkImageEvent:function(t){var e,n=this,i=null!==(e=t.target)&&void 0!==e?e:t.srcElement;if(i){var r=this.getImgUrl(i);Object(l["j"])(r)&&setTimeout((function(){n.viewImage(r)}),34)}},viewImage:function(t){Object(l["j"])(t)&&this.$store.commit("setImageViewer",{imgList:[t],currentIndex:0})},loadDataAsync:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return n=t.curNetDiskFile,r=t.curFileDownloadUrl,o=t.fetchData,t.fetchState=c["a"].Fetching,t.errorText=null,e.p=1,e.n=2,dd(r,(function(t){if(Object(l["k"])(t)){var e=t.percentage,n=void 0===e?"":e,i=t.total,r=void 0===i?"":i,a=t.current,s=void 0===a?"":a;o.total=r,o.percentage=n,o.current=s}}),null!==(a=n.fileSize)&&void 0!==a?a:-1);case 2:o.markdownHTML=e.v,t.fetchState=c["a"].Success,t.$nextTick((function(){t.parseHightlightCode()})),e.n=4;break;case 3:e.p=3,s=e.v,t.errorText="文档加载失败: ".concat(s.toString()),t.fetchState=c["a"].Error;case 4:return e.a(2)}}),e,null,[[1,3]])})))()}},data:function(){return{fetchState:c["a"].Normal,errorText:null,fetchData:{percentage:"",current:"",total:"",markdownHTML:""}}},watch:{curVerId:function(){this.loadDataAsync()}},mounted:function(){this.initListener(!0),this.loadDataAsync()},beforeDestroy:function(){this.initListener(!1),this.$store.commit("setImageViewer",null),this.tryRemoveBlobUrl()}},vd=md,pd=(n("1ffe"),Object(Gr["a"])(vd,Ku,qu,!1,null,"0760c6b6",null)),bd=pd.exports,gd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-docx"},[t.fetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[e("b",[t._v("文档打开中...")]),e("span",{domProps:{textContent:t._s("".concat(t.fetchData.current,"/").concat(t.fetchData.total))}})]),e("div",{staticClass:"percentage"},[e("p",{style:{width:t.fetchData.percentage}})])])]):t.isError?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v(t._s(t.errorText))])]):t._e(),e("div",{staticClass:"container"},[t.fetchData.textHTML?e("CodeMirror",{attrs:{value:t.fetchData.textHTML,mode:t.codemirrorMode}}):t._e()],1)])},wd=[],yd=function(){var t=this,e=t._self._c;return e("div",{ref:"container",class:["cm-wrapper","cm-mode-".concat(t.mode)]})},kd=[],Cd={methods:{initEditor:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(n=t.$refs.container,r=t.value,o=t.mode,n){e.n=1;break}return e.a(2);case 1:return o=null!==o&&void 0!==o?o:null,r=null!==r&&void 0!==r?r:"",e.n=2,nd((function(t){n.appendChild(t)}),{value:r,mode:o});case 2:t.$curEditor=e.v;case 3:return e.a(2)}}),e)})))()},disposeEditor:function(){var t=this.$curEditor;if(t){var e;if(t.setValue(""),t.clearHistory(),t.display&&(e=t.display.wrapper)){var n=e.parentNode;n&&(n.removeChild(e),n=null),e=null}this.$curEditor=null}}},watch:{value:function(t){null!==t&&void 0!==t||(t="");var e=this.$curEditor;e&&(e.setValue(t),e.clearHistory())}},mounted:function(){var t=this;this.$nextTick((function(){t.initEditor()}))},beforeDestroy:function(){this.disposeEditor()},props:{mode:{type:String,default:null},value:String}},xd=Cd,Sd=Object(Gr["a"])(xd,yd,kd,!1,null,null,null),Td=Sd.exports,Od={components:{CodeMirror:Td},computed:{fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error},codemirrorMode:function(){var t,e=this.curNetDiskFile;if(!e)return null;var n=(null!==(t=e.fileExt)&&void 0!==t?t:Object(c["D"])(null===e||void 0===e?void 0:e.name)).toLowerCase();return n.length>1&&"."===n[0]&&(n=n.substring(1)),"mjs"!==n&&"cjs"!==n||(n="js"),n},curVerId:function(){return this.curFileInfo.curVerId}},methods:{loadDataAsync:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return n=t.curNetDiskFile,r=t.curFileViewUrl,o=t.fetchData,t.fetchState=c["a"].Fetching,t.errorText=null,o.textHTML=null,e.p=1,e.n=2,Object(Qt["fetchTextWithProgress"])(r,(function(t){if(Object(l["k"])(t)){var e=t.percentage,n=void 0===e?"":e,i=t.total,r=void 0===i?"":i,a=t.current,s=void 0===a?"":a;o.total=r,o.percentage=n,o.current=s}}),null!==(a=n.fileSize)&&void 0!==a?a:-1);case 2:o.textHTML=e.v,t.fetchState=c["a"].Success,e.n=4;break;case 3:e.p=3,s=e.v,t.errorText="文档加载失败: ".concat(s.toString()),t.fetchState=c["a"].Error;case 4:return e.a(2)}}),e,null,[[1,3]])})))()}},data:function(){return{fetchState:c["a"].Normal,errorText:null,fetchData:{percentage:"",current:"",total:"",textHTML:""}}},watch:{curVerId:function(){this.loadDataAsync()}},mounted:function(){this.loadDataAsync()}},Id=Od,Ad=(n("5e23"),Object(Gr["a"])(Id,gd,wd,!1,null,"d1d16146",null)),Fd=Ad.exports,jd={components:{ViewPdf:su,ViewMedia:fu,ViewImage:wu,ViewLottie:Nu,ViewDocx:eu,ViewMarkdown:bd,ViewText:Fd,ViewBase:Xu},computed:{EnumNetDiskFileType:function(){return a["L"]},fileType:function(){var t,e=this.curNetDiskFile;return null!==(t=null===e||void 0===e?void 0:e.fileType)&&void 0!==t?t:a["L"].Other},fileExtOrName:function(){var t,e=this.curNetDiskFile;return null!==(t=null===e||void 0===e?void 0:e.fileExt)&&void 0!==t?t:null===e||void 0===e?void 0:e.name},isDocx:function(){var t=this.fileType,e=this.fileExtOrName;return a["L"].isDocxFile(t,e)},isMarkdown:function(){var t=this.fileType,e=this.fileExtOrName;return a["L"].isMarkdownFile(t,e)},isTextFile:function(){var t=this.isMarkdown,e=this.fileType,n=this.fileExtOrName;return!t&&a["L"].isTextFile(e,n)}},created:function(){}},_d=jd,Md=(n("9779"),Object(Gr["a"])(_d,uo,ho,!1,null,"f5874068",null)),Ld=Md.exports,Pd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"needlogin-tip",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"logo"}),e("div",{staticClass:"box"},[e("div",{staticClass:"container"},[e("div",{staticClass:"cloudname"},[t._v("您正在访问"),e("b",[t._v(t._s(t.title))])]),e("div",{staticClass:"text"},[t._v("请先登录验证权限")]),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.goCloudLogin}},[t._v("立即登录")])])])])])},Dd=[],Nd={computed:{title:function(){var t=this.cloudName;return t||"标记狮设计协作平台私有云服务"}}},Ed=Nd,Rd=(n("0128"),Object(Gr["a"])(Ed,Pd,Dd,!1,null,"895cb57c",null)),Vd=Rd.exports,Bd=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"menu",staticClass:"menu",style:t.menuStyle,on:{contextmenu:function(t){t.preventDefault()}}},[t.inCloudViewerMode&&!t.notSupportArtboardStatusVersion?e("div",{staticClass:"menu-item",domProps:{textContent:t._s(t.artboardInDevStatus?"取消标记":"标记为待开发")},on:{click:t.clickSetArtboardStatus}}):t._e(),e("div",{staticClass:"menu-item",on:{click:t.clickGoArtboardSlice}},[t._v("查看全部切图")]),t.inCloudMode?e("div",{staticClass:"menu-item sub",attrs:{not_auto_hide:""},on:{mouseenter:function(e){return t.resetContextMenuSubInLeft()}}},[t._v(" 下载预览图 "),e("div",{ref:"submenu",staticClass:"sub-menu",class:{"in-left":t.contextMenuSubInLeft}},[t.isSupportPreviewHDCloudVersion?e("div",{staticClass:"menu-item",class:{off:t.notPreview4},on:{click:function(e){return t.clickDownPreview(4)}}},[t._v("@4x预览图")]):t._e(),e("div",{staticClass:"menu-item",on:{click:function(e){return t.clickDownPreview(2)}}},[t._v("@2x预览图")]),t.inCloudMode?e("div",{staticClass:"menu-item",on:{click:function(e){return t.clickDownPreview(1)}}},[t._v("@1x预览图")]):t._e()])]):e("div",{staticClass:"menu-item",on:{click:function(e){return t.clickDownPreview(2)}}},[t._v("下载预览图")]),t.inCloudMode&&t.cloudUserIsDesigner?e("div",{staticClass:"menu-item",class:{off:t.fileReadOnly,light:!t.fileReadOnly},on:{click:t.clickRemoveItem}},[t._v("删除")]):t._e()]):t._e()},Hd=[],Ud={methods:{resetContextMenuSubInLeft:function(){var t=this;this.contextMenuSubInLeft=!1,this.$nextTick((function(){var e=t.$refs.submenu;if(e){var n=window,i=n.innerWidth,r=e.getBoundingClientRect(),o=i-r.width-3;t.contextMenuSubInLeft=r.left>o}}))},clickSetArtboardStatus:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,s,c,l;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.notSupportArtboardStatusVersion,r=t.artboardInDevStatus,o=t.artboard,!n){e.n=1;break}return e.a(2);case 1:return s=r?a["i"].None:a["i"].Dev,e.p=2,e.n=3,t.setUserFavoriteArtboard(o.artboard,s);case 3:c=e.v,o.customStatus=c.status,o.customStatusUpdateTimes=c.updateTimes,t.$store.commit("refreshRecents",a["Y"].FavoriteArtboard),e.n=5;break;case 4:e.p=4,l=e.v,-1===(null===l||void 0===l?void 0:l.toString().indexOf(" aborted "))&&t.showTextTip(l);case 5:return e.a(2)}}),e,null,[[2,4]])})))()},clickRemoveItem:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,c,l,u,d;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(n=t.artboard,r=t.cloudNotSupportEdit,o=t.cloudVersion,a=t.fileReadOnly,s=t.cloudCurrentFolderId,c=t.cloudUserIsDesigner,n){e.n=1;break}return e.a(2);case 1:if(!r){e.n=2;break}return t.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(o,"),请先升级私有云部署包")),e.a(2);case 2:if(l=n.artboard,u=l.guid,d=l.name,!a&&c){e.n=3;break}return t.showTextTip("您没有权限删除画板「".concat(d,"」")),e.a(2);case 3:return e.n=4,t.confirm({title:"删除确认",text:"确认要删除画板「".concat(d,"」吗?")});case 4:if(e.v){e.n=5;break}return e.a(2);case 5:return e.n=6,t.removeCloudItem({parentId:s,artboardGuid:u});case 6:if(!e.v){e.n=7;break}t.$store.commit("removeArtboard",u);case 7:return e.a(2)}}),e)})))()},clickDownPreview:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a,s,c,l,u;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(r=e.artboard,o=e.inArtboardMode,a=e.inCloudViewerMode,s=e.notPreview4,r){n.n=1;break}return n.a(2);case 1:if(l=r,r=l.artboard,c=l.artboardVerData,a&&o||(c=null),r=null!==c&&void 0!==c?c:r,r){n.n=2;break}return n.a(2);case 2:if(!s||4!==t){n.n=3;break}return n.a(2,e.showTextTip("画板「".concat(r.name,"」导出标注时未勾选「高清导出」,无法下载@4x预览图")));case 3:return e.setInOutput(!0),n.p=4,n.n=5,Fa("".concat(r.name).concat(1===t?"":"@".concat(t,"x"),".png"),r.artboardPreviewPng,r.artboardPreviewJS,r,t);case 5:n.n=7;break;case 6:n.p=6,u=n.v,e.showTextTip(u);case 7:return n.p=7,e.setInOutput(!1),n.f(7);case 8:return n.a(2)}}),n,null,[[4,6,7,8]])})))()},clickGoArtboardSlice:function(){this.setCurArtboard(this.artboard),this.$store.commit("setRightNavType",a["U"].Slice)},hideContextmenu:function(t){var e=this,n=t.type,i=t.button,r=t.target;"mouseup"===n&&2===i||(clearTimeout(this.handle),null!==r&&void 0!==r&&r.hasAttribute("not_auto_hide")||(this.handle=setTimeout((function(){e.$store.commit("setArtboardMenu",{visible:!1})}),120)))},fixedLocation:function(){var t=this;this.$nextTick((function(){if(t.visible){var e=t.$refs.menu,n=t.artboardMenu,i=n.x,r=n.y,o=t.location;if(e){var a=window,s=a.innerWidth,c=a.innerHeight,l=e.offsetWidth,u=e.offsetHeight,d=s-l-5,h=c-u-5;o.left=Math.min(i,d)+"px",o.top=Math.min(r,h)+"px"}}}))}},watch:{resetLocationKey:function(){this.fixedLocation()},"artboardMenu.x":function(){clearTimeout(this.handle)},"artboardMenu.y":function(){clearTimeout(this.handle)},"artboardMenu.artboard":function(t){null!=t&&clearTimeout(this.handle)},visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},created:function(){this.visible&&(window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0))},beforeDestroy:function(){clearTimeout(this.handle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)},data:function(){return{contextMenuSubInLeft:!1,needOpen:!1,handle:0,location:{top:null,left:0}}},computed:{notPreview4:function(){var t,e=this.artboard,n=this.inCloudViewerMode,i=this.inArtboardMode;if(!e)return!0;var r=e;return e=r.artboard,t=r.artboardVerData,n&&i||(t=null),e=null!==t&&void 0!==t?t:e,e?!a["h"].checkType(e.apm,a["h"].PreviewFinally_4x):void 0},isSupportPreviewHDCloudVersion:function(){return this.inCloudMode&&Qr.supportPreviewHD(this.cloudVersion)},notSupportArtboardStatusVersion:function(){return Qr.notSupportAiPrompt(this.cloudVersion)},artboardInDevStatus:function(){var t=this.artboard,e=this.inCloudViewerMode;return e&&t.customStatus===a["i"].Dev},resetLocationKey:function(){var t=this.artboardMenu,e=this.visible;return"".concat(e,":").concat(t.x,":").concat(t.y)},visible:function(){var t=this.artboardMenu,e=t.artboard,n=t.visible;return n&&!!e},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!0}return!1},fileReadOnly:function(){return this.cloudNotSupportEdit||!this.canChangeFile},cloudNotSupportEdit:function(){return Qr.notSupportNetDiskFileWebUpload(this.cloudVersion)},artboard:function(){return this.artboardMenu.artboard},menuStyle:function(){var t=this.location;return t},artboardMenu:function(){return this.$store.state.artboardMenu}}},Gd=Ud,Wd=(n("15ce"),Object(Gr["a"])(Gd,Bd,Hd,!1,null,"d98dd7b2",null)),$d=Wd.exports,zd=function(){var t=this,e=t._self._c;return t.tipVisible?e("div",{staticClass:"pop-tip-text"},[e("p",[t._v(t._s(t.tipText)),e("span",{staticClass:"btn-close",on:{click:function(e){return t.hideTextTip()}}},[t._v("我知道了")])])]):t._e()},Yd=[],Xd={computed:{tipText:function(){return this.$store.state.textTip.text},tipVisible:function(){return this.$store.state.textTip.visible}}},Kd=Xd,qd=(n("2d13"),Object(Gr["a"])(Kd,zd,Yd,!1,null,"5c4bb38c",null)),Jd=qd.exports,Qd=function(){var t=this,e=t._self._c;return t.visibleMin?e("FolderNavMini",{attrs:{isSupportNetDiskFile:t.isSupportNetDiskFile,miniFoldersOpen:t.miniFoldersOpen},on:{clickMiniFoldersOpen:t.clickMiniFoldersOpen}}):t.visible?e("FolderNavMax",{attrs:{isSupportNetDiskFile:t.isSupportNetDiskFile,subFilesOpen:t.subFilesOpen&&!t.inArtboardMultDownMode,subFoldersOpen:t.subFoldersOpen&&!t.inArtboardMultDownMode,subArtboardsOpen:t.subArtboardsOpen||t.inArtboardMultDownMode},on:{clickSubFoldersOpen:t.clickSubFoldersOpen,clickSubFilesOpen:t.clickSubFilesOpen,clickSubArtboardsOpen:t.clickSubArtboardsOpen}}):t._e()},Zd=[],th=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-folders",class:{allfolders:t.allFoldersBoxVisible}},[e("div",{staticClass:"header"},[e("div",{staticClass:"name"}),e("div",{staticClass:"m"},[e("FolderNavSortMenu"),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",attrs:{type:"text",placeholder:"搜索当前文件夹",maxlength:"50",spellcheck:"false"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t.searchText?e("a",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:t.clickClearSearchText}}):t._e()])],1)]),e("div",{ref:"$list",staticClass:"list",class:{usetab:t.needShowFile},on:{scroll:t.onListScroll}},[t.needShowFile?e("div",{staticClass:"list-tab",class:{on:t.subFoldersOpen}},[e("span",{on:{click:t.clickSubFoldersOpen}},[t._v("文件夹("+t._s(t.renderCloudSubFolders.length)+")")])]):t._e(),t.hasSubFolders?e("div",{ref:"$folders",staticClass:"list-item",class:{off:!t.folderListVisible},style:{height:t.renderFolderHeight+"px"}},[e("div",{staticClass:"list-box",class:{scrolling:t.scrolling},style:{"padding-top":t.renderFolderLazyList.paddingTop}},t._l(t.renderFolderLazyList.items,(function(n){return e("FoldNavFolderItem",{key:n.id,attrs:{isSupportNetDiskFile:t.isSupportNetDiskFile,folder:n},on:{contextMenuFolder:t.contextMenuFolder}})})),1)]):t._e(),t.needShowFile&&!t.hasSubFolders||t.inRootAndNotSearchFound?e("div",{directives:[{name:"show",rawName:"v-show",value:t.subFoldersOpen||t.inRootAndNotSearchFound,expression:"subFoldersOpen||inRootAndNotSearchFound"}],staticClass:"empty"},[t._v(t._s(t.hasSearchText?"未找到包含 “".concat(t.searchText,"” 的文件夹"):"没有文件夹"))]):t._e(),t.artShowInListMode&&t.needShowFile&&t.documentArtboards.length>0?[e("div",{staticClass:"list-tab",class:{on:t.subArtboardsOpen}},[e("span",{on:{click:t.clickSubArtboardsOpen}},[t._v("画板("+t._s(t.renderCloudSubArtboards.length)+")")])]),t.hasSubArtboards?e("div",{ref:"$artboards",staticClass:"list-item",class:{off:!t.subArtboardsOpen},style:{height:t.renderArtboardHeight+"px"}},[e("div",{staticClass:"list-box",class:{scrolling:t.scrolling},style:{"padding-top":t.renderArtboardLazyList.paddingTop}},t._l(t.renderArtboardLazyList.items,(function(n){return e("FoldNavArtboardItem",{key:n.artboard.cid,attrs:{item:n,lightArtboardId:t.lightArtboardId}})})),1)]):e("div",{directives:[{name:"show",rawName:"v-show",value:t.subArtboardsOpen,expression:"subArtboardsOpen"}],staticClass:"empty"},[t._v(t._s(t.hasSearchText?"未找到包含 “".concat(t.searchText,"” 的画板"):"当前文件夹不存在画板"))])]:t._e(),t.needShowFile?e("div",{staticClass:"list-tab",class:{on:t.subFilesOpen}},[e("span",{on:{click:t.clickSubFilesOpen}},[t._v("文件("+t._s(t.renderCloudSubFiles.length)+")")])]):t._e(),t.needShowFile&&t.hasSubFiles?e("div",{ref:"$files",staticClass:"list-item",class:{off:!t.subFilesOpen},style:{height:t.renderFileHeight+"px"}},[e("div",{staticClass:"list-box",class:{scrolling:t.scrolling},style:{"padding-top":t.renderFileLazyList.paddingTop}},t._l(t.renderFileLazyList.items,(function(n){return e("FoldNavFileItem",{key:n.viewUrl,attrs:{file:n},on:{contextMenuFile:t.contextMenuFile}})})),1)]):t.needShowFile?e("div",{directives:[{name:"show",rawName:"v-show",value:t.subFilesOpen,expression:"subFilesOpen"}],staticClass:"empty"},[t._v(t._s(t.hasSearchText?"未找到包含 ".concat(t.searchText," 的文件"):"没有文件"))]):t._e()],2),e("FileItemContextMenu",{attrs:{fileContextMenuData:t.fileContextMenuData}}),e("FolderItemContextMenu",{attrs:{folderContextMenuData:t.folderContextMenuData}}),t.artShowInListMode?e("MultArtboardDownload"):t._e()],1)},eh=[],nh=function(){var t=this,e=t._self._c;return t.inArtboardMultDownMode&&t.exportNodeCount?e("section",{staticClass:"mult-download"},[e("div",{staticClass:"text"},[0!==t.exportNodeCount?e("Checkbox",{attrs:{text:"全选",selected:t.allSelected},on:{click:t.clickAllSelectBtn}}):t._e(),e("div",{staticClass:"info"},[t._v("已选中"+t._s(t.selectNodeCount)+"/"+t._s(t.exportNodeCount)+"个画板")])],1),e("div",{staticClass:"btns"},[t.inCloudMode?e("Select",{attrs:{options:t.previewScaleSelectOptions},on:{changed:t.onPreviewScaleSelectChanged}}):t._e(),e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickDownSelectAll()}}},[t._v("下载")]),e("a",{staticClass:"btn-close",attrs:{href:"javascript:;"},on:{click:function(e){return t.setInArtboardMultDownMode(!1)}}})],1)]):t._e()},ih=[],rh=function(){var t=this,e=t._self._c;return e("dl",{staticClass:"select",class:{expandUp:t.expandUp||t.showDDInTop}},[e("dt",{class:{on:t.visible,light:t.light},attrs:{title:t.title},on:{click:function(e){e.stopPropagation(),t.visible=!t.visible}}},[t._v(t._s(t.selectName))]),t.visible?e("dd",[e("ul",{ref:"ul"},t._l(t.options,(function(n,i){return e("li",{key:i,class:{on:t.selected===n,disabled:n.disabled},attrs:{title:n.title},on:{click:function(e){return t.clickOption(n)}}},[t._v(t._s(n.name))])})),0)]):t._e()])},oh=[],ah={methods:{checkRect:function(){var t=this,e=this.visible,n=this.expandUp;e&&(n||(this.showDDInTop=!1,this.$nextTick((function(){var e=t.$refs.ul;if(e){var n=e.getBoundingClientRect(),i=window.innerHeight-t.checkShowUpFixedHeight,r=n.bottom;r>i&&(t.showDDInTop=!0)}}))))},clickOption:function(t){if(Object(l["k"])(t)){var e=this.selected;e!==t&&(null!=e&&(e.selected=!1),t.selected=!0,this.visible=!1,this.$emit("changed",t))}},onVisibleClick:function(){var t=this;requestAnimationFrame((function(){t.visible=!1}))}},watch:{visible:function(t){t?(this.checkRect(),window.addEventListener("click",this.onVisibleClick,!0)):window.removeEventListener("click",this.onVisibleClick,!0)}},computed:{title:function(){var t=this.selected;return t&&t.title||""},selectName:function(){var t=this.selected;return t?t.name:""},selected:function(){var t=this.options,e=t.find((function(t){return Object(l["k"])(t)&&t.selected}));return null==e&&(e=t[0]),e}},beforeDestroy:function(){window.removeEventListener("click",this.onVisibleClick,!0)},data:function(){return{visible:!1,showDDInTop:!1}},props:{options:Array,expandUp:{default:!1,type:Boolean},checkShowUpFixedHeight:{default:0,type:Number},light:Boolean}},sh=ah,ch=(n("ec86"),Object(Gr["a"])(sh,rh,oh,!1,null,"25850174",null)),lh=ch.exports,uh=function(){var t=this,e=t._self._c;return e("label",{staticClass:"checkbox",class:{on:t.selected},on:{click:t.click}},[t.text?e("i",[t._v(t._s(t.text))]):t._e()])},dh=[],hh={props:{text:String,selected:Boolean},methods:{click:function(){this.$emit("click",!this.selected)}}},fh=hh,mh=Object(Gr["a"])(fh,uh,dh,!1,null,null,null),vh=mh.exports,ph={components:{Checkbox:vh,Select:lh},methods:{onPreviewScaleSelectChanged:function(t){Object(l["k"])(t)&&(this.exportScale=t.value,Object(c["jb"])("artboard.previews.scale",this.exportScale))},clickAllSelectBtn:function(t){t=!this.allSelected&&(this.exportNodeCount,!0);var e={length:0};this.renderDocumentArtboards.forEach((function(n){n.mlUserSelectDown!==t&&(n.mlUserSelectDown=t,e[n.artboard.guid]=1,e.length++)})),this.$store.commit("selectArtboardChanged",e)},clickDownSelectAll:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(0!==t.exportNodeCount){e.n=1;break}return t.showTextTip("当前文件夹不存在画板"),e.a(2);case 1:return t.setInOutput(!0),e.p=2,e.n=3,_a(t.documentName,t.selectArtboards,t.exportScale);case 3:e.n=5;break;case 4:e.p=4,n=e.v,t.showTextTip(n);case 5:return e.p=5,t.setInOutput(!1),e.f(5);case 6:return e.a(2)}}),e,null,[[2,4,5,6]])})))()}},computed:{previewScaleSelectOptions:function(){var t=this.exportScale,e=[{value:1,name:"2x",selected:1===t,disabled:!1}];return this.inCloudMode&&(e.push({value:.5,name:"1x",selected:.5===t,disabled:!1}),Qr.supportPreviewHD(this.cloudVersion)&&e.unshift({value:2,name:"4x",selected:2===t,disabled:!1,title:"若导出时未勾选「高清导出」,将使用@2x预览图放大后保存"})),e},allSelected:function(){return 0!==this.exportNodeCount&&this.exportNodeCount===this.selectNodeCount},selectNodeCount:function(){var t=0;return this.renderDocumentArtboards.forEach((function(e){e.mlUserSelectDown&&(t+=1)})),t},selectArtboards:function(){var t=this.renderDocumentArtboards,e=[];return t.forEach((function(t){t.mlUserSelectDown&&e.push(t.artboard)})),e},exportNodeCount:function(){return this.renderDocumentArtboards.length}},data:function(){return{exportScale:1}},created:function(){var t=1;if(this.inCloudMode)switch(t=Object(c["F"])("artboard.previews.scale",!1),t){case"0.5":case"2":case"1":t=parseFloat(t);break;default:t=1;break}this.exportScale=t}},bh=ph,gh=(n("c768"),Object(Gr["a"])(bh,nh,ih,!1,null,"c972f98c",null)),wh=gh.exports,yh=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"menu",staticClass:"fileitem-contextmenu",style:t.menuStyle,on:{contextmenu:function(e){return e.preventDefault(),t.hideContextmenu.apply(null,arguments)}}},[t.canOnlineView?e("div",{on:{click:function(e){return t.clickNetDiskFile(t.file,!0)}}},[t._v("查看详情")]):t._e(),t.supportFileVersionList?e("ContextmenuFileVersion",{attrs:{file:t.file},on:{setInConfirm:t.setInConfirm,setNotCloseThisTime:t.setNotCloseThisTime,onFileRemoved:t.onFileRemoved}}):t._e(),e("div",{on:{click:function(e){return t.copyNetdiskFileViewUrl(t.file)}}},[t._v("复制链接")]),e("div",{on:{click:function(e){return t.clickDownloadNetDiskFile(t.file)}}},[t._v("下载文件")]),t.isUrlFile?e("div",{class:{off:t.fileReadOnly},on:{click:t.clickEditNetDiskLink}},[t._v("编辑链接")]):t._e(),e("div",{class:{off:t.fileReadOnly},on:{click:t.clickFileReName}},[t._v("重命名")]),e("div",{class:{light:!0,off:t.fileReadOnly},on:{click:t.clickRemoveItem}},[t._v("删除")])],1):t._e()},kh=[],Ch=function(){var t=this,e=t._self._c;return t.fileSecId?e("div",{staticClass:"artboard-version-info",class:{on:t.listVisible,"in-left":t.listLocation.inLeft,"in-bottom":t.listLocation.inBottom},on:{mouseenter:function(e){return t.setVisible(!0)},mouseleave:function(e){return t.setVisible(!1)}}},[e("div",{staticClass:"btn-file-verison",on:{click:function(e){return t.clickMenu()}}},[t._v("历史版本")]),e("FileVersionList",{ref:"list",attrs:{visible:t.listVisible,readonlyCurrentFolder:t.fileReadOnly,fileInfo:t.fileInfo,curVerId:t.curVerId,versionCount:t.fileVersionCount,fetchState:t.fetchState,errorText:t.errorText},on:{verRemoved:t.verRemoved,clickVerItem:t.clickVerItem,setInConfirm:t.setInConfirm}})],1):t._e()},xh=[],Sh=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"file-version-list",on:{click:function(e){t.notClickClose=!0}}},[t.isError?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取版本信息...",errorText:t.errorText,isLoading:t.fetching,isError:t.isError,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t.fetching||t.fileInfo?[e("div",{staticClass:"base"},[e("div",{staticClass:"tab"},[t._v("最新版本")]),e("FileVersionItem",{attrs:{fetching:t.fetching,readonlyCurrentFolder:t.readonlyCurrentFolder,verData:t.mainFile,selected:t.lastVersionSelected},on:{clickRemoveVerItem:t.clickRemoveVerItem,clickVerItem:t.clickVerItem}}),e("div",{staticClass:"tab",domProps:{textContent:t._s("历史版本".concat(t.fetching?"":"(".concat(t.histories.length,")")))}})],1),t.histories.length>0?e("div",{staticClass:"list"},[e("LazyList",{ref:"lazyList",attrs:{list:t.histories,lineHeight:t.itemLineHeight},scopedSlots:t._u([{key:"default",fn:function(n){return t.fetching||n.item?e("FileVersionItem",{key:n.item?"".concat(n.item.verId,":").concat(n.item.viewUrl):"index:".concat(n.index),attrs:{fetching:t.fetching,readonlyCurrentFolder:t.readonlyCurrentFolder,verData:n.item,selected:n.item&&t.curVerId===n.item.verId},on:{clickRemoveVerItem:t.clickRemoveVerItem,clickVerItem:t.clickVerItem}}):t._e()}}],null,!0)})],1):e("div",{staticClass:"empty"})]:t._e()],2):t._e()},Th=[],Oh=function(){var t=this,e=t._self._c;return e("div",{ref:"lazyList",staticClass:"common-lazy-list",on:{scroll:t.onBoxScroll}},[e("div",{staticClass:"real-height",style:{height:t.boxRealHeight}},[e("div",{staticClass:"front",style:t.frontStyle},[t._l(t.showList,(function(e,n){return t._t("default",null,{index:n,realIndex:e.realIndex,item:e.item})}))],2)])])},Ih=[],Ah={methods:{scrollToTop:function(){var t=this.$refs.lazyList;if(!t)return!1;t.scrollTop=0},scrollTo:function(t){if("function"!==typeof t)return!1;var e=this.list,n=this.$refs.lazyList,i=this.lineHeight,r=this.boxHeight,o=this.boxScrollTop;if(!n)return!1;var a=e.findIndex(t);if(-1===a)return!1;var s=i*a,c=(new w).set(0,o,100,r),l=(new w).set(0,s,100,i);return c.isContans(l)||(s-=r/2-i/2,n.scrollTop=s),!0},resetBoxData:function(){var t=this;this.$nextTick((function(){var e=t.$refs.lazyList;e&&(t.boxHeight=e.offsetHeight,t.boxScrollTop=e.scrollTop)}))},onBoxScroll:function(){var t=this.$refs.lazyList;t&&(this.boxScrollTop=t.scrollTop)}},computed:{boxRealHeight:function(){return this.list.length*this.lineHeight+2+"px"},frontStyle:function(){var t=this.showList,e=this.lineHeight,n=0;return t.length>0&&(n=t[0].realIndex*e),{"margin-top":n+"px"}},showList:function(){var t=this.list,e=this.preloadCount,n=this.lineHeight,i=this.boxScrollTop,r=this.boxHeight,o=e*n,a=new w,s=(new w).set(0,i-o,100,r+2*o);return t.map((function(t,e){return a.set(0,e*n,100,n),O(a,s)?{item:t,realIndex:e}:null})).filter((function(t){return null!=t}))},winRectChangeKey:function(){var t=this.winRect;return"".concat(t.width,"x").concat(t.height)},winRect:function(){return this.$store.state.winRect}},watch:{winRectChangeKey:function(){this.resetBoxData()}},mounted:function(){this.resetBoxData()},beforeDestroy:function(){},props:{list:Array,lineHeight:Number,preloadCount:{type:Number,default:1}},data:function(){return{boxScrollTop:0,boxHeight:0}}},Fh=Ah,jh=(n("0eb7"),Object(Gr["a"])(Fh,Oh,Ih,!1,null,"1c34f551",null)),_h=jh.exports,Mh=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-version-item",class:{on:t.selected,"skeleton-loading":t.fetching},attrs:{title:t.userFaceTitle},on:{click:t.clickItem}},[e("div",{staticClass:"date skeleton-sub-r",domProps:{textContent:t._s(t.dateStr)}}),e("div",{staticClass:"user"},[t.fetching?e("div",{staticClass:"userface skeleton-sub-r"}):t._e(),e("div",{staticClass:"name skeleton-sub-r",domProps:{textContent:t._s(t.userNickName)}})]),e("div",{staticClass:"ver skeleton-sub-r",domProps:{textContent:t._s(t.verId)}}),t.cloudIsLogin?e("div",{staticClass:"btn-del",class:{off2:!t.canRemove},attrs:{title:t.canRemove?"删除该版本":t.userCanEdit?"您没有权限删除该版本":"您没有权限删除其他成员提交的文件版本"},on:{click:t.clickDelVer}}):t._e()])},Lh=[],Ph={methods:{clickDelVer:function(){this.$emit("clickRemoveVerItem",this.verData)},clickItem:function(t){var e;null!==(e=t.target)&&void 0!==e&&e.classList.contains("btn-del")||this.$emit("clickVerItem",this.verData)}},computed:{userCanEdit:function(){var t;return this.cloudUserIsDesigner||(null===(t=this.verData)||void 0===t?void 0:t.updaterId)===this.cloudUserId},canRemove:function(){var t=this.fetching,e=this.cloudIsLogin,n=this.readonlyCurrentFolder;return!(!e||t)&&(!n&&this.userCanEdit)},verId:function(){var t=this.verData,e=this.fetching;if(e)return" ";if(!t)return"";var n=t.verId,i=t.lastVersionId;return null!==n&&void 0!==n||(n=i),n>0?"#".concat(n):"null"},dateStr:function(){var t=this.verData,e=this.fetching;return e?" ":Object(l["b"])(t.updateTimeTimes,this.webViewStateTimes)},userFaceTitle:function(){var t=this.verData,e=this.fetching;return e?" ":t?pi(t):null},userNickName:function(){var t=this.verData,e=this.fetching;if(e)return" ";if(!t)return"-";var n=t.updaterName;return n||"-"}},props:{readonlyCurrentFolder:Boolean,verData:Object,selected:Boolean,fetching:Boolean}},Dh=Ph,Nh=(n("273d"),Object(Gr["a"])(Dh,Mh,Lh,!1,null,"307b60a4",null)),Eh=Nh.exports,Rh={components:{FileVersionItem:Eh,LazyList:_h,NetworkLoading:Iu},methods:{setInConfirm:function(t){this.inConfirm=t,this.$emit("setInConfirm",t)},clickReload:function(){this.artboardDetail.refreshDataTicks=Date.now()},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.inConfirm||(t.notClickClose?t.notClickClose=!1:t.setVisible(!1))}),50)},confirmAction:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:return e.setInConfirm(!0),n.n=1,t();case 1:return r=n.v,n.n=2,Object(c["pb"])(30);case 2:return e.setInConfirm(!1),n.a(2,r)}}),n)})))()},clickRemoveVerItem:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var o,a,s,u,d,h,f,m,v,p,b,g;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(t){n.n=1;break}return n.a(2);case 1:return o=e.readonlyCurrentFolder,a=e.cloudUserIsDesigner,s=e.cloudUserId,u=t.verId,d=t.viewUrl,h=t.parentId,f=t.updaterId,n.p=2,n.n=3,e.checkLoginThrow();case 3:if(n.v){n.n=4;break}return n.a(2);case 4:if(a||f===s){n.n=5;break}return e.showTextTip("您没有权限删除其他成员提交的文件版本"),n.a(2);case 5:if(!o){n.n=6;break}return n.a(2,e.showTextTip("您没有权限删除文件版本#".concat(u)));case 6:return e.setInConfirm(!1),n.n=7,e.confirmAction(Object(r["a"])(Object(i["a"])().m((function t(){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.confirm({text:"确认要删除文件版本 #".concat(u," 吗?")});case 1:return t.a(2,t.v)}}),t)}))));case 7:return n.n=8,n.v;case 8:if(n.v){n.n=9;break}return n.a(2);case 9:return v=new FormData,p=Object(c["E"])(d),v.append("secId",p),v.append("verId",u),v.append("parentId",h),n.n=10,e.fetchPostCloudApi("removefileverbyweb",{body:v});case 10:if(b=n.v,Object(l["k"])(b)){n.n=11;break}throw new Error("返回值异常:".concat(b));case 11:if(b.success){n.n=12;break}throw new Error(b.errMsg);case 12:e.showTextTip(null!==(m=b.errMsg)&&void 0!==m?m:"文件版本#".concat(u," 已删除")),e.$emit("verRemoved",p,u),Zi(qi.SPACE.filedetail,p),e.$store.commit("autoGetFolderPrecisKey"),n.n=14;break;case 13:n.p=13,g=n.v,e.showTextTip(g);case 14:return n.a(2)}}),n,null,[[2,13]])})))()},clickVerItem:function(t){this.$emit("clickVerItem",t)},scrollToSelectFileVer:function(){var t,e=this.curVerId,n=this.lastVersionSelected,i=this.fetching;!i&&!n&&e>0&&(null===(t=this.$refs.lazyList)||void 0===t||t.scrollTo((function(t){return(null===t||void 0===t?void 0:t.verId)===e})))},setVisible:function(t){this.$emit("setVisible",t)}},beforeDestroy:function(){this.setVisible(!1),window.removeEventListener("click",this.closeSelf,!0),clearTimeout(this.closeHandle)},watch:{visible:function(t){var e=this;t?(requestAnimationFrame((function(){e.$nextTick((function(){e.scrollToSelectFileVer()}))})),window.addEventListener("click",this.closeSelf,!0)):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},computed:{fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error},artboardDetail:function(){return this.$store.state.artboardDetail},lastVersionSelected:function(){var t=this.mainFile,e=this.curVerId;return e>0&&e===(null===t||void 0===t?void 0:t.verId)},mainFile:function(){var t;return this.fetching?null:null===(t=this.fileInfo)||void 0===t?void 0:t.file},histories:function(){var t,e;return this.fetching?this.versionCount>1?[null]:[]:null!==(t=null===(e=this.fileInfo)||void 0===e?void 0:e.historyFiles)&&void 0!==t?t:[]},itemLineHeight:function(){return 85}},data:function(){return{notClickClose:!1,closeHandle:0,inConfirm:!1}},created:function(){},props:{versionCount:{type:Number,default:0},readonlyCurrentFolder:Boolean,curVerId:Number,fetchState:Number,errorText:{validator:function(){return!0}},fileInfo:[Object,null],visible:Boolean}},Vh=Rh,Bh=(n("154a"),Object(Gr["a"])(Vh,Sh,Th,!1,null,"62ee3e16",null)),Hh=Bh.exports,Uh={components:{FileVersionList:Hh},methods:{setInConfirm:function(t){this.inConfirm=t,this.$emit("setInConfirm",t)},clickMenu:function(){this.setVisible(!0),this.setNotCloseThisTime(!0)},setNotCloseThisTime:function(t){this.$emit("setNotCloseThisTime",t)},onFileRemoved:function(t){this.$emit("onFileRemoved",t)},verRemoved:function(t,e){if(e>0){var n=this.fileInfo,i=this.file;if(n){var r,o=Object(c["E"])(null===(r=n.file)||void 0===r?void 0:r.viewUrl);if(o===t){var a,s,l=n.file,u=n.historyFiles;if(l.verId===e){var d;if(0===(null!==(d=null===u||void 0===u?void 0:u.length)&&void 0!==d?d:0))return void this.onFileRemoved(t);l=n.file=null===u||void 0===u?void 0:u[0]}else{var h,f=null!==(h=null===u||void 0===u?void 0:u.find((function(t){return t.verId===e})))&&void 0!==h?h:-1;if(-1===f)return;u.splice(f,1)}l.versionCount=1+(null!==(a=null===u||void 0===u?void 0:u.length)&&void 0!==a?a:0);var m=Object(c["E"])(null===i||void 0===i?void 0:i.viewUrl);m===t&&e===(null!==(s=i.lastVersionId)&&void 0!==s?s:i.verId)&&(["fileSize","verId","fileSize","fileType","previewImage","updateTimeTimes","updaterId","updaterName","versionCount"].forEach((function(t){i[t]=l[t]})),i.lastVersionId=i.verId)}}}},clickVerItem:function(t){t&&this.clickNetDiskFile(t,!0)},setVisible:function(t){this.listVisible=t},reloadHistoryList:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,u,d,h,f,m,v,p,b;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.fileSecId,r=t.fileUpdateTimes,o=t.fileVersionCount,a=t.fetchState,s=t.curFetchKey,u=t.fetchKey,n){e.n=1;break}return e.a(2);case 1:if(a!==c["a"].Fetching||s!==u){e.n=2;break}return e.a(2);case 2:if(t.fetchKey=s,t.fetchState=c["a"].Fetching,t.errorText=null,e.p=3,m=tr(qi.SPACE.filedetail,n),!(m&&r>0&&(null===(d=m.file)||void 0===d?void 0:d.updateTimeTimes)===r&&o>0&&(null===(h=m.file)||void 0===h?void 0:h.versionCount)===o)){e.n=4;break}return t.fileInfo=m,e.a(2);case 4:return v=new FormData,v.append("secid",n),e.n=5,t.fetchPostCloudApi("GetNetDiskFileDataByWeb",{body:v});case 5:if(p=e.v,p.success){e.n=6;break}throw new Error(null!==(f=p.errMsg)&&void 0!==f?f:"请求发生错误");case 6:if(p=p.data,Object(l["k"])(p)){e.n=7;break}throw new Error("返回值异常:".concat(p));case 7:ki(p),t.fetchKey===t.curFetchKey&&(t.fileInfo=p,Qi(qi.SPACE.filedetail,n,p,6e4)),e.n=9;break;case 8:e.p=8,b=e.v,t.fetchKey===t.curFetchKey&&(t.errorText=b,t.fetchState=c["a"].Error);case 9:return e.p=9,t.fetchState===c["a"].Fetching&&t.fetchKey===t.curFetchKey&&(t.fetchState=c["a"].Success),e.f(9);case 10:return e.a(2)}}),e,null,[[3,8,9,10]])})))()},resetLocation:function(){var t=this,e=this.listVisible,n=this.listLocation;e&&(n.inLeft=!1,n.inBottom=!1,this.$nextTick((function(){var e=t.$refs.list,n=t.listLocation;if(e){var i=e.$el;if(i){var r=i.getBoundingClientRect(),o=window,a=o.innerWidth,s=o.innerHeight,c=a-r.width-3,l=s-r.height-3;r.x>c&&(n.inLeft=!0),r.y>l&&(n.inBottom=!0)}}})))}},computed:{resetLocationKey:function(){var t=this.fetchState,e=this.listVisible;return e?"".concat(t):null},curFetchKey:function(){var t=this.fileSecId,e=this.fileUpdateTimes;return t?"".concat(t,":").concat(e):null},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},fileUpdateTimes:function(){var t;return null!==(t=this.file.updateTimeTimes)&&void 0!==t?t:0},fileVersionCount:function(){var t;return null!==(t=this.file.versionCount)&&void 0!==t?t:0},fileSecId:function(){var t;return Object(c["E"])(null===(t=this.file)||void 0===t?void 0:t.viewUrl)},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!0}return!1},fileReadOnly:function(){return this.cloudNotSupportEdit||!this.canChangeFile},cloudNotSupportEdit:function(){return Qr.notSupportNetDiskFileWebUpload(this.cloudVersion)},artboardDetail:function(){return this.$store.state.artboardDetail},curVerId:function(){return-1},refreshKey:function(){var t=this.listVisible,e=this.fileSecId;return t&&e?"".concat(e,":").concat(t):null}},watch:{refreshKey:function(t){t&&this.reloadHistoryList()},resetLocationKey:function(t){var e=this;t&&this.$nextTick((function(){e.resetLocation()}))}},beforeDestroy:function(){this.listVisible=!1},created:function(){},props:{file:Object},data:function(){return{listVisible:!1,listLocation:{inLeft:!1,inBottom:!1},fetchState:c["a"].Normal,fetchKey:"",errorText:null,fileInfo:null,inConfirm:!1}}},Gh=Uh,Wh=(n("ae76"),Object(Gr["a"])(Gh,Ch,xh,!1,null,"5e886e76",null)),$h=Wh.exports,zh={components:{ContextmenuFileVersion:$h},methods:{setInConfirm:function(t){this.confirming=t},setNotCloseThisTime:function(t){this.notCloseThisTime=t?Date.now():0},clickEditNetDiskLink:function(){var t,e=this.linkbox,n=this.file,i=this.cloudNotSupportEdit,r=this.cloudVersion,o=this.userCanEdit,a=this.fileReadOnly;n&&(i?this.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(r,"),请先升级私有云部署包")):o?a?this.showTextTip("您没有权限编辑当前文件夹中的链接"):(e.data={id:n.id,link:null!==(t=n.webLoc)&&void 0!==t?t:"",name:n.fileName,parentId:n.parentId,secId:Object(c["E"])(n.viewUrl)},e.visible=!0):this.showTextTip("您无法编辑其他成员提交的网盘链接"))},clickRemoveItem:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,l;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(n=t.file,r=t.cloudNotSupportEdit,o=t.userCanEdit,a=t.cloudVersion,s=t.fileReadOnly,n){e.n=1;break}return e.a(2);case 1:if(!r){e.n=2;break}return t.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(a,"),请先升级私有云部署包")),e.a(2);case 2:if(o){e.n=3;break}return t.showTextTip("您没有权限删除其他成员提交的文件"),e.a(2);case 3:if(!s){e.n=4;break}return t.showTextTip("您没有权限删除文件「".concat(n.name,"」")),e.a(2);case 4:return e.n=5,t.confirm({title:"删除确认",text:"确认要删除文件「".concat(n.name,"」吗?")});case 5:if(e.v){e.n=6;break}return e.a(2);case 6:return l=Object(c["E"])(n.viewUrl),e.n=7,t.removeCloudItem({parentId:t.cloudCurrentFolderId,fileSecId:l});case 7:if(!e.v){e.n=8;break}t.onFileRemoved(l);case 8:return e.a(2)}}),e)})))()},onFileRemoved:function(t){var e=this.cloudSubFiles,n=e.findIndex((function(e){return Object(c["E"])(e.viewUrl)===t}));-1!==n&&e.splice(n,1);var i=this.file,r=this.visible;if(r){var o=Object(c["E"])(null===i||void 0===i?void 0:i.viewUrl);o===t&&(this.fileContextMenuData.visible=!1,this.notCloseThisTime=0)}},clickFileReName:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,u,d,h,f;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.file,r=t.cloudNotSupportEdit,o=t.userCanEdit,a=t.cloudVersion,s=t.fileReadOnly,n){e.n=1;break}return e.a(2);case 1:if(!r){e.n=2;break}return t.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(a,"),请先升级私有云部署包")),e.a(2);case 2:if(o){e.n=3;break}return t.showTextTip("您没有权限重命名其他成员提交的文件"),e.a(2);case 3:if(!s){e.n=4;break}return t.showTextTip("您没有权限重命名当前文件夹中的文件"),e.a(2);case 4:return e.p=4,e.n=5,t.prompt({title:"重命名文件",text:n.fileName,placeholder:"请输入新的文件名",beforeYes:function(e){return!!Object(l["j"])(e.trim())&&(!/[\\/:*?"<>|]/.test(e)||(t.showTextTip("文件名含有非法字符,请修正文件名"),!1))},maxLength:256,noText:"取消",yesText:"确认"});case 5:u=e.v.trim(),e.n=7;break;case 6:return e.p=6,e.v,e.a(2);case 7:if(e.p=7,Object(l["j"])(u)){e.n=8;break}throw new Error("请输入新的文件名");case 8:if(u!==n.fileName){e.n=9;break}throw"文件名无变更";case 9:return d=new FormData,d.append("secId",Object(c["E"])(n.viewUrl)),d.append("fileName",u),e.n=10,t.fetchPostCloudApi("netdiskfilerenamebyweb",{timeout:1e4,body:d});case 10:if(h=e.v,Object(l["k"])(h)){e.n=11;break}throw new Error("返回值异常,无法解析数据:".concat(h));case 11:if(h.success){e.n=12;break}throw new Error(h.errMsg);case 12:t.showTextTip("文件「".concat(u,"」重命名成功")),h=h.data,t.$store.commit("setFolderSubFile",{files:[h.data],folderUpdateTimes:h.folderUpdateTimes}),e.n=14;break;case 13:e.p=13,f=e.v,t.showTextTip(f);case 14:return e.a(2)}}),e,null,[[7,13],[4,6]])})))()},checkLocaltionLater:function(t){if(this.visible&&(!this.locFixing||t)){this.setNotCloseThisTime(!0);var e=this.x,n=this.y,i=this.fileContextMenuData,r=this.boxSize,o=window.innerWidth,a=window.innerHeight,s=3,c=3,l=o-r.width-3,u=a-r.height-3;e>l?(this.locFixing=!0,i.x=l):e<s&&(this.locFixing=!0,i.x=s),n>u&&(this.locFixing=!0,i.y=u),n<c&&(this.locFixing=!0,i.y=c)}},hideContextmenu:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if("mouseup"!==t.type||2!==t.button){n.n=1;break}return n.a(2);case 1:return clearTimeout(e.handle),n.n=2,Object(c["pb"])(1);case 2:if(!e.confirming){n.n=3;break}return n.a(2);case 3:if(!(Date.now()-e.notCloseThisTime<30)){n.n=4;break}return e.notCloseThisTime=0,n.a(2);case 4:e.handle=setTimeout((function(){e.fileContextMenuData.visible=!1}),120);case 5:return n.a(2)}}),n)})))()},resetBoxSize:function(){var t=this;this.visible&&this.$nextTick((function(){var e=t.$refs.menu,n=t.boxSize;if(e){var i=e.getBoundingClientRect();n.width=i.width,n.height=i.height}}))}},watch:{"boxSize.height":function(){this.checkLocaltionLater(!0)},canOnlineView:function(){this.resetBoxSize()},x:function(){clearTimeout(this.handle),this.checkLocaltionLater()},y:function(){clearTimeout(this.handle),this.checkLocaltionLater()},file:function(t){null!=t&&clearTimeout(this.handle)},visible:function(t){t?(clearTimeout(this.handle),this.setNotCloseThisTime(!0),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0),this.resetBoxSize()):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))},locFixing:function(t){var e=this;clearTimeout(this.locFixingHandle),t&&(this.locFixingHandle=setTimeout((function(){e.locFixing=!1}),50))}},beforeDestroy:function(){clearTimeout(this.handle),clearTimeout(this.locFixingHandle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)},mounted:function(){this.visible&&(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)),this.resetBoxSize(),this.checkLocaltionLater()},props:{fileContextMenuData:Object},data:function(){return{handle:0,locFixing:!1,locFixingHandle:0,boxSize:{width:0,height:0},confirming:!1,notCloseThisTime:!1}},computed:{supportFileVersionList:function(){return!Qr.notSupportNetDiskFileVersion(this.cloudVersion)},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!0}return!1},netdiskUploader:function(){return this.$store.state.netdiskUploader},linkbox:function(){return this.netdiskUploader.linkbox},isUrlFile:function(){return this.file.fileType===a["L"].Url},canOnlineView:function(){return this.isNetdiskFileCanOnlineView(this.file)},visible:function(){return this.fileContextMenuData.visible&&this.file},file:function(){return this.fileContextMenuData.file},x:function(){return this.fileContextMenuData.x},y:function(){return this.fileContextMenuData.y},fileReadOnly:function(){return!this.userCanEdit||this.cloudNotSupportEdit||!this.canChangeFile},userCanEdit:function(){return this.cloudUserIsDesigner||this.file.updaterId===this.cloudUserId},cloudNotSupportEdit:function(){return Qr.notSupportNetDiskFileWebUpload(this.cloudVersion)},menuStyle:function(){return{top:this.y+"px",left:this.x+"px"}}}},Yh=zh,Xh=(n("2317"),Object(Gr["a"])(Yh,yh,kh,!1,null,"49985046",null)),Kh=Xh.exports,qh=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"menu",staticClass:"folderitem-contextmenu",style:t.menuStyle,on:{contextmenu:function(t){t.preventDefault()}}},[e("div",{class:{off:!t.supportRecents},domProps:{textContent:t._s(t.isFavoriteFolder?"取消收藏":"收藏")},on:{click:function(e){return t.clickFolderFavorite(t.folder)}}}),e("div",{on:{click:function(e){return t.clickGoFolder(t.folder)}}},[t._v("打开文件夹")]),e("div",{on:{click:function(e){return t.copyViewUrl(t.folder)}}},[t._v("复制链接")])]):t._e()},Jh=[],Qh={methods:{clickFolderFavorite:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(t){n.n=1;break}return n.a(2);case 1:if(!t.fetching){n.n=2;break}return n.a(2);case 2:if(e.supportRecents){n.n=3;break}return n.a(2,e.showTextTip("私有云部署包版本「".concat(e.cloudVersion,"」过低,请先升级私有云部署包")));case 3:return t.fetching=!0,t.loadingText=t.customStatus===a["q"].Favorite?"取消收藏中...":"收藏文件夹中...",n.p=4,n.n=5,e.setUserFavoriteFolder(t,t.customStatus===a["q"].Favorite?a["q"].None:a["q"].Favorite);case 5:r=n.v,r&&(t.customStatus=r.status,t.customStatusUpdateTimes=r.updateTimes,e.$store.commit("refreshRecents",a["Y"].FavoriteFolder)),n.n=7;break;case 6:n.p=6,o=n.v,-1===(null===o||void 0===o?void 0:o.toString().indexOf(" aborted "))&&e.showTextTip(o);case 7:return n.p=7,t.fetching=!1,n.f(7);case 8:return n.a(2)}}),n,null,[[4,6,7,8]])})))()},checkLocaltionLater:function(t){if(this.visible&&(!this.locFixing||t)){var e=this.x,n=this.y,i=this.folderContextMenuData,r=this.boxSize,o=window.innerWidth,a=window.innerHeight,s=3,c=3,l=o-r.width-3,u=a-r.height-3;e>l?(this.locFixing=!0,i.x=l):e<s&&(this.locFixing=!0,i.x=s),n>u&&(this.locFixing=!0,i.y=u),n<c&&(this.locFixing=!0,i.y=c)}},clickGoFolder:function(t){Object(c["P"])(t.id)},copyViewUrl:function(t){var e=Object(c["A"])(t.id,!0);Object(c["p"])(e)?this.showTextTip("链接已复制到剪切板"):this.showTextTip("链接复制到剪切板失败")},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.folderContextMenuData.visible=!1}),120))},resetBoxSize:function(){var t=this;this.visible&&this.$nextTick((function(){var e=t.$refs.menu,n=t.boxSize;if(e){var i=e.getBoundingClientRect();n.width=i.width,n.height=i.height}}))}},watch:{"boxSize.height":function(){this.checkLocaltionLater(!0)},x:function(){clearTimeout(this.handle),this.checkLocaltionLater()},y:function(){clearTimeout(this.handle),this.checkLocaltionLater()},folder:function(t){null!=t&&clearTimeout(this.handle)},visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0),this.resetBoxSize()):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))},locFixing:function(t){var e=this;clearTimeout(this.locFixingHandle),t&&(this.locFixingHandle=setTimeout((function(){e.locFixing=!1}),50))}},beforeDestroy:function(){clearTimeout(this.handle),clearTimeout(this.locFixingHandle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)},mounted:function(){this.visible&&(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)),this.resetBoxSize(),this.checkLocaltionLater()},props:{folderContextMenuData:Object},data:function(){return{handle:0,locFixing:!1,locFixingHandle:0,boxSize:{width:0,height:0}}},computed:{supportRecents:function(){return!Qr.notSupportRecentData(this.cloudVersion)},isFavoriteFolder:function(){return this.folder.customStatus===a["q"].Favorite},visible:function(){return this.folderContextMenuData.visible&&this.folder},folder:function(){return this.folderContextMenuData.folder},x:function(){return this.folderContextMenuData.x},y:function(){return this.folderContextMenuData.y},menuStyle:function(){return{top:this.y+"px",left:this.x+"px"}}}},Zh=Qh,tf=(n("81ab"),Object(Gr["a"])(Zh,qh,Jh,!1,null,"918d6a66",null)),ef=tf.exports,nf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item max",class:t.itemClass,attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},click:function(e){return t.clickGoFolder(t.folder)}}},[t.hasMultPreview?e("div",{staticClass:"imgs"},t._l(t.folder.pathPreviews,(function(t,n){return e("FolderItemIcon",{key:n,attrs:{pathPreview:t,mini:!0}})})),1):t.hasPreview?e("div",{staticClass:"img"},[e("FolderItemIcon",{attrs:{pathPreview:t.folder.pathPreviews[0],mini:!1}})],1):t._e(),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("div",{staticClass:"name-info"},[t.isFavoriteFolder?e("div",{staticClass:"fav",attrs:{title:"已收藏"}}):t._e(),e("div",{staticClass:"t",domProps:{textContent:t._s(t.folder.name)}})]),t.isFolderSharePrivateCode?e("div",{staticClass:"lock-max"}):t._e(),t.isFolderShareSpecifyMembers?e("div",{staticClass:"share-sm-max"}):t._e()]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},rf=[],of=function(){var t=this,e=t._self._c;return t.isNetDiskIcon?e("div",{staticClass:"preview folder-fileicon",class:{max:!t.mini}},[e("div",{staticClass:"img icon-netdiskfile",class:t.iconCls})]):e("ArtboardPreviewImg",{attrs:{pathPreview:t.pathPreview,imgHeight:0}})},af=[],sf={components:{ArtboardPreviewImg:Wu},computed:{iconCls:function(){return a["L"].getName(this.netdiskFileType,this.mini?a["M"].Normal:a["M"].Big)},netdiskFileType:function(){var t=this.pathPreview;if(!Object(l["j"])(t))return null;var e=/^netdisk:\/\/(\d+)\//.exec(t);return e?+e[1]:null},isNetDiskIcon:function(){return"number"===typeof this.netdiskFileType}},props:{pathPreview:String,mini:Boolean}},cf=sf,lf=(n("5c3c"),Object(Gr["a"])(cf,of,af,!1,null,"4628005e",null)),uf=lf.exports,df={components:{FolderItemIcon:uf},methods:{onContextmenu:function(t){this.$emit("contextMenuFolder",t,this.folder)},clickGoFolder:function(t){Object(c["P"])(t.id)}},computed:{isFavoriteFolder:function(){return this.folder.customStatus===a["q"].Favorite},useTimeSort:function(){return this.$store.state.cloudListSort.sortType===a["n"].Date},info:function(){var t=this.folder.updateTimes,e=this.folder,n=this.useTimeSort,i=this.webViewStateTimes;return n?Object(l["b"])(t,i):"共".concat(li(e),"项")},isFolderSharePrivateCode:function(){return this.folder.shareMode===a["v"].PrivateCode},isFolderShareSpecifyMembers:function(){return this.folder.shareMode===a["v"].SpecifyMembers},itemClass:function(){var t=this.folder,e=this.isFolderSharePrivateCode,n=this.isFolderShareSpecifyMembers,i={};if(e?i.private=1:n&&(i["share-sm"]=1),null!=t.color){var r=a["t"].getName(t.color);r&&(i[r]=1)}return i},title:function(){return ci(this.folder)},hasPreview:function(){var t=this.folder;return Object(l["i"])(t.pathPreviews)&&t.pathPreviews.length>0},hasMultPreview:function(){var t=this.folder;return this.hasPreview&&0===t.previewArtboardId&&t.pathPreviews.length>1}},props:{folder:Object,isSupportNetDiskFile:Boolean}},hf=df,ff=(n("7226"),Object(Gr["a"])(hf,nf,rf,!1,null,"517f9f82",null)),mf=ff.exports,vf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item max",class:{"non-mask":t.isLottieFile},attrs:{title:t.itemTitle},on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},mouseenter:function(e){t.mouseenter=!0},mouseleave:t.onMouseOutImg}},[e("div",{ref:"img",staticClass:"img",class:{mini:t.isMiniImage,lottie:t.isLottieFile,mouseenter:t.mouseenter,lottieloading:t.lottieLoading},on:{click:function(e){return t.clickNetDiskFile(t.file)}}},[0===t.imgSize.width&&0===t.imgSize.height?e("div",{staticClass:"icon-netdiskfile",class:t.iconCls}):t._e(),t.imgVisible?e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.file.previewImage},on:{resize:t.onPreviewImgResize}}):t._e(),t.isLottieFile?e("div",{ref:"lottiebox",staticClass:"lottie-box"}):t._e()],1),t.imgVisible&&t.thumbImgVisible?e("div",{directives:[{name:"show",rawName:"v-show",value:t.mouseenter,expression:"mouseenter"}],staticClass:"thumbimg",style:t.thumbImgStyle,on:{mouseenter:function(e){t.mouseInThumb=!0},mouseleave:function(e){t.mouseInThumb=!1},mousemove:t.onMouseMoveImg}},[e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.file.previewImage}})],1):t._e(),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("span",{staticClass:"pre"},[e("span",[t._v(t._s(t.file.fileName))])]),e("span",{staticClass:"ext"},[t._v(t._s(t.fileExt))])]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},pf=[],bf={components:{ArtboardPreviewImg:Wu},methods:{onPreviewImgResize:function(t,e){var n=this.imgSize;n.width=t,n.height=e},onMouseOutImg:function(){this.imgScrollTop=0,this.mouseenter=!1},onMouseMoveImg:function(t){var e=this.file;if(e&&this.viewHeight>0&&this.viewHeight<this.viewRealHeight){var n=t.layerY,i=n/this.thumbViewHeight,r=.2,o=.2;i=i<=r?0:i>=1-o?1:(i-r)/(1-o-r);var a=this.viewRealHeight-this.viewHeight,s=Math.round(i*a);this.imgScrollTop=s}},onContextmenu:function(t){this.$emit("contextMenuFile",t,this.file)},initLottie:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(t.isLottieFile){e.n=1;break}return e.a(2);case 1:if(!t.lottieLoading&&!t.lottie){e.n=2;break}return e.a(2);case 2:return t.lottieLoadState=c["a"].Fetching,e.p=3,e.n=4,ju.get(t.$refs.lottiebox,t.file);case 4:n=e.v,r=n.lottie,t.lottie=r,t.lottieLoadState=c["a"].Success,e.n=6;break;case 5:e.p=5,e.v,t.lottieLoadState=c["a"].Error;case 6:return e.a(2)}}),e,null,[[3,5]])})))()}},watch:{"file.updateTimeTimes":function(t){if(t){ju.remove(this.file);var e=this.lottie;e&&(e.destroy(),this.lottie=null),this.lottieLoadState=c["a"].Normal,this.mouseenter&&this.initLottie()}},mouseenter:function(t){var e=this.lottie;t?e?e.play():this.initLottie():null===e||void 0===e||e.stop()},imgScrollTop:function(t){var e=this.$refs.img;e&&e.scrollTo({top:t,behavior:0===t?"smooth":"instant"})}},computed:{info:function(){return hi(this.file,this.webViewStateTimes)},lottieLoading:function(){return this.lottieLoadState===c["a"].Fetching},lottieLoadSuccess:function(){return this.lottieLoadState===c["a"].Success},isLottieFile:function(){var t=this.file,e=t.fileType;return e===a["L"].Lottie},imgVisible:function(){var t=this.fileRect,e=this.viewRect;return!!window||!(!t||!e)&&t.isOverlap(e)},fileExt:function(){var t,e,n=this.file;if(!n)return null;var i=null!==(t=null===(e=n.fileExt)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"";return"."===i[0]&&(i=i.substr(1)),i},iconCls:function(){var t=this.file;return t?a["L"].getName(t.fileType,a["M"].Big):null},isMiniPreviewFile:function(){var t=this.file,e=t.fileType;switch(e){case a["L"].XD:case a["L"].Sketch:case a["L"].Figma:case a["L"].PhotoShop:return!0}return!1},isMiniImage:function(){var t=this.imgSize,e=this.boxWidth,n=this.boxHeight,i=this.isLottieFile,r=this.isMiniPreviewFile;if(i)return!0;if(r)return!0;if(0===t.width)return!0;if(t.width<=e)return!0;if(t.height<=n)return!0;var o=e/t.width*t.height;return o<=n},viewWidth:function(){var t=this.imgSize.width,e=this.boxWidth;return this.isMiniImage?Math.min(e,t):e},viewHeight:function(){if(this.isMiniImage)return this.imgSize.height;var t=1,e=this.viewWidth,n=this.viewRealHeight,i=Math.round(e/t);return Math.min(i,n)},viewRealHeight:function(){var t=this.viewWidth,e=this.imgSize;return 0==e.width||0==e.height?0:Math.round(t/e.width*e.height)},thumbViewHeight:function(){var t=this.viewRealHeight;if(0==t)return 0;var e=375/812,n=this.viewWidth/t;n=Math.max(e,n);var i=this.thumbViewWidth,r=Math.round(i/n);return r},thumbImgStyle:function(){return{width:this.thumbViewWidth+"px",height:this.thumbViewHeight+"px"}},thumbImgVisible:function(){if(!this.imgVisible)return!1;if(this.isMiniImage)return!1;var t=this.file;if(!t)return!1;var e=this.viewHeight,n=this.boxHeight;return e>0&&e<this.imgSize.height&&n<this.viewRealHeight},itemTitle:function(){return ui(this.file)}},beforeDestroy:function(){this.isLottieFile&&(ju.unbind(this.file),this.lottie=null)},data:function(){return{mouseenter:!1,imgScrollTop:0,mouseInThumb:!1,imgSize:{width:0,height:0},thumbViewWidth:36,boxWidth:185,boxHeight:185,lottie:null,lottieLoadState:c["a"].Normal}},props:{file:Object}},gf=bf,wf=(n("a803"),Object(Gr["a"])(gf,vf,pf,!1,null,"467016a3",null)),yf=wf.exports,kf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item",class:t.itemClass,attrs:{title:t.itemTitle},on:{click:t.clickSelect,contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},mouseenter:function(e){t.mouseenter=!0},mouseleave:t.onMouseOutImg}},[t.fetching?e("div",{staticClass:"loading"},[t._v(t._s(t.loadingText))]):t._e(),t.artboard.flowStart?e("div",{staticClass:"interaction-home",attrs:{title:t.interactionHomeTitle}}):t._e(),e("div",{ref:"img",staticClass:"img",style:{height:t.artboard.boundsInParent.viewHeight+"px"}},[t.imageSrc?e("ArtboardPreviewImg",{attrs:{imgHeight:t.imgRealHeight,pathPreview:t.imageSrc}}):t._e()],1),t.tipVisible?e("div",{staticClass:"count-tip"},[t.commentReplyCount>0?e("div",{staticClass:"comment-count",attrs:{title:t.commentReplyTitle}}):t._e()]):t._e(),t.thumbImgVisible?e("div",{directives:[{name:"show",rawName:"v-show",value:t.mouseenter,expression:"mouseenter"}],staticClass:"thumbimg",style:t.thumbImgStyle,on:{mouseenter:function(e){t.mouseInThumb=!0},mouseleave:function(e){t.mouseInThumb=!1},mousemove:t.onMouseMoveImg}},[t.imageSrc?e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.imageSrc}}):t._e()],1):t._e(),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("span",{staticClass:"t",domProps:{textContent:t._s(t.artboard.name)}}),t.artboardInDevStatus?e("span",{staticClass:"dev",attrs:{title:"待开发"}}):t._e()]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},Cf=[],xf={components:{ArtboardPreviewImg:Wu},methods:{onMouseOutImg:function(){this.imgScrollTop=0,this.mouseenter=!1},onMouseMoveImg:function(t){if(this.viewModeMax){var e=this.artboard;if(e){var n=e.boundsInParent;if(n.viewHeight>0&&n.viewHeight<n.viewRealHeight){var i=t.layerY,r=i/n.thumbViewHeight,o=.2,a=.2;r=r<=o?0:r>=1-a?1:(r-o)/(1-a-o);var s=n.viewRealHeight-n.viewHeight,c=Math.round(r*s);this.imgScrollTop=c}}}},onContextmenu:function(t){var e=this,n=t.pageX,i=t.pageY,r=this.item;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:i,artboard:r})}))},clickSelect:function(){this.inArtboardMultDownMode?this.item.mlUserSelectDown=!this.item.mlUserSelectDown:(this.hideTextTip(),this.setCurArtboard(this.item))},checkImage:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.pathPreviewMini,r=t.pathPreview,o=t.artboard,!n){e.n=1;break}return t.imageSrc=n,e.a(2);case 1:if(e.p=1,s=o.pathPreviewBlob,s){e.n=4;break}return e.n=2,Oa(r);case 2:if(s=e.v,"string"!==typeof s){e.n=3;break}return o.pathPreviewMini=s,t.imageSrc=s,e.a(2);case 3:o.pathPreviewBlob=s;case 4:a=URL.createObjectURL(s),t.imageSrc=a,e.n=6;break;case 5:return e.p=5,e.v,o.pathPreviewMini=r,t.imageSrc=r,e.a(2);case 6:return e.p=6,a&&t.$nextTick((function(){setTimeout((function(){try{URL.revokeObjectURL(a)}catch(t){}}),600)})),e.f(6);case 7:return e.a(2)}}),e,null,[[1,5,6,7]])})))()}},watch:{pathPreviewWebp:function(t){var e=this;t&&!this.pathPreviewMini&&this.$nextTick((function(){e.checkImage()}))},pathPreview:function(t){var e=this;t&&!this.pathPreviewMini&&this.$nextTick((function(){e.checkImage()}))},pathPreviewMini:function(){var t=this;this.$nextTick((function(){t.checkImage()}))},imgScrollTop:function(t){var e=this.$refs.img;e&&e.scrollTo({top:t,behavior:0===t?"smooth":"instant"})}},computed:{artboardInDevStatus:function(){var t=this.item,e=this.inCloudViewerMode;return e&&t.customStatus===a["i"].Dev},light:function(){var t=this.lightArtboardId,e=this.artboard;return t>0&&(null===e||void 0===e?void 0:e.cid)===t},selected:function(){return this.inArtboardMultDownMode&&this.item.mlUserSelectDown},tipVisible:function(){return this.commentReplyCount>0},interactionHomeTitle:function(){return Ve(this.artboard)},commentReplyCount:function(){var t,e,n=this.artboard;return n&&null!==(t=null!==(e=n.comments)&&void 0!==e?e:0+n.replies)&&void 0!==t?t:0},itemTitle:function(){return this.mouseInThumb?null:di(this.artboard)},commentReplyTitle:function(){var t=this.commentReplyCount;return 0==t?null:"".concat(t," 条评论")},thumbImgVisible:function(){if(!this.viewModeMax)return!1;var t=this.artboard;if(!t)return!1;var e=t.boundsInParent;return e.viewHeight>0&&e.viewHeight<e.viewRealHeight},thumbImgStyle:function(){var t=this.artboard;if(t){var e=t.boundsInParent;return{width:e.thumbViewWidth+"px",height:e.thumbViewHeight+"px"}}},itemClass:function(){var t={},e=this.viewModeMax,n=this.selected,i=this.light;return t[e?"max":"min"]=1,n&&(t.selected=1),i&&(t.light=1),t},isSupportWebp:function(){return this.$store.state.isSupportWebp===Ni.Support},pathPreview:function(){var t=this.artboard,e=this.isSupportWebp,n=this.pathPreviewMini;return t?n||(e?t.pathPreviewWebp:null)||t.pathPreview:null},pathPreviewMini:function(){return this.artboard?this.artboard.pathPreviewMini:null},imgRealHeight:function(){if(!this.viewModeMax)return 0;var t=this.artboard;if(!t)return 0;var e=t.boundsInParent;return e.viewHeight>0&&e.viewHeight<e.viewRealHeight?e.viewRealHeight:0},imgStyle:function(){var t=this.artboard;if(t){var e=t.boundsInParent;return"width:".concat(e.viewWidth,"px;height:").concat(e.viewHeight,"px;")}},info:function(){return hi(this.artboard,this.webViewStateTimes)},artboard:function(){return this.item.artboard}},data:function(){return{loadingText:"",fetching:!1,imgScrollTop:0,mouseenter:!1,mouseInThumb:!1,viewModeMax:!0,imageSrc:null}},mounted:function(){this.checkImage()},props:{item:Object,multipleMode:Boolean,lightArtboardId:Number}},Sf=xf,Tf=(n("2ebc"),Object(Gr["a"])(Sf,kf,Cf,!1,null,"516404a9",null)),Of=Tf.exports,If=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-list-sort-menu"},[e("div",{staticClass:"sort-order",class:{desc:!t.orderDesc},attrs:{title:t.orderDesc?"切换为升序":"切换为降序"},on:{click:function(e){return t.clickOrderDesc(!t.orderDesc)}}}),e("div",{staticClass:"sort-mode"},[t.mini?t._e():e("span",{staticClass:"name",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickOrderDesc(!t.orderDesc)}}},[t._v("按"+t._s(t.sortType===t.EnumCloudListSortType.Name?"名称":t.sortType===t.EnumCloudListSortType.Date?"时间":"坐标")+"排序")]),e("div",{staticClass:"options"},[e("div",{class:{on:t.sortType===t.EnumCloudListSortType.Name||!t.supportRectSort&&t.sortType===t.EnumCloudListSortType.ArtboardRect},on:{click:function(e){return t.clickSortType(t.EnumCloudListSortType.Name)}}},[t._v("名称排序")]),e("div",{class:{on:t.sortType===t.EnumCloudListSortType.Date},on:{click:function(e){return t.clickSortType(t.EnumCloudListSortType.Date)}}},[t._v("时间排序")]),t.supportRectSort?e("div",{class:{on:t.sortType===t.EnumCloudListSortType.ArtboardRect},attrs:{title:"1.画板列表按画板在文档中的坐标从上到下,从左到右排序\n2.文件夹和文件按名称排序"},on:{click:function(e){return t.clickSortType(t.EnumCloudListSortType.ArtboardRect)}}},[t._v("坐标排序")]):t._e(),e("p",{staticClass:"line"}),e("div",{class:{on:!t.orderDesc},on:{click:function(e){return t.clickOrderDesc(!1)}}},[t._v("升序")]),e("div",{class:{on:t.orderDesc},on:{click:function(e){return t.clickOrderDesc(!0)}}},[t._v("降序")])])])])},Af=[],Ff={methods:{clickSortType:function(t){this.$store.commit("setCloudListSortConfig",{sortType:t})},clickOrderDesc:function(t){this.$store.commit("setCloudListSortConfig",{orderDesc:t})}},computed:{EnumCloudListSortType:function(){return a["n"]},cloudListSort:function(){return this.$store.state.cloudListSort},sortType:function(){return this.cloudListSort.sortType},orderDesc:function(){return this.cloudListSort.orderDesc}},data:function(){return{optionsVisible:!1}},props:{mini:{type:Boolean,default:!1},supportRectSort:{type:Boolean,default:!0}}},jf=Ff,_f=(n("0393"),Object(Gr["a"])(jf,If,Af,!1,null,"4d98de7b",null)),Mf=_f.exports,Lf=200,Pf={folderMax:{margin:{top:20,right:20,bottom:20,left:2},width:192,height:198},fileMax:{margin:{top:20,right:23,bottom:20,left:6},width:185,height:233},artboardMax:{margin:{top:20,right:23,bottom:20,left:6},width:185,height:0,textHeight:48}},Df={components:{FoldNavFolderItem:mf,FoldNavFileItem:yf,FoldNavArtboardItem:Of,FileItemContextMenu:Kh,MultArtboardDownload:wh,FolderNavSortMenu:Mf,FolderItemContextMenu:ef},methods:{onListScroll:function(t){this.scrollY=t.target.scrollTop},getRenderLazyList:function(t,e,n,i,r){var o={items:[],rects:[],startIndex:-1,paddingTop:"0px"};if(!i||!t)return o;if(e.length!==n.length)return o;for(var a=-1,s=0,c=n.length;s<c;s++){var l=e[s],u=t.isOverlap(l);if(-1===o.startIndex&&u)o.startIndex=s;else if(r&&-1!==o.startIndex&&!u)break;u&&(a=s)}var d=e[o.startIndex];if(d&&o.startIndex>0)for(var h=o.startIndex-1;h>=0;h--){var f=e[h];if(d.y!=f.y)break;o.startIndex=h}var m=Pf.folderMax;if(-1!=o.startIndex){o.items=n.slice(o.startIndex,a+1),o.rects=e.slice(o.startIndex,a+1);var v=o.rects[0];o.paddingTop=v.y-m.margin.top+"px"}return o},onResize:function(){this.resetArtboardsBoundingClientRect("onResize")},resetArtboardsBoundingClientRectDelay:function(t){var e=this;cancelAnimationFrame(this.handle_resetArtboardsBoundingClientRect),this.handle_resetArtboardsBoundingClientRect=requestAnimationFrame((function(){e.resetArtboardsBoundingClientRect(t+".delay")}))},resetArtboardsBoundingClientRect:function(t){var e=this;cancelAnimationFrame(this.handle_resetArtboardsBoundingClientRect);var n=this.viewRect;n.width=window.innerWidth,n.height=window.innerHeight,this.$nextTick((function(){var t=e.$refs.$list,n=e.$refs.$files,i=e.$refs.$artboards,r=e.$refs.$folders;if(t){var o=t.getBoundingClientRect(),a=e.listBoundingClientRect;a.x=o.x,a.y=o.y,a.width=o.width,a.height=o.height;var s=a.y;if(r){var c=r.getBoundingClientRect();if(0!==c.height||0!==c.width){var l=e.foldersBoundingClientRect;l.x=c.x,l.y=c.y,l.width=c.width,l.height=c.height,l.marginTop=c.y-s}}if(n){var u=n.getBoundingClientRect();if(0!==u.height||0!==u.width){var d=e.filesBoundingClientRect;d.x=u.x,d.y=u.y,d.width=u.width,d.height=u.height,d.marginTop=u.y-s}}if(i){var h=i.getBoundingClientRect();if(0!==h.height||0!==h.width){var f=e.artboardsBoundingClientRect;f.x=h.x,f.y=h.y,f.width=h.width,f.height=h.height,f.marginTop=h.y-s}}}}))},clickClearSearchText:function(){this.searchText=""},contextMenuFolder:function(t,e){var n=t.pageX,i=t.pageY,r=this.folderContextMenuData;requestAnimationFrame((function(){r.x=n,r.y=i,r.folder=e,r.visible=!0}))},contextMenuFile:function(t,e){var n=t.pageX,i=t.pageY,r=this.fileContextMenuData;requestAnimationFrame((function(){r.x=n,r.y=i,r.file=e,r.visible=!0}))},clickSubFoldersOpen:function(){this.$emit("clickSubFoldersOpen")},clickSubFilesOpen:function(){this.$emit("clickSubFilesOpen")},clickSubArtboardsOpen:function(){this.$emit("clickSubArtboardsOpen")},getArtboardViewRect:function(t){if(!t)return null;var e=this.renderArtboardRects,n=this.renderArtboardsWithCurrentPage;return e[n.findIndex((function(e){var n;return(null===e||void 0===e||null===(n=e.artboard)||void 0===n?void 0:n.cid)===t}))]},cleanLightArtboardId:function(){this.lightArtboardId=0},setArtboardToCenterAndLight:function(t){var e=this,n=t.docGuid,i=t.pageGuid,r=t.name,o=t.topSectionId,a=this.filterDocumentGuid;a&&n!==a&&i!==a&&o!==a&&this.$store.commit("setFilterDocumentGuid",null),this.subArtboardsOpen||this.clickSubArtboardsOpen(),this.$nextTick((function(){var n=e.getArtboardViewRect(t.cid);if(!n)return e.showTextTip("无法定位到画板「".concat(r,"」"));var i=n.y,o=n.height,a=e.scrollY,s=e.artboardsBoundingClientRect,c=s.marginTop+a,l=e.listBoundingClientRect.height,u=i+c+o/2-l/2;e.lightArtboardId=t.cid;var d=e.$refs.$list;d&&(d.scrollTop=u),e.showTextTip("已定位到画板「".concat(r,"」"))}))}},watch:{lightArtboardId:function(t){var e=this;t>0?requestAnimationFrame((function(){window.addEventListener("mousedown",e.cleanLightArtboardId,!0)})):window.removeEventListener("mousedown",this.cleanLightArtboardId,!0)},resetCenterArtboard:function(t){this.artShowInListMode&&t&&(this.setArtboardToCenterAndLight(t),this.$store.commit("resetCenterArtboard",null))},renderArtboardViewRect:function(){var t=this.artboardsBoundingClientRect.height;0==t&&this.resetArtboardsBoundingClientRectDelay("renderArtboardViewRect")},renderFolderHeight:function(){this.resetArtboardsBoundingClientRectDelay("renderFolderHeight")},renderArtboardHeight:function(){this.resetArtboardsBoundingClientRectDelay("renderArtboardHeight")},subFoldersOpen:function(){this.resetArtboardsBoundingClientRect("subFoldersOpen")},subFilesOpen:function(){this.resetArtboardsBoundingClientRect("subFilesOpen")},subArtboardsOpen:function(){this.resetArtboardsBoundingClientRect("subArtboardsOpen")},allFoldersBoxVisible:function(){this.resetArtboardsBoundingClientRect("allFoldersBoxVisible")},"renderCloudSubFolders.length":function(){this.resetArtboardsBoundingClientRectDelay("renderCloudSubFolders.length")},"renderCloudSubFiles.length":function(){this.resetArtboardsBoundingClientRectDelay("'renderCloudSubFiles.length")},"renderCloudSubArtboards.length":function(){this.resetArtboardsBoundingClientRectDelay("'renderCloudSubArtboards.length")},renderFolderViewRect:function(){var t=this.foldersBoundingClientRect.height;0==t&&this.resetArtboardsBoundingClientRectDelay("renderFolderViewRect")},renderFileViewRect:function(){var t=this.filesBoundingClientRect.height;0==t&&this.resetArtboardsBoundingClientRectDelay("renderFileViewRect")},scrollY:function(){var t=this;this.resetArtboardsBoundingClientRectDelay("scrollY"),clearTimeout(this.scrollingHandle),this.scrolling=!0,this.scrollingHandle=setTimeout((function(){t.scrolling=!1}),100)}},computed:{inRootAndNotSearchFound:function(){var t=this.inCloudMode&&0==this.cloudCurrentFolderId;return t&&this.hasSearchText&&!this.hasSubFolders},folderListVisible:function(){var t=this.subFoldersOpen,e=this.needShowFile;return t||!e},resetCenterArtboard:function(){return this.$store.state.scale.resetCenterArtboard},renderArtboardsWithCurrentPage:function(){var t=this.renderCloudSubArtboards,e=this.filterDocumentGuid;if(!Object(l["j"])(e))return t;var n=yi(e);return t.filter((function(t){var e=t.artboard;return wi(e,n.filterDocumentGuid,n.onlyNoSectionArtboard)}))},renderArtboardHeight:function(){var t=this.renderArtboardRects,e=t.length;if(0==e)return 0;for(var n=t[e-1],i=n.y,r=n.bottom,o=e-2;o>=0;o--){var a=t[o];if(a.y!==i)break;r=Math.max(r,a.bottom)}var s=Pf.artboardMax;return r+s.margin.bottom},renderFileHeight:function(){var t=this.renderFileRects,e=t.length;if(0==e)return 0;for(var n=t[e-1],i=n.y,r=n.bottom,o=e-2;o>=0;o--){var a=t[o];if(a.y!==i)break;r=Math.max(r,a.bottom)}var s=Pf.fileMax;return r+s.margin.bottom},renderFolderHeight:function(){var t=this.renderFolderRects,e=t.length;if(0==e)return 0;for(var n=t[e-1],i=n.y,r=n.bottom,o=e-2;o>=0;o--){var a=t[o];if(a.y!==i)break;r=Math.max(r,a.bottom)}var s=Pf.folderMax;return r+s.margin.bottom},renderFolderViewRect:function(){var t=this.viewRect,e=this.foldersBoundingClientRect,n=I(t,e);return n&&(n.x=0,e.y>0?n.y-=e.y:n.y-=e.marginTop),n},renderFileViewRect:function(){var t=this.viewRect,e=this.filesBoundingClientRect,n=I(t,e);return n&&(n.x=0,e.y>0?n.y-=e.y:n.y-=e.marginTop),n},renderArtboardViewRect:function(){var t=this.viewRect,e=this.artboardsBoundingClientRect,n=I(t,e);return n&&(n.x=0,e.y>0?n.y-=e.y:n.y-=e.marginTop),n},renderFolderLazyList:function(){var t=this.renderFolderViewRect,e=this.renderFolderRects,n=this.renderCloudSubFolders,i=this.folderListVisible;return this.getRenderLazyList(t,e,n,i,!0)},renderFileLazyList:function(){var t=this.renderFileViewRect,e=this.renderFileRects,n=this.renderCloudSubFiles,i=this.subFilesOpen;return this.getRenderLazyList(t,e,n,i,!0)},renderArtboardLazyList:function(){var t=this.renderArtboardViewRect,e=this.renderArtboardRects,n=this.renderArtboardsWithCurrentPage,i=this.subArtboardsOpen;return this.getRenderLazyList(t,e,n,i,!1)},renderFolderRects:function(){var t=this.renderCloudSubFolders,e=this.foldersBoundingClientRect;if(0===e.width)return[];var n={x:0,y:0,width:e.width,height:e.height},i=[],r=Pf.folderMax,o=r.margin.left,a=o,s=r.margin.top,c=Math.floor(n.width/Lf);return t.forEach((function(t,e){var n=new w;n.set(a,s,r.width,r.height),i.push((new w).set(n.x,n.y,n.width,n.height)),n.x=n.right+r.margin.left+r.margin.right,1===c||e>0&&(e+1)%c===0?(s+=r.height,s+=r.margin.top+r.margin.bottom,a=o):a=n.x})),i},renderFileRects:function(){var t=this.renderCloudSubFiles,e=this.filesBoundingClientRect;if(0===e.width)return[];var n={x:0,y:0,width:e.width,height:e.height},i=[],r=Pf.fileMax,o=r.margin.left,a=o,s=r.margin.top,c=Math.floor(n.width/Lf);return t.forEach((function(t,e){var n=new w;n.set(a,s,r.width,r.height),i.push((new w).set(n.x,n.y,n.width,n.height)),n.x=n.right+r.margin.left+r.margin.right,1===c||e>0&&(e+1)%c===0?(s+=r.height,s+=r.margin.top+r.margin.bottom,a=o):a=n.x})),i},renderArtboardRects:function(){var t=this.renderArtboardsWithCurrentPage,e=this.artboardsBoundingClientRect;if(0===e.width)return[];var n={x:0,y:0,width:e.width,height:e.height},i=[],r=Pf.artboardMax,o=r.margin.left,a=o,s=r.margin.top,c=Math.floor(n.width/Lf),l=0;return t.forEach((function(t,e){var n=new w;if(0===r.height){var u=t.artboard.boundsInParent.viewHeight;void 0===u&&(F(t.artboard),u=t.artboard.boundsInParent.viewHeight);var d=r.textHeight+u;isNaN(d)&&(d=r.textHeight),n.set(a,s,r.width,d),l=Math.max(l,n.height)}else n.set(a,s,r.width,r.height);i.push((new w).set(n.x,n.y,n.width,n.height)),n.x=n.right+r.margin.left+r.margin.right,1===c||e>0&&(e+1)%c===0?(0===r.height?(s+=l,l=0):s+=r.height,s+=r.margin.top+r.margin.bottom,a=o):a=n.x})),i},hasSearchText:function(){return Object(l["j"])(this.searchText)},needShowFile:function(){return this.inCloudMode&&this.cloudCurrentFolderId>0},renderCloudSubFolders:function(){var t=this.cloudSubFolders,e=this.hasSearchText,n=this.searchText;return t&&0!==t.length?e?(n=n.toLowerCase(),t.filter((function(t){var e,i,r=null!==(e=null===(i=t.name)||void 0===i?void 0:i.toLowerCase())&&void 0!==e?e:"";return-1!==r.indexOf(n)}))):t:[]},renderCloudSubFiles:function(){var t=this.cloudSubFiles,e=this.hasSearchText,n=this.searchText;return t&&0!==t.length?e?(n=n.toLowerCase(),t.filter((function(t){var e,i,r=null!==(e=null===(i=t.name)||void 0===i?void 0:i.toLowerCase())&&void 0!==e?e:"";return-1!==r.indexOf(n)}))):t:[]},cloudListSort:function(){return this.$store.state.cloudListSort},sortRenderDocumentArtboards:function(){var t=this.renderDocumentArtboards,e=this.cloudListSort;return t=Object(u["a"])(t),qn(t,"updateTimeTimes",a["m"].Artboard,e),t},renderCloudSubArtboards:function(){var t=this.sortRenderDocumentArtboards,e=this.hasSearchText,n=this.searchText;return t&&0!==t.length?e?(n=n.toLowerCase(),t.filter((function(t){var e,i,r=null!==(e=null===(i=t.artboard)||void 0===i||null===(i=i.name)||void 0===i?void 0:i.toLowerCase())&&void 0!==e?e:"";return-1!==r.indexOf(n)}))):t:[]},hasSubFolders:function(){return this.renderCloudSubFolders.length>0},hasSubFiles:function(){return this.renderCloudSubFiles.length>0},hasSubArtboards:function(){return this.renderCloudSubArtboards.length>0}},data:function(){return{lightArtboardId:0,scrollY:0,scrolling:!1,scrollingHandle:0,handle_resetArtboardsBoundingClientRect:0,viewRect:{x:0,y:0,width:0,height:0},listBoundingClientRect:{x:0,y:0,width:0,height:0},foldersBoundingClientRect:{x:0,y:0,width:0,height:0,marginTop:0},filesBoundingClientRect:{x:0,y:0,width:0,height:0,marginTop:0},artboardsBoundingClientRect:{x:0,y:0,width:0,height:0,marginTop:0},fileContextMenuData:{visible:!1,x:0,y:0,file:null},folderContextMenuData:{visible:!1,x:0,y:0,folder:null},searchText:""}},props:{subFoldersOpen:Boolean,subFilesOpen:Boolean,subArtboardsOpen:Boolean,isSupportNetDiskFile:Boolean},created:function(){window.addEventListener("resize",this.onResize)},mounted:function(){this.resetArtboardsBoundingClientRect("mounted")},beforeDestroy:function(){cancelAnimationFrame(this.handle_resetArtboardsBoundingClientRect),clearTimeout(this.scrollingHandle),window.removeEventListener("resize",this.onResize)}},Nf=Df,Ef=(n("0c43"),Object(Gr["a"])(Nf,th,eh,!1,null,"37d65722",null)),Rf=Ef.exports,Vf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-nav",class:{on:t.miniFoldersOpen,allfolders:t.allFoldersBoxVisible}},[e("dl",{staticClass:"subfolders",class:{on:t.miniFoldersOpen}},[e("dt",{on:{click:function(e){return e.target!==e.currentTarget?null:t.clickMiniFoldersOpen.apply(null,arguments)}}},[e("div",{staticClass:"title",on:{click:t.clickMiniFoldersOpen}},[t._v("文件夹/文件"),e("span",{staticClass:"count"},[t._v(t._s(t.totalCount))])]),t.miniFoldersOpen?e("div",{staticClass:"c"},[e("div",{staticClass:"search",class:{on:t.inSearchMode}},[e("div",{staticClass:"btn-search",attrs:{title:"搜索当前文件夹"},on:{click:t.showSearch}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",attrs:{type:"text",maxlength:"50",spellcheck:"false"},domProps:{value:t.searchText},on:{blur:t.onSearchInputBlur,input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t.hasSearchText?e("div",{staticClass:"btn-clear",on:{click:t.clickClearSearchText}}):t._e()]),e("FolderNavSortMenu",{attrs:{mini:!0,supportRectSort:!1}})],1):t._e()]),e("dd",{ref:"box",class:{"on-scroll":t.hasScroll},on:{scroll:t.onScroll,mousewheel:t.onMouseWheel}},[t.hasSearchText&&0===t.miniRenderList.length?e("div",{staticClass:"empty"},[t._v("未找到包含 “"+t._s(t.searchText)+"” 的子文件夹或文件")]):t._e(),e("div",{staticClass:"brace",class:{off:t.miniListOpt.mousewheelTimes>0},style:t.braceStyle},[e("div",{staticClass:"front",style:{paddingTop:t.miniFrontMarginTop}},[t._l(t.lazyMiniRenderList,(function(n){return[n.isFolder?e("FolderNavSubFolderItem",{key:n.key,attrs:{folder:n.item,isSupportNetDiskFile:t.isSupportNetDiskFile},on:{contextMenuFolder:t.contextMenuFolder}}):t._e(),n.isFile?e("FolderNavSubFileItem",{key:n.key,attrs:{file:n.item},on:{contextMenuFile:t.contextMenuFile}}):t._e()]}))],2)])])]),e("FileItemContextMenu",{attrs:{fileContextMenuData:t.fileContextMenuData}}),e("FolderItemContextMenu",{attrs:{folderContextMenuData:t.folderContextMenuData}})],1)},Bf=[],Hf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-item",class:t.itemClass,attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},click:function(e){return t.clickGoFolder()}}},[e("div",{staticClass:"icon"}),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t.isFavoriteFolder?e("div",{staticClass:"fav",attrs:{title:"已收藏"}}):t._e(),e("div",{staticClass:"t",domProps:{textContent:t._s(t.folder.name)}})]),e("div",{staticClass:"art-count"},[t._v(t._s(t.info))])])])},Uf=[],Gf={methods:{onContextmenu:function(t){this.$emit("contextMenuFolder",t,this.folder)},clickGoFolder:function(){Object(c["P"])(this.folder.id)}},computed:{isFavoriteFolder:function(){return this.folder.customStatus===a["q"].Favorite},useTimeSort:function(){return this.$store.state.cloudListSort.sortType===a["n"].Date},info:function(){var t=this.folder.updateTimes,e=this.folder,n=this.useTimeSort,i=this.webViewStateTimes;return n?Object(l["b"])(t,i):"共".concat(li(e),"项")},itemClass:function(){var t=this.folder,e={};if(t.shareMode===a["v"].PrivateCode?e.private=1:t.shareMode===a["v"].SpecifyMembers&&(e["share-sm"]=1),null!=t.color){var n=a["t"].getName(t.color);n&&(e[n]=1)}return e},countText:function(){var t,e=this.folder;return e.artboardCount+(null!==(t=e.fileCount)&&void 0!==t?t:0)+e.folderCount},title:function(){return ci(this.folder)}},props:{folder:Object,isSupportNetDiskFile:Boolean}},Wf=Gf,$f=(n("1375"),Object(Gr["a"])(Wf,Hf,Uf,!1,null,"27f85505",null)),zf=$f.exports,Yf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"file-item",attrs:{title:t.title},on:{click:function(e){return t.clickNetDiskFile(t.file)},contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("div",{ref:"img",staticClass:"img"},[0===t.imgSize.width&&0===t.imgSize.height?e("div",{staticClass:"icon-netdiskfile",class:t.iconCls}):t._e(),e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.file.previewImage},on:{resize:t.onPreviewImgResize}})],1),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("span",{staticClass:"pre"},[e("span",[t._v(t._s(t.file.fileName)+".")])]),e("span",{staticClass:"ext"},[t._v(t._s(t.fileExt))])]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},Xf=[],Kf={components:{ArtboardPreviewImg:Wu},methods:{onPreviewImgResize:function(t,e){var n=this.imgSize;n.width=t,n.height=e},onContextmenu:function(t){this.$emit("contextMenuFile",t,this.file)}},computed:{info:function(){return fi(this.file,this.webViewStateTimes)},fileExt:function(){var t,e,n=this.file;if(!n)return null;var i=null!==(t=null===(e=n.fileExt)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"";return"."===i[0]&&(i=i.substring(1)),i},iconCls:function(){var t=this.file;return t?a["L"].getName(t.fileType,a["M"].Normal):null},title:function(){return ui(this.file)}},props:{file:Object},data:function(){return{imgSize:{width:0,height:0}}}},qf=Kf,Jf=(n("ad48"),Object(Gr["a"])(qf,Yf,Xf,!1,null,"bda402d4",null)),Qf=Jf.exports,Zf={components:{FileItemContextMenu:Kh,FolderItemContextMenu:ef,FolderNavSubFolderItem:zf,FolderNavSubFileItem:Qf,FolderNavSortMenu:Mf},methods:{contextMenuFolder:function(t,e){var n=t.pageX,i=t.pageY,r=this.folderContextMenuData;requestAnimationFrame((function(){r.x=n,r.y=i,r.folder=e,r.visible=!0}))},contextMenuFile:function(t,e){var n=t.pageX,i=t.pageY,r=this.fileContextMenuData;requestAnimationFrame((function(){r.x=n,r.y=i,r.file=e,r.visible=!0}))},onMouseWheel:function(t){var e;this.miniListOpt.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onScroll:function(t){this.miniListOpt.scrollTop=t.target.scrollTop},resize:function(){if(this.useMiniList){var t=this.$refs.box;if(t){var e=this.miniListOpt;e.boxHeight=t.offsetHeight}}},onSearchInputBlur:function(){var t=this;clearTimeout(this.searchHandle),this.searchHandle=setTimeout((function(){t.searchInputfocus=!1}),100)},clickClearSearchText:function(){this.searchText="",this.showSearch()},showSearch:function(){var t=this;clearTimeout(this.searchHandle),this.searchInputfocus=!0,this.$nextTick((function(){var e;null===(e=t.$refs.searchInput)||void 0===e||e.focus()}))},clickMiniFoldersOpen:function(){this.$emit("clickMiniFoldersOpen",!this.miniFoldersOpen)}},computed:{totalCount:function(){var t,e,n,i,r=null!==(t=null===(e=this.cloudSubFolders)||void 0===e?void 0:e.length)&&void 0!==t?t:0,o=null!==(n=null===(i=this.cloudSubFiles)||void 0===i?void 0:i.length)&&void 0!==n?n:0;return"(".concat(r+o,")")},lazyMiniRenderList:function(){var t=this.miniRenderList,e=this.lazyMiniStartIndex,n=this.lazyMiniLength;return t.slice(e,e+n)},lazyMiniStartIndex:function(){var t=this.miniRenderList,e=this.miniListOpt,n=e.scrollTop,i=e.itemHeight,r=e.boxHeight,o=t.length-Math.floor(r/i);return Math.max(0,Math.min(o,Math.floor(n/i)-1))},lazyMiniLength:function(){var t=this.miniRenderList,e=this.lazyMiniStartIndex,n=this.miniListOpt,i=n.boxHeight,r=n.itemHeight;return Math.min(t.length-e,Math.ceil(i/r)+2)},miniFrontMarginTop:function(){return this.lazyMiniStartIndex*this.miniListOpt.itemHeight+"px"},miniBoxRealHeight:function(){return this.miniListOpt.itemHeight*this.miniRenderList.length},braceStyle:function(){return{height:this.miniBoxRealHeight+"px"}},hasScroll:function(){return this.miniListOpt.boxHeight<this.miniBoxRealHeight},useMiniList:function(){return 0!==this.renderDocumentArtboards.length},miniRenderList:function(){var t=this.cloudSubFolders,e=this.cloudSubFiles,n=this.hasSearchText,i=this.searchText,r=[];return i=n?i.toLowerCase():null,t&&t.forEach((function(t){var e,o;n&&-1==(null!==(e=null===(o=t.name)||void 0===o?void 0:o.toLowerCase())&&void 0!==e?e:"").indexOf(i)||r.push({isFolder:!0,item:t,key:"ml_folder_".concat(t.id)})})),e&&e.forEach((function(t){var e,o,a;n&&-1==(null!==(e=null===(o=t.name)||void 0===o?void 0:o.toLowerCase())&&void 0!==e?e:"").indexOf(i)||r.push({isFile:!0,item:t,key:"ml_file_".concat(null!==(a=t.id)&&void 0!==a?a:t.viewUrl)})})),r},inSearchMode:function(){return this.searchInputfocus||this.hasSearchText},hasSearchText:function(){return Object(l["j"])(this.searchText)}},watch:{"miniListOpt.mousewheelTimes":function(t){var e=this;clearTimeout(this.miniListOpt.mousewheelHandle),t&&(this.miniListOpt.mousewheelHandle=setTimeout((function(){e.miniListOpt.mousewheelTimes=!1}),200))},miniFoldersOpen:function(t){var e=this;t||(this.searchText=""),this.$nextTick((function(){e.resize()}))}},props:{isSupportNetDiskFile:Boolean,miniFoldersOpen:Boolean},data:function(){return{searchHandle:0,folderContextMenuData:{visible:!1,x:0,y:0,folder:null},fileContextMenuData:{visible:!1,x:0,y:0,file:null},searchText:"",searchInputfocus:!1,miniListOpt:{scrollTop:0,boxHeight:0,mousewheelTimes:0,mousewheelHandle:0,itemHeight:68}}},beforeDestroy:function(){clearTimeout(this.searchHandle),clearTimeout(this.miniListOpt.mousewheelHandle),window.removeEventListener("resize",this.resize)},created:function(){window.addEventListener("resize",this.resize)},mounted:function(){var t=this;this.$nextTick((function(){t.resize()}))}},tm=Zf,em=(n("79c5"),Object(Gr["a"])(tm,Vf,Bf,!1,null,"266e830c",null)),nm=em.exports,im={components:{FolderNavMax:Rf,FolderNavMini:nm},methods:{clickSubFoldersOpen:function(){this.inArtboardMultDownMode||(this.subFoldersOpen=!this.subFoldersOpen,Object(c["jb"])("subfolderopen",this.subFoldersOpen?"1":"0"))},clickSubFilesOpen:function(){this.inArtboardMultDownMode||(this.subFilesOpen=!this.subFilesOpen,Object(c["jb"])("subFilesOpen",this.subFilesOpen?"1":"0"))},clickSubArtboardsOpen:function(){this.inArtboardMultDownMode&&this.subArtboardsOpen||(this.subArtboardsOpen=!this.subArtboardsOpen,Object(c["jb"])("subartboardsopen",this.subArtboardsOpen?"1":"0"))},clickMiniFoldersOpen:function(t){this.miniFoldersOpen=t}},computed:{useMiniList:function(){return!this.artShowInListMode&&0!==this.renderDocumentArtboards.length},isSupportNetDiskFile:function(){return this.inCloudMode&&!Qr.notSupportNetDisk(this.cloudVersion)},visible:function(){return this.inCloudMode&&!this.inArtboardMode&&!this.cloudFolderNotFound&&(this.hasSubFolders||this.hasSubFiles||this.artShowInListMode&&this.hasSubArtboards)},visibleMin:function(){return this.visible&&this.useMiniList},hasSubFolders:function(){var t=this.cloudSubFolders;return t&&t.length>0},hasSubFiles:function(){var t=this.cloudSubFiles;return t&&t.length>0},hasSubArtboards:function(){return this.renderDocumentArtboards.length>0},cloudListSort:function(){return this.$store.state.cloudListSort}},watch:{visible:function(t){t||(this.miniFoldersOpen=!1)}},data:function(){var t="0"!==Object(c["F"])("subfolderopen",!1),e="0"!==Object(c["F"])("subFilesOpen",!1),n="0"!==Object(c["F"])("subartboardsopen",!1),i=!1;return{subFoldersOpen:t,subFilesOpen:e,subArtboardsOpen:n,miniFoldersOpen:i}}},rm=im,om=(n("2c6a"),Object(Gr["a"])(rm,Qd,Zd,!1,null,"ae3e71d0",null)),am=om.exports,sm=function(){var t=this,e=t._self._c;return t.tipVisible?e("div",{staticClass:"pop-tip-text"},[e("p",[e("span",{staticClass:"loading"}),t._v(" "+t._s(t.tipText)+" ")])]):t._e()},cm=[],lm={computed:{tipText:function(){return"正在导出切图资源中,请稍后..."},tipVisible:function(){return this.$store.state.inOutput}}},um=lm,dm=(n("597f"),Object(Gr["a"])(um,sm,cm,!1,null,"960b11d8",null)),hm=dm.exports,fm=function(){var t=this,e=t._self._c;return e("header",[e("PathNav"),!t.setVisible||!t.inArtboardMode&&t.artShowInListMode?e("div"):e("div",{staticClass:"view-mode"},[e("div",{staticClass:"container"},[e("BtnContainerColor"),e("ScaleControl",{attrs:{type:t.inArtboardMode?1:0}})],1)]),e("div",{staticClass:"set"},[t.setVisible?[t.inArtboardMode?t._e():e("div",{staticClass:"btn-download",class:{on:t.inArtboardMultDownMode},attrs:{title:"批量下载画板预览图"},on:{click:function(e){return t.setInArtboardMultDownMode(!t.inArtboardMultDownMode)}}}),t.canShowUpload?e("BtnUpload"):t._e(),t.inCloudMode&&!t.inArtboardMode?e("BtnArtRenderMode"):t._e(),t.inCloudMode&&!t.inArtboardMode||t.canShowUpload?e("div",{staticClass:"line line-left"}):t._e(),e("div",{ref:"btnHelp",staticClass:"helper",class:{on:t.helperVisible},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickHelper(!t.helperVisible)}}},[e("Helper")],1),t.inCloudMode?e("BtnGoInteraction"):t._e(),t.inCloudMode&&t.inArtboardMode?e("ArtboardVersion"):t._e()]:t.inCloudMode&&!t.cloudFolderNotFound&&t.permission&&t.canShowUpload?[e("BtnUpload"),e("div",{staticClass:"line line-left"})]:t._e(),t.curNetDiskFile&&t.curFileDownloadUrl?e("div",{staticClass:"btn-download",attrs:{title:"下载文件"},on:{click:function(e){return t.clickDownloadNetDiskFile(t.curNetDiskFile)}}}):t._e(),t.inNetDiskFileMode&&t.curFileInfo?e("HeaderBtnFileVersion"):t._e(),t.canShowLog?e("CloudFolderLogs"):t._e(),t.inCloudMode&&t.cloudIsLogin?e("UserNotifyButton"):t._e(),e("UserInfo",{attrs:{setVisible:t.setVisible}})],2),t.inCloudMode?e("UserNotify"):t._e()],1)},mm=[],vm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn-container-color"},[e("a",{staticClass:"btn-color",style:{backgroundColor:t.backgroundColor},attrs:{href:"javascript:;",title:"设置预览场景背景色"},on:{click:function(e){t.boxVisible=!t.boxVisible}}}),t.boxVisible?e("div",{staticClass:"box"},[e("h5",{attrs:{"data-unhide":"1"}},[t._v("场景背景色")]),e("div",{staticClass:"list",attrs:{"data-unhide":"1"}},[e("div",{staticClass:"item item-color-picker",class:{on:t.usedColorPicker},attrs:{"data-unhide":"1"},on:{click:function(e){return t.clickColorPicker()}}},[e("input",{ref:"colorPicker",attrs:{title:"自定义背景色","data-unhide":"1",type:"color"},on:{input:t.onColorPickerChange}})]),e("div",{staticClass:"line",attrs:{"data-unhide":"1"}}),t._l(t.recommendedColors,(function(n,i){return e("div",{key:i,staticClass:"item",class:{on:t.backgroundColor===n},style:{"background-color":n},attrs:{"data-unhide":"1"},on:{click:function(e){return t.clickRecommendColor(n)}}})}))],2)]):t._e()])},pm=[],bm={methods:{onColorPickerChange:function(t){var e,n=null===(e=t.target)||void 0===e?void 0:e.value;n&&this.clickRecommendColor(n)},clickColorPicker:function(){var t=this.$refs.colorPicker;t&&(t.value=this.backgroundColor)},clickRecommendColor:function(t){this.$store.commit("setInteractionBackground",t)},hideContextmenu:function(t){var e,n=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),"1"!==(null===(e=t.target)||void 0===e?void 0:e.getAttribute("data-unhide"))&&(this.handle=setTimeout((function(){n.boxVisible=!1}),100)))}},watch:{boxVisible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},computed:{recommendedColors:function(){return["#000000","#282828","#ffffff","#eeeeee","#f5f5f5"]},usedColorPicker:function(){var t=this.recommendedColors,e=this.backgroundColor;return!t.find((function(t){return t===e}))},backgroundColor:function(){return this.interactionSet.backgroundColor},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet}},data:function(){return{handle:0,boxVisible:!1}},beforeDestroy:function(){window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0),clearTimeout(this.handle)}},gm=bm,wm=(n("c2cb"),Object(Gr["a"])(gm,vm,pm,!1,null,"6dc98455",null)),ym=wm.exports,km=function(){var t=this,e=t._self._c;return t.notSupportArtboardVerCloudVersion?t._e():e("div",{staticClass:"artboard-version-info"},[e("div",{staticClass:"btn-art-verison",class:{on:t.artboardDetail.artboardVerListVisible},attrs:{title:"查看历史版本"},on:{click:function(e){t.artboardDetail.artboardVerListVisible=!t.artboardDetail.artboardVerListVisible}}}),e("ArtboardVersionList",{ref:"artboardVersionList",attrs:{readonlyCurrentFolder:t.fileReadOnly,artboardVerId:t.artboardVerId,notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion},on:{artboardVerRemove:t.artboardVerRemove}})],1)},Cm=[],xm=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"artboard-version-list",on:{click:function(e){t.notClickClose=!0}}},[t.isError?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取版本信息...",errorText:t.artboardDetail.errorText,isLoading:t.fetching,isError:t.isError,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t.fetching||t.artboardDetailData?[e("div",{staticClass:"base"},[e("div",{staticClass:"tab"},[t._v("最新版本")]),e("ArtboardVersionItem",{attrs:{fetching:t.fetching,notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion,readonlyCurrentFolder:t.readonlyCurrentFolder,artboardVerData:t.fetching?null:t.artboardDetailData.artboard,selected:t.lastVersionSelected,artboardDetailData:t.fetching?null:t.artboardDetailData},on:{artboardVerRemove:t.artboardVerRemove,setInConfirm:t.setInConfirm}}),e("div",{staticClass:"tab",domProps:{textContent:t._s("历史版本".concat(t.fetching?"":"(".concat(t.histories.length,")")))}})],1),t.histories.length>0?e("div",{staticClass:"list"},[e("LazyList",{ref:"lazyList",attrs:{list:t.histories,lineHeight:t.itemLineHeight},scopedSlots:t._u([{key:"default",fn:function(n){return e("ArtboardVersionItem",{key:n.item?"".concat(n.item.lastVersionId,":").concat(n.item.id):"i-".concat(n.index),attrs:{fetching:t.fetching,notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion,readonlyCurrentFolder:t.readonlyCurrentFolder,artboardVerData:t.fetching?null:n.item,selected:!t.fetching&&t.artboardVerId===n.item.lastVersionId,artboardDetailData:t.fetching?null:t.artboardDetailData},on:{artboardVerRemove:t.artboardVerRemove,setInConfirm:t.setInConfirm}})}}],null,!1,2780817675)})],1):t.notSupportArtboardVerCloudVersion?e("div",{staticClass:"cloudversion-tip",domProps:{textContent:t._s("私有云部署包版本过低(".concat(t.currentCloudVersion,"),请更新私有云部署包"))}}):e("div",{staticClass:"empty"})]:t._e()],2):t._e()},Sm=[],Tm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-version-item",class:{on:t.selected,"skeleton-loading":t.fetching},attrs:{title:t.userFaceTitle},on:{click:t.clickItem}},[e("div",{staticClass:"date skeleton-sub-r",domProps:{textContent:t._s(t.dateStr)}}),e("div",{staticClass:"user"},[t.fetching?e("div",{staticClass:"userface skeleton-sub-r"}):t._e(),e("div",{staticClass:"name skeleton-sub-r",domProps:{textContent:t._s(t.userNickName)}})]),e("div",{staticClass:"ver skeleton-sub-r",domProps:{textContent:t._s(t.artboardVerId)}}),t.fetching||t.notSupportArtboardVerCloudVersion||t.readonlyCurrentFolder||!t.cloudUserIsDesigner?t._e():e("div",{staticClass:"btn-del",attrs:{title:"删除该版本"},on:{click:t.clickDelArtboardVer}})])},Om=[],Im={methods:{setInConfirm:function(t){this.$emit("setInConfirm",t)},clickDelArtboardVer:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,c,u,d,h,f,m,v;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.artboardVerData,r=t.readonlyCurrentFolder,o=t.parentId,a=t.cloudUserIsDesigner,n){e.n=1;break}return e.a(2);case 1:return s=n.lastVersionId,c=n.name,u=n.guid,e.p=2,e.n=3,t.checkLoginThrow();case 3:if(e.v){e.n=4;break}return e.a(2);case 4:if(!r&&a){e.n=5;break}return e.a(2,t.showTextTip("您没有权限删除画板「".concat(c,"」")));case 5:return h="确认要删除画板版本#".concat(s," 吗?"),t.setInConfirm(!0),e.n=6,t.confirm({text:h,title:"删除确认"});case 6:if(e.v){e.n=7;break}return e.a(2);case 7:return f=new FormData,f.append("guid",u),f.append("verId",s),f.append("parentId",o),e.n=8,t.fetchPostCloudApi("removeartboardverbyweb",{body:f});case 8:if(m=e.v,Object(l["k"])(m)){e.n=9;break}throw new Error("返回值异常:".concat(m));case 9:if(m.success){e.n=10;break}throw new Error(m.errMsg);case 10:t.showTextTip(null!==(d=m.errMsg)&&void 0!==d?d:"已删除画板版本#".concat(s)),t.$emit("artboardVerRemove",s),e.n=12;break;case 11:e.p=11,v=e.v,t.showTextTip(v);case 12:return e.p=12,t.setInConfirm(!1),e.f(12);case 13:return e.a(2)}}),e,null,[[2,11,12,13]])})))()},clickItem:function(t){var e;null!==(e=t.target)&&void 0!==e&&e.classList.contains("btn-del")||this.setCurArtboardVer(this.artboardVerData.lastVersionId)}},computed:{parentId:function(){return this.cloudCurrentFolderId},artboardVerId:function(){var t=this.artboardVerData,e=this.fetching;return e?"":t.lastVersionId?"#".concat(t.lastVersionId):"null"},dateStr:function(){var t=this.artboardVerData,e=this.fetching;return e?"":Object(l["b"])(t.updateTimeTimes,this.webViewStateTimes)},userFaceTitle:function(){var t=this.artboardVerData,e=this.fetching;return e?"":t?vi(t):null},userNickName:function(){var t=this.artboardVerData,e=this.fetching;if(e)return"";if(!t)return"-";var n=t.updaterName;return n||"-"}},props:{notSupportArtboardVerCloudVersion:Boolean,readonlyCurrentFolder:Boolean,artboardVerData:Object,selected:Boolean,artboardDetailData:Object,fetching:Boolean}},Am=Im,Fm=(n("1779"),Object(Gr["a"])(Am,Tm,Om,!1,null,"8a35cb34",null)),jm=Fm.exports,_m={components:{ArtboardVersionItem:jm,LazyList:_h,NetworkLoading:Iu},methods:{setInConfirm:function(t){this.inConfirm=t},clickReload:function(){this.artboardDetail.refreshDataTicks=Date.now()},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.inConfirm||(t.notClickClose?t.notClickClose=!1:t.setVisible(!1))}),50)},artboardVerRemove:function(t){this.$emit("artboardVerRemove",t)},scrollToSelectArtboardVer:function(){var t,e=this.artboardVerId,n=this.lastVersionSelected;!n&&e>0&&(null===(t=this.$refs.lazyList)||void 0===t||t.scrollTo((function(t){return(null===t||void 0===t?void 0:t.lastVersionId)===e})))},setVisible:function(t){this.artboardDetail.artboardVerListVisible=t}},beforeDestroy:function(){this.setVisible(!1),window.removeEventListener("click",this.closeSelf,!0),clearTimeout(this.closeHandle)},watch:{visible:function(t){var e=this;t?(requestAnimationFrame((function(){e.$nextTick((function(){e.scrollToSelectArtboardVer()}))})),window.addEventListener("click",this.closeSelf,!0)):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},computed:{fetching:function(){return this.fetchDetailState===c["a"].Fetching},isError:function(){return this.fetchDetailState===c["a"].Error},artboardDetailData:function(){var t=this.curArtboard;if(!t)return null;var e=t.artboard,n=t.historyArtboards;return n?{artboard:e,historyArtboards:n}:null},versionCount:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.versionCount)&&void 0!==t?t:0},fetchDetailState:function(){return this.artboardDetail.fetchState},artboardDetail:function(){return this.$store.state.artboardDetail},visible:function(){var t=this.artboardDetail;return t.artboardVerListVisible},lastVersionSelected:function(){var t,e=this.curArtboard,n=this.artboardVerId,i=this.fetching;return!i&&(n===(null===e||void 0===e||null===(t=e.artboard)||void 0===t?void 0:t.lastVersionId)||0===n)},histories:function(){var t,e;return this.fetching?this.versionCount>1?[null]:[]:null!==(t=null===(e=this.curArtboard)||void 0===e?void 0:e.historyArtboards)&&void 0!==t?t:[]},itemLineHeight:function(){return 85}},data:function(){return{notClickClose:!1,closeHandle:0,inConfirm:!1}},created:function(){},props:{readonlyCurrentFolder:Boolean,artboardVerId:Number,notSupportArtboardVerCloudVersion:Boolean}},Mm=_m,Lm=(n("1323"),Object(Gr["a"])(Mm,xm,Sm,!1,null,"1f094879",null)),Pm=Lm.exports,Dm={components:{ArtboardVersionList:Pm},methods:{artboardVerRemove:function(t){if(!("number"!==typeof t||isNaN(t)||t<1)){var e=this.curArtboard,n=this.artboardVerId,i=this.artboard;if(e&&i){var r=n===t,o=e.historyArtboards;if(i.lastVersionId===t){if(0===o.length)return void this.$store.commit("removeArtboard",i.guid);var a=o.splice(0,1)[0];r&&(e.isError=!1,e.isFetching=!1,e.isLoaded=!1,e.loadErrMsg=null),e.artboard=a}else{var s=null===o||void 0===o?void 0:o.findIndex((function(e){var n;return(null!==(n=null===e||void 0===e?void 0:e.lastVersionId)&&void 0!==n?n:e.verId)===t}));if(-1===s)return;o.splice(s,1),i.versionCount=1+o.length}r&&this.setCurArtboardVer(i.lastVersionId)}}},reloadHistoryList:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,c,u,d,h,f,m,v;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.curArtboard,n){e.n=1;break}return e.a(2);case 1:return e.p=2,s=new FormData,c=n.artboard.cid,s.append("artboardid",c),e.n=3,t.fetchPostCloudApi("GetArtboardVerListByWeb",{body:s});case 3:if(u=e.v,u.success){e.n=4;break}return e.a(2);case 4:if(u=u.data,Object(l["k"])(u)){e.n=5;break}return e.a(2);case 5:Object(l["k"])(u.users)||(u.users={}),Object(l["i"])(u.historyArtboards)?u.historyArtboards.forEach((function(t){En(t),F(t),ni(t)})):u.historyArtboards=[],d=function(t){if(!(!Object(l["k"])(t)||Object(l["j"])(t.updaterEmail)&&Object(l["j"])(t.updaterName))){var e=u.users[t.updaterId];e&&(t.updaterEmail=e.email,t.updaterName=e.nickName)}},h=null!==(r=u.artboard.cid)&&void 0!==r?r:u.artboard.id,u.artboard.cid=h,null!==(a=(o=u.artboard).boundsInArtboard)&&void 0!==a||(o.boundsInArtboard=null),u.historyArtboards.forEach((function(t){var e;d(t),t.cid=h,null!==(e=t.boundsInArtboard)&&void 0!==e||(t.boundsInArtboard=null),null==t.lastVersionId&&(t.lastVersionId=t.verId)})),d(u.artboard),h===c&&(n.historyArtboards=u.historyArtboards,f=n.artboardVerData,null!=f&&(m=f.lastVersionId,-1==u.historyArtboards.findIndex((function(t){return t.lastVersionId===m}))&&t.setCurArtboardVer(u.artboard.lastVersionId))),v=tr("comment",c),v&&(v.artboard=u.artboard,v.historyArtboards=u.historyArtboards),e.n=7;break;case 6:e.p=6,e.v;case 7:return e.a(2)}}),e,null,[[2,6]])})))()}},computed:{artboardVerChangeKey:function(){var t=this.artboard;return t?"".concat(t.updateTimeTimes,":").concat(t.versionCount):null},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardVerId:function(){var t,e;return null!==(t=null===(e=this.curArtboardLoadedVerData)||void 0===e?void 0:e.lastVersionId)&&void 0!==t?t:0},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!0}return!1},fileReadOnly:function(){return this.cloudNotSupportEdit||!this.canChangeFile},cloudNotSupportEdit:function(){return Qr.notSupportNetDiskFileWebUpload(this.cloudVersion)},notSupportArtboardVerCloudVersion:function(){return Qr.notSupportAiPrompt(this.cloudVersion)},artboardDetail:function(){return this.$store.state.artboardDetail}},watch:{artboardVerChangeKey:function(t){t&&this.reloadHistoryList()}},created:function(){this.reloadHistoryList()}},Nm=Dm,Em=(n("f2ac"),Object(Gr["a"])(Nm,km,Cm,!1,null,"1977c3f9",null)),Rm=Em.exports,Vm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdisk-upload"},[e("div",{staticClass:"btn-netdisk-upload",class:{off:t.cannotUseNetDisk},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickOpenNetDiskUploadBox.apply(null,arguments)}}},[e("ul",[e("li",{staticClass:"btn-upload-file",on:{click:t.clickOpenNetDiskUploadBox}},[t._v("上传文件")]),e("li",{staticClass:"btn-upload-link",on:{click:t.clickAddNetDiskLink}},[t._v("添加链接")])])]),t.linkbox.visible?e("LinkEdit",{attrs:{link:t.linkbox},on:{onFileChanged:t.onFileChanged}}):t._e(),e("FileUpload",{attrs:{filebox:t.filebox},on:{onFileChanged:t.onFileChanged}})],1)},Bm=[],Hm=(n("9911"),function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"pop-box cloudfile-linkedit",on:{mousedown:function(t){t.stopPropagation()}}},[e("div",{staticClass:"box"},[e("a",{staticClass:"sys-close",attrs:{href:"javascript:;",title:"取消操作"},on:{click:t.clickCloseBox}}),e("h5",[t._v(t._s(t.isAdd?"添加":"编辑")+"链接")]),e("h6",[t._v(t._s(t.isAdd?"添加一个":"编辑")+"链接以便从标记狮访问它")]),e("div",{staticClass:"form"},[e("div",{staticClass:"title"},[t._v("链接名称")]),e("UserInput",{ref:"name",attrs:{defaultBorder:!0,placeholder:"请输入链接名称",target:"inp-name",initValue:t.linkData.name,maxLength:100},on:{change:t.onNameChange}}),e("div",{staticClass:"title"},[t._v("链接地址")]),e("UserInput",{ref:"link",attrs:{defaultBorder:!0,placeholder:"请输入链接地址,以https://、http:// 或 ftp:// 开头",target:"inp-link",initValue:t.linkData.link,maxLength:8192},on:{change:t.onLinkChange}})],1),e("div",{staticClass:"btns"},[e("a",{staticClass:"btn-cancel",attrs:{href:"javascript:;"},on:{click:t.clickCloseBox}},[t._v("取消")]),e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.clickSave}},[t._v(t._s(t.submitFetching?"提交中...":"确定"))])])])]):t._e()}),Um=[],Gm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"input",class:t.cls},["checkbox"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:"checkbox"},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{blur:t.blur,focus:t.focus,change:function(e){var n=t.value,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);i.checked?a<0&&(t.value=n.concat([o])):a>-1&&(t.value=n.slice(0,a).concat(n.slice(a+1)))}else t.value=r}}}):"radio"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:"radio"},domProps:{checked:t._q(t.value,null)},on:{blur:t.blur,focus:t.focus,change:function(e){t.value=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:t.type},domProps:{value:t.value},on:{blur:t.blur,focus:t.focus,input:function(e){e.target.composing||(t.value=e.target.value)}}}),t.showVerify?e("img",{staticClass:"verifycode",attrs:{src:t.verifySrc,title:"点击刷新验证码"},on:{click:function(e){return t.clickVerifyCode()}}}):t.showPwd?e("span",{staticClass:"pwd-mode",class:{"in-text":t.pwdModeInText},on:{click:function(e){t.pwdModeInText=!t.pwdModeInText}}}):t.showPhoneCode?e("a",{staticClass:"button btn-phoneCodeSend",class:{off:!t.phoneCodeBtnEnable,light:t.phoneCodeBtnEnable},attrs:{href:"javascript:;"},on:{click:t.sendPhoneCode}},[t._v(t._s(t.phoneCodeBtnText))]):t._e()])},Wm=[],$m={methods:{sendPhoneCode:function(){this.$emit("sendPhoneCode")},setFocus:function(){var t=this.$refs.input;t&&t.focus()},setValue:function(t){"string"===typeof t&&(this.value=t)},clearAndFocus:function(){this.value="",this.setFocus()},refreshCode:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:t.ticks=Date.now(),t.value="";case 1:return e.a(2)}}),e)})))()},clickVerifyCode:function(t){var e=this.ticks,n=Date.now(),i=n-e;i<500&&i>=0||(this.ticks=n,this.value="",!0!==t&&this.setFocus())},focus:function(){this.focused=!0},blur:function(){this.focused=!1}},watch:{showVerify:function(t){t&&this.refreshCode()},value:function(t){this.$emit("change",t)}},props:{target:String,initValue:String,placeholder:String,maxLength:Number,defaultBorder:Boolean,phoneCodeBtnText:String,phoneCodeBtnEnable:Boolean},computed:{autocomplete:function(){return"password"===this.type?"new-password":"off"},type:function(){return"pwd2"===this.target||"pwd3"===this.target?"password":this.showPwd?this.pwdModeInText?"text":"password":"text"},verifySrc:function(){return"".concat(c["f"],"router/verifycode.ashx?r=").concat(this.ticks)},showPwd:function(){return"pwd"===this.target},showVerify:function(){return"verify"===this.target},showPhoneCode:function(){return"phoneCode"===this.target},cls:function(){var t=[],e=this.target;return e&&t.push(e),this.focused&&t.push("focused"),this.defaultBorder&&t.push("default-bor"),t}},created:function(){this.value=this.initValue,this.showVerify&&this.refreshCode()},data:function(){return{pwdModeInText:!1,focused:!1,value:"",ticks:Date.now()}}},zm=$m,Ym=(n("023f"),Object(Gr["a"])(zm,Gm,Wm,!1,null,"474237c6",null)),Xm=Ym.exports,Km={components:{UserInput:Xm},methods:{clickSave:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,c,u,d;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(!t.submitFetching){e.n=1;break}return e.a(2);case 1:if(n=t.linkData,n.name=n.name.trim(),n.link=n.link.trim(),r=t.isAdd,Object(l["j"])(n.name)){e.n=2;break}return t.showTextTip("链接名称不能为空,请输入链接名称"),o=t.$refs.name,o&&o.setFocus(),e.a(2);case 2:if(Object(l["j"])(n.link)){e.n=3;break}return t.showTextTip("链接地址不能为空,请输入链接地址"),a=t.$refs.link,a&&a.setFocus(),e.a(2);case 3:if(/^(?:ftp|http|https):\/\/.+$/.test(n.link)){e.n=4;break}return t.showTextTip("请输入合法的链接地址,以https://、http:// 或 ftp:// 开头"),s=t.$refs.link,s&&(null===s||void 0===s||s.setFocus()),e.a(2);case 4:if(r){e.n=5;break}if(c=t.link.data||{},c.name!==n.name||c.link!==n.link){e.n=5;break}return t.showTextTip("链接信息未发生变更"),t.clickCloseBox(),e.a(2);case 5:return t.submitFetching=!0,e.p=6,e.n=7,t.fetchPostCloudApi("setnetdisklinkbyweb",{timeout:1e4,body:n});case 7:if(u=e.v,Object(l["k"])(u)){e.n=8;break}return e.a(2);case 8:if(u.success){e.n=9;break}return t.showTextTip(u.errMsg),e.a(2);case 9:u=u.data,t.$emit("onFileChanged",{files:[u.data],folderUpdateTimes:u.folderUpdateTimes,isAdd:r}),t.clickCloseBox(),t.showTextTip("".concat(r?"添加":"编辑","链接成功")),e.n=11;break;case 10:e.p=10,d=e.v,t.showTextTip("".concat(r?"添加":"编辑","链接失败:").concat(d));case 11:return e.p=11,t.submitFetching=!1,e.f(11);case 12:return e.a(2)}}),e,null,[[6,10,11,12]])})))()},onNameChange:function(t){this.linkData.name=t},onLinkChange:function(t){this.linkData.link=t},clickCloseBox:function(){var t=this.link;t.data=null,t.visible=!1}},computed:{isAdd:function(){return 0==this.linkData.id&&!Object(l["j"])(this.linkData.secId)},visible:function(){return this.link.visible}},data:function(){return{submitFetching:!1,linkData:null}},props:{link:Object},created:function(){this.linkData=Object.assign({},this.link.data||{id:0,name:"",link:"",parentId:0,secId:""})}},qm=Km,Jm=(n("5ccb"),Object(Gr["a"])(qm,Hm,Um,!1,null,"4ab12b2e",null)),Qm=Jm.exports,Zm=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"pop-box cloudfile-upload",on:{mousedown:function(t){t.stopPropagation()},drop:function(t){t.preventDefault()}}},[e("div",{staticClass:"box"},[e("a",{staticClass:"sys-close",attrs:{href:"javascript:;",title:"取消操作"},on:{click:t.clickCloseBox}}),e("div",{staticClass:"drag-box",class:{dragging:t.dropTip.dragging}},[t._m(0),e("h4",[t._v(t._s(t.dragTitle))]),e("h5",[t._v("支持图片/SVG/PDF/Axure HTML演示文件以及其他任意格式文件")])]),t.hasFile?e("div",{ref:"files",staticClass:"files",on:{scroll:t.onBoxScroll}},[e("div",{staticClass:"height",class:{scrolling:t.scrolling},style:{height:t.boxRealHeight+"px"}},[e("div",{style:{"padding-top":t.renderListCssPaddingTop+"px"}},t._l(t.renderList,(function(t){return e("FileUploadItem",{key:t.id,attrs:{item:t}})})),1)])]):t._e(),e("div",{staticClass:"footer",class:{empty:!t.hasFile}},[t.hasFile?e("div",{staticClass:"other"},[e("div",{staticClass:"btn-clean btn-clean-all",on:{click:t.clickRemoveAll}},[t._v("清空全部")]),e("div",{staticClass:"btn-clean",on:{click:t.clickRemoveCompleted}},[t._v("清理已完成文件")])]):t._e(),e("div",{staticClass:"button light",on:{click:t.clickAddFiles}},[t._v("添加文件"),e("input",{attrs:{type:"file",value:"",size:"30",multiple:""},on:{change:t.onInputFileChange}})])])])]):t._e()},tv=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon"},[e("div",{staticClass:"l"}),e("div",{staticClass:"r"})])}];n("a4d3"),n("e01a");function ev(t,e,n,i){return nv.apply(this,arguments)}function nv(){return nv=Object(r["a"])(Object(i["a"])().m((function t(e,n,o,a){var s,l,u,d,h,f,m=arguments;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return s=m.length>4&&void 0!==m[4]&&m[4],d=15e3,t.p=1,u=document.createElement("video"),f="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",u.style.cssText=f,u.muted=!0,u.controls=!1,(e instanceof File||e instanceof Blob)&&(l=e=URL.createObjectURL(e)),t.n=2,new Promise((function(t,l){var m=!1,v=function(e){m||(m=!0,clearTimeout(b),t(e))},p=function(t){m||(m=!0,clearTimeout(b),l(t))},b=setTimeout((function(){p("获取视频预览图超时")}),d);u.addEventListener("error",(function(){var t,e;p(null!==(t=null===(e=u.error)||void 0===e?void 0:e.message)&&void 0!==t?t:"无法加载视频")})),u.addEventListener("loadeddata",(function(){try{if(m)return;var t,e,l=u,d=l.videoWidth,b=l.videoHeight;if(!(d>0))throw new Error("无法获取视频宽度");if(!(b>0))throw new Error("无法获取视频高度");s?a<d?(t=a,e=Math.round(a/d*b)):(t=d,e=b):(t=Math.round(d*a),e=Math.round(b*a)),h=document.createElement("canvas"),h.width=t,h.height=e,h.style.cssText=f,document.body.appendChild(h),u.addEventListener("seeked",Object(r["a"])(Object(i["a"])().m((function r(){var a,s;return Object(i["a"])().w((function(i){while(1)switch(i.p=i.n){case 0:if(!m){i.n=1;break}return i.a(2);case 1:return i.p=1,i.n=2,Object(c["pb"])(100);case 2:a=h.getContext("2d"),a.drawImage(u,0,0,t,e),h.toBlob(v,null!==o&&void 0!==o?o:"image/png",n),i.n=4;break;case 3:i.p=3,s=i.v,p(s.toString());case 4:return i.a(2)}}),r,null,[[1,3]])}))),{once:!0}),u.currentTime=u.duration>.01?.01:u.duration}catch(g){p(g.toString())}}),{once:!0}),document.body.appendChild(u),u.src=e}));case 2:return t.a(2,t.v);case 3:return t.p=3,l&&URL.revokeObjectURL(l),u&&u.remove(),h&&h.remove(),t.f(3);case 4:return t.a(2)}}),t,null,[[1,,3,4]])}))),nv.apply(this,arguments)}var iv=81920;function rv(){return iv*Object(c["ib"])(38,65)}var ov=function(){function t(e){var n=this;Object(d["a"])(this,t),Object(f["a"])(this,"hasExist",!1),Object(f["a"])(this,"uploadGuid",void 0),Object(f["a"])(this,"file",void 0),Object(f["a"])(this,"sliceLength",0),Object(f["a"])(this,"mainFileSliceCurrent",0),Object(f["a"])(this,"lineViewPackSliceCurrent",0),Object(f["a"])(this,"previewImageSliceCurrent",0),Object(f["a"])(this,"lineViewVer",0),Object(f["a"])(this,"supportPreviewFileExt",!1),Object(f["a"])(this,"supportXSPFilePreview",!1),Object(f["a"])(this,"supportOtherPreviews",!1),Object.keys(e).forEach((function(t){switch(t){case"needLineViewPack":case"needPreViewImage":return}n[t]=e[t]}))}return Object(h["a"])(t,[{key:"needLineViewPack",get:function(){return this.lineViewPackSliceCurrent>-1}},{key:"needPreViewImage",get:function(){return this.previewImageSliceCurrent>-1}}])}(),av={MainFile:0,LineViewPack:1,PreviewImage:2},sv=Object(h["a"])((function t(){Object(d["a"])(this,t),Object(f["a"])(this,"type",av.MainFile),Object(f["a"])(this,"uploadGuid",null),Object(f["a"])(this,"current",0),Object(f["a"])(this,"byteLength",0),Object(f["a"])(this,"rndLength",0)})),cv=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"folderId",0),Object(f["a"])(this,"guid",null),Object(f["a"])(this,"fileType",a["L"].Other),Object(f["a"])(this,"urlLink",null),Object(f["a"])(this,"lastWriteTime",0),Object(f["a"])(this,"fileName",null),Object(f["a"])(this,"previewFileExt",null),Object(f["a"])(this,"fileExt",null),Object(f["a"])(this,"sliceLength",0),Object(f["a"])(this,"mainFile",null),Object(f["a"])(this,"lineViewPack",null),Object(f["a"])(this,"previewImage",null)}return Object(h["a"])(t,[{key:"lineViewVer",get:function(){return 1}}])}(),lv=function(){function t(e,n,i,r){Object(d["a"])(this,t),Object(f["a"])(this,"size",0),Object(f["a"])(this,"hash",null),Object(f["a"])(this,"quickHash",null),Object(f["a"])(this,"sliceCount",0),this.hash=e,this.quickHash=n,this.size=i,this.updateSliceCount(r)}return Object(h["a"])(t,[{key:"updateSliceCount",value:function(t){this.sliceCount=Math.ceil(this.size/t)}}])}(),uv=Object(h["a"])((function t(){Object(d["a"])(this,t),Object(f["a"])(this,"lineViewVer",0),Object(f["a"])(this,"supportPreviewFileExt",!1),Object(f["a"])(this,"supportXSPFilePreview",!1),Object(f["a"])(this,"supportOtherPreviews",!1)})),dv=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"mainFile",null),Object(f["a"])(this,"lineViewPack",null),Object(f["a"])(this,"previewImage",null),Object(f["a"])(this,"previewImageWithExt",null)}return Object(h["a"])(t,[{key:"setPreviewImage",value:function(t,e){e?this.previewImageWithExt=t:this.previewImage=t}},{key:"getPreviewImage",value:function(t){return t?this.previewImageWithExt:this.previewImage}}])}(),hv=function(){function t(){var e=this;Object(d["a"])(this,t),Object(f["a"])(this,"id",0),Object(f["a"])(this,"folderId",0),Object(f["a"])(this,"guid",null),Object(f["a"])(this,"fileType",void 0),Object(f["a"])(this,"currentPosition",0),Object(f["a"])(this,"currentSize",0),Object(f["a"])(this,"status",wv.Fetching),Object(f["a"])(this,"_fileName",null),Object(f["a"])(this,"_size",0),Object(f["a"])(this,"_lastWriteTime",0),Object(f["a"])(this,"file",null),Object(f["a"])(this,"hash",null),Object(f["a"])(this,"quickHash",null),Object(f["a"])(this,"ext",null),Object(f["a"])(this,"lineViewPack",null),Object(f["a"])(this,"previewImage",null),Object.keys(this).filter((function(t){return"_"===t[0]})).forEach((function(t){Object(a["tb"])(e,t,!1)}))}return Object(h["a"])(t,[{key:"needLineViewPack",get:function(){switch(this.fileType){case a["L"].Word:case a["L"].Excel:case a["L"].PPT:return!0;default:return!1}}},{key:"isVideoMediaFile",get:function(){var t=this.fileName,e=this.fileType;return e===a["L"].Media&&t&&/\.(?:mp4|avi|rm|rmvb|3gp|m4v|mkv|mov|webm)$/i.test(t)}},{key:"isJsonFile",get:function(){var t=this.fileName;return t&&/\.json$/gi.test(t)}},{key:"isIconFile",get:function(){var t=this.fileType,e=this.fileName;return t==a["L"].Image&&(!!Object(l["j"])(e)&&/\.(icon|ico|icns)$/gi.test(e))}},{key:"isSvgFile",get:function(){var t=this.fileType,e=this.fileName;return t==a["L"].Image&&/\.(svg)$/gi.test(e)}},{key:"needPreviewImage",get:function(){switch(this.fileType){case a["L"].Image:return!0;case a["L"].XD:case a["L"].Sketch:case a["L"].Figma:return!0;case a["L"].Lottie:return!0;case a["L"].Pdf:return!0;case a["L"].Media:return this.isVideoMediaFile;default:return!1}}},{key:"currentPercentage",get:function(){var t=this.currentSize;if(0==t)return 0;var e=this.currentPosition;return e<1?0:e>t?100:Math.round(1e4*e/t)/100}},{key:"fileName",get:function(){var t,e=this._fileName;if(e)return e;var n=this.file;return e=this._fileName=null!==(t=null===n||void 0===n?void 0:n.name)&&void 0!==t?t:null,e}},{key:"fileExt",get:function(){var t=this.fileName;if(!t)return null;var e=t.lastIndexOf(".");return-1===e?"":t.substring(e)}},{key:"size",get:function(){var t,e=this._size;if(e>0)return e;var n=this.file;return e=this._size=null!==(t=null===n||void 0===n?void 0:n.size)&&void 0!==t?t:0,e}},{key:"lastWriteTime",get:function(){var t,e=this._lastWriteTime;if(e>0)return e;var n=this.file;return e=this._lastWriteTime=null!==(t=null===n||void 0===n?void 0:n.lastModified)&&void 0!==t?t:0,e}},{key:"needResetHash",value:function(){return!Object(l["j"])(this.hash)||!Object(l["j"])(this.quickHash)}}])}(),fv=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"size",0),Object(f["a"])(this,"lastWriteTime",0),Object(f["a"])(this,"file",null),Object(f["a"])(this,"previewFileExt",null),Object(f["a"])(this,"hash",null),Object(f["a"])(this,"quickHash",null)}return Object(h["a"])(t,[{key:"needResetHash",value:function(){return!Object(l["j"])(this.hash)||(!Object(l["j"])(this.quickHash)||null==this.file)}}])}(),mv={TextTip:Symbol("TextTip"),UploadUpdate:Symbol("UploadUpdate"),UploadRemove:Symbol("UploadRemove"),CloudFileUpdate:Symbol("CloudFileUpdate"),WebUserNotLogin:Symbol("WebUserNotLogin"),WebFileChanged:Symbol("WebFileChanged")},vv=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"inlineEvents",{}),Object(f["a"])(this,"cloudNetDiskFileUploaderInfoCache",null),Object(f["a"])(this,"uploadList",[]),Object(f["a"])(this,"_sql_auto_id",1)}return Object(h["a"])(t,[{key:"on",value:function(t,e){if(!t)return!1;if("function"!==typeof e)return!1;var n=this.inlineEvents,i=n[t];if(i){var r=i.find((function(t){return t===e}));r||i.push(e)}else i=n[t]=[e];return!0}},{key:"off",value:function(t,e){if(!t)return!1;var n=this.inlineEvents,i=n[t];if(!i||0===i.length)return!0;if(void 0===e)n[t]=[];else{var r=i.findIndex((function(t){return t===e}));-1!==r&&i.splice(r,1)}return!0}},{key:"emit",value:function(t,e){if(t){var n=this.inlineEvents,i=n[t];i&&0!==i.length&&i.forEach((function(t){t(e)}))}}},{key:"runTask",value:function(t){if(t)switch(t.type){case yv.Remove_All:case yv.Remove_Completed:case yv.Remove_Select:this.removeTask(t);break;case yv.Resume:case yv.Pause:case yv.ReStart:this.updateTask(t);break;case yv.Add:this.addTask(t);break}}},{key:"addTask",value:function(t){var e=this;if(null!=t.files&&0!=t.files.length){var n={},i=[];if(t.files.forEach((function(t){try{var e=t.name;if(!Object(l["j"])(e))return;n["".concat(e,"-").concat(t.size)]=t}catch(i){}})),0!=Object.keys(n).length){var r=0,o=!1,s=this.uploadList;s.forEach((function(e){var i="".concat(e.fileName,"-").concat(e.size);if(e.folderId==t.folderId&&n[i])switch(e.status){case wv.PreLoadFileMsg:delete n[i],o=!0;break;case wv.Waitting:delete n[i],o=!0;break;case wv.Fetching:delete n[i],o=!0;break;case wv.Paused:case wv.Errored:case wv.Completed:case wv.RemovedMark:return e.quickHash="",e.hash="",e.status=wv.Waitting,delete n[i],void r++}})),Object.keys(n).forEach((function(e){var r=n[e],o=new hv;o.id=0,o.status=wv.PreLoadFileMsg,o.fileType=a["L"].Other,o.ext="文件等待上传中",o.file=r,o.folderId=t.folderId,o.guid=null,o.hash=null,o.currentPosition=0,o.currentSize=0,o.quickHash=null,i.push(o),s.push(o)})),r=this.updateToSql(i),r>0?(r<i.length&&(i=i.filter((function(t){return t.id>0}))),this.sendStateToWeb(i),this.showTextTip("共计".concat(r,"个文件被添加到上传列表")),this.updatePreLoadFileMsgs(i)):o&&this.showTextTip("文件已经在上传列表中,请不要重复添加"),requestAnimationFrame((function(){e.startUploadTask()}))}}}},{key:"showTextTip",value:function(t){this.emit(mv.TextTip,t)}},{key:"getUploadTask",value:function(){var t=this,e=this.uploadList,n=e.find((function(t){return t.status===wv.Fetching}));return null!=n?null:(n=e.find((function(e){return e.status==wv.Waitting&&(!e.needResetHash()||(e.status=wv.PreLoadFileMsg,e.ext="文件等待上传中",t.sendStateToWeb(e),t.updatePreLoadFileMsg(e),!1))})),null==n?null:(n.status=wv.Fetching,n.ext="",this.sendStateToWeb(n),n))}},{key:"enpostdata",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,ls("upload_assist","string"===typeof e?e:JSON.stringify(e),n>0?n:0);case 1:return r=t.v,t.a(2,r)}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getUrlLink",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(e.fileType==a["L"].Url){t.n=1;break}return t.a(2);case 1:n.urlLink="";case 2:return t.a(2)}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getUploadPreInfo",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return o=this,t.n=1,this.enpostdata(e);case 1:return a=t.v,t.n=2,o.fetchPostCloudApi.call(o,"netdiskfilepreuploadbyweb",{body:a,timeout:1e4});case 2:if(r=t.v,r.success){t.n=3;break}throw null!==(n=r.errMsg)&&void 0!==n?n:"数据传输异常「".concat(r.code,"」(NetDiskFilePreUpload)");case 3:if(r.data){t.n=4;break}throw"数据传输异常,data is null(NetDiskFilePreUpload)";case 4:return t.a(2,new ov(r.data))}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"startUploadTask",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(){var e,n,o,a,s,l,u,d,h,f,m,v,p,b,g,w,y,k,C=this;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(e=this.getUploadTask(),null!=e){t.n=1;break}return t.a(2);case 1:if(n=function(){return e.status==wv.Fetching},o=function(t){t()},t.p=2,0!=e.size){t.n=3;break}throw"不能上传文件大小为0的文件";case 3:return u=rv(),d=new cv,d.fileName=e.fileName,d.fileType=e.fileType,d.folderId=e.folderId,d.guid=e.guid,d.mainFile=new lv(e.hash,e.quickHash,e.size,u),d.lastWriteTime=e.lastWriteTime,d.fileExt=null!==(a=e.fileExt)&&void 0!==a?a:"",d.sliceLength=u,t.n=4,this.getUrlLink(e,d);case 4:return e.needLineViewPack&&null!=e.lineViewPack&&(d.lineViewPack=new lv(e.lineViewPack.hash,e.lineViewPack.quickHash,e.lineViewPack.size,u)),e.needPreviewImage&&null!=e.previewImage&&(d.previewImage=new lv(e.previewImage.hash,e.previewImage.quickHash,e.previewImage.size,u),d.previewFileExt=e.isSvgFile?e.previewImage.previewFileExt:null),t.n=5,this.getUploadPreInfo(d);case 5:if(h=t.v,f=new uv,f.lineViewVer=h.lineViewVer,f.supportPreviewFileExt=h.supportPreviewFileExt,f.supportXSPFilePreview=h.supportXSPFilePreview,f.supportOtherPreviews=!!h.supportOtherPreviews,this.setCloudNetDiskFileUploaderInfo(f),!h.hasExist){t.n=6;break}return o((function(){e.status=wv.Completed,e.ext="文件已存在,无需更新",e.currentSize=e.currentPosition=e.size,C.updateToSql([e]),C.sendStateToWeb(e),h.webFile&&C.sendFileItemToWeb({data:h.webFile})})),t.a(2);case 6:return o((function(){e.guid=h.uploadGuid,C.updateToSql([e])})),d.sliceLength=h.sliceLength,d.mainFile.updateSliceCount(d.sliceLength),null===(s=d.lineViewPack)||void 0===s||s.updateSliceCount(d.sliceLength),null===(l=d.previewImage)||void 0===l||l.updateSliceCount(d.sliceLength),m=new sv,m.uploadGuid=h.uploadGuid,m.current=h.mainFileSliceCurrent,m.type=av.MainFile,v=d.mainFile.size,p=0,b=e.needLineViewPack&&null!=e.lineViewPack&&h.needLineViewPack,g=e.needPreviewImage&&null!=e.previewImage&&h.needPreViewImage,b&&(v+=d.lineViewPack.size),g&&(v+=d.previewImage.size),e.currentSize=v,w=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(r,a,s){var l,u,f;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(t.p=0,!(m.current<r.sliceCount)){t.n=8;break}l={position:0,length:r.size,file:a};case 1:if(!(l.position<l.length)){t.n=6;break}return m.current++,u=Math.min((m.current-1)*d.sliceLength,r.size),m.byteLength=Math.min(d.sliceLength,r.size-u),m.rndLength=Object(c["ib"])(10,128),t.n=2,C.uploadSlice(l,m,u,(function(t){var i=n();return i&&o((function(){e.currentPosition=p+t,C.sendStateToWeb(e)})),i}));case 2:if(f=t.v,null!=f){t.n=3;break}return t.a(2,!1);case 3:if(f.success){t.n=5;break}if(!s){t.n=4;break}throw f.errMsg;case 4:return t.a(2,!1);case 5:l.position=u+m.byteLength,t.n=1;break;case 6:if(n()){t.n=7;break}return t.a(2,!1);case 7:o((function(){e.currentPosition=p+Math.min(m.current*h.sliceLength,r.size),C.sendStateToWeb(e)}));case 8:return t.a(2,!0);case 9:return t.p=9,p+=r.size,t.f(9);case 10:return t.a(2)}}),t,null,[[0,,9,10]])})));return function(e,n,i){return t.apply(this,arguments)}}(),t.n=7,w(d.mainFile,e.file,!0);case 7:if(!e.needLineViewPack||null==e.lineViewPack||!h.needLineViewPack){t.n=9;break}return m.type=av.LineViewPack,m.current=h.lineViewPackSliceCurrent,t.n=8,w(d.lineViewPack,e.lineViewPack.file,!1);case 8:if(t.v){t.n=9;break}return t.a(2);case 9:if(!e.needPreviewImage||null==e.previewImage||!h.needPreViewImage){t.n=11;break}return m.type=av.PreviewImage,m.current=h.previewImageSliceCurrent,t.n=10,w(d.previewImage,e.previewImage.file,!1);case 10:if(t.v){t.n=11;break}return t.a(2);case 11:if(n()){t.n=12;break}return t.a(2);case 12:return t.n=13,this.uploadCompleted(m);case 13:if(y=t.v,null!=y){t.n=14;break}return t.a(2);case 14:o((function(){e.status=wv.Completed,e.ext="文件上传成功",e.currentPosition=e.currentSize=e.size,C.updateToSql([e]),C.sendStateToWeb(e),C.sendFileItemToWeb(y)})),t.n=17;break;case 15:if(t.p=15,k=t.v,n()){t.n=16;break}return t.a(2);case 16:o((function(){e.status=wv.Errored,e.ext=k.toString(),C.updateToSql([e]),C.sendStateToWeb(e)}));case 17:return t.p=17,requestAnimationFrame((function(){C.startUploadTask()})),t.f(17);case 18:return t.a(2)}}),t,this,[[2,15,17,18]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"sendFileItemToWeb",value:function(t){null!=t&&this.emit(mv.WebFileChanged,t)}},{key:"uploadCompleted",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a,s;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return e.byteLength=0,e.rndLength=0,e.current=0,t.p=1,o=this,t.n=2,this.enpostdata(e);case 2:return a=t.v,t.n=3,o.fetchPostCloudApi.call(o,"netdiskfilesavebyweb",{body:a,timeout:1e4});case 3:if(n=t.v,n.success){t.n=4;break}throw null!==(r=n.errMsg)&&void 0!==r?r:"数据传输异常「".concat(n.code,"」(UploadCompleted)");case 4:if(n.data){t.n=5;break}throw"数据传输异常,data is null(UploadCompleted)";case 5:return t.a(2,n.data);case 6:throw t.p=6,s=t.v,"".concat(s.toString(),"(UploadCompleted)");case 7:return t.a(2)}}),t,this,[[1,6]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"uploadSlice",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o){var a,s,l,u,d,h;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:a=2,s=null,e.position!=r&&(e.position=r);case 1:if(!(a>0)){t.n=8;break}if(o(r)){t.n=2;break}return t.a(2,null);case 2:return t.n=3,this.enpostdata(n,n.rndLength);case 3:return l=t.v,u=e.file.slice(r,n.byteLength+r),d=new Blob([l,u],{type:"application/stream"}),t.p=4,t.n=5,this.fetchPostCloudApi("netdiskfilesliceuploadbyweb",{body:d,timeout:3e4});case 5:return t.a(2,t.v);case 6:return t.p=6,h=t.v,s=h.toString(),a-=1,t.n=7,Object(c["pb"])(20);case 7:t.n=1;break;case 8:throw"".concat(null!==s&&void 0!==s?s:"私有云数据传输异常","(UploadSlice)");case 9:return t.a(2)}}),t,this,[[4,6]])})));function e(e,n,i,r){return t.apply(this,arguments)}return e}()},{key:"sendStateToWeb",value:function(t){this.emit(mv.UploadUpdate,t)}},{key:"updatePreLoadFileMsgs",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:n=0;case 1:if(!(n<e.length)){t.n=3;break}return r=e[n],t.n=2,this.updatePreLoadFileMsg(r);case 2:n++,t.n=1;break;case 3:return t.a(2)}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updatePreLoadFileMsg",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a,s,c=this;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(t.p=0,n=function(){return e.status==wv.PreLoadFileMsg},e.currentPosition=0,0!=e.size){t.n=1;break}throw"不能上传文件大小为0的文件";case 1:return e.currentSize=e.size,t.n=2,this.getTaskFileType(e);case 2:if(!e.needLineViewPack&&!e.needPreviewImage){t.n=4;break}return t.n=3,this.getCloudNetDiskFileUploaderInfoAsync();case 3:a=t.v,t.n=5;break;case 4:a=null;case 5:if(r=a,o=this.getHashCache(e),null!=o){t.n=8;break}return o=new dv,o.mainFile=new fv,o.mainFile.file=e.file,o.mainFile.lastWriteTime=e.lastWriteTime,o.mainFile.size=e.size,t.n=6,this.setTaskHashAsync(e,o.mainFile,"文件",n);case 6:if(t.v){t.n=7;break}return t.a(2);case 7:this.setHashCache(e,o);case 8:return this.setNetDiskFileCache(o.mainFile),t.n=9,this.makeTaskLineViewPack(e);case 9:return t.n=10,this.makeTaskPreViewImage(e,o,r,n);case 10:this.setTaskHash(e,o),t.n=12;break;case 11:t.p=11,s=t.v,this.updateTaskDataError(e,s.toString());case 12:return t.p=12,requestAnimationFrame((function(){c.startUploadTask()})),t.f(12);case 13:return t.a(2)}}),t,this,[[0,11,12,13]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setNetDiskFileCache",value:function(){return!0}},{key:"setHashCache",value:function(){return!0}},{key:"makeTaskOtherTypePreViewImage",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o){var s,c,l,u;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:u=e.fileType,t.n=u===a["L"].Pdf?1:u===a["L"].Media?5:u===a["L"].Lottie?10:11;break;case 1:if(r.supportOtherPreviews){t.n=2;break}return t.a(2,!1);case 2:return t.n=3,this.getPdfFilePreviewAsync(e);case 3:if(o()){t.n=4;break}return t.a(2,!1);case 4:return t.a(3,12);case 5:if(r.supportOtherPreviews){t.n=6;break}return t.a(2,!1);case 6:if(e.isVideoMediaFile){t.n=7;break}return t.a(2,!1);case 7:return t.n=8,this.getVideoMediaFilePreviewAsync(e);case 8:if(o()){t.n=9;break}return t.a(2,!1);case 9:return t.a(3,12);case 10:return t.a(3,12);case 11:return t.a(2,e.needPreviewImage);case 12:if(null==e.previewImage){t.n=15;break}return l=e.previewImage,l.lastWriteTime=null!==(s=null===(c=l.file)||void 0===c?void 0:c.lastModified)&&void 0!==s?s:Date.now(),t.n=13,this.setTaskHashAsync(e,l,"文件缩略图",o);case 13:if(t.v){t.n=14;break}return t.a(2,!1);case 14:n.setPreviewImage(l,!1),this.setHashCache(e,n);case 15:return t.a(2,!1)}}),t,this)})));function e(e,n,i,r){return t.apply(this,arguments)}return e}()},{key:"makeTaskPreViewImage",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o){var s,l,u,d,h,f,m,v,p,b;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(o()){t.n=1;break}return t.a(2);case 1:if(e.needPreviewImage){t.n=2;break}return t.a(2);case 2:return t.n=3,this.makeTaskOtherTypePreViewImage(e,n,r,o);case 3:if(t.v){t.n=4;break}return t.a(2);case 4:if(e.previewImage=null,u=e.isSvgFile&&null!==(s=null===r||void 0===r?void 0:r.supportPreviewFileExt)&&void 0!==s&&s,d=null!==(l=null===r||void 0===r?void 0:r.supportXSPFilePreview)&&void 0!==l&&l,h=n.getPreviewImage(u),null!=h&&!h.needResetHash()){t.n=25;break}if(e.ext="正在生成图片缩略图",this.sendStateToWeb(e),f=new fv,!d||e.fileType!=a["L"].XD){t.n=7;break}return t.n=5,ra.getXDFileImgPreviewAsync(e.file,f);case 5:if(t.v){t.n=6;break}return t.a(2);case 6:t.n=22;break;case 7:if(!d||e.fileType!=a["L"].Sketch){t.n=10;break}return t.n=8,ra.getSketchFileImgPreviewAsync(e.file,f);case 8:if(t.v){t.n=9;break}return t.a(2);case 9:t.n=22;break;case 10:if(!d||e.fileType!=a["L"].Figma){t.n=13;break}return t.n=11,ra.getFigmaFileImgPreviewAsync(e.file,f);case 11:if(t.v){t.n=12;break}return t.a(2);case 12:t.n=22;break;case 13:if(!(e.isSvgFile&&e.size>51200)){t.n=18;break}return t.p=14,f.previewFileExt=null!==r&&void 0!==r&&r.supportPreviewFileExt?"png":null,t.n=15,ea(e.file,c["g"],.6,!(null!==r&&void 0!==r&&r.supportPreviewFileExt),!0);case 15:f.file=t.v,t.n=17;break;case 16:return t.p=16,t.v,f.file=null,f.previewFileExt=null,t.a(2);case 17:t.n=22;break;case 18:if(!e.isSvgFile&&!e.isIconFile){t.n=19;break}f.file=e.file,t.n=22;break;case 19:return t.p=19,t.n=20,ea(e.file,c["g"],.6,!1);case 20:f.file=t.v,t.n=22;break;case 21:return t.p=21,t.v,f.file=null,t.a(2);case 22:return e.fileType==a["L"].Image&&(null==f.file||null!=f.file&&f.file.size>e.size)&&(f.previewFileExt=null,f.file=e.file),f.size=null!==(m=null===(v=f.file)||void 0===v?void 0:v.size)&&void 0!==m?m:0,f.lastWriteTime=null!==(p=null===(b=f.file)||void 0===b?void 0:b.lastWriteTime)&&void 0!==p?p:Date.now(),t.n=23,this.setTaskHashAsync(e,f,"文件缩略图",o);case 23:if(t.v){t.n=24;break}return t.a(2);case 24:n.setPreviewImage(f,u),e.previewImage=f,this.setHashCache(e,n),t.n=26;break;case 25:e.previewImage=h;case 26:return t.a(2)}}),t,this,[[19,21],[14,16]])})));function e(e,n,i,r){return t.apply(this,arguments)}return e}()},{key:"setTaskHashAsync",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n,r,o){var a,s,c,l=this;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return a=new ds,s=function(t,n){e.currentPosition=t,e.currentSize=n,e.ext="计算".concat(r,"hash(").concat(e.currentPercentage,"%)"),l.sendStateToWeb(e)},t.n=1,a.startAsync(n.file,{needHash:!0,needQuickHash:!0,onprogress:function(t){var e,n=t.index,i=t.length,r=o();r?s(n,i):null===(e=a)||void 0===e||e.cancelAsync()}});case 1:if(c=t.v,a=null,null!=c){t.n=2;break}return t.a(2,!1);case 2:if(!c.canceled){t.n=3;break}return t.a(2,!1);case 3:if(c.success){t.n=4;break}throw c.errMsg;case 4:return s(e.currentSize,e.currentSize),n.quickHash=c.data.quickHash,n.hash=c.data.hash,t.a(2,!0)}}),t)})));function e(e,n,i,r){return t.apply(this,arguments)}return e}()},{key:"setTaskHash",value:function(t,e){t.hash!=e.mainFile.hash&&t.quickHash!=e.mainFile.quickHash&&(t.hash=e.mainFile.hash,t.quickHash=e.mainFile.quickHash,t.currentPosition=0,t.guid=null),t.status==wv.PreLoadFileMsg&&(t.ext="文件等待上传中",t.status=wv.Waitting)}},{key:"makeTaskLineViewPack",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:e.lineViewPack=null;case 1:return t.a(2)}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateTaskDataError",value:function(t,e){t.status=wv.Errored,t.ext=e,this.sendStateToWeb(t)}},{key:"getHashCache",value:function(){return null}},{key:"getCloudNetDiskFileUploaderInfoAsync",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(){var e,n,r;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(e=this.getCloudNetDiskFileUploaderInfoFromCache(),!((null===e||void 0===e?void 0:e.lineViewVer)>0)){t.n=1;break}return t.a(2,e);case 1:return n=new uv,n.lineViewVer=-1,this.setCloudNetDiskFileUploaderInfo(n),t.n=2,this.fetchPostCloudApi("netdiskfileuploaderinfobyweb",{body:"",timeout:1e4});case 2:if(r=t.v,!r.success||null==r.data){t.n=3;break}return this.setCloudNetDiskFileUploaderInfo(r.data),t.a(2,r.data);case 3:return t.a(2,null)}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"fetchPostCloudApi",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Object(Qt["fetchPostCloudApi"])(e,n);case 1:if(r=t.v,!Object(l["k"])(r)){t.n=4;break}o=r.code,t.n=o===a["F"].WebUser_NotLogin?2:3;break;case 2:return this.$store.commit("setUserLogout"),t.a(3,3);case 3:return t.a(2,r);case 4:throw null!==r&&void 0!==r?r:"返回值无法解析";case 5:return t.a(2)}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"setCloudNetDiskFileUploaderInfo",value:function(t){t.supportOtherPreviews=!!t.supportOtherPreviews,this.cloudNetDiskFileUploaderInfoCache={item1:t,item2:Date.now()}}},{key:"getCloudNetDiskFileUploaderInfoFromCache",value:function(){var t=this.cloudNetDiskFileUploaderInfoCache;if(null!=t){var e=Date.now();if(Math.abs(1e3*(e-t.item2)*60)<5)return t.item1}return null}},{key:"getTaskFileType",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,s,c;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:o=null!==(n=null===(r=e.fileExt)||void 0===r?void 0:r.toLowerCase())&&void 0!==n?n:null,s=o,t.n=".zip"===s?1:".json"===s?2:".mjs"===s||".cjs"===s||".js"===s||".css"===s||".txt"===s||".xml"===s||".ini"===s||".config"===s||".md"===s?6:".html"===s||".htm"===s||".mht"===s||".mhtml"===s?7:".ai"===s?8:".aep"===s||".aepx"===s||".aet"===s?9:".eot"===s||".otf"===s||".fon"===s||".font"===s||".ttf"===s||".ttc"===s||".woff"===s?10:".exe"===s||".msi"===s?11:".apk"===s?12:".pkg"===s?13:".dmg"===s?14:".fig"===s?15:".jsd"===s?16:".xlsx"===s||".xls"===s?17:".png"===s||".webp"===s||".jpeg"===s||".jpg"===s||".gif"===s||".bmp"===s||".ico"===s||".icns"===s||".icon"===s||".svg"===s?18:".pdf"===s?19:".psd"===s||".psb"===s?20:".ccx"===s?21:".ppt"===s||".pptx"===s?22:".sketch"===s?23:".sketchplugin"===s?24:".url"===s||".webloc"===s?25:".docx"===s||".doc"===s?26:".xd"===s?27:".xdx"===s?28:".rar"===s||".gz"===s||".bz2"===s||".7z"===s||".xz"===s?29:".mp3"===s||".mp4"===s||".avi"===s||".rm"===s||".rmvb"===s||".aac"===s||".wma"===s||".flac"===s||".wav"===s||".m4a"===s||".3gp"===s||".m4v"===s||".mkv"===s||".mov"===s||".webm"===s||".weba"===s?30:".rp"===s?31:32;break;case 1:return e.fileType=a["L"].Zip,t.a(3,33);case 2:return t.n=3,this.isLottieFileAsync(e);case 3:if(!t.v){t.n=4;break}c=a["L"].Lottie,t.n=5;break;case 4:c=a["L"].Txt;case 5:return e.fileType=c,t.a(3,33);case 6:return e.fileType=a["L"].Txt,t.a(3,33);case 7:return e.fileType=a["L"].Html,t.a(3,33);case 8:return e.fileType=a["L"].AdobeIllustrator,t.a(3,33);case 9:return e.fileType=a["L"].AfterEffects,t.a(3,33);case 10:return e.fileType=a["L"].Font,t.a(3,33);case 11:return e.fileType=a["L"].App,t.a(3,33);case 12:return e.fileType=a["L"].AndroidApp,t.a(3,33);case 13:return e.fileType=a["L"].Package,t.a(3,33);case 14:return e.fileType=a["L"].Dmg,t.a(3,33);case 15:return e.fileType=a["L"].Figma,t.a(3,33);case 16:return e.fileType=a["L"].JsDesign,t.a(3,33);case 17:return e.fileType=a["L"].Excel,t.a(3,33);case 18:return e.fileType=a["L"].Image,t.a(3,33);case 19:return e.fileType=a["L"].Pdf,t.a(3,33);case 20:return e.fileType=a["L"].PhotoShop,t.a(3,33);case 21:return e.fileType=a["L"].PhotoShopPlugin,t.a(3,33);case 22:return e.fileType=a["L"].PPT,t.a(3,33);case 23:return e.fileType=a["L"].Sketch,t.a(3,33);case 24:return e.fileType=a["L"].SketchPlugin,t.a(3,33);case 25:return e.fileType=a["L"].Url,t.a(3,33);case 26:return e.fileType=a["L"].Word,t.a(3,33);case 27:return e.fileType=a["L"].XD,t.a(3,33);case 28:return e.fileType=a["L"].XDPlugin,t.a(3,33);case 29:return e.fileType=a["L"].Zip,t.a(3,33);case 30:return e.fileType=a["L"].Media,t.a(3,33);case 31:return e.fileType=a["L"].AxureSourceFile,t.a(3,33);case 32:return e.fileType=a["L"].Other,t.a(3,33);case 33:return t.a(2)}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getVideoMediaFilePreviewAsync",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(n=e.previewImage,!(null!=n&&n.size>0&&n.file)){t.n=1;break}return t.a(2,!0);case 1:return e.previewImage=null,t.p=2,e.ext="正在获取视频缩略图",this.sendStateToWeb(e),t.n=3,ev(e.file,.85,"image/jpeg",370,!0);case 3:if(o=t.v,null!=o){t.n=4;break}return t.a(2,!1);case 4:return a=new fv,a.file=o,a.size=o.size,a.lastWriteTime=null!==(r=o.lastModified)&&void 0!==r?r:Date.now(),e.previewImage=a,t.a(2,null!=e.previewImage);case 5:return t.p=5,t.v,e.previewImage=null,t.a(2,!1)}}),t,this,[[2,5]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getPdfFilePreviewAsync",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,o,a,s,l,u,d,h,f;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(n=e.previewImage,!(null!=n&&n.size>0&&n.file)){t.n=1;break}return t.a(2,!0);case 1:return e.previewImage=null,t.p=2,e.ext="正在生成PDF缩略图",this.sendStateToWeb(e),o=URL.createObjectURL(e.file),t.n=3,Promise.race([ua(o,.85,"image/jpeg",[370],!0),Object(r["a"])(Object(i["a"])().m((function t(){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Object(c["pb"])(45e3);case 1:throw"获取PDF缩略图超时";case 2:return t.a(2)}}),t)})))()]);case 3:if(h=a=t.v,d=null===h,d){t.n=4;break}d=void 0===a;case 4:if(!d){t.n=5;break}f=void 0,t.n=6;break;case 5:f=a[0];case 6:if(l=f,null!=l){t.n=7;break}return t.a(2,!1);case 7:return u=new fv,u.file=l,u.size=l.size,u.lastWriteTime=null!==(s=l.lastModified)&&void 0!==s?s:Date.now(),e.previewImage=u,t.a(2,null!=e.previewImage);case 8:return t.p=8,t.v,e.previewImage=null,t.a(2,!1);case 9:return t.p=9,o&&URL.revokeObjectURL(o),t.f(9);case 10:return t.a(2)}}),t,this,[[2,8,9,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isLottieFileAsync",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r,o,a;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.n=1,bv(e);case 1:if(t.v){t.n=2;break}return t.a(2,!1);case 2:if(n=e.previewImage,!(null!=n&&n.size>0&&n.file)){t.n=3;break}return t.a(2,!0);case 3:return e.previewImage=null,t.p=4,e.ext="正在检测是否是Lottie文件",this.sendStateToWeb(e),t.n=5,Mu(e.file);case 5:return o=t.v,a=new fv,a.file=o,a.size=o.size,a.lastWriteTime=null!==(r=o.lastModified)&&void 0!==r?r:Date.now(),e.previewImage=a,t.a(2,null!=e.previewImage);case 6:return t.p=6,t.v,e.previewImage=null,t.a(2,!1)}}),t,this,[[4,6]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateToSql",value:function(t){var e=this;if(null==t||0==t.length)return 0;var n=0;return t.forEach((function(t){t.id>0||(t.id=e._sql_auto_id++,n++)})),n}},{key:"updateTask",value:function(t){var e=this;if(null!=t.ids){var n=this.uploadList,i={};t.ids.forEach((function(t){i[t]=1}));var r=n.filter((function(t){return i[t.id]})),o=r.length;if(0!=o){var a;switch(t.ids=r.map((function(t){return t.id})),i={},t.ids.forEach((function(t){i[t]=1})),t.type){case yv.Pause:a=wv.Paused;break;case yv.ReStart:case yv.Resume:a=wv.Waitting;break;default:return}this.updateStatusToSql(t.ids,a),r.forEach((function(t){t.status=a})),this.sendStateToWeb(r),a==wv.Waitting&&requestAnimationFrame((function(){e.startUploadTask()}))}}}},{key:"updateStatusToSql",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.a(2,0)}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"removeTask",value:function(t){var e=this.uploadList;switch(t.type){case yv.Remove_Select:if(null==t.ids)return;var n={};t.ids.forEach((function(t){n[t]=1})),t.ids=e.filter((function(t){return n[t.id]})).map((function(t){return t.id}));break;case yv.Remove_Completed:t.ids=e.filter((function(t){return t.status==wv.Completed})).map((function(t){return t.id}));break;case yv.Remove_All:t.ids=e.map((function(t){return t.id}));break}if(null!=t.ids&&0!=t.ids.length){var i={};t.ids.forEach((function(t){t<1||i[t]||(i[t]=!0)}));for(var r=[],o=[],a=e.length-1;a>=0;a--){var s=e[a];if(i[s.id]){switch(s.status){case wv.Fetching:case wv.Paused:case wv.Errored:s.guid&&r.push(s.guid);break}s.status=wv.RemovedMark,e.splice(a,1),o.push(s.id)}}o.length>0&&this.emit(mv.UploadRemove,o),r.length>0&&this.sendCancelGuidToCloud(r)}}},{key:"hasRunningTask",value:function(){return null!=this.uploadList.find((function(t){switch(t.status){case wv.Fetching:case wv.Paused:case wv.Errored:case wv.Waitting:case wv.PreLoadFileMsg:return!0}return!1}))}},{key:"sendCancelGuidToCloud",value:function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e){var n,r;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,n=this,t.n=1,this.enpostdata({guids:e});case 1:return r=t.v,t.n=2,n.fetchPostCloudApi.call(n,"netdiskfilecancelbyweb",{body:r,timeout:1e4});case 2:t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}}),t,this,[[0,3]])})));function e(e){return t.apply(this,arguments)}return e}()}])}(),pv=new vv;function bv(t){return gv.apply(this,arguments)}function gv(){return gv=Object(r["a"])(Object(i["a"])().m((function t(e){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(null!=e&&e.isJsonFile){t.n=1;break}return t.a(2,!1);case 1:return t.n=2,ls("maybeIsLottieFileAsync",e.file);case 2:return t.a(2,t.v)}}),t)}))),gv.apply(this,arguments)}var wv={Fetching:0,Paused:1,Completed:2,Errored:3,Waitting:4,RemovedMark:5,PreLoadFileMsg:6,CompletedWithExist:7},yv={Remove_Select:1,Remove_Completed:2,Remove_All:3,Resume:11,Pause:12,ReStart:13,Add:14},kv=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"ids",void 0),Object(f["a"])(this,"folderId",void 0),Object(f["a"])(this,"files",void 0),Object(f["a"])(this,"type",void 0)}return Object(h["a"])(t,null,[{key:"send",value:function(){var e=Object(r["a"])(Object(i["a"])().m((function e(n){var r,o,a,s,c;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:return r=n.type,o=n.folderId,a=n.ids,s=n.files,c=new t,c.type=r,c.folderId=null!==o&&void 0!==o?o:0,c.ids=null!==a&&void 0!==a?a:null,c.files=null!==s&&void 0!==s?s:null,pv.runTask(c),e.a(2,c)}}),e)})));function n(t){return e.apply(this,arguments)}return n}()}])}(),Cv=function(){function t(){Object(d["a"])(this,t),Object(f["a"])(this,"uploading",!1),Object(f["a"])(this,"uploadItems",[]),Object(f["a"])(this,"_uploadItemsObj",{})}return Object(h["a"])(t,[{key:"length",get:function(){return this.uploadItems.length}},{key:"clear",value:function(){this.uploadItems.splice(0),delete this._uploadItemsObj,this._uploadItemsObj={}}},{key:"add",value:function(t){if(Object(l["k"])(t)&&t.id>0){var e=new xv;Object.keys(e).forEach((function(n){e[n]=t[n]})),this.uploadItems.push(e),this._uploadItemsObj[t.id]=e,this._sort()}}},{key:"update",value:function(t){if(Object(l["k"])(t)&&t.id>0){var e=this._uploadItemsObj[t.id];if(!e)return this.add(t);var n=t.status!==e.status;Object.keys(e).forEach((function(n){e[n]=t[n]})),n&&this._sort()}}},{key:"remove",value:function(t){var e=this._uploadItemsObj[t];if(e){delete this._uploadItemsObj[t];var n=this.uploadItems.findIndex((function(e){return e.id===t}));-1!==n&&this.uploadItems.splice(n,1)}}},{key:"removeCompletedItems",value:function(){var t=this,e=[];this.uploadItems.forEach((function(t,n){switch(t.status){case wv.CompletedWithExist:case wv.Completed:case wv.RemovedMark:e.unshift(n);break}})),e.length>0&&e.forEach((function(e){var n=t.uploadItems.splice(e,1)[0];n&&delete t._uploadItemsObj[n.id]}))}},{key:"_sort",value:function(){var t=function(t,e){var n=t.id-e.id;return 0===n?0:n>0?1:-1};this.uploadItems.sort((function(e,n){return t(e,n)}))}}])}(),xv=Object(h["a"])((function t(){Object(d["a"])(this,t),Object(f["a"])(this,"id",0),Object(f["a"])(this,"status",wv.Waitting),Object(f["a"])(this,"fileName",null),Object(f["a"])(this,"fileType",a["L"].Other),Object(f["a"])(this,"ext",null),Object(f["a"])(this,"currentPercentage",0),Object(f["a"])(this,"size",0),Object(f["a"])(this,"folderId",0),Object(f["a"])(this,"quickHash",""),Object(f["a"])(this,"hash","")})),Sv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("div",{staticClass:"icon-netdiskfile",class:t.fileTypeCls}),e("div",{staticClass:"summary"},[e("div",{staticClass:"item-name"},[e("a",{attrs:{href:"javascript:;",title:t.fileName}},[t._v(t._s(t.fileName))])]),e("div",{staticClass:"item-info"},[e("div",{staticClass:"item-progress"},[t._v(t._s(t.progressStr))]),e("div",{staticClass:"item-state",class:t.statusCss,attrs:{title:t.statusText}},[t.percentageVisible?e("div",{staticClass:"percentage"},[e("p",{style:{width:t.uploadPercentageCssWidth}})]):e("div",{staticClass:"state"},[t._v(t._s(t.statusText))])]),e("div",{staticClass:"btns"},[t.item.status===t.EnumNetDiskFileUploadStatus.Fetching||t.item.status===t.EnumNetDiskFileUploadStatus.PreLoadFileMsg?e("div",{staticClass:"fetching",attrs:{title:"点击暂停"},on:{click:function(e){return t.clickChangeStatus(t.EnumNetDiskFileUploadStatus.Paused)}}}):t.item.status===t.EnumNetDiskFileUploadStatus.Waitting?e("div",{staticClass:"waitting",attrs:{title:"点击暂停"},on:{click:function(e){return t.clickChangeStatus(t.EnumNetDiskFileUploadStatus.Paused)}}}):t.item.status===t.EnumNetDiskFileUploadStatus.Paused?e("div",{staticClass:"paused",attrs:{title:"点击继续上传"},on:{click:function(e){return t.clickChangeStatus(t.EnumNetDiskFileUploadStatus.Waitting)}}}):t.item.status===t.EnumNetDiskFileUploadStatus.Errored?e("div",{staticClass:"download-repeat",attrs:{title:"重新上传"},on:{click:t.clickUploadFile}}):t._e(),e("div",{staticClass:"remove",attrs:{title:"删除该任务"},on:{click:t.clickTaskRemove}})])])])])},Tv=[],Ov={methods:{clickUploadFile:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.item,n){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,kv.send({type:yv.ReStart,ids:[n.id]});case 2:e.n=4;break;case 3:e.p=3,r=e.v,t.showTextTip(r);case 4:return e.a(2)}}),e,null,[[1,3]])})))()},clickTaskRemove:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.item,n){e.n=1;break}return e.a(2);case 1:a=n.status,e.n=a===wv.Fetching?2:a===wv.Paused||a===wv.Waitting?3:4;break;case 2:return r="任务「".concat(n.id,"」(").concat(t.fileName,")正在上传中,是否确认取消并删除该任务?"),e.a(3,4);case 3:return o=t.uploadPercentage,o>0&&(r="任务「".concat(n.id,"」(").concat(t.fileName,")已上传").concat(t.uploadPercentageCssWidth,",是否确认取消并删除该任务?")),e.a(3,4);case 4:if(!r){e.n=6;break}return e.n=5,t.confirm({title:"删除确认",text:r,noText:"我再想想"});case 5:if(e.v){e.n=6;break}return e.a(2);case 6:return e.p=6,e.n=7,kv.send({type:yv.Remove_Select,ids:[n.id]});case 7:e.n=9;break;case 8:e.p=8,s=e.v,t.showTextTip(s);case 9:return e.a(2)}}),e,null,[[6,8]])})))()},clickChangeStatus:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a,s;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(r=e.item,r){n.n=1;break}return n.a(2);case 1:o=t,n.n=o===wv.Waitting?2:o===wv.Paused?6:10;break;case 2:return n.p=2,n.n=3,kv.send({type:yv.Resume,ids:[r.id]});case 3:n.n=5;break;case 4:n.p=4,a=n.v,e.showTextTip(a);case 5:return n.a(3,10);case 6:return n.p=6,n.n=7,kv.send({type:yv.Pause,ids:[r.id]});case 7:n.n=9;break;case 8:n.p=8,s=n.v,e.showTextTip(s);case 9:return n.a(3,10);case 10:return n.a(2)}}),n,null,[[6,8],[2,4]])})))()}},computed:{percentageVisible:function(){var t=this.item;return t.status===wv.Paused||t.status===wv.Fetching},fileTypeCls:function(){return a["L"].getName(this.item.fileType,a["M"].Normal)},fileName:function(){var t=this.item.fileName;return null!==t&&void 0!==t?t:""},progressStr:function(){return this.sizeStr},sizeStr:function(){return Object(c["qb"])(this.item.size)},statusCss:function(){var t=[],e=this.status;return e===wv.Errored&&t.push("error"),e!==wv.Completed&&e!==wv.CompletedWithExist||t.push("completed"),t},statusTitle:function(){return this.item.status===wv.Errored?this.statusText:null},statusText:function(){var t=this.item;if(!t)return"";switch(t.status){case wv.Errored:var e;return null!==(e=t.ext)&&void 0!==e?e:"文件上传失败了";case wv.PreLoadFileMsg:return t.ext;case wv.Fetching:return"文件上传中(".concat(this.uploadPercentageCssWidth,")");case wv.Paused:return"已暂停上传(".concat(this.uploadPercentageCssWidth,")");case wv.CompletedWithExist:var n;return null!==(n=t.ext)&&void 0!==n?n:"文件已存在,无需更新";case wv.Completed:var i;return null!==(i=t.ext)&&void 0!==i?i:"文件上传成功";case wv.Waitting:return"文件等待上传中"}return""},uploadPercentageCssWidth:function(){return this.uploadPercentage.toFixed(2)+"%"},uploadPercentage:function(){var t=this.item;return t?t.currentPercentage:0},status:function(){var t,e;return null!==(t=null===(e=this.item)||void 0===e?void 0:e.status)&&void 0!==t?t:wv.RemovedMark}},props:{item:Object},data:function(){return{EnumNetDiskFileUploadStatus:wv}}},Iv=Ov,Av=(n("073b"),Object(Gr["a"])(Iv,Sv,Tv,!1,null,"2ec50ae4",null)),Fv=Av.exports,jv={components:{FileUploadItem:Fv},methods:{onNetDiskFileUploadInit:function(t){if(Object(l["i"])(t)){var e=this.uploadData;e.clear(),t.forEach((function(t){!Object(l["k"])(t)||t.id<1||e.update(t)}))}},onNetDiskFileUploadRemove:function(t){var e,n=this;e=Object(l["i"])(t)?t:[t],e.forEach((function(t){if(t>0){var e=n.uploadData;e&&e.remove(t)}}))},onNetDiskFileUploadUpdate:function(t){var e,n=this;e=Object(l["i"])(t)?t:[t],e.forEach((function(t){if(Object(l["k"])(t)&&!(t.id<1)){var e=n.uploadData;e.update(t)}})),this.onNetDiskFileUploadUpdate2(t)},onNetDiskFileUploadUpdate2:function(t){if(Object(l["k"])(t)){var e=this.maxShowLength,n=this.uploadItems;if(!(n.length<=e)){var i=n.find((function(t){return t.status===wv.Fetching}));if(i&&i.id!==t.id);else{var r=n.findIndex((function(e){return e.id===t.id}));if(-1===r)return;var o=(r-1)*this.itemHeight;this.scrollTo(o)}}}},sendImportData:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a,s,c,u,d,h,f,m,v;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(r=e.cloudSubFiles,o={},a={},t.forEach((function(t){var e=t.name;o[e.toLowerCase()]=1})),r.forEach((function(t){if(t){var e=t.fileName+t.fileExt,n=e.toLowerCase();o[n]&&(delete o[n],a[e]=1)}})),n.p=1,s=Object.keys(o),!(s.length>0)){n.n=3;break}return n.n=2,e.fetchPostCloudApi("netdiskfilecheckexistsbyweb",{timeout:1e4,body:{folderId:e.cloudCurrentFolderId,fileNames:s}});case 2:c=n.v,c.success&&(c=c.data,Object(l["i"])(c)&&c.forEach((function(t){a[t.fileName+t.fileExt]=1})));case 3:if(a=Object.keys(a),u={},a.forEach((function(t){u[t.toLowerCase()]=1})),d=a.length,!(d>0)){n.n=8;break}return h=8,f=d>h,f&&a.splice(h),n.n=4,e.confirm({title:"覆盖提示",text:"当前目录已存在「".concat(a.join("、")).concat(f?"、...」等".concat(d,"个"):"」","同名文件,是否").concat(d>1?"全部":"","覆盖?"),noText:1===d?"跳过":"跳过重复文件",yesText:"覆盖",showCancel:!0});case 4:m=n.v,n.n=!0===m?5:!1===m?6:"cancel"===m?7:8;break;case 5:return n.a(3,8);case 6:return t=t.filter((function(t){var e;return!u[null===(e=t.name)||void 0===e?void 0:e.toLowerCase()]})),n.a(3,8);case 7:return n.a(2);case 8:return n.n=9,kv.send({files:t,folderId:e.cloudCurrentFolderId,type:yv.Add});case 9:n.n=11;break;case 10:n.p=10,v=n.v,e.showTextTip(v);case 11:return n.a(2)}}),n,null,[[1,10]])})))()},showOpenFileDialog:function(){return Object(r["a"])(Object(i["a"])().m((function t(){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.a(2)}}),t)})))()},clickAddFiles:function(t){var e;null===(e=t.target)||void 0===e||null===(e=e.querySelector("input[type=file]"))||void 0===e||e.click()},onInputFileChange:function(t){var e=t.target,n=e.files;if(0!==n.length){n=Object(u["a"])(n);try{e.value=""}catch(i){}this.sendImportData(n)}},clickRemoveCompleted:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,kv.send({type:yv.Remove_Completed});case 1:e.n=3;break;case 2:e.p=2,n=e.v,t.showTextTip(n);case 3:return e.a(2)}}),e,null,[[0,2]])})))()},clickRemoveAll:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(0!==t.uploadItemsLength){e.n=1;break}return e.a(2);case 1:return e.n=2,t.confirm({title:"删除确认",text:"将删除列表中所有的上传任务",noText:"我再想想"});case 2:if(e.v){e.n=3;break}return e.a(2);case 3:return e.p=3,e.n=4,kv.send({type:yv.Remove_All});case 4:e.n=6;break;case 5:e.p=5,n=e.v,t.showTextTip(n);case 6:return e.a(2)}}),e,null,[[3,5]])})))()},clickCloseBox:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(!pv.hasRunningTask()){e.n=3;break}return e.n=1,t.confirm({text:"文件正在上传中，关闭上传对话框将清理所有待上传的文件,是否确认？"});case 1:if(e.v){e.n=2;break}return e.a(2);case 2:pv.runTask({type:yv.Remove_All}),e.n=4;break;case 3:pv.runTask({type:yv.Remove_Completed});case 4:n=t.filebox,n.visible=!1;case 5:return e.a(2)}}),e)})))()},onBoxScroll:function(t){this.scrollTop=t.target.scrollTop},resetBox:function(){if(this.visible){var t=this.$refs.files;t&&this.onBoxScroll({target:t})}},add:function(t){var e;null===(e=this.uploadData)||void 0===e||e.add(t),this.scrollToBottom()},scrollToTop:function(){this.scrollTo(0)},scrollToBottom:function(){this.scrollTo(1e5)},scrollTo:function(t){var e=this;this.$nextTick((function(){var n=e.$refs.files;n&&(n.scrollTop=t)}))},bingDragEvent:function(t){var e=this,n=document.documentElement;t?(n.addEventListener("dragover",this.dragover),n.addEventListener("drop",this.dragdrop),pv.on(mv.TextTip,(function(t){e.showTextTip(t)})),pv.on(mv.UploadUpdate,(function(t){e.onNetDiskFileUploadUpdate(t)})),pv.on(mv.UploadRemove,(function(t){e.onNetDiskFileUploadRemove(t)})),pv.on(mv.WebUserNotLogin,(function(){e.$store.commit("setUserLogout")})),pv.on(mv.WebFileChanged,(function(t){e.$emit("onFileChanged",{files:[t.data],folderUpdateTimes:t.folderUpdateTimes})})),window.addEventListener("beforeunload",this.onBeforeunload)):(n.removeEventListener("dragover",this.dragover),n.removeEventListener("drop",this.dragdrop),pv.off(mv.TextTip),pv.off(mv.UploadUpdate),pv.off(mv.UploadRemove),pv.off(mv.WebUserNotLogin),pv.off(mv.WebFileChanged),window.removeEventListener("beforeunload",this.onBeforeunload))},onBeforeunload:function(t){if(pv.hasRunningTask()){t.preventDefault();var e="文件正在上传中，您确定要离开当前页面？";return t.returnValue=e,e}},dragover:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy";var e=this.dropTip;e.dragging||(e.dragging=!0,e.visible=!0,cancelAnimationFrame(e.handler)),clearTimeout(e.handler2),e.handler2=setTimeout((function(){e.dragging=!1,e.visible=!1}),200)},dragdrop:function(t){t.preventDefault();var e=this.dropTip;e.dragging=!1,cancelAnimationFrame(e.handler),clearTimeout(e.handler2),e.handler=requestAnimationFrame((function(){e.visible=!1})),this.onDrag(t)},onDrag:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a,s,c,l,u;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if(r=t.dataTransfer.items,r&&!(r.length<1)){n.n=1;break}return n.a(2);case 1:o=[],a=[],s=0;case 2:if(!(s<r.length)){n.n=6;break}return c=r[s],n.n=3,e.isDropItemFile(c);case 3:if(!n.v){n.n=4;break}o.push(c.getAsFile()),n.n=5;break;case 4:u=null===(l=c.getAsFile())||void 0===l?void 0:l.name,u&&a.push(u);case 5:s++,n.n=2;break;case 6:if(!(a.length>0)){n.n=7;break}return n.n=7,e.alert({text:"不能直接上传文件夹「".concat(a.join("、"),"」,如需上传请先打包,")});case 7:if(!(o.length<1)){n.n=8;break}return n.a(2);case 8:e.sendImportData(o);case 9:return n.a(2)}}),n)})))()},isDropItemFile:function(t){return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if("file"===t.kind){e.n=1;break}return e.a(2,!1);case 1:if(!Object(l["j"])(t.type)){e.n=2;break}return e.a(2,!0);case 2:if("function"!==typeof t.webkitGetAsEntry){e.n=3;break}return n=t.webkitGetAsEntry(),e.a(2,n.isFile);case 3:if(e.p=3,r=t.getAsFile(),r){e.n=4;break}return e.a(2,!1);case 4:if(o=r.size,0!==o){e.n=5;break}return e.a(2,!1);case 5:return e.n=6,new Promise((function(t){var e=new FileReader;e.addEventListener("load",(function(){t(!0)}),!1),e.addEventListener("error",(function(){t(!1)}),!1),e.readAsDataURL(r.slice(0,Math.min(5,o)))}));case 6:return e.a(2,e.v);case 7:return e.p=7,e.v,e.a(2,!1)}}),e,null,[[3,7]])})))()}},computed:{uploading:function(){return this.uploadingCount>0},uploadingCount:function(){return this.uploadItems.filter((function(t){switch(t.status){case wv.PreLoadFileMsg:case wv.Fetching:case wv.Waitting:return!0;default:return!1}})).length},dragTitle:function(){var t=this.uploadItems;if(!t)return"-";if(this.uploading)return"".concat(this.uploadingCount,"个文件上传中，拖拽文件到此处可继续添加");var e=t.length;return e>0?"已添加".concat(e,"个文件，拖拽文件到此处可继续添加"):"拖拽文件到此处上传到当前文件夹"},visible:function(){return this.filebox.visible&&null!=this.uploadData},hasFile:function(){var t=this.uploadItems;return!!t&&t.length>0},uploadData:function(){var t=this.cloudKey;if(!t)return null;var e=this.uploadDatas[t];return e||(e=new Cv,this.$set(this.uploadDatas,t,e)),e},uploadItems:function(){var t=this.uploadData;return t?t.uploadItems:[]},renderList:function(){var t=this.uploadItems,e=this.renderListStart;return t.slice(e,e+this.renderListCount)},renderListCssPaddingTop:function(){return this.renderListStart*this.itemHeight},renderListStart:function(){var t=Math.floor(this.scrollTop/this.itemHeight);return t},renderListCount:function(){var t=Math.ceil((this.boxHeight+this.scrollTop%this.itemHeight)/this.itemHeight);return t=Math.min(t,this.uploadItems.length-this.renderListStart),t},boxHeight:function(){var t=this.maxShowLength,e=this.uploadItems,n=this.itemHeight,i=e.length;return i>t&&(i=t),n*i},boxRealHeight:function(){var t=this.uploadItems,e=this.itemHeight;return t.length*e},uploadDatas:function(){return this.$store.state.netdiskFileUploadDatas},uploadItemsLength:function(){return this.uploadItems.length}},watch:{uploadItemsLength:function(t,e){t>e&&this.scrollToBottom()},hasFile:function(){var t=this;this.$nextTick((function(){t.resetBox()}))},visible:function(t){var e,n=this;(this.bingDragEvent(t),t)&&(null===(e=this.uploadData)||void 0===e||e.removeCompletedItems());this.$nextTick((function(){n.resetBox()}))},scrollTop:function(){var t=this;this.scrolling=!0,clearTimeout(this.handle_scrolling),this.handle_scrolling=setTimeout((function(){t.scrolling=!1}),120)}},data:function(){return{itemHeight:50,maxShowLength:3,scrollTop:0,handle_scrolling:0,scrolling:!1,dropTip:{visible:!1,handler:null,handler2:null,dragging:!1}}},props:{filebox:Object},beforeDestroy:function(){clearTimeout(this.handle_scrolling),this.bingDragEvent(!1)},created:function(){this.bingDragEvent(this.visible),this.onNetDiskFileUploadInit(pv.uploadList)}},_v=jv,Mv=(n("799c"),Object(Gr["a"])(_v,Zm,tv,!1,null,"a0e89696",null)),Lv=Mv.exports,Pv={components:{LinkEdit:Qm,FileUpload:Lv},methods:{onFileChanged:function(t){this.$store.commit("setFolderSubFile",t)},clickBeforeCheck:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,s,c,l;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if(r=e.cloudVersion,o=e.cloudCurrentFolderId,s=e.cloudIsLogin,c=e.userFolderSpecifyMemberAuthority,!Qr.notSupportNetDiskFileWebUpload(r)){n.n=1;break}return e.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(r,"),请先升级私有云部署包")),n.a(2);case 1:if(o>0){n.n=2;break}return e.showTextTip("不能".concat(t,"到根目录,请进入子文件夹操作")),n.a(2);case 2:if(s){n.n=5;break}return n.n=3,e.confirm({text:"需要登录才能".concat(t),yesText:"前往登录"});case 3:if(!n.v){n.n=4;break}e.goCloudLogin();case 4:return n.a(2);case 5:l=c,n.n=l===a["w"].Admin||l===a["w"].ParentOwner||l===a["w"].Owner||l===a["w"].ReadWrite?6:7;break;case 6:return n.a(2,!0);case 7:return e.showTextTip("您没有在当前文件夹下".concat(t,"的权限")),n.a(2,!1);case 8:return n.a(2)}}),n)})))()},clickOpenNetDiskUploadBox:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.clickBeforeCheck("上传文件");case 1:if(e.v){e.n=2;break}return e.a(2);case 2:n=t.filebox,r=t.cloudCurrentFolderId,n.parentId=r,n.visible=!0;case 3:return e.a(2)}}),e)})))()},clickAddNetDiskLink:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.clickBeforeCheck("添加链接");case 1:if(e.v){e.n=2;break}return e.a(2);case 2:n=t.linkbox,r=t.cloudCurrentFolderId,n.data={id:0,link:"",name:"",parentId:r},n.visible=!0;case 3:return e.a(2)}}),e)})))()}},computed:{cannotUseNetDisk:function(){var t=this.cloudVersion,e=this.cloudCurrentFolderId;return!!Qr.notSupportNetDiskFileWebUpload(t)||!(e>0)},netdiskUploader:function(){return this.$store.state.netdiskUploader},linkbox:function(){return this.netdiskUploader.linkbox},filebox:function(){return this.netdiskUploader.filebox}}},Dv=Pv,Nv=(n("6828"),Object(Gr["a"])(Dv,Vm,Bm,!1,null,"734961ba",null)),Ev=Nv.exports,Rv=function(){var t=this,e=t._self._c;return t.supportInteraction?e("div",{staticClass:"go-interaction-viewer"},[t.inCloudViewerMode?e("div",{staticClass:"btn-go-interaction",attrs:{title:"在新窗口预览原型"},on:{click:t.clickGoWebInteraction}}):t._e(),e("div",{staticClass:"btn-go-interaction-mobile",class:{on:t.menuVisible},attrs:{title:"在手机上预览原型"},on:{click:t.clickShowMenu}}),t.menuVisible?e("div",{staticClass:"box",class:{"fix-right":t.fixRight}},[e("div",{staticClass:"img"},[e("div",{staticClass:"bor-top"}),e("div",{staticClass:"bor-bottom"}),t.qrcodeImage?e("img",{attrs:{src:t.qrcodeImage}}):t._e()]),e("div",{staticClass:"text"},[t._v(" 使用"),e("a",{attrs:{href:"https://www.marklion.cn/mobileapp.shtml?invoke=MarkLion.Output&ver=".concat(t.cloudVersion),target:"_blank"}},[t._v("标记狮APP")]),t._v("扫描二维码预览 "),e("div",{staticClass:"btn-question",attrs:{title:"了解更多"},on:{click:t.clickInteractionViewLink}})])]):t._e()]):t._e()},Vv=[],Bv=function(){function t(t){this.mode=n.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,i=this.data.length;e<i;e++){var r=[],o=this.data.charCodeAt(e);o>65536?(r[0]=240|(1835008&o)>>>18,r[1]=128|(258048&o)>>>12,r[2]=128|(4032&o)>>>6,r[3]=128|63&o):o>2048?(r[0]=224|(61440&o)>>>12,r[1]=128|(4032&o)>>>6,r[2]=128|63&o):o>128?(r[0]=192|(1984&o)>>>6,r[1]=128|63&o):r[0]=o,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[i][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(this.modules[t+n][e+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=o.getLostPoint(this);(0==n||t>i)&&(t=i,e=n)}return e},createMovieClip:function(t,e,n){var i=t.createEmptyMovieClip(e,n),r=1;this.make();for(var o=0;o<this.modules.length;o++)for(var a=o*r,s=0;s<this.modules[o].length;s++){var c=s*r,l=this.modules[o][s];l&&(i.beginFill(0,100),i.moveTo(c,a),i.lineTo(c+r,a),i.lineTo(c+r,a+r),i.lineTo(c,a+r),i.endFill())}return i},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=o.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],r=t[n];if(null==this.modules[i][r])for(var a=-2;a<=2;a++)for(var s=-2;s<=2;s++)this.modules[i+a][r+s]=-2==a||2==a||-2==s||2==s||0==a&&0==s}},setupTypeNumber:function(t){for(var e=o.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(var r=0;r<18;r++){var a=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=a}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,i=o.getBCHTypeInfo(n),r=0;r<15;r++){var a=!t&&1==(i>>r&1);r<6?this.modules[r][8]=a:r<8?this.modules[r+1][8]=a:this.modules[this.moduleCount-15+r][8]=a}for(var s=0;s<15;s++){var c=!t&&1==(i>>s&1);s<8?this.modules[8][this.moduleCount-s-1]=c:s<9?this.modules[8][15-s-1+1]=c:this.modules[8][15-s-1]=c}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,i=this.moduleCount-1,r=7,a=0,s=this.moduleCount-1;s>0;s-=2){6==s&&s--;while(1){for(var c=0;c<2;c++)if(null==this.modules[i][s-c]){var l=!1;a<t.length&&(l=1==(t[a]>>>r&1));var u=o.getMask(e,i,s-c);u&&(l=!l),this.modules[i][s-c]=l,r--,-1==r&&(a++,r=7)}if(i+=n,i<0||this.moduleCount<=i){i-=n,n=-n;break}}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,n,i){for(var r=d.getRSBlocks(t,n),a=new h,s=0;s<i.length;s++){var c=i[s];a.put(c.mode,4),a.put(c.getLength(),o.getLengthInBits(c.mode,t)),c.write(a)}for(var l=0,u=0;u<r.length;u++)l+=r[u].dataCount;if(a.getLengthInBits()>8*l)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*l+")");a.getLengthInBits()+4<=8*l&&a.put(0,4);while(a.getLengthInBits()%8!=0)a.putBit(!1);while(1){if(a.getLengthInBits()>=8*l)break;if(a.put(e.PAD0,8),a.getLengthInBits()>=8*l)break;a.put(e.PAD1,8)}return e.createBytes(a,r)},e.createBytes=function(t,e){for(var n=0,i=0,r=0,a=new Array(e.length),s=new Array(e.length),c=0;c<e.length;c++){var l=e[c].dataCount,d=e[c].totalCount-l;i=Math.max(i,l),r=Math.max(r,d),a[c]=new Array(l);for(var h=0;h<a[c].length;h++)a[c][h]=255&t.buffer[h+n];n+=l;var f=o.getErrorCorrectPolynomial(d),m=new u(a[c],f.getLength()-1),v=m.mod(f);s[c]=new Array(f.getLength()-1);for(var p=0;p<s[c].length;p++){var b=p+v.getLength()-s[c].length;s[c][p]=b>=0?v.get(b):0}}for(var g=0,w=0;w<e.length;w++)g+=e[w].totalCount;for(var y=new Array(g),k=0,C=0;C<i;C++)for(var x=0;x<e.length;x++)C<a[x].length&&(y[k++]=a[x][C]);for(var S=0;S<r;S++)for(var T=0;T<e.length;T++)S<s[T].length&&(y[k++]=s[T][S]);return y};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(o.getBCHDigit(e)-o.getBCHDigit(o.G15)>=0)e^=o.G15<<o.getBCHDigit(e)-o.getBCHDigit(o.G15);return(t<<10|e)^o.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(o.getBCHDigit(e)-o.getBCHDigit(o.G18)>=0)e^=o.G18<<o.getBCHDigit(e)-o.getBCHDigit(o.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return o.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case r.PATTERN000:return(e+n)%2==0;case r.PATTERN001:return e%2==0;case r.PATTERN010:return n%3==0;case r.PATTERN011:return(e+n)%3==0;case r.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case r.PATTERN101:return e*n%2+e*n%3==0;case r.PATTERN110:return(e*n%2+e*n%3)%2==0;case r.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new u([1],0),n=0;n<t;n++)e=e.multiply(new u([1,a.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i++)for(var r=0;r<e;r++){for(var o=0,a=t.isDark(i,r),s=-1;s<=1;s++)if(!(i+s<0||e<=i+s))for(var c=-1;c<=1;c++)r+c<0||e<=r+c||0==s&&0==c||a==t.isDark(i+s,r+c)&&o++;o>5&&(n+=3+o-5)}for(var l=0;l<e-1;l++)for(var u=0;u<e-1;u++){var d=0;t.isDark(l,u)&&d++,t.isDark(l+1,u)&&d++,t.isDark(l,u+1)&&d++,t.isDark(l+1,u+1)&&d++,0!=d&&4!=d||(n+=3)}for(var h=0;h<e;h++)for(var f=0;f<e-6;f++)t.isDark(h,f)&&!t.isDark(h,f+1)&&t.isDark(h,f+2)&&t.isDark(h,f+3)&&t.isDark(h,f+4)&&!t.isDark(h,f+5)&&t.isDark(h,f+6)&&(n+=40);for(var m=0;m<e;m++)for(var v=0;v<e-6;v++)t.isDark(v,m)&&!t.isDark(v+1,m)&&t.isDark(v+2,m)&&t.isDark(v+3,m)&&t.isDark(v+4,m)&&!t.isDark(v+5,m)&&t.isDark(v+6,m)&&(n+=40);for(var p=0,b=0;b<e;b++)for(var g=0;g<e;g++)t.isDark(g,b)&&p++;var w=Math.abs(100*p/e/e-50)/5;return n+=10*w,n}},a={glog:function(t){if(t<1)throw new Error("glog("+t+")");return a.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return a.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},s=0;s<8;s++)a.EXP_TABLE[s]=1<<s;for(var c=8;c<256;c++)a.EXP_TABLE[c]=a.EXP_TABLE[c-4]^a.EXP_TABLE[c-5]^a.EXP_TABLE[c-6]^a.EXP_TABLE[c-8];for(var l=0;l<255;l++)a.LOG_TABLE[a.EXP_TABLE[l]]=l;function u(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var n=0;while(n<t.length&&0==t[n])n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}function d(t,e){this.totalCount=t,this.dataCount=e}function h(){this.buffer=[],this.length=0}u.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<t.getLength();i++)e[n+i]^=a.gexp(a.glog(this.get(n))+a.glog(t.get(i)));return new u(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=a.glog(this.get(0))-a.glog(t.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(var r=0;r<t.getLength();r++)n[r]^=a.gexp(a.glog(t.get(r))+e);return new u(n,0).mod(t)}},d.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],d.getRSBlocks=function(t,e){var n=d.getRsBlockTable(t,e);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=n.length/3,r=[],o=0;o<i;o++)for(var a=n[3*o+0],s=n[3*o+1],c=n[3*o+2],l=0;l<a;l++)r.push(new d(s,c));return r},d.getRsBlockTable=function(t,e){switch(e){case i.L:return d.RS_BLOCK_TABLE[4*(t-1)+0];case i.M:return d.RS_BLOCK_TABLE[4*(t-1)+1];case i.Q:return d.RS_BLOCK_TABLE[4*(t-1)+2];case i.H:return d.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},h.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var f=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function m(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var n=e.toString().match(/android ([0-9](?:\.[0-9])?)/i);n&&n[1]&&(t=parseFloat(n[1]))}return t}var v=function(){function t(){return this._elCanvas.toDataURL("image/png")}if(this._android&&this._android<=2.1){var e=1/window.devicePixelRatio,n=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,i,r,o,a,s,c,l){if("nodeName"in t&&/img/i.test(t.nodeName))for(var u=arguments.length-1;u>=1;u--)arguments[u]=arguments[u]*e;else"undefined"==typeof l&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);n.apply(this,arguments)}}var i=function(t){this._bIsPainted=!1,this._android=m(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};return i.prototype.draw=function(t){var e=this._oContext,n=this._htOption,i=3,r=t.getModuleCount(),o=(n.width-2*i)/r,a=(n.height-2*i)/r,s=Math.round(o),c=Math.round(a);this.clear(),e.fillStyle=n.colorLight,e.fillRect(0,0,n.width,i),e.fillRect(0,n.height-i,n.width,i),e.fillRect(0,0,i,n.height),e.fillRect(n.width-i,0,i,n.height);for(var l=0;l<r;l++)for(var u=0;u<r;u++){var d=t.isDark(l,u),h=u*o+i,f=l*a+i;e.strokeStyle=d?n.colorDark:n.colorLight,e.lineWidth=1,e.fillStyle=d?n.colorDark:n.colorLight,e.fillRect(h,f,o,a),e.strokeRect(Math.floor(h)+.5,Math.floor(f)+.5,s,c),e.strokeRect(Math.ceil(h)-.5,Math.ceil(f)-.5,s,c)}var m=n.icon;if(m&&m.complete){var v=m.naturalWidth||m.width,p=v,b=.1578*n.width,g=b;e.drawImage(m,0,0,v,p,(n.width-b)/2,(n.height-g)/2,b,g)}this._bIsPainted=!0},i.prototype.makeImage=function(){if(this._bIsPainted)return t.call(this)},i.prototype.isPainted=function(){return this._bIsPainted},i.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},i.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},i}.call(window);function p(t,e){for(var n=1,r=b(t),o=0,a=f.length;o<=a;o++){var s=0;switch(e){case i.L:s=f[o][0];break;case i.M:s=f[o][1];break;case i.Q:s=f[o][2];break;case i.H:s=f[o][3];break}if(r<=s)break;n++}if(n>f.length)throw new Error("Too long data");return n}function b(t){var e=encodeURI(t).toString().replace(/%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}var g=function(t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:i.H,icon:null},"string"===typeof t&&(t={text:t}),t)for(var e in t)this._htOption[e]=t[e];this._android=m(),this._oQRCode=null,this._oDrawing=new v(this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)};return g.prototype.makeCode=function(t){this._oQRCode=new e(p(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode);var n=this.makeImage();return this._oDrawing.clear(),n},g.prototype.makeImage=function(){if("function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3))return this._oDrawing.makeImage()},g.prototype.clear=function(){this._oDrawing.clear()},g.CorrectLevel=i,g}(),Hv=new Bv({width:332,height:332,colorDark:"#000000",colorLight:"#ffffff",correctLevel:Bv.CorrectLevel.Q}),Uv=function(t){try{return Hv.makeCode(t)}catch(e){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAMFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABaPxwLAAAAD3RSTlMAu0R3Ee4iZjPdmcxViKrphPWWAAARlUlEQVR42u2dZ4gzRRjHx9ya5M6cd2svaNa1F0y82FtiBRW7WEDJ2kAseFYQ0Yv9g6gnCoIIsQsiREVB8ENEsYLeiVhRFAvipzN3xpic+nd2Zqdsibcppyj5w5tstsz+duaZ2WfmmbmXjDTSSCONNNJII43Uu0rk39Lr/Ou6Zyok/TSJq8T95iZDAqg9YLlfRbQz9T9CRw25EQAAvh8SQBnstlk8mAKc0JNi1XRVbog96f3ZF2CRoSgNLPIEZynEo3znuPlRwZU5n4AnmTlj+NEZJsAkmiX2pG1CcljmO6fg6WcJsEI8TdDtfgDStq2VrG0Lqx9Hiz9Xy91e6QZAD8sLkO8HYAPoUpffh3n3ayP3a+x0JwiQvHo3fvUy8XQlzbJhAtQwyznoYxklUc52ZQyrNNfcZ2V8CqBIs2mIAEa54XG8YHJtLoq6Q5Sm8LPYrOOMYQKk6KNlLGJASdpGJEASyEuAhG3bVj9GmJRGOI5pskHj+jEoCdv4lZ+6k/uZw/OyFvpFrx9Ic7Dovf44Bg3T3BoNVQRFzIsbViiAvM/40ACUCdTwTdHN4jH3QxX1ogfQZjiPCuLhAmxMTSCJ5tFlCaCK2vEAVhiAqA9Vz1rBvrcdFKBGr59EawIBALrdEBstdl5e/GyWhvguoAVcBTB/XwhgXFT8MbaRFbe7mGbIEAEMr0rWQwBzmHYri+MB1GEJ03hwmABkCVSNSTRkLajneVF7aBTgF3a7kvfqwuxQAW78aDfaFI3hEUjl9drukAmWLYDImAYZKgDVcbSGzb0eALhPNkobuABpNHmR7YPfhg5QpI+ZSWDZtvdwP3Z10zXqLP0iA6BtYEI++FH5YQMY5Y7rj/iNcAIKwLXGFAW4oEKkhusR/RoGqKEsAYJNXqJhbkO9NeAJ6rKZpw8MkEM+BGAAC2GAvAcAXSsDl0C1WYrIgT+mBMDUOgNsTJMIAyy8JAE22L7AVFwfAGMJp+16eNZKyIZoW/c+4xUBIDUlWqDkAfZuwghte2ZAgIvBpD+WC5AkEQDW8GuBMLFGEICEAe5bH4AUXP1JAVYKhX3cj4NnowFy6wOQxP0fzVh+I/QAZmy7BrLjoTZVYYYCrE9D9Jr7EQnARIrC2BdABgG48GrbVk/A/OkdeWHHBSgOBpBDSLoHuuO/CpB+P9vQAXQjLO14tU31xgxZWieAC954zH1AHcBSANpNsuyFfEkY4AKnbwDp+FCAAFgYAAygCKyamltedRuOAYzQAFPz20gAXWkBEFZ+UKe08aVD1gTYGH+sCwB1Mme8/k9BiDkeJ+sAk08cVkVrXQAufk50P34OlFnB0VsJqjNYfS3Y9F2odAFtJQdqEQ2iAXRXDW5/YD218d8DLACbkHXVpPm3ndwNt9+fjDTSSCONNNL/Q3eSf1lfY5U6IfvGDTEUrq5EOTGW7Fu3Oz0Pyf1Okk+p+Oitu+gJ2ztpP7gn9hrFIAFdd6YEwK89A/xMr4Klfvu0rHrNjxExPLnRQ/649mX4UwH83AdAEni+C8Av8v415EVnJBcYB5qg+dI3QM69ooiW+h3dXTXqOFsAZPGK3wRY2Cxrmt8VDnKd+Q/NrVd6AzgGHfW7YUrVtee5A6slDpBgW1TasYaLpalHgImO4/vt/yEDI7McYCOcEY5y5PsAUOG/pEPWBCBb7+sVQRGhqlinxnKNbTvcBhIxxuqmTDq866rIemD7mOZpfwdQoONCbFgAq7Zd7tAR9ELBl4+NSo9GOIWglv8OABHy1QPLbY0UwAXxw7ZhAF2xAFR38VRzc9eGy8DQAZpmQOUIAKk4ACLpSXbnhL3X/pEAv8nBkICyA+fAzyoI6Em1A0pbGWsAeGV/e482oAAyQYCAGb8tABJE6ciSBpBQRaXSjQ+QYG3Gvl0BfrA4gN9qSBjgWH+6F8UFMFyAZHP/LgBptK04ANOu8bxgchsws9SmYwAo+8oA30cD3A04kQAfmpLxu0KRAyjFBUjbr5HsKmvLZyVAx5GjPTvuA/6asncTyJE1YKoPAFnPa3B/NdSUnIA8Z2dNgAtt29LGHPePC8BeLSfjt64t1GxMgB6lABYwS//Ny1r9FHzahKwXwM+sGXye5vmjtBgW1aFbC1SH2q4s/QrVQpWjAY4wpaZjAfAo8IZ43iijEp5Jmb7a6vb2iAaYCnty3TWOeQ5A//2S8re0uRdMHjrFuWonBdVUGhiAXuIBjKG1AVr+Y7+JCVJdm49ogGl1VnyANP7M4ZQokwKs9QM4mZ28kTsZqYqsqGtOFIATH+BFm2nPGAA5fMMuybOuSFv2Sk5lLfmpKgJS9RJ73dEBjrQHtYEF5AUAbftaEqBrJAt+NUIA6d4AigpgApgeAsBB9POBAtNBMQCWYIm5EmOA5SuCul4E9ZgAKcz2ZIRllPYuHMamhdwBag9cjiiesBECetIKIOEBzOHBWADKz2BNW7NE0mXgd1rr9WDIa6FqGA1gmOUGB9gUeHLKyzlz87UBJtEhGTDru4NzJB7Vpu2VYgIkgBXRzenENUI1PbSMTsXNgDPLNO9Sf4rm9QSaVkwAaj6/Cici3xPAnNvB3fZLes/r0KwsYIXmiTf/x6jh17UAkh7ABPA8Tw6tnlpCowovx08CzmYe2bh47suA/N8D3Gof4gGM0wt5cs3XegFQNS9VRrviVsrOErVEV0eVPZLuADlZDU/m5pIp06fQADZaEyAnjCgLvMSKnYo5RfeUgUfXAJiQAxALHuwdmFUAJaO4JsDnWOaPC3RKfJCHZXxyc23WfoLuigTIAM1FPsjopZNqEQUwF8cIb5gWxpjnls+qIquTbSsKwCgUJIDR+E7M5hS+ZIXlKwfYKM7EXsNzwSZOEwOmPFPT5WaeKADlKWoz2pUM5TNrACmgGTt4nCyJu2X5ze6+lkiAQmE25JCYWxGllJttSreYiwyrvc0/FVSdoNn2r2pD2pz9q3rXtMhII4000v9cSStyr0P+KaVx/yba2E1FOHSrZD10OwkLmNdd6T/lWrDha8efWpEAed3h+F5Odx2ujF0PrwPtSABLB7B0gIzYfwSNF0rtE/sNafBlljsWPtzWNwswsRsv8Nc4gGZw9/kBrtwiOv4UFyCBoH7zD2FyAL0T7geo4dtBAAKRzgZdVPtEHIAEzG3p2fVpdxRvMIA5cNWxIpYahgHaYQCu6Y1kAHdKrxU9AJxPbedQuxKMEEzw9RPm86oXnC5FABRpn2oAACUOEFamwAOlhcO3hpYDSdtxbcDepdysrC/AGIRYw5cqvJ7DTGFRGOFGtDP7jwE01M9pAVBE3g9w4YztrBfAH2GABDrED3AlYPUIcKTtSACDRseDNnC1XeLzFVbCABfjJR2Afa72WgQ5rLU+yFAAyZ1cIzyyclPh9R2xbNebr9tvFL7yAawMBeByr024dS/2rH8IADW9XlPDB7A8FAC1U4RVE1heJ4ALCzM2VZHmqDslYiYMkHEBUgEAOn6b5fGjchhg8FqgAMQC3zEdoKTW54eM8NehAFxgOwZQ4jZA7+0HOGqRtdaUKwLg52E1RBlZxzcOALxRXvQyYF0BJvC7HqGhq3y9G3ntwEnUMsIA9w0PYEPMy62fGYUKKz/PxvQet11dU9ABcpjuCeBI29IBEjTBQuFTFS8wvJE/CZA+BGh+wobyhBqDAOQQoRXPxh2S2sYLbQmA98TynVQ5GqCI/JAADNf9r6PEExUAc563ZdTQMPmC/+y6AHhWP4e8iJ2M4xQ+Ll1z094d1BGpNUshI8zC6gngFubMHyBbQmYDM15Y2fug+eCoIOuLbkN0ItyB8XInVAsMYFgOSc6t5Sm3rUmiTQTA5AqhAKkqVh2Swa8hgBRWhwWQbYq/RDGGjgQYs+jGTlngSRZyDgGMY4WewzpzgwDIN+DhZVg00d85gGyK53AWszfWF3tW9pgoQJHmytyfDrFtZ0CAE3DGkftw52eBmV9OA0jRW9CS4erIt+r+buxrOgMedxoMwFjCq2IiThWL7PiiBOBRzJqqMwobVqYMbDEwwHFw1X7mCnQmAIfHdxUA05ubut1g/OabV/sHi4A18wMAKGd4UxpPbM/O0WeMBCjx2OfPvgx4ySUDGs6gRUDTYEELK8UTJUUdQGkjrSqkqzx0kay7PdYBjbB2niOiOLzzVYUVBXClFtDZjzZPIpJJ62mPmvMDfFCSAcyWu5j+IMCJAigqr2QHoF0RiWGVbsZWcjeSqFKAsMbKwCxfi99mZ5Lk1zqAURZc5FIAm4nCKIM2FT2o2iXUnKEHWp5N0m+v8otnu+Zq+yA5VneV13mTGYfFnvKf6pSIaIyYxlYVkdQlbRgrpzUD17ndZ0uvkM1KT3Gn0NJNke7Znik+IFF/942iPOjF7gKV/3h6YTwJs218FnXAeIEb494HSqt/2FF+s2ZrXzf9C0SeqvQCkJjZJeYfBxx7iyjh1E3VspLAApU0GWmkkUYaaaT/sozXyL+qC7Oh9ZKT73gbl5dIbyo2zV4fJxkxYj0FLIr0YngaGmWuj1lGtXBU+GTh4i1pEYI0HdjQaAw6Yibc8uZ2quMQdnZ3i4hP+zob0vENP0dVCyMnEJIlTj9D5V0YAFQvmEr1gE++gXCBlRbwi5y4Fgtgeg0AvwIAKSBohUUvxYweQjQQUskrscEACB5wQlOw87w2+EwK7YJPVYi7DggwE+46eVYx7uVN9Oq7bEwANxbpqOCC+BtEYwiuJ6wCeTZ2fyya7nooh9rn6QWqg7cZCCAy1MgAwsrro5mWDNU0dIDbuwAcZxacoQCcrEysDq6ODrDEJpceZgUA6OcfQ8kBFZgnaXhaEQCZEqFUefb40zoAjzP0BJC07V04h9ihbMWmAmgl+MPd2kMCpKp5kRH1pjMgAImeniPToADH8EowJgEm6Y4Efk/RFwXN764AF+zVE0CjK0CRL4LYWAIY1Qa9YL7uYvzmASRmdqIAR+4oAJi6AhihwaSJ7gBGmS962EDZwAKsDfBo8U+KcQoF0G0pHsAJoYEMmno3gEm0iR+Abj4/hdfGGUY/AEYdrfgAObS8U5YFQBKthSbN/+mT8Vo0gBte7Q6QUdPoFUDb5No8HwBI1+eDAOTrdq1D6+DyXJMIALNQxAOHbavXgmQ3AHc4q1EKjBdJBQHI8bOGFQA4hs08yq0uUYx+qqFRA14K7JWyggBGsuaOpY1LAJbh8/ReFKMvAJaA3w6vjADw5I5YttgOBUBrRp75Js/3CUDm4B9RywmnC6gEAShu2w9AjYCdVsdsvwAplgVh5ycNBAuFOQavBQCyyLOrSH8AIgvCzk9CAKh3AbvRvA7ATjtjoBwIWUGZuZ08t4NG6Bp9i+2QABuAza/o3waoavpqkIz6y+yNCIAJtEs+gByWKOg4sNw/wAZ8kQ0Vv4O3EQmQdluHnAZQb5xMs6zYXGr0D2DUF/U+UIcIrBAAVbXj6AApLE+4S5ZXroTTNwC5S68EYicNgkYBfOEQHeAYTCexPIkz3JWzw3BIkmXMi6NhAC4dwI2fvJzPIZ/CGX6Am/sD2BjIixbx97UBEq4Z7GRU28RAywdwQ6M/gDm5aCiH5bUBjmM+2oR7am1VBzgH/QGkyzLjFxSAbIhUY+kB1Nz84p7am/t6AJ4j3+4L4Dh98e/PwaY4DLBfu0SpWa4dLathmkW9t+wNQMWaHNEkxwEwvmXL9c7Ve0Y7AGymTT8Ad6uQVBo4pRtAVgL4h2SykPm/b1/VMFX26sBtV9sf08KIMsJjCbnXO5QM+s9leBGw9iztYu+iAdjXxwFIZoGO1ktbFCYlACreIQ8z4QO4iFzBETPs/gQ+LccB2BnSQ82CyvHXOs9DqnuHFIDypJrMkGgAMR7AyUEHfD90tNRaJBJgQR5S70sv572lD/uSmAC5IEC6LHJ9I5qYJcPiJity77+5GQcaVhiA9ZxPI0rA/abQ1jEByBuyg3gqXQ4drY1PfcIRU34P8Jlgc1OHKDlE19HRU+l2I0PUrWSkkUYaaaSRRhpppJFi6C8fDRp5d6pE1AAAAABJRU5ErkJggg=="}},Gv={methods:{clickInteractionViewLink:function(){var t=window.open("https://ui.marklion.cn/article/tools/marklion-interaction-mobile-view-intro.shtml");t.opener=null},clickGoWebInteraction:function(){var t=window.open(this.interactionUrl);t.opener=null},clickShowMenu:function(){var t=this,e=!this.menuVisible;e&&(this.url=this.interactionUrl),setTimeout((function(){t.menuVisible=e}),0)},hideMenu:function(){var t=this;clearTimeout(this.menuHandler),this.menuHandler=setTimeout((function(){t.menuVisible=!1}),50)}},watch:{url:function(t){t&&(this.qrcodeImage=Uv(t))},menuVisible:function(t){t?window.addEventListener("click",this.hideMenu,!1):window.removeEventListener("click",this.hideMenu,!1)}},computed:{supportInteraction:function(){return!Qr.notSupportInteraction(this.cloudVersion)},interactionUrl:function(){return this.getCurrentInteractionUrl()}},data:function(){return{qrcodeImage:null,url:"",menuVisible:!1,menuHandler:0}},beforeDestroy:function(){clearTimeout(this.menuHandler),window.removeEventListener("click",this.hideMenu,!1)},created:function(){0},props:{fixRight:{type:Boolean,default:!1}}},Wv=Gv,$v=(n("de0f"),Object(Gr["a"])(Wv,Rv,Vv,!1,null,"6c05bd4d",null)),zv=$v.exports,Yv=function(){var t=this,e=t._self._c;return e("div",{ref:"btnGoArtrenderMode",staticClass:"btn-go-artrendermode",class:{on:t.artShowInListMode},attrs:{title:t.title},on:{click:t.clickArtShowInListMode}})},Xv=[],Kv={methods:{setGuideRect:function(){this.setBeginnerGuideRect(a["k"].ArtboardModeMenu,"btnGoArtrenderMode",a["j"].TopRight)},clickArtShowInListMode:function(){this.$store.commit("artShowInListMode",!this.artShowInListMode)}},computed:{title:function(){var t=this.artShowInListMode;return"".concat(t?"宫格视图":"画布视图","\n点击将画板列表切换为").concat(t?"画布视图":"宫格视图")},resetGuideRectKey:function(){var t=this.winRect.width;return"".concat(t)},winRect:function(){return this.$store.state.winRect}},watch:{resetGuideRectKey:function(){this.setGuideRect()}},beforeDestroy:function(){this.setGuideRect()},mounted:function(){this.setGuideRect()}},qv=Kv,Jv=(n("47da"),Object(Gr["a"])(qv,Yv,Xv,!1,null,"8274e7a2",null)),Qv=Jv.exports,Zv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log"},[e("a",{staticClass:"btn-folder-log",class:{on:t.logVisible},attrs:{href:"javascript:;",title:"文件夹日志"},on:{click:function(e){t.logVisible=!t.logVisible}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.logVisible,expression:"logVisible"}],staticClass:"box",on:{click:function(e){t.notClickClose=!0}}},[e("div",{staticClass:"header"},[e("nav",[t.isRootFolder?t._e():e("a",{class:{on:t.showType===t.EnumLogShowType.ALL},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.ALL)}}},[t._v("全部")]),e("a",{class:{on:t.showType===t.EnumLogShowType.Folder||t.isRootFolder},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.Folder)}}},[t._v("文件夹")]),t.isRootFolder?t._e():e("a",{class:{on:t.showType===t.EnumLogShowType.Artboard},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.Artboard)}}},[t._v("画板")]),t.isRootFolder?t._e():e("a",{class:{on:t.showType===t.EnumLogShowType.File},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.File)}}},[t._v("文件")])]),e("menu",[e("a",{staticClass:"btn-refresh2",attrs:{href:"javascript:;",title:"刷新日志列表"},on:{click:function(e){return t.clickReload(!0)}}})])]),e("div",{ref:"list",staticClass:"list",class:t.listCls,on:{scroll:t.onListScroll}},[t.listFetchState===t.FetchState.Fetching||t.listFetchState===t.FetchState.Error?e("NetworkLoading",{attrs:{loadText:"正在获取消息列表...",errorText:t.errorText,isLoading:t.listFetchState===t.FetchState.Fetching,isError:t.listFetchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload(!0)}}}):0===t.showList.length?e("div",{staticClass:"empty"},[t._v("没有找到"+t._s(t.showType===t.EnumLogShowType.Folder?"文件夹相关":t.showType===t.EnumLogShowType.Artboard?"画板相关":t.showType===t.EnumLogShowType.File?"文件相关":"")+"日志")]):e("ul",t._l(t.list,(function(n){return e("CloudFolderLogItem",{key:"folderlog-".concat(n.id),attrs:{item:n,showType:t.showType,listViewRect:t.listViewRect,allShowListItemSelect:t.allShowListItemSelect},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile,resetShowListItemsOffsetTop:t.resetShowListItemsOffsetTop}})})),1)],1)])])},tp=[],ep=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item",class:t.itemCls,style:t.style},[t.itemInView?e("div",{ref:"item",staticClass:"item-content"},[e("UserFace2",{attrs:{self:t.isSelf,tourist:t.isTourist,title:t.userFaceTitle,text:t.userFaceText}}),e("div",{staticClass:"summary"},[e("div",{staticClass:"info"},[e("div",{staticClass:"nickname"},[t._v(t._s(t.userNickName))]),t.item.type===t.EnumLoggerType.Artboard_Upload?e("ArtboardUpload",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.NetDisk_FileUploadCompleted?e("NetdiskFileUpload",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Remove?e("ItemRemove",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.isRecycleRestoreType?e("ItemRestore",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Remove_ArtboardVer?e("ArtboardVerRemove",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Remove_NetdiskFileVer?e("NetdiskFileVerRemove",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.MoveTo?e("ItemMoveTo",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Folder_Edit?e("FolderEdit",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Folder_Add||t.item.type===t.EnumLoggerType.Folder_SetPreview||t.item.type===t.EnumLoggerType.Folder_CancelPreview?e("FolderSet",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.NetDisk_LinkAdd||t.item.type===t.EnumLoggerType.NetDisk_LinkEdit?e("NetdiskFileLinkChange",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.NetDisk_FileReName?e("NetdiskFileRename",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t._e()],1),e("div",{staticClass:"date"},[t._v(t._s(t.item.dateStr))])])],1):t._e()])},np=[],ip=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("上传了"),e("ArrayItems",{attrs:{showMore:t.showMoreArtboard,list:t.artboards,canClick:!0,listName:"画板"},on:{clickItem:t.clickArtboard,clickShowMore:t.clickShowMoreArtboard}}),t.summaryHTML?e("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.summaryHTML)}}):t._e()],1)},rp=[],op=function(){var t=this,e=t._self._c;return e("div",{staticClass:"array-items",class:{nomore:!t.moreList}},[e("span",{staticClass:"name",on:{click:t.clickMore}},[t._v(t._s(t.list.length>t.startMaxCount?"".concat(t.list.length,"个"):"")+t._s(t.listName))]),t._l(t.startList,(function(n,i){return e("span",{key:i,class:{art:1,first:0===i}},[e("ArrayItem",{attrs:{canClick:t.canClick,light:t.light,dead:t.dead,item:n},on:{clickItem:t.clickItem}})],1)})),t.moreList?[t.showMore?e("span",{staticClass:"more-list"},t._l(t.moreList,(function(n,i){return e("span",{key:t.startMaxCount+i,class:{art:1}},[e("ArrayItem",{attrs:{canClick:t.canClick,light:t.light,dead:t.dead,item:n},on:{clickItem:t.clickItem}})],1)})),0):t._e(),t.showMore?t._e():e("span",{staticClass:"more-text",on:{click:t.clickMore}},[t._v("等")]),e("span",{staticClass:"btn-more-visible",class:{on:t.showMore},on:{click:t.clickMore}})]:t._e()],2)},ap=[],sp=function(){var t=this,e=t._self._c;return t.canClick?e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.clickItem(t.item)}}},[t._v(t._s(t.name))]):e("span",{class:{light:t.light,dead:t.dead}},[t._v(t._s(t.name))])},cp=[],lp={methods:{clickItem:function(t){this.$emit("clickItem",t)}},computed:{name:function(){var t=this.item,e=t.name,n=t.fileName,i=t.fileExt;return e||n+i}},props:{item:Object,canClick:Boolean,light:{type:Boolean,default:!0},dead:{type:Boolean,default:!1}}},up=lp,dp=Object(Gr["a"])(up,sp,cp,!1,null,null,null),hp=dp.exports,fp={components:{ArrayItem:hp},methods:{clickMore:function(){this.moreList&&this.$emit("clickShowMore",!this.showMore)},clickItem:function(t){this.$emit("clickItem",t)}},computed:{startMaxCount:function(){return 5},startList:function(){var t=this.list,e=this.startMaxCount;return t.length<=e?t:t.slice(0,5)},moreList:function(){var t=this.list,e=this.startMaxCount;return t.length<=e?null:t.slice(5)}},props:{list:Array,canClick:Boolean,listName:String,light:{type:Boolean,default:!0},dead:{type:Boolean,default:!1},showMore:{type:Boolean,default:!1}}},mp=fp,vp=(n("233b"),Object(Gr["a"])(mp,op,ap,!1,null,"4ccc1574",null)),pp=vp.exports,bp={components:{ArrayItems:pp},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickShowMoreArtboard:function(t){this.item.showMore[a["I"].Artboard]=t}},computed:{showMoreArtboard:function(){return this.item.showMore[a["I"].Artboard]},EnumLogShowType:function(){return a["I"]},artboards:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.artboards)&&void 0!==t?t:[]},desc:function(){var t,e,n=null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.desc)&&void 0!==t?t:"";return Object(l["j"])(n)&&(n=n.trim()),n},summaryHTML:function(){var t=this.desc;return t?sc(t):null}},props:{item:Object}},gp=bp,wp=(n("2c33"),Object(Gr["a"])(gp,ip,rp,!1,null,"0f04ebde",null)),yp=wp.exports,kp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},t._l(t.texts,(function(n,i){return e("ArrayItem",{key:i,attrs:{canClick:!!n.canClick,light:!!n.light,item:n},on:{clickItem:t.clickFolder}})})),1)},Cp=[],xp={components:{ArrayItem:hp},methods:{clickFolder:function(t){this.$emit("clickFolder",t)}},computed:{isRootFolder:function(){return 0===this.cloudCurrentFolderId},canClickFolder:function(){return this.cloudCurrentFolderId===this.itemData.parentId},texts:function(){var t=this.canClickFolder,e=this.itemData,n=this.isRootFolder,i=n?"":"子",r=[];switch(this.item.type){case a["J"].Folder_Add:t?(r.push({name:"新建了".concat(i,"文件夹")}),r.push({name:e.name,light:!0,canClick:!0,id:e.id})):(r.push({name:"新建了当前文件夹"}),r.push({name:e.name,light:!0}));break;case a["J"].Folder_SetPreview:t?(r.push({name:"设置了".concat(i,"文件夹")}),r.push({name:e.name,light:!0,canClick:!0,id:e.id})):(r.push({name:"设置了当前文件夹"}),r.push({name:e.name,light:!0})),r.push({name:"的封面"});break;case a["J"].Folder_CancelPreview:t?(r.push({name:"取消了".concat(i,"文件夹")}),r.push({name:e.name,light:!0,canClick:!0,id:e.id})):(r.push({name:"取消了当前文件夹"}),r.push({name:e.name,light:!0})),r.push({name:"的封面"});break}return r},itemData:function(){var t;return null!==(t=this.item.data)&&void 0!==t?t:{}}},props:{item:Object}},Sp=xp,Tp=Object(Gr["a"])(Sp,kp,Cp,!1,null,null,null),Op=Tp.exports,Ip=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},t._l(t.texts,(function(n,i){return e("ArrayItem",{key:i,attrs:{canClick:!!n.canClick,light:!!n.light,item:n},on:{clickItem:t.clickFolder}})})),1)},Ap=[],Fp={components:{ArrayItem:hp},methods:{clickFolder:function(t){this.$emit("clickFolder",t)}},computed:{isRootFolder:function(){return 0===this.cloudCurrentFolderId},texts:function(){var t=this.itemData,e=t.folder,n=t.oldFolder;if(!e)return[];var i=this.cloudCurrentFolderId===e.parentId,r=this.isRootFolder?"":"子";if(!n)return[{name:"编辑了".concat(i?r:"","文件夹")},{name:e.name,light:!0,canClick:i,id:e.id},{name:"的配置信息"}];var o=e.name,s=e.shareMode,c=n.name,l=n.shareMode,u=o!=c,d=s!=l;if(!u&&!d)return[{name:"编辑了".concat(i?r:"","文件夹")},{name:e.name,light:!0,canClick:i,id:e.id},{name:"的配置信息"}];var h=[];return u&&(i?(h.push({name:"重命名了".concat(r,"文件夹")}),h.push({name:c,light:!0})):h.push({name:"重命名了当前文件夹"}),h.push({name:"为"}),h.push({name:o,light:!0,id:e.id,canClick:i})),d&&(u?(h.push({name:"并修改了访问模式为"}),h.push({name:a["v"].getName(s),light:!0})):(i?(h.push({name:"修改了".concat(r,"文件夹")}),h.push({name:o,light:!0,id:e.id,canClick:!0})):h.push({name:"修改了当前文件夹"}),h.push({name:"的访问模式为"}),h.push({name:a["v"].getName(s),light:!0}))),h},itemData:function(){var t;return null!==(t=this.item.data)&&void 0!==t?t:{}}},props:{item:Object}},jp=Fp,_p=Object(Gr["a"])(jp,Ip,Ap,!1,null,null,null),Mp=_p.exports,Lp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[!t.isMoveOutMode&&t.oldParent?[t._v("从"),e("ArrayItem",{attrs:{canClick:!0,item:t.oldParent},on:{clickItem:t.clickFolder}})]:t._e(),t._v(t._s(t.moveModeText)+"了"),t.hasFolder?e("ArrayItems",{attrs:{list:t.folders,showMore:t.showMoreFolder,canClick:!0,listName:"文件夹"},on:{clickItem:t.clickFolder,clickShowMore:t.clickShowMoreFolder}}):t._e(),t._v(t._s(t.hasFolder&&t.hasFile?",":"")),t.hasFile?e("ArrayItems",{attrs:{list:t.files,showMore:t.showMoreFile,canClick:!0,listName:"文件"},on:{clickItem:t.clickFile,clickShowMore:t.clickShowMoreFile}}):t._e(),t._v(t._s(t.hasFile&&t.hasArtboard?",":"")),t.hasArtboard?e("ArrayItems",{attrs:{list:t.artboards,showMore:t.showMoreArtboard,canClick:!0,listName:"画板"},on:{clickItem:t.clickArtboard,clickShowMore:t.clickShowMoreArtboard}}):t._e(),t.isMoveOutMode&&t.newParent?[t._v("到"),e("ArrayItem",{attrs:{canClick:!0,item:t.newParent},on:{clickItem:t.clickFolder}})]:t._e()],2)},Pp=[],Dp={components:{ArrayItems:pp,ArrayItem:hp},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFolder:function(t){this.$emit("clickFolder",t)},clickFile:function(t){this.$emit("clickFile",t)},clickShowMoreFolder:function(t){this.item.showMore[a["I"].Folder]=t},clickShowMoreFile:function(t){this.item.showMore[a["I"].File]=t},clickShowMoreArtboard:function(t){this.item.showMore[a["I"].Artboard]=t}},computed:{showMoreFolder:function(){return this.item.showMore[a["I"].Folder]},showMoreFile:function(){return this.item.showMore[a["I"].File]},showMoreArtboard:function(){return this.item.showMore[a["I"].Artboard]},isRootFolder:function(){return 0===this.cloudCurrentFolderId},moveModeText:function(){return this.isMoveOutMode?"移动":"移入"},oldParent:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.parent)&&void 0!==t?t:null},newParent:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.newParent)&&void 0!==t?t:null},isMoveOutMode:function(){var t;return(null===(t=this.oldParent)||void 0===t?void 0:t.id)===this.cloudCurrentFolderId},hasFolder:function(){var t=this.showType,e=this.folders,n=this.isRootFolder;return(n||t===a["I"].ALL||t===a["I"].Folder)&&e.length>0},hasFile:function(){var t=this.showType,e=this.files,n=this.isRootFolder;return!n&&(t===a["I"].ALL||t===a["I"].File)&&e.length>0},hasArtboard:function(){var t=this.showType,e=this.artboards,n=this.isRootFolder;return!n&&(t===a["I"].ALL||t===a["I"].Artboard)&&e.length>0},folders:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.folders)&&void 0!==t?t:[]},files:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.files)&&void 0!==t?t:[]},artboards:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.artboards)&&void 0!==t?t:[]}},props:{item:Object,showType:Number}},Np=Dp,Ep=Object(Gr["a"])(Np,Lp,Pp,!1,null,null,null),Rp=Ep.exports,Vp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("删除了"),t.hasFolder?e("ArrayItems",{attrs:{list:t.folders,showMore:t.showMoreFolder,canClick:!1,light:!1,dead:!0,listName:"文件夹"},on:{clickItem:t.clickFolder,clickShowMore:t.clickShowMoreFolder}}):t._e(),t._v(t._s(t.hasFolder&&t.hasFile?",":"")),t.hasFile?e("ArrayItems",{attrs:{list:t.files,showMore:t.showMoreFile,canClick:!1,light:!1,dead:!0,listName:"文件"},on:{clickItem:t.clickFile,clickShowMore:t.clickShowMoreFile}}):t._e(),t._v(t._s(t.hasFile&&t.hasArtboard?",":"")),t.hasArtboard?e("ArrayItems",{attrs:{list:t.artboards,showMore:t.showMoreArtboard,canClick:!1,dead:!0,light:!1,listName:"画板"},on:{clickItem:t.clickArtboard,clickShowMore:t.clickShowMoreArtboard}}):t._e()],1)},Bp=[],Hp={components:{ArrayItems:pp},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFolder:function(t){this.$emit("clickFolder",t)},clickFile:function(t){this.$emit("clickFile",t)},clickShowMoreFolder:function(t){this.item.showMore[a["I"].Folder]=t},clickShowMoreFile:function(t){this.item.showMore[a["I"].File]=t},clickShowMoreArtboard:function(t){this.item.showMore[a["I"].Artboard]=t}},computed:{showMoreFolder:function(){return this.item.showMore[a["I"].Folder]},showMoreFile:function(){return this.item.showMore[a["I"].File]},showMoreArtboard:function(){return this.item.showMore[a["I"].Artboard]},isRootFolder:function(){return 0===this.cloudCurrentFolderId},hasFolder:function(){var t=this.showType,e=this.folders,n=this.isRootFolder;return(n||t===a["I"].ALL||t===a["I"].Folder)&&e.length>0},hasFile:function(){var t=this.showType,e=this.files,n=this.isRootFolder;return!n&&(t===a["I"].ALL||t===a["I"].File)&&e.length>0},hasArtboard:function(){var t=this.showType,e=this.artboards,n=this.isRootFolder;return!n&&(t===a["I"].ALL||t===a["I"].Artboard)&&e.length>0},folders:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.folders)&&void 0!==t?t:[]},files:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.files)&&void 0!==t?t:[]},artboards:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.artboards)&&void 0!==t?t:[]}},props:{item:Object,showType:Number}},Up=Hp,Gp=Object(Gr["a"])(Up,Vp,Bp,!1,null,null,null),Wp=Gp.exports,$p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("还原了"+t._s(t.restoreTypeName)),e("ArrayItem",{attrs:{canClick:!0,item:t.item.data},on:{clickItem:t.clickItem}}),t.versionInfo?e("span",{staticClass:"desc",domProps:{textContent:t._s(t.versionInfo.text)}}):t._e()],1)},zp=[],Yp={components:{ArrayItem:hp},methods:{clickItem:function(){var t;switch(this.restoreType){case a["T"].Artboard:this.clickArtboard(this.item.data);break;case a["T"].File:this.clickFile(this.item.data,null===(t=this.versionIds)||void 0===t?void 0:t[0]);break;case a["T"].Folder:this.clickFolder(this.item.data);break}},clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFolder:function(t){this.$emit("clickFolder",t)},clickFile:function(t,e){this.$emit("clickFile",t,e)}},computed:{versionIds:function(){var t=this.restoreType;if(t===a["T"].Folder)return null;var e=this.item.data.verIds;return Object(l["j"])(e)?(e=e.split(",").map((function(t){return parseInt(t.trim())})).filter((function(t){return!isNaN(t)&&t>0})),e.length>0?e:null):null},versionInfo:function(){var t,e=null===(t=this.versionIds)||void 0===t?void 0:t.map((function(t){return"#".concat(t)}));if(!e)return null;var n=e.length,i=5,r=n>i;return r&&(e=e.slice(i)),{more:r,text:"".concat(e.join(",")).concat(r?" 等".concat(n,"个版本"):""),count:n}},restoreType:function(){var t;return null===(t=this.item.data)||void 0===t?void 0:t.type},restoreTypeName:function(){return a["T"].getMiniName(this.restoreType)}},props:{item:Object,showType:Number}},Xp=Yp,Kp=Object(Gr["a"])(Xp,$p,zp,!1,null,null,null),qp=Kp.exports,Jp=function(){var t=this,e=t._self._c;return t.artboard&&null!=t.artboard.verId?e("div",{staticClass:"folder-log-item-info"},[t._v("删除了画板"),e("ArrayItem",{attrs:{item:t.artboard,canClick:!0},on:{clickItem:t.clickArtboard}}),t._v("的版本"),e("span",{staticClass:"dead",domProps:{textContent:t._s("#".concat(t.artboard.verId))}})],1):t._e()},Qp=[],Zp={components:{ArrayItem:hp},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)}},computed:{artboard:function(){return this.item.data}},props:{item:Object,showType:Number}},tb=Zp,eb=Object(Gr["a"])(tb,Jp,Qp,!1,null,null,null),nb=eb.exports,ib=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v(t._s(t.modeText)+"了链接文件"),e("ArrayItem",{attrs:{item:t.file,canClick:!0},on:{clickItem:t.clickFile}})],1)},rb=[],ob={components:{ArrayItem:hp},methods:{clickFile:function(t){this.$emit("clickFile",t)}},computed:{isLinkAdd:function(){return this.item.type===a["J"].NetDisk_LinkAdd},file:function(){return this.item.data},modeText:function(){return this.isLinkAdd?"添加":"编辑"}},props:{item:Object}},ab=ob,sb=Object(Gr["a"])(ab,ib,rb,!1,null,null,null),cb=sb.exports,lb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("重命名了文件"),t.oldFileName?e("span",{staticClass:"dead"},[t._v(t._s(t.oldFileName+t.fileExt))]):t._e(),t._v("为"),e("ArrayItem",{attrs:{item:t.file,canClick:!0},on:{clickItem:t.clickFile}})],1)},ub=[],db={components:{ArrayItem:hp},methods:{clickFile:function(t){this.$emit("clickFile",t)}},computed:{oldFileName:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.oldFileName)&&void 0!==t?t:""},file:function(){var t;return null===(t=this.item.data)||void 0===t?void 0:t.file},fileExt:function(){var t,e;return null!==(t=null===(e=this.file)||void 0===e?void 0:e.fileExt)&&void 0!==t?t:""}},props:{item:Object}},hb=db,fb=Object(Gr["a"])(hb,lb,ub,!1,null,null,null),mb=fb.exports,vb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("上传了"),e("ArrayItems",{attrs:{list:t.files,showMore:t.showMoreFile,canClick:!0,listName:"文件"},on:{clickItem:t.clickFile,clickShowMore:t.clickShowMoreFile}})],1)},pb=[],bb={components:{ArrayItems:pp},methods:{clickFile:function(t){this.$emit("clickFile",t)},clickShowMoreFile:function(t){this.item.showMore[a["I"].File]=t}},computed:{showMoreFile:function(){return this.item.showMore[a["I"].File]},files:function(){var t=this.item.data;return Object(l["i"])(t)||(t=[t]),t}},props:{item:Object}},gb=bb,wb=Object(Gr["a"])(gb,vb,pb,!1,null,null,null),yb=wb.exports,kb=function(){var t=this,e=t._self._c;return t.file&&null!=t.file.verId?e("div",{staticClass:"folder-log-item-info"},[t._v("删除了文件"),e("ArrayItem",{attrs:{item:t.file,canClick:!0},on:{clickItem:t.clickFile}}),t._v("的版本"),e("span",{staticClass:"dead",domProps:{textContent:t._s("#".concat(t.file.verId))}})],1):t._e()},Cb=[],xb={components:{ArrayItem:hp},methods:{clickFile:function(t){this.$emit("clickFile",t)}},computed:{file:function(){return this.item.data}},props:{item:Object,showType:Number}},Sb=xb,Tb=Object(Gr["a"])(Sb,kb,Cb,!1,null,null,null),Ob=Tb.exports,Ib={components:{UserFace2:Js,ArtboardVerRemove:nb,ArtboardUpload:yp,FolderSet:Op,FolderEdit:Mp,ItemMoveTo:Rp,ItemRemove:Wp,NetdiskFileLinkChange:cb,NetdiskFileRename:mb,NetdiskFileUpload:yb,ItemRestore:qp,NetdiskFileVerRemove:Ob},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFolder:function(t){this.$emit("clickFolder",t)},clickFile:function(t,e){this.$emit("clickFile",t,e)},resetBoxHeight:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.visible,o=this.item,a=this.itemInView;r&&a&&(!t&&o.offsetHeight>0||(o.offsetHeight=null!==(e=null===(n=this.$refs.item)||void 0===n?void 0:n.offsetHeight)&&void 0!==e?e:0,o.offsetHeight>0&&!i&&this.$emit("resetShowListItemsOffsetTop")))}},computed:{isRecycleRestoreType:function(){return a["J"].isRecycleRestoreType(this.item.type)},itemInView:function(){var t=this.listViewRect,e=this.itemRect;return 0===e.offsetHeight||O(t,e)},itemRect:function(){var t=this.item,e=t.offsetHeight,n=t.offsetTop;return{x:0,width:100,y:n,height:e}},isRootFolder:function(){return 0===this.cloudCurrentFolderId},visible:function(){var t=this.item,e=t.visibleInFolder,n=t.visibleInFile,i=t.visibleInArtboard,r=this.isRootFolder,o=this.showType;if(r)return e;switch(o){case a["I"].Artboard:return i;case a["I"].File:return n;case a["I"].Folder:return e;default:return!0}},itemCls:function(){var t=this.item,e=t.visibleInFolder,n=t.visibleInFile,i=t.visibleInArtboard;if(!e&&!n&&!i)return null;var r={};return e&&(r["visible-folder"]=1),n&&(r["visible-file"]=1),i&&(r["visible-artboard"]=1),r},style:function(){var t,e=null!==(t=this.item.offsetHeight)&&void 0!==t?t:0;return e>0?{height:"".concat(e,"px")}:null},EnumLoggerType:function(){return a["J"]},userNickName:function(){var t=this.user;if(!t)return"-";var e=t.nickName;return e||"-"},userFaceText:function(){var t=this.userNickName;return t[t.length-1]},userFaceTitle:function(){var t=this.user;return t?"".concat(t.nickName,"(").concat(t.email,")"):null},isSelf:function(){var t;return(null===(t=this.user)||void 0===t?void 0:t.userKey)===this.cloudUserKey},user:function(){return this.item.user},isTourist:function(){var t;switch(null===(t=this.user)||void 0===t?void 0:t.authority){case a["p"].Admin:case a["p"].Designer:return!1}return!0},showMoreFolder:function(){return this.item.showMore[a["I"].Folder]},showMoreFile:function(){return this.item.showMore[a["I"].File]},showMoreArtboard:function(){return this.item.showMore[a["I"].Artboard]}},watch:{showMoreFolder:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight(!0)}))},showMoreFile:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight(!0)}))},showMoreArtboard:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight(!0)}))},showType:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight(!0,!0)}))},visible:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight()}))},itemInView:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight(!0)}))}},props:{item:Object,showType:Number,listViewRect:Object,allShowListItemSelect:Boolean},mounted:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight()}))}},Ab=Ib,Fb=(n("09ee"),Object(Gr["a"])(Ab,ep,np,!1,null,"4858f87a",null)),jb=Fb.exports,_b="folderlog-show",Mb=Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])({},a["J"].Remove,1),a["J"].MoveTo,1),a["J"].Folder_Add,1),a["J"].Folder_Edit,1),a["J"].Folder_SetPreview,1),a["J"].Folder_CancelPreview,1),a["J"].Recycle_RestoreFolder,1),a["J"].RecycleVerControl_RestoreFolder,1),Lb=Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])({},a["J"].Remove,1),a["J"].MoveTo,1),a["J"].NetDisk_LinkAdd,1),a["J"].NetDisk_LinkEdit,1),a["J"].NetDisk_FileReName,1),a["J"].Remove_NetdiskFileVer,1),a["J"].NetDisk_FileUploadCompleted,1),a["J"].Recycle_RestoreNetdiskFile,1),a["J"].RecycleVerControl_RestoreNetdiskFile,1),Pb=Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])(Object(f["a"])({},a["J"].Remove_ArtboardVer,1),a["J"].Remove,1),a["J"].MoveTo,1),a["J"].Artboard_Upload,1),a["J"].Recycle_RestoreArtboard,1),a["J"].RecycleVerControl_RestoreArtboard,1),Db={components:{NetworkLoading:Iu,CloudFolderLogItem:jb},methods:{clickArtboard:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,s,c,l,u;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(t){n.n=1;break}return n.a(2);case 1:if(r=t.guid,o=t.id,s=t.name,null!=r||null!=o){n.n=2;break}return n.a(2);case 2:if(c=e.documentArtboards,l=c.find((function(t){if(t){var e=t.artboard;if(e){var n=e.cid,i=e.guid;return!!(o>0&&n===o||r&&r===i)||void 0}}})),l){n.n=8;break}if(!(o>0)){n.n=7;break}return n.p=3,n.n=4,e.checkCloudItem(o,a["l"].Artboard);case 4:l=n.v,e.goCloudPath({folderId:l.parentId,artboardGuid:l.guid,newWindow:!0}),n.n=6;break;case 5:n.p=5,u=n.v,e.showTextTip(s?u.toString().replace("[".concat(o,"]"),"「".concat(s,"」")).replace("「".concat(o,"」"),"「".concat(s,"」")):u);case 6:return n.a(2);case 7:return e.showTextTip("画板「".concat(s,"」已不在当前文件夹,可能已经被删除或移动")),n.a(2);case 8:if(!e.inCloudViewerMode){n.n=12;break}if(!e.inArtboardMode){n.n=10;break}if(l.artboard.cid!==e.curArtboardId||null!=l.artboardVerData){n.n=9;break}return e.showTextTip("已切换到画板「".concat(l.artboard.name,"」")),n.a(2);case 9:e.setCurArtboard(l),n.n=11;break;case 10:e.$store.commit("resetCenterArtboard",l.artboard);case 11:n.n=13;break;case 12:e.goCloudPath({folderId:e.cloudCurrentFolderId,artboardGuid:l.artboard.guid,newWindow:!1});case 13:return n.a(2)}}),n,null,[[3,5]])})))()},clickFolder:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,s,c,l;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(t){n.n=1;break}return n.a(2);case 1:if(o=t.id,s=t.name,null!=o){n.n=2;break}return n.a(2);case 2:if(c=null===(r=e.cloudSubFolders)||void 0===r?void 0:r.find((function(t){return t.id===o})),!c){n.n=3;break}return e.goCloudPath({folderId:o,newWindow:!0}),n.a(2);case 3:return n.p=3,n.n=4,e.checkCloudItem(o,a["l"].Folder);case 4:e.goCloudPath({folderId:o,newWindow:!0}),n.n=6;break;case 5:n.p=5,l=n.v,e.showTextTip(s?l.toString().replace("[".concat(o,"]"),"「".concat(s,"」")).replace("「".concat(o,"」"),"「".concat(s,"」")):l);case 6:return n.a(2)}}),n,null,[[3,5]])})))()},clickFile:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function r(){var o,l,u,d,h,f,m,v,p,b;return Object(i["a"])().w((function(i){while(1)switch(i.p=i.n){case 0:if(t){i.n=1;break}return i.a(2);case 1:if(l=t.secId,u=t.name,d=t.fileName,h=t.fileExt,l){i.n=2;break}return i.a(2);case 2:if(f="/"+l,m=null===(o=n.cloudSubFiles)||void 0===o?void 0:o.find((function(t){var e;return-1!==(null===(e=t.viewUrl)||void 0===e?void 0:e.indexOf(f))})),v=function(t){return t&&e>0&&t.lastVersionId!==e?(t=Object(s["a"])({},t),t.viewUrl=Object(c["gb"])(t.viewUrl,e),t):t},!m){i.n=3;break}return n.clickNetDiskFile(v(m),!0),i.a(2);case 3:return i.p=3,i.n=4,n.checkCloudItem(l,a["l"].File);case 4:p=i.v,n.clickNetDiskFile(v(p),!0),i.n=6;break;case 5:i.p=5,b=i.v,u||(u=d?d+h:""),n.showTextTip(u?b.toString().replace("[".concat(l,"]"),"「".concat(u,"」")).replace("「".concat(l,"」"),"「".concat(u,"」")):b);case 6:return i.a(2)}}),r,null,[[3,5]])})))()},clickShowType:function(t){this.isRootFolder||(this.showType=t,t===a["I"].ALL?Object(c["eb"])(_b):Object(c["jb"])(_b,t))},clickReload:function(t){var e=this;setTimeout((function(){e._clickReload(t)}),10)},_clickReload:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(e.listFetchState!==c["a"].Fetching){n.n=1;break}return n.a(2);case 1:if(e.errorText="",e.listFetchState=c["a"].Fetching,n.p=2,r=e.pageIndex,o=e.list,t&&(r=0),0===r&&(o.splice(0),e.finish=!1),!e.isNotSupportCloudVersion){n.n=3;break}throw"-";case 3:return n.n=4,e.getFolderLogsAsync(r);case 4:0===e.pageIndex&&(e.updateTime=e.folderUpdateTimes),e.listFetchState=c["a"].Success,n.n=6;break;case 5:n.p=5,a=n.v,e.listFetchState=c["a"].Error,e.isNotSupportCloudVersion?e.errorText="私有云版本过低(".concat(e.cloudVersion,"),请先升级私有云部署包"):e.errorText=a;case 6:return n.a(2)}}),n,null,[[2,5]])})))()},getFolderLogsAsync:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,s,u,d,h,m,v,p,b,g,w,y,k,C,x,S,T,O,I,A,F;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if(e.inCloudMode){n.n=1;break}return n.a(2,null);case 1:return r=new FormData,r.append("folderId",e.cloudCurrentFolderId),r.append("pageIndex",t>=0?t:0),o="getfolderlogsbyweb",n.n=2,e.fetchPostCloudApi(o,{timeout:1e4,abortKey:o,body:r});case 2:if(s=n.v,Object(l["k"])(s)){n.n=3;break}throw new Error("返回值异常,无法解析数据:".concat(s));case 3:if(s.success){n.n=4;break}throw new Error(s.errMsg);case 4:u=s.data,d=u.list,h=u.users,m=u.finish,v=e.list,p={},v.forEach((function(t){p[t.id]=1})),t=s.data.pageIndex,h||(h={}),b=[],g=Date.now(),d.forEach((function(t){if(Object(l["k"])(t)&&!p[t.id]&&a["J"].defined(t.type)){t.user=h[t.userid];try{t.data=JSON.parse(t.data)}catch(n){return}e.resetTimeFormatItem(t,g),t.offsetHeight=0,t.offsetTop=0,t.showMore=Object(f["a"])(Object(f["a"])(Object(f["a"])({},a["I"].Folder,!1),a["I"].File,!1),a["I"].Artboard,!1),b.push(t),p[t.id]=1}})),w=3e5,y={},k=0,C=b.length;case 5:if(!(k<C)){n.n=13;break}if(x=b[k],S=new Date(x.date),x.type===a["J"].NetDisk_FileUploadCompleted){n.n=6;break}return n.a(3,12);case 6:T=x.userid,O=[],I=k+1;case 7:if(!(I<C)){n.n=11;break}if(A=b[I],A.type===a["J"].NetDisk_FileUploadCompleted&&A.userid===T){n.n=8;break}return n.a(3,11);case 8:if(F=Math.abs(S-new Date(A.date)),!(F>w)){n.n=9;break}return n.a(3,11);case 9:O.push(A.data),y[A.id]=1,k++;case 10:I++,n.n=7;break;case 11:O.length>0&&(O.unshift(x.data),x.data=O);case 12:k++,n.n=5;break;case 13:return b.forEach((function(t){if(!y[t.id]){switch(t.type){case a["J"].Artboard_Upload:case a["J"].MoveTo:case a["J"].Remove:var n,i=null!==(n=t.data)&&void 0!==n?n:{},r=i.artboards,o=i.files,s=i.folders,u=[r,o,s];u.forEach((function(t){Object(l["i"])(t)&&t.sort((function(t,e){return Object(c["Z"])(null===t||void 0===t?void 0:t.name,null===e||void 0===e?void 0:e.name)}))}));break;case a["J"].NetDisk_FileUploadCompleted:Object(l["i"])(t.data)&&t.data.sort((function(t,e){var n=null!==t&&void 0!==t?t:{},i=n.name,r=n.fileName,o=n.fileExt,a=null!==e&&void 0!==e?e:{},s=a.name,l=a.fileName,u=a.fileExt;return i||(i=r?r+o:""),s||(s=l?l+u:""),Object(c["Z"])(i,s)}));break}t.visibleInFolder=e.isFolderItem(t),t.visibleInFile=e.isFileItem(t),t.visibleInArtboard=e.isArtboardItem(t),v.push(t)}})),e.finish=m,e.pageIndex=t,n.a(2,d)}}),n)})))()},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.notClickClose?t.notClickClose=!1:t.logVisible=!1}),50)},needReloadOnOpen:function(){var t=this.updateTime,e=this.folderUpdateTimes;return e!=t},resetTimeFormatItem:function(t,e){try{var n,i=null!==(n=t._lastFormatTime)&&void 0!==n?n:0;if(Math.abs(e-i)<=1e4)return;t.dateStr=Object(l["b"])(t.date)}catch(r){t.dateStr=t.date}t._lastFormatTime=e},resetTimeFormat:function(t){var e=this,n=Date.now();(null!==t&&void 0!==t?t:this.showList).forEach((function(t){e.resetTimeFormatItem(t,n)}))},onListScroll:function(t){this.scrollTop=t.target.scrollTop},getBoxHeight:function(){if(this.logVisible){var t=this.$refs.list;t&&(this.boxHeight=t.offsetHeight)}},isFolderItem:function(t){if(Mb[t.type])switch(t.type){case a["J"].RecycleVerControl_RestoreFolder:case a["J"].Recycle_RestoreFolder:return!0;case a["J"].Remove:case a["J"].MoveTo:var e,n=null===(e=t.data)||void 0===e?void 0:e.folders;return!(!n||0===n.length);default:return!0}return!1},isFileItem:function(t){if(Lb[t.type])switch(t.type){case a["J"].RecycleVerControl_RestoreNetdiskFile:case a["J"].Recycle_RestoreNetdiskFile:return!0;case a["J"].Remove:case a["J"].MoveTo:var e,n=null===(e=t.data)||void 0===e?void 0:e.files;return!(!n||0===n.length);default:return!0}return!1},isArtboardItem:function(t){if(Pb[t.type])switch(t.type){case a["J"].RecycleVerControl_RestoreArtboard:case a["J"].Recycle_RestoreArtboard:return!0;case a["J"].Remove:case a["J"].MoveTo:var e,n=null===(e=t.data)||void 0===e?void 0:e.artboards;return!(!n||0===n.length);default:return!0}return!1},resetShowListItemsOffsetTop:function(){var t=this.showList,e=this.allShowListItemSelect;if(e){var n=0;t.forEach((function(t){t.offsetTop=n,n+=t.offsetHeight}))}},onResize:function(){var t=this;this.logVisible&&this.$nextTick((function(){t.getBoxHeight()}))}},computed:{allShowListItemSelect:function(){var t=this.showList;return!t.find((function(t){return 0===t.offsetHeight}))},listViewRect:function(){return{x:0,y:this.scrollTop,height:this.boxHeight,width:1e3}},listCls:function(){var t=this.showType,e=this.isRootFolder,n={};if(e)n["in-folder"]=1;else switch(t){case a["I"].Artboard:n["in-artboard"]=1;break;case a["I"].File:n["in-file"]=1;break;case a["I"].Folder:n["in-folder"]=1;break;default:n["in-artboard"]=1,n["in-file"]=1,n["in-folder"]=1;break}return n},isRootFolder:function(){return 0===this.cloudCurrentFolderId},showArtboardLogNow:function(){return this.$store.state.folderPrecis.showArtboardLogNow},FetchState:function(){return c["a"]},EnumLogShowType:function(){return a["I"]},folderUpdateTimes:function(){return this.$store.state.cloud.folderUpdateTimes},isNotSupportCloudVersion:function(){var t=this.cloudVersion;return t&&Qr.notSupportFolderLog(t)},artboardLogList:function(){var t=this.list;return t.filter((function(t){return t.visibleInArtboard}))},folderLogList:function(){var t=this.list;return t.filter((function(t){return t.visibleInFolder}))},fileLogList:function(){var t=this.list;return t.filter((function(t){return t.visibleInFile}))},showList:function(){if(this.isRootFolder)return this.folderLogList;switch(this.showType){case a["I"].Artboard:return this.artboardLogList;case a["I"].File:return this.fileLogList;case a["I"].Folder:return this.folderLogList;default:return this.list}}},watch:{allShowListItemSelect:function(){this.resetShowListItemsOffsetTop()},showArtboardLogNow:function(t){t>0&&(this.clickShowType(a["I"].Artboard),this.logVisible=!0)},showType:function(){var t=this;this.$nextTick((function(){setTimeout((function(){t.resetShowListItemsOffsetTop()}),10);var e=t.$refs.list;e&&(e.scrollTop=0)}))},logVisible:function(t){var e=this;t?(this.$nextTick((function(){e.getBoxHeight()})),window.addEventListener("click",this.closeSelf,!0),this.needReloadOnOpen()?this.clickReload(!0):this.resetTimeFormat()):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},data:function(){return{finish:!1,scrollTop:0,boxHeight:0,lineHeight:65,listFetchState:c["a"].Normal,logVisible:!1,closeHandle:0,notClickClose:!1,updateTime:0,showType:a["I"].ALL,errorText:"",pageIndex:0,list:[]}},mounted:function(){var t=Object(c["F"])(_b,!0);switch(t){case a["I"].Artboard:case a["I"].File:case a["I"].Folder:this.showType=t;break}this.getBoxHeight()},created:function(){window.addEventListener("resize",this.onResize)},beforeDestroy:function(){window.removeEventListener("click",this.closeSelf,!0),window.removeEventListener("resize",this.onResize),clearTimeout(this.closeHandle)}},Nb=Db,Eb=(n("3a3d"),Object(Gr["a"])(Nb,Zv,tp,!1,null,"6d9ec86a",null)),Rb=Eb.exports,Vb=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"pop-helper",on:{click:function(e){t.notClickClose=!0}}},[e("div",{staticClass:"box"},[t.inInteractionMode?e("div",{staticClass:"scene"},[e("h5",[t._v("原型预览快捷键")]),t._m(0),t._m(1),t._m(2),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到上1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↑")])])]),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到下1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↓")])])])]):e("div",{staticClass:"scene"},[e("h5",[t._v("场景快捷键")]),t._m(3),t._m(4),e("dl",{staticClass:"text"},[e("dt",[t._v("缩放视图")]),e("dd",[e("span",{staticClass:"key"},[t._v("鼠标滚轮")]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))])])]),t._m(5),e("h5",[t._v("画板详情快捷键")]),t._m(6),t._m(7),t._m(8),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到上1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↑")])])]),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到下1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↓")])])]),e("h5",[t._v("获取指定2个节点坐标关系")]),e("div",{staticClass:"text"},[t._v("1.左键单击选择1个节点.")]),t._m(9),e("div",{staticClass:"text"},[t._v("*多次单击可穿透选中下方被遮挡节点")])])])]):t._e()},Bb=[function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("屏幕全屏切换")]),e("dd",[e("span",{staticClass:"key"},[t._v("F1")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("网页全屏切换")]),e("dd",[e("span",{staticClass:"key"},[t._v("F2")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("显隐左侧边栏")]),e("dd",[e("span",{staticClass:"key"},[t._v("F3")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("上下视图平移")]),e("dd",[e("span",{staticClass:"key"},[t._v("鼠标滚轮")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("左右视图平移")]),e("dd",[e("span",{staticClass:"key"},[t._v("鼠标滚轮")]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("shift")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text"},[e("span",[t._v("缩放/平移视图时同时按下")]),e("span",{staticClass:"key"},[t._v("alt")]),e("span",[t._v("键可加速操作")])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("切换到画板列表")]),e("dd",[e("span",{staticClass:"key"},[t._v("F1")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("切换到图层列表")]),e("dd",[e("span",{staticClass:"key"},[t._v("F2")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("显隐左侧边栏")]),e("dd",[e("span",{staticClass:"key"},[t._v("F3")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text"},[e("span",[t._v("2.按住")]),e("span",{staticClass:"key"},[t._v("shift")]),e("span",[t._v(",左键单击需要比对的节点.")])])}],Hb={methods:{clickHelper:function(t){this.$store.commit("setHelperVisible",t)},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.notClickClose?t.notClickClose=!1:t.clickHelper(!1)}),50)}},computed:{commandKey:function(){return this.inMacOS?"command":"ctrl"},visible:function(){return this.$store.state.helper.visible}},data:function(){return{closeHandle:0,notClickClose:!1}},watch:{visible:function(t){t?window.addEventListener("click",this.closeSelf,!0):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},beforeDestroy:function(){window.removeEventListener("click",this.closeSelf,!0),clearTimeout(this.closeHandle)}},Ub=Hb,Gb=(n("9b3d"),Object(Gr["a"])(Ub,Vb,Bb,!1,null,"2fdbaa33",null)),Wb=Gb.exports,$b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"path-nav"},[t.inCloudMode?e("CloudFolders"):t._e(),e("div",{staticClass:"navs"},t._l(t.navs,(function(n,i){var r;return e("div",{key:i,staticClass:"nav-item",class:{"no-link":!n.link}},[e("a",{staticClass:"name",attrs:{href:null!==(r=n.aHref)&&void 0!==r?r:"javascript:;",title:n.name},on:{click:function(e){return e.preventDefault(),t.clickNav(n)}}},[t._v(t._s(n.name))]),t.showArtboardPages&&n.selectPages?e("PathNavArtboardPages"):t._e()],1)})),0)],1)},zb=[],Yb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-folders"},[e("div",{ref:"navHome",staticClass:"nav-home"},[e("div",{staticClass:"btn-home",on:{click:function(e){return t.clickGoHome()}}}),e("div",{staticClass:"line"}),e("div",{staticClass:"btn-cloud-folders",class:{on:t.allFoldersBoxVisible},on:{click:function(e){return t.setAllFoldersBoxVisible(!t.allFoldersBoxVisible,!0)}}})]),e("CloudFoldersBox",{on:{hideBox:t.hideBox}})],1)},Xb=[],Kb=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.allFoldersBoxVisible,expression:"allFoldersBoxVisible"}],staticClass:"cloud-folders-box",on:{click:function(e){t.notAutoHideThisTime=!0}}},[e("div",{staticClass:"head"},[t.isSupportWebItemSearch?t._e():e("div",{staticClass:"update-tip"},[e("a",{attrs:{target:"_blank",href:t.cloudPageUrl}},[t._v("升级私有云部署包")]),t._v("可全局搜索画板、文件")]),e("div",{staticClass:"filters"},[e("div",{staticClass:"search",class:{on:t.inputFocused||t.inSearchMode}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",attrs:{autocomplete:"off",type:"text",placeholder:t.searchInputDefaultText,maxlength:"20",spellcheck:"false"},domProps:{value:t.searchText},on:{focus:function(e){t.inputFocused=!0},blur:function(e){t.inputFocused=!1},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t.inSearchMode?e("a",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:t.cleanSearchText}}):t._e()]),t.inCloudMode&&!t.inSearchMode&&!t.inputFocused&&t.inAllFoldersShowType?e("FolderNavSortMenu",{attrs:{mini:!0,supportRectSort:!1}}):t._e()],1)]),e("ul",{staticClass:"show-type"},[e("li",{staticClass:"btn btn-recent",class:{on:t.showType===t.EnumUserRecordType.Recent},attrs:{title:"最近访问过的文件夹"},on:{click:function(e){return t.clickShowType(t.EnumUserRecordType.Recent)}}},[t._v("最近")]),e("li",{staticClass:"btn btn-favorite-folder",class:{on:t.showType===t.EnumUserRecordType.FavoriteFolder},attrs:{title:"收藏的文件夹"},on:{click:function(e){return t.clickShowType(t.EnumUserRecordType.FavoriteFolder)}}},[t._v("收藏")]),e("li",{staticClass:"btn btn-favorite-artboard",class:{on:t.showType===t.EnumUserRecordType.FavoriteArtboard},attrs:{title:"标记为待开发的画板"},on:{click:function(e){return t.clickShowType(t.EnumUserRecordType.FavoriteArtboard)}}},[t._v("待开发")])]),e("div",{ref:"box",staticClass:"box",on:{scroll:t.onBoxScroll}},[e("div",{staticClass:"real-height",class:{"in-search":t.inSearchMode},style:{height:t.boxRealHeight}},[!t.inAllFoldersShowType||t.fetchState!==t.FetchState.Fetching&&t.fetchState!==t.FetchState.Error?!(t.isSupportWebItemSearch&&t.inSearchMode||!t.inAllFoldersShowType)||t.searchState!==t.FetchState.Fetching&&t.searchState!==t.FetchState.Error?0===t.showList.length?e("div",{staticClass:"empty",domProps:{textContent:t._s(t.emptyText)}}):e("div",{staticClass:"front",style:t.frontStyle},[t._l(t.showList,(function(n){return[n.isArtboard?e("CloudArtboardItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,artboard:n.folder,searchText:t.searchText,inSearchMode:t.inSearchMode},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder}}):n.isFile?e("CloudFileItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,file:n.folder,searchText:t.searchText,inSearchMode:t.inSearchMode},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder}}):e("CloudFolderItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,folder:n.folder,inSearchMode:t.inSearchMode,searchText:t.searchText,isSupportNetDiskFile:t.isSupportNetDiskFile},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder}})]}))],2):e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:t.searchLoadingText,errorText:t.searchErrorText,isLoading:t.searchState===t.FetchState.Fetching,isError:t.searchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.goSearch()}}})],1):e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:t.searchLoadingText,errorText:t.errorText,isLoading:t.fetchState===t.FetchState.Fetching,isError:t.fetchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1)])]),t.contextMenu.visible?e("CloudItemMenu",{attrs:{showType:t.showType,x:t.contextMenu.x,y:t.contextMenu.y,item:t.contextMenu.item},on:{close:t.hideContextMenu,cleanSearchText:t.cleanSearchText,clickGoParentFolder:t.clickGoParentFolder,clickSetFavoriteFolder:t.clickSetFavoriteFolder,clickSetArtboardStatus:t.clickSetArtboardStatus}}):t._e()],1)},qb=[],Jb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-folder-item",class:t.itemClass,attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickGoFold.apply(null,arguments)}}},[e("div",{staticClass:"triangle",class:{on:!t.inSearchMode&&t.inAllFoldersShowType&&t.hasChild},style:t.style,attrs:{title:"展开/收起"},on:{click:t.clickChildVisible}}),e("div",{staticClass:"icon",class:{private:t.isFolderSharePrivateCode,"share-sm":t.isFolderShareSpecifyMembers},on:{click:t.clickChildVisible}}),e("div",{staticClass:"name",on:{click:t.clickGoFold}},[t._l(t.texts,(function(n,i){return e("span",{key:i,class:{light:n.light}},[t._v(t._s(n.text))])})),e("span",{staticClass:"art-count"},[t._v(t._s(t.countText))])],2)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.folder},on:{clickItem:t.clickGoFold,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},Qb=[],Zb=function(){var t=this,e=t._self._c;return t.showAllParents||t.showOnlyParent?e("div",{staticClass:"parents",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickItem(t.item)}}},[t.showAllParents?t._l(t.item.parents,(function(n,i){return e("div",{key:i},[e("span",{on:{click:function(e){return e.target!==e.currentTarget?null:t.clickGoParentFolder({parentId:n.id})}}},[t._v(t._s(n.name))])])})):t.showOnlyParent?[t.item.parentId>0?e("span",[t._v("...")]):t._e(),e("div",[e("span",{on:{click:function(e){return t.clickGoParentFolder(t.item)}}},[t._v(t._s(t.item.parent.name))])])]:t._e()],2):t._e()},tg=[],eg={methods:{clickItem:function(t){this.$emit("clickItem",t)},clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)}},computed:{showAllParents:function(){return!!this.item.parents},showOnlyParent:function(){return!this.showAllParents&&!!this.item.parent}},props:{item:Object}},ng=eg,ig=(n("813d"),Object(Gr["a"])(ng,Zb,tg,!1,null,"4e0cf502",null)),rg=ig.exports,og={components:{ItemFolderParents:rg},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){!this.inSearchMode&&this.inAllFoldersShowType||this.$emit("onContextMenu",t,{item:this.folder,isFolder:!0})},clickChildVisible:function(){var t,e,n=this.folder,i=this.inSearchMode,r=this.inAllFoldersShowType,o=this.hasChild;if(!i&&r&&o){var s=!n.childsVisible;if(n.childsVisible=s,0!==(null!==(t=null===(e=n.childs)||void 0===e?void 0:e.length)&&void 0!==t?t:0)&&0!==n.id){var u=Object(c["M"])(a["a"],!0);Object(l["k"])(u)||(u={});var d=n.id;s?u[d]=1:delete u[d],Object(c["lb"])(a["a"],u)}}},clickGoFold:function(){var t=this.folder.id,e=this.inSearchMode,n=this.inArtboardMode,i=this.cloudCurrentFolderId,r=this.inAllFoldersShowType,o=this.currentSelect;return!e&&r&&o?this.clickChildVisible():i===t?(n&&this.setCurArtboard(null),void this.$emit("cleanSearchText")):void Object(c["P"])(t)}},computed:{useTimeSort:function(){return this.$store.state.cloudListSort.sortType===a["n"].Date},isFolderSharePrivateCode:function(){return this.folder.shareMode===a["v"].PrivateCode},isFolderShareSpecifyMembers:function(){return this.folder.shareMode===a["v"].SpecifyMembers},userSpecifyMemberAuthority:function(){var t;return null!==(t=this.folder.userSpecifyMemberAuthority)&&void 0!==t?t:a["w"].ReadWrite},itemClass:function(){var t=this.folder,e=this.currentSelect,n=this.hasChild,i=this.inSearchMode,r=this.inAllFoldersShowType,o={on:e,open:t.childsVisible&&n,max:i||!r};if(null!=t.color){var s=a["t"].getName(t.color);s&&(o[s]=1)}return o},texts:function(){var t=this.folder.name;return this.inSearchMode?Object(c["mb"])(t,this.searchText):[{light:!1,text:t}]},countText:function(){var t,e=this.folder,n=this.useTimeSort,i=this.inSearchMode,r=this.inAllFoldersShowType;return"(".concat(n&&!i&&r?Object(l["b"])(e.updateTimes):e.artboardCount+(null!==(t=e.fileCount)&&void 0!==t?t:0)+e.folderCount,")")},title:function(){return ci(this.folder)},hasChild:function(){var t,e=this.folder.childs;return(null!==(t=null===e||void 0===e?void 0:e.length)&&void 0!==t?t:0)>0},style:function(){var t=this.folder.deepCount;return null==t&&(t=0),!this.inSearchMode&&this.inAllFoldersShowType||(t=0),{"padding-left":t*this.deepPadding+"px"}},currentSelect:function(){var t=this.cloudCurrentFolderId,e=this.folder;return t===e.id}},data:function(){return{deepPadding:16}},props:{folder:Object,inSearchMode:Boolean,searchText:String,isSupportNetDiskFile:Boolean,inAllFoldersShowType:Boolean}},ag=og,sg=(n("2138"),Object(Gr["a"])(ag,Jb,Qb,!1,null,"67cf0798",null)),cg=sg.exports,lg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-artboard-item",class:{on:t.currentSelect,max:t.inSearchMode||!t.inAllFoldersShowType},attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:t.clickGoArtboard}},[e("div",{staticClass:"icon"}),e("div",{staticClass:"name"},t._l(t.texts,(function(n,i){return e("span",{key:i,class:{light:n.light}},[t._v(t._s(n.text))])})),0)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.artboard},on:{clickItem:t.clickGoArtboard,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},ug=[],dg={components:{ItemFolderParents:rg},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){!this.inSearchMode&&this.inAllFoldersShowType||this.$emit("onContextMenu",t,{item:this.artboard,isArtboard:!0})},clickGoArtboard:function(){var t=this.artboard,e=t.parentId,n=t.guid,i=t.viewUrl,r=this.cloudCurrentFolderId,o=this.curArtboardGuid;if(r!==e)location.href=i;else if(o!=n){var a=this.documentArtboards.find((function(t){var e;return(null===(e=t.artboard)||void 0===e?void 0:e.guid)===n}));if(a)return void this.setCurArtboard(a);location.href=i}}},computed:{texts:function(){return Object(c["mb"])(this.artboard.name,this.searchText)},title:function(){return di(this.artboard)},currentSelect:function(){var t=this.cloudCurrentFolderId,e=this.artboard,n=this.curArtboardGuid;return t===e.parentId&&n===e.guid}},props:{inAllFoldersShowType:Boolean,artboard:Object,inSearchMode:Boolean,searchText:String}},hg=dg,fg=(n("6333"),Object(Gr["a"])(hg,lg,ug,!1,null,"ec6eae1c",null)),mg=fg.exports,vg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-file-item",class:{max:t.inSearchMode||!t.inAllFoldersShowType,on:t.currentSelect},attrs:{title:t.title},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickGoFile.apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:t.clickGoFile}},[e("span",{staticClass:"icon-netdiskfile",class:t.iconCls}),e("div",{staticClass:"name"},t._l(t.texts,(function(n,i){return e("span",{key:i,class:{light:n.light}},[t._v(t._s(n.text))])})),0)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.file},on:{clickItem:t.clickGoFile,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},pg=[],bg={components:{ItemFolderParents:rg},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){!this.inSearchMode&&this.inAllFoldersShowType||this.$emit("onContextMenu",t,{item:this.file,isFile:!0})},clickGoFile:function(){this.clickNetDiskFile(this.file,!0)}},computed:{texts:function(){return Object(c["mb"])(this.file.name,this.searchText)},iconCls:function(){var t=this.file;return t?a["L"].getName(t.fileType,a["M"].Small):null},title:function(){return ui(this.file)},currentSelect:function(){var t=this.cloudCurrentFolderId,e=this.file,n=this.curNetDiskFile;return t===e.parentId&&(null===n||void 0===n?void 0:n.viewUrl)===e.viewUrl}},props:{file:Object,inSearchMode:Boolean,searchText:String,inAllFoldersShowType:Boolean}},gg=bg,wg=(n("c3ad"),Object(Gr["a"])(gg,vg,pg,!1,null,"5be1f064",null)),yg=wg.exports,kg=function(){var t=this,e=t._self._c;return t.item?e("div",{staticClass:"cloud-item-menu",style:t.menuStyle,on:{contextmenu:function(t){t.preventDefault()}}},[t.item.isFile?[t.canOnlineView?e("div",{staticClass:"item",on:{click:function(e){return t.clickNetDiskFile(t.item.item,!0)}}},[t._v("查看详情")]):t._e(),e("div",{staticClass:"item",on:{click:function(e){return t.copyNetdiskFileViewUrl(t.item.item)}}},[t._v("复制链接")]),e("div",{staticClass:"item",on:{click:function(e){return t.clickDownloadNetDiskFile(t.item.item)}}},[t._v("下载文件")])]:t._e(),t.item.isArtboard?e("div",{staticClass:"item",on:{click:t.clickGoArtboard}},[t._v("查看画板")]):t._e(),e("div",{staticClass:"item",on:{click:t.clickGoParentFolder}},[t._v("前往所在文件夹")]),t.showType===t.EnumUserRecordType.FavoriteFolder?e("div",{staticClass:"item",on:{click:t.clickSetFavoriteFolder}},[t._v("取消收藏")]):t._e(),t.showType===t.EnumUserRecordType.FavoriteArtboard?e("div",{staticClass:"item",on:{click:t.clickSetArtboardStatus}},[t._v("取消标记")]):t._e()],2):t._e()},Cg=[],xg={methods:{clickSetFavoriteFolder:function(){this.$emit("clickSetFavoriteFolder",this.item.item)},clickSetArtboardStatus:function(){this.$emit("clickSetArtboardStatus",this.item.item)},close:function(){this.$emit("close")},clickGoArtboard:function(){var t=this.item.item,e=t.parentId,n=t.guid,i=t.viewUrl,r=this.cloudCurrentFolderId,o=this.curArtboardGuid;if(r!==e)location.href=i;else if(o!=n){var a=this.documentArtboards.find((function(t){var e;return(null===(e=t.artboard)||void 0===e?void 0:e.guid)===n}));if(a)return void this.setCurArtboard(a);location.href=i}},clickGoParentFolder:function(){this.$emit("clickGoParentFolder",this.item.item)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.close()}),150))},initEvent:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},computed:{EnumUserRecordType:function(){return a["Y"]},canOnlineView:function(){var t=this.item;return!!t&&(!!t.isFile&&this.isNetdiskFileCanOnlineView(t.item))},menuStyle:function(){return{top:this.y+"px",left:this.x+"px"}}},watch:{item:function(t){this.initEvent(!!t)}},data:function(){return{handle:0}},props:{showType:Number,item:Object,x:Number,y:Number},beforeDestroy:function(){this.initEvent(!1)},created:function(){this.initEvent(!!this.item)}},Sg=xg,Tg=(n("95b7"),Object(Gr["a"])(Sg,kg,Cg,!1,null,"0dca83e6",null)),Og=Tg.exports,Ig={components:{CloudFolderItem:cg,NetworkLoading:Iu,CloudArtboardItem:mg,CloudFileItem:yg,CloudItemMenu:Og,FolderNavSortMenu:Mf},methods:{clickSetFavoriteFolder:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,s,c,l,u,d,h,f,m,v,p;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:return r=e.searchData,o=e.cloudCurrentFolderId,n.n=1,e.setUserFavoriteFolder(t,a["q"].None);case 1:s=n.v,s&&(c=null===r||void 0===r?void 0:r.findIndex((function(t){return t.id===s.id})),-1!==c&&(l=r.splice(c,1),u=Object(_["a"])(l,1),d=u[0],d&&(h=d.parentId,f=d.id,m=s.updateTimes,v=s.status,h===o&&(p=e.cloudSubFolders.find((function(t){return t.id===f})),p&&(p.customStatus=v,p.customStatusUpdateTimes=m)))));case 2:return n.a(2)}}),n)})))()},clickSetArtboardStatus:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,s,c,l,u,d,h,f,m,v,p,b,g;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:return r=e.searchData,o=e.cloudCurrentFolderId,n.n=1,e.setUserFavoriteArtboard(t,a["i"].None);case 1:s=n.v,s&&(c=null===r||void 0===r?void 0:r.findIndex((function(t){return t.id===s.id})),-1!==c&&(l=r.splice(c,1),u=Object(_["a"])(l,1),d=u[0],d&&(h=d.parentId,f=d.id,m=d.cid,v=s.updateTimes,p=s.status,b=null!==f&&void 0!==f?f:m,h===o&&(g=e.documentArtboards.find((function(t){var e;return(null===t||void 0===t||null===(e=t.artboard)||void 0===e?void 0:e.cid)===b})),g&&(g.customStatus=p,g.customStatusUpdateTimes=v)))));case 2:return n.a(2)}}),n)})))()},clickShowType:function(t){this.showType===t&&(t=a["Y"].None),this.showType=t},clickGoParentFolder:function(t){var e=t.parentId,n=this.inArtboardMode,i=this.cloudCurrentFolderId,r=this.inCloudViewerMode,o=this.documentName;r&&i===e?n?this.setCurArtboard(null):this.showTextTip("已在目录「".concat(o,"」")):Object(c["P"])(e)},hideContextMenu:function(){this.contextMenu.visible=!1},onContextMenu:function(t,e){if(e){var n=this.contextMenu,i=t.pageX,r=t.pageY;n.x=i,n.y=r,n.visible=!0,n.item=e}},cleanSearchText:function(){var t;this.searchText="",null===(t=this.$refs.searchInput)||void 0===t||t.focus()},clickReload:function(){Qr.notSupportGetFolders(this.cloudVersion)?document.location.reload():this.getFoldersData()},hideBoxNotClean:function(){this.$emit("hideBox")},getFoldersData:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(t.allFoldersBoxVisible&&t.inAllFoldersShowType){e.n=1;break}return e.a(2);case 1:if(t.fetchState!==c["a"].Fetching){e.n=2;break}return e.a(2);case 2:return t.fetchState=c["a"].Fetching,t.errorText=null,e.p=3,e.n=4,t.getAllFolders(!1,!0);case 4:n=e.v,t.fetchState=c["a"].Success,t.folderData=n,t.scrollToCurrentFolder(),e.n=6;break;case 5:e.p=5,r=e.v,t.fetchState=c["a"].Error,t.errorText=r;case 6:return e.a(2)}}),e,null,[[3,5]])})))()},scrollToCurrentFolder:function(){var t=this.cloudCurrentFolderId,e=this.renderList,n=this.lineHeight,i=this.boxHeight,r=this.boxScrollTop,o=this.folderData,a=this.inSearchMode;if(o){var s=e.findIndex((function(e){return e.id===t}));if(-1===s&&!a){var c=o.folders.find((function(e){return e.id===t}));if(null!=c){var l={};while(c&&!l[c.id])l[c.id]=1,c.id>0&&0!==c.childs.length&&(c.childsVisible=!0),c=c.parent;s=this.renderList.findIndex((function(e){return e.id===t}))}}if(-1!==s){var u=Math.round(s*n-i/2);u!==r&&this.setScrollTop(u)}}},setScrollTop:function(t){var e=this;this.$nextTick((function(){var n=e.$refs.box;n&&(n.scrollTop=t)}))},getFolderVisible:function(t){if(!t)return!1;if(!(t.id>=0))return!1;if(t.id>0&&!t.parent)return!1;while(null!=(t=t.parent))if(!t.childsVisible)return!1;return!0},resetBoxData:function(){var t=this;this.allFoldersBoxVisible&&this.$nextTick((function(){var e=t.$refs.box;e&&(t.boxHeight=e.offsetHeight,t.boxScrollTop=e.scrollTop)}))},onResize:function(){this.resetBoxData()},onBoxScroll:function(){var t=this.$refs.box;t&&(this.boxScrollTop=t.scrollTop)},goSearch:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,u,d,h,f,m;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.searchText,r=t.inSearchMode,o=t.inAllFoldersShowType,a=t.showType,s=t.isSupportWebItemSearch,u=t.allFoldersBoxVisible,u){e.n=1;break}return e.a(2);case 1:if(s){e.n=2;break}return e.a(2);case 2:if(r||!o){e.n=3;break}return e.a(2);case 3:if(d=t.searchStatus=Object(c["hb"])(),t.searchState=c["a"].Fetching,e.p=4,!o){e.n=6;break}return e.n=5,t.searchWebItem(n);case 5:f=e.v,e.n=8;break;case 6:return e.n=7,t.getUserRecentDataAsync(a,n);case 7:f=e.v;case 8:if(h=f,d==t.searchStatus){e.n=9;break}return e.a(2);case 9:if(Object(l["i"])(h)){e.n=10;break}throw new Error("返回值格式异常");case 10:t.searchState=c["a"].Success,t.searchData=h,e.n=13;break;case 11:if(e.p=11,m=e.v,d==t.searchStatus){e.n=12;break}return e.a(2);case 12:t.searchErrorText=m,t.searchState=c["a"].Error;case 13:return e.a(2)}}),e,null,[[4,11]])})))()},getUserRecentDataAsync:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function r(){var o,s,c,l,u;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:if(n.supportRecents){i.n=1;break}throw"私有云部署包版本「".concat(n.cloudVersion,"」过低,请先升级私有云部署包");case 1:return i.n=2,n.getUserRecentsAsync(t,e,-1);case 2:l=i.v,u=t,i.n=u===a["Y"].Recent?3:u===a["Y"].FavoriteFolder?4:u===a["Y"].FavoriteArtboard?5:6;break;case 3:return i.a(2,null!==(o=null===l||void 0===l?void 0:l.recentFolders)&&void 0!==o?o:[]);case 4:return i.a(2,null!==(s=null===l||void 0===l?void 0:l.favFolders)&&void 0!==s?s:[]);case 5:return i.a(2,null!==(c=null===l||void 0===l?void 0:l.favArtboards)&&void 0!==c?c:[]);case 6:return i.a(2,[]);case 7:return i.a(2)}}),r)})))()}},computed:{refreshRecents:function(){return this.$store.state.cloud.refreshRecents},searchLoadingText:function(){var t=this.inSearchMode,e=this.searchText,n=this.showType;if(t)return"正在搜索关键词 ".concat(e);switch(n){case a["Y"].FavoriteArtboard:return"正在获取待开发画板信息...";case a["Y"].FavoriteFolder:return"正在获取收藏的文件夹信息...";case a["Y"].Recent:return"正在获取最近文件夹信息...";default:return"正在获取文件夹信息..."}},EnumUserRecordType:function(){return a["Y"]},supportRecents:function(){return!Qr.notSupportRecentData(this.cloudVersion)},inAllFoldersShowType:function(){switch(this.showType){case a["Y"].Recent:case a["Y"].FavoriteFolder:case a["Y"].FavoriteArtboard:return!1;default:return!0}},cloudPageUrl:function(){return"https://www.marklion.cn/cloud.shtml?invoke=MarkLion.WebSearch&ver=".concat(this.cloudVersion,"&deploy=1")},searchInputDefaultText:function(){var t=this.isSupportWebItemSearch,e=this.showType;if(!t)return"搜索文件夹";switch(e){case a["Y"].Recent:return"搜索最近访问的文件夹";case a["Y"].FavoriteFolder:return"搜索收藏的文件夹";case a["Y"].FavoriteArtboard:return"搜索标记为待开发的画板";default:return"全局搜索文件夹、文件和画板"}},isSupportWebItemSearch:function(){return this.inCloudMode&&!Qr.notSupportWebItemSearch(this.cloudVersion)},isSupportNetDiskFile:function(){return this.inCloudMode&&!Qr.notSupportNetDisk(this.cloudVersion)},emptyText:function(){var t=this.showType,e=this.inSearchMode,n=this.searchText,i=this.isSupportWebItemSearch;switch(t){case a["Y"].FavoriteArtboard:return e?'未找到包含 "'.concat(n,'" 的待开发画板'):"暂无标记为待开发的画板";case a["Y"].FavoriteFolder:return e?'未找到包含 "'.concat(n,'" 的收藏文件夹'):"暂无收藏的文件夹";case a["Y"].Recent:return e?'最近访问记录中未找到包含 "'.concat(n,'" 的文件夹'):"暂无最近访问的文件夹记录";default:return i||!e||'未找到文件夹名包含 "'.concat(n,'" 的文件夹'),e?'未找到包含 "'.concat(n,'" 的文件夹、文件或画板'):"未找到文件夹、文件或画板"}},boxRealHeight:function(){return this.renderList.length*this.lineHeight+2+"px"},inSearchMode:function(){return this.searchText.length>0},frontStyle:function(){var t=this.showList,e=this.lineHeight,n=0;if(t.length>0){var i=t[0].index;n=i*e}return{"margin-top":n+"px"}},showList:function(){var t=this.renderList,e=this.preloadCount,n=this.lineHeight,i=this.boxScrollTop,r=this.boxHeight,o=e*n,s=new w,c=(new w).set(0,i-o,100,r+2*o),l=[];return t.forEach((function(t,e){var i;(s.set(0,e*n,100,n),O(s,c))&&l.push({folder:t,index:e,key:null!==(i=t.id)&&void 0!==i?i:t.url,isArtboard:t.localSearchType===a["Z"].Artboard,isFile:t.localSearchType===a["Z"].File})})),l},renderList:function(){var t,e=this,n=this.fetchState,i=this.inSearchMode,r=this.inAllFoldersShowType,o=this.cloudListSort,a=this.folderData;if(i||!r){if(this.isSupportWebItemSearch){var s=this.searchState,l=this.searchData;return s==c["a"].Success?l:[]}if(n!==c["a"].Success)return[];var u=this.searchText;u=u.toLowerCase(),t=a.folders.filter((function(t){return-1!==t.nameLower.indexOf(u)}))}else{if(n!==c["a"].Success)return[];t=a.sortBy(o).filter((function(t){return e.getFolderVisible(t)}))}return t},lineHeight:function(){return this.inSearchMode||!this.inAllFoldersShowType?46:32},cloudListSort:function(){return this.$store.state.cloudListSort},cloudListSortKey:function(){var t=this.cloudListSort;return"".concat(t.sortType,":").concat(t.orderDesc)},watchSearchKey:function(){var t=this.allFoldersBoxVisible,e=this.searchText,n=this.showType,i=this.inAllFoldersShowType,r=this.inSearchMode;return!t||i&&!r?null:"".concat(n,"/").concat(e)},infoKey:function(){var t=this.showType,e=this.searchText;return"".concat(t).concat(e)}},watch:{"refreshRecents.favoriteFolder":function(t){0!==t&&this.allFoldersBoxVisible&&this.showType===a["Y"].FavoriteFolder&&this.goSearch()},"refreshRecents.favoriteArtboard":function(t){0!==t&&this.allFoldersBoxVisible&&this.showType===a["Y"].FavoriteArtboard&&this.goSearch()},showType:function(){this.hideContextMenu()},cloudListSortKey:function(){this.scrollToCurrentFolder()},infoKey:function(t){this.sessionInfoKeyIniting||Object(c["lb"])(a["e"],t)},watchSearchKey:function(t){t&&(this.setScrollTop(0),this.goSearch())},allFoldersBoxVisible:function(){this.resetBoxData(),this.inAllFoldersShowType&&this.getFoldersData()},inAllFoldersShowType:function(t){t&&this.getFoldersData()}},data:function(){return{searchFetchStateCache:Object(f["a"])(Object(f["a"])({},a["Y"].FavoriteArtboard,null),a["Y"].FavoriteFolder,null),sessionInfoKeyIniting:!0,showType:0,inputFocused:!1,notAutoHideThisTime:!1,FetchState:c["a"],folderData:null,fetchState:c["a"].Normal,errorText:null,searchText:"",boxHeight:0,boxScrollTop:0,preloadCount:1,searchState:c["a"].Normal,searchErrorText:null,searchData:null,searchHandle:0,searchStatus:null,contextMenu:{visible:!1,x:0,y:0,item:null}}},created:function(){if(window.addEventListener("resize",this.onResize),this.allFoldersBoxVisible){var t=Object(c["M"])(a["e"],!1);if(Object(l["j"])(t)){var e=+t[0];"number"===typeof e&&(this.showType=e,this.searchText=t.substr(1))}}else Object(c["fb"])(a["e"]);this.sessionInfoKeyIniting=!1},beforeDestroy:function(){clearTimeout(this.autoHideHandle),window.removeEventListener("resize",this.onResize)},mounted:function(){this.resetBoxData(),this.getFoldersData()}},Ag=Ig,Fg=(n("e593"),Object(Gr["a"])(Ag,Kb,qb,!1,null,"54753bda",null)),jg=Fg.exports,_g={components:{CloudFoldersBox:jg},methods:{clickGoHome:function(){Object(c["P"])(0)},hideBox:function(){this.setAllFoldersBoxVisible(!1,!1)},setAllFoldersBoxVisible:function(t,e){this.$store.commit("setAllFoldersBoxVisible",t),e&&Object(c["fb"])(a["a"])},setGuideRect:function(){this.setBeginnerGuideRect(a["k"].GlobalCloudFolderBoxMenu,"navHome",a["j"].TopLeft)}},computed:{allFoldersBoxVisible:function(){return this.$store.state.cloud.allFoldersBoxVisible}},watch:{inArtboardMode:function(){this.hideBox()}},mounted:function(){this.setGuideRect()}},Mg=_g,Lg=(n("5781"),Object(Gr["a"])(Mg,Yb,Xb,!1,null,"05e23556",null)),Pg=Lg.exports,Dg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-artboard-page"},[e("div",{staticClass:"page-current",attrs:{title:"点击切换显示的页面"},on:{click:function(e){t.visible=!t.visible}}},[t._v(t._s(t.currentPageName))]),t.visible?e("div",{staticClass:"page-list"},[e("ul",[e("li",{class:{on:!t.filterDocumentGuid,"nav-all":!0},attrs:{title:t.allPageName},on:{click:function(e){return t.clickItem(null)}}},[t._v(" "+t._s(t.allPageName)),e("span",{staticClass:"art-count"},[t._v("("+t._s(t.documentArtboards.length)+")")])]),t._l(t.sortDocumentsWithSketchDocument,(function(n){return[n.docSeparator?e("li",{key:n.guid+"_sep",staticClass:"sep"}):t._e(),e("li",{key:n.guid,class:t.itemCls(n),attrs:{title:n.docFullName},on:{click:function(e){return t.clickItem(n)}}},[t._v(" "+t._s(n.name)),e("span",{staticClass:"art-count"},[t._v("("+t._s(n.arts.length)+")")])])]}))],2)]):t._e()])},Ng=[],Eg={methods:{itemCls:function(t){var e=a["K"].getClassName(t.type);return Object(f["a"])(Object(f["a"])(Object(f["a"])({},e,!!e),"on",this.filterDocumentGuid===t.guid),"f-xd",t.fileType===a["r"].XD)},clickItem:function(t){var e,n=null!==(e=null===t||void 0===t?void 0:t.guid)&&void 0!==e?e:null;this.$store.commit("setFilterDocumentGuid",n)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.visible=!1}),100))}},computed:{sortDocumentsWithSketchDocument:function(){return this.$store.state.sortDocumentsWithSketchDocument},currentPageName:function(){var t,e,n,i=this.filterDocumentGuid;return i&&(n=this.sortDocumentsWithSketchDocument.find((function(t){return t.guid===i}))),null!==(t=null===(e=n)||void 0===e?void 0:e.name)&&void 0!==t?t:this.allPageName}},watch:{visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},data:function(){return{allPageName:"全部页面",visible:!1,handle:0}},beforeDestroy:function(){clearTimeout(this.handle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)}},Rg=Eg,Vg=(n("8bd9"),Object(Gr["a"])(Rg,Dg,Ng,!1,null,"0d4aa9f6",null)),Bg=Vg.exports,Hg={components:{CloudFolders:Pg,PathNavArtboardPages:Bg},methods:{clickNav:function(t){t.link&&setTimeout((function(){t.link()}),100)}},computed:{showArtboardPages:function(){return!this.inNetDiskFileMode&&this.documents.length>1},navs:function(){var t=this,e=[],n=this.inCloudMode,i=this.inCloudViewerMode,r=this.inArtboardMode,o=this.curArtboard,a=this.cloudCurrentFolderId,s=this.curFileInfo,l=this.inNetDiskFileMode;if(n){var u=this.cloudName,d=this.cloudParentFolder;r||(0===a?e.push({name:u||"私有云根目录",link:null}):d&&e.push({name:0===d.id&&u||d.name,id:d.id,aHref:Object(c["A"])(d.id),link:function(){Object(c["P"])(this.id)}}))}if(n&&this.cloudFolderNotFound?e.push({name:this.cloudFolderInSpecify?"没有访问权限":"链接已失效",link:null}):n&&0==a||e.push({name:this.documentName,selectPages:!0,link:r?function(){t.setCurArtboard(null)}:l?function(){Object(c["P"])(a)}:null,aHref:i||l?Object(c["A"])(a):null}),r){var h,f,m=null!==(h=null===o||void 0===o||null===(f=o.artboard)||void 0===f?void 0:f.name)&&void 0!==h?h:"";m&&e.push({name:m,link:null})}else if(l){var v,p=null!==(v=null===s||void 0===s?void 0:s.name)&&void 0!==v?v:"";p&&e.push({name:p,link:null})}return e}}},Ug=Hg,Gg=(n("8aa6"),Object(Gr["a"])(Ug,$b,zb,!1,null,"dd4a9354",null)),Wg=Gg.exports,$g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-info"},[e("div",{staticClass:"nickname",class:{on:t.menuVisible},attrs:{title:t.showTitle},on:{click:t.clickShowMenu}},[e("div",{ref:"nickName",staticClass:"nickname-guide"}),e("UserFace",{attrs:{canClick:!1}})],1),t.menuVisible?e("menu",{class:{min:!t.inCloudMode},on:{click:t.clickMenu}},[t.cloudIsLogin?[e("div",{staticClass:"u-info",attrs:{title:t.showTitle}},[e("div",{staticClass:"name"},[t._v(t._s(t.showName))]),e("div",{staticClass:"email"},[t._v(t._s(t.showEmail))])]),e("div",{staticClass:"line"}),e("div",{staticClass:"item",on:{click:function(e){return t.clickRecycle()}}},[t._v("回收站")]),e("div",{staticClass:"item",on:{click:function(e){return t.clickSetNickName()}}},[t._v("修改昵称")])]:t._e(),t.inCloudViewerMode?[e("div",{staticClass:"item",attrs:{title:"在「画布视图」模式中开启极速渲染模式,画板再多也不卡顿更流畅"},on:{click:t.clickArtRenderInCanvasMode}},[t._v(" 极速模式 "),e("Checkbox2",{attrs:{text:"",selected:t.artRenderInCanvasMode},on:{click:t.clickEmpty}})],1),t.artShowInListMode||t.inArtboardMode?t._e():e("div",{staticClass:"item",attrs:{title:"在列表页的「画布视图」模式下，右下角显示「画板地图」，便于快速定位画板"},on:{click:t.clickShowArtListMap}},[t._v(" 画板地图 "),e("Checkbox2",{attrs:{text:"",selected:t.showArtListMap},on:{click:t.clickEmpty}})],1),t.inArtboardMode?t._e():e("div",{staticClass:"item",attrs:{title:"在列表页的「画布视图」模式中, 展示从XD/Sketch/Figma导出的原型连线"},on:{click:t.clickArtboardShowInteractionLine}},[t._v(" 显示原型连线 "),e("Checkbox2",{attrs:{text:"",selected:t.artboardShowInteractionLine},on:{click:t.clickEmpty}})],1),t.inArtboardMode?[e("div",{staticClass:"item",attrs:{title:"启用后, 带评注的评论将在「标注」模式下通过浮层展示"},on:{click:t.clickPointCommentShowAlways}},[t._v(" 标注显示评注 "),e("Checkbox2",{attrs:{text:"",selected:t.pointCommentShowAlways},on:{click:t.clickEmpty}})],1),e("div",{staticClass:"item",attrs:{title:"隐藏后，「标注」模式下切图图层边缘不会再标识虚线框"},on:{click:t.clickSliceBorderLineHide}},[t._v(" 隐藏切图虚线框 "),e("Checkbox2",{attrs:{text:"",selected:t.sliceBorderLineHide},on:{click:t.clickEmpty}})],1)]:t._e()]:t.inImageViewerMode?[e("div",{staticClass:"item",attrs:{title:"在「画布视图」模式中开启极速渲染模式,画板再多也不卡顿更流畅"},on:{click:t.clickArtRenderInCanvasMode}},[t._v(" 极速模式 "),e("Checkbox2",{attrs:{text:"",selected:t.artRenderInCanvasMode},on:{click:t.clickEmpty}})],1)]:t._e(),t.inInteractionMode?[e("div",{staticClass:"item",attrs:{title:"开启后,热区将一直显示在原型所在节点上"},on:{click:t.clickInteractionRectAlwaysVisible}},[t._v(" 原型热区常显 "),e("Checkbox2",{attrs:{text:"",selected:t.interactionRectAlwaysVisible},on:{click:t.clickEmpty}})],1)]:t._e(),e("a",{staticClass:"item",attrs:{href:"https://www.marklion.cn/?".concat(t.urlQueryString),target:"_blank"}},[t._v("官方网站")]),e("a",{staticClass:"item",attrs:{href:"https://user.marklion.cn/router/linkto.ashx?id=10017&".concat(t.urlQueryString),target:"_blank"}},[t._v("帮助中心")]),e("a",{staticClass:"item",attrs:{href:"https://user.marklion.cn/router/linkto.ashx?id=10018&".concat(t.urlQueryString),target:"_blank"}},[t._v("反馈建议")]),t.inCloudMode?[e("div",{staticClass:"line"}),t.cloudIsLogin?e("div",{staticClass:"item btn-logout",on:{click:function(e){return t.clickLogout()}}},[t._v("退出登录")]):e("div",{staticClass:"button light login",on:{click:t.clickLogin}},[t._v("登录")])]:t._e()],2):t._e()])},zg=[],Yg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userface",class:{on:t.canClick},attrs:{title:t.title},on:{click:function(e){return e.stopPropagation(),t.clickUserFace.apply(null,arguments)}}},[t.showIcon?e("div",{staticClass:"icon"}):e("div",{staticClass:"user",class:{tourist:!t.cloudUserIsDesigner}},[t._v(t._s(t.iconText))])])},Xg=[],Kg={methods:{clickUserFace:function(){this.$emit("click")}},computed:{showIcon:function(){return!this.cloudIsLogin},iconText:function(){if(this.showIcon)return"";var t=this.cloudNickName;return Object(l["j"])(t)||(t=this.cloudUserEmail),t[t.length-1]}},props:{title:String,canClick:Boolean}},qg=Kg,Jg=(n("3251"),Object(Gr["a"])(qg,Yg,Xg,!1,null,"77760090",null)),Qg=Jg.exports,Zg=function(){var t=this,e=t._self._c;return e("label",{staticClass:"checkbox2",class:{on:t.selected},on:{click:t.click}},[t.text?e("i",{staticClass:"text"},[t._v(t._s(t.text))]):t._e(),t._m(0)])},tw=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"rect-icon"},[e("i")])}],ew={props:{text:String,selected:Boolean},methods:{click:function(){this.$emit("click",!this.selected)}}},nw=ew,iw=Object(Gr["a"])(nw,Zg,tw,!1,null,null,null),rw=iw.exports,ow=function(){var t=this,e=t._self._c;return e("div",{staticClass:"r-body r-body-row recycle-main"},[e("div",{staticClass:"r-body-l"},[e("Header",{attrs:{sortBy:t.reqData,keepDays:t.pageInfo.keepDays,typeTotal:t.pageInfo.typeTotal,isRenderHeader:t.isRenderHeader},on:{clickOrderDesc:t.clickOrderDesc,clickSortByType:t.clickSortByType,clickRecycleFilter:t.clickRecycleFilter,clickRefresh:function(e){return t.getData()},searchTextChanged:t.searchTextChanged}}),e("RecycleItem",{attrs:{filterUserAutoCoverage:t.filterUserAutoCoverage,isHeader:!0,item:null,useScroll:t.useScroll,sortBy:t.reqData,selectedItemId:t.selectedItemId},on:{clickSortByType:t.clickSortByType}}),t.isNotSupportRecycleCloudVersion||t.isError||t.fetching?e("NotSupportCloudVersionTip",{attrs:{errorText:t.errorText,isError:t.isError,isLoading:t.fetching,notSupportCloudVersion:t.isNotSupportRecycleCloudVersion},on:{clickReload:function(e){return t.getData()}}}):e("div",{staticClass:"r-body recycle-list"},[0===t.list.length?e("div",{staticClass:"empty-list"},[t.filterSearch?e("div",[t._v("未找到与“"+t._s(t.reqData.searchText)+"”相关的回收站文件")]):e("div",[t._v("没有内容")])]):[e("LazyList",{attrs:{list:t.list,lineHeight:54},on:{useScrollChanged:t.useScrollChanged},scopedSlots:t._u([{key:"default",fn:function(n){return n.item?e("RecycleItem",{key:n.item.id,attrs:{filterUserAutoCoverage:t.filterUserAutoCoverage,item:n.item,removing:t.removingId===n.item.id,useScroll:!1,sortBy:t.reqData,selectedItemId:t.selectedItemId},on:{clickItem:t.clickItem,clickRemove:t.clickRemove,clickRestore:t.clickRestore}}):t._e()}}],null,!0)}),e("Footer",{attrs:{pageInfo:t.pageInfo},on:{goPage:t.getData}})]],2)],1),t.moveTo.visible?e("CloudSelectFolderNew",{ref:"selectFolder",attrs:{title:"选择目标文件夹",autoOpenCurrentFolder:!1,historyFolderId:t.moveTo.parentId,selectFolder:null},on:{clickSelectFolder:t.clickMoveToSelectFolder,clickCancel:function(e){return t.clickMoveToCancel()},onFolderChanged:t.onFolderChanged}}):t._e()],1)},aw=[],sw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"r-body r-body-row cloud-sourcever-upgrade-tip"},[e("NetworkLoading",{attrs:{loadText:"正在获取回收站列表信息",errorText:t.renderErrorText,isLoading:t.isLoading,isError:t.isError,showCustomService:t.notSupportCloudVersion,reLoadText:"刷新"},on:{reload:t.clickReload}})],1)},cw=[],lw={components:{NetworkLoading:Iu},methods:{clickReload:function(){this.$emit("clickReload")}},computed:{renderErrorText:function(){var t=this.cloudVersionText,e=this.notSupportCloudVersion,n=this.errorText,i=this.cloudUserIsOwner;return e?"您的私有云部署版本过低".concat(t,"，").concat(i?"":"通知管理员","更新私有云部署包以启用回收站功能。"):null!==n&&void 0!==n?n:""},cloudVersionText:function(){var t=this.cloudVersion;return Object(l["j"])(t)&&t!==a["g"]?"(".concat(t,")"):""}},props:{notSupportCloudVersion:Boolean,isLoading:Boolean,isError:Boolean,isRenderHeader:Boolean,errorText:{type:[String,Error],default:null,validator:function(){return!0}}}},uw=lw,dw=(n("cec5"),Object(Gr["a"])(uw,sw,cw,!1,null,"34acad74",null)),hw=dw.exports,fw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-select-folder"},[t.selectOpen?e("div",{staticClass:"pop-box"},[e("div",{staticClass:"box"},[t.title?e("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),e("main",[t.fetching?e("div",{staticClass:"loading"},[t._v("文件夹列表加载中,请稍后...")]):t.isError?e("div",{staticClass:"loading"},[e("div",{staticClass:"v"},[t._v(t._s(t.errorText))]),e("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:t.getCloudFolder}},[t._v("重新加载")])]):[e("div",{staticClass:"head"},[e("ul",{staticClass:"show-type"},[e("li",{staticClass:"btn btn-recent",class:{on:t.showType===t.EnumUserRecordType.Recent},attrs:{title:"最近访问过的文件夹"},on:{click:function(e){return t.clickShowType(t.EnumUserRecordType.Recent)}}},[t._v("最近")]),e("li",{staticClass:"btn btn-favorite-folder",class:{on:t.showType===t.EnumUserRecordType.FavoriteFolder},attrs:{title:"收藏的文件夹"},on:{click:function(e){return t.clickShowType(t.EnumUserRecordType.FavoriteFolder)}}},[t._v("收藏")])]),e("div",{staticClass:"search",class:{focused:t.inputFocus}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"input",attrs:{type:"text",maxlength:"256",placeholder:t.inputPlaceHolder,spellcheck:"false"},domProps:{value:t.searchText},on:{focus:function(e){t.inputFocus=!0},blur:function(e){t.inputFocus=!1},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),e("div",{staticClass:"btns"},[t.searchText?e("div",{staticClass:"btn-clear",on:{click:t.clickSearchClear}}):t._e(),t.inAllFoldersShowType?e("FolderNavSortMenu",{attrs:{mini:!0,supportRectSort:!1}}):t._e()],1)])]),e("div",{staticClass:"folder-list"},[e("FolderBox",{ref:"folderBox",attrs:{onlyFolderData:!0,inAllFoldersShowType:t.inAllFoldersShowType,showType:t.showType,searchText:t.searchText,searchSupportSort:!0,searchData:t.inAllFoldersShowType?t.searchData:t.favoriteSearchData,searchState:t.searchState,searchErrorText:t.searchErrorText,fetchState:t.fetchState,errorText:t.errorText,folderData:t.folderData,selectFolderId:t.preSelectFolder?t.preSelectFolder.id:-1},on:{clickFold:t.clickFold,clickGoParentFolder:t.clickGoParentFolder,onContextMenu:t.onContextMenu,search:t.getSearchData}})],1)]],2),e("footer",[t.notRenderMenu?e("div",{staticClass:"btn-folder-create off",on:{click:t.clickAddNewFolder}},[e("i"),t._v("新建文件夹")]):e("div"),e("div",[t.notRenderMenu?[e("div",{staticClass:"button cancel",on:{click:function(e){return t.clickCancel()}}},[t._v("取消")]),e("div",{staticClass:"button light yes",on:{click:function(e){return t.clickSelectFolder()}}},[t._v("确定")])]:e("div",{staticClass:"button yes light",on:{click:function(e){return t.clickCancel()}}},[t._v("关闭")])],2)])])]):t._e(),e("ContextMenu",{ref:"contextMenu"},[t.contextMenuData?e("dl",{staticClass:"contextmenu-box"},[t.inAllFoldersShowType&&t.contextMenuData.item.parent?e("dd",{on:{click:function(e){return t.clickFold(t.contextMenuData.item.parent,!0)}}},[t._v("选中父级")]):t._e(),t.showType===t.EnumUserRecordType.FavoriteFolder?e("dd",{on:{click:t.clickSetFavoriteFolder}},[t._v("取消收藏")]):t._e()]):t._e()])],1)},mw=[],vw=function(){var t=this,e=t._self._c;return e("div",{ref:"box",staticClass:"folders-box",on:{scroll:t.onBoxScroll}},[e("div",{staticClass:"real-height",class:{"in-search":t.inSearchMode},style:{height:t.boxRealHeight}},[!t.inAllFoldersShowType||t.fetchState!==t.FetchState.Fetching&&t.fetchState!==t.FetchState.Error?!t.inSearchMode&&t.inAllFoldersShowType||t.searchState!==t.FetchState.Fetching&&t.searchState!==t.FetchState.Error?0===t.showList.length?e("div",{staticClass:"empty",domProps:{textContent:t._s(t.emptyText)}}):e("div",{staticClass:"front",style:t.frontStyle},[t._l(t.showList,(function(n){return[n.isArtboard?e("CloudArtboardItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,artboard:n.value,searchText:t.searchText,inSearchMode:t.inSearchMode},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder,clickArtboard:t.clickArtboard}}):n.isFile?e("CloudFileItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,file:n.value,searchText:t.searchText,inSearchMode:t.inSearchMode},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder,clickFile:t.clickFile}}):e("CloudFolderItem",{key:n.key,attrs:{inAllFoldersShowType:t.inAllFoldersShowType,folder:n.value,selectFolderId:t.selectFolderId,inSearchMode:t.inSearchMode,searchText:t.searchText,searchSupportSort:t.searchSupportSort},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder,clickFold:t.clickFold}})]}))],2):e("div",{staticClass:"error",class:{"in-loading":t.searchState===t.FetchState.Fetching}},[e("NetworkLoading",{attrs:{loadText:t.searchLoadingText,errorText:t.searchErrorText,isLoading:t.searchState===t.FetchState.Fetching,isError:t.searchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.goSearch()}}})],1):e("div",{staticClass:"error",class:{"in-loading":t.fetchState===t.FetchState.Fetching}},[e("NetworkLoading",{attrs:{loadText:t.searchLoadingText,errorText:t.errorText,isLoading:t.fetchState===t.FetchState.Fetching,isError:t.fetchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.foldersReload()}}})],1)])])},pw=[],bw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-folder-item",class:t.itemClass,attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)},click:function(e){return e.target!==e.currentTarget?null:t.clickFold.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickFold.apply(null,arguments)}}},[e("div",{staticClass:"triangle",class:{on:!t.inSearchMode&&t.inAllFoldersShowType&&t.hasChild},style:t.style,attrs:{title:"展开/收起"},on:{click:t.clickChildVisible}}),e("div",{staticClass:"icon",class:{private:t.isFolderSharePrivateCode,"share-sm":t.isFolderShareSpecifyMembers},on:{click:t.clickChildVisible}}),e("div",{staticClass:"name",on:{click:t.clickFold}},[t._l(t.texts,(function(n,i){return e("span",{key:i,class:{light:n.light}},[t._v(t._s(n.text))])})),e("span",{staticClass:"art-count"},[t._v(t._s(t.countText))])],2)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.folder},on:{clickItem:t.clickFold,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},gw=[],ww=function(){var t=this,e=t._self._c;return t.showAllParents||t.showOnlyParent?e("div",{staticClass:"parents",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickItem(t.item)}}},[t.showAllParents?t._l(t.parents,(function(n,i){return e("div",{key:i},[e("span",{attrs:{title:n.name},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickGoParentFolder({parentId:null!=n.folderId?n.folderId:n.id})}}},[t._v(t._s(n.name))])])})):t.showOnlyParent?[t.item.parentId>0?e("span",[t._v("...")]):t._e(),e("div",[e("span",{attrs:{title:t.item.parent.name},on:{click:function(e){return t.clickGoParentFolder(t.item)}}},[t._v(t._s(t.item.parent.name))])])]:t._e()],2):t._e()},yw=[],kw={methods:{clickItem:function(t){this.$emit("clickItem",t)},clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)}},computed:{parents:function(){var t,e=this.item,n=e.parents,i=e.parent;if(Object(l["i"])(n))return n;n=[];while(i&&(t=null!==(r=i.folderId)&&void 0!==r?r:i.id)&&0!==t){var r;n.unshift(i),i=i.parent}return 0==n.length&&n.push({id:0,folderId:0,name:"根目录",parentId:0,shareMode:a["v"].Public}),n},showAllParents:function(){return this.parents.length>0},showOnlyParent:function(){return!this.showAllParents&&!!this.item.parent}},props:{item:Object}},Cw=kw,xw=(n("04d8"),Object(Gr["a"])(Cw,ww,yw,!1,null,"c5691912",null)),Sw=xw.exports,Tw={components:{ItemFolderParents:Sw},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){this.$emit("onContextMenu",t,{item:this.folder,isFolder:!0})},clickChildVisible:function(){var t,e,n=this.folder,i=this.inSearchMode,r=this.hasChild,o=this.inAllFoldersShowType;if(!i&&o&&r){var a=!n.childsVisible;n.childsVisible=a,0!==(null!==(t=null===(e=n.childs)||void 0===e?void 0:e.length)&&void 0!==t?t:0)&&n.id}},clickFold:function(){var t=this.currentSelect,e=this.inSearchMode,n=this.inAllFoldersShowType;if(!e&&n&&t)return this.clickChildVisible();this.$emit("clickFold",this.folder)}},computed:{useTimeSort:function(){return this.$store.state.cloudListSort.sortType===a["n"].Date},isFolderSharePrivateCode:function(){return this.folder.shareMode===a["v"].PrivateCode},isFolderShareSpecifyMembers:function(){return this.folder.shareMode===a["v"].SpecifyMembers},userSpecifyMemberAuthority:function(){var t;return null!==(t=this.folder.userSpecifyMemberAuthority)&&void 0!==t?t:a["w"].ReadWrite},itemClass:function(){var t=this.folder,e=this.currentSelect,n=this.hasChild,i=this.inSearchMode,r=this.inAllFoldersShowType,o={on:e,open:t.childsVisible&&n,max:i||!r};if(null!=t.color){var s=a["t"].getName(t.color);s&&(o[s]=1)}return o},texts:function(){var t=this.folder.name;return this.inSearchMode?Object(c["mb"])(t,this.searchText):[{light:!1,text:t}]},countText:function(){var t,e=this.folder,n=this.useTimeSort,i=this.inSearchMode,r=this.searchSupportSort,o=this.inAllFoldersShowType;return"(".concat(n&&(r||!i)&&o?Object(l["d"])(e.updateTimes):e.artboardCount+(null!==(t=e.fileCount)&&void 0!==t?t:0)+e.folderCount,")")},title:function(){return ci(this.folder,!0)},hasChild:function(){var t,e=this.folder.childs;return(null!==(t=null===e||void 0===e?void 0:e.length)&&void 0!==t?t:0)>0},style:function(){var t=this.folder.deepCount;return null==t&&(t=0),!this.inSearchMode&&this.inAllFoldersShowType||(t=0),{"padding-left":t*this.deepPadding+"px"}},currentSelect:function(){var t=this.selectFolderId,e=this.folder;return t===e.id}},data:function(){return{deepPadding:16}},props:{folder:Object,inSearchMode:Boolean,searchText:String,inAllFoldersShowType:Boolean,searchSupportSort:Boolean,selectFolderId:Number}},Ow=Tw,Iw=(n("c358"),Object(Gr["a"])(Ow,bw,gw,!1,null,"c1503cb0",null)),Aw=Iw.exports,Fw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-artboard-item",class:{on:t.currentSelect,max:t.inSearchMode||!t.inAllFoldersShowType},attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:t.clickArtboard}},[e("div",{staticClass:"icon"}),e("div",{staticClass:"name"},t._l(t.texts,(function(n,i){return e("span",{key:i,class:{light:n.light}},[t._v(t._s(n.text))])})),0)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.artboard},on:{clickItem:t.clickArtboard,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},jw=[],_w={components:{ItemFolderParents:Sw},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){this.$emit("onContextMenu",t,{item:this.artboard,isArtboard:!0})},clickArtboard:function(){this.$emit("clickArtboard",this.artboard)}},computed:{texts:function(){return Object(c["mb"])(this.artboard.name,this.searchText)},title:function(){return di(this.artboard)},currentSelect:function(){return!1}},props:{inAllFoldersShowType:Boolean,artboard:Object,inSearchMode:Boolean,searchText:String}},Mw=_w,Lw=(n("be67"),Object(Gr["a"])(Mw,Fw,jw,!1,null,"6932141c",null)),Pw=Lw.exports,Dw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-file-item",class:{max:t.inSearchMode||!t.inAllFoldersShowType,on:t.currentSelect},attrs:{title:t.title},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickFile.apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:t.clickFile}},[e("span",{staticClass:"icon-netdiskfile",class:t.iconCls}),e("div",{staticClass:"name"},t._l(t.texts,(function(n,i){return e("span",{key:i,class:{light:n.light}},[t._v(t._s(n.text))])})),0)]),t.inSearchMode||!t.inAllFoldersShowType?e("ItemFolderParents",{attrs:{item:t.file},on:{clickItem:t.clickFile,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},Nw=[],Ew={components:{ItemFolderParents:Sw},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){this.$emit("onContextMenu",t,{item:this.file,isFile:!0})},clickFile:function(){this.$emit("clickFile",this.file)}},computed:{texts:function(){return Object(c["mb"])(this.file.name,this.searchText)},iconCls:function(){var t=this.file;return t?a["L"].getName(t.fileType,a["M"].Small):null},title:function(){return ui(this.file)},currentSelect:function(){return!1}},props:{file:Object,inSearchMode:Boolean,inAllFoldersShowType:Boolean,searchText:String}},Rw=Ew,Vw=(n("6a77"),Object(Gr["a"])(Rw,Dw,Nw,!1,null,"785b5e67",null)),Bw=Vw.exports,Hw={components:{NetworkLoading:Iu,CloudFolderItem:Aw,CloudFileItem:Bw,CloudArtboardItem:Pw},methods:{scrollToTop:function(){var t=this.$refs.box;if(!t)return!1;t.scrollTop=0},scrollTo:function(t){if("function"!==typeof t)return!1;var e=this.renderList,n=this.$refs.box,i=this.lineHeight,r=this.boxHeight,o=this.boxScrollTop;if(!n)return!1;var a=e.findIndex(t);if(-1===a)return!1;var s=i*a,c=(new w).set(0,o,100,r),l=(new w).set(0,s,100,i);return c.isContans(l)||(s-=r/2-i/2,n.scrollTop=s),!0},scrollToCurrentOrTop:function(){var t=this.selectFolderId,e=this.inSearchMode;!e&&this.scrollTo((function(e){return e.localSearchType===a["Z"].Folder&&e.id===t}))||this.scrollToTop()},clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFile:function(t){this.$emit("clickFile",t)},clickFold:function(t){this.$emit("clickFold",t)},clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t,e){this.$emit("onContextMenu",t,e)},hideBoxNotClean:function(){this.$emit("hideBox")},cleanSearchText:function(){this.$emit("cleanSearchText")},foldersReload:function(){this.$emit("foldersReload")},goSearch:function(){this.$emit("search",this.searchText)},resetBoxData:function(){var t=this;this.$nextTick((function(){var e=t.$refs.box;e&&(t.boxHeight=e.offsetHeight,t.boxScrollTop=e.scrollTop)}))},onBoxScroll:function(){var t=this.$refs.box;t&&(this.boxScrollTop=t.scrollTop)},getFolderVisible:function(t){if(!t)return!1;if(!(t.id>=0))return!1;if(t.id>0&&!t.parent)return!1;while(null!=(t=t.parent))if(!t.childsVisible)return!1;return!0}},mounted:function(){this.resetBoxData()},created:function(){},watch:{searchText:function(){var t=this;this.$nextTick((function(){t.scrollToCurrentOrTop()}))},winRectChangeKey:function(){this.resetBoxData()}},computed:{searchLoadingText:function(){var t=this.inSearchMode,e=this.searchText,n=this.showType;if(t)return"正在搜索关键词 ".concat(e);switch(n){case a["Y"].FavoriteArtboard:return"正在获取待开发画板信息...";case a["Y"].FavoriteFolder:return"正在获取收藏的文件夹信息...";case a["Y"].Recent:return"正在获取最近文件夹信息...";default:return"正在获取文件夹信息..."}},FetchState:function(){return c["a"]},winRectChangeKey:function(){var t=this.winRect;return"".concat(t.width,"x").concat(t.height)},winRect:function(){return this.$store.state.winRect},emptyText:function(){var t=this.showType,e=this.inSearchMode,n=this.searchText,i=this.onlyFolderData;switch(t){case a["Y"].FavoriteArtboard:return e?'未找到包含 "'.concat(n,'" 的待开发画板'):"暂无标记为待开发的画板";case a["Y"].FavoriteFolder:return e?'未找到包含 "'.concat(n,'" 的收藏文件夹'):"暂无收藏的文件夹";case a["Y"].Recent:return e?'最近访问记录中未找到包含 "'.concat(n,'" 的文件夹'):"暂无最近访问的文件夹记录";default:var r=i?"文件夹":"文件夹、文件或画板";return e?'未找到包含 "'.concat(n,'" 的').concat(r):"未找到".concat(r)}},inSearchMode:function(){return this.searchText.length>0},boxRealHeight:function(){return this.renderList.length*this.lineHeight+2+"px"},preloadCount:function(){return 1},lineHeight:function(){return this.inSearchMode||!this.inAllFoldersShowType?46:32},frontStyle:function(){var t=this.showList,e=this.lineHeight,n=0;if(t.length>0){var i=t[0].index;n=i*e}return{"margin-top":n+"px"}},showList:function(){var t=this.renderList,e=this.preloadCount,n=this.lineHeight,i=this.boxScrollTop,r=this.boxHeight,o=e*n,s=new w,c=(new w).set(0,i-o,100,r+2*o),l=[];return t.forEach((function(t,e){s.set(0,e*n,100,n);var i,r,o,u=t.localSearchType===a["Z"].Artboard,d=t.localSearchType===a["Z"].File,h=!u&&!d;if(u)i="artboard_".concat(null!==(r=null!==(o=t.id)&&void 0!==o?o:t.guid)&&void 0!==r?r:t.viewUrl);else if(d){var f;i="file_".concat(null!==(f=t.id)&&void 0!==f?f:t.viewUrl)}else{var m;i="folder_".concat(null!==(m=t.folderId)&&void 0!==m?m:t.id)}O(s,c)&&l.push({value:t,index:e,key:i,isArtboard:u,isFile:d,isFolder:h})})),l},renderList:function(){var t,e=this,n=this.fetchState,i=this.inSearchMode,r=this.cloudListSort,o=this.folderData,a=this.inAllFoldersShowType;if(i||!a){var s=this.searchState,l=this.searchData;return s==c["a"].Success?l:[]}return n!==c["a"].Success?[]:(t=o.sortBy(r).filter((function(t){return e.getFolderVisible(t)})),t)},cloudListSort:function(){return this.$store.state.cloudListSort}},data:function(){return{boxHeight:0,boxScrollTop:0}},props:{onlyFolderData:{type:Boolean,default:!1},inAllFoldersShowType:{type:Boolean,default:!0},showType:{type:Number,default:a["Y"].None},searchText:String,searchState:Number,fetchState:Number,errorText:{validator:function(){return!0}},searchErrorText:{validator:function(){return!0}},searchData:Array,searchSupportSort:Boolean,folderData:Object,selectFolderId:Number}},Uw=Hw,Gw=(n("8449"),Object(Gr["a"])(Uw,vw,pw,!1,null,"2191db7d",null)),Ww=Gw.exports,$w={components:{FolderNavSortMenu:Mf,FolderBox:Ww,ContextMenu:Mo},methods:{getUserRecentDataAsync:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function r(){var o,s,c,l,u,d;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:if(n.supportRecents){i.n=1;break}throw"私有云部署包版本「".concat(n.cloudVersion,"」过低,请先升级私有云部署包");case 1:return l=n.cloudKey,i.n=2,n.getUserRecentsAsync(t,e,-1,{cloudKey:l});case 2:u=i.v,d=t,i.n=d===a["Y"].Recent?3:d===a["Y"].FavoriteFolder?4:d===a["Y"].FavoriteArtboard?5:6;break;case 3:return i.a(2,null!==(o=null===u||void 0===u?void 0:u.recentFolders)&&void 0!==o?o:[]);case 4:return i.a(2,null!==(s=null===u||void 0===u?void 0:u.favFolders)&&void 0!==s?s:[]);case 5:return i.a(2,null!==(c=null===u||void 0===u?void 0:u.favArtboards)&&void 0!==c?c:[]);case 6:return i.a(2,[]);case 7:return i.a(2)}}),r)})))()},getSearchData:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,u;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.searchText,r=t.inAllFoldersShowType,o=t.showType,!r){e.n=1;break}return e.a(2);case 1:return a=t.searchStatus=Object(c["hb"])(),t.searchState=c["a"].Fetching,e.p=2,e.n=3,t.getUserRecentDataAsync(o,n);case 3:if(s=e.v,a==t.searchStatus){e.n=4;break}return e.a(2);case 4:if(Object(l["i"])(s)){e.n=5;break}throw new Error("返回值格式异常");case 5:t.favoriteSearchData=s,t.searchState=c["a"].Success,t.$nextTick((function(){t.scrollToSelect()})),e.n=8;break;case 6:if(e.p=6,u=e.v,a==t.searchStatus){e.n=7;break}return e.a(2);case 7:t.searchErrorText=u,t.searchState=c["a"].Error;case 8:return e.a(2)}}),e,null,[[2,6]])})))()},clickSetFavoriteFolder:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,s,c,l,u,d,h,f,m,v,p,b;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(n=t.contextMenuData,r=t.favoriteSearchData,o=t.cloudCurrentFolderId,n){e.n=1;break}return e.a(2);case 1:return s=n.item,e.n=2,t.setUserFavoriteFolder(s,a["q"].None);case 2:c=e.v,c&&(t.$store.commit("refreshRecents",a["Y"].FavoriteFolder),l=null===r||void 0===r?void 0:r.findIndex((function(t){return t.id===c.id})),-1!==l&&(u=r.splice(l,1),d=Object(_["a"])(u,1),h=d[0],h&&(f=h.parentId,m=h.id,v=c.updateTimes,p=c.status,f===o&&(b=t.cloudSubFolders.find((function(t){return t.id===m})),b&&(b.customStatus=p,b.customStatusUpdateTimes=v)))));case 3:return e.a(2)}}),e)})))()},clickShowType:function(t){this.showType===t&&(t=a["Y"].None),this.showType=t},onContextMenu:function(t,e){var n;if(Object(l["k"])(e)&&t){var i=e.item,r=e.isFolder,o=void 0!==r&&r,s=e.isArtboard,c=void 0!==s&&s,u=e.isFile,d=void 0!==u&&u;switch(this.showType){case a["Y"].FavoriteFolder:break;case a["Y"].Recent:return;default:if(!o)return}this.contextMenuData={item:i,isFolder:o,isFile:d,isArtboard:c},null===(n=this.$refs.contextMenu)||void 0===n||n.$show(t.clientX,t.clientY)}},clickSearchClear:function(){var t;this.searchText="",null===(t=this.$refs.input)||void 0===t||t.focus()},fixParentChildsVisible:function(t){if(t&&!t.childsVisible)while(t&&t.id>=0)t.childsVisible=!0,t=t.parent},onFolderChanged:function(t){var e,n,i;if(Object(l["k"])(t)){var r=this.preSelectFolderOrRoot,o=this.cloudCurrentFolderId,s=this.cloudListSort;if(!r)return this.showTextTip("文件夹数据异常,请刷新列表");if(null===(e=this.folderData)||void 0===e||e.cleanFoldersCache(),t.parentId===r.id){r.childFolderCount++,r.folderCount++,this.fixParentChildsVisible(r),t.selected=!!t.selected,t.nameLower=t.name.toLowerCase(),t.childsVisible=!!t.childsVisible,t.rootId=null!==(n=null===(i=this.folderData)||void 0===i||null===(i=i.root)||void 0===i?void 0:i.id)&&void 0!==n?n:0,t.parent=r,t.childs=[],t.artboardCount=t.fileCount=t.folderCount=0,t.deepCount=r.deepCount+1,Object(c["v"])(t);var u=[r.childs];u.forEach((function(e){e&&(e.push(t),Jn(e,"updateTimes",a["m"].Folder,s))})),o==r.id&&this.$emit("onFolderChanged",t),this.clickPreSelectFolder(t),this.scrollToSelect()}}},scrollToParentButNotSelect:function(t){var e=this;if(t){var n=t.id,i=this.folderData.folders.find((function(t){return t.id===n}));i&&(this.inSearchMode&&(this.searchText="",this.fixParentChildsVisible(i)),this.$nextTick((function(){var t,n=i.id;null===(t=e.$refs.folderBox)||void 0===t||t.scrollTo((function(t){return t.id===n}))})))}},clickGoParentFolder:function(t){var e;if(t){var n=t.parentId;if(null!=n){var i=null===(e=this.folderData)||void 0===e?void 0:e.folders.find((function(t){return t.id===n}));i&&this.clickFold(i,!0)}}},clickFold:function(t,e){if(t){var n=this.inSearchMode,i=this.inAllFoldersShowType;if(n&&i){var r,o=t.id,a=this.folderData.folders.find((function(t){return t.id===o}));if(!a)return;this.searchText="";var s=null!==(r=a.parent)&&void 0!==r?r:this.folderData.root;this.fixParentChildsVisible(s),this.clickPreSelectFolder(t),this.scrollToSelect()}else this.clickPreSelectFolder(t),!0===e&&this.scrollToSelect()}},clickPreSelectFolder:function(t){t&&(this.preSelectFolder=t)},clickAddNewFolder:function(){this.showTextTip("新建文件夹功能仅在标记狮客户端可用")},getCloudFolder:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,l,u;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.fetching,r=t.preSelectFolderId,!n){e.n=1;break}return e.a(2);case 1:return t.fetchState=c["a"].Fetching,t.isCloudVersionError=!1,o=t.fetchKey="".concat(Date.now(),"_").concat(r),e.p=2,e.n=3,t.getAllFolders(!1,!0,t.autoOpenCurrentFolder);case 3:if(a=e.v,o===t.fetchKey){e.n=4;break}return e.a(2);case 4:if(t.folderData=a,s=a.folders.find((function(t){return t.id===r})),s){l=s;while(l&&l.id>0)l.childsVisible=!0,l=l.parent;t.selectFolder||t.$emit("clickSelectFolder",s)}t.preSelectFolder=s,t.scrollToSelect(),e.n=7;break;case 5:if(e.p=5,u=e.v,o===t.fetchKey){e.n=6;break}return e.a(2);case 6:t.errorText=u,t.fetchState=c["a"].Error;case 7:return e.p=7,o===t.fetchKey&&t.fetchState===c["a"].Fetching&&(t.fetchState=c["a"].Success),e.f(7);case 8:return e.a(2)}}),e,null,[[2,5,7,8]])})))()},isReadonlyFolder:function(t){switch(t.userSpecifyMemberAuthority){case void 0:case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!1;default:return!0}},clickSelectFolder:function(){var t=this.preSelectFolder;if(!t||0===t.id)return this.selectOpen=!1,void this.$emit("clickSelectFolder",this.folderData.root,!0);this.isReadonlyFolder(t)?this.showTextTip("无法移动到文件夹「".concat(t.name,"」,您没有该文件夹的写入权限")):(this.selectOpen=!1,this.$emit("clickSelectFolder",t,!0))},clickCancel:function(){this.selectOpen=!1,this.$emit("clickCancel")},showSelectList:function(){this.selectOpen=!0},sortData:function(t){if(!t)return[];var e=this.sortType,n=this.orderDesc,i="updateTimes";return e===a["n"].Date?t.sort((function(t,e){var r=t[i]>e[i]?1:-1;return n?-r:r})):t.sort((function(t,e){var i=Object(c["Z"])(t.name,e.name);return n?-i:i})),t},scrollToSelect:function(){var t,e,n=this,i=null!==(t=null===(e=this.preSelectFolder)||void 0===e?void 0:e.id)&&void 0!==t?t:0;requestAnimationFrame((function(){n.$nextTick((function(){var t;null===(t=n.$refs.folderBox)||void 0===t||t.scrollTo((function(t){return t.id===i}))}))}))}},computed:{supportRecents:function(){return!Qr.notSupportRecentData(this.cloudVersion)},watchSearchKey:function(){var t=this.searchText,e=this.showType,n=this.inAllFoldersShowType,i=this.selectOpen;return n||!i?null:"".concat(i,":").concat(e,"/").concat(t)},inputPlaceHolder:function(){switch(this.showType){case a["Y"].Recent:return"搜索最近访问的文件夹";case a["Y"].FavoriteFolder:return"搜索收藏的文件夹";default:return"搜索文件夹"}},inAllFoldersShowType:function(){switch(this.showType){case a["Y"].Recent:case a["Y"].FavoriteFolder:return!1;default:return!0}},EnumUserRecordType:function(){return a["Y"]},preSelectFolderOrRoot:function(){var t,e=this.preSelectFolder,n=this.folderData;if(e){var i;if(!n)return e;var r=e.id,o=null===(i=n.folders)||void 0===i?void 0:i.find((function(t){return t.id===r}));if(o)return o}return null!==(t=null===n||void 0===n?void 0:n.root)&&void 0!==t?t:null},preSelectFolderId:function(){var t=this.preSelectFolder;return t?t.id:this.historyFolderId},cloudListSort:function(){return this.$store.state.cloudListSort},sortTypeChangeValue:function(){var t=this.orderDesc,e=this.sortType;return"".concat(t,"_").concat(e)},orderDesc:function(){return this.cloudListSort.orderDesc},sortType:function(){return this.cloudListSort.sortType},inSearchMode:function(){return""!==this.searchText},emptyFolderText:function(){return this.inSearchMode?"未检索到匹配项":"没有子文件夹"},searchData:function(){var t=this.searchText,e=this.folderData,n=this.cloudListSort,i=this.inAllFoldersShowType;if(!i)return[];t=t.toLowerCase();var r=e.folders.filter((function(e){return-1!==e.nameLower.indexOf(t)}));return Jn(r,"updateTimes",a["m"].Folder,n),r},fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error},notRenderMenu:function(){var t=this.fetching,e=this.isError;return!(t||e)}},watch:{watchSearchKey:function(t){var e;t&&(null===(e=this.$refs.folderBox)||void 0===e||e.scrollToTop(),this.getSearchData())},showType:function(t){if(this.contextMenuData=null,t===a["Y"].None){var e=this.preSelectFolder;if(e){var n=e.id,i=this.folderData.folders.find((function(t){return t.id===n}));if(!i)return;this.fixParentChildsVisible(i.parent)}}this.scrollToSelect()},sortTypeChangeValue:function(){var t=this;requestAnimationFrame((function(){t.$nextTick((function(){var e,n;t.inSearchMode?null===(n=t.$refs.folderBox)||void 0===n||n.scrollToTop():null===(e=t.$refs.folderBox)||void 0===e||e.scrollToCurrentOrTop()}))}))},selectOpen:function(t){if(t){this.$emit("onSelectOpen");var e,n=this.preSelectFolder=this.selectFolder;if(n)null===(e=this.folderData)||void 0===e||e.resetFoldersChildVisible(n.id,null),this.scrollToSelect()}else this.searchText=""},selectFolder:function(t){this.preSelectFolder=t}},data:function(){return{showType:0,searchStatus:null,searchErrorText:null,favoriteSearchData:null,contextMenuData:null,fetchState:c["a"].Normal,searchState:c["a"].Success,inputFocus:!1,searchText:"",selectOpen:!1,isCloudVersionError:!1,errorText:"",folderData:null,preSelectFolder:null}},props:{autoOpenCurrentFolder:{type:Boolean,default:!0},title:String,selectFolder:{validator:function(){return!0}},historyFolderId:Number},created:function(){this.preSelectFolder=this.selectFolder,this.selectOpen=!0,this.getCloudFolder()}},zw=$w,Yw=(n("c1cd"),Object(Gr["a"])(zw,fw,mw,!1,null,"71a8c976",null)),Xw=Yw.exports,Kw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"r-header no-bor"},[e("div",{staticClass:"r-title lr"},[e("div",[t._v("回收站"),e("span",{staticClass:"desc",domProps:{textContent:t._s("回收站内容保存 ".concat(t.keepDays," 天，到期后自动清理"))}})]),t.isRenderHeader?e("UserInputSearch",{attrs:{mini:!1,value:t.searchText,placeholder:t.cloudUserIsOwner?"搜索名称/操作成员":"搜索名称",maxlength:100},on:{input:t.onInputText,submit:t.onInputSubmit}}):t._e()],1),e("div",{staticClass:"base-info"},[e("div",{staticClass:"common-tabs"},[e("ul",t._l(t.FilterTypes,(function(n){return e("li",{key:n.type,class:{on:t.filterType===n.type},on:{click:function(e){return t.clickFilterType(n.type)}}},[t._v(" "+t._s(n.name)),n.count?e("span",{staticClass:"count",domProps:{textContent:t._s(n.count)}}):t._e()])})),0)]),t.isRenderHeader?e("div",{staticClass:"btns"},[e("HeaderSortMenu",{attrs:{sortBy:t.sortBy,typeTotal:t.typeTotal},on:{clickRecycleFilter:t.clickRecycleFilter,clickRefresh:t.clickRefresh,clickOrderDesc:t.clickOrderDesc,clickSortByType:t.clickSortByType}})],1):t._e()])])},qw=[],Jw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"input-search",class:{min:t.searchInMinState,focus:t.inputFocused},attrs:{title:t.searchInMinState?t.placeholder:null}},[e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("input",{ref:"input",attrs:{type:"text",placeholder:"",maxlength:t.maxlength,spellcheck:"false"},domProps:{value:t.value},on:{input:t.onInput,focus:t.onFocus,blur:t.onBlur,compositionstart:function(e){t.composition=!0},compositionend:t.onCompositionEnd}}),t.searchPlaceHolderVisible?e("div",{staticClass:"placeholder",domProps:{textContent:t._s(t.placeholder)}}):t._e(),t.value?e("a",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:t.clickClear}}):t._e()])])},Qw=[],Zw={methods:{onSubmit:function(){var t=this.$refs.input;t&&this.$emit("submit",t.value)},clickClear:function(){var t=this.$refs.input;t&&(t.value="",t.focus()),this.$emit("input","",!0)},onCompositionEnd:function(t){this.composition=!1,this.onInput(t)},onInput:function(t){this.composition||this.$emit("input",t.target.value)},onFocus:function(){clearTimeout(this.handler),this.inputFocused=!0},onBlur:function(){var t=this;clearTimeout(this.handler),this.handler=setTimeout((function(){t.inputFocused=!1}),34)}},beforeDestroy:function(){clearTimeout(this.handler)},data:function(){return{inputFocused:!1,composition:!1,handler:0}},computed:{searchInMinState:function(){var t=this.inputFocused,e=this.value,n=this.composition,i=this.mini;return i&&!t&&!e&&!n},searchPlaceHolderVisible:function(){var t=this.inputFocused,e=this.value,n=this.composition,i=this.placeholder,r=this.mini;return!e&&!n&&(!r||t&&!!i)}},props:{placeholder:{type:String,default:""},maxlength:{type:Number,default:50},value:{type:String,default:""},mini:{type:Boolean,default:!0}}},ty=Zw,ey=(n("3ce7"),Object(Gr["a"])(ty,Jw,Qw,!1,null,"917f8e00",null)),ny=ey.exports,iy=function(){var t=this,e=t._self._c;return e("div",{staticClass:"source-sort-menu"},[t.cloudUserIsOwner?e("div",{staticClass:"btn-sorts btn-filters"},[e("div",{staticClass:"sort-mode"},[e("span",{staticClass:"name",domProps:{textContent:t._s(t.recycleFilterName)}}),e("div",{staticClass:"options"},t._l(t.RecycleFilters,(function(n){return e("div",{key:n,class:{on:t.filterUser===n},attrs:{title:t.EnumRecycleFilter.getDesc(n)},domProps:{textContent:t._s(t.EnumRecycleFilter.getName(n))},on:{click:function(e){return t.clickRecycleFilter(n)}}})})),0)])]):t._e(),e("div",{staticClass:"btn-sorts"},[e("div",{staticClass:"btn sort-order",class:{desc:!t.orderDesc},attrs:{title:t.orderDesc?"切换为升序":"切换为降序"},on:{click:function(e){return t.clickOrderDesc(!t.orderDesc)}}}),e("div",{staticClass:"sort-mode"},[e("span",{staticClass:"name",domProps:{textContent:t._s(t.orderTypeName)},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickOrderDesc(!t.orderDesc)}}}),e("div",{staticClass:"options"},[t._l(t.FileSortTypes,(function(n){return e("div",{key:n.type,class:{on:t.orderType===n.type},on:{click:function(e){return t.clickOrderType(n.type)}}},[t._v(t._s(n.name))])})),e("p",{staticClass:"line"}),e("div",{class:{on:!t.orderDesc},on:{click:function(e){return t.clickOrderDesc(!1)}}},[t._v("升序")]),e("div",{class:{on:t.orderDesc},on:{click:function(e){return t.clickOrderDesc(!0)}}},[t._v("降序")])],2)])]),e("div",{staticClass:"btn-refresh2",on:{click:t.clickRefresh}})])},ry=[],oy={methods:{clickRecycleFilter:function(t){this.$emit("clickRecycleFilter",t)},clickRefresh:function(){this.$emit("clickRefresh")},clickOrderType:function(t){this.$emit("clickSortByType",t)},clickOrderDesc:function(t){this.sortBy.sortOrder=t?a["R"].Desc:a["R"].Asc}},computed:{EnumRecycleFilter:function(){return a["O"]},recycleFilterName:function(){var t=this.filterUser;return a["O"].getName(t)},RecycleFilters:function(){return[a["O"].AllItem,a["O"].MyDelete,a["O"].AutoCoverage]},FileSortTypes:function(){var t=this.cloudUserIsOwner,e=this.filterUser,n=e===a["O"].AutoCoverage;return[a["S"].DelTime,a["S"].DelUserNick,a["S"].Name,a["S"].FileType].filter((function(e){return!(!t&&e===a["S"].DelUserNick||n&&e===a["S"].VersionCount)})).map((function(t){return{name:a["S"].getName(t),type:t}}))},orderTypeName:function(){var t=this.orderType;return"按".concat(a["S"].getName(t),"排序")},EnumRecycleItemSortType:function(){return a["S"]},filterUser:function(){var t;return null===(t=this.sortBy)||void 0===t?void 0:t.filterUser},orderType:function(){var t,e;return null!==(t=null===(e=this.sortBy)||void 0===e?void 0:e.sortType)&&void 0!==t?t:a["S"].DelTime},filterType:function(){var t,e;return null!==(t=null===(e=this.sortBy)||void 0===e?void 0:e.filterType)&&void 0!==t?t:a["T"].None},orderDesc:function(){var t;return(null===(t=this.sortBy)||void 0===t?void 0:t.sortOrder)===a["R"].Desc},viewModeMax:function(){return this.$store.state.sourceFileSet.viewModeMax}},props:{sortBy:Object,typeTotal:Object}},ay=oy,sy=(n("7215"),Object(Gr["a"])(ay,iy,ry,!1,null,"8a756f1a",null)),cy=sy.exports,ly={components:{HeaderSortMenu:cy,UserInputSearch:ny},methods:{clickFilterType:function(t){this.sortBy.filterType=t},onInputSubmit:function(t){this.searchText=t,this.onSearch()},onInputText:function(t,e){t="string"===typeof t?t:"",this.searchText=t,e&&t!==this.searchTextWithPosted&&this.onSearch()},clickOrderDesc:function(t){this.$emit("clickOrderDesc",t)},clickSortByType:function(t){this.$emit("clickSortByType",t)},clickReturn:function(){this.$emit("clickReturn")},clickClear:function(){this.searchText="",this.onSearch()},onSearch:function(){this.searchTextWithPosted=this.searchText,this.$emit("searchTextChanged",this.searchText)},clickRecycleFilter:function(t){this.$emit("clickRecycleFilter",t)},clickRefresh:function(){this.$emit("clickRefresh")}},computed:{filterType:function(){var t,e;return null!==(t=null===(e=this.sortBy)||void 0===e?void 0:e.filterType)&&void 0!==t?t:a["T"].None},FilterTypes:function(){var t=this.filterUser,e=this.typeTotal,n=void 0===e?{}:e;return[a["T"].None,a["T"].Folder,a["T"].File,a["T"].Artboard,a["T"].SourceFile].filter((function(e){return!(t===a["O"].AutoCoverage&&e===a["T"].Folder)})).map((function(t){var e,i=null!==(e=n[t])&&void 0!==e?e:0;return{type:t,name:a["T"].getName(t),count:i>0?"(".concat(i,")"):""}}))},filterUser:function(){return this.sortBy.filterUser},EnumRecycleFilter:function(){return a["O"]}},props:{cloud:Object,sortBy:Object,fileCount:Number,typeTotal:Object,isRenderHeader:Boolean,keepDays:[Number,null]},data:function(){return{searchText:"",searchTextWithPosted:""}}},uy=ly,dy=(n("ed49"),Object(Gr["a"])(uy,Kw,qw,!1,null,"2b043ea8",null)),hy=dy.exports,fy=function(){var t=this,e=t._self._c;return e("div",{staticClass:"recycle-item",class:{scroll:t.isHeader&&t.useScroll,"recycle-item-head":t.isHeader,selected:t.isSelected},on:{click:t.clickItem,contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[t.isHeader?[e("div",{staticClass:"img"}),e("div",{staticClass:"name",class:Object(f["a"])({},t.sortByOrderName,t.sortBy.sortType===t.EnumRecycleItemSortType.Name),on:{click:function(e){return t.clickSortByType(t.EnumRecycleItemSortType.Name)}}},[t._v("名称")]),e("div",{staticClass:"deltime",class:Object(f["a"])({},t.sortByOrderName,t.sortBy.sortType===t.EnumRecycleItemSortType.DelTime),on:{click:function(e){return t.clickSortByType(t.EnumRecycleItemSortType.DelTime)}}},[t._v("删除时间")]),t.cloudUserIsOwner?e("div",{staticClass:"usernick",class:Object(f["a"])({},t.sortByOrderName,t.sortBy.sortType===t.EnumRecycleItemSortType.DelUserNick),on:{click:function(e){return t.clickSortByType(t.EnumRecycleItemSortType.DelUserNick)}}},[t._v("操作成员")]):t._e(),e("div",{staticClass:"control"},[t._v("操作")])]:[e("div",{staticClass:"img"},[null!=t.recyclePreviewItem?e("RecycleItemPreview",{attrs:{item:t.recyclePreviewItem}}):t._e()],1),e("div",{staticClass:"name mult"},[e("div",{staticClass:"item1"},[e("div",{staticClass:"name-text",attrs:{title:t.item.name},domProps:{textContent:t._s(t.item.name)}}),e("div",{staticClass:"include",attrs:{title:t.versionCount.title},domProps:{textContent:t._s(t.versionCount.text)}})]),e("div",{staticClass:"item2"},[e("div",{staticClass:"type",domProps:{textContent:t._s(t.typeName)}}),!t.isSourceFile&&t.item.parents?e("div",{staticClass:"from-parents",attrs:{title:"删除前路径: \n".concat(t.item.parents.map((function(t){return t.name})).join("/"))}},t._l(t.item.parents,(function(n,i){return e("div",{key:"".concat(i,":").concat(n.id)},[e("span",{staticClass:"name",domProps:{textContent:t._s(n.name)},on:{click:function(e){return t.clickFolder(n.id)}}})])})),0):t._e()])]),e("div",{staticClass:"deltime mult"},[e("div",{staticClass:"item1",attrs:{title:t.customDelTimeStr.title},domProps:{textContent:t._s(t.customDelTimeStr.text)}}),e("div",{staticClass:"item2",class:{light:t.customCleanTimeStr.light},attrs:{title:t.customCleanTimeStr.title},domProps:{textContent:t._s(t.customCleanTimeStr.text)}})]),t.cloudUserIsOwner?e("div",{staticClass:"usernick"},[e("div",{attrs:{title:t.userNick.title},domProps:{textContent:t._s(t.userNick.text)}})]):t._e(),e("div",{staticClass:"control",attrs:{"data-notselect":""}},[t.removing?e("div",{staticClass:"btn btn-removing"}):[t.canRemove?e("div",{staticClass:"btn btn-restore",class:{off2:!t.canRemove},attrs:{title:"从回收站还原"},on:{click:t.clickRestore}}):t._e()]],2)],t.contextMenu.visible&&t.canRemove?e("div",{ref:"contextmenu",staticClass:"context-menu",style:{left:"".concat(t.contextMenu.clientX,"px"),top:"".concat(t.contextMenu.clientY,"px")},attrs:{"data-notselect":""},on:{dblclick:function(t){t.stopPropagation()}}},[e("RecycleItemMenu",{attrs:{item:t.item},on:{clickBoxSelf:t.clickIgnoreContextMenuClose,clickRestore:t.clickRestore,clickRemove:t.clickRemove}})],1):t._e()],2)},my=[],vy=function(){var t=this,e=t._self._c;return e("div",{class:t.itemCls},[t.isFolder&&t.max?e("div",{staticClass:"img"},[t.isFolderSharePrivateCode?e("div",{staticClass:"lock-min"}):t.isFolderShareSpecifyMembers?e("div",{staticClass:"share-sm-min"}):t._e()]):t._e(),t.isFile&&0===t.imgSize.width&&0===t.imgSize.height?e("div",{staticClass:"icon-netdiskfile",class:t.netdiskIconCls}):t._e(),t.pathPreview?e("ArtboardPreviewImg",{attrs:{pathPreview:t.pathPreview,imgHeight:0},on:{resize:t.onPreviewImgResize,error:function(e){return t.onPreviewImgResize(0,0)}}}):t._e()],1)},py=[],by={components:{ArtboardPreviewImg:Wu},methods:{onPreviewImgResize:function(t,e){var n=this.imgSize;n.width=t,n.height=e},resetImgSize:function(){var t=this.imgSize,e=this.pathPreview,n=Object(l["j"])(e)?-1:0;t.width=t.height=n}},computed:{netdiskIconCls:function(){var t,e=this.isFile,n=this.max;return e?a["L"].getName(null===(t=this.item)||void 0===t||null===(t=t.value)||void 0===t?void 0:t.fileType,n?a["M"].Big:a["M"].Small):"error-img"},pathPreview:function(){var t,e=this.isFolder;if(e)return null;var n=null===(t=this.item)||void 0===t||null===(t=t.value)||void 0===t?void 0:t.previewPath;return Object(l["j"])(n)?n:null},isFolderSharePrivateCode:function(){var t=this.isFolder,e=this.item.value;return t&&e.shareMode===a["v"].PrivateCode},isFolderShareSpecifyMembers:function(){var t=this.isFolder,e=this.item.value;return t&&e.shareMode===a["v"].SpecifyMembers},itemCls:function(){var t=[],e=this.item.value,n=this.isFolder,i=this.isFile,r=this.isArtboard,o=this.max;if(o&&t.push("max"),n){t.push("folder");var s=e,c=this.isFolderSharePrivateCode,l=this.isFolderShareSpecifyMembers;c?t.push("private"):l&&t.push("share-sm");var u=null===s||void 0===s?void 0:s.color;if(null!=u){var d=a["t"].getName(u);d&&t.push(d)}}else i?t.push("file"):r&&t.push("artboard");return t},isFolder:function(){return this.item.type===a["m"].Folder},isFile:function(){return this.item.type===a["m"].File},isArtboard:function(){return this.item.type===a["m"].Artboard}},mounted:function(){this.resetImgSize()},watch:{pathPreview:function(){this.resetImgSize()}},data:function(){return{imgSize:{width:-1,height:-1}}},props:{item:Object,max:Boolean}},gy=by,wy=(n("8a6e"),Object(Gr["a"])(gy,vy,py,!1,null,"20a50ba7",null)),yy=wy.exports,ky=function(){var t=this,e=t._self._c;return e("ul",{on:{click:function(e){return e.target!==e.currentTarget?null:t.clickBoxSelf.apply(null,arguments)}}},[e("li",{domProps:{textContent:t._s("还原此项")},on:{click:t.clickRestore}}),t.cloudUserIsOwner?e("li",{staticClass:"light",on:{click:t.clickRemove}},[t._v("永久删除")]):t._e()])},Cy=[],xy={methods:{clickBoxSelf:function(){this.$emit("clickBoxSelf")},clickRestore:function(){this.$emit("clickRestore")},clickRemove:function(){this.$emit("clickRemove")}},computed:{typeName:function(){var t;return a["T"].getMiniName(null===(t=this.item)||void 0===t?void 0:t.type)}},props:{item:Object}},Sy=xy,Ty=(n("c04a"),Object(Gr["a"])(Sy,ky,Cy,!1,null,"bd72f4d2",null)),Oy=Ty.exports,Iy={components:{RecycleItemPreview:yy,RecycleItemMenu:Oy},methods:{clickFolder:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.goCloudPath({folderId:t,newWindow:!0});case 1:n.n=3;break;case 2:n.p=2,r=n.v,e.showTextTip(r);case 3:return n.a(2)}}),n,null,[[0,2]])})))()},onContextmenu:function(t){var e=this;if(!this.isHeader){var n=t.clientX,i=t.clientY,r=this.contextMenu,o=this.isSelected;clearTimeout(r.handler),o||this.clickItem(t),r.visible?r.ignoreThisClick=!0:r.visible=!0,r.clientX=n,r.clientY=i,this.$nextTick((function(){if(r.visible){var t=window.innerWidth,n=window.innerHeight,i=e.$refs.contextmenu;if(i){var o=i.getBoundingClientRect(),a=t-o.width-3,s=n-o.height-3;r.clientX>a&&(r.clientX=a),r.clientY>s&&(r.clientY=s)}}}))}},clickIgnoreContextMenuClose:function(){var t=this.contextMenu;t.ignoreThisClick=!0},clickRemove:function(){this.$emit("clickRemove",this.item)},clickRestore:function(){this.$emit("clickRestore",this.item)},clickItem:function(t){var e=this.item,n=this.isSelected,i=this.removing;if(!i&&e){var r=this.inNotSelectTarget(t);this.$emit("clickItem",n&&!r?null:e)}},inNotSelectTarget:function(t){var e=null===t||void 0===t?void 0:t.target;if(!e)return!1;var n=document.body;while(e&&e!==n){var i;if(e.hasAttribute("data-notselect"))return!0;if(e=e.parentNode,null!==(i=e)&&void 0!==i&&i.classList.contains("item"))return!1}return!1},clickSortByType:function(t){this.$emit("clickSortByType",t)},clickCloseItemMenu:function(t){if(0===t.button||"contextmenu"===t.type){var e=this.contextMenu;clearTimeout(e.handler),e.ignoreThisClick?e.ignoreThisClick=!1:e.handler=setTimeout((function(){e.visible=!1}),66.67)}}},computed:{isSelected:function(){var t=this.selectedItemId,e=this.item,n=this.isHeader;return!n&&t===(null===e||void 0===e?void 0:e.id)},nameTitle:function(){var t=this.item,e=void 0===t?{}:t,n=e.parents,i=e.name;return n?"".concat(i,"\n--------------------\n").concat(n.map((function(t){return t.name})).join(" / ")):i},canRemove:function(){var t,e=this.cloudUserIsOwner,n=this.item,i=this.cloudUserKey;return e||(null===(t=n.delUser)||void 0===t?void 0:t.userKey)===i},userNick:function(){var t=this.item.delUser,e=void 0===t?{}:t,n=e.nickName,i=e.email;return{title:"".concat(n,"(").concat(i,")"),text:n}},versionCount:function(){var t=this.recycleFolderInfo,e=this.item,n=this.filterUserAutoCoverage;if(n)return{title:"版本ID: ".concat(e.versionIds),text:"#".concat(e.ext)};if(!t)return{title:"版本ID: ".concat(e.versionIds),text:"".concat(e.extInt,"个版本")};var i=t.folders,r=void 0===i?0:i,o=t.files,a=void 0===o?0:o,s=t.artboards,c=void 0===s?0:s,l=t.subFolders,u=void 0===l?0:l,d=t.subFiles,h=void 0===d?0:d,f=t.subArtboards,m=void 0===f?0:f;return{title:0===e.extInt?"空文件夹":"内含 ".concat([{count:r+u,name:"子文件夹"},{count:a+h,name:"文件"},{count:c+m,name:"画板"}].filter((function(t){return t.count>0})).reduce((function(t,e,n,i){var r;return r=n===i.length-1&&i.length>1?"和":n>0?"、":"","".concat(t).concat(r," ").concat(e.count," 个").concat(e.name)}),"")),text:"含".concat(r+u+a+h+c+m,"项")}},typeName:function(){var t=this.item;if(!t)return null;var e=t.type,n=a["T"].getName(e);return n},isSourceFile:function(){var t;return(null===(t=this.item)||void 0===t?void 0:t.type)===a["T"].SourceFile},customDelTimeStr:function(){var t=this.item.delTimes;return{text:Object(l["d"])(t),title:"删除时间: ".concat(Object(l["c"])(t))}},customCleanTimeStr:function(){var t=this.item.cleanTimes,e=function(t){var e=Math.floor(t/1e3),n=Math.floor(e/60),i=Math.floor(n/60),r=Math.floor(i/24);return r>0?"".concat(Math.round(Object(m["a"])(t/864e5,1)),"天后自动清理"):i>0?"".concat(Math.round(Object(m["a"])(t/36e5,1)),"小时后自动清理"):n>0?"".concat(Math.round(Object(m["a"])(t/6e4,1)),"分钟后自动清理"):e>=-60?"即将自动清理":void 0},n=t-Date.now();return{text:e(n),title:"自动清理时间: ".concat(Object(l["c"])(t)),light:!0}},recycleFolderInfo:function(){var t=this.item;if((null===t||void 0===t?void 0:t.type)!==a["T"].Folder)return null;var e=Object(c["ob"])(t.ext);return Object(l["k"])(e)||(e={}),e},recyclePreviewItem:function(){var t=this.item;if(!t)return null;switch(t.type){case a["T"].Folder:return{type:a["m"].Folder,value:this.recycleFolderInfo};case a["T"].File:var e=t.previewPath,n=t.fileType;return{type:a["m"].File,value:{previewPath:e,fileType:n}};case a["T"].Artboard:var i=t.previewPath,r=t.fileType;return{type:a["m"].Artboard,value:{previewPath:i,fileType:r}};case a["T"].SourceFile:var o,s=t.previewPath,c=t.fileType;switch(c){case a["r"].XD:o=a["L"].XD;break;case a["r"].SKETCH:o=a["L"].Sketch;break;case a["r"].FIGMA:o=a["L"].Figma;break;case a["r"].PHOTOSHOP:o=a["L"].PhotoShop;break;default:o=a["L"].Other;break}return{type:a["m"].File,value:{previewPath:s,fileType:o}};default:return null}},sortByOrderName:function(){switch(this.sortBy.sortOrder){case a["R"].Desc:return"desc";case a["R"].Asc:return"asc"}return""},EnumRecycleItemSortType:function(){return a["S"]}},watch:{"contextMenu.visible":function(t){var e=this,n=this.contextMenu;clearTimeout(n.handlerHide),t?n.handlerHide=setTimeout((function(){window.addEventListener("click",e.clickCloseItemMenu),window.addEventListener("contextmenu",e.clickCloseItemMenu)}),66.67):(window.removeEventListener("click",this.clickCloseItemMenu),window.removeEventListener("contextmenu",this.clickCloseItemMenu))}},beforeDestroy:function(){clearTimeout(this.contextMenu.handler),clearTimeout(this.contextMenu.handlerHide),window.removeEventListener("click",this.clickCloseItemMenu),window.removeEventListener("contextmenu",this.clickCloseItemMenu)},data:function(){return{contextMenu:{handler:0,handlerHide:0,visible:!1,ignoreThisClick:!1,x:0,y:0,clientX:0,clientY:0}}},props:{item:Object,isHeader:Boolean,useScroll:Boolean,sortBy:Object,selectedItemId:Number,filterUserAutoCoverage:Boolean,removing:Boolean}},Ay=Iy,Fy=(n("8765"),Object(Gr["a"])(Ay,fy,my,!1,null,"1c89ac6c",null)),jy=Fy.exports,_y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer"},[e("div"),e("div",{staticClass:"pages"},[e("div",{class:{off:t.pageInfo.pageIndex<=1},on:{click:function(e){return t.goPage(1)}}},[t._v("首页")]),e("div",{class:{off:t.pageInfo.pageIndex<=1},on:{click:function(e){return t.goPage(t.pageInfo.pageIndex-1)}}},[t._v("上一页")]),t._l(t.pages,(function(n){return e("div",{key:n,class:{current:n===t.pageInfo.pageIndex},on:{click:function(e){return t.goPage(n)}}},[t._v(t._s(n))])})),e("div",{class:{off:t.pageInfo.pageIndex>=t.pageInfo.pageCount},on:{click:function(e){return t.goPage(t.pageInfo.pageIndex+1)}}},[t._v("下一页")]),e("div",{class:{off:t.pageInfo.pageIndex>=t.pageInfo.pageCount},on:{click:function(e){return t.goPage(t.pageInfo.pageCount)}}},[t._v("尾页")])],2),e("p",[e("span",[t._v("共"+t._s(t.pageInfo.pageCount)+"页,"+t._s(t.pageInfo.count)+"项")])])])},My=[],Ly={methods:{goPage:function(t){t!==this.pageInfo.pageIndex&&this.$emit("goPage",t)}},computed:{pages:function(){for(var t=[],e=this.pageStart,n=this.pageEnd;e<=n;e++)t.push(e);return t},pageStart:function(){var t=this.pageInfo.pageIndex;return Math.max(1,t-5)},pageEnd:function(){var t=this.pageStart;return Math.min(t+9,this.pageInfo.pageCount)}},props:{pageInfo:Object}},Py=Ly,Dy=(n("cf87"),Object(Gr["a"])(Py,_y,My,!1,null,"a7f84362",null)),Ny=Dy.exports,Ey={components:{NotSupportCloudVersionTip:hw,Header:hy,LazyList:_h,RecycleItem:jy,Footer:Ny,CloudSelectFolderNew:Xw},methods:{clickMoveToCancel:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:return t.confirming=!0,t.moveTo.visible=!1,e.n=1,Object(c["pb"])(35);case 1:t.confirming=!1;case 2:return e.a(2)}}),e)})))()},clickMoveToSelectFolder:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function o(){var s,c,l,u,d,h,f,m,v;return Object(i["a"])().w((function(o){while(1)switch(o.n){case 0:if(s=e?Object(r["a"])(Object(i["a"])().m((function t(){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,n.clickMoveToCancel();case 1:return t.a(2)}}),t)}))):Object(r["a"])(Object(i["a"])().m((function t(){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.a(2)}}),t)}))),t){o.n=1;break}return o.a(2,s());case 1:if(c=n.moveTo,l=c.recycleInfo,u=c.parentId,l){o.n=2;break}return o.a(2,s());case 2:if(d=l.recycleItem,0!==t.id||d.type!==a["T"].Artboard&&d.type!==a["T"].File){o.n=3;break}return n.showTextTip("".concat(a["T"].getMiniName(d.type),"不能被还原到根目录")),null===(h=n.$refs.selectFolder)||void 0===h||h.showSelectList(),o.a(2);case 3:if(t.id!==u){o.n=4;break}return e&&(n.showTextTip("请选择新的文件夹"),null===(f=n.$refs.selectFolder)||void 0===f||f.showSelectList()),o.a(2);case 4:return o.n=5,s();case 5:m=function(t,e){return e?(t.push(e),m(t,e.id>0?e.parent:null)):t},v=m([],t).reverse().map((function(t){return{id:t.id,name:t.name}})),n.restoreContinue(d,{confirmAction:a["Q"].ResetFolder,parentId:t.id,parents:v});case 6:return o.a(2)}}),o)})))()},onFolderChanged:function(){},autoHideSelectedItem:function(){if(!this.confirming&&!this.moveTo.visible){var t=Date.now()-this.selectedItemClickTime;t<34||(this.selectedItem=null)}},restoreContinue:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function r(){var o,s,u,d,h,f,m,v,p,b,g,w,y,k,C,x,S,T,O;return Object(i["a"])().w((function(i){while(1)switch(i.p=i.n){case 0:if(o=e.confirmAction,s=e.parentId,u=e.name,d=e.parents,o===a["Q"].RestoreToOriginal){i.n=3;break}return n.confirming=!0,i.n=1,n.confirm({title:"还原确认",text:"将还原".concat(a["T"].getMiniName(t.type),"「").concat(t.name,"」").concat(u?"并重命名为「".concat(u,"」"):"").concat(t.type===a["T"].Folder?"":1===t.extInt?"的版本 ".concat(t.versionIds):"的".concat(t.extInt,"个版本(").concat(t.versionIds,")")).concat(t.type!==a["T"].SourceFile&&(null===d||void 0===d?void 0:d.length)>0?"到「".concat(d.map((function(t){return t.name})).join("/"),"」"):""),yesText:"确认还原"});case 1:return h=i.v,i.n=2,Object(c["pb"])(35);case 2:if(n.confirming=!1,h){i.n=3;break}return i.a(2);case 3:if(!n.removing){i.n=4;break}return n.showTextTip("正在执行操作,请稍后"),i.a(2);case 4:return null!==s&&void 0!==s||(s=-1),f=t.id,m=n.reqData.filterUser,i.p=5,n.removingId=f,i.n=6,n.fetchPostCloudApi("recyclerestorebyweb",{body:{id:f,from:m===a["O"].AutoCoverage?a["N"].VersionArchived:a["N"].UserDeleted,action:o,parentId:s,name:u},json:!0});case 6:if(p=i.v,n.removingId===f){i.n=7;break}return i.a(2);case 7:if(Object(l["k"])(p)){i.n=8;break}throw new Error("还原失败,返回值异常");case 8:if(p.success){i.n=9;break}throw new Error(null!==(v=p.errMsg)&&void 0!==v?v:"还原失败了");case 9:if(b=p.data,Object(l["k"])(b)){i.n=10;break}throw Error("还原失败,返回值异常.");case 10:if(n.getData(),g=a["T"].getMiniName(b.type),b.type!==a["T"].SourceFile){i.n=12;break}return i.n=11,n.alert({title:"已还原".concat(g,"「").concat(b.name,"」，共 ").concat(null===(w=b.verIds)||void 0===w?void 0:w.split(",").map((function(t){return"#".concat(t.trim())})).filter((function(t){return t.length>1})).length," 个版本"),yesText:"我知道了"});case 11:i.n=16;break;case 12:if(!b.parent){i.n=15;break}return k=b.type===a["T"].Folder?b.id:b.parent.id,n.cloudCurrentFolderId===k&&n.$store.commit("autoGetFolderPrecisKey"),i.n=13,n.confirm({title:"还原成功",text:"".concat(g,"「").concat(b.name,"」").concat(b.type===a["T"].Folder?"":"(共 ".concat(null===(y=b.verIds)||void 0===y?void 0:y.split(",").map((function(t){return"#".concat(t.trim())})).filter((function(t){return t.length>1})).length," 个版本)"),"，已还原到文件夹「").concat(b.parent.name,"」"),yesText:"查看".concat(g),noText:"我知道了"});case 13:if(!i.v){i.n=14;break}x=null,b.type===a["T"].File&&(S=b.verIds,Object(l["j"])(S)&&-1===S.indexOf(",")&&!isNaN(+S)&&(x=+S)),n.goCloudPath({folderId:k,artboardId:b.type===a["T"].Artboard?b.id:0,artboardGuid:b.type===a["T"].Artboard?b.guid:null,fileSecId:b.type===a["T"].File&&null!==(C=b.secId)&&void 0!==C?C:null,verId:x,fileUsePage:!0,newWindow:!0});case 14:i.n=16;break;case 15:n.alert({title:"还原成功",text:"已还原".concat(g,"「").concat(b.name,"」").concat(b.type===a["T"].Folder?"":"，共 ".concat(null===(T=b.verIds)||void 0===T?void 0:T.split(",").map((function(t){return"#".concat(t.trim())})).filter((function(t){return t.length>1})).length," 个版本")),yesText:"我知道了"});case 16:i.n=18;break;case 17:i.p=17,O=i.v,n.removingId===f&&n.alert({title:"还原失败",text:O});case 18:return i.p=18,n.removingId===f&&(n.removingId=0),i.f(18);case 19:return i.a(2)}}),r,null,[[5,17,18,19]])})))()},clickRestore:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var o,s,u,d,h,f,m,v,p,b,g;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(t){n.n=1;break}return n.a(2);case 1:if(!e.removing){n.n=2;break}return e.showTextTip("正在执行操作,请稍后"),n.a(2);case 2:return o=e.reqData.filterUser,n.p=3,e.confirming=!0,n.n=4,Object(c["pb"])(10);case 4:return e.confirming=!1,e.removingId=t.id,n.n=5,e.fetchPostCloudApi("recyclerestoreprecheckbyweb",{body:new URLSearchParams({id:t.id,from:o===a["O"].AutoCoverage?a["N"].VersionArchived:a["N"].UserDeleted})});case 5:if(d=n.v,e.removingId===t.id){n.n=6;break}return n.a(2);case 6:if(Object(l["k"])(d)){n.n=7;break}throw new Error("操作失败,返回值异常");case 7:if(d.success){n.n=8;break}throw new Error(null!==(s=d.errMsg)&&void 0!==s?s:"操作失败了");case 8:if(h=d.data,Object(l["k"])(h)){n.n=9;break}throw Error("操作失败,返回值异常.");case 9:f={title:"回收站还原",text:null!==(u=h.msg)&&void 0!==u?u:"-",yesText:void 0,noText:void 0,showCancel:!1,yesAction:function(){},noAction:function(){}},m="".concat(a["T"].getMiniName(t.type)),v=function(){var n,i,r=e.moveTo;r.parentId=null!==(n=h.currentFromPaths?null===(i=h.currentFromPaths[h.currentFromPaths.length-1])||void 0===i?void 0:i.id:null)&&void 0!==n?n:0,r.recycleInfo={recycleItem:t,checkData:h},r.visible=!0},p=function(){var n=Object(r["a"])(Object(i["a"])().m((function n(){var r,o,s;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:return s=null!==(r=t.name)&&void 0!==r?r:"",t.type===a["T"].File&&(s=s.replace(/\.[^.]+$/i,"")),n.p=1,e.confirming=!0,n.n=2,e.prompt({title:"重命名".concat(m),text:s,placeholder:"请输入新的".concat(m,"名"),beforeYes:function(n){return n=n.trim(),Object(l["j"])(n)?t.type===a["T"].File&&/[\\/:*?"<>|]/.test(n)?(e.showTextTip("文件名含有非法字符,请修正文件名"),!1):n!==s||(e.showTextTip("请输入新的".concat(m,"名")),!1):(e.showTextTip("请输入新的".concat(m,"名")),!1)},maxLength:256,noText:"取消",yesText:"确认"});case 2:return o=n.v.trim(),n.n=3,Object(c["pb"])(35);case 3:n.n=6;break;case 4:return n.p=4,n.v,n.n=5,Object(c["pb"])(35);case 5:return n.a(2);case 6:return n.p=6,e.confirming=!1,n.f(6);case 7:e.restoreContinue(t,{confirmAction:a["Q"].ReName,name:o,parents:h.currentFromPaths});case 8:return n.a(2)}}),n,null,[[1,4,6,7]])})));return function(){return n.apply(this,arguments)}}(),b=h.action,n.n=b===a["P"].NeedResetFolder?10:b===a["P"].CanReNameOrResetFolder?11:b===a["P"].CanRestoreToOriginal?12:13;break;case 10:return f.yesText="选择还原位置",f.noText="取消操作",f.yesAction=v,n.a(3,14);case 11:return f.showCancel=!0,f.yesText="重命名",f.noText="选择还原位置",f.yesAction=p,f.noAction=v,n.a(3,14);case 12:return setTimeout((function(){e.restoreContinue(t,{confirmAction:a["Q"].RestoreToOriginal,parents:h.currentFromPaths})}),10),n.a(2);case 13:throw Error("操作失败,返回值异常(action=".concat(h.action,")"));case 14:setTimeout(Object(r["a"])(Object(i["a"])().m((function t(){var n;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,e.confirm(f);case 1:n=t.v,t.n=!0===n?2:!1===n?3:4;break;case 2:return f.yesAction(),t.a(3,5);case 3:return f.noAction(),t.a(3,5);case 4:return t.a(3,5);case 5:return t.a(2)}}),t)}))),10),n.n=16;break;case 15:n.p=15,g=n.v,e.removingId===t.id&&e.showTextTip(g);case 16:return n.p=16,e.removingId===t.id&&(e.removingId=0),n.f(16);case 17:return n.a(2)}}),n,null,[[3,15,16,17]])})))()},clickRemove:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,s,u,d,h;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(t){n.n=1;break}return n.a(2);case 1:if(!e.removing){n.n=2;break}return e.showTextTip("正在执行操作,请稍后"),n.a(2);case 2:return r=e.reqData.filterUser,n.p=3,s=a["T"].getMiniName(t.type),e.confirming=!0,n.n=4,e.confirm({title:"删除确认",text:"删除后无法恢复,是否删除".concat(s,"「").concat(t.name,"」")});case 4:return u=n.v,n.n=5,Object(c["pb"])(35);case 5:if(e.confirming=!1,u){n.n=6;break}return n.a(2);case 6:return e.removingId=t.id,n.n=7,e.fetchPostCloudApi("recycleremovebyweb",{body:new URLSearchParams({id:t.id,from:r===a["O"].AutoCoverage?a["N"].VersionArchived:a["N"].UserDeleted})});case 7:if(d=n.v,e.removingId===t.id){n.n=8;break}return n.a(2);case 8:if(Object(l["k"])(d)){n.n=9;break}throw new Error("删除失败,返回值异常");case 9:if(d.success){n.n=10;break}throw new Error(null!==(o=d.errMsg)&&void 0!==o?o:"删除失败了");case 10:e.showTextTip(Object(l["j"])(d.data)?d.data:"已永久删除".concat(s,"「").concat(t.name,"」")),e.getData(),n.n=12;break;case 11:n.p=11,h=n.v,e.removingId===t.id&&e.alert({title:"删除失败",text:h});case 12:return n.p=12,e.removingId===t.id&&(e.removingId=0),n.f(12);case 13:return n.a(2)}}),n,null,[[3,11,12,13]])})))()},clickItem:function(t){},useScrollChanged:function(t){this.useScroll=t},searchTextChanged:function(t){this.reqData.searchText=t},clickRecycleFilter:function(t){this.reqData.filterUser=t},clickOrderDesc:function(t){var e=this.reqData;e.sortOrder=t?a["R"].Desc:a["R"].Asc},clickSortByType:function(t){var e=this.reqData,n=this.reqData,i=n.sortType,r=n.sortOrder;if(i===t)switch(r){case a["R"].Desc:r=a["R"].Asc;break;default:r=a["R"].Desc;break}else switch(i=t,t){case a["S"].Name:case a["S"].DelUserNick:r=a["R"].Asc;break;default:r=a["R"].Desc;break}e.sortOrder=r,e.sortType=i,Object(c["jb"])("recycle.sortBy",{sortOrder:r,sortType:i})},getData:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,u,d,h,f,m,v,p,b,g,w;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:return r=e.pageInfo,o=e.reqData,"number"===typeof t&&(r.pageIndex=t),u=Object(s["a"])(Object(s["a"])({},o),{},{pageIndex:r.pageIndex,searchText:o.searchText.trim()}),e.cloudUserIsOwner||(o.filterUser=a["O"].MyDelete),d=e.fetchTime=Date.now(),n.p=1,e.fetching=!0,e.isError=!1,e.selectedItem=null,f=JSON.stringify(u),f!=e.getDataKey&&(e.getDataKey=f,null===(m=e.$refs.list)||void 0===m||m.scrollToTop()),n.n=2,e.fetchPostCloudApi("getrecyclelistbyweb",{body:u,json:!0});case 2:if(v=n.v,d==e.fetchTime){n.n=3;break}return n.a(2);case 3:if(Object(l["k"])(v)){n.n=4;break}throw new Error("无法解析返回值");case 4:if(v.success){n.n=5;break}throw new Error(null!==(p=v.errMsg)&&void 0!==p?p:"无法获取回收站数据");case 5:b=v.data,Object(l["i"])(b.list)?(g=Object(l["k"])(b.users)?b.users:{},b.list.forEach((function(t){var e,n;t.delUser=g[t.delUserId];var i=t.type===a["T"].Folder?null:(null!==(e=t.ext)&&void 0!==e?e:"").split(",").map((function(t){return"#".concat(t.trim())})).filter((function(t){return"#"!==t}));null==i||i.length<1?t.versionIds="":t.versionIds=i.join(", "),t.parents=Object(l["j"])(t.fromPaths)?null===(n=Object(c["ob"])(t.fromPaths))||void 0===n||null===(n=n.map((function(t){return Object(l["k"])(t)?t:null})))||void 0===n?void 0:n.filter((function(t,e,n){return!(n.length>1)||(null===t||void 0===t?void 0:t.id)>0})):null})),e.list=b.list):e.list.splice(0),r.typeTotal=Object(l["k"])(b.typeTotal)?b.typeTotal:{},r.count=b.count,r.pageIndex=b.pageIndex,r.pageCount=b.pageCount,r.pageSize=b.pageSize,r.originalTotal=null!==(h=b.originalTotal)&&void 0!==h?h:null,r.keepDays=b.keepDays,e.initSucceed=!0,n.n=8;break;case 6:if(n.p=6,w=n.v,d==e.fetchTime){n.n=7;break}return n.a(2);case 7:e.isError=!0,e.errorText=w;case 8:return n.p=8,d==e.fetchTime&&(e.fetching=!1),n.f(8);case 9:return n.a(2)}}),n,null,[[1,6,8,9]])})))()},initOrderBy:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,s,u,d;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(n=t.reqData,r=t.reloadWatchKey,o=Object(c["F"])("recycle.sortBy",!0),Object(l["k"])(o)){for(u in o.sortOrder!==a["R"].Asc&&(o.sortOrder=a["R"].Desc),s=a["S"].Name,a["S"])o.sortType===a["S"][u]&&(s=o.sortType);n.sortType=s,n.sortOrder=o.sortOrder}if(t.initData(),d=t.reloadWatchKey,r==d){e.n=1;break}return e.a(2);case 1:return e.n=2,t.getData(1);case 2:return e.a(2)}}),e)})))()},initData:function(){this.initSucceed=!1,this.reqData.filterUser=this.cloudUserIsOwner?a["O"].AllItem:a["O"].MyDelete}},created:function(){this.initOrderBy()},beforeDestroy:function(){window.removeEventListener("click",this.autoHideSelectedItem)},computed:{EnumFileType:function(){return a["r"]},isSelectFolderItem:function(){var t;return(null===(t=this.selectedItem)||void 0===t?void 0:t.type)===a["T"].Folder},isSelectFileItem:function(){var t;return(null===(t=this.selectedItem)||void 0===t?void 0:t.type)===a["T"].File},isSelectArtboardItem:function(){var t;return(null===(t=this.selectedItem)||void 0===t?void 0:t.type)===a["T"].Artboard},isSelectSourceFileItem:function(){var t;return(null===(t=this.selectedItem)||void 0===t?void 0:t.type)===a["T"].SourceFile},isRenderHeader:function(){return!0},filterUserAutoCoverage:function(){return a["O"].AutoCoverage===this.reqData.filterUser},filterSearch:function(){return Object(l["j"])(this.reqData.searchText.trim())},isNotSupportRecycleCloudVersion:function(){var t=this.cloudVersion;return t!==a["g"]&&Qr.notSupportRecycle(t)},selectedItemId:function(){var t,e;return null!==(t=null===(e=this.selectedItem)||void 0===e?void 0:e.id)&&void 0!==t?t:-1},reloadWatchKey:function(){var t=this.reqData,e=t.filterType,n=t.searchText,i=t.filterUser,r=t.sortOrder,o=t.sortType;return"".concat(e,":").concat(i,":").concat(r,":").concat(o,"/").concat(n)},removing:function(){return this.removingId>0}},watch:{"moveTo.visible":function(t){t||(this.moveTo.recycleInfo=null,this.moveTo.parentId=-1)},selectedItem:function(t){window.removeEventListener("click",this.autoHideSelectedItem),t&&window.addEventListener("click",this.autoHideSelectedItem)},reloadWatchKey:function(){this.getData(1)},"reqData.filterUser":function(t){t===a["O"].AutoCoverage&&(this.reqData.filterType===a["T"].Folder&&(this.reqData.filterType=a["T"].None),this.reqData.sortType===a["S"].VersionCount&&this.clickSortByType(a["S"].DelTime))}},data:function(){return{moveTo:{visible:!1,parentId:-1,recycleInfo:null},confirming:!1,useScroll:!1,initSucceed:!1,selectedItemClickTime:0,selectedItem:null,isError:!1,errorText:null,fetching:!0,fetchTime:0,getDataKey:"",removingId:0,reqData:{searchText:"",sortType:a["S"].DelTime,sortOrder:a["R"].Desc,filterUser:a["O"].MyDelete,filterType:a["T"].None},pageInfo:{pageIndex:1,pageCount:1,pageSize:30,count:0,originalTotal:0,typeTotal:{},keepDays:30},list:[]}}},Ry=Ey,Vy=(n("95c9"),Object(Gr["a"])(Ry,ow,aw,!1,null,"80554fbc",null)),By=Vy.exports,Hy={components:{UserFace:Qg,Checkbox2:rw},methods:{clickRecycle:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,t.popup(By,{noPadding:!0,props:{}});case 1:n=e.v,n.canceled,n.data;case 2:return e.a(2)}}),e)})))()},setGuideRect:function(){var t=this.inArtboardMode,e=this.inCloudViewerMode;e&&this.setBeginnerGuideRect(a["k"].SliceBorderLineMenu,t?"nickName":null,a["j"].TopRight)},clickEmpty:function(){},clickInteractionRectAlwaysVisible:function(){this.$store.commit("setInteractionRectAlwaysVisible",!this.interactionRectAlwaysVisible)},clickPointCommentShowAlways:function(){this.$store.commit("pointCommentShowAlways",!this.pointCommentShowAlways)},clickSliceBorderLineHide:function(){this.$store.commit("sliceBorderLineHide",!this.sliceBorderLineHide)},clickArtboardShowInteractionLine:function(){var t=this.cloudVersion,e=this.artboardShowInteractionLine;Qr.notSupportInteraction(t)&&this.showTextTip("当前私有云版本(".concat(t,")过低,不支持交互原型相关功能,请先升级部署包")),this.$store.commit("artboardShowInteractionLine",!e)},clickMenu:function(t){var e=t.target;"A"!==(null===e||void 0===e?void 0:e.tagName)&&(this.ignoreThisClick=!0)},clickArtRenderInCanvasMode:function(){this.$store.commit("artRenderInCanvasMode",!this.artRenderInCanvasMode)},clickShowArtListMap:function(){this.$store.commit("showArtListMap",!this.showArtListMap)},clickSetNickName:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t.prompt({title:"修改昵称",text:t.cloudNickName,placeholder:"昵称;方便其他成员认识你",beforeYes:function(e){if(e=e.trim(),!Object(c["X"])(e))return t.showTextTip("请输入正确的昵称,4-20个字符组成,其中1个中文=2个字符."),!1}});case 1:n=e.v,e.n=3;break;case 2:return e.p=2,e.v,e.a(2);case 3:if(n=n.trim(),n!==t.cloudNickName){e.n=4;break}return e.a(2);case 4:return t.nickSetting=!0,e.p=5,e.n=6,t.cryptoMarklionWeb2("setusernickname",{nickName:n},1e4);case 6:r=e.v,t.$store.commit("setCloudNickName",r.data),t.showTextTip("昵称已修改"),e.n=8;break;case 7:e.p=7,o=e.v,t.showTextTip(o);case 8:return e.a(2)}}),e,null,[[5,7],[0,2]])})))()},clickLogout:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(!t.logoutting){e.n=1;break}return e.a(2);case 1:return t.logoutting=!0,e.p=2,e.n=3,t.goCloudLogout();case 3:return e.p=3,t.logoutting=!1,e.f(3);case 4:return e.a(2)}}),e,null,[[2,,3,4]])})))()},clickLogin:function(){this.goCloudLogin()},clickShowMenu:function(){var t=this;setTimeout((function(){var e=!t.menuVisible;t.menuVisible=e,e&&(t.ignoreThisClick=!1)}),0)},hideMenu:function(){var t=this;clearTimeout(this.menuHandler),this.ignoreThisClick?this.ignoreThisClick=!1:this.menuHandler=setTimeout((function(){t.ignoreThisClick?t.ignoreThisClick=!1:t.menuVisible=!1}),50)}},computed:{inImageViewerMode:function(){var t;return this.inNetDiskFileMode&&(null===(t=this.curNetDiskFile)||void 0===t?void 0:t.fileType)===a["L"].Image},urlQueryString:function(){var t,e=this.curArtboard,n=null===e||void 0===e||null===(t=e.artboard)||void 0===t||null===(t=t.mlConfig)||void 0===t?void 0:t.softVersion;return n||(n=this.$store.state.config.softVer),"invoke=MarkLion.Output".concat(Object(l["j"])(n)?"&ver=".concat(n):"")},interactionRectAlwaysVisible:function(){return this.$store.state.artboardDetail.interactionSet.rectAlwaysVisible},pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},sliceBorderLineHide:function(){return this.$store.state.sliceBorderLineHide},artboardShowInteractionLine:function(){return this.$store.state.artboardShowInteractionLine},artRenderInCanvasMode:function(){return this.$store.state.artRenderInCanvasMode},showTitle:function(){return this.cloudIsLogin?"".concat(this.cloudNickName,"(").concat(this.cloudUserEmail,")"):"点击登录"},showName:function(){return this.cloudIsLogin?this.cloudNickName:"未登录"},showEmail:function(){return this.cloudIsLogin?this.cloudUserEmail:""},resetGuideRectKey:function(){var t=this.winRect.width,e=this.inCloudViewerMode,n=this.inArtboardMode;return"".concat(t,":").concat(e,":").concat(n)},winRect:function(){return this.$store.state.winRect}},watch:{menuVisible:function(t){t?window.addEventListener("click",this.hideMenu,!0):window.removeEventListener("click",this.hideMenu,!0)},resetGuideRectKey:function(){this.setGuideRect()}},beforeDestroy:function(){this.setGuideRect(),clearTimeout(this.menuHandler),window.removeEventListener("click",this.hideMenu,!0)},mounted:function(){this.setGuideRect()},data:function(){return{menuVisible:!1,menuHandler:0,logoutting:!1,nickSetting:!1,ignoreThisClick:!1}},props:{setVisible:Boolean}},Uy=Hy,Gy=(n("fef2"),Object(Gr["a"])(Uy,$g,zg,!1,null,"c608e4dc",null)),Wy=Gy.exports,$y=function(){var t=this,e=t._self._c;return e("div",{ref:"btn",staticClass:"btn-user-notify",class:{news:t.hasNotReadNotify,on:t.notifyListVisible},attrs:{title:"消息"},on:{click:t.clickNotify}})},zy=[],Yy={methods:{clickNotify:function(){var t=this;setTimeout((function(){var e=t.userNotify;if(e.visible=!e.visible,e.visible){var n=t.$refs.btn;if(!n)return;var i=n.getBoundingClientRect(),r=e.location;r.top=i.bottom,r.right=window.innerWidth-i.right}}),0)}},computed:{userNotify:function(){return this.$store.state.userNotify},notifyListVisible:function(){return this.userNotify.visible},hasNotReadNotify:function(){return-1!==this.notifyList.findIndex((function(t){return!t.readed}))},notifyList:function(){var t,e;return null!==(t=null===(e=this.userNotify.cloudList[this.cloudKey])||void 0===e?void 0:e.list)&&void 0!==t?t:[]}}},Xy=Yy,Ky=(n("3945"),Object(Gr["a"])(Xy,$y,zy,!1,null,"5611abb4",null)),qy=Ky.exports,Jy=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"user-notify",style:t.styleLocation,on:{mousedown:function(t){t.stopPropagation()},click:function(e){t.notClickClose=!0}}},[e("div",{staticClass:"header"},[e("nav",[e("a",{class:{on:t.showType===t.EnumNotifyShowType.ALL},attrs:{href:"javascript:;"},on:{click:function(e){t.showType=t.EnumNotifyShowType.ALL}}},[t._v("全部("+t._s(t.list.length)+")")]),e("a",{class:{on:t.showType===t.EnumNotifyShowType.NotRead},attrs:{href:"javascript:;"},on:{click:function(e){t.showType=t.EnumNotifyShowType.NotRead}}},[t._v("未读("+t._s(t.notReadList.length)+")")]),e("a",{class:{on:t.showType===t.EnumNotifyShowType.Readed},attrs:{href:"javascript:;"},on:{click:function(e){t.showType=t.EnumNotifyShowType.Readed}}},[t._v("已读("+t._s(t.readedList.length)+")")])]),e("menu",[t.showType===t.EnumNotifyShowType.NotRead||t.showType===t.EnumNotifyShowType.ALL&&t.notReadList.length>0?e("a",{staticClass:"btn-setread",attrs:{href:"javascript:;"},on:{click:t.clickSetAllNotifyReaded}},[t._v(t._s(t.btnFetching?"请求处理中":"全部标记为已读"))]):t.showType===t.EnumNotifyShowType.Readed||t.showType===t.EnumNotifyShowType.ALL&&t.readedList.length>0?e("a",{staticClass:"btn-setread",attrs:{href:"javascript:;"},on:{click:t.clickAllReadedNotify}},[t._v(t._s(t.btnFetching?"请求处理中":"清空已读消息"))]):t._e(),e("a",{staticClass:"btn-refresh2",attrs:{href:"javascript:;",title:"刷新消息列表"},on:{click:function(e){return t.clickReload(!0)}}})])]),e("div",{ref:"list",staticClass:"list",on:{scroll:t.onListScroll}},[t.listFetchState===t.FetchState.Fetching||t.listFetchState===t.FetchState.Error?e("NetworkLoading",{attrs:{loadText:"正在获取消息列表...",errorText:t.errorText,isLoading:t.listFetchState===t.FetchState.Fetching,isError:t.listFetchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload(!0)}}}):0===t.showList.length?e("div",{staticClass:"empty"},[t._v("暂无消息")]):e("div",{staticClass:"pad",style:{height:t.styleListRealHeight}},[e("ul",{style:{top:t.styleListOffsetTop}},t._l(t.renderList,(function(t){return e("UserNotifyItem",{key:"notify-".concat(t.id),attrs:{item:t}})})),1)])],1)])},Qy=[],Zy=function(){var t=this,e=t._self._c;return t.visible&&t.unknowNotifyType?e("li",{staticClass:"unknow"},[t._v("不支持的消息类型(id:"+t._s(t.item.id)+",type:"+t._s(t.item.type)+"),请升级客户端后查看")]):t.visible?e("li",{staticClass:"item",class:{notread:!t.item.readed},on:{click:t.clickNotify}},[e("div",{staticClass:"info"},[e("div",{staticClass:"title",attrs:{title:t.title}},[t._v(t._s(t.title))]),e("div",{staticClass:"date"},[t._v(t._s(t.item.dateStr))])]),e("div",{staticClass:"text"},[e("a",{attrs:{href:"javascript:;",title:t.commentSummary},on:{click:t.clickSummary}},[t._v(t._s(t.commentSummary))])])]):t._e()},tk=[],ek={methods:{clickSummary:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,s,c,l;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return n=t.item,e.p=1,c=n.msg,o=c.artboardId,r=c.artboardName,e.n=2,t.goCloudPath({folderId:c.folderId,artboardId:o,artboardGuid:c.artboardGuid,artboardVer:null!==(s=c.artboardVer)&&void 0!==s?s:0,commentId:c.commentId,isReply:n.type===a["X"].Artboard_Reply||n.type===a["X"].Artboard_Reply_At,checkArtboardExist:!0});case 2:t.$store.commit("setAllFoldersBoxVisible",!1),t.$store.state.userNotify.visible=!1,e.n=4;break;case 3:e.p=3,l=e.v,t.showTextTip(r?l.toString().replace("[".concat(o,"]"),"「".concat(r,"」")).replace("[".concat(o,"]"),"「".concat(r,"」")):l);case 4:return e.a(2)}}),e,null,[[1,3]])})))()},clickNotify:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.item,n){e.n=1;break}return e.a(2);case 1:if(n.readed){e.n=8;break}if(t.fetchState!==c["a"].Fetching){e.n=2;break}return e.a(2);case 2:return e.p=2,t.fetchState=c["a"].Fetching,r=new FormData,r.append("id",n.id),e.n=3,t.fetchPostCloudApi("setnotifyreadedbyweb",{body:r});case 3:if(o=e.v,Object(l["k"])(o)){e.n=4;break}throw new Error("返回值异常,无法设置消息为已读");case 4:if(o.success){e.n=5;break}throw new Error(o.errMsg);case 5:n.readed=!0,e.n=7;break;case 6:e.p=6,a=e.v,t.showTextTip(a);case 7:return e.p=7,t.fetchState=c["a"].Success,e.f(7);case 8:return e.a(2)}}),e,null,[[2,6,7,8]])})))()}},computed:{visible:function(){return!!this.item},commentSummary:function(){var t,e=null===(t=this.item)||void 0===t?void 0:t.msg;if(!e)return"";var n=e.commentAttachCount,i=e.commentSummary;return n>0&&(i=new Array(n).fill("[图片]").join("")+" "+i),i},title:function(){var t,e,n,i=this.item;if(!i)return"";var r=i.msg;switch(i.type){case a["X"].Artboard_Comment:return"".concat(null===(t=r.commentUser)||void 0===t?void 0:t.nickName," 评论了您的画板“").concat(r.artboardName,"” :");case a["X"].Artboard_Reply:return"".concat(null===(e=r.commentUser)||void 0===e?void 0:e.nickName," 回复了您在画板“").concat(r.artboardName,"”的评论 :");case a["X"].Artboard_Comment_At:case a["X"].Artboard_Reply_At:return"".concat(null===(n=r.commentUser)||void 0===n?void 0:n.nickName," 在画板“").concat(r.artboardName,"”@了您:");default:return null}},unknowNotifyType:function(){var t=this.item;if(!t)return!0;switch(t.type){case a["X"].Artboard_Comment:case a["X"].Artboard_Reply:case a["X"].Artboard_Comment_At:case a["X"].Artboard_Reply_At:return!1;default:return!0}}},props:{item:Object},data:function(){return{fetchState:c["a"].Normal}}},nk=ek,ik=(n("8ed9"),Object(Gr["a"])(nk,Zy,tk,!1,null,"4ee947d6",null)),rk=ik.exports,ok={ALL:-1,NotRead:0,Readed:1},ak={components:{UserNotifyItem:rk,NetworkLoading:Iu},methods:{clickSetAllNotifyReaded:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.notReadList,0!==n.length){e.n=1;break}return t.showTextTip("没有需要标记为已读的消息"),e.a(2);case 1:if(t.btnFetchState!==c["a"].Fetching){e.n=2;break}return e.a(2);case 2:return t.btnFetchState=c["a"].Fetching,e.p=3,r=n[0].id,o=new FormData,o.append("minNotifyId",r),e.n=4,t.fetchPostCloudApi("setnotifyreadedbyweb",{body:o});case 4:if(a=e.v,Object(l["k"])(a)){e.n=5;break}throw new Error("返回值异常,无法设置消息为已读");case 5:if(a.success){e.n=6;break}throw new Error(a.errMsg);case 6:t.list.forEach((function(t){!t.readed&&t.id<=r&&(t.readed=!0)})),t.showTextTip("已将所有未读消息标记为已读"),e.n=8;break;case 7:e.p=7,s=e.v,t.showTextTip(s);case 8:return e.p=8,t.btnFetchState=c["a"].Success,e.f(8);case 9:return e.a(2)}}),e,null,[[3,7,8,9]])})))()},clickAllReadedNotify:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,u,d;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.readedList,0!==n.length){e.n=1;break}return t.showTextTip("没有需要清理的已读消息"),e.a(2);case 1:if(t.btnFetchState!==c["a"].Fetching){e.n=2;break}return e.a(2);case 2:return t.awaitConfirm=!0,e.n=3,t.confirm({text:"即将清空所有已读消息"});case 3:if(e.v){e.n=4;break}return t.awaitConfirm=!1,e.a(2);case 4:return t.awaitConfirm=!1,t.btnFetchState=c["a"].Fetching,e.p=5,r=n[0].id,o=new FormData,o.append("minNotifyId",r),e.n=6,t.fetchPostCloudApi("removenotifiesbyweb",{body:o});case 6:if(a=e.v,Object(l["k"])(a)){e.n=7;break}throw new Error("返回值异常,消息未被清理");case 7:if(a.success){e.n=8;break}throw new Error(a.errMsg);case 8:s=[],u=t.list,u.forEach((function(t,e){t.readed&&t.id<=r&&s.unshift(e)})),s.length===u.length?u.splice(0):s.forEach((function(t){u.splice(t,1)})),t.showTextTip("已清空已读的消息"),e.n=10;break;case 9:e.p=9,d=e.v,t.showTextTip(d);case 10:return e.p=10,t.btnFetchState=c["a"].Success,e.f(10);case 11:return e.a(2)}}),e,null,[[5,9,10,11]])})))()},clickReload:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a,s,l;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(e.listFetchState!==c["a"].Fetching){n.n=1;break}return n.a(2);case 1:return e.errorText="",e.listFetchState=c["a"].Fetching,n.p=2,o=e.list,a=0,!t&&o.length>0&&(a=o[0].id),s=null!==(r=e.curArtboardId)&&void 0!==r?r:0,n.n=3,e.getCloudNotifies(a,s);case 3:e.listFetchState=c["a"].Success,n.n=5;break;case 4:n.p=4,l=n.v,e.listFetchState=c["a"].Error,e.isNotSupportCloudVersion?e.errorText="私有云版本过低(".concat(e.cloudVersion,"),请先升级私有云部署包"):e.errorText=l;case 5:return n.a(2)}}),n,null,[[2,4]])})))()},onListScroll:function(t){this.scrollTop=t.target.scrollTop},getBoxHeight:function(){if(this.visible){var t=this.$refs.list;t&&(this.boxHeight=t.offsetHeight)}},resetTimeFormat:function(){this.showList.forEach((function(t){try{t.dateStr=Object(l["b"])(t.date)}catch(e){t.dateStr=t.date}}))},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.awaitConfirm||(t.notClickClose?t.notClickClose=!1:t.userNotify.visible=!1)}),50)},needReloadOnOpen:function(){var t=this.currentCloudNotify;if(!t)return!0;var e=t.updateTime;return Math.abs(Date.now()-e)>5e3}},computed:{isNotSupportCloudVersion:function(){var t=this.cloudVersion;return t&&Qr.notSupportArtboardComment(t)},FetchState:function(){return c["a"]},btnFetching:function(){return this.btnFetchState===c["a"].Fetching},styleLocation:function(){var t=this.userNotify.location,e={top:9,right:-20};return"top:".concat(t.top+e.top,"px;right:").concat(t.right+e.right,"px;")},EnumNotifyShowType:function(){return ok},userNotify:function(){return this.$store.state.userNotify},visible:function(){return this.userNotify.visible},currentCloudNotify:function(){return this.userNotify.cloudList[this.cloudKey]},list:function(){var t;return(null===(t=this.currentCloudNotify)||void 0===t?void 0:t.list)||[]},readedList:function(){var t=this.list,e=[];return t.forEach((function(t){t.readed&&e.push(t)})),e},notReadList:function(){var t=this.list,e=[];return t.forEach((function(t){t.readed||e.push(t)})),e},showList:function(){switch(this.showType){case ok.Readed:return this.readedList;case ok.NotRead:return this.notReadList;default:return this.list}},renderStartIndex:function(){var t=this.scrollTop,e=this.lineHeight;return Math.max(Math.floor(t/e)-2,0)},renderLength:function(){var t=this.showList,e=this.boxHeight,n=this.lineHeight,i=this.scrollTop;return Math.min(t.length,Math.floor(i/n)+Math.ceil(e/n)+2)},renderList:function(){var t=this.showList;return t.slice(this.renderStartIndex,this.renderLength)},styleListRealHeight:function(){return this.showList.length*this.lineHeight+"px"},styleListOffsetTop:function(){return this.renderStartIndex*this.lineHeight+"px"}},watch:{showType:function(){var t=this;this.$nextTick((function(){var e=t.$refs.list;e&&(e.scrollTop=0),t.resetTimeFormat()}))},visible:function(t){var e=this;t?(this.$nextTick((function(){e.getBoxHeight()})),window.addEventListener("click",this.closeSelf,!0),this.needReloadOnOpen()?this.clickReload():this.resetTimeFormat()):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},data:function(){return{scrollTop:0,boxHeight:0,lineHeight:65,showType:ok.ALL,closeHandle:0,notClickClose:!1,listFetchState:c["a"].Normal,btnFetchState:c["a"].Normal,errorText:"",awaitConfirm:!1}},beforeDestroy:function(){window.removeEventListener("click",this.closeSelf,!0),clearTimeout(this.closeHandle),this.userNotify.visible=!1},mounted:function(){this.getBoxHeight()}},sk=ak,ck=(n("fcb0"),Object(Gr["a"])(sk,Jy,Qy,!1,null,"5aa1dbf4",null)),lk=ck.exports,uk=function(){var t=this,e=t._self._c;return t.notSupportCloudVersion?t._e():e("div",{staticClass:"header-file-version-info"},[e("div",{staticClass:"btn-file-verison",class:{on:t.netdiskFileVerListVisible},attrs:{title:"查看历史版本"},on:{click:function(e){return t.setNetdiskFileVerListVisible(!t.netdiskFileVerListVisible)}}}),e("FileVersionList",{attrs:{visible:t.netdiskFileVerListVisible,readonlyCurrentFolder:t.fileReadOnly,fileInfo:t.fileInfo,curVerId:t.curVerId,fetchState:t.fetchState,errorText:t.errorText},on:{verRemoved:t.verRemoved,clickVerItem:t.clickVerItem,setVisible:t.setNetdiskFileVerListVisible}})],1)},dk=[],hk={components:{FileVersionList:Hh},methods:{setNetdiskFileVerListVisible:function(t){this.$store.commit("netdiskFileVerListVisible",t)},clickVerItem:function(t){if(t){var e=t.verId,n=this.curVerId;if(n!==e){this.fileInfo.curVerId=e;var i=this.getNetdiskFileOnlineViewUrl(t,!0);ur(i)}}},verRemoved:function(t,e){var n;if(e>0){var i=this.fileInfo,r=this.curVerId;if(i){var o=i.file,a=i.historyFiles,s=r===e;if(o.verId===e){var c;if(0===(null!==(c=null===a||void 0===a?void 0:a.length)&&void 0!==c?c:0))return void(this.$store.state.cloud.fileInfo=null);i.file=a[0],a.splice(0,1)}else{var l,u=null!==(l=null===a||void 0===a?void 0:a.find((function(t){return t.verId===e})))&&void 0!==l?l:-1;if(-1===u)return;a.splice(u,1)}i.file.versionCount=1+(null!==(n=null===a||void 0===a?void 0:a.length)&&void 0!==n?n:0),s&&this.clickVerItem(i.file)}}},clickVerRemove:function(t){if(!("number"!==typeof t||isNaN(t)||t<1)){var e=this.curArtboard,n=this.lastVersionId,i=this.mainFile;if(e&&i){var r=n===t,o=e.historyArtboards;if(i.lastVersionId===t){if(0===o.length)return void this.$store.commit("removeArtboard",i.guid);var a=o.splice(0,1)[0];r&&(e.isError=!1,e.isFetching=!1,e.isLoaded=!1,e.loadErrMsg=null),e.artboard=a}else{var s=null===o||void 0===o?void 0:o.findIndex((function(e){var n;return(null!==(n=null===e||void 0===e?void 0:e.lastVersionId)&&void 0!==n?n:e.verId)===t}));if(-1===s)return;o.splice(s,1),i.versionCount=1+o.length}r&&this.setCurArtboardVer(i.lastVersionId)}}}},computed:{fileInfo:function(){var t=this.$store.state.cloud.fileInfo;return t},curVerId:function(){return this.curFileInfo.curVerId},netdiskFileVerListVisible:function(){return this.$store.state.netdiskFileVerListVisible},mainFile:function(){var t;return null===(t=this.fileInfo)||void 0===t?void 0:t.file},lastVersionId:function(){var t,e,n=this.mainFile;return null!==(t=null!==(e=null===n||void 0===n?void 0:n.verId)&&void 0!==e?e:null===n||void 0===n?void 0:n.lastVersionId)&&void 0!==t?t:0},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:return!0}return!1},fileReadOnly:function(){return!this.canChangeFile},notSupportCloudVersion:function(){return Qr.notSupportNetDiskFileVersion(this.cloudVersion)}},data:function(){return{fetchState:c["a"].Success,errorText:null}},created:function(){}},fk=hk,mk=(n("67a8"),Object(Gr["a"])(fk,uk,dk,!1,null,"4dbb8053",null)),vk=mk.exports,pk={components:{HeaderBtnFileVersion:vk,ArtboardVersion:Rm,BtnArtRenderMode:Qv,BtnGoInteraction:zv,PathNav:Wg,UserNotifyButton:qy,UserNotify:lk,ScaleControl:Co,Helper:Wb,UserInfo:Wy,CloudFolderLogs:Rb,BtnUpload:Ev,BtnContainerColor:ym},methods:{setGuideRect:function(){this.setBeginnerGuideRect(a["k"].HelperMenu,"btnHelp",a["j"].TopRight)},clickMultDownArtboard:function(){this.setInArtboardMultDownMode(!0)},clickGoParentFolder:function(){var t=this;setTimeout((function(){Object(c["P"])(t.cloudParentFolder.id)}),100)},clickGoHome:function(){var t=this;setTimeout((function(){t.setCurArtboard(null)}),100)},clickHelper:function(t){this.$store.commit("setHelperVisible",t)}},computed:{canShowUpload:function(){var t=this.inCloudViewerMode,e=this.inArtboardMode,n=this.cloudCurrentFolderId,i=this.userFolderSpecifyMemberAuthority;if(t&&!e&&n>0)switch(i){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:case a["w"].Read:case a["w"].OnlyChildFolderVisit:return!0}return!1},canShowLog:function(){var t=this.inCloudViewerMode,e=this.permission,n=this.cloudFolderNotFound,i=this.userFolderSpecifyMemberAuthority;if(t&&!n&&e)switch(i){case a["w"].Admin:case a["w"].ParentOwner:case a["w"].Owner:case a["w"].ReadWrite:case a["w"].Read:return!0}return!1},helperVisible:function(){return this.$store.state.helper.visible},cloudParentFolderName:function(){var t=this.cloudParentFolder;if(!t)return null;if(0!==t.id)return t.name;var e=this.cloudName;return e||t.name},setVisible:function(){var t=!this.cloudFolderNotFound&&this.permission&&this.documentArtboards.length>0;return t},winRect:function(){return this.$store.state.winRect},resetGuideRectKey:function(){var t=this.setVisible,e=this.canShowLog,n=this.inArtboardMode,i=this.cloudIsLogin,r=this.winRect.width;return"".concat(t,":").concat(e,":").concat(n,":").concat(i,":").concat(r)}},watch:{resetGuideRectKey:function(){this.setGuideRect()}},mounted:function(){this.setGuideRect()}},bk=pk,gk=(n("48a6"),Object(Gr["a"])(bk,fm,mm,!1,null,"2b0a0ab6",null)),wk=gk.exports,yk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"authority",class:{"in-mobile":t.inMobile,include:t.include}},[e("div",{staticClass:"box"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"container"},[e("div",{staticClass:"cloudname"},[t._v(t._s(t.documentName))]),e("div",{staticClass:"text"},[t._v("分享已加密，请输入分享码后访问")]),e("div",{staticClass:"input",class:{focused:t.inputFocused}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],ref:"input",attrs:{type:"text",placeholder:"请输入分享码",maxlength:"6",spellcheck:"false"},domProps:{value:t.code},on:{focus:function(e){t.inputFocused=!0},blur:function(e){t.inputFocused=!1},input:function(e){e.target.composing||(t.code=e.target.value)}}})]),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.onSubmit}},[t._v(" 确定 "),e("input",{attrs:{type:"submit"}})])])])])])])},kk=[],Ck={methods:{onSubmit:function(){var t=this,e=this.code.trim();if(!/^[a-zA-Z\d]{1,6}$/.test(e))return this.showTextTip("分享码不正确,分享码由1-6位的数字或字母组合而成"),void this.$refs.input.focus();var n="".concat(c["d"],"/api/previewer");fetch(n,{method:"post",body:"code=".concat(e,"&folderid=").concat(this.cloudCurrentFolderId),cache:"reload",credentials:"include",headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){e.text().then((function(n){if(200!=e.status)throw n;if(n=JSON.parse(n),Object(l["k"])(n))return n.success?(t.cleanFoldersCache(),void(t.inInteractionMode?t.goCloudFolderInteractionUrl(t.cloudCurrentFolderId,t.curArtboardGuid):window.location.reload())):void t.showTextTip(n.errMsg);t.showTextTip("返回值格式异常")})).catch((function(e){t.showTextTip(e)}))})).catch((function(e){t.showTextTip(e)}))}},data:function(){return{inputFocused:!1,code:""}},props:{include:{type:Boolean,default:!1}}},xk=Ck,Sk=(n("6bd2"),Object(Gr["a"])(xk,yk,kk,!1,null,"9bb8f6de",null)),Tk=Sk.exports,Ok=function(){var t=this,e=t._self._c;return e("section",{staticClass:"error-data",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v(t._s(t.text))]),t.showLoginBtn?e("div",{staticClass:"btns"},[e("div",{staticClass:"button light",on:{click:t.goCloudLogin}},[t._v(t._s(t.cloudIsLogin?"切换账号":"立即登录"))])]):t._e()])])},Ik=[],Ak={props:{text:String,showLoginBtn:Boolean}},Fk=Ak,jk=(n("9b64"),Object(Gr["a"])(Fk,Ok,Ik,!1,null,"36b89cbc",null)),_k=jk.exports,Mk=function(){var t=this,e=t._self._c;return e("section",{staticClass:"p-index",style:{backgroundColor:t.backgroundColor}},[e("ZoomContainer",{attrs:{type:t.EnumScaleType.ArtboardList}}),e("MultArtboardDownload")],1)},Lk=[],Pk={components:{ZoomContainer:Wl,MultArtboardDownload:wh},computed:{backgroundColor:function(){return this.$store.state.artboardDetail.interactionSet.backgroundColor},EnumScaleType:function(){return a["V"]}},created:function(){0}},Dk=Pk,Nk=(n("9e45"),Object(Gr["a"])(Dk,Mk,Lk,!1,null,"7c2a4868",null)),Ek=Nk.exports,Rk=function(){var t=this,e=t._self._c;return e("section",{staticClass:"p-info",style:{backgroundColor:t.backgroundColor}},[e("keep-alive",[e("LeftSide")],1),t.isError?e("div",{staticClass:"error"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v(t._s(t.curArtboard.loadErrMsg))]),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v("重新加载")])])])]):t.isFetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v("正在加载画板详情...")])]):t.isLoaded?[e("ZoomContainer",{attrs:{type:t.EnumScaleType.ArtboardDetail}})]:t._e(),e("keep-alive",[e("RightSide")],1)],2)},Vk=[],Bk=function(){var t=this,e=t._self._c;return e("section",{staticClass:"left-side",class:{on:t.visible}},[e("div",{staticClass:"btn-leftside-visible",class:{on:t.visible},attrs:{title:t.visible?"收起左侧(F3)":"展开左侧(F3)"},on:{click:function(e){return t.setVisible(!t.visible)}}}),e("nav",[e("div",{staticClass:"btn-showart",class:{on:t.showArtboardList},attrs:{title:"切换到画板列表(F1)"},on:{click:function(e){t.showArtboardList=!0,t.setVisible(!0)}}},[t._v("画板")]),e("div",{staticClass:"btn-shownode",class:{on:!t.showArtboardList},attrs:{title:"切换到图层列表(F2)"},on:{click:function(e){t.showArtboardList=!1,t.setVisible(!0)}}},[t._v("图层")])]),e("div",{staticClass:"filter-box"},[t.showArtboardList?[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText.artboard,expression:"searchText.artboard"}],class:{empty:!t.searchText.artboard},attrs:{type:"text",placeholder:"搜索画板名",spellcheck:"false"},domProps:{value:t.searchText.artboard},on:{input:function(e){e.target.composing||t.$set(t.searchText,"artboard",e.target.value)}}}),t.searchText.artboard?e("span",{staticClass:"btn-clear",on:{click:function(e){t.searchText.artboard=""}}}):t._e()]),e("div",{staticClass:"filters"},[t.inCloudMode&&!t.notSupportArtboardStatusVersion?e("div",{staticClass:"filter-item filter-item-dev",class:{on:t.artboardStatusDevFilterOpen},attrs:{title:"筛选标记为待开发的画板"},on:{click:t.clickArtboardStatusDevFilter}}):t._e(),e("div",{staticClass:"filter-item filter-item-slice",class:{on:t.sliceFilterOpen},attrs:{title:"筛选有切图的画板"},on:{click:t.clickSliceFilter}}),t.inCloudMode?e("div",{staticClass:"filter-item filter-item-comment",class:{on:t.commentFilterOpen},attrs:{title:"筛选有评论的画板"},on:{click:t.clickCommentFilter}}):t._e(),t.inCloudMode?e("FolderNavSortMenu",{attrs:{mini:!0}}):t._e()],1)]:t.artboardInComment?t._e():[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText.node,expression:"searchText.node"}],attrs:{type:"text",placeholder:"搜索节点名",spellcheck:"false"},domProps:{value:t.searchText.node},on:{input:function(e){e.target.composing||t.$set(t.searchText,"node",e.target.value)}}}),t.searchText.node?e("span",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:function(e){t.searchText.node=""}}}):t._e()]),e("div",{staticClass:"filters"},[e("div",{staticClass:"filter-item filter-item-slice",class:{on:t.sliceFilterOpen},attrs:{title:"筛选有切图的节点"},on:{click:t.clickSliceFilter}}),t.showArtboardList?t._e():e("div",{staticClass:"filter-item filter-item-interaction",class:{on:t.interactionFilterOpen},attrs:{title:"筛选有原型跳转的节点"},on:{click:t.clickInteractionFilter}})])]],2),e("section",{staticClass:"box"},[!t.showArtboardList&&t.artboardInComment?e("section",{staticClass:"on incomment"},[t._v("评论模式下无法查看标注图层信息")]):t._e(),e("ArtboardList",{attrs:{visible:t.showArtboardList,leftSideVisible:t.visible,list:t.renderDocumentArtboards,renderArtboardList:t.renderArtboardList,sliceFilterOpen:t.sliceFilterOpen,commentFilterOpen:t.commentFilterOpen,artboardStatusDevFilterOpen:t.artboardStatusDevFilterOpen,interactionFilterOpen:t.interactionFilterOpen,searchText:t.searchText.artboard}}),e("section",{ref:"nodeList",staticClass:"nodelist",class:{on:!t.showArtboardList&&!t.artboardInComment},on:{scroll:t.onNodeListScroll,mousewheel:t.onNodeListMouseWheel}},[e("div",{staticClass:"container",class:{"slice-filter":t.sliceFilterOpen||t.nodeInSearch||t.interactionFilterOpen,off:t.nodeListMousewheelTimes>0}},[0===t.nodeList.length?e("div",{staticClass:"empty"},[t._v(t._s(t.emptyNodeListText))]):t._e(),e("div",{staticClass:"brace",style:t.braceStyle},[e("div",{staticClass:"front",style:t.frontStyle},t._l(t.renderList,(function(n){return e("NodeListNew",{key:"".concat(n.index,":").concat(n.node.guid),attrs:{nodeListHeight:t.nodeListHeight,nodeListScrollTop:t.nodeListScrollTop,nodeLineHeight:t.nodeLineHeight,shiftKey:t.shiftKey,sliceFilterOpen:t.sliceFilterOpen,interactionFilterOpen:t.interactionFilterOpen,nodeInSearch:t.nodeInSearch,item:n.node}})})),1)])])])],1)])},Hk=[],Uk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item",class:{hover:t.enterNode===t.item,focused:t.curNode===t.item}},[t.sliceFilterOpen||t.nodeInSearch||t.interactionFilterOpen?t._e():e("div",{staticClass:"prex",class:{first:t.isFirstChild,last:t.isLastChild,"has-child":t.hasChild},style:{width:t.depthWidth}}),e("div",{ref:"$item_name",staticClass:"name",class:{export:t.item.markedForExport},style:{paddingLeft:t.paddingLeft},on:{mouseenter:t.mouseEnterNode,mouseleave:t.mouseLeaveNode,click:t.clickNode}},[t.item.renderTapInteraction?e("span",{staticClass:"interaction-node"}):t._e(),t._v(t._s(t.name))])])},Gk=[],Wk=10,$k={name:"NodeList",methods:{clickNode:function(){var t=this.item;this.inMultDownMode?t.markedForExport&&(t.mlUserSelectDown=!t.mlUserSelectDown):this.setCurNode(t)},mouseLeaveNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(null)},mouseEnterNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(this.item)}},computed:{itemStyle:function(){return{top:this.index*this.nodeLineHeight+"px"}},isFirstChild:function(){var t=this.item;if(t.types.Artboard)return!0;var e=t.parentNode.children;return!!e&&e[0]==t},isLastChild:function(){var t=this.item;if(t.types.Artboard)return!0;var e=t.parentNode.children;return!!e&&e[e.length-1]==t},hasChild:function(){var t=this.item.children;if(!t)return!1;if(0===t.length)return!1;var e=t.find((function(t){return!t.mlIgnoreLeftSide}));return!!e},depthWidth:function(){var t=this.nodeDepthIndex*Wk;return t<0&&(t=0),t+"px"},paddingLeft:function(){var t=this.sliceFilterOpen,e=this.nodeInSearch,n=this.interactionFilterOpen,i=this.nodeDepthIndex,r=t||e||n?0:i*Wk;return r+6+"px"},nodeDepthIndex:function(){return this.item.nodeDepthIndex},name:function(){var t=Object(c["H"])(this.item);return Object(l["j"])(t)?(t=t.trim(),t):this.item.guid}},props:{item:Object,sliceFilterOpen:Boolean,interactionFilterOpen:Boolean,nodeInSearch:Boolean,shiftKey:Boolean,nodeListScrollTop:Number,nodeListHeight:Number,index:Number,nodeLineHeight:Number}},zk=$k,Yk=(n("338f"),Object(Gr["a"])(zk,Uk,Gk,!1,null,"1c1550d3",null)),Xk=Yk.exports,Kk=function(){var t=this,e=t._self._c;return e("section",{ref:"artList",staticClass:"art-list",class:{on:t.visible},on:{scroll:t.onScroll,mousewheel:t.onMouseWheel}},[e("div",{staticClass:"brace",class:{off:t.mousewheelTimes>0},style:{height:t.boxRealHeight}},[e("div",{ref:"front",staticClass:"front",style:{marginTop:t.frontMarginTop}},t._l(t.lazyRenderArtboardList,(function(n,i){return e("ArtboardListItem",{key:"".concat(n.artboard.docGuid,"-").concat(n.artboard.guid),attrs:{guideUsed:i===t.firstFullInViewItemLazyIndex,item:n}})})),1)]),0===t.lazyRenderArtboardList.length?e("div",{staticClass:"empty"},[t._v(t._s(t.emptyListText))]):t._e()])},qk=[],Jk=function(){var t=this,e=t._self._c;return e("section",{ref:"$item",staticClass:"item min",class:{on:t.focused},attrs:{title:t.title},on:{click:function(e){return t.clickArtboard()},contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("div",{staticClass:"img"},[t.imageSrc?e("img",{attrs:{src:t.imageSrc,alt:""},on:{error:t.errPreviewImage}}):t._e(),t.inInteractionMode&&t.artboard.flowStart?e("div",{staticClass:"flow-start"}):t._e()]),e("div",{staticClass:"info"},[e("div",{staticClass:"info-item"},[e("div",{staticClass:"name",domProps:{textContent:t._s(t.artboard.name)}}),t.artboardInDevStatus?e("div",{staticClass:"dev",attrs:{title:"待开发"}}):t._e()]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"date",domProps:{textContent:t._s(t.dateStr)}}),e("div",{staticClass:"total"},[!t.inInteractionMode&&t.exportNodeCount>0?e("div",{staticClass:"slice-total"},[t._v(t._s(t.exportNodeCount))]):t._e(),t.inCloudMode&&!t.inInteractionMode&&t.commentReplyCount&&"0"!==t.commentReplyCount?e("div",{staticClass:"comment-total"},[t._v(t._s(t.commentReplyCount))]):t._e()])])])])},Qk=[],Zk={methods:{errPreviewImage:function(){this.userMiniPreviewImg&&(this.userMiniPreviewImg=!1)},onContextmenu:function(t){var e=this,n=t.pageX,i=t.pageY,r=this.item;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:i,artboard:r})}))},clickArtboard:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(!t.inCommentDrawing){e.n=2;break}return e.n=1,t.confirm({text:"正在编辑画板截图,是否清理截图信息并切换画板?"});case 1:if(e.v){e.n=2;break}return e.a(2);case 2:t.setCurArtboard(t.item);case 3:return e.a(2)}}),e)})))()},checkImage:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.pathPreviewMini,r=t.artboard,o=t.artboardReviewImg,!n){e.n=1;break}return t.imageSrc=t.combineResourcePath(n),e.a(2);case 1:if(t.inCloudMode){e.n=2;break}return t.imageSrc=t.combineResourcePath(o),e.a(2);case 2:if(e.p=2,s=r.pathPreviewBlob,s){e.n=5;break}return e.n=3,Oa(o);case 3:if(s=e.v,"string"!==typeof s){e.n=4;break}return r.pathPreviewMini=s,t.imageSrc=t.combineResourcePath(s),e.a(2);case 4:r.pathPreviewBlob=s;case 5:a=URL.createObjectURL(s),t.imageSrc=a,e.n=7;break;case 6:return e.p=6,e.v,t.userMiniPreviewImg=!1,r.pathPreviewMini=o,t.imageSrc=t.combineResourcePath(o),e.a(2);case 7:return e.p=7,a&&t.$nextTick((function(){setTimeout((function(){try{URL.revokeObjectURL(a)}catch(t){}}),600)})),e.f(7);case 8:return e.a(2)}}),e,null,[[2,6,7,8]])})))()}},watch:{artboardReviewImg:function(t){var e=this;t&&this.$nextTick((function(){e.checkImage()}))}},computed:{artboardInDevStatus:function(){var t=this.item,e=this.inCloudViewerMode;return e&&t.customStatus===a["i"].Dev},dateStr:function(){var t=this.artboard,e=this.inCloudMode;return e?Object(l["b"])(t.updateTimeTimes,this.webViewStateTimes):""},commentReplyCount:function(){var t=this.artboard;if(!t)return"";var e=t.comments+t.replies;return e>999?"99+":e>0?e:""},exportNodeCount:function(){if(this.inCloudMode)return this.artboard.resNodeCount;var t=this.item.exportNodes;return t.length},artboardReviewImg:function(){var t=this.artboard,e=this.userMiniPreviewImg?t.artboardPreviewThumbPng:t.artboardPreviewPng;return this.inCloudMode?e:"".concat(e,"?").concat(t.mlOutputTime)},focused:function(){return this.curArtboard===this.item},artboard:function(){return this.item.artboard},title:function(){return di(this.artboard)}},mounted:function(){this.checkImage()},data:function(){return{userMiniPreviewImg:!0,imageSrc:null}},props:{item:Object,searchText:String}},tC=Zk,eC=(n("0c95"),Object(Gr["a"])(tC,Jk,Qk,!1,null,"1cf6d0aa",null)),nC=eC.exports,iC={methods:{setGuideRect:function(){var t=this.guideItemRect,e=this.inCloudViewerMode;e&&this.setBeginnerGuideRect(a["k"].ArtboardDevMode,t)},onMouseWheel:function(t){var e;this.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onScroll:function(t){this.scrollTop=t.target.scrollTop},onResize:function(){var t=this.$refs.artList;if(t){this.boxHeight=t.offsetHeight;var e=t.getBoundingClientRect(),n=e.x,i=e.y,r=e.width,o=e.height;n=Math.floor(n),i=Math.floor(i),r=Math.ceil(r),o=Math.ceil(o),this.boxBoundingClientRect={x:n,y:i,width:r,height:o}}},goFocusItem:function(){var t=this.curArtboard;if(t){var e=this.$refs.artList;if(e){var n=this.renderArtboardList.findIndex((function(e){return e===t}));if(-1!==n){var i=this.itemHeight*n;i-=Math.floor((this.boxHeight-this.itemHeight)/2),e.scrollTop=i}}}}},props:{visible:Boolean,list:Array,renderArtboardList:Array,sliceFilterOpen:Boolean,commentFilterOpen:Boolean,interactionFilterOpen:Boolean,artboardStatusDevFilterOpen:Boolean,searchText:String,leftSideVisible:Boolean},components:{ArtboardListItem:nC},watch:{leftSideVisible:function(t){var e=this;t&&(this.leftSideVisibleAnimate=!0,setTimeout((function(){e.leftSideVisibleAnimate=!1,e.onResize()}),200))},resetGuideRectKey:function(){this.setGuideRect()},cloudListSortSortType:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},cloudListSortOrderDesc:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},mousewheelTimes:function(t){var e=this;clearTimeout(this.mousewheelHandle),t&&(this.mousewheelHandle=setTimeout((function(){e.mousewheelTimes=!1}),200))},filterDocumentGuid:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},sliceFilterOpen:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},commentFilterOpen:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},artboardStatusDevFilterOpen:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},curArtboard:function(){this.goFocusItem()}},computed:{cloudListSort:function(){return this.$store.state.cloudListSort},cloudListSortSortType:function(){return this.cloudListSort.sortType},cloudListSortOrderDesc:function(){return this.cloudListSort.orderDesc},emptyListText:function(){return"未找到相关画板"},lazyRenderArtboardList:function(){var t=this.renderArtboardList,e=this.lazyStartIndex,n=this.lazyLength;return t.slice(e,e+n)},lazyStartIndex:function(){var t=this.scrollTop,e=this.itemHeight,n=this.renderArtboardList.length-Math.floor(this.boxHeight/this.itemHeight);return Math.max(0,Math.min(n,Math.floor(t/e)-1))},lazyLength:function(){var t=this.boxHeight,e=this.itemHeight,n=this.renderArtboardList,i=this.lazyStartIndex;return Math.min(n.length-i,Math.ceil(t/e)+2)},frontMarginTop:function(){return this.frontMarginTopNumber+"px"},frontMarginTopNumber:function(){return this.lazyStartIndex*this.itemHeight},boxRealHeight:function(){return this.itemHeight*this.renderArtboardList.length+"px"},itemHeight:function(){return 68},firstFullInViewItemLazyIndex:function(){var t=this.scrollTop,e=this.itemHeight,n=this.lazyStartIndex,i=this.renderArtboardList,r=Math.ceil(t/e)-n,o=i.length-1;return r=Math.min(r,o),r},guideItemRect:function(){var t=this.inCloudViewerMode,e=this.visible,n=this.leftSideVisible,i=this.leftSideVisibleAnimate,r=this.firstFullInViewItemLazyIndex,o=this.frontMarginTopNumber,s=this.itemHeight,c=this.boxBoundingClientRect,l=this.scrollTop,u={x:0,y:0,width:0,height:0,direction:a["j"].Left};if(!e||!t||!n||i)return u;var d=null!==c&&void 0!==c?c:{x:0,y:0,width:0,height:0},h=d.x,f=d.y,m=d.width;return m>0&&(u.x=h,u.y=f+o-l+r*s,u.width=m,u.height=s),u},resetGuideRectKey:function(){var t=this.guideItemRect;return"".concat(t.x,":").concat(t.y,":").concat(t.width,":").concat(t.height)}},data:function(){return{scrollTop:0,boxHeight:0,boxBoundingClientRect:null,mousewheelTimes:0,mousewheelHandle:0,leftSideVisibleAnimate:!1}},mounted:function(){var t,e,n=this;this.scrollTop=null!==(t=null===(e=this.$refs.artList)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0,this.setGuideRect(),this.onResize(),window.addEventListener("resize",this.onResize),this.$nextTick((function(){n.goFocusItem()}))},beforeDestroy:function(){this.setGuideRect(),window.removeEventListener("resize",this.onResize),clearTimeout(this.mousewheelHandle)}},rC=iC,oC=(n("6e1d"),Object(Gr["a"])(rC,Kk,qk,!1,null,"36270453",null)),aC=oC.exports,sC={components:{ArtboardList:aC,NodeListNew:Xk,FolderNavSortMenu:Mf},methods:{onNodeListResize:function(){var t=this.$refs.nodeList;t&&(this.nodeListHeight=t.offsetHeight)},onNodeListMouseWheel:function(t){var e;this.nodeListMousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onNodeListScroll:function(){var t=this.$refs.nodeList;t&&(this.nodeListScrollTop=t.scrollTop)},clickSliceFilter:function(){this.sliceFilterOpen=!this.sliceFilterOpen},clickCommentFilter:function(){this.commentFilterOpen=!this.commentFilterOpen},clickArtboardStatusDevFilter:function(){this.artboardStatusDevFilterOpen=!this.artboardStatusDevFilterOpen},clickInteractionFilter:function(){this.interactionFilterOpen=!this.interactionFilterOpen},quickKeyShift:function(t){this.shiftKey=t.shiftKey},quickKey:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a,s,c,l;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:e.quickKeyShift(t),r=t.keyCode||t.which,l=r,n.n=112===l||113===l?1:114===l?2:38===l||40===l?3:14;break;case 1:return e.showArtboardList=112===r,e.setVisible(!0),t.preventDefault(),n.a(3,14);case 2:return e.setVisible(!e.visible),t.preventDefault(),n.a(3,14);case 3:if(!e.keydownConfirming){n.n=4;break}return n.a(2);case 4:if(!e.imageViewer.visible){n.n=5;break}return n.a(2);case 5:if(o=38===r?-1:1,a=t.ctrlKey||t.metaKey,a){n.n=6;break}return n.a(3,14);case 6:if(s=e.renderArtboardList,0!==s.length){n.n=7;break}return e.showTextTip(1===o?"已经到达最后一个画板":"已经到达第一个画板"),n.a(2);case 7:if(c=s.findIndex((function(t){return e.curArtboard===t})),-1===c?c=0:c+=o,!(c<0)){n.n=8;break}return e.showTextTip("已经到达第一个画板"),n.a(2);case 8:if(!(c>=s.length)){n.n=9;break}return e.showTextTip("已经到达最后一个画板"),n.a(2);case 9:if(!e.inCommentDrawing){n.n=13;break}return e.keydownConfirming=!0,n.p=10,n.n=11,e.confirm({text:"正在编辑画板截图,是否清理截图信息并切换画板?"});case 11:if(n.v){n.n=12;break}return n.a(2);case 12:return n.p=12,e.keydownConfirming=!1,n.f(12);case 13:return e.setCurArtboard(s[c]),n.a(3,14);case 14:return n.a(2)}}),n,null,[[10,,12,13]])})))()},getArtboardExportNodeCount:function(t){if(this.inCloudMode)return t.artboard.resNodeCount;var e=t.exportNodes;return e.length},setVisible:function(t){this.$store.commit("leftSideVisible",t)}},computed:{notSupportArtboardStatusVersion:function(){return Qr.notSupportAiPrompt(this.cloudVersion)},curArtboardRemoved:function(){var t;return!(null===(t=this.curArtboard)||void 0===t||!t.removed)},emptyNodeListText:function(){var t=this.sliceFilterOpen,e=this.interactionFilterOpen;return"未找到".concat(t&&e?"包含切图和原型的":t?"包含切图的":e?"包含原型的":"相关","图层信息")},imageViewer:function(){return this.$store.state.imageViewer},cloudListSort:function(){return this.$store.state.cloudListSort},sortRenderDocumentArtboards:function(){var t=this.renderDocumentArtboards,e=this.cloudListSort;return t=Object(u["a"])(t),qn(t,"updateTimeTimes",a["m"].Artboard,e),t},renderArtboardList:function(){var t=this,e=this.commentFilterOpen,n=this.artboardStatusDevFilterOpen,i=this.artboardSearchText,r=this.sliceFilterOpen,o=this.sortRenderDocumentArtboards,s=""!==i;return o.filter((function(o){if(!o||!o.artboard)return!1;if(n&&o.customStatus!==a["i"].Dev)return!1;if(e){var c=o.artboard.comments+o.artboard.replies;if(!(c>0))return!1}if(r&&0===t.getArtboardExportNodeCount(o))return!1;if(s){var l=o.artboard.name;if(!l)return!1;if(-1===l.toLowerCase().indexOf(i))return!1}return!0}))},artboardSearchText:function(){return this.searchText.artboard.toLowerCase()},nodeInSearch:function(){return""!==this.searchText.node},frontStyle:function(){var t=this.renderList,e=0;if(t.length>0){var n=t[0].index;e=n*this.nodeLineHeight}return{marginTop:e+"px"}},braceStyle:function(){return{height:this.nodeList.length*this.nodeLineHeight+"px"}},renderList:function(){var t=this.nodeList,e=[],n=new w,i=new w,r=this.nodeLineHeight,o=this.preloadCount*r,a=this.nodeListHeight,s=this.nodeListScrollTop;return i.set(0,s-o,100,a+2*o),t.forEach((function(t,o){n.set(0,o*r,100,r),O(n,i)&&e.push({node:t,index:o})})),e},interactionNodeList:function(){var t=this.curArtboard;if(!t)return[];var e=t.childs;return e&&0!==e.length?e.filter((function(t){return!!t.renderTapInteraction})):[]},nodeList:function(){var t,e=this.sliceFilterOpen,n=this.curArtboard,i=this.interactionFilterOpen;t=e||i?n.childs.filter((function(t){return!(e&&!t.markedForExport)&&!(i&&!t.renderTapInteraction)})):n.childs;var r=[],o=this.nodeInSearch,a=o?this.searchText.node.toLowerCase():"";return t.forEach((function(t){if(t.visible&&!t.mlIgnoreLeftSide){if(o){var e=t.name;if(!e)return;if(-1==e.toLowerCase().indexOf(a))return}r.push(t)}})),r},visible:function(){return this.$store.state.artboardDetail.leftSideVisible}},data:function(){return{curArtboardRemovedTipId:0,keydownConfirming:!1,preloadCount:2,nodeLineHeight:24,nodeListScrollTop:0,nodeListMousewheelTimes:0,nodeListMousewheelHandle:0,nodeListHeight:0,shiftKey:!1,showArtboardList:"1"===Object(c["F"])("showArtboardList",!1),sliceFilterOpen:!1,commentFilterOpen:!1,interactionFilterOpen:!1,artboardStatusDevFilterOpen:!1,searchText:{artboard:"",node:""}}},watch:{showArtboardList:function(t){t?Object(c["jb"])("showArtboardList","1"):Object(c["eb"])("showArtboardList")},curArtboardRemoved:function(t){var e=this;if(t){var n,i=null===(n=this.curArtboard)||void 0===n?void 0:n.artboard;if(!i)return;var r=this.curArtboardRemovedTipId;if(r===i.cid)return;this.curArtboardRemovedTipId=i.cid,this.alert({text:"当前画板「".concat(i.name,"」已经被删除"),title:"提示",yesText:"返回列表"}).then((function(){e.curArtboardRemovedTipId=0,e.setCurArtboard(null)}))}},nodeListMousewheelTimes:function(t){var e=this;clearTimeout(this.nodeListMousewheelHandle),t>0&&(this.nodeListMousewheelHandle=setTimeout((function(){e.nodeListMousewheelTimes=0}),200))},"editComment.drawing":function(t){t&&this.setVisible(!1)},curNode:function(t,e){if(t){var n=this.nodeList.findIndex((function(e){return t===e}));if(-1!==n){var i=this.nodeListScrollTop,r=this.nodeLineHeight,o=this.nodeListHeight,a=i,s=a+o-r-r;a+=r;var c=n*r;if(c>a&&c<s)return;var l=c-o/2,u=this.$refs.nodeList;u&&u.scrollTo({top:l,behavior:null===e?"auto":"smooth"})}}},curArtboard:function(t){t&&(this.onNodeListResize(),this.onNodeListScroll())}},mounted:function(){this.onNodeListResize(),this.onNodeListScroll()},created:function(){window.addEventListener("keydown",this.quickKey),window.addEventListener("keyup",this.quickKeyShift),window.addEventListener("resize",this.onNodeListResize)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey),window.removeEventListener("keyup",this.quickKeyShift),window.removeEventListener("resize",this.onNodeListResize),clearTimeout(this.nodeListMousewheelHandle)}},cC=sC,lC=(n("e55b"),Object(Gr["a"])(cC,Bk,Hk,!1,null,"5bbc4ac3",null)),uC=lC.exports,dC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"rightside",class:{on:t.visible}},[e("nav",[e("div",{class:{on:t.propertyVisible},on:{click:t.clickNavProperty}},[t._v("标注")]),e("div",{class:{on:t.multDownloadVisible},on:{click:t.clickNavSlice}},[t._v("切图"),e("span",{staticClass:"count",domProps:{textContent:t._s(t.multDownloadCount)}})]),e("div",{class:{on:t.commentVisible},on:{click:t.clickNavComment}},[t._v("评论"),e("span",{staticClass:"count",domProps:{textContent:t._s(t.commentCount)}})])]),e("div",{staticClass:"container"},[e("Properties"),e("MultDownload"),e("CommentMain")],1)])},hC=[],fC=function(){var t=this,e=t._self._c;return t.hasValue?e("section",{staticClass:"node-properties"},[e("Header"),e("main",{class:{export:t.curNode.markedForExport}},[e("PropertyInfo",{attrs:{nodeStyle:t.nodeStyle}}),t.nodeStyle.groupLayout?e("PropertyGroupLayout",{attrs:{nodeStyle:t.nodeStyle,isFigmaArtboard:t.isFigmaArtboard}}):t.nodeStyle.groupGrid?e("PropertyGroupGrid",{attrs:{nodeStyle:t.nodeStyle}}):t._e(),t.selfLayoutItemsVisible?e("PropertyGroupLayoutWithParent",{attrs:{showTitle:!t.nodeStyle.groupLayout&&!t.nodeStyle.groupGrid,nodeStyle:t.nodeStyle}}):t._e(),!t.curNode.types.Text&&t.nodeStyle.fill?e("PropertyFill",{attrs:{nodeStyle:t.nodeStyle}}):t._e(),t.curNode.types.GraphicNode?e("PropertiesGraphicNode",{attrs:{nodeStyle:t.nodeStyle}}):t._e(),t.curNode.types.Text?e("PropertyText",{attrs:{sketchGroupFillColor:t.sketchGroupFillColor,nodeStyle:t.nodeStyle}}):t._e(),t.curNode.markedForExport?e("PropertyExport"):t._e(),t.cssVisible?e("PropertyCss",{attrs:{sketchGroupFillColor:t.sketchGroupFillColor,nodeStyle:t.nodeStyle}}):t._e()],1)],1):t._e()},mC=[],vC=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box"},[t.showTitle?e("h5",{staticClass:"fill-title"},[e("span",{staticClass:"i-text icon-stack"},[t._v("布局")])]):t._e(),e("PropertyGroupLayoutPosition",{attrs:{nodeStyle:t.nodeStyle}}),e("PropertyGroupLayoutJustifyAlignSelf",{attrs:{nodeStyle:t.nodeStyle}}),e("PropertyGroupLayoutGrow",{attrs:{nodeStyle:t.nodeStyle}}),e("PropertyGroupLayoutGridSpan",{attrs:{nodeStyle:t.nodeStyle}})],1)},pC=[],bC=function(){var t=this,e=t._self._c;return null!=t.grow?e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"按比例分配剩余空间 / flex-grow"}},[t._v("拉伸比例")]),e("dd",[e("PropertyShowValue",{attrs:{cls:{bt:1},value:t.grow,title:""}}),e("div",{staticClass:"inp empty m2"})],1)]):t._e()},gC=[],wC=function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"inp",class:e.cls,on:{click:e.clickCopy}},[n("span",{attrs:{title:null!==(t=e.title)&&void 0!==t?t:e.value},domProps:{textContent:e._s(e.value)}})])},yC=[],kC={methods:{clickCopy:function(t){if(!1!==this.doNotAutoCopy){var e=this.copyValue,n=this.value,i=null!=e;i&&(n=e);var r=i?Object(c["p"])(n):Object(c["o"])(n);i&&this.selectElement(t.target),r?this.showTextTip("已复制文本: ".concat(n),2):this.showTextTip("复制到剪切板失败",2)}},selectElement:function(t){if(t)try{if(window.getSelection){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}catch(i){}}},props:{value:null,title:{type:String,default:null},cls:Object,copyValue:null,doNotAutoCopy:{type:Boolean,default:!0}}},CC=kC,xC=Object(Gr["a"])(CC,wC,yC,!1,null,null,null),SC=xC.exports,TC={components:{PropertyShowValue:SC},computed:{grow:function(){var t=this.nodeStyle.layoutGrow;return"number"!==typeof t||0===t?null:t}},props:{nodeStyle:Object}},OC=TC,IC=Object(Gr["a"])(OC,bC,gC,!1,null,null,null),AC=IC.exports,FC=function(){var t=this,e=t._self._c;return null!=t.position?e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"当前节点已脱离父图层的自动布局流 / position"}},[t._v("脱离布局")]),e("dd",[e("PropertyShowValue",{attrs:{cls:{bt:1},title:t.position.title,value:t.position.text}}),e("div",{staticClass:"inp empty m2"})],1)]):t._e()},jC=[],_C={components:{PropertyShowValue:SC},computed:{position:function(){var t=this.nodeStyle.position;if(!a["D"].needShowProperty(t))return null;var e=a["D"].getCss(t);return e?{text:e.value,title:e.textCN}:null}},props:{nodeStyle:Object}},MC=_C,LC=Object(Gr["a"])(MC,FC,jC,!1,null,null,null),PC=LC.exports,DC=function(){var t=this,e=t._self._c;return t.visible?e("dl",{staticClass:"item in-swatch"},[e("dt",[t._v("自身对齐")]),e("dd",{staticClass:"use-desc"},[t.justifySelf?e("PropertyShowValue",{attrs:{title:t.justifySelf.title,value:t.justifySelf.text}}):t._e(),t.alignSelf?e("PropertyShowValue",{class:{m2:null!=t.justifySelf},attrs:{title:t.alignSelf.title,value:t.alignSelf.text}}):null==t.justifySelf||null==t.alignSelf?e("div",{staticClass:"inp empty m2"}):t._e(),e("div",{staticClass:"desc-text"},[null!=t.justifySelf?e("i",[t._v("水平")]):t._e(),null!=t.alignSelf?e("i",[t._v("垂直")]):t._e()])],1)]):t._e()},NC=[],EC={components:{PropertyShowValue:SC},computed:{visible:function(){return null!=this.justifySelf||null!=this.alignSelf},alignSelf:function(){var t=this.nodeStyle.alignSelf;if(!a["z"].needShowProperty(t))return null;var e=a["z"].getCss(t);return e?{text:e.text,title:e.textCN}:null},justifySelf:function(){var t=this.nodeStyle.justifySelf;if(!a["C"].needShowProperty(t))return null;var e=a["C"].getCss(t);return e?{text:e.text,title:e.textCN}:null}},props:{nodeStyle:Object}},RC=EC,VC=Object(Gr["a"])(RC,DC,NC,!1,null,null,null),BC=VC.exports,HC=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"prop-box"},[null!=t.gridRow?e("dl",{staticClass:"item in-swatch grid-from-to"},[e("dt",{attrs:{title:"grid-row"}},[t._v("Row")]),e("dd",{staticClass:"use-desc"},[e("PropertyShowValue",{attrs:{value:t.gridRow.index,title:"索引：".concat(t.gridRow.index,"（从0递增）")}}),e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.gridRow.span,title:"跨度 ".concat(t.gridRow.span)}}),t._m(0)],1)]):t._e(),null!=t.gridColumn?e("dl",{staticClass:"item in-swatch grid-from-to"},[e("dt",{attrs:{title:"grid-column"}},[t._v("Column")]),e("dd",{staticClass:"use-desc"},[e("PropertyShowValue",{attrs:{value:t.gridColumn.index,title:"索引：".concat(t.gridColumn.index,"（从0递增）")}}),e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.gridColumn.span,title:"跨度 ".concat(t.gridColumn.span)}}),t._m(1)],1)]):t._e()]):t._e()},UC=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"desc-text"},[e("i",{attrs:{title:"index从0开始递增"}},[t._v("index")]),e("i",[t._v("span")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"desc-text"},[e("i",{attrs:{title:"index从0开始递增"}},[t._v("index")]),e("i",[t._v("span")])])}],GC={components:{PropertyShowValue:SC},computed:{visible:function(){return null!=this.gridRow||null!==this.gridRow},gridRow:function(){return this.nodeStyle.gridRow},gridColumn:function(){return this.nodeStyle.gridColumn},position:function(){var t=this.nodeStyle.position;if(!a["D"].needShowProperty(t))return null;var e=a["D"].getCss(t);return e?{text:e.value,title:e.textCN}:null}},props:{nodeStyle:Object}},WC=GC,$C=(n("098a"),Object(Gr["a"])(WC,HC,UC,!1,null,"f0c2cdb4",null)),zC=$C.exports,YC={components:{PropertyGroupLayoutGridSpan:zC,PropertyGroupLayoutJustifyAlignSelf:BC,PropertyGroupLayoutPosition:PC,PropertyGroupLayoutGrow:AC},props:{nodeStyle:Object,showTitle:Boolean}},XC=YC,KC=Object(Gr["a"])(XC,vC,pC,!1,null,null,null),qC=KC.exports,JC=function(){var t=this,e=t._self._c;return e("div",[t.nodeStyle.borders.length+t.nodeStyle.textStrokeStyles.length>0?[t._m(0),t.nodeStyle.strokeSN?[e("PropertyShowStyleName",{attrs:{title:"描边样式",styleName:t.nodeStyle.strokeSN}}),e("div",{staticClass:"prop-line"})]:t._e(),t._l(t.nodeStyle.borders,(function(t,n){return e("PropertyStrokeItem",{key:"border-".concat(n),attrs:{typeName:"边框",index:n,stroke:t}})})),t._l(t.nodeStyle.textStrokeStyles,(function(n,i){return e("PropertyStrokeItem",{key:"text-stroke-".concat(i),attrs:{typeName:"描边",index:i+t.nodeStyle.borders.length,stroke:n}})}))]:t._e(),e("PropertyEffect",{attrs:{nodeStyle:t.nodeStyle}})],2)},QC=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-stroke"},[t._v("描边")])])}],ZC=function(){var t=this,e=t._self._c;return t.styleName?e("dl",{staticClass:"item mult_min"},[e("dt",{domProps:{textContent:t._s(t.title)}}),e("dd",[e("PropertyShowValue",{attrs:{cls:{multiple_min:1},value:t.styleName}})],1)]):t._e()},tx=[],ex={components:{PropertyShowValue:SC},props:{styleName:String,title:String}},nx=ex,ix=Object(Gr["a"])(nx,ZC,tx,!1,null,null,null),rx=ix.exports,ox=function(){var t=this,e=t._self._c;return t.stroke?e("section",{staticClass:"prop-box"},[t.index>0?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("位置")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.strokeName}}),t.stroke.widths?t._e():e("div",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("粗细")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.stroke.widths||t.stroke.width}}),t.stroke.widths?t._e():e("div",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("线条类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.stroke.style}}),t.stroke.customDashes?t._e():e("div",{staticClass:"inp empty"})],1)]),e("PropertyColor",{attrs:{fill:t.stroke}})],1):t._e()},ax=[],sx=function(){var t=this,e=t._self._c;return t.fill.type===t.EnumFillShowType.FillColor?e("PropertyShowColor",{attrs:{name:t.solidName,value:t.fill.color,"swatch-value":t.fill.swatch}}):t.fill.type===t.EnumFillShowType.LinearGradientFill?e("div",[e("dl",{staticClass:"item",class:{opa:t.opacityMode}},[e("dt",{domProps:{textContent:t._s("".concat(t.gradientInfo.name).concat(t.subName))}}),e("dd",[e("PropertyShowValue",{attrs:{value:"linear"}}),e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.canvasAngle,title:"起点和终点的角度为沿水平右侧方向顺时针旋转: ".concat(t.canvasAngle)}})],1)]),t.linearEndPoints?[e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("起点")]),e("span",{staticClass:"loc-name"},[t._v("X1")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.x1,copyValue:t.linearEndPoints.decimal_x1}}),e("span",{staticClass:"loc-name"},[t._v("Y1")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.y1,copyValue:t.linearEndPoints.decimal_y1,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("终点")]),e("span",{staticClass:"loc-name"},[t._v("X2")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.x2,copyValue:t.linearEndPoints.decimal_x2}}),e("span",{staticClass:"loc-name"},[t._v("Y2")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.y2,copyValue:t.linearEndPoints.decimal_y2,cls:{m2:1}}})],1)])]:t._e(),e("ul",{staticClass:"fill-list",class:{"last-has-swatch":t.gradientFillLastHasSwatch}},t._l(t.fill.colorStops,(function(n,i){return e("li",{key:"line-colorStop-".concat(i)},[e("div",{staticClass:"title",on:{click:function(e){return t.clickCopy(n.stop,!0)}}},[t._v(t._s(n.stop))]),e("PropertyShowColor",{attrs:{name:"",value:n.color,"swatch-value":n.swatch}})],1)})),0),t.gradientSwatch?e("dl",{staticClass:"item"},[e("dt",[t._v("渐变变量")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.gradientSwatch}})],1)]):t._e()],2):t.fill.type===t.EnumFillShowType.RadialGradientFill||t.fill.type===t.EnumFillShowType.AngularGradientFill||t.fill.type===t.EnumFillShowType.DiamondGradientFill?e("div",[e("dl",{staticClass:"item",class:{opa:t.opacityMode}},[e("dt",{domProps:{textContent:t._s("".concat(t.gradientInfo.name).concat(t.subName))}}),e("dd",[e("PropertyShowValue",{attrs:{value:t.gradientInfo.className}}),e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.canvasAngle,title:"沿水平右侧方向顺时针旋转: ".concat(t.canvasAngle)}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("圆心")]),e("span",{staticClass:"loc-name"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.startX,copyValue:t.ellipseEndPoints.decimal_startX}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.startY,copyValue:t.ellipseEndPoints.decimal_startY,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("半径")]),e("span",{staticClass:"loc-name"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.scaleX,copyValue:t.ellipseEndPoints.decimal_scaleX}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.scaleY,copyValue:t.ellipseEndPoints.decimal_scaleY,cls:{m2:1}}})],1)]),e("ul",{staticClass:"fill-list",class:{"last-has-swatch":t.gradientFillLastHasSwatch}},t._l(t.fill.colorStops,(function(n,i){return e("li",{key:"radial-colorStop-".concat(i)},[e("div",{staticClass:"title",on:{click:function(e){return t.clickCopy(n.stop,!0)}}},[t._v(t._s(n.stop))]),e("PropertyShowColor",{attrs:{name:"",value:n.color,"swatch-value":n.swatch}})],1)})),0),t.gradientSwatch?e("dl",{staticClass:"item"},[e("dt",[t._v("渐变变量")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.gradientSwatch}})],1)]):t._e()]):t._e()},cx=[],lx={computed:{colorTypes:function(){return this.$store.state.setting.color.items},currentColorType:function(){return this.colorTypes[this.$store.state.setting.color.current]},currentColorTypeIndex:function(){return this.$store.state.setting.color.current}},methods:{getSwatch:function(t){var e;if(null==t)return null;if(!this.inCloudMode)return null;var n=null===(e=this.curArtboard)||void 0===e?void 0:e.artboard.swatches;if(!n)return null;var i=n[t];if(!Object(l["k"])(i))return null;var r=i.doc,o=i.lib;return Object(l["i"])(r)&&r.length>0?r[r.length-1]:Object(l["i"])(o)&&o.length>0?o[o.length-1]:null},setSettingColor:function(t){this.$store.commit("setSettingColor",t)},getColorRGBAValue:function(t){return V(t)},getCssShowColor:function(t,e,n){var i=V(t);return null!==n&&void 0!==n||(n=this.getSwatch(i.hexa)),t=1===i.opacity?G(i).value:i.value,{value:t,swatch:n,name:e}},getColorValue:function(t){var e=this.getColorRGBAValue(t),n=!1,i=this.currentColorType;switch(i){case"hex":e=G(e),n=!0;break;case"ahex":e=W(e),n=!0;break;case"hexa":e=$(e),n=!0;break;case"hsla":e=z(e);break}return e.title=n?"".concat(e.value," (").concat(i,")"):e.value,e}}},ux=function(){var t=this,e=t._self._c;return e("dl",{staticClass:"item",class:{"in-swatch":t.hasSwatch}},[t.name?e("dt",[t._v(t._s(t.name))]):t._e(),e("dd",[e("div",{staticClass:"container"},[e("div",{staticClass:"color"},[e("i",{attrs:{title:"".concat(t.showValue.title,"\n-----------------------------------------------------\n鼠标左键 切换颜色值格式, 右键呼出颜色值格式菜单")},on:{contextmenu:function(e){return e.preventDefault(),t.showColorSelect.apply(null,arguments)},click:t.clickColorTypeNext}},[e("span",{style:{backgroundColor:t.rgba.value}})]),e("span",{staticClass:"inp",class:[this.currentColorType],on:{click:function(e){return t.clickCopy(t.showValue.value)}}},[e("span",{attrs:{title:t.showValue.title},domProps:{textContent:t._s(t.showValue.value)}})])]),"hex"===this.currentColorType?e("div",{staticClass:"inp opacity",on:{click:function(e){return t.clickCopy(t.opacity)}}},[e("span",{staticClass:"opacity",attrs:{title:t.opacity},domProps:{textContent:t._s(t.opacity)}})]):t._e(),t.colors.visible?e("ul",{staticClass:"colors"},t._l(t.colorTypes,(function(n,i){return e("li",{key:n,class:{on:t.currentColorTypeIndex===i},on:{click:function(e){return t.onColorSelectChanged(i)}}},[t._v(t._s(n))])})),0):t._e()]),t.hasSwatch?e("div",{staticClass:"container"},[e("div",{staticClass:"swatch",attrs:{title:"颜色变量: ".concat(t.swatch)}},[e("span",{staticClass:"swatch-text",on:{click:function(e){return t.clickCopy(t.swatch,!0)}}},[t._v(t._s(t.swatch))])])]):t._e()])])},dx=[],hx={props:{value:null,name:String,nonSwatch:{type:Boolean,default:!1},swatchValue:{type:String,default:void 0}},methods:{clickCopy:function(t,e){(e?Object(c["p"])(t):Object(c["o"])(t))?this.showTextTip("已复制文本: ".concat(t),2):this.showTextTip("复制到剪切板失败",2)},showColorSelect:function(){this.colors.visible=!0},clickColorTypeNext:function(){this.setSettingColor(this.currentColorTypeIndex+1)},onColorSelectChanged:function(t){this.setSettingColor(t)},hideColorSelect:function(){var t=this;requestAnimationFrame((function(){t.colors.visible=!1}))}},computed:{rgba:function(){return this.getColorRGBAValue(this.value)},showValue:function(){return this.getColorValue(this.value)},hasSwatch:function(){return!!this.swatch},swatch:function(){var t=this.nonSwatch,e=this.swatchValue;return t?null:Object(l["j"])(e)?e:this.getSwatch(this.rgba.hexa)},opacity:function(){var t=this.showValue.opacity;return m["b"].mul(t,100)+"%"}},mixins:[lx],watch:{"colors.visible":function(t){t?(window.addEventListener("click",this.hideColorSelect,!0),window.addEventListener("contextmenu",this.hideColorSelect,!0)):(window.removeEventListener("click",this.hideColorSelect,!0),window.removeEventListener("contextmenu",this.hideColorSelect,!0))}},beforeDestroy:function(){window.removeEventListener("click",this.hideColorSelect,!0),window.removeEventListener("contextmenu",this.hideColorSelect,!0)},data:function(){return{colors:{visible:!1}}}},fx=hx,mx=(n("9a42"),Object(Gr["a"])(fx,ux,dx,!1,null,"bfcf4dac",null)),vx=mx.exports,px={methods:{clickCopy:function(t,e){e&&(t=Object(m["a"])(parseFloat(t)/100,4)),Object(c["p"])(t)?this.showTextTip("已复制文本: ".concat(t),2):this.showTextTip("复制到剪切板失败",2)}},computed:{subName:function(){return this.opacityMode?"透明度":this.blurMode?"模糊":"渐变"},gradientFillLastHasSwatch:function(){var t,e=null===(t=this.fill)||void 0===t?void 0:t.colorStops;if(!Object(l["i"])(e))return!1;var n=e.length;if(n>1){var i=e[n-1];if(i){var r=i.swatch,o=i.color;return Object(l["j"])(r)||(r=this.getSwatch(this.getColorRGBAValue(o).hexa)),Object(l["j"])(r)}}},canvasAngle:function(){var t;return Object(c["z"])(null===(t=this.fill)||void 0===t?void 0:t.angle)},EnumFillShowType:function(){return a["s"]},gradientSwatch:function(){var t,e=this.fill;switch(e.type){case a["s"].FillColor:case a["s"].None:case a["s"].ImageFill:return null}var n=e.colorStops,i=Q(null===(t=this.gradientInfo)||void 0===t?void 0:t.className,n);return this.getSwatch(i)},gradientInfo:function(){var t;return null!==(t=a["s"].getGradientInfo(this.fill.type))&&void 0!==t?t:{name:void 0,className:void 0}},ellipseEndPoints:function(){var t=this.fill;if(t.type===a["s"].RadialGradientFill||t.type===a["s"].AngularGradientFill||t.type===a["s"].DiamondGradientFill){var e=t.startX,n=t.startY,i=t.scaleX,r=t.scaleY,o=[e,n,i,r].map((function(t){return Object(m["a"])(parseFloat(t)/100,4)})),s=Object(_["a"])(o,4),c=s[0],l=s[1],u=s[2],d=s[3];return{startX:e,startY:n,scaleX:i,scaleY:r,decimal_startX:c,decimal_startY:l,decimal_scaleX:u,decimal_scaleY:d}}},linearEndPoints:function(){var t=this.fill;if(t.type!==a["s"].LinearGradientFill)return null;var e=t.endPoints;if(!Object(l["i"])(e)||4!==e.length)return null;var n=e.map((function(t){return Object(m["a"])(t,4)})),i=Object(_["a"])(n,4),r=i[0],o=i[1],s=i[2],c=i[3],u=e.map((function(t){return Object(m["a"])(100*t,2)+"%"})),d=Object(_["a"])(u,4),h=d[0],f=d[1],v=d[2],p=d[3];return{x1:h,y1:f,x2:v,y2:p,decimal_x1:r,decimal_y1:o,decimal_x2:s,decimal_y2:c}}},components:{PropertyShowColor:vx,PropertyShowValue:SC},mixins:[lx],props:{fill:Object,solidName:{type:String,default:"纯色"},opacityMode:{type:Boolean,default:!1},blurMode:{type:Boolean,default:!1}}},bx=px,gx=(n("cabd"),Object(Gr["a"])(bx,sx,cx,!1,null,"2feb24f1",null)),wx=gx.exports,yx={components:{PropertyColor:wx,PropertyShowValue:SC},computed:{strokeName:function(){var t=this.stroke,e=this.typeName;if(t){var n=t.position;return a["lb"].getName(n)+e}}},props:{stroke:Object,index:Number,typeName:String}},kx=yx,Cx=Object(Gr["a"])(kx,ox,ax,!1,null,null,null),xx=Cx.exports,Sx=function(){var t=this,e=t._self._c;return t.visible?e("div",[t._m(0),t.nodeStyle.effectSN?[e("PropertyShowStyleName",{attrs:{title:"效果样式",styleName:t.nodeStyle.effectSN}}),e("div",{staticClass:"prop-line"})]:t._e(),t.objectEffect?[e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.blurName}}),t.nodeStyle.blurGradient?t._e():e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.objectEffect}}),e("span",{staticClass:"inp empty"})],1)]),t.nodeStyle.blurGradient?e("PropertyColor",{attrs:{opacityMode:!1,blurMode:!0,fill:t.nodeStyle.blurGradient}}):t._e()]:t._e(),t.backgroundEffect?[t.objectEffect?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.blurName}}),t.nodeStyle.blurGradient?t._e():e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.backgroundEffect}}),null==t.backgroundEffectBrightness&&null==t.backgroundEffectSaturation?e("span",{staticClass:"inp empty"}):t.backgroundEffectBrightness?e("div",{staticClass:"brightness"},[e("span",{staticClass:"bn-name"},[t._v("亮度")]),e("PropertyShowValue",{attrs:{value:t.backgroundEffectBrightness}})],1):t.backgroundEffectSaturation?e("div",{staticClass:"saturation"},[e("span",{staticClass:"bn-name"},[t._v("饱和度")]),e("PropertyShowValue",{attrs:{value:t.backgroundEffectSaturation}})],1):t._e()],1)]),t.nodeStyle.blurGradient?e("PropertyColor",{attrs:{opacityMode:!1,blurMode:!0,fill:t.nodeStyle.blurGradient}}):t._e()]:t._e(),t.zoomEffect?[t.objectEffect||t.backgroundEffect?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.blurName}}),t.nodeStyle.blurGradient?t._e():e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.zoomEffect}}),t.zoomEffectCenter?e("div",{staticClass:"brightness"},[e("span",{staticClass:"bn-name"},[t._v("原点")]),e("PropertyShowValue",{attrs:{value:t.zoomEffectCenter}})],1):e("span",{staticClass:"inp empty"})],1)]),t.nodeStyle.blurGradient?e("PropertyColor",{attrs:{opacityMode:!1,blurMode:!0,fill:t.nodeStyle.blurGradient}}):t._e()]:t._e(),t.motionEffect?[t.zoomEffect||t.objectEffect||t.backgroundEffect?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.blurName}}),t.nodeStyle.blurGradient?t._e():e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.motionEffect}}),t.motionEffectAngle?e("div",{staticClass:"brightness"},[e("span",{staticClass:"bn-name"},[t._v("角度")]),e("PropertyShowValue",{attrs:{value:t.motionEffectAngle}})],1):e("span",{staticClass:"inp empty"})],1)]),t.nodeStyle.blurGradient?e("PropertyColor",{attrs:{opacityMode:!1,blurMode:!0,fill:t.nodeStyle.blurGradient}}):t._e()]:t._e(),t.nodeStyle.glassEffect?[t.nodeStyle.glassEffect.glassType===t.EnumFileType.SKETCH?e("PropertyEffectSketchGlass",{attrs:{splitLine:!!(t.backgroundEffect||t.objectEffect||t.zoomEffect||t.motionEffect),glassEffect:t.nodeStyle.glassEffect}}):t.nodeStyle.glassEffect.glassType===t.EnumFileType.FIGMA?e("PropertyEffectFigmaGlass",{attrs:{splitLine:!!(t.backgroundEffect||t.objectEffect||t.zoomEffect||t.motionEffect),glassEffect:t.nodeStyle.glassEffect}}):t._e()]:t._e(),t._l(t.nodeStyle.shadows,(function(n,i){return e("PropertyEffectShadow",{key:"shadow-".concat(i),attrs:{shadowName:"外阴影",shadow:n,splitLine:(t.backgroundEffect||t.objectEffect||t.zoomEffect||t.motionEffect||t.nodeStyle.glassEffect)&&0===i||i>0}})})),t._l(t.nodeStyle.innerShadows,(function(n,i){return e("PropertyEffectShadow",{key:"inner-shadow-".concat(i),attrs:{shadowName:"内阴影",shadow:n,splitLine:(t.backgroundEffect||t.objectEffect||t.zoomEffect||t.motionEffect||t.nodeStyle.glassEffect)&&0===t.nodeStyle.shadows.length&&0===i||i+t.nodeStyle.shadows.length>0}})}))],2):t._e()},Tx=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-effect"},[t._v("效果")])])}],Ox=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box"},[t.splitLine?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.shadowName}}),e("div",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item loc"},[e("dt",[t._v("偏移")]),e("dd",[e("span",{staticClass:"loc-name"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.shadow.x}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.shadow.y,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.shadow.blur}}),e("div",{staticClass:"inp empty"})],1)]),t.shadow.spread?e("dl",{staticClass:"item"},[e("dt",[t._v("阴影大小")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.shadow.spread}}),e("div",{staticClass:"inp empty"})],1)]):t._e(),e("PropertyShowColor",{attrs:{name:"颜色",value:t.shadow.color,"swatch-value":t.shadow.swatch}})],1)},Ix=[],Ax={components:{PropertyShowColor:vx,PropertyShowValue:SC},props:{shadowName:String,shadow:Object,splitLine:Boolean}},Fx=Ax,jx=Object(Gr["a"])(Fx,Ox,Ix,!1,null,null,null),_x=jx.exports,Mx=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box"},[t.splitLine?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:"玻璃"}}),e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.glassEffect.isCustomGlass?"自定义":"自适应",title:t.glassEffect.isCustomGlass?"自定义玻璃效果":"自适应玻璃效果"}})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.radius}}),e("div",{staticClass:"saturation"},[e("span",{staticClass:"bn-name",attrs:{title:"Depth"}},[t._v("深度")]),e("PropertyShowValue",{attrs:{value:t.depth}})],1)],1)]),e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"Saturation"}},[t._v("饱和度")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.saturation}}),e("div",{staticClass:"saturation"},[e("span",{staticClass:"bn-name",attrs:{title:"Brightness"}},[t._v("亮度")]),e("PropertyShowValue",{attrs:{value:t.brightness}})],1)],1)]),e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"Distortion"}},[t._v("扭曲程度")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.distortion}}),e("div",{staticClass:"chromatic-aberration"},[e("span",{staticClass:"bn-name",attrs:{title:"Chromatic Aberration"}},[t._v("色差强度")]),e("PropertyShowValue",{attrs:{value:t.chromaticAberrationMultiplier}})],1)],1)]),e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"Lighting Effects"}},[t._v("镜面高光")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.glassEffect.skipLightingEffects?"否":"是"}}),e("span",{staticClass:"inp empty"})],1)])])},Lx=[],Px={components:{PropertyShowValue:SC},computed:{radius:function(){var t=this.glassEffect.radius;return"number"!==typeof t?t:this.getCalcPlatformValue(t,{needArtScale:!0,isHorizintal:!0})},brightness:function(){var t=this.glassEffect.brightness;return"number"!==typeof t?t:m["b"].mul(Object(m["a"])(t,2),100)+"%"},distortion:function(){var t=this.glassEffect.distortion;return"number"!==typeof t?t:Object(m["a"])(t,2).toString()},depth:function(){var t=this.glassEffect.depth;return"number"!==typeof t?t:Object(m["a"])(10*t,2).toString()},chromaticAberrationMultiplier:function(){var t=this.glassEffect.chromaticAberrationMultiplier;return"number"!==typeof t?t:Object(m["a"])(t,2).toString()},saturation:function(){var t=this.glassEffect.saturation;return"number"!==typeof t?t:m["b"].mul(Object(m["a"])(t,2),100)+"%"}},props:{glassEffect:Object,splitLine:Boolean}},Dx=Px,Nx=Object(Gr["a"])(Dx,Mx,Lx,!1,null,null,null),Ex=Nx.exports,Rx=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box"},[t.splitLine?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:"玻璃"}}),e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"Angle 镜面反射光的角度（以度为单位）"}},[t._v("角度")]),e("dd",[e("PropertyShowValue",{attrs:{title:"起点和终点的角度为沿时钟0点方向顺时针旋转: ".concat(t.lightAngle),value:t.lightAngle}}),e("div",{staticClass:"saturation"},[e("span",{staticClass:"bn-name",attrs:{title:"Intensity 镜面高光的强度"}},[t._v("强度")]),e("PropertyShowValue",{attrs:{value:t.lightIntensity}})],1)],1)]),e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"Refraction 折射扭曲的强度（取值范围: 0-100）"}},[t._v("折射")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.refraction}}),e("div",{staticClass:"saturation"},[e("span",{staticClass:"bn-name",attrs:{title:"Depth 折射效果的深度（取值范围: 1-100）"}},[t._v("深度")]),e("PropertyShowValue",{attrs:{value:t.depth}})],1)],1)]),e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"Dispersion 色差（颜色分离）的量（取值范围: 1-100）"}},[t._v("分散度")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.dispersion}}),e("div",{staticClass:"saturation"},[e("span",{staticClass:"bn-name",attrs:{title:"Frost 玻璃上霜冻效果的半径（取值范围: 0-100）"}},[t._v("半径")]),e("PropertyShowValue",{attrs:{value:t.radius}})],1)],1)])])},Vx=[],Bx={components:{PropertyShowValue:SC},computed:{radius:function(){var t=this.glassEffect.radius;return"number"!==typeof t?t:Object(m["a"])(t,2).toString()+"%"},dispersion:function(){var t=this.glassEffect.dispersion;return"number"!==typeof t?t:m["b"].mul(Object(m["a"])(t,2),100)+"%"},lightAngle:function(){var t=this.glassEffect.lightAngle;return Object(c["z"])(t,!0)},depth:function(){var t=this.glassEffect.depth;return"number"!==typeof t?t:Object(m["a"])(t,2).toString()+"%"},lightIntensity:function(){var t=this.glassEffect.lightIntensity;return"number"!==typeof t?t:m["b"].mul(Object(m["a"])(t,2),100)+"%"},refraction:function(){var t=this.glassEffect.refraction;return"number"!==typeof t?t:m["b"].mul(Object(m["a"])(t,2),100)+"%"}},props:{glassEffect:Object,splitLine:Boolean}},Hx=Bx,Ux=Object(Gr["a"])(Hx,Rx,Vx,!1,null,null,null),Gx=Ux.exports,Wx={components:{PropertyShowValue:SC,PropertyShowStyleName:rx,PropertyEffectShadow:_x,PropertyColor:wx,PropertyEffectSketchGlass:Ex,PropertyEffectFigmaGlass:Gx},computed:{EnumFileType:function(){return a["r"]},visible:function(){var t=this.objectEffect,e=this.backgroundEffect,n=this.zoomEffect,i=this.motionEffect,r=this.nodeStyle,o=r.shadows,a=r.innerShadows,s=r.glassEffect;return t||e||n||i||s||o.length+a.length>0},blurName:function(){var t,e=this.nodeStyle.blurGradient,n=this.objectEffect,i=this.backgroundEffect,r=this.zoomEffect,o=this.motionEffect,s=a["s"].getGradientInfo(null===e||void 0===e?void 0:e.type);return t=n?"高斯":i?"背景":r?"缩放":o?"动感":"","".concat(t).concat(s?"".concat(s.name,"渐变"):"","模糊")},motionEffect:function(){var t=this.nodeStyle.motionEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0,isHorizintal:!0})},motionEffectAngle:function(){var t=this.nodeStyle.motionEffectAngle;return null==t||isNaN(t)?"":(-Math.round(t)).toString()},zoomEffect:function(){var t=this.nodeStyle.zoomEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0,isHorizintal:!0})},zoomEffectCenter:function(){var t=this.nodeStyle.zoomEffectCenter;return t?"[".concat(Object(m["a"])(t.x,2),",").concat(Object(m["a"])(t.y),"]"):""},objectEffect:function(){var t=this.nodeStyle.objectEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0,isHorizintal:!0})},backgroundEffect:function(){var t=this.nodeStyle.backgroundEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0,isHorizintal:!0})},backgroundEffectBrightnessDecimal:function(){var t=this.nodeStyle.backgroundEffectBrightness;return"number"!==typeof t||1===t?null:Object(m["a"])(t,2)},backgroundEffectBrightness:function(){var t=this.backgroundEffectBrightnessDecimal;return null==t?null:Math.round(100*t)+"%"},backgroundEffectSaturationDecimal:function(){var t=this.nodeStyle.backgroundEffectSaturation;return"number"!==typeof t||1===t?null:Object(m["a"])(t,2)},backgroundEffectSaturation:function(){var t=this.backgroundEffectSaturationDecimal;return null==t?null:Math.round(100*t)+"%"}},props:{nodeStyle:Object},created:function(){}},$x=Wx,zx=Object(Gr["a"])($x,Sx,Tx,!1,null,null,null),Yx=zx.exports,Xx={components:{PropertyStrokeItem:xx,PropertyShowStyleName:rx,PropertyEffect:Yx},props:{nodeStyle:Object},computed:{strokeTypeName:function(){return this.curNode.types.Text?"描边":"边框"}}},Kx=Xx,qx=Object(Gr["a"])(Kx,JC,QC,!1,null,null,null),Jx=qx.exports,Qx=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box"},[e("dl",{staticClass:"item node-name"},[e("dt",[t._v("图层")]),e("dd",{staticClass:"cur-node-name"},[e("NodeName",{attrs:{node:t.curNode}})],1)]),t.curNode.layerSN?e("dl",{staticClass:"item mult_min"},[e("dt",{domProps:{textContent:t._s("图层样式")}}),e("dd",[e("PropertyShowValue",{attrs:{cls:{multiple_min:1},value:t.curNode.layerSN}})],1)]):t._e(),t.renderTapInteraction?e("PropertyInfoInteraction",{attrs:{renderTapInteraction:t.renderTapInteraction}}):t._e(),t._m(0),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name mid"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.left}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.top,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name mid"},[t._v("W")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.width}}),e("span",{staticClass:"loc-name"},[t._v("H")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.height,cls:{m2:1}}})],1)]),t.nodeStyle.opacityGradient?[t.nodeStyle.opacityGradient?e("PropertyColor",{attrs:{opacityMode:!0,fill:t.nodeStyle.opacityGradient}}):t._e()]:e("dl",{staticClass:"item",class:{opa:t.showBlendOpacity}},[e("dt",{attrs:{title:"当前图层的不透明度"}},[t._v("不透明度")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.nodeStyle.opacity}}),e("div",{staticClass:"inp empty"})],1)]),t.showBlendOpacity?e("dl",{staticClass:"item opa"},[e("dt",{attrs:{title:"组合不透明度是指叠加了当前图层和所有父级图层透明度的计算值"}},[t._v("组合不透明度")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.nodeStyle.blendOpacity}}),e("div",{staticClass:"inp empty"})],1)]):t._e(),t.nodeStyle.cornerRadiiValue?e("dl",{staticClass:"item"},[e("dt",{domProps:{textContent:t._s(t.nodeStyle.cornerRadiiName)}}),e("dd",[e("PropertyShowValue",{attrs:{value:t.nodeStyle.cornerRadiiValue}}),t.shortCornerRadiiValue?e("div",{staticClass:"inp empty"}):t._e()],1)]):t._e(),t.curNode.boxTransform?[0!==t.curNode.boxTransform.rotation?e("dl",{staticClass:"item"},[e("dt",[t._v("旋转")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.curNode.boxTransform.rotation+"deg"}}),e("div",{staticClass:"inp empty"})],1)]):t._e(),t.flippedText?e("dl",{staticClass:"item"},[e("dt",[t._v("翻转")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.flippedText}}),e("div",{staticClass:"inp empty"})],1)]):t._e()]:t._e()],2)},Zx=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-rect"},[t._v("比例")])])}],tS=function(){var t=this,e=t._self._c;return e("dl",{staticClass:"item"},[e("dt",[t._v(t._s(t.typeName))]),e("dd",[e("a",{staticClass:"interaction-link",attrs:{href:"javascript:;",title:t.toArtboardName},on:{click:t.clickGoArtboard}},[t._v(t._s(t.toArtboardName))])])])},eS=[],nS={methods:{clickGoArtboard:function(){this.$store.commit("setInteractionArtboard",this.renderTapInteraction)}},computed:{typeName:function(){return xe.getTypeName(this.renderTapInteraction.type)},toArtboardName:function(){var t,e;switch(this.renderTapInteraction.type){case xe.goBack:case xe.goBackAndCloseAllOverlay:return"上一个画板";case xe.closeCurrentOverlay:return"最顶部遮罩层";case xe.goUrl:return this.renderTapInteraction.toUrl;default:return null!==(t=null===(e=this.toArtboardItem)||void 0===e?void 0:e.name)&&void 0!==t?t:"目标画板未上传"}},toArtboardItem:function(){var t,e;return null!==(t=null===(e=this.renderTapInteraction)||void 0===e?void 0:e.toArtboardItem)&&void 0!==t?t:null}},props:{renderTapInteraction:Object}},iS=nS,rS=(n("7eae"),Object(Gr["a"])(iS,tS,eS,!1,null,"7e5908d3",null)),oS=rS.exports,aS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"node-name",class:{focused:t.focused,"non-export":!t.node.markedForExport}},[this.node.markedForExport?e("input",{attrs:{type:"text","max-length":"50",spellcheck:"false"},domProps:{value:t.nodeShowName},on:{focus:t.inputFocus,blur:function(e){return t.inputBlur(e)},compositionstart:function(e){return t.onComposition(!0)},compositionend:function(e){return t.onComposition(!1)},keyup:t.inputKeyup}}):e("div",{attrs:{title:t.nodeShowNameOrigin},on:{click:function(e){return t.clickCopy()}}},[t._v(t._s(t.nodeShowName))])])},sS=[],cS={methods:{clickCopy:function(){var t=this.nodeShowNameOrigin;Object(c["p"])(t)?this.showTextTip("已复制图层名到剪切板",2):this.showTextTip("复制到剪切板失败",2)},inputKeyup:function(t){var e=t.keyCode||t.which;13==e&&(t.target.blur(),t.preventDefault())},onComposition:function(t){this.inComposition=t},inputFocus:function(){this.focused=!0},inputBlur:function(t){this.focused=!1;var e=t.target.value.trim();if(e!==this.nodeShowName){var n=this.node;n.markedForExport?Object(c["kb"])(this,n,e):this.showTextTip("只有切图资源才可以进行重命名操作")}}},computed:{nodeShowNameOrigin:function(){var t=this.node;return Object(c["H"])(t)},nodeShowName:function(){var t=this.node,e=this.nodeShowNameOrigin;if(!t.markedForExport&&Object(l["j"])(e)){e=e.trim();var n=e.length;n>33&&(e=e.substr(0,30)+"...")}return e}},data:function(){return{focused:!1,inComposition:!1}},props:{node:Object}},lS=cS,uS=(n("8c0c"),Object(Gr["a"])(lS,aS,sS,!1,null,"86effb9e",null)),dS=uS.exports,hS={props:{nodeStyle:Object},components:{PropertyShowValue:SC,NodeName:dS,PropertyInfoInteraction:oS,PropertyColor:wx},computed:{showBlendOpacity:function(){var t=this.nodeStyle;return t.blendOpacity&&t.blendOpacity!=t.opacity},renderTapInteraction:function(){var t=this.curNode;if(!t)return null;var e=t.renderTapInteraction;if(e)return e;var n=t.parentNode,i=t.boundsInArtboard;while(n){if(i.isSame(n.boundsInArtboard)&&(e=n.renderTapInteraction,e))return e;n=n.parentNode}return null},flippedText:function(){var t=this.curNode.boxTransform;if(t){var e="";return t.flippedHorizontally&&(e="水平"),t.flippedVertically&&(e?e+=" & 垂直":e="垂直"),e}},shortCornerRadiiValue:function(){var t=this.nodeStyle.cornerRadiiValue;return!t||-1===t.indexOf(" ")}},created:function(){0}},fS=hS,mS=(n("8423"),Object(Gr["a"])(fS,Qx,Zx,!1,null,"30422889",null)),vS=mS.exports,pS=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"prop-box"},[e("h5",{staticClass:"fill-title"},[e("span",{staticClass:"i-text icon-fills"},[t._v("填充")]),t.nodeStyle.blendMode?e("div",{staticClass:"blend-mode"},[e("span",[t._v("混合模式")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.blendMode}})],1):t._e()]),t.fillSN?e("PropertyShowStyleName",{attrs:{title:"填充样式",styleName:t.fillSN}}):t._e(),t._l(t.fills,(function(t,n){return e("PropertyColor",{key:"fill-".concat(n),attrs:{fill:t}})}))],2):t._e()},bS=[],gS={components:{PropertyShowValue:SC,PropertyColor:wx,PropertyShowStyleName:rx},props:{nodeStyle:Object},computed:{fillSN:function(){return this.nodeStyle.fillSN},fills:function(){return this.nodeStyle.fills},visible:function(){return this.fills.length>0}},data:function(){return{EnumFillShowType:a["s"]}}},wS=gS,yS=(n("fe6a"),Object(Gr["a"])(wS,pS,bS,!1,null,"6ecf663c",null)),kS=yS.exports,CS=function(){var t=this,e=t._self._c;return e("section",[e("section",{staticClass:"prop-box"},[t._m(0),t.charSN?e("PropertyShowStyleName",{attrs:{title:"字符样式",styleName:t.charSN}}):t._e(),t._l(t.combineStyles,(function(n,i){return[n.color?e("PropertyTextColor",{key:i,attrs:{forKey:i,item:n,sketchGroupFillColor:t.sketchGroupFillColor,itemStyle:t.style}}):n.hideDefault&&t.styles[0][n.field]==n.default?t._e():e("dl",{key:i,staticClass:"item"},[e("dt",{domProps:{textContent:t._s(n.name)}}),e("dd",[e("PropertyShowValue",{attrs:{value:n.extendValue(t.styles[0][n.field],"fontWeight"===n.field?t.calcPlatformShowType:t.getCalcPlatformValue)}}),"fontWeight"===n.field?e("PropertyShowValue",{attrs:{value:t.styles[0].fontWeightCss,cls:t.fontWeightCls}}):n.halfWidth?e("div",{staticClass:"inp m2 empty"}):t._e()],1)])]})),t.paragraphIndent?e("dl",{staticClass:"item"},[e("dt",[t._v("段落缩进")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.paragraphIndent}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e(),t.paragraphSpacing?e("dl",{staticClass:"item"},[e("dt",[t._v("段落间距")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.paragraphSpacing}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e(),t.lineSpacing?e("dl",{staticClass:"item"},[e("dt",[t._v("行高")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.lineSpacing}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("对齐方式")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.curNode.textAlign}}),e("div",{staticClass:"inp m2 empty"})],1)]),t.curNode.textVerticalAlign?e("dl",{staticClass:"item"},[e("dt",[t._v("垂直对齐")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.curNode.textVerticalAlign}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e()],2),t.unCombineStyles.length>0?e("div",[t._l(t.styles,(function(n,i){return[""!=t.subTexts[i]?e("section",{key:i,staticClass:"prop-box uncombine"},[e("h5",[t._v("文本"+t._s(i+1))]),!t.charSN&&t.styles.length>1&&n.charSN?e("PropertyShowStyleName",{attrs:{title:"字符样式",styleName:n.charSN}}):t._e(),t._l(t.unCombineStyles,(function(i,r){return[i.color?e("PropertyTextColor",{key:i.field,attrs:{forKey:i.field,item:i,sketchGroupFillColor:t.sketchGroupFillColor,itemStyle:n}}):i.hideDefault&&n[i.field]==i.default?t._e():e("dl",{key:r,staticClass:"item"},[e("dt",{domProps:{textContent:t._s(i.name)}}),e("dd",[e("PropertyShowValue",{attrs:{value:i.extendValue(n[i.field],"fontWeight"===i.field?t.calcPlatformShowType:t.getCalcPlatformValue)}}),"fontWeight"===i.field?e("PropertyShowValue",{attrs:{value:n.fontWeightCss,cls:t.fontWeightCls}}):i.halfWidth?e("div",{staticClass:"inp m2 empty"}):t._e()],1)])]}))],2):t._e()]}))],2):t._e(),e("h5",{staticClass:"mult-h5"},[t._v(" 文本内容 "),e("a",{staticClass:"copy",attrs:{href:"javascript:;"},on:{click:function(e){return t.copyText(t.text)}}},[t._v("复制文本")])]),e("dl",{staticClass:"item mult"},[e("dd",[e("PropertyShowValue",{attrs:{doNotAutoCopy:!1,value:t.text,cls:{multiple:1}}})],1)])])},xS=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-text"},[t._v("文本")])])}],SS=function(){var t=this,e=t._self._c;return t.itemStyle.figmaFills?e("div",t._l(t.itemStyle.figmaFills,(function(n,i){return e("PropertyColor",{key:"".concat(t.forKey,"_").concat(i,"_fig"),attrs:{fill:n,solidName:"前景色"}})})),1):t.itemStyleFills.length>0?e("div",t._l(t.itemStyleFills,(function(n,i){return e("PropertyShowColor",{key:"".concat(t.forKey,"_").concat(i),attrs:{name:"".concat(t.item.name).concat(i+1),value:n.value,"swatch-value":n.swatch}})})),1):t.itemStyleFill?e("PropertyShowColor",{key:t.forKey,attrs:{name:t.item.name,value:t.itemStyleFill.value,"swatch-value":t.itemStyleFill.swatch}}):t._e()},TS=[],OS={components:{PropertyColor:wx,PropertyShowColor:vx},computed:{itemStyleFills:function(){var t=this.itemStyle,e=this.sketchGroupFillColor;return t.fills&&t.fills.length>1?t.fills.map((function(t){return tt(e,t.value,t.swatch)})):[]},itemStyleFill:function(){var t=this.itemStyleFills,e=this.itemStyle.fill,n=this.sketchGroupFillColor;return e&&0===t.length?tt(n,e.value,e.swatch):null}},props:{itemStyle:Object,forKey:String,item:Object,sketchGroupFillColor:{type:Object,validator:function(){return!0}}}},IS=OS,AS=Object(Gr["a"])(IS,SS,TS,!1,null,null,null),FS=AS.exports,jS=[{name:"填充样式",field:"fillSN",hideDefault:!0,default:null},{name:"前景色",field:"fill",color:!0},{name:"字体",field:"fontFamily"},{name:"字重",field:"fontWeight",halfWidth:!1,hideDefault:!1,default:"normal",extendValue:function(t,e){if("number"===typeof t){var n=a["bb"][t];n&&(t=n.toLowerCase())}return e===a["c"].IOS&&t&&"normal"===t.toLowerCase()&&(t="Regular"),t}},{name:"斜体",field:"fontItalic",halfWidth:!0,hideDefault:!0,default:"normal"},{name:"字号",field:"fontSize",halfWidth:!0,extendValue:function(t,e){return e(t,{fontSize:!0,needArtScale:!0,isHorizintal:!0})}},{name:"字间距",field:"charSpacing",hideDefault:!0,default:null,halfWidth:!0,extendValue:function(t,e){return e(t,{needArtScale:!0,isHorizintal:!0})}}];jS.forEach((function(t){t.extendValue||(t.extendValue=function(t){return t})}));var _S={components:{PropertyShowValue:SC,PropertyTextColor:FS,PropertyShowStyleName:rx},methods:{copyText:function(t){null!=t&&(Object(c["p"])(t)?this.showTextTip("已复制文本到剪切板",2):this.showTextTip("复制到剪切板失败",2))}},computed:{charSN:function(){var t,e=this.styles,n=this.curNode.charSN;return 1===e.length&&(t=e[0].charSN)?t:n},fontWeightCls:function(){return{m2:1}},paragraphIndent:function(){var t=this.curNode,e=t.paragraphIndent;return 0===e||null==e?"":this.getCalcPlatformValue(e,{needArtScale:!0,isHorizintal:!0})},paragraphSpacing:function(){var t=this.curNode,e=t.paragraphSpacing;return 0===e||null==e?"":this.getCalcPlatformValue(e,{needArtScale:!0,isHorizintal:!1})},lineSpacing:function(){var t=this.curNode,e=t.lineSpacing;return 0===e||null==e?"auto":this.getCalcPlatformValue(e,{needArtScale:!0,isHorizintal:!1})},unCombineStyles:function(){var t=[],e=this.combineStyles;return jS.forEach((function(n){e[n.field]||t.push(n)})),t},combineStyles:function(){var t={},e=this.styles,n=e.length;return n<=1?(1===n&&jS.forEach((function(e){t[e.field]=e})),t):(jS.forEach((function(i){var r=!0,o=e[0][i.field];i.color&&(o="".concat(o.value,":").concat(o.swatch));for(var a=1;a<n;a++){var s=e[a];if(s){var c=s[i.field];if(i.color&&(c="".concat(c.value,":").concat(c.swatch)),c!==o){r=!1;break}}}r&&(t[i.field]=i)})),t)},subTexts:function(){var t=this.text,e=this.styles,n=[];if(0===e.length||1===e.length&&0===e[0].length)return n.push(t),n;var i=0;return e.forEach((function(r,o){var a;o===e.length-1?a=t.substr(i):(a=t.substr(i,r.length),i+=r.length),n.push(a)})),n},text:function(){return this.curNode.text||""},styles:function(){return this.curNode.styleRanges||[]},style:function(){return this.styles[0]}},props:{sketchGroupFillColor:{type:Object,validator:function(){return!0}},nodeStyle:Object},created:function(){}},MS=_S,LS=Object(Gr["a"])(MS,CS,xS,!1,null,null,null),PS=LS.exports,DS=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"prop-box css-box"},[e("h5",{staticClass:"mult-h5"},[e("span",{staticClass:"i-text icon-code"},[t._v("CSS")]),e("a",{staticClass:"copy",attrs:{href:"javascript:;"},on:{click:function(e){return t.copyText(t.propertyText)}}},[t._v("复制样式")])]),e("dl",{staticClass:"item mult"},[e("dd",[e("ul",{staticClass:"css"},t._l(t.properties,(function(n,i){return e("li",{key:"property-".concat(i)},[n.name?[n.swatch?e("span",{staticClass:"desc desc-swatch"},[t._v("/* "+t._s(n.swatch)+" */")]):t._e(),e("span",{staticClass:"name"},[t._v(t._s(n.name)+":")]),e("span",{staticClass:"value"},[t._v(t._s(n.value)+";")])]:n.desc?[e("span",{staticClass:"desc"},[t._v(t._s(n.desc))])]:t._e()],2)})),0)])])]):t._e()},NS=[],ES={mixins:[lx],props:{nodeStyle:Object,sketchGroupFillColor:{type:Object,validator:function(){return!0}}},methods:{copyText:function(t){Object(c["p"])(t)?this.showTextTip("已复制样式到剪切板",2):this.showTextTip("复制到剪切板失败",2)}},computed:{visible:function(){return this.properties.length>0},properties:function(){var t,e,n,i,r,o,s=this,d=this.curNode,h=this.nodeStyle,f=[],v=!1,p=h.groupLayout,b=h.groupGrid;if(p){r="display",i="flex",f.push({name:r,value:i});var g=p.paddings,w=p.usePadding,y=p.alignItems,k=p.flexDirection,C=p.justifyContent,x=p.allGuttersGap,S=p.counterGap,T=p.useGap,O=p.flexWrap,I=p.alignContent;if(a["E"].needAlignContent(O)&&(I=a["x"].getCss(I),I)){var A=I;r=A.name,i=A.value,f.push({name:r,value:i})}if(O=a["E"].getCss(O),O){var F=O;r=F.name,i=F.value,f.push({name:r,value:i})}if(o=a["A"].getCss(k),o){var j=o;r=j.name,i=j.value,i&&"row"!==i&&f.push({name:r,value:i})}if(C=a["B"].getCss(C),C){var _=C;r=_.name,i=_.value,f.push({name:r,value:i})}if(y=a["y"].getCss(y),y){var M=y;r=M.name,i=M.value,f.push({name:r,value:i})}if(T&&(r="gap",i=null==S||S==x?x:k===a["A"].Vertical?"".concat(x," ").concat(S):"".concat(S," ").concat(x),f.push({name:r,value:i})),w){r="box-sizing",i="border-box",f.push({name:r,value:i}),v=!0,r="padding";var L=g.top,P=g.left,D=g.right,N=g.bottom,E=L===N&&P===D,R=E&&L===P;i=R?L:E?"".concat(L," ").concat(D):"".concat(L," ").concat(D," ").concat(N," ").concat(P),f.push({name:r,value:i})}}else if(b){r="display",i="grid",f.push({name:r,value:i});var B=b.paddings,U=b.usePadding,G=b.useGap,W=b.rowGap,$=b.columnGap,z=b.rowSizingCSS,Y=b.columnSizingCSS,X=b.rowCount,q=b.columnCount;if(Object(l["j"])(z)?(r="grid-template-rows",i=z,f.push({name:r,value:i})):X>0&&(r="grid-template-rows",i="repeat(".concat(X,", minmax(0, 1fr))"),f.push({name:r,value:i})),Object(l["j"])(Y)?(r="grid-template-columns",i=Y,f.push({name:r,value:i})):q>0&&(r="grid-template-columns",i="repeat(".concat(q,", minmax(0, 1fr))"),f.push({name:r,value:i})),G&&(r="gap",i=null==$||$==W?W:"".concat(W," ").concat($),f.push({name:r,value:i})),U){r="box-sizing",i="border-box",f.push({name:r,value:i}),v=!0,r="padding";var J=B.top,Q=B.left,Z=B.right,et=B.bottom,nt=J===et&&Q===Z,it=nt&&J===Q;i=it?J:nt?"".concat(J," ").concat(Z):"".concat(J," ").concat(Z," ").concat(et," ").concat(Q),f.push({name:r,value:i})}}var rt=h.alignSelf,ot=h.layoutGrow,at=h.position,st=h.gridRow,ct=h.gridColumn,lt=h.justifySelf;if(a["z"].needShowProperty(rt)&&(rt=a["z"].getCss(rt),rt)){var ut=rt;r=ut.name,i=ut.value,i&&f.push({name:r,value:i})}if(a["C"].needShowProperty(lt)&&(lt=a["C"].getCss(lt),lt)){var dt=lt;r=dt.name,i=dt.value,i&&f.push({name:r,value:i})}if(null!=st&&(r="grid-row",i="".concat(st.start," / span ").concat(st.span),f.push({name:r,value:i})),null!=ct&&(r="grid-column",i="".concat(ct.start," / span ").concat(ct.span),f.push({name:r,value:i})),"number"===typeof ot&&0!==ot&&(r="flex-grow",i=Object(m["a"])(ot,5),f.push({name:r,value:i})),a["D"].needShowProperty(at)&&(at=a["D"].getCss(at),at)){var ht=at;r=ht.name,i=ht.value,i&&f.push({name:r,value:i})}var ft=h.opacityGradient;if(ft)switch(ft.type){case a["s"].RadialGradientFill:i="radial-gradient(ellipse ".concat(ft.scaleX," ").concat(ft.scaleY," at ").concat(ft.startX," ").concat(ft.startY," ,").concat(ft.colorStops.map((function(t){return"".concat(s.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")"),r="-webkit-mask-image",f.push({name:r,value:i}),r="mask-image",f.push({name:r,value:i});var mt=Object(c["z"])(ft.angle);"0deg"!==mt&&f.push({desc:"/*\n径向渐变(radial-gradient)不支持旋转角度;\n*/"});break;case a["s"].LinearGradientFill:i="linear-gradient(".concat(ft.angle,",").concat(ft.colorStops.map((function(t){var e;return"".concat(s.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(null!==(e=t.cssStop)&&void 0!==e?e:t.stop)})).join(","),")"),r="-webkit-mask-image",f.push({name:r,value:i}),r="mask-image",f.push({name:r,value:i})}else r="opacity",i=h[r],i&&"100%"!==i&&f.push({name:r,value:i});r="width",i=h[r],i&&f.push({name:r,value:i}),r="height",i=h[r],i&&f.push({name:r,value:i}),h.blendMode&&(r="mix-blend-mode",i=h.blendMode,i&&f.push({name:r,value:i}));var vt=d.boxTransform;vt&&(r="transform",i=0!==vt.rotation?"rotate(".concat(vt.rotation,"deg)"):"",vt.flippedHorizontally&&(i+=" scaleX(-1)"),vt.flippedVertically&&(i+=" scaleY(-1)"),i&&f.push({name:r,value:i}));var pt=!!d.types.Text;function bt(){if(pt){var t=" -webkit-background-clip",e="text";f.push({name:t,value:e}),t=" -webkit-text-fill-color",e="transparent",f.push({name:t,value:e}),t=" background-clip",e="text",f.push({name:t,value:e}),t=" text-fill-color",e="transparent",f.push({name:t,value:e})}}var gt,wt=[];h.fills&&(gt=wt).push.apply(gt,Object(u["a"])(h.fills));if(pt&&(null===(t=d.styleRanges)||void 0===t?void 0:t.length)>0){var yt,kt=d.styleRanges[0];(yt=null===kt||void 0===kt?void 0:kt.figmaFills)&&yt.length>1&&(wt=yt)}var Ct=!1;if(wt.length>0){var xt=[];wt.forEach((function(t){switch(t.type){case a["s"].FillColor:var e=s.getCssShowColor(t.color,r,t.swatch).value;xt.push({color:e,image:"linear-gradient(0deg,".concat(e,",").concat(e,")")});break;case a["s"].RadialGradientFill:i="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(s.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")");var n=Object(c["z"])(t.angle);"0deg"!==n&&f.push({desc:"/*\n径向渐变(radial-gradient)不支持旋转角度,可结合:before或:after配合transform实现\ntransform:rotate(".concat(n,");\n*/")}),xt.push({image:i});break;case a["s"].DiamondGradientFill:i="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(s.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")"),f.push({desc:"/*css不支持菱形渐变,当前写法为径向渐变(radial-gradient)且不含旋转角度*/"}),xt.push({image:i});break;case a["s"].AngularGradientFill:i="conic-gradient(from ".concat(t.angle," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(s.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")"),xt.push({image:i});break;case a["s"].LinearGradientFill:i="linear-gradient(".concat(t.angle,",").concat(t.colorStops.map((function(t){var e;return"".concat(s.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(null!==(e=t.cssStop)&&void 0!==e?e:t.stop)})).join(","),")"),xt.push({image:i})}}));var St=xt.length;St>0&&(r="background",i=xt.map((function(t,e){var n=St===e+1;return n&&t.color?t.color:(Ct=!0,t.image)})).join(","),f.push({name:r,value:i}),Ct&&bt())}var Tt=h.border;if(Tt)switch(Tt.widths?(r="border-style",i=Tt.style,f.push({name:r,value:i}),r="border-width",i=Tt.widths,f.push({name:r,value:i})):(r="border",i="".concat(Tt.width," ").concat(Tt.style),f.push({name:r,value:i})),Tt.type){case a["s"].FillColor:r="border-color",i=this.getCssShowColor(Tt.color,r,Tt.swatch),i&&f.push(i);break;case a["s"].RadialGradientFill:case a["s"].LinearGradientFill:r="border-image-source",i="linear-gradient(".concat(Tt.angle,",").concat(Tt.colorStops.map((function(t){var e;return"".concat(s.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(null!==(e=t.cssStop)&&void 0!==e?e:t.stop)})).join(","),")"),f.push({name:r,value:i}),r="border-image-slice",i="1",f.push({name:r,value:i})}var Ot,It=h.textStrokeStyle;if(It)switch(r="-webkit-text-stroke-width",i=null!==(Ot=It.widths)&&void 0!==Ot?Ot:It.width,f.push({name:r,value:i}),r="text-stroke-width",f.push({name:r,value:i}),It.type){case a["s"].FillColor:r="-webkit-text-stroke-color",i=this.getCssShowColor(It.color,r,It.swatch),i&&(f.push(i),r="text-stroke-color",f.push({name:r,value:i.value}));break}if(h.strokesIncludedInLayout&&!v&&f.push({name:"box-sizing",value:"border-box"}),r="border-radius",i=h.cornerRadiiValue,i&&f.push({name:r,value:i}),(null!==(e=null===(n=h.glassEffect)||void 0===n?void 0:n.radius)&&void 0!==e?e:0)>0&&(f.push({desc:"/*单个div无法实现玻璃效果*/"}),r="filter",i="blur(".concat(this.getCalcPlatformValue(h.glassEffect.radius,{needArtScale:!0,isHorizintal:!0}),")"),f.push({name:r,value:i})),h.objectEffect&&(h.blurGradient&&f.push({desc:"/*单个div无法实现渐变模糊效果*/"}),r="filter",i="blur(".concat(this.getCalcPlatformValue(h.objectEffect,{needArtScale:!0,isHorizintal:!0}),")"),f.push({name:r,value:i})),h.backgroundEffect){h.blurGradient&&f.push({desc:"/*单个div无法实现渐变模糊效果*/"}),r="backdrop-filter",i="blur(".concat(this.getCalcPlatformValue(h.backgroundEffect,{needArtScale:!0,isHorizintal:!0}),")");var At=h.backgroundEffectBrightness,Ft=h.backgroundEffectSaturation;"number"===typeof At&&1!==At&&(i+=" brightness(".concat(At,")")),"number"===typeof Ft&&1!==Ft&&(i+=" saturate(".concat(Ft,")")),f.push({name:r,value:i})}var jt=[],_t=[];if(h.shadows.forEach((function(t){if(t){var e=s.getCssShowColor(t.color,void 0,t.swatch);e.swatch&&_t.push(e.swatch),jt.push("".concat(t.x," ").concat(t.y," ").concat(t.blur).concat(t.spread?" "+t.spread:""," ").concat(e.value))}})),h.innerShadows.forEach((function(t){if(t){var e=s.getCssShowColor(t.color,void 0,t.swatch);e.swatch&&_t.push(e.swatch),jt.push("".concat(t.x," ").concat(t.y," ").concat(t.blur).concat(t.spread?" "+t.spread:""," ").concat(e.value," inset"))}})),jt.length>0&&(r=d.types.Text?"text-shadow":"box-shadow",i=jt.join(","),f.push({name:r,value:i,swatch:_t.join("\n    ")})),!d.markedForExport&&d.types.Text){var Mt=d.styleRanges;if(Object(l["i"])(Mt)&&Mt.length>0&&(Mt=Mt[0],Mt)){if(Mt.fontFamily&&(r="font-family",i=Mt.fontFamily,f.push({name:r,value:i})),Mt.fontWeightCss&&"400"!==Mt.fontWeightCss&&(r="font-weight",i=Mt.fontWeightCss,f.push({name:r,value:i})),Mt.fontItalic&&"normal"!==Mt.fontItalic&&(r="font-style",i=Mt.fontItalic,f.push({name:r,value:i})),!Ct&&Mt.fill&&null!=Mt.fill.value){r="color";var Lt=Mt,Pt=Lt.fills,Dt=Lt.fill;if((null===Pt||void 0===Pt?void 0:Pt.length)>1){for(var Nt=V(Pt[Pt.length-1].value),Et=Pt.length-2;Et>=0;Et--){var Rt=Pt[Et];Nt=K(Nt,V(Rt.value))}Dt={value:H(Nt.r,Nt.g,Nt.b,Nt.a),swatch:Dt.swatch}}var Vt=tt(this.sketchGroupFillColor,Dt.value,Dt.swatch);i=this.getCssShowColor(Vt.value,r,Vt.swatch),f.push(i)}null!=Mt.fontSize&&(r="font-size",i=this.getCalcPlatformValue(Mt.fontSize,{fontSize:!0,needArtScale:!0,isHorizintal:!0}),f.push({name:r,value:i})),0!==Mt.charSpacing&&null!=Mt.charSpacing&&(r="letter-spacing",i=this.getCalcPlatformValue(Mt.charSpacing,{needArtScale:!0,isHorizintal:!0}),f.push({name:r,value:i})),Mt.underline?(r="text-decoration",i="underline",f.push({name:r,value:i})):Mt.strikethrough&&(r="text-decoration",i="line-through",f.push({name:r,value:i}))}0!=d.paragraphIndent&&null!=d.paragraphIndent&&(r="text-indent",i=this.getCalcPlatformValue(d.paragraphIndent,{needArtScale:!0,isHorizintal:!0}),f.push({name:r,value:i})),0!=d.paragraphSpacing&&null!=d.paragraphSpacing&&(r="padding-bottom",i=this.getCalcPlatformValue(d.paragraphSpacing,{needArtScale:!0,isHorizintal:!1}),f.push({name:r,value:i})),r="line-height",i=0!=d.lineSpacing&&null!=d.lineSpacing?this.getCalcPlatformValue(d.lineSpacing,{needArtScale:!0,isHorizintal:!1}):"normal",f.push({name:r,value:i}),d.textAlign&&(r="text-align",i=d.textAlign,"left"!=i&&f.push({name:r,value:i})),d.textVerticalAlign&&(r="vertical-align",i=d.textVerticalAlign,f.push({name:r,value:i}))}var Bt=f.findIndex((function(t){return"height"===t.name})),Ht=-1===Bt?-1:f.findIndex((function(t){return"line-height"===t.name}));if(-1!==Ht){var Ut=f[Ht];f.splice(Ht,1),f.splice(Bt+1,0,Ut)}return f},propertyText:function(){var t=this.properties;return t.filter((function(t){return!!t.name||!!t.desc})).map((function(t){return t.name?"".concat(t.swatch?"/* ".concat(t.swatch," */\n"):"").concat(t.name,": ").concat(t.value,";"):t.desc})).join("\n").trim()}}},RS=ES,VS=(n("cb5a"),Object(Gr["a"])(RS,DS,NS,!1,null,"40cf8e7c",null)),BS=VS.exports,HS=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box prop-export"},[e("h5",[e("span",{staticClass:"i-text icon-slice"},[t._v("切图")]),e("span",{staticClass:"export-bg"},[e("span",{class:{on:t.ExportBoxBackgroundType.Black===t.exportBoxBackground,black:1},attrs:{title:"深色背景填充"},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Black)}}}),e("span",{class:{on:t.ExportBoxBackgroundType.Transparent===t.exportBoxBackground,transparent:1},attrs:{title:"浅色背景填充"},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Transparent)}}})])]),e("section",{staticClass:"preview",class:["type"+t.exportBoxBackground]},[t.exportPdfOnly?e("PdfViewer",{attrs:{maxWidth:"256px",maxHeight:"112px",url:t.exportPreviewSrc}}):e("img",{class:{jpg:t.currentResInJpg},attrs:{src:t.exportPreviewSrc}})],1),e("section",{staticClass:"download-box"},[e("PropertyDownloadOptions",{ref:"downOptions",attrs:{currentResInPdf:t.currentResInPdf,currentResInSvg:t.currentResInSvg,currentResInJpg:t.currentResInJpg,exportPdfOnly:t.exportPdfOnly,exportSvgOnly:t.exportSvgOnly,jpgQuality:t.jpgQuality,downloadPlatform:t.calcPlatformUse,node:t.curNode},on:{setJpgQuality:t.setJpgQuality,clickDownSelect:t.clickDownSelect}}),e("div",{staticClass:"btns"},[e("Select",{attrs:{options:t.resTypeSelectOptions,checkShowUpFixedHeight:48,light:!0},on:{changed:t.onResTypeSelectChanged}}),t.currentResInSvg||t.currentResInPdf?e("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:t.clickDownSelect}},[t._v("下载切图")]):e("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:t.clickDownSelectAll}},[t._v("下载切图")]),t.inCloudMode&&t.currentResInSvg?e("a",{staticClass:"button btn-copy",attrs:{href:"javascript:;",title:"拷贝SVG数据到剪切板"},on:{click:function(e){return t.clickCopySvg()}}}):t._e()],1)],1)])},US=[],GS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"down-options-box"},[t.downloadPlatform===t.CALC_PLATFORM_TYPE.ANDROID?e("Select",{attrs:{options:t.androidUseMipmapSelectOptions,light:!0},on:{changed:t.onAndroidUseMipmapSelectChanged}}):t._e(),e("div",{staticClass:"down-options",class:t.optionsClass},[t._l(t.downloadPlatformItems,(function(n){return e("PropertyDownloadItem",{key:n.value.name,attrs:{config:n.value,node:t.node,enabled:n.enabled,selected:t.currentResInSvg||t.currentResInPdf||1==t.checkSetting[n.value.scale]},on:{clickItemSelect:t.clickItemSelect,clickDownSelect:t.clickDownSelect}})})),t.currentResInJpg?e("div",{staticClass:"jpg-quality"},[e("div",{staticClass:"text"},[t._v("JPG质量")]),e("div",{staticClass:"quality-num"},[t._v(t._s(t.jpgQuality))]),e("div",{staticClass:"pullrod"},[e("div",{staticClass:"line",on:{click:t.clickPullrodLine}}),e("span",{style:{left:t.jpgQualityCssLeft},on:{mousedown:t.onPullrodMouseDown}})]),e("div",{staticClass:"button",on:{click:t.clickResetQuality}},[t._v("重置")])]):t._e()],2)],1)},WS=[],$S=function(){var t=this,e=t._self._c;return e("section",{staticClass:"item",class:{disabled:!t.enabled},attrs:{title:t.title}},[e("Checkbox",{attrs:{text:t.name,selected:t.selected&&t.enabled},on:{click:t.clickItemSelect}}),null!=t.node?e("section",[e("span",{staticClass:"size"},[t._v(t._s(t.size))]),e("a",{staticClass:"btn-down-current",attrs:{href:"javascript:;",title:"下载该项切图"},on:{click:t.clickDownSelect}})]):t._e()],1)},zS=[],YS={methods:{clickDownSelect:function(){var t={};t[this.config.scale]=1,this.$emit("clickDownSelect",t)},clickItemSelect:function(t){!t||this.enabled?this.$emit("clickItemSelect",this.config.scale,t):this.showTextTip("您无法导出该规格切图,因为设计狮没有为该画板导出该规格切图")}},computed:{inMultMode:function(){return null==this.node},title:function(){var t=this.config,e=t.name;return e},name:function(){var t,e=this.config;return t=e.name,t},originWidth:function(){return this.inMultMode?0:this.node.boundsInArtboard.width},originHeight:function(){return this.inMultMode?0:this.node.boundsInArtboard.height},size:function(){if(this.inMultMode)return"";if(!this.enabled)return"--";var t=this.node,e=this.curArtboardLoadedVerData,n=null===e||void 0===e?void 0:e.mlConfig;if(n){var i=n.sizeMap;if(i){var r=(this.config.resname||this.config.filepath).replace("{$name$}",t.exportPath).toLowerCase(),o=i[r];if(o)return"".concat(o.width,"x").concat(o.height)}}var a=this.config.scale;return"".concat(Math.ceil(Object(m["a"])(this.originWidth*a,2)),"x").concat(Math.ceil(Object(m["a"])(this.originHeight*a,2)))}},props:{config:Object,node:Object,selected:Boolean,enabled:Boolean},components:{Checkbox:vh}},XS=YS,KS=(n("3679"),Object(Gr["a"])(XS,$S,zS,!1,null,"16af5552",null)),qS=KS.exports,JS={methods:{clickPullrodLine:function(t){var e=Math.round(t.layerX/1.06);isNaN(e)||(e=Math.max(1,e),e=Math.min(100,e),this.$emit("setJpgQuality",e))},onPullrodMouseDown:function(t){this.mouseDownStartQuality=this.jpgQuality,this.mouseDownStartX=t.pageX,window.addEventListener("mouseup",this.onPullrodMouseUp),window.addEventListener("mousemove",this.onPullrodMouseMove)},onPullrodMouseMove:function(t){var e=t.pageX-this.mouseDownStartX,n=Math.round(this.mouseDownStartQuality+e/1.06);n=Math.max(1,n),n=Math.min(100,n),this.$emit("setJpgQuality",n)},onPullrodMouseUp:function(){window.removeEventListener("mouseup",this.onPullrodMouseUp),window.removeEventListener("mousemove",this.onPullrodMouseMove)},clickResetQuality:function(){this.$emit("setJpgQuality",yt)},onAndroidUseMipmapSelectChanged:function(t){Object(l["k"])(t)&&this.clickSetAndroidUseMipmap(t.value)},clickSetAndroidUseMipmap:function(t){this.$store.commit("setAndroidUseMipmap",t)},clickDownSelect:function(t){this.$emit("clickDownSelect",t)},clickItemSelect:function(t,e){if(!this.currentResInSvg&&!this.currentResInPdf){var n=this.checkSetting;this.$set(n,t,e?1:0),this.setLocalCheckSetting(n)}},initCheckSetting:function(){var t=this.getLocalCheckSetting();this.checkSetting=t},setLocalCheckSetting:function(t){var e=this.downloadPlatform;Object(c["jb"])("reschecked.".concat(e),t)},getLocalCheckSetting:function(){var t=this.downloadPlatform,e=Object(c["F"])("reschecked.".concat(t),!0);if(!Object(l["k"])(e))switch(t){case a["c"].WEB:case a["c"].WE_CHAT_MINI_PROGRAM:e={2:1};break;case a["c"].IOS:e={1:1,2:1,3:1};break;case a["c"].ANDROID:e={1:1,1.5:1,2:1,3:1,4:1};break}return[1,2,3,4,1.5].forEach((function(t){e[t]||(e[t]=0)})),e}},created:function(){this.initCheckSetting()},watch:{downloadPlatform:function(){this.initCheckSetting()}},computed:{jpgQualityCssLeft:function(){var t=this.jpgQuality;return Math.round(1.06*t)+"px"},optionsClass:function(){var t={};switch(this.currentResInSvg&&(t.svg=1),this.currentResInPdf&&(t.pdf=1),this.inMultMode&&(t.mult=1),this.downloadPlatform){case a["c"].ANDROID:t.android=1;break;case a["c"].WEB:t.web=1;break;case a["c"].WE_CHAT_MINI_PROGRAM:t.wx_mp=1;break;case a["c"].IOS:t.ios=1;break}return t},inMultMode:function(){return null==this.node},androidUseMipmapSelectOptions:function(){return[{name:"drawable-...",value:!1,selected:!this.androidUseMipmap,title:"Android目录前缀"},{name:"mipmap-...",value:!0,selected:this.androidUseMipmap,title:"Android目录前缀"}]},downloadPlatformItems:function(){return ka(this.curArtboard,this.downloadPlatform,this.androidUseMipmap,this.currentResInSvg,this.currentResInPdf,this.currentResInJpg&&this.exportSvgOnly,this.currentResInJpg&&this.exportPdfOnly,this.inCloudViewerArtboardInfoMode)}},data:function(){return{mouseDownStartX:0,mouseDownStartQuality:0,CALC_PLATFORM_TYPE:a["c"],checkSetting:{}}},components:{PropertyDownloadItem:qS,Select:lh},props:{jpgQuality:Number,currentResInJpg:Boolean,exportSvgOnly:Boolean,currentResInSvg:Boolean,exportPdfOnly:Boolean,currentResInPdf:Boolean,downloadPlatform:Number,node:Object,bottomPosition:Boolean}},QS=JS,ZS=(n("321d"),Object(Gr["a"])(QS,GS,WS,!1,null,"72b40fa7",null)),tT=ZS.exports,eT=function(){var t=this,e=t._self._c;return e("iframe",{ref:"iframe",staticClass:"pdf-viewer",style:t.style,attrs:{src:"about:blank"}})},nT=[],iT={methods:{loadUrl:function(t){ha(this.$refs.iframe,t,this.maxWidth,this.maxHeight)},loadBlank:function(){try{this.$refs.iframe.src="about:blank"}catch(t){}}},computed:{style:function(){var t=this.maxWidth,e=this.maxHeight;return{maxWidth:t,maxHeight:e}}},beforeDestroy:function(){this.loadBlank()},mounted:function(){this.loadUrl(this.url)},watch:{url:function(t){t&&this.loadUrl(this.url)}},props:{url:String,maxWidth:String,maxHeight:String}},rT=iT,oT=(n("9edf"),Object(Gr["a"])(rT,eT,nT,!1,null,"aa8b5fba",null)),aT=oT.exports,sT={methods:{clickCopySvg:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return t.setInOutput(!0),e.p=1,n=t.curNode,r=t.curArtboard,o=Object(c["H"])(n),e.n=2,xa(n,r,t.inCloudViewerArtboardInfoMode);case 2:a=e.v,t.showTextTip(a?"已拷贝「".concat(o,"」到剪切板"):"拷贝「".concat(o,"」到剪切板失败了")),e.n=4;break;case 3:e.p=3,s=e.v,t.showTextTip(s);case 4:return e.p=4,t.setInOutput(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})))()},setJpgQuality:function(t){t>0&&t<=100&&(this.jpgQuality=t,Object(c["jb"])(kt,t))},clickExportBoxBackgroundType:function(t){this.$store.commit("exportBoxBackgroundType",t)},onResTypeSelectChanged:function(t){Object(l["k"])(t)&&this.clickCurrentResType(t.value)},clickCurrentResType:function(t){switch(t){case a["fb"].PNG:if(!this.exportPng)return void this.showTextTip("设计狮没有为该画板导出「PNG」格式的切图");break;case a["fb"].WEBP:if(!this.exportWebP)return void this.showTextTip("设计狮没有为该画板导出「WEBP」格式的切图");break;case a["fb"].SVG:if(!this.exportSvg)return void this.showTextTip("设计狮没有为该画板导出「SVG」格式的切图");break;case a["fb"].PDF:if(!this.exportPdf)return void this.showTextTip("设计狮没有为该画板导出「PDF」格式的切图");break;case a["fb"].JPG:break}this.currentResType=t,Object(c["jb"])("resType",t)},clickDownSelectAll:function(){this.clickDownSelect(this.$refs.downOptions.checkSetting)},clickDownSelect:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(e.setInOutput(!0),n.p=1,!e.currentResInPdf){n.n=3;break}return n.n=2,Ca([e.curNode],e.curArtboard,e.inCloudViewerArtboardInfoMode);case 2:n.n=8;break;case 3:if(!e.currentResInSvg){n.n=5;break}return n.n=4,Ta([e.curNode],e.curArtboard,e.inCloudViewerArtboardInfoMode);case 4:n.n=8;break;case 5:if(!e.currentResInJpg){n.n=7;break}return n.n=6,Wa(e.calcPlatformUse,e.androidUseMipmap,t,[e.curNode],e.curArtboard,e.jpgQuality/100,e.inCloudViewerArtboardInfoMode);case 6:n.n=8;break;case 7:return n.n=8,$a(e.calcPlatformUse,e.androidUseMipmap,t,[e.curNode],e.curArtboard,e.currentResInWebP,e.inCloudViewerArtboardInfoMode);case 8:n.n=10;break;case 9:n.p=9,r=n.v,e.showTextTip(r);case 10:return n.p=10,e.setInOutput(!1),n.f(10);case 11:return n.a(2)}}),n,null,[[1,9,10,11]])})))()},initJpgQuality:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["F"])(kt,!1));(isNaN(e)||e<1||e>=100)&&(e=yt),this.jpgQuality=e}},initCurrentResType:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["F"])("resType",!1));(isNaN(e)||!isFinite(e)||e!==a["fb"].SVG&&e!==a["fb"].PDF&&e!==a["fb"].WEBP&&e!==a["fb"].JPG)&&(e=a["fb"].PNG);var n=this.curArtboardLoadedVerData.mlConfig.resType;n||(n=a["fb"].PNG);var i=this.exportPng,r=this.exportSvg,o=this.exportWebP,s=this.exportPdf;switch(e){case a["fb"].PNG:i||(o?e=a["fb"].WEBP:r?e=a["fb"].SVG:s&&(e=a["fb"].PDF));break;case a["fb"].SVG:r||(i?e=a["fb"].PNG:o?e=a["fb"].WEBP:s&&(e=a["fb"].PDF));break;case a["fb"].PDF:s||(i?e=a["fb"].PNG:o?e=a["fb"].WEBP:r&&(e=a["fb"].SVG));break;case a["fb"].WEBP:o||(i?e=a["fb"].PNG:r?e=a["fb"].SVG:s&&(e=a["fb"].PDF));break;case a["fb"].JPG:i||r||o||s||(e=a["fb"].PNG);break}this.currentResType=e}}},created:function(){this.initCurrentResType(),this.initJpgQuality()},watch:{inMultDownMode:function(){this.initCurrentResType(),this.initJpgQuality()},curArtboard:function(){this.initCurrentResType(),this.initJpgQuality()}},data:function(){return{currentResType:a["fb"].PNG,jpgQuality:yt}},computed:{ExportBoxBackgroundType:function(){return a["ab"]},resTypeSelectOptions:function(){var t=this.currentResType,e={value:a["fb"].PNG,name:"PNG",selected:t===a["fb"].PNG,disabled:!this.exportPng},n={value:a["fb"].WEBP,name:"WEBP",selected:t===a["fb"].WEBP,disabled:!this.exportWebP},i={value:a["fb"].SVG,name:"SVG",selected:t===a["fb"].SVG,disabled:!this.exportSvg},r={value:a["fb"].PDF,name:"PDF",selected:t===a["fb"].PDF,disabled:!this.exportPdf},o={value:a["fb"].JPG,name:"JPG",selected:t===a["fb"].JPG,disabled:!1};return[e,n,i,r,o]},exportWebP:function(){return Object(c["T"])(this.curArtboardLoadedVerData)},exportPng:function(){return Object(c["R"])(this.curArtboardLoadedVerData)},exportSvg:function(){return Object(c["S"])(this.curArtboardLoadedVerData)},exportPdf:function(){return Object(c["Q"])(this.curArtboardLoadedVerData)},exportSvgOnly:function(){return this.exportSvg&&!this.exportPng&&!this.exportWebP},exportPdfOnly:function(){return this.exportPdf&&!this.exportSvg&&!this.exportPng&&!this.exportWebP},currentResInPdf:function(){return this.currentResType===a["fb"].PDF},currentResInSvg:function(){return this.currentResType===a["fb"].SVG},currentResInJpg:function(){return this.currentResType===a["fb"].JPG},currentResInWebP:function(){return this.currentResType===a["fb"].WEBP},exportPreviewSrc:function(){var t,e,n=null!==(t=null===(e=this.curNode)||void 0===e?void 0:e.mlConfig)&&void 0!==t?t:{},i=n.pngPreview,r=n.svgPreview,o=n.pdfPreview,a=i||r;return this.inCloudMode?this.exportPdfOnly&&!a&&o?this.combineResourcePath(o):this.combineResourcePath(a):a+"?"+this.curArtboard.artboard.mlOutputTime}},components:{PropertyDownloadOptions:tT,Select:lh,PdfViewer:aT}},cT=sT,lT=(n("ea24"),Object(Gr["a"])(cT,HS,US,!1,null,"319ad73a",null)),uT=lT.exports,dT=function(){var t,e=this,n=e._self._c;return e.visible?n("section",{staticClass:"prop-box"},[n("h5",{staticClass:"fill-title"},[n("span",{staticClass:"i-text",class:{"icon-stack":1},domProps:{textContent:e._s(null===(t=e.groupLayout)||void 0===t?void 0:t.name)}})]),n("PropertyInfoBorderBox",{attrs:{nodeStyle:e.nodeStyle}}),null!=e.flexDirection||null!=e.flexWrap?n("dl",{staticClass:"item"},[n("dt",{domProps:{textContent:e._s(null!=e.flexDirection&&null!=e.flexWrap?"方向/换行":null!=e.flexDirection?"方向":"换行")}}),n("dd",[null!=e.flexDirection?n("PropertyShowValue",{attrs:{cls:{bt:1},title:e.flexDirection.title,value:e.flexDirection.text}}):e._e(),null!=e.flexWrap?n("PropertyShowValue",{attrs:{cls:{m2:null!=e.flexDirection},title:e.flexWrap.title,value:e.flexWrap.text}}):e._e(),null==e.flexDirection||null==e.flexWrap?n("div",{staticClass:"inp empty m2"}):e._e()],1)]):e._e(),null!=e.justifyContent||null!=e.alignItems?n("dl",{staticClass:"item in-swatch"},[n("dt",[e._v("对齐方式")]),n("dd",{staticClass:"use-desc"},[null!=e.justifyContent?n("PropertyShowValue",{attrs:{cls:{bt:1},title:e.justifyContent.title,value:e.justifyContent.text}}):e._e(),null!=e.alignItems?n("PropertyShowValue",{attrs:{cls:{m2:null!=e.justifyContent,bt:null==e.justifyContent},title:e.alignItems.title,value:e.alignItems.text}}):e._e(),null==e.justifyContent||null==e.alignItems?n("div",{staticClass:"inp empty m2"}):e._e(),n("div",{staticClass:"desc-text"},[null!=e.justifyContent?n("i",{staticClass:"bt",domProps:{textContent:e._s(e.directionText.primary)}}):e._e(),null!=e.alignItems?n("i",{domProps:{textContent:e._s(e.directionText.counter)}}):e._e()])],1)]):e._e(),null!=e.allGuttersGap?n("dl",{staticClass:"item",class:{"in-swatch":null!=e.counterGap}},[n("dt",{attrs:{title:"gap"}},[e._v("间距")]),n("dd",{class:{"use-desc":null!=e.counterGap}},[n("PropertyShowValue",{attrs:{cls:{bt:1},value:e.allGuttersGap,title:""}}),null!=e.counterGap?n("PropertyShowValue",{attrs:{cls:{m2:1},title:"",value:e.counterGap}}):n("div",{staticClass:"inp empty m2"}),null!=e.counterGap?n("div",{staticClass:"desc-text"},[n("i",{staticClass:"bt",domProps:{textContent:e._s(e.directionText.primary)}}),n("i",{domProps:{textContent:e._s(e.directionText.counter)}})]):e._e()],1)]):e._e(),null!=e.alignContent?n("dl",{staticClass:"item"},[n("dt",{attrs:{title:"align-content"}},[e._v("内容对齐")]),n("dd",[n("PropertyShowValue",{attrs:{cls:{bt:1},title:e.alignContent.title,value:e.alignContent.text}}),n("div",{staticClass:"inp empty m2"})],1)]):e._e(),null!=e.paddingText?n("dl",{staticClass:"item"},[n("dt",{attrs:{title:"padding"}},[e._v("内边距")]),n("dd",[n("PropertyShowValue",{attrs:{cls:{bt:1},value:e.paddingText.text,title:e.paddingText.title}}),e.paddingText.one?n("div",{staticClass:"inp empty m2"}):e._e()],1)]):e._e()],1):e._e()},hT=[],fT=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"property-info-border-box"},[e("div",{staticClass:"bhc position"},[t._m(0),e("div",{staticClass:"bvc"},[e("div",{staticClass:"bl"}),e("div",{staticClass:"bhc border"},[e("div",{staticClass:"bt",attrs:{title:t.borderBox.useBorder?t.borderBox.border.top:null},on:{click:t.clickCopy}},[e("div",{staticClass:"title",domProps:{textContent:t._s(t.borderBox.useBorder?"border":"no border")}}),t.borderBox.useBorder?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.border.topN)}}):t._e()]),e("div",{staticClass:"bvc"},[e("div",{staticClass:"bl",class:{min:!t.borderBox.useBorder},attrs:{title:t.borderBox.useBorder?t.borderBox.border.left:null},on:{click:t.clickCopy}},[t.borderBox.useBorder?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.border.leftN)}}):t._e()]),e("div",{staticClass:"bhc padding"},[e("div",{staticClass:"bt",attrs:{title:t.borderBox.usePadding?t.borderBox.padding.top:null},on:{click:t.clickCopy}},[e("div",{staticClass:"title",domProps:{textContent:t._s(t.borderBox.usePadding?"padding":"no padding")}}),t.borderBox.usePadding?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.padding.topN)}}):t._e()]),e("div",{staticClass:"bvc"},[e("div",{staticClass:"bl",class:{min:!t.borderBox.usePadding},attrs:{title:t.borderBox.usePadding?t.borderBox.padding.left:null},on:{click:t.clickCopy}},[t.borderBox.usePadding?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.padding.leftN)}}):t._e()]),e("div",{staticClass:"bhc content",attrs:{title:"".concat(t.borderBox.content.width," x ").concat(t.borderBox.content.height)},on:{click:t.clickCopy}},[e("div",{staticClass:"text"},[t._v(t._s(t.borderBox.content.widthN)),e("span",{staticClass:"m"},[t._v("x")]),t._v(t._s(t.borderBox.content.heightN))])]),e("div",{staticClass:"br",class:{min:!t.borderBox.usePadding},attrs:{title:t.borderBox.usePadding?t.borderBox.padding.right:null},on:{click:t.clickCopy}},[t.borderBox.usePadding?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.padding.rightN)}}):t._e()])]),e("div",{staticClass:"bb",class:{min:!t.borderBox.usePadding},attrs:{title:t.borderBox.usePadding?t.borderBox.padding.bottom:null},on:{click:t.clickCopy}},[t.borderBox.usePadding?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.padding.bottomN)}}):t._e()])]),e("div",{staticClass:"br",class:{min:!t.borderBox.useBorder},attrs:{title:t.borderBox.useBorder?t.borderBox.border.right:null},on:{click:t.clickCopy}},[t.borderBox.useBorder?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.border.rightN)}}):t._e()])]),e("div",{staticClass:"bb",class:{min:!t.borderBox.useBorder},attrs:{title:t.borderBox.useBorder?t.borderBox.border.bottom:null},on:{click:t.clickCopy}},[t.borderBox.useBorder?e("div",{staticClass:"text",domProps:{textContent:t._s(t.borderBox.border.bottomN)}}):t._e()])]),e("div",{staticClass:"br"})]),t._m(1)])]):t._e()},mT=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bt"},[e("div",{staticClass:"text pt min"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"bb"},[e("div",{staticClass:"text pt"},[t._v("border-box")])])}],vT={methods:{clickCopy:function(t){var e,n=null===t||void 0===t||null===(e=t.target)||void 0===e?void 0:e.title;if(n){var i=Object(c["p"])(n);i?this.showTextTip("已复制文本: ".concat(n),2):this.showTextTip("复制到剪切板失败",2)}}},computed:{visible:function(){return null!=this.borderBox},markedForExport:function(){var t;return 1==(null===(t=this.curNode)||void 0===t?void 0:t.markedForExport)},isArtboardNode:function(){var t;return 1===(null===(t=this.curNode)||void 0===t?void 0:t.types.Artboard)},borderBox:function(){var t=this,e=this.markedForExport,n=this.nodeStyle;if((null===n||void 0===n||!n.groupLayout)&&(null===n||void 0===n||!n.groupGrid))return null;var i=null===n||void 0===n?void 0:n.borderBox;if(!i)return null;var r=["top","left","width","height","bottom","right"],o={usePadding:!1,useBorder:!1};return["padding","position","border","content"].forEach((function(n){var a=i[n],s=o[n]={};if(Object(l["k"])(a)){switch(n){case"padding":o.usePadding=0!==a.top||0!==a.left||0!==a.bottom||0!==a.right;break;case"border":o.useBorder=0!==a.top||0!==a.left||0!==a.bottom||0!==a.right;break}r.forEach((function(n){var i=a[n];if(s[n+"Origin"]=i,"number"===typeof i){var r=e&&("width"===n||"height"===n);s[n]=t.getCalcPlatformValue(i,{isHorizintal:"left"===n||"right"===n||"width"===n,markedForExport:r}),s[n+"N"]=t.getCalcValue(i,r,!1)}else s[n+"N"]=s[n]=i}))}})),o}},props:{nodeStyle:Object}},pT=vT,bT=(n("d5dd"),Object(Gr["a"])(pT,fT,mT,!1,null,"a29099da",null)),gT=bT.exports,wT={components:{PropertyInfoBorderBox:gT,PropertyShowValue:SC},props:{nodeStyle:Object,isFigmaArtboard:Boolean},computed:{directionText:function(){var t=this.flexDirection;return{primary:"主轴".concat(t?"(".concat(t.textCN,")"):""),counter:"交叉轴".concat(t?"(".concat(t.textCounterCN,")"):"")}},paddingText:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=e.paddings,i=e.usePadding;if(!i)return null;var r=n.top,o=n.left,a=n.right,s=n.bottom,c=r===s&&o===a,l=c&&r===o;return{text:l?r:c?"".concat(r," ").concat(a):"".concat(r," ").concat(a," ").concat(s," ").concat(o),title:l?"":c?"上/下 左/右":"上 右 下 左",one:l,short:c}},allGuttersGap:function(){var t=this.visible,e=this.groupLayout;return t?e.allGuttersGap:null},counterGap:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=e.counterGap,i=e.allGuttersGap;return null!=n&&i!=n?n:null},alignItems:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=a["y"].getCss(e.alignItems);return n?{text:n.text,title:n.textCN}:null},flexWrap:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=e.flexWrap;if(!a["E"].needShowProperty(n,this.isFigmaArtboard))return null;var i=a["E"].getCss(n);return i?{text:i.value,title:i.textCN}:null},alignContent:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;if(!a["E"].needAlignContent(e.flexWrap))return null;var n=e.alignContent;if(!a["x"].needShowProperty(n))return null;var i=a["x"].getCss(n);return i?{text:i.text,title:i.textCN}:null},justifyContent:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=a["B"].getCss(e.justifyContent);return n?{text:n.text,title:n.textCN}:null},flexDirection:function(){var t=this.visible,e=this.groupLayout;if(!t)return null;var n=a["A"].getCss(e.flexDirection);return n?{text:n.text,title:"".concat(n.textCN," / ").concat(n.value),textCounterCN:n.textCounterCN,textCN:n.textCN}:null},groupLayout:function(){return this.nodeStyle.groupLayout},visible:function(){return null!=this.groupLayout}},created:function(){}},yT=wT,kT=(n("b15c"),Object(Gr["a"])(yT,dT,hT,!1,null,"8d69f990",null)),CT=kT.exports,xT=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"prop-box"},[e("h5",{staticClass:"fill-title"},[e("span",{staticClass:"i-text icon-stack icon-grid",domProps:{textContent:t._s(t.groupGrid.name)}})]),e("PropertyInfoBorderBox",{attrs:{nodeStyle:t.nodeStyle}}),e("dl",{staticClass:"item"},[e("dt",[t._v("Flow")]),e("dd",[e("PropertyShowValue",{attrs:{title:"Grid",value:"网格"}}),e("div",{staticClass:"inp empty m2"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("行/列数")]),e("dd",[e("PropertyShowValue",{attrs:{title:"行数",value:t.groupGrid.rowCount}}),e("PropertyShowValue",{attrs:{cls:{m2:1},title:"列数",value:t.groupGrid.columnCount}})],1)]),null!=t.rowGap?e("dl",{staticClass:"item",class:{"in-swatch":null!=t.columnGap}},[e("dt",{attrs:{title:"gap"}},[t._v("间距")]),e("dd",{class:{"use-desc":null!=t.columnGap}},[e("PropertyShowValue",{attrs:{value:t.rowGap}}),null!=t.columnGap?e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.columnGap}}):e("div",{staticClass:"inp empty m2"}),null!=t.columnGap?e("div",{staticClass:"desc-text"},[e("i",[t._v("水平")]),e("i",[t._v("垂直")])]):t._e()],1)]):t._e(),null!=t.paddingText?e("dl",{staticClass:"item"},[e("dt",{attrs:{title:"padding"}},[t._v("内边距")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.paddingText.text,title:t.paddingText.title}}),t.paddingText.one?e("div",{staticClass:"inp empty m2"}):t._e()],1)]):t._e()],1):t._e()},ST=[],TT={components:{PropertyShowValue:SC,PropertyInfoBorderBox:gT},props:{nodeStyle:Object,isFigmaArtboard:Boolean},computed:{paddingText:function(){var t=this.visible,e=this.groupGrid;if(!t)return null;var n=e.paddings,i=e.usePadding;if(!i)return null;var r=n.top,o=n.left,a=n.right,s=n.bottom,c=r===s&&o===a,l=c&&r===o;return{text:l?r:c?"".concat(r," ").concat(a):"".concat(r," ").concat(a," ").concat(s," ").concat(o),title:l?"":c?"上/下 左/右":"上 右 下 左",one:l,short:c}},rowGap:function(){var t=this.visible,e=this.groupGrid;return t&&e.useGap?e.rowGap:null},columnGap:function(){var t=this.visible,e=this.groupGrid;if(!t||!e.useGap)return null;var n=e.rowGap,i=e.columnGap;return null!=i&&i!=n?i:null},groupGrid:function(){return this.nodeStyle.groupGrid},visible:function(){return null!=this.groupGrid}},created:function(){}},OT=TT,IT=(n("2fc2"),Object(Gr["a"])(OT,xT,ST,!1,null,"4d8ecb4c",null)),AT=IT.exports,FT=function(){var t=this,e=t._self._c;return e("section",{staticClass:"header"},[e("div",{staticClass:"platform"},[e("a",{staticClass:"btn-set-platform",class:Object(f["a"])({on:t.setting},t.calcPlatformTypeCss,!0),attrs:{href:"javascript:;"},on:{click:function(e){t.setting=!t.setting}}},[t._v(t._s(t.size)+" ")]),e("span",{staticClass:"size"},[e("span",{staticClass:"round-num",class:{on:t.numberAutoRound},on:{click:t.clickRoundNum}},[t._v("数值取整")])])]),t.setting?e("SetPlatform",{on:{clickCalcPlatform:t.clickCalcPlatform,hideSetting:t.hideSetting}}):t._e()],1)},jT=[],_T=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"set-platform"},[e("li",{class:{web:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.WEB}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.WEB})}}},[t._v("Web")])]),e("li",{class:{android:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.ANDROID}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.ANDROID})}}},[t._v("Android")])]),e("li",{class:{ios:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.IOS}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.IOS})}}},[t._v("iOS")])]),e("li",{class:{wx_mp:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.WE_CHAT_MINI_PROGRAM}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.WE_CHAT_MINI_PROGRAM})}}},[t._v("微信小程序")])]),e("li",{staticClass:"custom"},[e("dl",{class:{size:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.CUSTOM}},[e("dt",{staticClass:"name",attrs:{title:"无视文档设计尺寸,强制指定当前画板的宽度"}},[t._v("自定义宽度")]),e("dd",{staticClass:"auto"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.calcPlatformCustomDocWidth2,expression:"calcPlatformCustomDocWidth2"}],ref:"inpWidth",staticClass:"inp",attrs:{type:"text",spellcheck:"false"},domProps:{value:t.calcPlatformCustomDocWidth2},on:{input:function(e){e.target.composing||(t.calcPlatformCustomDocWidth2=e.target.value)}}})]),e("dd",[e("Select",{attrs:{options:t.unitSelectOptions,light:!0},on:{changed:t.onUnitSelectChanged}})],1),e("dd",[e("a",{staticClass:"button light btn-save",attrs:{href:"javascript:;"},on:{click:t.clickCalcPlatformCustom}},[t._v("保存")])])]),e("div",{staticClass:"tip"},[t._v("注:填0则自动取对应画板设计尺寸")])]),e("li",{staticClass:"template"},[e("dl",[e("dt",[e("span",{staticClass:"name"},[t._v("自定义单位模板"),e("Checkbox2",{attrs:{text:"",selected:t.calcUnitTemplateEnable},on:{click:function(e){return t.clickTemplateEnable()}}})],1),e("a",{staticClass:"help",attrs:{href:"https://user.marklion.cn/router/linkto.ashx?id=10016",target:"_blank"}},[t._v("帮助")])]),e("dd",{staticClass:"input",class:{off:!t.calcUnitTemplateEnable}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.calcUnitTemplateValue2,expression:"calcUnitTemplateValue2"}],attrs:{autocomplete:"off",spellcheck:"false"},domProps:{value:t.calcUnitTemplateValue2},on:{input:function(e){e.target.composing||(t.calcUnitTemplateValue2=e.target.value)}}}),e("a",{staticClass:"button light btn-save",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickTemplateEnable(!0)}}},[t._v("保存")])]),t._m(0)])])])},MT=[function(){var t=this,e=t._self._c;return e("dd",{staticClass:"tip"},[e("div",[t._v("注:")]),e("ul",[e("li",[e("span",{staticClass:"t"},[t._v("%num%")]),t._v("当前数值")]),e("li",[e("span",{staticClass:"t"},[t._v("%W%")]),t._v("画板宽度")]),e("li",[e("span",{staticClass:"t"},[t._v("%H%")]),t._v("画板高度")]),e("li",[e("span",{staticClass:"t"},[t._v("%VW%")]),t._v("当前数值和画板宽度的百分比(1-100)")]),e("li",[e("span",{staticClass:"t"},[t._v("%VH%")]),t._v("当前数值和画板高度的百分比(1-100)")])])])}],LT={methods:{clickTemplateEnable:function(t){var e=t?this.calcUnitTemplateEnable:!this.calcUnitTemplateEnable,n=this.curArtboard.artboard,i={guid:n.docGuid,enable:e,template:t?this.calcUnitTemplateValue2:this.calcUnitTemplateValue};this.$store.commit("setUnitTemplate",i),this.calcUnitTemplateValue2=this.calcUnitTemplateValue,t&&this.$emit("hideSetting")},onUnitSelectChanged:function(t){this.calcPlatformCustomUnit2=t.value},clickCalcPlatformCustom:function(){var t={type:a["c"].CUSTOM,customUnit:this.calcPlatformCustomUnit2,customDocWidth:parseInt(this.calcPlatformCustomDocWidth2)};if(isNaN(t.customDocWidth)||!isFinite(t.customDocWidth)||t.customDocWidth<0)return this.showTextTip("指定宽度不合法,请正确输入"),void this.$refs.inpWidth.focus();this.clickCalcPlatform(t)},clickCalcPlatform:function(t){this.$emit("clickCalcPlatform",t)}},data:function(){return{calcPlatformType2:0,calcPlatformCustomUnit2:0,calcPlatformCustomDocWidth2:0,calcUnitTemplateValue2:"",CALC_PLATFORM_TYPE:a["c"],CALC_PLATFORM_UNIT:a["d"],unitSelectOptions:[{name:"px",value:a["d"].PX},{name:"dp",value:a["d"].DP},{name:"pt",value:a["d"].PT},{name:"rpx",value:a["d"].RPX}]}},components:{Select:lh,Checkbox2:rw},computed:{calcUnitTemplateEnable:function(){return this.$store.state.unitTemplate.enable}},created:function(){var t=this;this.calcPlatformType2=this.calcPlatformType,this.calcPlatformCustomUnit2=this.calcPlatformCustomUnit,this.unitSelectOptions.forEach((function(e){t.$set(e,"selected",e.value===t.calcPlatformCustomUnit2)})),this.calcPlatformCustomDocWidth2=this.calcPlatformCustomDocWidth,this.calcUnitTemplateValue2=this.calcUnitTemplateValue}},PT=LT,DT=(n("7d26"),Object(Gr["a"])(PT,_T,MT,!1,null,"941aacd6",null)),NT=DT.exports,ET={methods:{clickRoundNum:function(){this.$store.commit("setNumberAutoRound",!this.numberAutoRound)},clickCalcPlatform:function(t){if(Object(l["k"])(t)&&!t.guid){var e=this.curArtboardLoadedVerData;t.guid=e.docGuid}this.$store.commit("setPlatform",t),this.setting=!1},hideSetting:function(){this.setting=!1}},computed:{rightNavTypePropertyClicked:function(){return this.$store.state.rightNavTypePropertyClicked},size:function(){var t;if(!this.inArtboardMode)return"";var e=null===(t=this.curArtboardLoadedVerData)||void 0===t?void 0:t.boundsInArtboard;return e?"".concat(this.getCalcPlatformValue(e.width,{noUnitTemplate:!0,isHorizintal:!0}),"*").concat(this.getCalcPlatformValue(e.height,{noUnitTemplate:!0,isHorizintal:!1})):"-"},calcPlatformTypeText2:function(){switch(this.calcPlatformType){case a["c"].CUSTOM:return"".concat(this.calcPlatformCustomDocWidthShow).concat(this.getCalcPlatformCustomUnitText(!1));case a["c"].WE_CHAT_MINI_PROGRAM:return"".concat(a["sb"]).concat(this.getCalcPlatformCustomUnitText(!1));default:return""}},calcPlatformTypeCss:function(){switch(this.calcPlatformType){case a["c"].ANDROID:return"android";case a["c"].IOS:return"ios";case a["c"].CUSTOM:return"custom";case a["c"].WE_CHAT_MINI_PROGRAM:return"wx_mp";default:return"web"}},calcPlatformTypeText:function(){switch(this.calcPlatformType){case a["c"].ANDROID:return"Android";case a["c"].IOS:return"iOS";case a["c"].WE_CHAT_MINI_PROGRAM:return"微信小程序";case a["c"].CUSTOM:return"自定义";default:return"Web"}}},watch:{rightNavTypePropertyClicked:function(t){t>0&&this.setting&&(this.setting=!1)}},data:function(){return{setting:!1,CALC_PLATFORM_TYPE:a["c"]}},components:{SetPlatform:NT}},RT=ET,VT=(n("c636"),Object(Gr["a"])(RT,FT,jT,!1,null,"1dfc74ce",null)),BT=VT.exports,HT={methods:{parseColor:function(t,e,n){var i=this.sketchGroupFillColor;return q(t,e,this.isSketchArtboard,this.curNode,i,n,this.isSketch2025Artboard)},getBorderBox:function(t,e,n){var i,r,o,s,c,l,u,d,h=null===(i=this.curArtboardLoadedVerData)||void 0===i?void 0:i.boundsInArtboard,f=null===(r=this.curNode)||void 0===r?void 0:r.boundsInArtboard;if(!h||!f)return null;var m={};m.top=f.y,m.left=f.x,m.bottom=h.height-f.y-f.height,m.right=h.width-f.x-f.width;var v=null===t||void 0===t?void 0:t.reduce((function(t,e){if(e){var n=e.widthOrigin,i=e.widthsOrigin;i||(i=[n,n,n,n]),i.forEach((function(n,i){switch(e.position){case a["lb"].Center:var r=n/2;t.outside[i]=Math.max(t.outside[i],r),t.inside[i]=Math.max(t.inside[i],r);break;case a["lb"].Outside:t.outside[i]=Math.max(t.outside[i],n);break;case a["lb"].Inside:t.inside[i]=Math.max(t.inside[i],n);break}}))}return t}),{outside:[0,0,0,0],inside:[0,0,0,0]});["top","right","bottom","left"].forEach((function(t,e){v[t]=v.outside[e]+v.inside[e]}));var p=null!==(o=null!==(s=null===e||void 0===e?void 0:e.paddings)&&void 0!==s?s:null===n||void 0===n?void 0:n.paddings)&&void 0!==o?o:{},b=null!==(c=p.leftOrigin)&&void 0!==c?c:0,g=null!==(l=p.topOrigin)&&void 0!==l?l:0,w=null!==(u=p.rightOrigin)&&void 0!==u?u:0,y=null!==(d=p.bottomOrigin)&&void 0!==d?d:0,k={width:f.width-b-w-v.left-v.right,height:f.height-g-y-v.top-v.bottom};return m.top-=v.outside[0],m.right-=v.outside[1],m.bottom-=v.outside[2],m.left-=v.outside[3],{position:m,border:v,padding:{left:b,top:g,right:w,bottom:y},content:k}},getFigmaGrid:function(t){if(!_n(t))return null;var e=t.gridRowCount,n=t.gridColumnCount,i=t.gridRowGap,r=t.gridColumnGap,o=t.gridRowSizingCSS,a=t.gridColumnSizingCSS,s=Mn(t,this.getCalcPlatformValue),c=!0===(null===s||void 0===s?void 0:s.usePadding);s&&delete s.usePadding;var l=0!==i||0!==r;return i=this.getCalcPlatformValue(i,{isHorizintal:!1}),r=this.getCalcPlatformValue(r,{isHorizintal:!0}),{usePadding:c,paddings:s,rowCount:e,columnCount:n,rowGap:i,columnGap:r,useGap:l,name:"布局",rowSizingCSS:o,columnSizingCSS:a}},getFigmaLayout:function(t){if(!jn(t))return null;var e=t.inferredAutoLayout,n=e.counterAxisAlignItems,i=e.counterAxisSizingMode,r=e.itemSpacing,o=e.layoutMode,s=e.primaryAxisAlignItems,c=e.primaryAxisSizingMode,l=t.counterAxisAlignContent,u=t.layoutWrap,d=t.counterAxisSpacing,h=Mn(t,this.getCalcPlatformValue),f=null===h||void 0===h?void 0:h.usePadding,m="HORIZONTAL"===o?a["A"].Horizontal:"VERTICAL"===o?a["A"].Vertical:a["A"].None,v=xn(s),p=a["B"].needGap(v),b=Tn(n),g=Sn(l),w=On(u),y=this.parseFigmaToSketch_gap(p,m,r,d,w),k=y.useGap,C=y.allGuttersGap,x=y.counterGap;return{paddings:h,usePadding:f,name:"布局",flexDirection:m,justifyContent:v,needGap:p,flexWrap:w,alignItems:b,alignContent:g,useGap:k,allGuttersGap:C,counterGap:x,counterAxisSizingMode:i,primaryAxisSizingMode:c}},getSketchLayout:function(t){if(!Object(l["k"])(t))return null;var e=t.alignItems,n=t.allGuttersGap,i=t.flexDirection,r=t.justifyContent,o=t.paddings;Object(l["k"])(o)||(o={top:0,left:0,right:0,bottom:0});var s=o,c=s.top,u=s.left,d=s.bottom,h=s.right,f=a["B"].needGap(r);n=f?n:0;var m="number"===typeof n&&0!==n,v=0!==c||0!==u||0!==d||0!==h;n=f?this.getCalcPlatformValue(n,{isHorizintal:i!==a["A"].Horizontal}):"自动";var p=this.getCalcPlatformValue(c,{isHorizintal:!1}),b=this.getCalcPlatformValue(d,{isHorizintal:!1}),g=this.getCalcPlatformValue(u,{isHorizintal:!0}),w=this.getCalcPlatformValue(h,{isHorizintal:!0});o={top:p,topOrigin:c,left:g,leftOrigin:u,bottom:b,bottomOrigin:d,right:w,rightOrigin:h};var y=a["E"].NO_WRAP,k=a["x"].UnKnown,C=null;return{alignItems:e,flexDirection:i,justifyContent:r,allGuttersGap:n,useGap:m,counterGap:C,paddings:o,usePadding:v,name:"层叠",flexWrap:y,alignContent:k}},parseFigmaToSketch_gap:function(t,e,n,i,r){var o,s;null==i&&(i=n),o=n;var c="number"===typeof o&&0!==o;return r!==a["E"].WRAP&&r!==a["E"].WRAP_REVERSE||(s=c?this.getCalcPlatformValue(i,{isHorizintal:e===a["A"].Horizontal}):"自动"),o=t?this.getCalcPlatformValue(o,{isHorizintal:e!==a["A"].Horizontal}):"自动",s===o&&(s=null),{useGap:c,allGuttersGap:o,counterGap:s}}},computed:{cssVisible:function(){return this.calcPlatformUse===a["c"].WEB||this.calcPlatformUse===a["c"].WE_CHAT_MINI_PROGRAM},hasValue:function(){return null!=this.curArtboard&&null!=this.curNode&&this.$store.state.rightNavType===a["U"].Property},borderStyle:function(){var t=this.curNode.strokeDashArray;if(!t||0===t.length)return"solid";var e,n=t[0];return e=1===t.length?n:t[1],n===e?"dashed":"dotted"},isSketchArtboard:function(){var t,e,n=this.curArtboardLoadedVerData;return!!n&&(null!==(t=n.fileType)&&void 0!==t?t:null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)===a["r"].SKETCH},isSketch2025Artboard:function(){return this.isSketchArtboard&&!0===this.curArtboardLoadedVerData.sk25},isFigmaArtboard:function(){var t,e,n=this.curArtboardLoadedVerData;return!!n&&(null!==(t=n.fileType)&&void 0!==t?t:null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)===a["r"].FIGMA},isXDArtboard:function(){var t,e;if(this.isSketchArtboard)return!1;var n=this.curArtboardLoadedVerData;return!!n&&(null!==(t=n.fileType)&&void 0!==t?t:null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)===a["r"].XD},sketchGroupFillColor:function(){if(this.isSketchArtboard){var t=this.curNode;if(t)return Z(t)}},nodeStyle:function(){var t=this;if(!this.hasValue)return{borders:[],shadows:[],innerShadows:[],fills:[]};var e=this.opacity,n=this.top,i=this.left,r=this.width,o=this.height,s=this.cornerRadiiName,l=this.cornerRadiiValue,u=this.curNode,d=this.groupLayout,h=this.groupGrid,f=this.opacityGradient,v={opacity:e,blendOpacity:si(ai(u)),top:n,left:i,width:r,height:o,cornerRadiiName:s,cornerRadiiValue:l,borders:[],textStrokeStyles:[],shadows:[],innerShadows:[],fills:[],fillSN:u.fillSN,strokeSN:u.strokeSN,effectSN:u.effectSN,strokesIncludedInLayout:!!u.strokesIncludedInLayout,groupLayout:d,groupGrid:h,backgroundEffect:0,backgroundEffectBrightness:1,backgroundEffectSaturation:1,backgroundEffectOpacity:1,objectEffect:0};if(f&&(v.opacityGradient=this.parseColor(f,!1)),u.types.GraphicNode){var p,b,g,w,y=null!==(p=u.blurs)&&void 0!==p?p:[u.blur],k=this.isXDArtboard,C=this.isSketchArtboard,x=this.isFigmaArtboard;if(y.forEach((function(e){if(e&&e.visible&&e.blurAmount>=0){var n=e.isGlassEffect?"glassEffect":e.isBackgroundEffect?"backgroundEffect":e.isZoomEffect?"zoomEffect":e.isMotionEffect?"motionEffect":"objectEffect";if(v[n]=e.blurAmount,e.gradient&&(v.blurGradient=t.parseColor(e.gradient,!1)),e.isGlassEffect)if(C){var i=e.depth,r=e.distortion,o=e.chromaticAberrationMultiplier,s=e.brightness,c=e.skipLightingEffects,l=e.isCustomGlass,u=e.saturation;v.glassEffect={glassType:a["r"].SKETCH,depth:i,radius:e.blurAmount,distortion:r,chromaticAberrationMultiplier:o,brightness:s,skipLightingEffects:c,isCustomGlass:l,saturation:u}}else if(x){var d=e.depth,h=e.dispersion,f=e.lightAngle,p=e.lightIntensity,b=e.refraction;v.glassEffect={glassType:a["r"].FIGMA,depth:d,radius:e.blurAmount,dispersion:h,lightAngle:(f+90).toString(),lightIntensity:p,refraction:b}}if(e.isBackgroundEffect){if(k){var g=e.brightnessAmount,w=e.fillOpacity;w=Math.round(100*w)/100,g=Math.round(100*g)/1e4,v.backgroundEffectOpacity=w,0!=g&&(v.backgroundEffectBrightness=Object(m["a"])(1+g,2))}if(C){var y=e.saturation;"number"===typeof y&&(y=Object(m["a"])(y,2),v.backgroundEffectSaturation=y)}}else e.isZoomEffect?v.zoomEffectCenter=e.center:e.isMotionEffect&&(v.motionEffectAngle=e.motionAngle)}})),u.strokeEnabled&&u.stroke)b=u.strokeArr?u.strokeArr:[{stroke:u.stroke,strokeEnabled:u.strokeEnabled,strokeWidth:u.strokeWidth,strokeWidths:u.strokeWidths,strokePosition:u.strokePosition}],b.forEach((function(e){if(e){var n,i=t.parseColor(e.stroke);if(u.types.Text&&(n=!0,null!==i&&void 0!==i||(i=t.parseColor(e.stroke,!0))),i){if(i.style=function(t){if(!t||0===t.length)return"solid";if(i.customDashes)return t.join(" ");var e,n=t[0];return e=1===t.length?n:t[1],n===e?"dashed":"dotted"}(e.strokeDashArray),i.widthOrigin=e.strokeWidth,i.width=t.getCalcPlatformValue(e.strokeWidth,{needArtScale:!0,isHorizintal:!0}),e.strokeWidths){var r=[!0,!1,!1,!0];i.widthsOrigin=e.strokeWidths,i.widths=e.strokeWidths.map((function(e,n){return t.getCalcPlatformValue(e,{needArtScale:!0,isHorizintal:r[n]})})).join(" ")}else i.widthsOrigin=null,i.widths=null;i.position=e.strokePosition,n?v.textStrokeStyles.push(i):(0===v.borders.length&&(v.border=i),v.borders.push(i))}}})),v.textStrokeStyle=v.textStrokeStyles.find((function(t){return t.type===a["s"].FillColor}));if(u.shadow&&u.shadow.visible)g=u.shadowArr?u.shadowArr:[u.shadow],g.forEach((function(e){if(e){var n=t.parseColor(e.color,!0);if(n){var i={x:t.getCalcPlatformValue(e.x,{needArtScale:!0,isHorizintal:!0}),y:t.getCalcPlatformValue(e.y,{needArtScale:!0,isHorizintal:!1}),blur:t.getCalcPlatformValue(e.blur,{needArtScale:!0,isHorizintal:!0}),color:n.color,swatch:n.swatch};"number"===typeof e.spread&&0!==e.spread&&(i.spread=t.getCalcPlatformValue(e.spread,{needArtScale:!0,isHorizintal:!0})),0===v.shadows.length&&(v.shadow=i),v.shadows.push(i)}}}));if(u.innerShadow&&u.innerShadow.visible)w=u.innerShadowArr?u.innerShadowArr:[u.innerShadow],w.forEach((function(e){if(e){var n=t.parseColor(e.color,!0);if(n){var i={x:t.getCalcPlatformValue(e.x,{needArtScale:!0,isHorizintal:!0}),y:t.getCalcPlatformValue(e.y,{needArtScale:!0,isHorizintal:!1}),blur:t.getCalcPlatformValue(e.blur,{needArtScale:!0,isHorizintal:!0}),color:n.color,swatch:n.swatch};"number"===typeof e.spread&&0!==e.spread&&(i.spread=t.getCalcPlatformValue(e.spread,{needArtScale:!0,isHorizintal:!0})),0===v.innerShadows.length&&(v.innerShadow=i),v.innerShadows.push(i)}}}));u.blendMode&&u.blendMode!==c["e"].PASSTHROUGH&&u.blendMode!==c["e"].NORMAL&&(v.blendMode=u.blendMode);var S,T=v,O=T.backgroundEffectOpacity;if(u.fillEnabled&&u.fill&&0!==O)S=u.fillArr?u.fillArr:[{fillEnabled:!0,fill:u.fill}],S.forEach((function(e){if(e){var n=t.parseColor(e.fill,!1,O);n&&(0==v.fills.length&&(v.fill=n),v.fills.push(n))}}));if(x){var I=u.layoutGrow,A=u.layoutPositioning,F=u.gridChildHorizontalAlign,j=u.gridChildVerticalAlign,_=u.gridRowAnchorIndex,M=u.gridColumnAnchorIndex,L=u.gridRowSpan,P=u.gridColumnSpan,D=Fn(A);if(D!==a["D"].Absolute&&D!==a["D"].Fixed&&D!==a["D"].Sticky){var N=this.parentNodeLayoutType;switch(N){case a["G"].Flex:"number"===typeof I&&0!==I&&(v.layoutGrow=I);break;case a["G"].Grid:var E=In(j),R=An(F);if(a["C"].needShowProperty(R)&&(v.justifySelf=R),a["z"].needShowProperty(E)&&(v.alignSelf=E),L>1){var V=null!==_&&void 0!==_?_:0;v.gridRow={index:V,start:V+1,span:L}}if(P>1){var B=null!==M&&void 0!==M?M:0;v.gridColumn={index:B,start:B+1,span:P}}break}}}}return v.borderBox=this.getBorderBox(v.borders,v.groupLayout,v.groupGrid),v},parentNodeLayoutType:function(){var t=this.curNode,e=this.isSketchArtboard,n=this.isFigmaArtboard,i=t.parentNode;return i?e?null!=i.groupLayout?a["G"].Flex:a["G"].None:n?jn(i)?a["G"].Flex:_n(i)?a["G"].Grid:a["G"].None:a["G"].None:a["G"].None},selfLayoutItemsVisible:function(){var t=this.nodeStyle;if(!t)return!1;var e=null!=["alignSelf","position","layoutGrow","gridRow","gridColumn"].find((function(e){var n=t[e];return null!=n}));return!!e&&this.parentNodeLayoutType!=a["G"].None},groupLayout:function(){return this.isSketchArtboard?this.getSketchLayout(this.curNode.groupLayout):this.isFigmaArtboard?this.getFigmaLayout(this.curNode):null},groupGrid:function(){return this.isFigmaArtboard?this.getFigmaGrid(this.curNode):null},cornerRadiiName:function(){var t;return null!==(t=this.curNode.cornerRadiiName)&&void 0!==t?t:"圆角"},cornerRadiiValue:function(){var t=this.curNode.cornerRadii;return t?Object(l["i"])(t)?null:t.bottomLeft!==t.bottomRight||t.bottomLeft!==t.topLeft||t.bottomLeft!==t.topRight?"".concat(this.getCalcPlatformValue(t.topLeft,{needArtScale:!0,isHorizintal:!0})," ").concat(this.getCalcPlatformValue(t.topRight,{needArtScale:!0,isHorizintal:!0})," ").concat(this.getCalcPlatformValue(t.bottomRight,{needArtScale:!0,isHorizintal:!0})," ").concat(this.getCalcPlatformValue(t.bottomLeft,{needArtScale:!0,isHorizintal:!0})):0!==t.topLeft?this.getCalcPlatformValue(t.topLeft,{needArtScale:!0,isHorizintal:!0}):void 0:null},width:function(){var t=this.curNode,e=t.markedForExport;return this.getCalcPlatformValue(t.boundsInArtboard.width,{markedForExport:e,isHorizintal:!0})},height:function(){var t=this.curNode,e=t.markedForExport;return this.getCalcPlatformValue(t.boundsInArtboard.height,{markedForExport:e,isHorizintal:!1})},top:function(){return this.curNode.types.Artboard?0:this.getCalcPlatformValue(this.curNode.boundsInArtboard.y,{isHorizintal:!1})},left:function(){return this.curNode.types.Artboard?0:this.getCalcPlatformValue(this.curNode.boundsInArtboard.x,{isHorizintal:!0})},opacity:function(){return si(this.curNode.opacity)},opacityGradient:function(){return this.curNode.opacityGradient}},components:{PropertyGroupGrid:AT,PropertyGroupLayoutWithParent:qC,PropertiesGraphicNode:Jx,PropertyInfo:vS,PropertyFill:kS,PropertyText:PS,PropertyExport:uT,Header:BT,PropertyCss:BS,PropertyGroupLayout:CT},created:function(){0}},UT=HT,GT=(n("2551"),Object(Gr["a"])(UT,fC,mC,!1,null,null,null)),WT=GT.exports,$T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-main",class:{on:t.artboardInComment&&t.artboardCommentVisible}},[t.inCloudMode?t.commentDetailVisible?e("DetailComment",{attrs:{errorText:t.artboardDetail.errorText,fetchDetailState:t.artboardDetail.fetchState,listNeedRefresh:t.listNeedRefresh,notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion,notSupportCommentCloudVersion:t.notSupportCommentCloudVersion},on:{clickReload:t.clickRefresh,commentAdded:t.commentAdded,onCommentUpdateTime:t.onCommentUpdateTime}}):e("div",{staticClass:"login-tip"},[e("div",{staticClass:"box"},[e("div",{staticClass:"icon"}),e("div",{staticClass:"text"},[t._v("需要登录查看评论内容")]),e("div",{staticClass:"button light",on:{click:t.goCloudLogin}},[t._v("去登录")]),e("div",{staticClass:"text"},[t._v("还没有标记狮账号？去"),e("a",{attrs:{href:"javascript:;"},on:{click:t.goCloudLogin}},[t._v("注册")])])])]):e("div",{staticClass:"comment-support-tip"},[e("div",{staticClass:"box"},[e("div",{staticClass:"img"}),e("div",{staticClass:"tip"},[t._v("本地标注包无法使用评论功能")]),e("div",{staticClass:"text"},[t._v("试用标记狮私有云服务，体验画板评论功能")]),e("a",{staticClass:"button light",attrs:{href:t.cloudPage,target:"_blank"}},[t._v("前往官网了解更多")])])])],1)},zT=[],YT=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"detail-comment"},[t.listNeedRefresh&&t.fetchDetailState===t.FetchState.Success?e("div",{staticClass:"comment-refresh"},[e("a",{staticClass:"btn-refresh",attrs:{href:"javascript:;"},on:{click:function(e){t.setSelectComment(null),t.clickReload()}}},[t._v("评论有更新，点击刷新")])]):t._e(),t.notSupportArtboardVerCloudVersion?t._e():e("div",{staticClass:"head"},[e("div",{staticClass:"comment-filter-mode"},[e("div",{staticClass:"name",domProps:{textContent:t._s(t.commentFilterModeNames.selected)}}),e("div",{staticClass:"options"},[e("div",{class:{on:!t.commentOnlyCurrentVerArtboard},domProps:{textContent:t._s(t.commentFilterModeNames.all)},on:{click:function(e){return t.clickCommentFilterMode(!1)}}}),e("div",{class:{on:t.commentOnlyCurrentVerArtboard},domProps:{textContent:t._s(t.commentFilterModeNames.onlyCurrentVer)},on:{click:function(e){return t.clickCommentFilterMode(!0)}}})])])]),e("div",{staticClass:"comments"},[t.fetchDetailState===t.FetchState.Fetching||t.fetchDetailState===t.FetchState.Error?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取评论信息...",errorText:t.errorText,isLoading:t.fetchDetailState===t.FetchState.Fetching,isError:t.fetchDetailState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t.notSupportCommentCloudVersion?e("div",{staticClass:"feature"},[t._v(" 私有云部署包版本过低,"),e("br"),t._v("请先联系管理员升级私有云部署包 ")]):0===t.renderComments.length?e("div",{staticClass:"feature",domProps:{textContent:t._s(t.commentOnlyCurrentVerArtboard?"暂无版本#".concat(t.artboardVerId," 的评论，快去添加吧！"):"暂无评论，快去添加吧！")}}):e("div",{ref:"commentList",staticClass:"comment-list",on:{scroll:t.onCommentListScroll}},t._l(t.renderComments,(function(n,i){return e("CommentItem",{key:0===n.id?"index_".concat(i):n.id,attrs:{users:t.users,attachVisibleCheckerKey:t.attachVisibleCheckerKey,comment:n},on:{commentAdded:t.commentAdded,commentRemove:t.commentRemove,onCommentUpdateTime:t.onCommentUpdateTime}})})),1)]),t.notSupportCommentCloudVersion?t._e():e("div",{staticClass:"art-editor"},[t.cloudIsLogin?e("Editor",{attrs:{commentId:0,replyId:0,parent:{id:0,comments:t.comments},users:t.users,initSummary:""},on:{commentAdded:t.commentAdded,onCommentUpdateTime:t.onCommentUpdateTime}}):e("div",{staticClass:"login-tip"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v("需要登录才可进行评论")]),e("div",{staticClass:"button light",on:{click:t.goCloudLogin}},[t._v("去登录")]),e("div",{staticClass:"text"},[t._v("还没有标记狮账号？去"),e("a",{attrs:{href:"javascript:;"},on:{click:t.goCloudLogin}},[t._v("注册")])])])])],1)]):t._e()},XT=[],KT=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor"},[t.attachLoading?e("div",{staticClass:"attach-loading"},[e("p",[t._v("附件添加中...")])]):t._e(),t.attachFetching?e("div",{staticClass:"attach-fetching"},[t._v("评论数据提交中...")]):t._e(),e("EditorTextarea",{ref:"customInput",attrs:{initValue:t.initSummary,maxlength:t.maxLength,placeholder:"留下你的评论,支持@成员"},on:{setValue:t.setValue,submit:t.submit}}),t.attachMents.length>0?e("ul",{staticClass:"attachments"},t._l(t.attachMents,(function(n){return e("li",{key:n.id,on:{click:function(e){return e.preventDefault(),t.clickAttach(n)}}},[e("span",{staticClass:"btn-remove",attrs:{title:"移除"},on:{click:function(e){return e.stopPropagation(),t.clickRemove(n)}}}),e("BlobImage",{attrs:{image:n.thumbBlob||n.blob}})],1)})),0):t._e(),e("div",{ref:"btns",staticClass:"btns"},[e("ul",{staticClass:"menu"},[0===t.replyId?e("li",{staticClass:"point",class:{on:t.pointEnable,pointed:this.pointed},attrs:{title:"添加评注"},on:{click:t.startPoint}},[t.pointed?e("span",[t._v(t._s(t.pointIndex))]):t._e()]):t._e(),e("li",{staticClass:"localimage",attrs:{title:"上传本地图片"},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickLocalFile.apply(null,arguments)}}},[e("input",{ref:"file",attrs:{type:"file",accept:t.supportFileExt},on:{change:t.onLocalFileChange}})]),e("li",{staticClass:"drawimage",class:{on:t.inDrawingSelf},attrs:{title:"画板截图"},on:{click:t.startDraw}}),e("li",{staticClass:"emoji",class:{on:t.emojiListVisible},on:{click:function(e){return e.target!==e.currentTarget?null:t.openEmojiList.apply(null,arguments)}}},[t.emojiListVisible?e("div",{staticClass:"emoji-list"},t._l(t.EnumEmojiSupportList,(function(n){return e("div",{key:n.name,class:["icon-emoji","emoji-"+n.name],on:{click:function(e){return t.clickEmojiItem(n)}}})})),0):t._e()])]),e("div",{staticClass:"button light submit",class:{off:!t.canSubmit},on:{click:t.submit}},[t._v("评论")])])],1)},qT=[],JT=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor-textarea-container"},[e("div",{ref:"input",staticClass:"editor-textarea",attrs:{contenteditable:"true",placeholder:t.placeholder,autocomplete:"off",spellcheck:"false"},on:{click:t.clickInput,paste:function(e){return e.preventDefault(),t.onInputPaste.apply(null,arguments)},focus:t.onInputFocus,blur:t.onInputBlur,compositionstart:t.onCompositionStart,compositionend:t.onCompositionEnd,input:t.onInput,keyup:t.onInputKeyup}},[t._v(t._s(t.initValue))]),e("EditorUsers",{ref:"users",on:{clickUser:t.clickAtUser}})],1)},QT=[],ZT=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"box",staticClass:"at-users",class:{"in-top":t.showInTop}},[t.fetchState===t.FetchState.Fetching||t.fetchState===t.FetchState.Error?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取用户列表信息...",errorText:t.errorText,isLoading:t.fetchState===t.FetchState.Fetching,isError:t.fetchState===t.FetchState.Error,reLoadText:""},on:{reload:function(e){return t.clickReload()}}})],1):0===t.list.length?e("div",{staticClass:"empty"},[t._v('未检索到 "'+t._s(t.searchText)+'" 相关的用户')]):e("ul",t._l(t.list,(function(n){return e("li",{key:n.id,attrs:{title:"".concat(n.nickName,"(").concat(n.email,")")},on:{click:function(e){return t.clickUser(n)}}},[e("div",{staticClass:"name"},[t._v(t._s(n.nickName))]),e("div",{staticClass:"email"},[t._v("("+t._s(n.email)+")")])])})),0)]):t._e()},tO=[],eO={components:{NetworkLoading:Iu},methods:{clickUser:function(t){this.$emit("clickUser",t),this.visible=!1},searchUser:function(t){var e=this;this.searchText=Object(l["j"])(t)?t.trim().toLowerCase():"",this.visible=!0,this.clickReload(),this.showInTop=!0,this.$nextTick((function(){var t=e.$refs.box;if(t){var n=t.getBoundingClientRect();n.top<144&&(e.showInTop=!1)}}))},hide:function(){this.visible=!1},clickReload:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(t.fetchState!==c["a"].Fetching){e.n=1;break}return e.a(2);case 1:if(t.visible){e.n=2;break}return e.a(2);case 2:return e.p=2,t.errorText=null,t.fetchState=c["a"].Fetching,n=t.searchText,e.n=3,t.getAllUsers();case 3:r=e.v,o=n.length>0,r=r.filter((function(t){if(t){if(!o)return!0;var e=(t.nickName||"").toLowerCase();return-1!==e.indexOf(n)}})),t.list=r,t.fetchState=c["a"].Success,e.n=5;break;case 4:e.p=4,a=e.v,t.errorText=a,t.fetchState=c["a"].Error;case 5:return e.a(2)}}),e,null,[[2,4]])})))()}},data:function(){return{FetchState:c["a"],fetchState:c["a"].Normal,errorText:null,list:[],searchText:"",visible:!1,showInTop:!1}}},nO=eO,iO=(n("d28d"),Object(Gr["a"])(nO,ZT,tO,!1,null,"26289ab6",null)),rO=iO.exports,oO="marklion-cloud-uid",aO={components:{EditorUsers:rO},methods:{onInputKeyup:function(t){var e=t.keyCode||t.which,n=this.inMacOS?t.metaKey:t.ctrlKey;n&&13===e&&(t.preventDefault(),this.$emit("submit"))},clickAtUser:function(t){var e=this;t&&requestAnimationFrame((function(){e.insertAtUser(t)}))},onInput:function(){this.$emit("setValue",this.getValue()),this.autoParseSearchUserText()},autoParseSearchUserText:function(){var t=this;clearTimeout(this.searchUserHandle),this.searchUserHandle=setTimeout((function(){var e=t.getSearchUserText(),n=t.$refs.users;n&&(e?(e=e.substr(1),n.searchUser(e)):n.hide())}),50)},onCompositionStart:function(){this.inComposition=!0},onCompositionEnd:function(){this.inComposition=!1},onInputPaste:function(t){var e=t.clipboardData,n=e.getData("text/plain");this.insertText(n)},clickInput:function(t){var e,n=t.target,i=this.$refs.input;if(i!=n&&(e="INPUT"===n.tagName?+n.getAttribute(oO):NaN,!isNaN(e))){var r=window.getSelection(),o=document.createRange(),a=!1,s=n.nextSibling;if(s&&3===s.nodeType){var c=s.textContent;c&&c.length>0&&(c=c[0]," "!==c&&" "!==c||(o.setStart(s,1),a=!0))}a||o.setStartAfter(n),o.collapse(!0),r.removeAllRanges(),r.addRange(o)}},moveRangeToEnd:function(t){if(t||(t=this.$refs.input),t&&window.getSelection){t.focus();var e=window.getSelection();e.selectAllChildren(t),e.collapseToEnd()}},setFocus:function(){this.isInputFocus||this._setLastRange()},_setLastRange:function(){var t=this.$refs.input;if(t){t.focus();var e=this.lastRange;if(e){var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}else this.moveRangeToEnd(t)}},_appendData:function(t,e){var n=this;this._setLastRange(),document.execCommand("insertHTML",!1,t),e&&document.execCommand("insertText",!1," "),requestAnimationFrame((function(){var t=n.$refs.input;if(t)for(var e=t.querySelectorAll("*"),i=0,r=e.length;i<r;i++){var o=e[i],a=o.tagName;switch(a){case"P":case"DIV":case"SPAN":case"FONT":var s=o.style.cssText;s&&(o.style.cssText="");break}}}))},getUserText:function(t){return"[@uid:".concat(t,";]")},insertAtUser:function(t){var e;if(t){null===(e=this.$refs.input)||void 0===e||e.focus();var n=this.canEnterTextLength(),i=this.getUserText(t.id);if(n-i<0)this.showTextTip("文本长度已超过输入框允许的最大值:".concat(this.maxlength));else{var r="<input type='button' ".concat(oO,"='").concat(t.id,"'  class='at-user' value='@").concat(t.nickName,"' />"),o=this.lastRange;if(o){var a=o.startContainer,s=o.endContainer,c=o.startOffset,l=o.endOffset;if(a&&a==s&&c==l&&3===a.nodeType){var u=a.textContent;if(u){var d=u.substring(0,c).lastIndexOf("@");if(-1!==d){var h=document.createRange();h.setStart(a,d),h.setEnd(a,c);var f=window.getSelection();f.removeAllRanges(),f.addRange(h),document.execCommand("insertText",!1,""),this.lastRange=h}}}}this._appendData(r,!0)}}},insertText:function(t){var e;if(Object(l["j"])(t)&&(t=Object(c["U"])(t),Object(l["j"])(t))){var n=this.canEnterTextLength();if(0!==n){var i=t.length;n<i&&(t=t.substr(0,n)),null===(e=this.$refs.input)||void 0===e||e.focus(),this._appendData(t)}else this.showTextTip("文本长度已超过输入框允许的最大值:".concat(this.maxlength))}},canEnterTextLength:function(){var t=this.maxlength,e=this.getValue().length,n=this.getSelectText().length;return Math.max(t-e+n,0)},getSearchUserText:function(){var t=this.lastRange;if(!t)return"";var e=t.startContainer,n=t.endContainer,i=t.startOffset,r=t.endOffset;if(e!=n)return"";if(i!=r)return"";if(3!==e.nodeType)return"";var o=e.textContent;if(!o)return"";o=o.substring(0,i);var a=o.substring(0,i).lastIndexOf("@");return-1===a?"":(o=o.substring(a),/[ [\]]/.test(o)?"":o)},getSelectText:function(){var t=this.lastRange;if(!t)return"";var e=t.cloneContents();try{for(var n=e.childNodes,i="",r=0,o=n.length;r<o;r++){var a=n[r];i+=this.getNodeValue(a)}return i.replace(/\xa0/g," ")}finally{e=null}},getNodeValue:function(t){var e=this;switch(t.nodeType){case 3:return t.textContent||"";case 1:var n=+t.getAttribute(oO);if(isNaN(n)||!(n>0)){var i,r=t.tagName;switch(r){case"DIV":case"P":case"SECTION":i=" ";break;default:i="";break}var o=t.childNodes;return o.forEach((function(t){i+=e.getNodeValue(t)})),i}return"[@uid:".concat(n,";]");default:return""}},getValue:function(){var t=this.$refs.input;if(t){for(var e=t.childNodes,n="",i=0,r=e.length;i<r;i++){var o=e[i];n+=this.getNodeValue(o)}return n.replace(/\xa0/g," ")}},setEmpty:function(){var t,e=this.$refs.input;if(e)while(null!=(t=e.firstChild))e.removeChild(t)},onSelectionChange:function(){var t=window.getSelection();this.lastRange=t.rangeCount>0?t.getRangeAt(0):null},onInputFocus:function(){this.isInputFocus=!0,document.addEventListener("selectionchange",this.onSelectionChange)},onInputBlur:function(){this.isInputFocus=!1,document.removeEventListener("selectionchange",this.onSelectionChange)}},watch:{isInputFocus:function(t){var e=this;clearTimeout(this.autoHideUsersHandle),t||(this.autoHideUsersHandle=setTimeout((function(){var t;null===(t=e.$refs.users)||void 0===t||t.hide()}),500))}},data:function(){return{isInputFocus:!1,searchUserHandle:0,lastRange:null,inComposition:!1,autoHideUsersHandle:0}},beforeDestroy:function(){this.lastRange=null,clearTimeout(this.searchUserHandle),document.removeEventListener("selectionchange",this.onSelectionChange),this.setEmpty()},created:function(){0},props:{placeholder:{type:String,default:""},maxlength:{type:Number,default:0},initValue:{type:String,default:""}}},sO=aO,cO=(n("14c9"),Object(Gr["a"])(sO,JT,QT,!1,null,"771515f8",null)),lO=cO.exports,uO={components:{BlobImage:$s,EditorTextarea:lO},methods:{setValue:function(t){this.summary=t},autoHideEmojiList:function(){var t=this;clearTimeout(this.emojiListHideHandle),this.emojiListHideHandle=setTimeout((function(){t.emojiListVisible=!1}),50)},clickEmojiItem:function(t){var e=this;this.emojiListVisible=!1,t&&requestAnimationFrame((function(){var n=e.$refs.customInput;n&&n.insertText("[".concat(t.text,"]"))}))},openEmojiList:function(){this.emojiListVisible=!this.emojiListVisible},startPoint:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if(r=e.pointInfo,o=e.preventPoint,a=e.inDrawing,!a){n.n=1;break}return e.showTextTip("正在编辑截图，无法添加评注"),n.a(2);case 1:if(!e.pointed){n.n=4;break}return n.n=2,e.confirm({text:"确认移除该评论的评注?"});case 2:if(!n.v){n.n=3;break}r.point.enable=!1,r.instance=null;case 3:return n.a(2);case 4:e.showTextTip("点击当前区域任意位置添加评注"),o.enable=!0,o.x=t.clientX,o.y=t.clientY,r.instance=e;case 5:return n.a(2)}}),n)})))()},clickAttach:function(t){var e=this.attachMents.map((function(t){return t.blob})),n=e.findIndex((function(e){return e===t.blob}));-1===n&&(n=0),this.$store.commit("setImageViewer",{imgList:e,currentIndex:n})},fixScroll:function(){var t=this.replyId;if(0!==t){var e=this.$refs.btns;e&&e.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}},focus:function(){var t=this.$refs.customInput;null===t||void 0===t||t.setFocus()},clean:function(){this.attachMents.splice(0);var t=this.$refs.customInput;null===t||void 0===t||t.setEmpty();var e=this.preventPoint,n=this.point,i=this.pointInfo,r=this.editComment;i.instance===this&&(i.instance=null,n.enable=!1,n.x=n.y=0,e.enable=!1,e.x=e.y=0),this.inDrawingSelf&&(r.instance=null,r.drawing=!1)},clickRemove:function(t){var e=this.attachMents,n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)},getCustomEditorValue:function(){var t,e,n=null!==(t=null===(e=this.$refs.customInput)||void 0===e?void 0:e.getValue())&&void 0!==t?t:"";return n},submit:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,u,d,h,f,m,v,p,b,g,w,y;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.attachMents,r=t.fetchState,o=t.artboardVer,a=t.curArtboardId,r!==c["a"].Fetching){e.n=1;break}return e.a(2);case 1:if(!t.inDrawing){e.n=2;break}return t.showTextTip("正在编辑截图,请先保存或取消"),e.a(2);case 2:if(s=[],u=t.getCustomEditorValue(),d=t.maxLength,h=u.length,!(h>d)){e.n=3;break}return t.showTextTip("文本长度已超过输入框允许的最大值(".concat(d,")")),e.a(2);case 3:if(f={artboardId:a,commentId:t.commentId,replyId:t.replyId,summary:u,attachMents:[],artboardVer:o},n.forEach((function(t){s.push(t.blob),t.thumbBlob&&s.push(t.thumbBlob),f.attachMents.push(t.data)})),Object(l["j"])(f.summary)||0!==f.attachMents.length){e.n=4;break}return t.showTextTip("评论内容和图片附件不能都为空"),t.focus(),e.a(2);case 4:return t.pointed&&(f.pointX=t.point.x,f.pointY=t.point.y,f.pointEnable=!0),t.fetchState=c["a"].Fetching,e.p=5,e.n=6,t.checkLoginThrow();case 6:if(e.v){e.n=7;break}return t.fetchState=c["a"].Error,e.a(2);case 7:return m=Object(c["nb"])(JSON.stringify(f)),s.unshift(m),s.unshift(Object(c["ab"])(m.byteLength)),m=Object(c["m"])(s),e.n=8,t.fetchPostCloudApi("addartboardcommentbyweb",{body:m});case 8:if(v=e.v,t.fetchState=c["a"].Success,s=f=null,Object(l["k"])(v)){e.n=9;break}throw"返回值异常:".concat(v);case 9:if(v.success){e.n=10;break}throw v.errMsg;case 10:if(Object(l["k"])(v.data)){e.n=11;break}throw"返回值异常:".concat(JSON.stringify(v));case 11:v=v.data,p=v.commentUpdateTime,t.$emit("onCommentUpdateTime",{commentUpdateTime:p,artboardId:a}),b=v,g=b.atUsers,f=v.comment,w=t.users,w&&Object(l["i"])(g)&&g.forEach((function(e){e&&t.$set(w,e.id,e)})),f=$o(f,{id:0,email:t.cloudUserEmail,userKey:t.cloudUserKey,nickName:t.cloudNickName},c["c"],t.parent,w),t.clean(),t.showTextTip("评论已提交成功"),t.$emit("commentAdded",f),e.n=13;break;case 12:e.p=12,y=e.v,t.showTextTip(y),t.fetchState=c["a"].Error;case 13:return e.a(2)}}),e,null,[[5,12]])})))()},clickLocalFile:function(){var t;this.attachMents.length>=Wo?this.showTextTip("无法选择图片,已达图片提交上限"):null===(t=this.$refs.file)||void 0===t||t.click()},onLocalFileChange:function(t){var e=this,n=t.target,i=n.files?n.files[0]:null;if(i){n.value="";var r=i.name,o=i.size,a=i.type;if(r&&!(o<1)&&a)if(0===a.indexOf("image/"))if(o>Go)this.showTextTip("选择的文件大小「".concat(Object(c["qb"])(o),"」太大,不能超过「").concat(Object(c["qb"])(Go),"」"));else{r=r.toLowerCase();var s=r.length,l=this.isSupportWebp,u=Uo.find((function(t){if(!l&&t===Ho)return!1;var e=r.indexOf(t);return-1!==e&&e+t.length===s}));u?this.addAttachMent(i).then((function(){e.showTextTip("图片已添加")})).catch((function(t){return e.showTextTip(t)})):this.showTextTip("请选择正确的图片文件")}else this.showTextTip("请选择正确的图片文件")}},addAttachMent:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:return e.attachLoading=!0,n.n=1,Pt(t);case 1:return r=n.v,e.attachMents.push(r),e.attachLoading=!1,n.a(2,r)}}),n)})))()},startDraw:function(){this.inDrawing?this.showTextTip("当前已在画板截图编辑模式"):this.attachMents.length>=Wo?this.showTextTip("无法编辑画板截图,已达图片提交上限"):(this.$store.commit("startDraw",this),this.showTextTip("在当前区域编辑画板相关截图"))}},watch:{emojiListVisible:function(t){clearTimeout(this.emojiListHideHandle),t?window.addEventListener("click",this.autoHideEmojiList,!0):window.removeEventListener("click",this.autoHideEmojiList,!0)},curArtboardId:function(){this.clean()}},computed:{canSubmit:function(){var t=this.fetchState,e=this.summary,n=this.attachMents;return t!==c["a"].Fetching&&!(0===n.length&&!Object(l["j"])(e.trim()))},EnumEmojiSupportList:function(){return Qs},point:function(){return this.pointInfo.point},preventPoint:function(){return this.pointInfo.preventPoint},pointInfo:function(){return this.$store.state.editComment.pointInfo},pointed:function(){return this.pointInfo.instance===this&&this.point.enable},pointEnable:function(){return this.pointInfo.instance===this&&(this.point.enable||this.preventPoint.enable)},pointIndex:function(){return this.pointed?this.point.pointIndex:""},attachFetching:function(){return this.fetchState===c["a"].Fetching},isSupportWebp:function(){return this.$store.state.isSupportWebp===Ni.Support},canDestory:function(){return 0===this.attachMents.length&&!Object(l["j"])(this.summary)},supportFileExt:function(){var t=Uo;return this.isSupportWebp||(t=t.filter((function(t){return t!==Ho}))),t.join(",")},inDrawing:function(){var t=this.editComment;return t.drawing},inDrawingSelf:function(){var t=this.editComment;return t.drawing&&t.instance===this},artboardVer:function(){var t,e=this.replyId,n=this.curArtboardLoadedVerData,i=this.parent;return null!==(t=0===e?n.lastVersionId:i.artboardVer)&&void 0!==t?t:0}},beforeDestroy:function(){clearTimeout(this.emojiListHideHandle),window.removeEventListener("click",this.autoHideEmojiList,!0),this.clean()},created:function(){this.summary=Object(l["j"])(this.initSummary)?this.initSummary:""},data:function(){return{maxLength:256,inputFocused:!1,emojiListHideHandle:0,emojiListVisible:!1,attachLoading:!1,summary:"",attachMents:[],fetchState:c["a"].Normal}},props:{commentId:Number,parent:Object,replyId:Number,users:Object,initSummary:{type:String,default:""}}},dO=uO,hO=(n("cc21"),Object(Gr["a"])(dO,KT,qT,!1,null,"2f2717e7",null)),fO=hO.exports,mO=function(){var t=this,e=t._self._c;return t.comment?e("div",{staticClass:"comment-detail",attrs:{id:"art_c".concat(t.comment.commentId,"_").concat(t.comment.id)}},[e("div",{staticClass:"content",class:{on:t.selectComment===t.comment},on:{click:t.clickPoint}},[e("UserFace2",{attrs:{self:t.isSelfComment,tourist:t.isTourist,title:t.userFaceTitle,text:t.userFaceText}}),e("div",{staticClass:"userinfo"},[e("div",{staticClass:"summary",class:{reply:t.isReply}},[t.canRemove?e("a",{staticClass:"btn-del",attrs:{href:"javascript:;",title:"删除评论"},on:{click:t.clickRemove}}):t._e(),e("div",{staticClass:"name"},[t._v(" "+t._s(t.userNickName)),t.isReplyOther?e("span",{staticClass:"reply-to"},[t._v("回复 "+t._s(t.comment.replyUser.nickName))]):t._e()]),t.comment.pointEnable?e("span",{staticClass:"point"},[t._v(t._s(t.comment.pointIndex))]):t._e(),e("span",{domProps:{innerHTML:t._s(t.summaryHTML)}})]),t.attachMentImgs.length>0?e("ul",{staticClass:"attachments"},t._l(t.attachMentImgs,(function(n,i){return e("li",{key:i,on:{click:function(e){return e.preventDefault(),t.clickAttach(n)}}},[t.attachVisible?e("BlobImage",{attrs:{image:n.preview}}):t._e()],1)})),0):t._e(),e("div",{staticClass:"date"},[t.artboardVer?e("span",{staticClass:"artboard-ver",attrs:{title:"评论的画板版本#".concat(t.comment.artboardVer)},domProps:{textContent:t._s(t.artboardVer)},on:{click:function(e){return t.setCurArtboardVer(t.comment.artboardVer)}}}):t._e(),t._v(t._s(t.comment.dateStr)),e("a",{class:{on:t.editorVisible},attrs:{href:"javascript:;"},on:{click:t.clickReply}},[t._v(t._s(t.editorVisible?"收起回复":"回复"))])])])],1),t.editorEnable?e("Editor",{directives:[{name:"show",rawName:"v-show",value:t.editorVisible,expression:"editorVisible"}],ref:"editor",attrs:{commentId:t.comment.commentId,replyId:t.comment.id,parent:t.comment.parent||t.comment,users:t.users},on:{commentAdded:t.commentAdded,onCommentUpdateTime:t.onCommentUpdateTime}}):t._e(),t.comment.comments?e("div",{staticClass:"child"},t._l(t.comment.comments,(function(n,i){return e("CommentItem",{key:0===n.id?"".concat(t.comment.id,"_index_").concat(i):"".concat(t.comment.id,"_id_").concat(n.id),attrs:{attachVisibleCheckerKey:t.attachVisibleCheckerKey,comment:n,selectComment:t.selectComment,users:t.users},on:{commentAdded:t.commentAdded,commentRemove:t.commentRemove,onCommentUpdateTime:t.onCommentUpdateTime}})})),1):t._e()],1):t._e()},vO=[],pO={off:1,on:2,hide:3},bO={components:{UserFace2:Js,Editor:fO,BlobImage:$s},name:"CommentItem",methods:{onCommentUpdateTime:function(t){this.$emit("onCommentUpdateTime",t)},clickPoint:function(t){var e=t.target,n=this.comment,i=this.selectComment,r=n===i?null:n;if(!r&&e){var o=e.tagName;if("A"===o)return;if("LI"===o&&e.parentNode.classList.contains("attachments"))return}this.setSelectComment(r)},setSelectComment:function(t){this.$store.commit("setSelectComment",{comment:t,notScrollList:!0})},setCommentEditorVisibleId:function(t){this.$store.commit("setCommentEditorVisibleId",t)},commentRemove:function(t){if(t){var e=this.comment.comments;if(e){var n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)}}},clickRemove:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s,c,u,d,h,f,m,v,p,b;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(t.canRemove){e.n=1;break}return e.a(2);case 1:if(n=t.comment,n){e.n=2;break}return e.a(2);case 2:return r=n.id,o=n.commentId,a=n.artboardId,e.p=3,e.n=4,t.checkLoginThrow();case 4:if(e.v){e.n=5;break}return e.a(2);case 5:return s=0===o?"确认要删除该评论及所属的所有二级评论吗?":"确认要删除该评论吗?",e.n=6,t.confirm({text:s});case 6:if(e.v){e.n=7;break}return e.a(2);case 7:return e.n=8,t.fetchPostCloudApi("removecommentbyweb",{body:{id:r,commentId:o,artboardId:a}});case 8:if(c=e.v,Object(l["k"])(c)){e.n=9;break}throw new Error("返回值异常:".concat(c));case 9:if(c.success){e.n=10;break}throw new Error(c.errMsg);case 10:t.showTextTip("评论已删除"),t.$emit("commentRemove",n),u=t.artboard,d=t.artboardDetail,Object(l["k"])(c.data)&&u&&(h=c.data,f=h.comments,m=h.replies,v=h.commentUpdateTime,p=h.artboardMaxPointIndex,"number"===typeof f&&(u.comments-=f),"number"===typeof m&&(u.replies-=m),p>=0&&(d.maxPointIndex=p),t.$emit("onCommentUpdateTime",{commentUpdateTime:v,artboardId:a})),e.n=12;break;case 11:e.p=11,b=e.v,t.showTextTip(b);case 12:return e.a(2)}}),e,null,[[3,11]])})))()},clickAttach:function(t){var e=this.attachMentImgs.map((function(t){return t.imgSrc})),n=e.findIndex((function(e){return e===t.imgSrc}));-1===n&&(n=0),this.$store.commit("setImageViewer",{imgList:e,currentIndex:n})},commentAdded:function(t){this.$emit("commentAdded",t),this.editorVisible&&this.clickReply()},clickReply:function(t){var e=this;if(this.cloudIsLogin)if(this.editorVisible&&!0!==t){var n=this.$refs.editor;if(n&&n.canDestory)return this.editorVisible&&this.setCommentEditorVisibleId(0),void(this.editorState=pO.off);this.editorState=pO.hide}else this.editorState=pO.on,this.setCommentEditorVisibleId(this.comment.id),this.$nextTick((function(){var t=e.$refs.editor;t&&(t.focus(),t.fixScroll())}));else this.showTextTip("未登录,需要登录才可进行评论")},checkAttachVisible:function(){var t=this.artboardInComment,e=this.attachMentImgs,n=this.attachVisible,i=this.artboardCommentVisible;t&&i&&!n&&0!==e.length&&(this.attachVisible=!0)}},mounted:function(){this.checkAttachVisible()},watch:{attachVisibleCheckerKey:function(){this.checkAttachVisible()},autoOpenEditor:function(t){var e=this;t&&(this.comment.autoOpenEditor=!1,setTimeout((function(){e.clickReply(!0)}),313))}},computed:{artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},artboardVer:function(){var t=this.comment.artboardVer,e=this.isReply;return null==t||e?null:"#".concat(t)},autoOpenEditor:function(){return!!this.comment.autoOpenEditor},summaryHTML:function(){return cc(this.comment.summary,this.comment.atUsers)},artboardDetail:function(){return this.$store.state.artboardDetail},selectComment:function(){return this.artboardDetail.selectComment},commentEditorVisibleId:function(){return this.$store.state.commentEditorVisibleId},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},canRemove:function(){return this.isSelfComment||this.cloudUserIsOwner},attachMentImgs:function(){var t,e=null===(t=this.comment)||void 0===t?void 0:t.attachMents,n=[];return e?(e.forEach((function(t){if(t){var e=t.thumbFileName||t.fileName;e&&n.push({imgSrc:c["O"].combineResourcePath(t.fold+t.fileName),preview:c["O"].combineResourcePath(t.fold+e)})}})),n):n},userFaceTitle:function(){var t=this.comment;if(!t)return null;var e=t.user;return e?"".concat(e.nickName,"(").concat(e.email,")"):null},userNickName:function(){var t=this.comment;if(!t)return"-";var e=t.user;if(!e)return"-";var n=e.nickName;return n||"-"},isSelfComment:function(){var t=this.comment;if(!t)return!1;var e=t.user;return!!e&&e.userKey===this.cloudUserKey},isTourist:function(){var t=this.comment;if(!t)return!1;var e=t.user;if(!e)return!1;switch(e.authority){case a["p"].Admin:case a["p"].Designer:return!1}return!0},userFaceText:function(){var t=this.userNickName;return t[t.length-1]},editorEnable:function(){return this.editorState!==pO.off},editorVisible:function(){return this.editorState===pO.on&&this.commentEditorVisibleId===this.comment.id},isReply:function(){var t=this.comment;return!!t&&0!==t.commentId},isReplyOther:function(){var t=this.comment;return!!t&&(0!==t.commentId&&t.replyUser)}},data:function(){return{editorState:pO.off,attachVisible:!1}},props:{comment:Object,users:Object,attachVisibleCheckerKey:String}},gO=bO,wO=(n("07be"),Object(Gr["a"])(gO,mO,vO,!1,null,"245b0c7f",null)),yO=wO.exports,kO={components:{Editor:fO,CommentItem:yO,NetworkLoading:Iu},methods:{onCommentListScroll:function(){var t=this.$refs.commentList;t&&(this.commentListScrollTop=t.scrollTop)},clickCommentFilterMode:function(t){this.$store.state.commentOnlyCurrentVerArtboard=t},onCommentUpdateTime:function(t){this.$emit("onCommentUpdateTime",t)},commentRemove:function(t){if(t){var e=this.comments;if(e){var n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)}}},clickReload:function(){this.$emit("clickReload")},commentAdded:function(t){var e=this;this.setSelectComment(t),this.$emit("commentAdded",t),this.$nextTick((function(){if(0===t.commentId){var n=e.$refs.commentList;n&&(n.scrollTop=1e5)}else e.scrollToComment(t)}))},getCommentOrReplyFromId:function(t,e){var n=this.comments;if(!n)return null;for(var i=0,r=n.length;i<r;i++){var o=n[i];if(!e&&o.id==t)return o;if(e){var a=o.comments;if(a){var s=a.find((function(e){return e.id===t}));if(s)return s}}}},refreshCommentList:function(){var t,e,n,i=this,r=this.comments,o=this.autoIntoInfo,a=null!==(t=null===(e=this.selectComment)||void 0===e?void 0:e.id)&&void 0!==t?t:0,s=a>0&&(null===(n=this.selectComment)||void 0===n?void 0:n.commentId)>0;if(null!=r){this.setSelectComment(null);var c=o.commentId,l=o.commentArtboardId,u=o.isReply;if(0!==l&&l==this.curArtboardId&&c>0){var d=this.getCommentOrReplyFromId(c,u);if(!d)return this.showTextTip("未定位到评论信息,可能已经被删除"),this.$store.commit("artboardCommentVisible",!0),o.commentId=o.commentArtboardId=-1,void this.$nextTick((function(){var t=i.$refs.commentList;t&&(t.scrollTop=1e5)}));var h=d.artboardVer;null!=h&&this.setCurArtboardVer(h,!0),this.setSelectComment(d)}if(o.commentId=o.commentArtboardId=-1,null==this.selectComment&&a>0){var f=this.getCommentOrReplyFromId(a,s);f&&this.setSelectComment(f)}null==this.selectComment&&this.$nextTick((function(){var t=i.$refs.commentList;t&&(t.scrollTop=1e5)}))}},scrollToComment:function(t){var e=this.comments,n=e.findIndex((function(e){return e===t})),i=0===n,r=n===e.length-1,o="art_c".concat(t.commentId,"_").concat(t.id),a=document.getElementById(o),s=this.$refs.commentList;if(a&&s){var c=a.getBoundingClientRect(),l=s.getBoundingClientRect(),u=l.top+Math.round(l.height/2)-(i?0:r?c.height:Math.round(c.height/2));s.scrollBy({top:c.top-u,behavior:"smooth"})}},setSelectComment:function(t){this.$store.commit("setSelectComment",{comment:t})}},mounted:function(){var t=this;this.$nextTick((function(){t.onCommentListScroll()}))},computed:{artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},attachVisibleCheckerKey:function(){var t=this.winRect,e=this.commentListScrollTop,n=this.artboardCommentVisible,i=this.commentOnlyCurrentVerArtboard,r=this.artboardInComment;return n&&r?"s".concat(i?1:0,":t").concat(e,":h").concat(t.height):"-"},winRect:function(){return this.$store.state.winRect},commentFilterModeNames:function(){var t,e,n=this.commentOnlyCurrentVerArtboard,i=this.fetchDetailState,r=this.FetchState,o=this.notSupportCommentCloudVersion,a=this.comments,s=this.comments_onlyCurrentVer,c=!o&&!(i===r.Fetching||i===r.Error),l=null!==(t=null===a||void 0===a?void 0:a.reduce((function(t,e){var n,i;return t++,t+=null!==(n=null===e||void 0===e||null===(i=e.comments)||void 0===i?void 0:i.length)&&void 0!==n?n:0,t}),0))&&void 0!==t?t:0,u=null!==(e=null===s||void 0===s?void 0:s.reduce((function(t,e){var n,i;return t++,t+=null!==(n=null===e||void 0===e||null===(i=e.comments)||void 0===i?void 0:i.length)&&void 0!==n?n:0,t}),0))&&void 0!==e?e:0,d="仅当前版本评论(".concat(c?u:"..",")"),h="全部评论(".concat(c?l:"..",")");return{onlyCurrentVer:d,all:h,selected:n?d:h}},selectComment:function(){return this.$store.state.artboardDetail.selectComment},autoIntoInfo:function(){return this.$store.state.autoIntoInfo},FetchState:function(){return c["a"]},users:function(){var t;return null!==(t=this.$store.state.artboardDetail.commentUsers)&&void 0!==t?t:{}},commentOnlyCurrentVerArtboard:function(){return!this.notSupportArtboardVerCloudVersion&&this.$store.state.commentOnlyCurrentVerArtboard},comments:function(){return this.$store.state.artboardDetail.comments},comments_onlyCurrentVer:function(){var t,e,n=this.artboardVerId;return null!==(t=null===(e=this.comments)||void 0===e?void 0:e.filter((function(t){return t.artboardVer===n})))&&void 0!==t?t:[]},renderComments:function(){var t,e=this.comments,n=this.comments_onlyCurrentVer,i=this.commentOnlyCurrentVerArtboard;return null!==(t=i?n:e)&&void 0!==t?t:[]},commentRoot:function(){return{id:0,comments:this.comments}},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},visible:function(){return!0},commentInfoList:function(){var t;return null===(t=this.commentInfo)||void 0===t?void 0:t.list},curArtboardVerData:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e?void 0:e.artboardVerData)&&void 0!==t?t:this.artboard},artboardVerId:function(){var t,e;return null!==(t=null===(e=this.curArtboardVerData)||void 0===e?void 0:e.lastVersionId)&&void 0!==t?t:0}},watch:{"autoIntoInfo.commentId":function(t){if(t>0){var e=this.autoIntoInfo,n=this.autoIntoInfo,i=n.commentId,r=n.commentArtboardId,o=n.isReply;if(r>0&&r===this.curArtboardId){var a=this.getCommentOrReplyFromId(i,o);if(!a)return void this.clickReload();var s=a.artboardVer;null!=s&&this.setCurArtboardVer(s,!0),this.selectComment===a?this.scrollToComment(a):this.setSelectComment(a),e.commentId=e.commentArtboardId=-1}}},selectComment:function(t){var e=this;if(t){var n=this.$store.state.artboardDetail.notScrollList;!n&&this.$nextTick((function(){e.scrollToComment(t)}))}},comments:function(t,e){t!==e&&this.refreshCommentList()}},data:function(){return{commentListScrollTop:0}},props:{notSupportArtboardVerCloudVersion:Boolean,listNeedRefresh:Boolean,fetchDetailState:Number,notSupportCommentCloudVersion:Boolean,errorText:{validator:function(){return!0}}},created:function(){this.refreshCommentList()}},CO=kO,xO=(n("fc83"),Object(Gr["a"])(CO,YT,XT,!1,null,"0adfebdd",null)),SO=xO.exports,TO={components:{DetailComment:SO},methods:{onCommentUpdateTime:function(t){if(Object(l["k"])(t)){var e=t.artboardId,n=t.commentUpdateTime;e===this.curArtboardId&&this.$set(this.selfChangecommentUpdateTimes,n,1)}},commentAdded:function(t){if(t){var e=this.artboardDetail,n=this.artboard;n&&(t.pointEnable&&(e.maxPointIndex=Math.max(e.maxPointIndex,t.pointIndex)),0===t.commentId?n.comments++:n.replies++)}},_getCommentsWithCache:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a,s,u,d,h,f,m,v;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if(o=e.curArtboardId,a=e.notSupportArtboardVerCloudVersion,s=e.artboard,u=e.listNeedRefresh,o){n.n=1;break}throw new Error("画板id不存在");case 1:if(t||u){n.n=2;break}if(d=tr("comment",o),!d){n.n=2;break}return n.a(2,d);case 2:return h=new FormData,h.append("artboardid",o),n.n=3,e.fetchPostCloudApi(a?"GetCommentsByArtboard":"GetArtboardDataDetailV2ByWeb",{body:h});case 3:if(d=n.v,Object(l["k"])(d)){n.n=4;break}throw new Error("获取评论返回值异常:".concat(d));case 4:if(d.success){n.n=5;break}throw new Error(d.errMsg);case 5:if(d=d.data,!a){n.n=6;break}d={artboard:s,commentInfo:d,historyArtboards:[],users:null!==(f=d.users)&&void 0!==f?f:{}},n.n=8;break;case 6:if(Object(l["k"])(d)&&Object(l["k"])(d.artboard)){n.n=7;break}throw new Error("画板最新信息的返回值解析异常");case 7:d.artboard=s,Object(l["k"])(d.users)||(d.users={}),Object(l["i"])(d.historyArtboards)?d.historyArtboards.forEach((function(t){En(t),F(t),ni(t)})):d.historyArtboards=[],Object(l["k"])(d.commentInfo)||(d.commentInfo={});case 8:return m=function(t){if(!(!Object(l["k"])(t)||Object(l["j"])(t.updaterEmail)&&Object(l["j"])(t.updaterName))){var e=d.users[t.updaterId];e&&(t.updaterEmail=e.email,t.updaterName=e.nickName)}},v=null!==(r=d.artboard.cid)&&void 0!==r?r:d.artboard.id,d.artboard.cid=v,d.historyArtboards.forEach((function(t){m(t),t.cid=v,null==t.lastVersionId&&(t.lastVersionId=t.verId)})),m(d.artboard),d.comments=zo(d.commentInfo,c["c"],d.users),e.refreshedMinNotifyId=e.maxNotifyId,Qi("comment",o,d,8e3),n.a(2,d)}}),n)})))()},clickRefresh:function(){this.getComments(!0)},getComments:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a,s,u,d,h,f,m,v,p,b,g,w;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(e.inCloudMode){n.n=1;break}return n.a(2);case 1:if(e.inArtboardMode){n.n=2;break}return n.a(2);case 2:if(e.artboardInComment||e.pointCommentShowAlways){n.n=3;break}return n.a(2);case 3:if(e.commentDetailVisible){n.n=4;break}return n.a(2);case 4:if(o=e.curArtboardId,a=e.artboardDetail,s=e.artboard,o){n.n=5;break}return n.a(2);case 5:if(u="".concat(s.cid,"-").concat(s.updateTimeTimes,":"),a.fetchState!==c["a"].Fetching||0!==(null===(r=e.fetchKey)||void 0===r?void 0:r.indexOf(u))){n.n=6;break}return n.a(2);case 6:if(u+=Date.now().toString(16),a.fetchState=c["a"].Fetching,a.errorText="",g=!1,!g){n.n=7;break}return n.n=7,Object(c["pb"])(50);case 7:return e.fetchKey=u,a.comments=null,a.commentUsers=null,n.p=8,e.selfChangecommentUpdateTimes={},n.n=9,e._getCommentsWithCache(t);case 9:d=n.v,e.fetchKey===u&&(a.comments=d.comments,a.commentUsers=d.users,f=d.commentInfo,a.maxPointIndex=null!==(h=null===f||void 0===f?void 0:f.artboardMaxPointIndex)&&void 0!==h?h:0,Object(l["k"])(f)&&(m=0,v=0,Object(l["i"])(f.list)&&(m=f.list.length,f.list.forEach((function(t){var e,n;v+=null!==(e=null===t||void 0===t||null===(n=t.comments)||void 0===n?void 0:n.length)&&void 0!==e?e:0}))),p=e.artboard,p&&(p.comments=m,p.replies=v,f.commentUpdateTime>=0&&(p.commentUpdateTime=f.commentUpdateTime,b=e.$store.state.userNotify.commentUpdateStates,e.$set(b,e.cloudKey,{artboardId:o,commentUpdateTime:f.commentUpdateTime})))),e.listNeedRefresh=!1,a.fetchState=c["a"].Success),n.n=11;break;case 10:n.p=10,w=n.v,e.fetchKey===u&&(a.errorText=w,a.fetchState=c["a"].Error,e.showTextTip(w));case 11:return n.a(2)}}),n,null,[[8,10]])})))()}},computed:{cloudPage:function(){var t;return this.curArtboard&&(t=this.curArtboard.artboard.mlConfig.softVersion),t||(t=this.$store.state.config.softVer),"https://www.marklion.cn/cloud.shtml?invoke=MarkLion.Output".concat(Object(l["j"])(t)?"&ver=".concat(t):"")},pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},commentDetailVisible:function(){return this.cloudIsLogin||!this.cloudNeedLogin&&this.supportPublicCloudShowCommentCloudVersion},supportPublicCloudShowCommentCloudVersion:function(){return!Qr.notSupportPublicCloudShowComment(this.cloudVersion)},notSupportArtboardVerCloudVersion:function(){return Qr.notSupportAiPrompt(this.cloudVersion)},artboardCommentUpdateTimeChanged:function(){var t,e=this.artboardNewCommentUpdateTime,n=this.listNeedRefresh,i=this.selfChangecommentUpdateTimes,r=this.curArtboardId;return!(r<1)&&(!n&&(0!==e&&(!i[e]&&e!==(null===(t=this.artboard)||void 0===t?void 0:t.commentUpdateTime))))},artboardNewCommentUpdateTime:function(){var t,e=this.$store.state.userNotify.commentUpdateStates[this.cloudKey];return e?e.artboardId!==this.curArtboardId?0:null!==(t=e.commentUpdateTime)&&void 0!==t?t:0:0},maxNotifyId:function(){var t,e=this.notifyList;return 0===e.length?0:null===(t=e[0])||void 0===t?void 0:t.id},notifyList:function(){var t,e;return null!==(t=null===(e=this.$store.state.userNotify.cloudList[this.cloudKey])||void 0===e?void 0:e.list)&&void 0!==t?t:[]},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},artboardDetail:function(){return this.$store.state.artboardDetail},notSupportCommentCloudVersion:function(){return Qr.notSupportArtboardComment(this.cloudVersion)},artboard:function(){var t,e=this.curArtboard;return null!==(t=null===e||void 0===e?void 0:e.artboard)&&void 0!==t?t:null},curArtboardId:function(){var t,e;return null!==(t=null===(e=this.artboard)||void 0===e?void 0:e.cid)&&void 0!==t?t:0},refreshDataTicks:function(){return this.artboardDetail.refreshDataTicks},commentRefreshKey:function(){var t=this.pointCommentShowAlways,e=this.inArtboardMode,n=this.curArtboardId,i=this.cloudIsLogin,r=this.artboardInComment;return"".concat(e,":").concat(t,":").concat(n,":").concat(i,":").concat(t||r?1:0)}},watch:{artboardCommentUpdateTimeChanged:function(t){t&&(this.listNeedRefresh=!0)},refreshDataTicks:function(){this.clickRefresh()},commentRefreshKey:function(){this.getComments()}},data:function(){return{selfChangecommentUpdateTimes:{},listNeedRefresh:!1,refreshedMinNotifyId:0,fetchKey:""}},created:function(){this.getComments()}},OO=TO,IO=(n("872e"),Object(Gr["a"])(OO,$T,zT,!1,null,"1c3f31b1",null)),AO=IO.exports,FO=function(){var t=this,e=t._self._c;return t.inMultDownMode&&t.curArtboard?e("section",{staticClass:"mult-download"},[0===t.exportNodeCount?e("div",{staticClass:"empty"},[t._v("当前画板不存在切图")]):[e("Header",{attrs:{exportNodeCount:t.exportNodeCount,options:t.platformSelectOptions},on:{onPlatformSelectChanged:t.onPlatformSelectChanged}}),e("div",{staticClass:"list"},[e("LazyList",{ref:"lazyList",attrs:{list:t.curArtboard.exportNodes,lineHeight:80},scopedSlots:t._u([{key:"default",fn:function(n){return n.item?e("ExportNodeItem",{key:"".concat(n.realIndex,"-").concat(n.item.guid),attrs:{node:n.item,exportPdfOnly:t.exportPdfOnly}}):t._e()}}],null,!0)})],1),e("div",{staticClass:"line"}),t.currentResInSvg||t.currentResInPdf?t._e():e("div",{staticClass:"platform-set"},[e("PropertyDownloadOptions",{ref:"downOptions",attrs:{jpgQuality:t.jpgQuality,currentResInSvg:t.currentResInSvg,currentResInPdf:t.currentResInPdf,currentResInJpg:t.currentResInJpg,exportSvgOnly:t.exportSvgOnly,exportPdfOnly:t.exportPdfOnly,downloadPlatform:t.downloadPlatform,node:null,bottomPosition:!0},on:{setJpgQuality:t.setJpgQuality}})],1),e("div",{staticClass:"btns"},[e("Select",{attrs:{options:t.resTypeSelectOptions,expandUp:!0,light:!0},on:{changed:t.onResTypeSelectChanged}}),e("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickDownSelectAll()}}},[t._v("下载切图")])],1)]],2):t._e()},jO=[],_O=function(){var t=this,e=t._self._c;return e("section",{staticClass:"header"},[e("a",{staticClass:"btn-set-platform",class:Object(f["a"])({on:t.setting},t.calcPlatformTypeCss,!0),attrs:{href:"javascript:;"},on:{click:function(e){t.setting=!t.setting}}},[t._v(" "+t._s(t.calcPlatformTypeText)+" ")]),t.setting?e("div",{staticClass:"platforms"},[e("SetPlatform",{attrs:{options:t.options},on:{clickCalcPlatform:t.clickCalcPlatform}})],1):t._e(),e("div",[0!==t.exportNodeCount?e("Checkbox",{attrs:{text:t.selectAllText,selected:t.allSelected},on:{click:t.clickAllSelectBtn}}):t._e()],1)])},MO=[],LO=function(){var t=this,e=t._self._c;return e("section",{staticClass:"set-platform"},[e("ul",t._l(t.options,(function(n){return e("li",{key:n.name,class:t.platformItemCls(n)},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform(n)}}},[t._v(t._s(n.name))])])})),0)])},PO=[],DO={methods:{clickCalcPlatform:function(t){this.$emit("clickCalcPlatform",t)},platformItemCls:function(t){return Object(f["a"])(Object(f["a"])({},a["c"].getClassName(t.value),!0),"on",this.calcPlatformType2===t.value)}},data:function(){return{calcPlatformType2:0}},created:function(){this.calcPlatformType2=(this.options.find((function(t){return t.selected}))||{value:0}).value},props:{options:Array}},NO=DO,EO=(n("f856"),Object(Gr["a"])(NO,LO,PO,!1,null,"9b236aa2",null)),RO=EO.exports,VO={components:{Checkbox:vh,SetPlatform:RO},methods:{clickCalcPlatform:function(t){this.$emit("onPlatformSelectChanged",t),this.setting=!1},clickAllSelectBtn:function(t){t=!this.allSelected&&(this.exportNodeCount,!0);var e=this.curArtboard.exportNodes;e.forEach((function(e){e.markedForExport&&(e.mlUserSelectDown=t)}))}},computed:{selectAllText:function(){return"全选(".concat(this.selectNodeCount,"/").concat(this.exportNodeCount,")")},calcPlatformTypeCss:function(){var t=this.options.find((function(t){return t.selected}));return a["c"].getClassName(null===t||void 0===t?void 0:t.value)},calcPlatformTypeText:function(){if(!Object(l["i"])(this.options))return"UnKnown";var t=this.options.find((function(t){return t.selected}));return t?t.name:"UnKnown"},allSelected:function(){return 0!==this.exportNodeCount&&this.exportNodeCount===this.selectNodeCount},selectNodeCount:function(){var t=this.curArtboard.exportNodes,e=0;return t.forEach((function(t){t.markedForExport&&t.mlUserSelectDown&&(e+=1)})),e}},data:function(){return{setting:!1}},props:{exportNodeCount:Number,options:Array}},BO=VO,HO=(n("ea18"),Object(Gr["a"])(BO,_O,MO,!1,null,"b76f94e6",null)),UO=HO.exports,GO=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("div",{staticClass:"prev",on:{click:t.clickSelect}},[e("Checkbox",{attrs:{text:"",selected:t.node.mlUserSelectDown}})],1),e("div",{staticClass:"preview",class:{on:t.node.mlUserSelectDown,white:t.exportBoxBackground===t.ExportBoxBackgroundType.White,black:t.exportBoxBackground===t.ExportBoxBackgroundType.Black},on:{click:t.clickSelect,contextmenu:function(e){e.preventDefault(),t.exportBgTabVisible=!0}}},[t.exportPdfOnly?e("PdfViewer",{attrs:{maxWidth:"95%",maxHeight:"95%",url:t.exportPreviewPng}}):e("img",{attrs:{src:t.exportPreviewPng}})],1),e("div",{staticClass:"info"},[e("NodeName",{attrs:{node:t.node}}),e("div",{staticClass:"size"},[t._v(t._s(t.size))])],1),t.exportBgTabVisible?e("ul",{staticClass:"export-bg"},[e("li",{class:{on:t.ExportBoxBackgroundType.Black===t.exportBoxBackground,black:1},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Black)}}},[t._v(" 深色预览背景 ")]),e("li",{class:{on:t.ExportBoxBackgroundType.Transparent===t.exportBoxBackground,transparent:1},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Transparent)}}},[t._v(" 浅色预览背景 ")])]):t._e()])},WO=[],$O={components:{Checkbox:vh,NodeName:dS,PdfViewer:aT},methods:{clickSelect:function(){var t=this.node;t.mlUserSelectDown=!t.mlUserSelectDown},clickExportBoxBackgroundType:function(t){this.$store.commit("exportBoxBackgroundType",t)},hideSelect:function(){var t=this;requestAnimationFrame((function(){t.exportBgTabVisible=!1}))}},computed:{ExportBoxBackgroundType:function(){return a["ab"]},exportPreviewPng:function(){var t,e,n=null!==(t=null===(e=this.node)||void 0===e?void 0:e.mlConfig)&&void 0!==t?t:{},i=n.pngPreview,r=n.svgPreview,o=n.pdfPreview,a=i||r;return this.inCloudMode?this.exportPdfOnly&&!a&&o?c["O"].combineResourcePath(o):c["O"].combineResourcePath(a):a+"?"+this.curArtboard.artboard.mlOutputTime},size:function(){var t=this.node,e=this.curArtboardLoadedVerData,n=null===e||void 0===e?void 0:e.mlConfig;if(n){var i=n.sizeMap;if(i)for(var r=t.exportPath.toLowerCase(),o=0;o<ya.length;o++){var a=ya[o],s=a.scale,c=a.ext,l=i[r+c];if(l){var u=Math.ceil(l.width/s),d=Math.ceil(l.height/s);return"".concat(u,"x").concat(d)}}}return"".concat(Math.ceil(Object(m["a"])(this.originWidth,2)),"x").concat(Math.ceil(Object(m["a"])(this.originHeight,2)))},originWidth:function(){return this.node.boundsInArtboard.width},originHeight:function(){return this.node.boundsInArtboard.height}},watch:{exportBgTabVisible:function(t){t?(window.addEventListener("click",this.hideSelect,!0),window.addEventListener("contextmenu",this.hideSelect,!0)):(window.removeEventListener("click",this.hideSelect,!0),window.removeEventListener("contextmenu",this.hideSelect,!0))}},beforeDestroy:function(){window.removeEventListener("click",this.hideSelect,!0),window.removeEventListener("contextmenu",this.hideSelect,!0)},data:function(){return{exportBgTabVisible:!1}},props:{node:Object,exportPdfOnly:Boolean}},zO=$O,YO=(n("f5b8"),Object(Gr["a"])(zO,GO,WO,!1,null,"69f780cc",null)),XO=YO.exports;function KO(t,e){if(Object(l["k"])(t)){var n=t.exportNodes;Object(l["i"])(n)&&(e=!!e,n.forEach((function(t){t.mlUserSelectDown=e})))}}var qO={components:{Header:UO,ExportNodeItem:XO,PropertyDownloadOptions:tT,Select:lh,LazyList:_h},methods:{setJpgQuality:function(t){t>0&&t<=100&&(this.jpgQuality=t,Object(c["jb"])(kt,t))},onPlatformSelectChanged:function(t){Object(l["k"])(t)&&(this.downloadPlatform=t.value)},onResTypeSelectChanged:function(t){Object(l["k"])(t)&&this.clickCurrentResType(t.value)},clickCurrentResType:function(t){switch(t){case a["fb"].PNG:if(!this.exportPng)return void this.showTextTip("设计狮没有为该画板导出「PNG」格式的切图");break;case a["fb"].WEBP:if(!this.exportWebP)return void this.showTextTip("设计狮没有为该画板导出「WEBP」格式的切图");break;case a["fb"].SVG:if(!this.exportSvg)return void this.showTextTip("设计狮没有为该画板导出「SVG」格式的切图");break;case a["fb"].PDF:if(!this.exportPfd)return void this.showTextTip("设计狮没有为该画板导出「PDF」格式的切图");break;case a["fb"].JPG:break}this.currentResType=t,Object(c["jb"])("resType",t)},clickDownSelectAll:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(0!==t.exportNodeCount){e.n=1;break}return t.showTextTip("当前画板不存在切图"),e.a(2);case 1:if(t.setInOutput(!0),e.p=2,!t.currentResInPdf){e.n=4;break}return e.n=3,Ca(t.selectNodes,t.curArtboard,t.inCloudViewerArtboardInfoMode);case 3:e.n=9;break;case 4:if(!t.currentResInSvg){e.n=6;break}return e.n=5,Ta(t.selectNodes,t.curArtboard,t.inCloudViewerArtboardInfoMode);case 5:e.n=9;break;case 6:if(!t.currentResInJpg){e.n=8;break}return e.n=7,Wa(t.downloadPlatform,t.androidUseMipmap,t.$refs.downOptions.checkSetting,t.selectNodes,t.curArtboard,t.jpgQuality/100,t.inCloudViewerArtboardInfoMode);case 7:e.n=9;break;case 8:return e.n=9,$a(t.downloadPlatform,t.androidUseMipmap,t.$refs.downOptions.checkSetting,t.selectNodes,t.curArtboard,t.currentResInWebP,t.inCloudViewerArtboardInfoMode);case 9:e.n=11;break;case 10:e.p=10,n=e.v,t.showTextTip(n);case 11:return e.p=11,t.setInOutput(!1),e.f(11);case 12:return e.a(2)}}),e,null,[[2,10,11,12]])})))()},initJpgQuality:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["F"])(kt,!1));(isNaN(e)||e<1||e>=100)&&(e=yt),this.jpgQuality=e}},initCurrentResType:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["F"])("resType",!1));(isNaN(e)||!isFinite(e)||e!==a["fb"].SVG&&e!==a["fb"].PDF&&e!==a["fb"].WEBP&&e!==a["fb"].JPG)&&(e=a["fb"].PNG);var n=this.curArtboardLoadedVerData.mlConfig.resType;n||(n=a["fb"].PNG);var i=this.exportPng,r=this.exportSvg,o=this.exportWebP,s=this.exportPdf;switch(e){case a["fb"].PNG:i||(o?e=a["fb"].WEBP:r?e=a["fb"].SVG:s&&(e=a["fb"].PDF));break;case a["fb"].SVG:r||(i?e=a["fb"].PNG:o?e=a["fb"].WEBP:s&&(e=a["fb"].PDF));break;case a["fb"].PDF:s||(i?e=a["fb"].PNG:o?e=a["fb"].WEBP:r&&(e=a["fb"].SVG));break;case a["fb"].WEBP:o||(i?e=a["fb"].PNG:r?e=a["fb"].SVG:s&&(e=a["fb"].PDF));break;case a["fb"].JPG:i||r||o||s||(e=a["fb"].PNG);break}this.currentResType=e}}},computed:{sliceScrollNode:function(){return this.artboardDetail.sliceScrollNode},artboardDetail:function(){return this.$store.state.artboardDetail},platformSelectOptions:function(){return[{name:"Web",value:a["c"].WEB,selected:this.downloadPlatform===a["c"].WEB},{name:"Android",value:a["c"].ANDROID,selected:this.downloadPlatform===a["c"].ANDROID},{name:"iOS",value:a["c"].IOS,selected:this.downloadPlatform===a["c"].IOS},{name:"微信小程序",value:a["c"].WE_CHAT_MINI_PROGRAM,selected:this.downloadPlatform===a["c"].WE_CHAT_MINI_PROGRAM}]},resTypeSelectOptions:function(){var t=this.currentResType,e={value:a["fb"].PNG,name:"PNG",selected:t===a["fb"].PNG,disabled:!this.exportPng},n={value:a["fb"].WEBP,name:"WEBP",selected:t===a["fb"].WEBP,disabled:!this.exportWebP},i={value:a["fb"].SVG,name:"SVG",selected:t===a["fb"].SVG,disabled:!this.exportSvg},r={value:a["fb"].PDF,name:"PDF",selected:t===a["fb"].PDF,disabled:!this.exportPdf},o={value:a["fb"].JPG,name:"JPG",selected:t===a["fb"].JPG,disabled:!1};return[e,n,i,r,o]},exportWebP:function(){return Object(c["T"])(this.curArtboardLoadedVerData)},exportPng:function(){return Object(c["R"])(this.curArtboardLoadedVerData)},exportSvg:function(){return Object(c["S"])(this.curArtboardLoadedVerData)},exportPdf:function(){return Object(c["Q"])(this.curArtboardLoadedVerData)},exportSvgOnly:function(){return this.exportSvg&&!this.exportPng&&!this.exportWebP},exportPdfOnly:function(){return this.exportPdf&&!this.exportSvg&&!this.exportPng&&!this.exportWebP},currentResInPdf:function(){return this.currentResType===a["fb"].PDF},currentResInSvg:function(){return this.currentResType===a["fb"].SVG},currentResInJpg:function(){return this.currentResType===a["fb"].JPG},currentResInWebP:function(){return this.currentResType===a["fb"].WEBP},selectNodes:function(){var t=this.curArtboard.exportNodes,e=[];return t.forEach((function(t){t.markedForExport&&t.mlUserSelectDown&&e.push(t)})),e},exportNodeCount:function(){var t=this.curArtboard.exportNodes;return t.length}},watch:{sliceScrollNode:function(t){var e=this;t&&(this.artboardDetail.sliceScrollNode=null,this.$nextTick((function(){var n,i;null===(n=e.$refs.lazyList)||void 0===n||null===(i=n.scrollTo)||void 0===i||i.call(n,(function(e){return e===t}))})))},currentResType:function(){var t,e;null===(t=this.$refs.lazyList)||void 0===t||null===(e=t.resetBoxData)||void 0===e||e.call(t)},inMultDownMode:function(t){t&&(this.downloadPlatform=this.calcPlatformUse,KO(this.curArtboard,t),this.initCurrentResType(),this.initJpgQuality())},calcPlatformUse:function(t){this.downloadPlatform=t},curArtboard:function(t,e){KO(e,!1),this.inMultDownMode&&KO(t,!0),this.initCurrentResType(),this.initJpgQuality()}},data:function(){return{currentResType:a["fb"].PNG,jpgQuality:yt,CALC_PLATFORM_TYPE:a["c"],downloadPlatform:a["c"].WEB}},created:function(){this.downloadPlatform=this.calcPlatformUse,this.inMultDownMode&&KO(this.curArtboard,!0),this.initCurrentResType(),this.initJpgQuality()}},JO=qO,QO=(n("866c"),Object(Gr["a"])(JO,FO,jO,!1,null,"3e945d2f",null)),ZO=QO.exports,tI={components:{Properties:WT,MultDownload:ZO,CommentMain:AO},methods:{clickNavProperty:function(){if(this.clickNav(a["U"].Property),null==this.curNode){var t,e=null===(t=this.curArtboard)||void 0===t?void 0:t.artboard;e&&this.setCurNode(e)}},clickNavComment:function(){this.clickNav(a["U"].Comment)},clickNavSlice:function(){this.clickNav(a["U"].Slice)},clickNav:function(t){this.$store.commit("setRightNavType",t),this.propertyVisible&&t===a["U"].Property&&this.$store.commit("setRightNavTypePropertyClicked")}},computed:{multDownloadCount:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e||null===(e=e.exportNodes)||void 0===e?void 0:e.length)&&void 0!==t?t:0},commentCount:function(){var t,e=null===(t=this.curArtboard)||void 0===t?void 0:t.artboard;if(!e)return 0;var n=e.comments+e.replies;return isNaN(n)?0:n},commentVisible:function(){return this.artboardInComment&&this.$store.state.artboardCommentVisible},propertyVisible:function(){return null!=this.curNode&&this.$store.state.rightNavType===a["U"].Property},multDownloadVisible:function(){return this.inMultDownMode&&this.curArtboard},visible:function(){return this.commentVisible||this.propertyVisible||this.multDownloadVisible}}},eI=tI,nI=(n("5610"),Object(Gr["a"])(eI,dC,hC,!1,null,"66459443",null)),iI=nI.exports,rI={components:{ZoomContainer:Wl,LeftSide:uC,RightSide:iI},methods:{clickReload:function(){window.location.reload()},checkArtboardData:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a,s,u,d,h,f,m,v,p;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if(t){n.n=1;break}return n.a(2);case 1:return r=!0,Object(l["k"])(t)&&!1===t.isLoaded&&(r=!1),n.n=2,Xn(t,e.documentArtboards,e);case 2:o=n.v,!r&&o.isLoaded&&(a=o.artboard,Object(l["k"])(a)&&(s=a.mlConfig,Object(l["k"])(s)&&"number"===typeof s.platform&&(u=Object(c["B"])(a.docGuid,s.platform),e.$store.commit("setPlatform",u),d=Object(c["N"])(a.docGuid),e.$store.commit("setUnitTemplate",d)),h=c["O"].initNodeGuid,h?(c["O"].initNodeGuid=null,f=o.childs.find((function(t){return t.guid===h})),f&&e.curNode!==f&&e.setCurNode(f)):e.curNode&&(v=e.curNode.guid,p=null!==(m=o.childs.find((function(t){return v===(null===t||void 0===t?void 0:t.guid)})))&&void 0!==m?m:null,e.setCurNode(p))));case 3:return n.a(2)}}),n)})))()}},watch:{pathDataUpdateTimeTimes:function(t){t&&this.checkArtboardData(this.curArtboard).catch((function(t){}))}},computed:{autoIntoInfo:function(){return this.$store.state.autoIntoInfo},verDataWillBeFirstLoad:function(){var t,e,n=this.autoIntoInfo,i=n.commentArtboardId,r=n.commentId,o=this.inCloudMode,a=this.curArtboard;if(!o)return!1;if(r<1||i<1)return!1;if(!a)return!1;var s=null!==(t=null===(e=a.artboard)||void 0===e?void 0:e.cid)&&void 0!==t?t:0;return i===s},pathDataUpdateTimeTimes:function(){var t=this.pathData,e=this.updateTimeTimes;return t?"".concat(t,"-").concat(e):null},backgroundColor:function(){return this.$store.state.artboardDetail.interactionSet.backgroundColor},EnumScaleType:function(){return a["V"]},isLoaded:function(){return this.curArtboard.isLoaded},isFetching:function(){return this.curArtboard.isFetching||this.verDataWillBeFirstLoad},isError:function(){return this.curArtboard.isError},updateTimeTimes:function(){var t,e;return null!==(t=null===(e=this.loadedArtboard)||void 0===e?void 0:e.updateTimeTimes)&&void 0!==t?t:0},pathData:function(){var t,e;return null!==(t=null===(e=this.loadedArtboard)||void 0===e?void 0:e.pathData)&&void 0!==t?t:""},loadedArtboard:function(){var t=this.curArtboard,e=this.inCloudViewerArtboardInfoMode;return Ha(t,e)}},created:function(){this.checkArtboardData(this.curArtboard)}},oI=rI,aI=(n("e7e5"),Object(Gr["a"])(oI,Rk,Vk,!1,null,"d98ab06a",null)),sI=aI.exports,cI=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"pop-box webp-tip"},[e("div",{staticClass:"box"},[e("h4",[t._v("浏览器性能提示")]),e("p",{domProps:{textContent:t._s("Safari浏览器可能会出现响应卡顿".concat(t.supportWebp?"":"及WebP资源无法加载",",建议使用Chrome、Firefox浏览器访问."))}}),e("div",{staticClass:"footer"},[e("div",[e("a",{staticClass:"checkbox",class:{on:t.remember},attrs:{href:"javascript:;"},on:{click:function(e){t.remember=!t.remember}}},[e("i",[t._v("浏览器关闭前不再提示")])])]),e("div",[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickConfirm()}}},[t._v("我知道了")])])])])]):t._e()},lI=[],uI="safari_webp_notip",dI={methods:{clickConfirm:function(){this.remember&&Object(c["lb"])(uI,"1"),this.visible=!1},checkWebPSupport:function(){var t=this;clearTimeout(this.handle),this.handle=setTimeout((function(){t._checkWebPSupport()}),100)},_checkWebPSupport:function(){var t=this;if(this.inCloudMode&&this.allArtboardLoadChecked){var e="1"===Object(c["M"])(uI,!1);e||Di((function(e){var n=t.supportWebp=e===Ni.Support;Ri&&!n?t.visible=!0:e===Ni.Support&&Object(c["lb"])(uI,"1")}))}}},computed:{allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked}},watch:{allArtboardLoadChecked:function(){this.checkWebPSupport()},inCloudMode:function(){this.checkWebPSupport()}},data:function(){return{visible:!1,remember:!1,handle:0,supportWebp:!1}},beforeDestroy:function(){clearTimeout(this.handle)},created:function(){this.checkWebPSupport()}},hI=dI,fI=(n("bda1"),Object(Gr["a"])(hI,cI,lI,!1,null,"ccf18164",null)),mI=fI.exports,vI={components:{BeginnerGuide:Kr,EmptyData:_k,ArtboardList:Ek,ArtboardInfo:sI,Header:wk,Tip:Jd,ArtboardListItemMenu:$d,InOutputTip:hm,Authority:Tk,FolderNav:am,CloudNeedLoginTip:Vd,SafariWebpTip:mI,ImageViewer:Xl,NetDiskFileMain:Ld,AutomaticSync:io,ChangeArtboardsTip:lo},computed:{emptyText:function(){if(this.inCloudMode){if(0===this.cloudCurrentFolderId)return"私有云下还没有文件夹,请在标记狮中添加";if(this.inNetDiskFileMode){var t=this.curFileInfo;if(!t)return"文件不存在,可能已经被移动或删除";var e=t.curVerId,n=t.inVerData,i=t.name;return n?"文件「".concat(i,"」不存在版本 #").concat(e,",请通过右上角的版本列表菜单切换文件版本"):"文件不存在,可能已经被移动或删除"}return"当前文件夹是空的"}return"未检测到数据,请尝试重新导出画板"},artboardLoadProgressText:function(){return Math.floor(1e4*this.artboardLoadProgress.current/this.artboardLoadProgress.count)/100+"%"},artboardLoadProgress:function(){return this.$store.state.artboardLoadProgress},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},isEmptyArtboardData:function(){return this.inNetDiskFileMode?null==this.curFileInfo:0===this.documentArtboards.length},isEmptyFolder:function(){return this.isEmptyArtboardData&&0===this.cloudSubFiles.length&&0===this.cloudSubFolders.length}},watch:{cloudCurrentFolderId:function(){ju.clear(150)},curArtboard:function(){var t=this;this.checkUserState().then((function(e){t.$store.commit("setMyState",e)})).catch((function(){}))}}},pI=vI,bI=(n("56f5"),Object(Gr["a"])(pI,Dr,Nr,!1,null,"16359607",null)),gI=bI.exports,wI=!1;function yI(){var t=Object(c["F"])("evmu",!1);return Object(l["j"])(t)&&32===t.length||(t=Object(c["y"])(32,16),Object(c["jb"])("evmu",t)),t}function kI(){var t,e;if(!wI&&(wI=!0,Ii&&!Ii.inCloudMode)){var n=c["O"].config,i=n.guid,r=n.softVer,o=c["O"].fileType,a={ver:r,type:o,f:i.replace(/-/gi,""),u:yI(),ot:null!==(t=null===(e=Ii.documentArtboards.find((function(t){var e;return(null===t||void 0===t||null===(e=t.artboard)||void 0===e?void 0:e.mlOutputTime)>0})))||void 0===e?void 0:e.artboard.mlOutputTime)&&void 0!==t?t:0};if(!(a.ot<1)){var s="evmu".concat(a.type).concat(a.f).concat(a.ot),l=+Object(c["M"])(s,!1);if(!isNaN(l)&&l>0){var u=Math.abs(Date.now()-l);if(u>=0&&u<36e5)return}Object(c["lb"])(s,Date.now().toString());var d=new URLSearchParams(a),h=new Image,f=function(){h.onload=h.onerror=null,h.removeAttribute("src")};h.onload=h.onerror=f,h.src="".concat("https://log.marklion.cn","/st/?").concat(d.toString())}}}function CI(){try{return kI()}catch(t){}}function xI(t,e){return SI.apply(this,arguments)}function SI(){return SI=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,s,l;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:r=+Object(c["cb"])("commentid","#"),s="1"===Object(c["cb"])("isreply","#"),e().then((function(){c["O"].inCloudMode?function(){try{var t=Lr.state;if(Ii.cloud.renderMode==a["W"].File)return void(t.cloud.allFoldersBoxVisible=!1);t.cloud.allFoldersBoxVisible="1"===Object(c["M"])(a["f"],!1),je(t.documentArtboards);var e=t.cloud.defaultArtboardGuid,i=null,o=null;if(e){if(i=Ii.documentArtboards.find((function(t){return t.artboard.guid===e})),i){var l=window.location.href,u=/\/viewer\/\d+\/[^\\/]+\/([^\\/]+)\//i.exec(l),d=u?decodeURIComponent(u[1]):null;o=i.childs.find((function(t){return t.guid===d})),o||(c["O"].initNodeGuid=d)}if(t.curArtboard!==i&&Lr.commit("curArtboard",{artboard:i}),t.curNode!=o&&(Lr.commit("curNode",o),Lr.commit("setRightNavType",a["U"].Property)),r>0){var h,f,m=t.autoIntoInfo;m.commentArtboardId=null!==(h=null===(f=i)||void 0===f||null===(f=f.artboard)||void 0===f?void 0:f.cid)&&void 0!==h?h:0,m.commentId=r,m.isReply=s,Lr.commit("setRightNavType",a["U"].Comment)}}n()}finally{Lr.commit("allArtboardLoadChecked",!0)}}():function(){var t=function(){var t=window.location.hash,e=null,n=null;if(t){var i=/\/artboard\/([^\\/]+)/i.exec(t);if(i){var r=i[1];e=Ii.documentArtboards.find((function(t){return t.artboard.guid===r}))}if(e&&(i=/\/node\/([^\\/]+)/i.exec(t),i)){var o=i[1],a=e.childs;n=a.find((function(t){return t.guid===o}))}}Lr.state.curArtboard!==e&&Lr.commit("curArtboard",{artboard:e}),Lr.state.curNode!==n&&Lr.commit("curNode",n)};window.addEventListener("hashchange",t),t(),setTimeout((function(){Lr.commit("allArtboardLoadChecked",!0),CI()}),100)}()})),l=new o["a"]({store:Lr,render:function(t){return t(gI)}}),Di((function(t){Lr.commit("isSupportWebp",t),l.$mount("#app")}));case 1:return t.a(2)}}),t)}))),SI.apply(this,arguments)}var TI=function(){var t=this,e=t._self._c;return e("section",{class:{"header-off":!t.headerVisible},attrs:{id:"main"}},[!t.cloudNeedLogin||t.cloudIsLogin?e("div",{staticClass:"loading",class:{on:!t.allArtboardLoadChecked}},[t._v("正在加载画板数据中("+t._s(t.artboardLoadProgressText)+"),请稍后...")]):t._e(),t.cloudNeedLogin&&!t.cloudIsLogin?e("CloudNeedLoginTip"):t.allArtboardLoadChecked?[e("Header"),e("a",{staticClass:"btn-visible-pop",attrs:{href:"javascript:;",title:t.headerVisibleTitle},on:{click:t.clickHeaderVisible}}),e("main",{style:{backgroundColor:t.backgroundColor}},[t.cloudFolderNotFound?e("EmptyData",{attrs:{text:t.cloudFolderErrorText,showLoginBtn:t.cloudFolderInSpecify}}):t.permission?t.isEmptyArtboardData?e("EmptyData",{attrs:{text:t.emptyText}}):[e("LeftSide")]:e("Authority"),e("device-container")],2)]:t._e(),e("Tip"),e("AutomaticSync")],2)},OI=[],II=function(){var t=this,e=t._self._c;return e("section",{staticClass:"left-side-pc",class:{on:t.leftSideVisible}},[e("div",{staticClass:"btn-leftside-visible",class:{on:t.leftSideVisible,off:!t.headerVisible},attrs:{title:t.leftSideVisible?"收起左侧(F3)":"展开左侧(F3)"},on:{click:function(e){return t.setVisible(!t.visible)}}}),e("div",{staticClass:"filter"},[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText.artboard,expression:"searchText.artboard"}],ref:"input",attrs:{type:"text",placeholder:"搜索画板名",spellcheck:"false"},domProps:{value:t.searchText.artboard},on:{input:function(e){e.target.composing||t.$set(t.searchText,"artboard",e.target.value)}}}),t.searchText.artboard?e("span",{staticClass:"btn-clear",on:{click:t.clickClearInpout}}):t._e()]),e("LeftSideFlows")],1),e("section",{staticClass:"box"},[e("ArtboardList",{attrs:{visible:!0,list:t.renderDocumentArtboards,renderArtboardList:t.renderArtboardList,sliceFilterOpen:t.sliceFilterOpen}})],1)])},AI=[],FI=[],jI={toggleFullscreen:function(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()},isFullscreen:function(){var t=!0===document.fullscreen||null!=document.fullscreenElement||null!=document.msFullscreenElement||null!=document.mozFullscreenElement||null!=document.webkitFullscreenElement;return t||(t=screen.height==Math.max(window.outerHeight,window.innerHeight)&&screen.width==Math.max(window.outerWidth,window.innerWidth),t)},requestFullscreen:function(){var t=document.documentElement,e=t.requestFullscreen||t.webkitRequestFullscreen||t.msRequestFullscreen||t.mozRequestFullscreen;try{e&&e.call(t).catch((function(){}))}catch(n){}},exitFullscreen:function(){var t=document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen||document.mozExitFullscreen;t&&t.call(document)},onChange:function(t){if("function"===typeof t){var e=FI.findIndex((function(e){return e===t}));-1===e&&FI.push(t)}},offChange:function(t){if("function"===typeof t){var e=FI.findIndex((function(e){return e===t}));-1!==e&&FI.splice(e,1)}}};function _I(){if(0!=FI.length){var t=jI.isFullscreen();FI.forEach((function(e){try{e(t)}catch(n){console.error(n)}}))}}document.addEventListener("webkitfullscreenchange",_I),document.addEventListener("mozfullscreenchange",_I),document.addEventListener("msfullscreenchange",_I),document.addEventListener("fullscreenchange",_I),self.addEventListener("resize",_I);var MI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"leftside-flows"},[e("div",{staticClass:"btn-flows",attrs:{title:t.visible?"起始画板(Flows)":"当前没有配置起始画板"},on:{click:t.clickBtnFlows}}),t.visible?e("menu",t._l(t.homeList,(function(n){return e("div",{key:"".concat(n.artboard.cid?n.artboard.cid:n.artboard.guid),attrs:{title:"切换到起始画板[".concat(n.artboard.name,"]")},domProps:{textContent:t._s(n.artboard.name)},on:{click:function(e){return t.clickArtboard(n)}}})})),0):t._e()])},LI=[],PI={methods:{clickBtnFlows:function(){var t=this.homeList;0!==t.length||this.showTextTip("当前没有配置起始画板")},clickArtboard:function(t){t&&(this.setCurArtboard(t),this.showTextTip("已切换到起始画板"))}},computed:{visible:function(){return this.homeList.length>0},homeList:function(){var t=this.renderDocumentArtboards;return t.filter((function(t){var e;return null===(e=t.artboard)||void 0===e?void 0:e.flowStart}))}}},DI=PI,NI=(n("b547"),Object(Gr["a"])(DI,MI,LI,!1,null,"52c44f43",null)),EI=NI.exports,RI={components:{ArtboardList:aC,LeftSideFlows:EI},methods:{clickClearInpout:function(){var t=this,e=this.searchText;e.artboard="",requestAnimationFrame((function(){var e,n;null===(e=t.$refs.input)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e)}))},quickKeyShift:function(t){this.shiftKey=t.shiftKey},quickKey:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,a,s,c,l;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:e.quickKeyShift(t),r=t.keyCode||t.which,l=r,n.n=112===l||122===l?1:113===l?2:114===l?3:38===l||40===l?4:15;break;case 1:return jI.toggleFullscreen(),t.preventDefault(),n.a(3,15);case 2:return e.$store.commit("setInteractionHeaderVisible",!e.headerVisible),t.preventDefault(),n.a(3,15);case 3:return e.setVisible(!e.visible),t.preventDefault(),n.a(3,15);case 4:if(!e.keydownConfirming){n.n=5;break}return n.a(2);case 5:if(!e.imageViewer.visible){n.n=6;break}return n.a(2);case 6:if(o=38===r?-1:1,a=t.ctrlKey||t.metaKey,a){n.n=7;break}return n.a(3,15);case 7:if(s=e.renderArtboardList,0!==s.length){n.n=8;break}return e.showTextTip(1===o?"已经到达最后一个画板":"已经到达第一个画板"),n.a(2);case 8:if(c=s.findIndex((function(t){return e.curArtboard===t})),-1===c?c=0:c+=o,!(c<0)){n.n=9;break}return e.showTextTip("已经到达第一个画板"),n.a(2);case 9:if(!(c>=s.length)){n.n=10;break}return e.showTextTip("已经到达最后一个画板"),n.a(2);case 10:if(!e.inCommentDrawing){n.n=14;break}return e.keydownConfirming=!0,n.p=11,n.n=12,e.confirm({text:"正在编辑画板截图,是否清理截图信息并切换画板?"});case 12:if(n.v){n.n=13;break}return n.a(2);case 13:return n.p=13,e.keydownConfirming=!1,n.f(13);case 14:return e.setCurArtboard(s[c]),n.a(3,15);case 15:return n.a(2)}}),n,null,[[11,,13,14]])})))()},getArtboardExportNodeCount:function(t){if(this.inCloudMode)return t.artboard.resNodeCount;var e=t.exportNodes;return e.length},setVisible:function(t){if(!this.headerVisible)return this.$store.commit("setInteractionHeaderVisible",!0),void this.$store.commit("leftSideVisible",!0);this.$store.commit("leftSideVisible",t)}},computed:{leftSideVisible:function(){return this.visible&&this.headerVisible},headerVisible:function(){return this.$store.state.artboardDetail.interactionSet.headerVisible},imageViewer:function(){return this.$store.state.imageViewer},renderArtboardList:function(){var t=this,e=this.artboardSearchText,n=this.sliceFilterOpen,i=this.renderDocumentArtboards,r=""!==e,o=[];return i.forEach((function(i){if(i&&i.artboard&&(!n||0!==t.getArtboardExportNodeCount(i))){if(r){var a=i.artboard.name;if(!a)return;if(-1===a.toLowerCase().indexOf(e))return}o.push(i)}})),o},artboardSearchText:function(){return this.searchText.artboard.toLowerCase()},visible:function(){return this.$store.state.artboardDetail.leftSideVisible}},data:function(){return{keydownConfirming:!1,preloadCount:2,shiftKey:!1,sliceFilterOpen:!1,commentFilterOpen:!1,searchText:{artboard:""}}},created:function(){window.addEventListener("keydown",this.quickKey),window.addEventListener("keyup",this.quickKeyShift)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey),window.removeEventListener("keyup",this.quickKeyShift)}},VI=RI,BI=(n("bf12"),Object(Gr["a"])(VI,II,AI,!1,null,"4ea8fcf7",null)),HI=BI.exports,UI=function(){var t=this,e=t._self._c;return e("header",[e("div",{staticClass:"nav"},[e("PathNav")],1),e("device-set"),e("div",{staticClass:"preview-set"},[e("a",{staticClass:"btn-fullscreen",class:{on:t.isFullscreen},attrs:{href:"javascript:;",title:t.isFullscreen?"退出全屏(F1)":"全屏查看(F1)"},on:{click:t.clickFullscreen}}),e("BtnContainerColor"),e("BtnContainerVerticalAlign"),e("div",{staticClass:"line"}),e("div",{staticClass:"helper",class:{on:t.helperVisible},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickHelper(!t.helperVisible)}}},[e("Helper")],1),t.inCloudMode?e("BtnGoInteraction",{attrs:{fixRight:!t.cloudIsLogin}}):t._e(),t.inCloudMode&&t.cloudIsLogin?e("UserNotifyButton"):t._e(),t.inCloudMode?e("UserInfo",{attrs:{setVisible:t.setVisible}}):t._e()],1),t.inCloudMode?e("UserNotify"):t._e()],1)},GI=[],WI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav-item"},[e("div",{staticClass:"name",attrs:{title:t.folderName},on:{click:t.clickNav}},[t._v(t._s(t.folderName))]),t.showArtboardPages?e("PathNavArtboardPages"):t._e()],1)},$I=[],zI={components:{PathNavArtboardPages:Bg},methods:{clickNav:function(){Object(c["P"])(this.cloudCurrentFolderId)}},computed:{folderName:function(){var t=this.cloudName,e=this.cloudCurrentFolderId,n=this.cloudFolderNotFound,i=this.documentName,r=this.cloudFolderInSpecify;return 0===e?t||"私有云根目录":r?"没有访问权限":n?"链接已失效":i},showArtboardPages:function(){return this.documents.length>0}}},YI=zI,XI=(n("2d5e"),Object(Gr["a"])(YI,WI,$I,!1,null,"8bade1e6",null)),KI=XI.exports,qI=function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn-container-vertical-align",class:Object(f["a"])(Object(f["a"])({},t.verticalAlignCss,1),"off",t.isWeb),attrs:{title:"在移动设备模拟中，当画板无法垂直完全覆盖屏幕时，画板的垂直对齐方式"},on:{click:t.clickVerticalAlign}})},JI=[],QI={methods:{clickVerticalAlign:function(){var t,e=this.verticalAlign,n=this.isWeb;if(n)this.showTextTip("Web模式下,无法调整画板的垂直对齐方式");else{var i=Object(f["a"])(Object(f["a"])(Object(f["a"])({},a["H"].Top,a["H"].Middle),a["H"].Middle,a["H"].Bottom),a["H"].Bottom,a["H"].Top),r=null!==(t=i[e])&&void 0!==t?t:a["H"].Middle;this.$store.commit("setInteractionArtboardVerticalAlign",r),this.showTextTip("已修改画板的对齐方式为「".concat(a["H"].getName(r),"」"))}}},computed:{isWeb:function(){return this.pcDeviceSet.type===Gi.Web},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet},verticalAlignCss:function(){switch(this.verticalAlign){case a["H"].Bottom:return"align-bottom";case a["H"].Top:return"align-top";default:return"align-middle"}},verticalAlign:function(){return this.$store.state.artboardDetail.interactionSet.verticalAlign}}},ZI=QI,tA=(n("2f1e"),Object(Gr["a"])(ZI,qI,JI,!1,null,"025ea616",null)),eA=tA.exports,nA=function(){var t=this,e=t._self._c;return e("div",{staticClass:"device-set"},[e("div",{staticClass:"device-name"},[e("div",{staticClass:"cur-text",class:{on:t.boxVisible},on:{click:function(e){t.boxVisible=!t.boxVisible}}},[t._v(t._s(t.pcDeviceSet.name))]),t.boxVisible?e("div",{staticClass:"device-list"},t._l(t.interactionDeviceList,(function(n,i){return e("div",{key:i,staticClass:"device-item",class:{web:n.type===t.InteractionDeviceType.Web}},[e("div",{staticClass:"text",class:{on:t.pcDeviceSet.name===n.name},on:{click:function(e){return t.clickDevice(n)}}},[t._v(t._s(n.name))]),n.type===t.InteractionDeviceType.Group?e("div",{staticClass:"device-sublist"},t._l(n.list,(function(n,r){return e("div",{key:"".concat(i,"-").concat(r),staticClass:"device-subitem"},[e("div",{staticClass:"subtext",class:{on:t.pcDeviceSet.name===n.name},on:{click:function(e){return t.clickDevice(n)}}},[t._v(t._s(n.name)+" ("+t._s(n.width)+" × "+t._s(n.height)+")")])])})),0):t._e()])})),0):t._e()]),e("div",{staticClass:"device-size",class:{off:!t.showDeviceSize}},[e("input",{attrs:{type:"number",readonly:!t.canChangeDeviceSize},domProps:{value:t.pcDeviceSet.width},on:{blur:function(e){return t.blurDeviceSize(e,"width")}}}),e("div",{staticClass:"split"},[t._v("x")]),e("input",{attrs:{type:"number",readonly:!t.canChangeDeviceSize},domProps:{value:t.pcDeviceSet.height},on:{blur:function(e){return t.blurDeviceSize(e,"height")}}})]),e("a",{staticClass:"btn-use-horizontal",class:{off:!t.showUseHorizontal},attrs:{href:"javascript:;",title:"切换横竖屏"},on:{click:t.clickHorizontal}})])},iA=[],rA={methods:{blurDeviceSize:function(t,e){if(this.canChangeDeviceSize){var n=this.pcDeviceSet,i=+t.target.value;isNaN(i)?t.target.value=n[e]:(i<100&&(i=100,t.target.value=i),n[e]=i)}},clickHorizontal:function(){var t=this.pcDeviceSet,e=t.height,n=t.width;this.setPCDeviceSet({isHorizontal:!this.isHorizontal,width:e,height:n})},clickDevice:function(t){if(Object(l["k"])(t))switch(t.type){case Gi.Group:return void(this.notCloseThisTime=!0);case Gi.Web:case Gi.Mobile:return void this.setPCDeviceSet(t);case Gi.Custom:var e=this.pcDeviceSet,n={width:0===e.width?375:Math.max(e.width,100),height:0===e.height?667:Math.max(e.height,100)};return n.type=Gi.Custom,n.name=t.name,n.hasBangs=!1,n.iosDynamicIsland=!1,void this.setPCDeviceSet(n)}},setPCDeviceSet:function(t){this.$store.commit("setPCDeviceSet",t)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.boxHandle),this.boxHandle=setTimeout((function(){e.notCloseThisTime?e.notCloseThisTime=!1:e.boxVisible=!1}),100))}},watch:{boxVisible:function(t){t?(clearTimeout(this.boxHandle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},computed:{isHorizontal:function(){return this.pcDeviceSet.isHorizontal},canChangeDeviceSize:function(){switch(this.pcDeviceSet.type){case Gi.Custom:return!0}return!1},showDeviceSize:function(){switch(this.pcDeviceSet.type){case Gi.Custom:return!0}return!1},showUseHorizontal:function(){switch(this.pcDeviceSet.type){case Gi.Mobile:case Gi.Custom:return!0}return!1},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet}},data:function(){return{interactionDeviceList:$i,InteractionDeviceType:Gi,boxVisible:!1,boxHandle:0,notCloseThisTime:!1}},created:function(){0},beforeDestroy:function(){window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)}},oA=rA,aA=(n("5026"),Object(Gr["a"])(oA,nA,iA,!1,null,"4fd5aadd",null)),sA=aA.exports,cA={components:{PathNav:KI,BtnContainerColor:ym,BtnContainerVerticalAlign:eA,DeviceSet:sA,UserNotifyButton:qy,UserNotify:lk,UserInfo:Wy,Helper:Wb,BtnGoInteraction:zv},methods:{clickHelper:function(t){this.$store.commit("setHelperVisible",t)},clickFullscreen:function(){jI.toggleFullscreen()},onFullscreen:function(t){this.isFullscreen=t}},computed:{helperVisible:function(){return this.$store.state.helper.visible},setVisible:function(){return!this.cloudFolderNotFound&&this.permission&&this.documentArtboards.length>0}},data:function(){return{isFullscreen:jI.isFullscreen()}},beforeDestroy:function(){jI.offChange(this.onFullscreen)},created:function(){jI.onChange(this.onFullscreen)}},lA=cA,uA=(n("04d2"),Object(Gr["a"])(lA,UI,GI,!1,null,"1dc3d4b0",null)),dA=uA.exports,hA=function(){var t=this,e=t._self._c;return e("div",{staticClass:"device-container",class:{"margin-left":t.leftSideVisible,pc:t.isWeb,mobile:!t.isWeb}},[e("div",{staticClass:"device-ui"},[t.isWeb?t._e():e("div",{staticClass:"device-border"},[t.pcDeviceSet.hasBangs?e("div",{staticClass:"device-bangs",class:{horizontal:t.isHorizontal}}):t.pcDeviceSet.iosDynamicIsland?e("div",{staticClass:"device-ios-dynamic-island",class:{horizontal:t.isHorizontal}}):t._e(),e("div",{staticClass:"device-top-left"}),e("div",{staticClass:"device-top-center"}),e("div",{staticClass:"device-top-right"}),e("div",{staticClass:"device-middle-left"}),e("div",{staticClass:"device-middle-right"}),e("div",{staticClass:"device-bottom-left"}),e("div",{staticClass:"device-bottom-center"}),e("div",{staticClass:"device-bottom-right"})]),e("device-box")],1)])},fA=[],mA=function(){var t=this,e=t._self._c;return e("div",{staticClass:"device-box",style:t.boxStyle,on:{click:t.clickDeviceBox}},t._l(t.renderList,(function(t){return e("InteractionArtboardItem",{key:t.key,attrs:{artboard:t.artboard,overlayArtboards:t.overlayArtboards,renderTapInteraction:t.renderTapInteraction,overlayVisible:t.overlayVisible}})})),1)},vA=[],pA=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"interaction-artboard-item",class:t.itemCls,style:t.itemStyle,attrs:{"data-unset-control":t.rootSize?"1":""},on:{dragstart:function(t){t.preventDefault()},"!touchstart":function(e){return t.onTouchStart.apply(null,arguments)},"!mousedown":function(e){return t.onMouseDown.apply(null,arguments)},click:function(e){return e.target!==e.currentTarget?null:t.clickArtboardItemSelf.apply(null,arguments)}}},[t.itemOverlayStyle?e("div",{staticClass:"artboard-overlay-background",style:t.itemOverlayStyle}):t._e(),e("div",{ref:"artboardScrollBox",staticClass:"artboard-content-scroll",class:Object(f["a"])({"non-width-scroll":!(t.isWeb&&t.isTopArtboard),top:t.isTopArtboard},t.verticalAlignCss,1),style:t.artboardContentScrollStyle,attrs:{"data-unset-control":t.rootSize?"1":""},on:{scroll:t.onScroll,click:function(e){return e.target!==e.currentTarget?null:t.clickArtboardItemSelf.apply(null,arguments)}}},[e("div",{staticClass:"artboard-content",class:{pc:t.isWeb,"interaction-node-show":t.isMouseDown&&!t.isMouseDownInInteractionNode||t.interactionRectAlwaysVisible},style:t.contentStyle,on:{dragstart:function(t){t.preventDefault()}}},[e("img",{staticClass:"preview",style:t.imgStyle,attrs:{src:t.imgSrc},on:{load:t.onImgLoad,error:t.onImgError}}),e("InteractionNodePoints",{attrs:{artboard:t.artboard,overlayScale:t.overlayScale}}),t.imgLoading?e("div",{staticClass:"img-loading",style:{backgroundColor:t.backgroundColor}},[e("div",{staticClass:"loading"},[t._v("正在加载画板预览图...")])]):t._e()],1)]),t.renderOverlayArtboardDatas.length>0?t._l(t.renderOverlayArtboardDatas,(function(n,i){return e("interaction-artboard-item",{key:n.key,attrs:{artboard:n.overlayArtboard.artboard.artboard,renderTapInteraction:n.overlayArtboard.renderTapInteraction,overlayArtboards:null,rootSize:t.artboard.boundsInParentForList,overlayOffset:n.overlayArtboardOffset,overlayVisible:n.overlayArtboard.visible,lastOverlay:t.renderOverlayArtboardDatas.length-1===i}})})):t._e()],2)},bA=[],gA=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"interaction-node-points"},t._l(t.renderInteractions,(function(n,i){return e("InteractionNodePointItem",{key:i,attrs:{item:n,index:i,itemScale:t.itemScale}})})),1):t._e()},wA=[],yA=function(){var t=this,e=t._self._c;return e("div",{staticClass:"interaction-node-pointitem",class:{on:t.hoverGuid===t.item.guid,pc:!t.inMobile},style:t.style,attrs:{"data-unset-control":"1","data-interaction-node":"1"},on:{mouseenter:function(e){return t.mouseEnterItem(!0)},mouseleave:function(e){return t.mouseEnterItem(!1)},click:t.clickGoArtboard}})},kA=[],CA={methods:{mouseEnterItem:function(t){var e;l["f"]||(this.interactionSet.hoverGuid=t?null===(e=this.item)||void 0===e?void 0:e.guid:null)},clickGoArtboard:function(){this.$store.commit("setInteractionArtboard",this.item.renderTapInteraction)}},computed:{interactionRectAlwaysVisible:function(){return this.$store.state.artboardDetail.interactionSet.rectAlwaysVisible},style:function(){var t=this.rect;return"top:".concat(t.top,"px;left:").concat(t.left,"px;width:").concat(t.width,"px;height:").concat(t.height,"px;")},hoverGuid:function(){return this.interactionSet.hoverGuid},artboardDetail:function(){return this.$store.state.artboardDetail},interactionSet:function(){return this.artboardDetail.interactionSet},boundsInArtboard:function(){var t,e;return null!==(t=null===(e=this.item)||void 0===e?void 0:e.boundsInArtboard)&&void 0!==t?t:new w},rect:function(){var t=this.boundsInArtboard,e=this.itemScale,n=t.width,i=t.height,r=t.x,o=t.y;return n*=e,i*=e,r*=e,o*=e,{width:n,height:i,left:r,top:o}}},props:{item:Object,index:Number,itemScale:Number}},xA=CA,SA=(n("0227"),Object(Gr["a"])(xA,yA,kA,!1,null,"33a6a087",null)),TA=SA.exports,OA={components:{InteractionNodePointItem:TA},methods:{},computed:{visible:function(){var t=this.currentInteractionData;if(t.fetchState!=c["a"].Success)return!1;var e=this.renderInteractions;return 0!=e.length},isWeb:function(){return!l["f"]&&this.pcDeviceSet.type===Gi.Web},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet},mobileSize:function(){return this.$store.state.mobileInteraction.mobileSize},renderSize:function(){var t,e,n=this.mobileSize,i=this.pcDeviceSet;return this.inMobile?(t=n.width,e=n.height):(t=i.width,e=i.height),{width:t,height:e}},itemScale:function(){if(this.isWeb)return 1;var t=this.renderSize.width/this.rect.width;return isNaN(t)&&(t=1),t*this.overlayScale},currentInteractionData:function(){return this.artboard.interactionInfo},renderInteractions:function(){var t,e,n=this.currentInteractionData;return n.fetchState===c["a"].Success&&null!==(t=null===(e=n.data)||void 0===e?void 0:e.renderInteractions)&&void 0!==t?t:[]},rect:function(){var t,e=this.artboard,n=null!==(t=null===e||void 0===e?void 0:e.boundsInParentForList)&&void 0!==t?t:new w;return(new w).set(0,0,n.width,n.height)}},props:{artboard:Object,overlayScale:Number},created:function(){}},IA=OA,AA=(n("44a7"),Object(Gr["a"])(IA,gA,wA,!1,null,"6a3b9a21",null)),FA=AA.exports,jA={},_A={name:"interaction-artboard-item",components:{InteractionNodePoints:FA},methods:{checkIsMouseDownInInteractionNode:function(t){var e=t.target;if(!e)return!1;if("1"===e.getAttribute("data-interaction-node"))return!0;var n=e;while(n){if(n.classList.contains("interaction-artboard-item"))break;n=n.parentNode}return!!n&&n!==this.$refs.container},onTouchStart:function(t){this.isMouseDown=!0,this.isMouseDownInInteractionNode=this.checkIsMouseDownInInteractionNode(t),window.addEventListener("touchend",this.onTouchEnd,!0)},onTouchEnd:function(){window.removeEventListener("touchend",this.onTouchEnd,!0),this.isMouseDown=!1},onMouseDown:function(t){l["f"]||(this.isMouseDown=!0,this.isMouseDownInInteractionNode=this.checkIsMouseDownInInteractionNode(t),window.addEventListener("mouseup",this.onMouseUp,!0))},onMouseUp:function(){window.removeEventListener("mouseup",this.onMouseUp,!0),l["f"]||(this.isMouseDown=!1)},clickArtboardItemSelf:function(){var t,e=this.rootSize,n=this.renderTapInteraction;if(e){var i=null!==(t=null===n||void 0===n?void 0:n.overlayBackgroundInteraction)&&void 0!==t?t:void 0;"NONE"!==i&&this.$store.commit("setInteractionArtboard",{type:xe.goBack})}},onImgLoad:function(){this.imgState=c["a"].Success,jA[this.imgSrc]=1},onImgError:function(){this.imgState=c["a"].Error},onScroll:function(t){if(this.isTopArtboard){var e=this.scrollYCache;e[this.artboard.cid]=t.target.scrollTop}},resetScroll:function(){var t;if(this.isTopArtboard){var e=this.$refs.artboardScrollBox;if(e){var n=null!==(t=this.scrollYCache[this.artboard.cid])&&void 0!==t?t:0;e.scrollTop=n}}}},watch:{imgSrc:function(t){t&&(jA[t]||(this.imgState=c["a"].Fetching))},curArtboard:function(){this.resetScroll()}},computed:{verticalAlignCss:function(){switch(this.verticalAlign){case a["H"].Bottom:return"align-bottom";case a["H"].Top:return"align-top";default:return"align-middle"}},verticalAlign:function(){return this.$store.state.artboardDetail.interactionSet.verticalAlign},interactionRectAlwaysVisible:function(){return this.interactionSet.rectAlwaysVisible},overlayArtboardOffset:function(){var t=new wt,e=this.overlayArtboards;if(!e)return t;var n=e.length;if(n<=1)return t;for(var i=0;i<n-1;i++){var r=e[i].renderTapInteraction;if(r){var o=r.overlayTopLeft;o&&(t.x+=o.x,t.y+=o.y)}}return t},previousOverlayArtboardOffset:function(){var t=new wt,e=this.overlayArtboards;if(!e)return t;var n=e.length;if(n<1)return t;for(var i=0;i<n-2;i++){var r=e[i].renderTapInteraction;if(r){var o=r.overlayTopLeft;o&&(t.x+=o.x,t.y+=o.y)}}return t},renderOverlayArtboardDatas:function(){var t=[],e=this.overlayArtboard,n=this.previousOverlayArtboard,i=this.previousOverlayArtboardOffset,r=this.overlayArtboardOffset,o=this.artboard.guid;return n&&t.push({overlayArtboard:n,overlayArtboardOffset:i,key:"".concat(o,"-").concat(n.artboard.artboard.guid)}),e&&t.push({overlayArtboard:e,overlayArtboardOffset:r,key:"".concat(o,"-").concat(e.artboard.artboard.guid)}),t},previousOverlayArtboard:function(){var t=this.overlayArtboards;if(!t)return null;var e=t.length;return e<1?null:t[e-2]},overlayArtboard:function(){var t=this.overlayArtboards;if(!t)return null;var e=t.length;return 0===e?null:t[e-1]},isTopArtboard:function(){var t=this.rootSize;return!t},itemOverlayStyle:function(){var t,e=null===(t=this.renderTapInteraction)||void 0===t?void 0:t.overlayBackground;if(!e)return null;var n=this.animationStyle;return{"background-color":e,"animation-duration":n?n["animation-duration"]:void 0}},artboardContentScrollStyle:function(){var t=this.isTopArtboard,e=this.animationStyle;return t?null:e},animationStyle:function(){var t=this.renderTapInteraction;if(!t)return null;var e=t.transition;if(!e)return null;var n={},i=e.customEasing?e.easing:Ce[e.easing];return i||(i=Ce.linear),n["animation-timing-function"]=i,n["animation-duration"]=(e.duration||.3).toFixed(3)+"s",n},itemStyle:function(){var t=this.imgStyle,e=this.isWeb,n=this.backgroundColor,i=this.isTopArtboard,r=this.animationStyle,o={};return i&&(o["background-color"]=e?n:"#000"),e&&i&&(o=Object.assign(o,t,{position:"relative",top:"auto",left:"auto","max-height":"100%","max-width":"100%"})),r?(Object.assign(o,r),this.overlayVisible||(o["pointer-events"]="none"),o):o},itemCls:function(){var t=this.renderTapInteraction,e=this.isTopArtboard,n=[];if(this.inMobile&&n.push("in-mobile"),this.imgLoading&&n.push("inloading"),!t)return n;var i=t.transition;if(!i)return n;!e&&null!==t&&void 0!==t&&t.overlayBackground?n.push("in-overlay"):n.push("in-top");var r=this.overlayVisible?"":"-reverse";switch(i.type){case"dissolve":case"autoAnimate":n.push("animation-opacity".concat(r));break;case"push":case"slide":case"move":var o=ke[i.fromSide];o||(o=ke.L),n.push("animation-slide-".concat(o).concat(r));break;case"push-background":case"slide-background":case"move-background":case"move_out":case"move_out-background":case"slide_out":case"slide_out-background":var a=ke[i.fromSide];a||(a=ke.L),n.push("animation-".concat(i.type,"-").concat(a).concat(r)),n.push(i.type);break}return n},isWeb:function(){return!this.inMobile&&this.pcDeviceSet.type===Gi.Web},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},backgroundColor:function(){return this.interactionSet.backgroundColor},mobileSize:function(){return this.$store.state.mobileInteraction.mobileSize},renderSize:function(){var t,e,n=this.mobileSize,i=this.pcDeviceSet;return this.inMobile?(t=n.width,e=n.height):(t=i.width,e=i.height),{width:t,height:e}},pcDeviceSet:function(){return this.interactionSet.pcDeviceSet},overlayScale:function(){if(this.isWeb)return 1;var t=this.rootSize;return t?this.artboard.boundsInParentForList.width/t.width:1},rootScale:function(){if(this.isWeb)return 1;var t=this.rootSize,e=this.artboard,n=this.renderSize,i=t?t.width:e.boundsInParentForList.width;return n.width/i},contentStyle:function(){var t=this.isTopArtboard;if(t)return a;var e=this.animationStyle,n=this.renderTapInteraction,i=this.isWeb,r=this.rootScale,o=this.overlayOffset,a=this.imgStyle;n||(n={});var c=n,l=c.overlayPositionType,u=c.overlayTopLeft,d=0,h=0;if(null!=l){var f={top:0,left:0,bottom:"auto",right:"auto"},m=a.width,v=a.height;switch(l){case Oe.CENTER:case Oe.MANUAL:f.top="calc(50% - ".concat(v," / 2)");break;case Oe.TOP_LEFT:case Oe.TOP_CENTER:case Oe.TOP_RIGHT:f.top="0px";break;case Oe.BOTTOM_LEFT:case Oe.BOTTOM_CENTER:case Oe.BOTTOM_RIGHT:f.top="auto",f.bottom="0px";break}switch(l){case Oe.CENTER:case Oe.TOP_CENTER:case Oe.BOTTOM_CENTER:case Oe.MANUAL:f.left="calc(50% - ".concat(m," / 2)");break;case Oe.TOP_LEFT:case Oe.BOTTOM_LEFT:f.left="0px";break;case Oe.TOP_RIGHT:case Oe.BOTTOM_RIGHT:f.left="auto",f.right="0px";break}return Object(s["a"])(Object(s["a"])(Object(s["a"])({},f),a),e)}return u&&(d=u.x,h=u.y),o&&(d+=o.x,h+=o.y),i||(d*=r,h*=r),Object(s["a"])(Object(s["a"])({top:h+"px",left:d+"px"},a),e)},imgStyle:function(){var t=this.artboard.boundsInParentForList;if(this.isWeb)return{width:t.width+"px",height:t.height+"px"};var e=this.renderSize.width;return e=Math.round(this.overlayScale*e),{width:e+"px",height:Math.round(e/t.width*t.height)+"px"}},imgLoading:function(){return this.imgState===c["a"].Fetching},imgSrc:function(){var t,e=this.artboard,n=this.isSupportWebp;return n&&(t=e.artboardPreviewWebp),t||(t=e.artboardPreviewPng),c["O"].combineResourcePath(t)},isSupportWebp:function(){return this.$store.state.isSupportWebp===Ni.Support},scrollYCache:function(){return this.$store.state.mobileInteraction.scrollYCache}},data:function(){return{imgState:c["a"].Normal,isMouseDown:!1,isMouseDownInInteractionNode:!1}},props:{artboard:Object,overlayArtboards:{type:Array,default:null},lastOverlay:{type:Boolean,default:!1},rootSize:{type:Object,default:null},renderTapInteraction:{type:Object,default:null},overlayOffset:{type:Object,default:null},overlayVisible:{type:Boolean,default:!0}},mounted:function(){this.resetScroll()},beforeDestroy:function(){window.removeEventListener("touchend",this.onTouchEnd,!0),window.removeEventListener("mouseup",this.onMouseUp,!0)}},MA=_A,LA=(n("1c42"),Object(Gr["a"])(MA,pA,bA,!1,null,"63f7ee89",null)),PA=LA.exports,DA={components:{InteractionArtboardItem:PA},methods:{clickDeviceBox:function(){this.currentArtboardHasRenderInteraction||this.showTextTip("当前画板没有或未提交交互原型热区",1)}},computed:{renderList:function(){var t=[],e=this.itemCurrent,n=this.gobackArtboard,i=this.gotoArtboard,r={};if(e&&(t.push(e),r[e.key]=1),n){var o,a=n.fromArtboard.artboard,s=null!==(o=a.cid)&&void 0!==o?o:a.guid;r[s]&&(s+="_1"),r[s]=1,t.push({key:s,artboard:a,renderTapInteraction:n.renderTapInteraction,overlayArtboards:null,overlayVisible:!1})}if(i){var c,l=i.fromArtboard.artboard,u=null!==(c=l.cid)&&void 0!==c?c:l.guid;r[u]&&(u+="_2"),r[u]=1,t.push({key:u,artboard:l,renderTapInteraction:i.renderTapInteraction,overlayArtboards:null,overlayVisible:!0})}return t},currentOverlayVisible:function(){return!this.gobackArtboard},currentArtboardHasRenderInteraction:function(){return null!=this.currentArtboardRenderInteractions},currentArtboardRenderInteractions:function(){var t,e,n=null===(t=this.curArtboard)||void 0===t||null===(t=t.artboard)||void 0===t?void 0:t.interactionInfo;if(!n)return null;if(n.fetchState!==c["a"].Success)return null;var i=null===(e=n.data)||void 0===e?void 0:e.renderInteractions;return Object(l["i"])(i)&&i.length>0?i:null},currentRenderTapInteraction:function(){var t,e=this.gobackArtboard,n=this.gotoArtboard,i=null===(t=null!==e&&void 0!==e?e:n)||void 0===t?void 0:t.renderTapInteraction;if(i){var r=i,o=r.transition,a=r.trigger_type,c=r.type,u=r.preserveScrollPosition,d=r.toArtboard;if(!Object(l["k"])(o))return null;switch(o=Object(s["a"])({},o),o.type){case"dissolve":case"autoAnimate":return null;case"push":case"slide":case"slide_out":case"move":case"move_out":o.type="".concat(o.type,"-background");break}i={transition:o,trigger_type:a,type:c,preserveScrollPosition:u,toArtboard:d}}return i},itemCurrent:function(){var t,e,n=null===(t=this.curArtboard)||void 0===t?void 0:t.artboard;return n?{artboard:n,renderTapInteraction:this.currentRenderTapInteraction,overlayArtboards:this.interactionSet.overlayArtboards,overlayVisible:this.currentOverlayVisible,key:null!==(e=n.cid)&&void 0!==e?e:n.guid}:null},gobackArtboard:function(){return this.interactionSet.gobackArtboard},gotoArtboard:function(){return this.interactionSet.gotoArtboard},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},boxStyle:function(){return this.isWeb?{width:"100%",height:"100%"}:{width:this.pcDeviceSet.width+"px",height:this.pcDeviceSet.height+"px"}},isWeb:function(){return this.pcDeviceSet.type===Gi.Web},pcDeviceSet:function(){return this.interactionSet.pcDeviceSet},headerVisible:function(){return this.interactionSet.headerVisible},leftSideVisible:function(){return this.$store.state.artboardDetail.leftSideVisible&&this.headerVisible}}},NA=DA,EA=(n("ffca"),Object(Gr["a"])(NA,mA,vA,!1,null,"5970a26f",null)),RA=EA.exports,VA={components:{DeviceBox:RA},computed:{isWeb:function(){return this.pcDeviceSet.type===Gi.Web},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet},isHorizontal:function(){return this.pcDeviceSet.isHorizontal},headerVisible:function(){return this.$store.state.artboardDetail.interactionSet.headerVisible},leftSideVisible:function(){return this.$store.state.artboardDetail.leftSideVisible&&this.headerVisible}}},BA=VA,HA=(n("2afb"),Object(Gr["a"])(BA,hA,fA,!1,null,"54a50b64",null)),UA=HA.exports,GA={components:{CloudNeedLoginTip:Vd,Header:dA,EmptyData:_k,Authority:Tk,Tip:Jd,LeftSide:HI,DeviceContainer:UA,AutomaticSync:io},methods:{clickHeaderVisible:function(){this.$store.commit("setInteractionHeaderVisible",!this.headerVisible)}},computed:{emptyText:function(){return this.inCloudMode?this.inNetDiskFileMode?"文件不存在,可能已经被移动或删除":"当前文件夹不存在画板":"未检测到数据,请尝试重新导出画板"},backgroundColor:function(){return this.interactionSet.backgroundColor},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},headerVisibleTitle:function(){return this.headerVisible?"隐藏顶部(F2)":"显示顶部(F2)"},headerVisible:function(){return this.interactionSet.headerVisible},artboardLoadProgressText:function(){return Math.floor(1e4*this.artboardLoadProgress.current/this.artboardLoadProgress.count)/100+"%"},artboardLoadProgress:function(){return this.$store.state.artboardLoadProgress},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},isEmptyArtboardData:function(){return 0===this.documentArtboards.length}},created:function(){0}},WA=GA,$A=(n("fa2f"),Object(Gr["a"])(WA,TI,OI,!1,null,"6ffc441e",null)),zA=$A.exports,YA=function(){var t=this,e=t._self._c;return e("section",{attrs:{id:"main"}},[!t.cloudNeedLogin||t.cloudIsLogin?e("div",{staticClass:"loading",class:{on:!t.allArtboardLoadChecked}},[t._v("正在加载画板数据中("+t._s(t.artboardLoadProgressText)+"),请稍后...")]):t._e(),t.cloudNeedLogin&&!t.cloudIsLogin?e("CloudNeedLoginTip"):t.allArtboardLoadChecked?[t.cloudFolderNotFound||!t.permission?[e("Header"),e("Nav"),e("main",[t.cloudFolderNotFound?e("EmptyData",{attrs:{text:t.cloudFolderErrorText,showLoginBtn:t.cloudFolderInSpecify}}):t.permission?t._e():e("Authority",{attrs:{include:!0}})],1)]:[t.inList?e("ArtboardList"):e("ArtboardInfo")]]:t._e(),e("TipInMobile"),e("AutomaticSync")],2)},XA=[],KA=function(){var t=this,e=t._self._c;return e("header",[t.cloudNeedLogin||t.cloudIsLogin?e("user-info"):t._e(),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobileInteraction.searchText,expression:"mobileInteraction.searchText"}],ref:"searchInput",attrs:{type:"text",placeholder:t.showAll?"搜索文件夹和画板":"搜索画板",autocomplete:"off"},domProps:{value:t.mobileInteraction.searchText},on:{input:function(e){e.target.composing||t.$set(t.mobileInteraction,"searchText",e.target.value)}}}),t.hasSearchText?e("span",{staticClass:"search-clear",on:{click:t.clickSearchClear}}):t._e()]),e("div",{staticClass:"btn-control-refresh",on:{click:t.clickRefresh}})],1)},qA=[],JA=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userinfo"},[e("div",{staticClass:"nickname",class:{on:t.menuVisible},on:{click:t.clickShowMenu}},[e("UserFace",{attrs:{canClick:!1}})],1),t.menuVisible?e("div",{staticClass:"m-popbox",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.menuVisible=!1}}},[e("div",{staticClass:"box"},[e("div",{staticClass:"u-info"},[e("UserFace",{attrs:{canClick:!1}}),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(t.showName))]),e("div",{staticClass:"email"},[t._v(t._s(t.showEmail))])])],1),t.cloudIsLogin?e("a",{staticClass:"button btn-logout",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickLogout()}}},[t._v("退出登录")]):t._e()])]):t._e()])},QA=[],ZA=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userface",class:{on:t.canClick},attrs:{title:t.title},on:{click:function(e){return e.stopPropagation(),t.clickUserFace.apply(null,arguments)}}},[t.showIcon?e("div",{staticClass:"icon"}):e("div",{staticClass:"user",class:{tourist:!t.cloudUserIsDesigner}},[t._v(t._s(t.iconText))])])},tF=[],eF={methods:{clickUserFace:function(){this.$emit("click")}},computed:{showIcon:function(){return!this.cloudIsLogin},iconText:function(){if(!this.cloudIsLogin)return"";var t=this.cloudNickName;return Object(l["j"])(t)||(t=this.cloudUserEmail),t[t.length-1]}},props:{title:String,canClick:Boolean}},nF=eF,iF=(n("e2d4"),Object(Gr["a"])(nF,ZA,tF,!1,null,"079399e5",null)),rF=iF.exports,oF={components:{UserFace:rF},methods:{clickLogout:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(!t.logoutting){e.n=1;break}return e.a(2);case 1:return t.logoutting=!0,e.p=2,e.n=3,t.goCloudLogout();case 3:return e.p=3,t.logoutting=!1,e.f(3);case 4:return e.a(2)}}),e,null,[[2,,3,4]])})))()},clickShowMenu:function(){this.cloudIsLogin?this.menuVisible=!0:this.goCloudLogin()}},computed:{showName:function(){return this.cloudIsLogin?this.cloudNickName:"未登录"},showEmail:function(){return this.cloudIsLogin?this.cloudUserEmail:""}},data:function(){return{menuVisible:!1,logoutting:!1}}},aF=oF,sF=(n("bb5a"),Object(Gr["a"])(aF,JA,QA,!1,null,"35031a94",null)),cF=sF.exports,lF={components:{UserInfo:cF},methods:{clickRefresh:function(){this.goCloudFolderInteractionUrl(this.cloudCurrentFolderId,this.curArtboardGuid)},clickSearchClear:function(){var t;this.mobileInteraction.searchText="",null===(t=this.$refs.searchInput)||void 0===t||t.focus()}},computed:{mobileInteraction:function(){return this.$store.state.mobileInteraction},hasSearchText:function(){return!!this.searchText},searchText:function(){return this.mobileInteraction.searchText}},props:{showAll:Boolean}},uF=lF,dF=(n("7eea"),Object(Gr["a"])(uF,KA,qA,!1,null,"9ac34f88",null)),hF=dF.exports,fF=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav"},[e("path-nav"),e("nav-filter")],1)},mF=[],vF=function(){var t=this,e=t._self._c;return e("div",{staticClass:"path-nav"},[e("div",{staticClass:"navs"},t._l(t.navs,(function(n,i){return e("div",{key:i,staticClass:"nav-item",class:{"no-link":!n.link}},[e("div",{staticClass:"name",attrs:{title:n.name},on:{click:function(e){return t.clickNav(n)}}},[t._v(t._s(n.name))]),t.showArtboardPages&&n.selectPages?e("PathNavArtboardPages"):t._e()],1)})),0)])},pF=[],bF=function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-artboard-page"},[e("div",{staticClass:"page-current",attrs:{title:"点击切换显示的页面"},on:{click:function(e){t.visible=!t.visible}}},[e("div",{staticClass:"text"},[t._v(t._s(t.currentPageName))])]),e("ul",{staticClass:"page-list",class:{on:t.visible}},[e("li",{class:{on:!t.filterDocumentGuid,"nav-all":!0},attrs:{title:t.allPageName},on:{click:function(e){return t.clickItem(null)}}},[e("span",{staticClass:"text"},[t._v(t._s(t.allPageName)),e("span",{staticClass:"art-count"},[t._v("("+t._s(t.documentArtboards.length)+")")])])]),t._l(t.sortDocumentsWithSketchDocument,(function(n){return e("li",{key:n.guid,class:t.itemCls(n),attrs:{title:n.docFullName},on:{click:function(e){return t.clickItem(n)}}},[e("span",{staticClass:"text"},[t._v(t._s(n.name)),e("span",{staticClass:"art-count"},[t._v("("+t._s(n.arts.length)+")")])])])}))],2),t.visible?e("div",{staticClass:"bg on"}):t._e()])},gF=[],wF={methods:{itemCls:function(t){var e=a["K"].getClassName(t.type);return Object(f["a"])(Object(f["a"])(Object(f["a"])({},e,!!e),"on",this.filterDocumentGuid===t.guid),"f-xd",t.fileType===a["r"].XD)},clickItem:function(t){var e,n=null!==(e=null===t||void 0===t?void 0:t.guid)&&void 0!==e?e:null;this.$store.commit("setFilterDocumentGuid",n)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.visible=!1}),100))}},computed:{sortDocumentsWithSketchDocument:function(){return this.$store.state.sortDocumentsWithSketchDocument},currentPageName:function(){var t,e,n,i=this.filterDocumentGuid;return i&&(n=this.sortDocumentsWithSketchDocument.find((function(t){return t.guid===i}))),null!==(t=null===(e=n)||void 0===e?void 0:e.name)&&void 0!==t?t:this.allPageName}},watch:{visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0)):window.removeEventListener("mouseup",this.hideContextmenu,!0)}},data:function(){return{allPageName:"全部页面",visible:!1,handle:0}},beforeDestroy:function(){clearTimeout(this.handle),window.removeEventListener("mouseup",this.hideContextmenu,!0)}},yF=wF,kF=(n("a9f1"),Object(Gr["a"])(yF,bF,gF,!1,null,"8780cb8e",null)),CF=kF.exports,xF={components:{PathNavArtboardPages:CF},methods:{clickNav:function(t){t.link&&setTimeout((function(){t.link()}),100)}},computed:{showArtboardPages:function(){return this.inCloudMode&&!this.inNetDiskFileMode&&this.documents.length>0},navs:function(){var t=this,e=[],n=this.inCloudMode,i=this.inArtboardMode,r=this.curArtboard,o=this.cloudCurrentFolderId,a=this.curFileInfo,s=this.inNetDiskFileMode;if(n){var c=this.cloudName,l=this.cloudParentFolder,u=this;i||(0===o?e.push({name:c||"私有云根目录",link:null}):l&&e.push({name:0===l.id&&c||l.name,id:l.id,link:function(){u.goCloudFolderInteractionUrl(this.id)}}))}if(n&&this.cloudFolderNotFound?e.push({name:this.cloudFolderInSpecify?"没有访问权限":"链接已失效",link:null}):n&&0==o||e.push({name:this.documentName,selectPages:!0,link:i?function(){t.setCurArtboard(null)}:s?function(){t.goCloudFolderInteractionUrl(o)}:null}),i){var d,h,f=null!==(d=null===r||void 0===r||null===(h=r.artboard)||void 0===h?void 0:h.name)&&void 0!==d?d:"";f&&e.push({name:f,link:null})}else if(s){var m,v=null!==(m=null===a||void 0===a?void 0:a.name)&&void 0!==m?m:"";v&&e.push({name:v,link:null})}return e}}},SF=xF,TF=(n("a685"),Object(Gr["a"])(SF,vF,pF,!1,null,"1865fbdf",null)),OF=TF.exports,IF=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav-filter"},[e("div",{staticClass:"nav-sort"},[e("div",{staticClass:"title",class:{desc:t.listConfig.orderDesc},on:{click:function(e){t.menuVisible=!0}}},[t._v(t._s(t.renderTitle))]),t.menuVisible?e("div",{staticClass:"m-popbox",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.menuVisible=!1}}},[e("div",{staticClass:"box"},[e("div",{staticClass:"sort-order"},[e("div",{staticClass:"item asc",class:{on:!t.listConfig.orderDesc},on:{click:function(e){return t.setMobileInteractionListConfig({orderDesc:!1},!0)}}},[t._v("升序")]),e("div",{staticClass:"item desc",class:{on:t.listConfig.orderDesc},on:{click:function(e){return t.setMobileInteractionListConfig({orderDesc:!0},!0)}}},[t._v("降序")])]),e("div",{staticClass:"sort-types"},[e("div",{staticClass:"item",class:{on:t.listConfig.sortType===t.EnumCloudListSortType.Name},on:{click:function(e){return t.setMobileInteractionListConfig({sortType:t.EnumCloudListSortType.Name},!0)}}},[t._v("按名称排序")]),e("div",{staticClass:"item",class:{on:t.listConfig.sortType===t.EnumCloudListSortType.Date},on:{click:function(e){return t.setMobileInteractionListConfig({sortType:t.EnumCloudListSortType.Date},!0)}}},[t._v("按时间排序")]),e("div",{staticClass:"item",class:{on:t.listConfig.sortType===t.EnumCloudListSortType.ArtboardRect},attrs:{title:"画板列表按画板在文档中的坐标从上到下,从左到右排序;文件夹按名称排序"},on:{click:function(e){return t.setMobileInteractionListConfig({sortType:t.EnumCloudListSortType.ArtboardRect},!0)}}},[t._v("按坐标排序")])])])]):t._e()]),e("div",{staticClass:"nav-render"},[e("div",{staticClass:"item",class:{on:t.listConfig.renderType===t.EnumCloudMobileInteractionListRenderType.All},on:{click:function(e){return t.setMobileInteractionListConfig({renderType:t.EnumCloudMobileInteractionListRenderType.All})}}},[t._v("全部")]),e("div",{staticClass:"item",class:{on:t.listConfig.renderType===t.EnumCloudMobileInteractionListRenderType.Artboard},on:{click:function(e){return t.setMobileInteractionListConfig({renderType:t.EnumCloudMobileInteractionListRenderType.Artboard})}}},[t._v("画板")])])])},AF=[],FF={methods:{setMobileInteractionListConfig:function(t,e){this.$store.commit("setMobileInteractionListConfig",t),e&&(this.menuVisible=!1)}},computed:{EnumCloudMobileInteractionListRenderType:function(){return a["o"]},EnumCloudListSortType:function(){return a["n"]},renderTitle:function(){var t=this.listConfig,e=t.sortType,n=t.orderDesc;return"按".concat(e===a["n"].Name?"名称":e===a["n"].Date?"时间":"坐标").concat(n?"降序":"升序")},listConfig:function(){return this.$store.state.mobileInteraction.listConfig}},data:function(){return{menuVisible:!1}}},jF=FF,_F=(n("e934"),Object(Gr["a"])(jF,IF,AF,!1,null,"d85c16d8",null)),MF=_F.exports,LF={components:{PathNav:OF,NavFilter:MF}},PF=LF,DF=(n("31a4"),Object(Gr["a"])(PF,fF,mF,!1,null,"72e5b43a",null)),NF=DF.exports,EF=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-list",class:{"safari-standalone":t.inSafariStandalone}},[e("Header",{attrs:{showAll:t.showAll}}),e("Nav"),t.isEmptyList?e("main",[e("EmptyData",{attrs:{text:t.emptyText}})],1):t.showAll?e("main",{ref:"mainAll",on:{scroll:t.onMainAllViewScroll,mousewheel:t.onMainAllViewMouseWheel}},[e("div",{staticClass:"box",class:{off:t.mainAllView.mousewheelTimes>0},style:{height:t.mainAllView.boxRealHeight+"px"}},[e("div",{staticClass:"brace",style:t.allListBraceStyle},t._l(t.showLazyAllList,(function(t){return e("ArtboardListItem",{key:t.key,attrs:{item:t.item}})})),1)])]):e("main",{ref:"mainArtboard",on:{scroll:t.onMainArtboardViewScroll,mousewheel:t.onMainArtboardViewMouseWheel}},[e("div",{staticClass:"box",class:{off:t.mainArtboardView.mousewheelTimes>0},style:{height:t.mainArtboardView.boxRealHeight+"px"}},t._l(t.showLazyArtboardList,(function(t){return e("ArtboardListArtboardItem",{key:t.key,attrs:{item:t}})})),1)]),t.listFetchState===t.FetchState.Fetching?e("div",{staticClass:"list-loading"},[e("div",{staticClass:"box"},[t.listFetchState===t.FetchState.Fetching?e("NetworkLoading",{attrs:{loadText:"正在获取文件夹数据...",errorText:"",isLoading:t.listFetchState===t.FetchState.Fetching,isError:!1,reLoadText:""}}):t._e()],1)]):t._e()],1)},RF=[],VF=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-item",style:t.style},[e("div",{staticClass:"title"},[t._v(t._s(t.item.artboard.name))]),e("div",{staticClass:"img",on:{click:function(e){return t.setCurArtboard(t.item.item)}}},[e("img",{attrs:{src:t.artboardReviewImg,alt:""},on:{error:t.errPreviewImage}}),t.artboard.flowStart?e("div",{staticClass:"flow-start"}):t._e()])])},BF=[],HF={methods:{errPreviewImage:function(){this.userMiniPreviewImg&&(this.userMiniPreviewImg=!1)}},computed:{isSupportWebp:function(){return this.$store.state.isSupportWebp===Ni.Support},artboardReviewImg:function(){var t=this.artboard,e=this.userMiniPreviewImg?this.isSupportWebp&&t.artboardPreviewWebp?t.artboardPreviewWebp:t.artboardPreviewThumbPng:t.artboardPreviewPng;return c["O"].combineResourcePath(e)},artboard:function(){return this.item.artboard},style:function(){var t=this.item.rect;return"top:".concat(t.top,"px;left:").concat(t.left,"px;width:").concat(t.width,"px;height:").concat(t.height,"px;")}},props:{item:Object},data:function(){return{userMiniPreviewImg:!0}}},UF=HF,GF=(n("2a87"),Object(Gr["a"])(UF,VF,BF,!1,null,"4913953e",null)),WF=GF.exports,$F=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item",on:{click:t.clickItem}},[e("div",{staticClass:"img",class:t.itemClass},[t.isArtboard?e("img",{attrs:{src:t.artboardReviewImg,alt:""},on:{error:t.errPreviewImage}}):t._e()]),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(t.name))]),e("div",{staticClass:"summary"},[t._v(t._s(t.summary))])])])},zF=[],YF={methods:{errPreviewImage:function(){this.userMiniPreviewImg&&(this.userMiniPreviewImg=!1)},clickItem:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(n=t.item,r=t.isFolder,o=t.isArtboard,!r){e.n=2;break}return e.n=1,t.goCloudFolderInteractionUrl(n.id);case 1:return e.a(2);case 2:o&&t.setCurArtboard(n);case 3:return e.a(2)}}),e)})))()}},computed:{itemClass:function(){var t=this.item,e=this.isFolder,n=this.isArtboard,i={folder:e,lock:e&&t.shareMode===a["v"].PrivateCode,"share-sm":e&&t.shareMode===a["v"].SpecifyMembers,artboard:n};if(null!=t.color){var r=a["t"].getName(t.color);r&&(i[r]=1)}return i},artboardReviewImg:function(){var t=this.item,e=this.isArtboard;if(!e)return null;var n=t.artboard,i=this.userMiniPreviewImg?n.artboardPreviewThumbPng:n.artboardPreviewPng;return c["O"].combineResourcePath(i)},name:function(){var t=this.item,e=this.isFolder,n=this.isArtboard;return e?t.name:n?t.artboard.name:null},summary:function(){var t=this.item,e=this.isFolder,n=this.isArtboard;return e?"".concat(t.folderCount," 文件夹, ").concat(t.artboardCount," 画板"):n?hi(t.artboard):null},isFolder:function(){return this.item.id>0},isArtboard:function(){var t;return!this.isFolder&&(null===(t=this.item.artboard)||void 0===t?void 0:t.cid)>0}},data:function(){return{userMiniPreviewImg:!0}},props:{item:Object}},XF=YF,KF=(n("4e2a"),Object(Gr["a"])(XF,$F,zF,!1,null,"117be170",null)),qF=KF.exports,JF=68,QF={components:{Header:hF,ArtboardListArtboardItem:WF,ArtboardListItem:qF,Nav:NF,EmptyData:_k,NetworkLoading:Iu},methods:{sortData:function(t,e,n){var i=this.orderDesc,r=this.sortType;return qn(t,e,n,{orderDesc:i,sortType:r})},designPXToShowPX:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t/c["b"]*this.mainArtboardView.docWidth;return!0===n?i:e?Math.ceil(i):Math.floor(i)},designPXToShowVW:function(t){return t/c["b"]*100+"vw"},onMainViewResize:function(){var t=this.$refs.mainArtboard,e=this.$refs.mainAll,n=document.documentElement.offsetWidth,i=this.mainArtboardView;i.docWidth=n,t&&(i.height=Math.ceil(t.getBoundingClientRect().height));var r=this.mainAllView;r.docWidth=n,e&&(r.height=Math.ceil(e.getBoundingClientRect().height))},onMainAllViewScroll:function(){var t=this.$refs.mainAll;if(t){var e=this.mainAllView;e.scrollTop=t.scrollTop}},onMainAllViewMouseWheel:function(t){var e;this.mainAllView.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onMainArtboardViewMouseWheel:function(t){var e;this.mainArtboardView.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onMainArtboardViewScroll:function(){var t=this.$refs.mainArtboard;if(t){var e=this.mainArtboardView;e.scrollTop=t.scrollTop}},refreshBrowserInfo:function(){var t=this,e=this.showAll,n=this.isEmptyList;n||this.$nextTick((function(){t.onMainViewResize();var n=e?t.$refs.mainAll:t.$refs.mainArtboard,i=e?t.mainAllView:t.mainArtboardView;n&&(i.scrollTop=n.scrollTop=0)}))}},watch:{"mainAllView.mousewheelTimes":function(t){var e=this,n=this.mainAllView;clearTimeout(n.handle),t&&(n.handle=setTimeout((function(){e.mainAllView.mousewheelTimes=0}),200))},"mainArtboardView.mousewheelTimes":function(t){var e=this,n=this.mainArtboardView;clearTimeout(n.handle),t&&(n.handle=setTimeout((function(){e.mainArtboardView.mousewheelTimes=0}),200))},cloudCurrentFolderId:function(){this.refreshBrowserInfo()},isEmptyList:function(){this.refreshBrowserInfo()},showAll:function(){this.refreshBrowserInfo()}},computed:{FetchState:function(){return c["a"]},listFetchState:function(){return this.$store.state.mobileInteraction.listFetchState},allListBraceStyle:function(){var t;return t=this.renderAllListIndexStart*JF,{paddingTop:this.designPXToShowVW(t)}},isEmptyList:function(){var t=this.showAll,e=this.renderSortArtboardList,n=this.renderSortedAllList,i=t?n:e;return 0===i.length},emptyText:function(){var t=this.showAll,e=this.searchText,n=this.hasSearchText,i=t?"子文件夹和画板":"画板";return n?"未找到“".concat(e,"”相关的").concat(i):"当前文件夹不存在".concat(i)},showAll:function(){return this.renderType===a["o"].All},sortType:function(){return this.listConfig.sortType},orderDesc:function(){return this.listConfig.orderDesc},renderType:function(){return this.listConfig.renderType},listConfig:function(){return this.$store.state.mobileInteraction.listConfig},mobileInteraction:function(){return this.$store.state.mobileInteraction},hasSearchText:function(){return!!this.searchText},searchText:function(){return this.mobileInteraction.searchText},showLazyArtboardList:function(){var t=[],e=this.renderArtboardList,n=this.mainArtboardView,i=(new w).set(0,n.scrollTop,n.docWidth,n.height);return e.forEach((function(e){var n=e.rect;i.isOverlap(n)&&t.push(e)})),t},renderArtboardList:function(){var t=this.renderSortArtboardList,e=this.mainArtboardView,n=e.docWidth,i=[];if(e.boxRealHeight=0,0===n)return i;var r={titleHeight:this.designPXToShowPX(39,!0),imgWidth:this.designPXToShowPX(154,!0),lineCount:2,offsetX:this.designPXToShowPX(21),artboardFullEqualWidth:0};r.lineCount=Math.floor(n/r.imgWidth),r.artboardFullEqualWidth=Math.round(n/r.lineCount);var o=new Array(r.lineCount).fill(0),a=0;return t.forEach((function(t){var n,s=t.artboard,c=s.boundsInParentForList;if(c){var l=new w,u=o[a],d=Math.ceil(c.height*r.imgWidth/c.width)+r.titleHeight;l.set(r.offsetX+(r.offsetX+r.imgWidth)*a,u,r.imgWidth,d),u+=d,o[a]=u,e.boxRealHeight=Math.max(e.boxRealHeight,u),a++,a>=r.lineCount&&(a=0),i.push({item:t,artboard:s,rect:l,titleHeight:r.titleHeight,key:null!==(n=s.cid)&&void 0!==n?n:"".concat(s.fileType,":").concat(s.guid)})}})),i},renderSortArtboardList:function(){var t,e,n=this.hasSearchText,i=this.searchText,r=this.renderDocumentArtboards,o=[];return i=n&&null!==(t=null===(e=i)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"",r.forEach((function(t){var e=null===t||void 0===t?void 0:t.artboard;if(e){if(n){var r=e.name;if(!r)return;if(-1===r.toLowerCase().indexOf(i))return}o.push(t)}})),o.length>0&&this.sortData(o,"updateTimeTimes",a["m"].Artboard),o},renderAllListIndexStart:function(){var t=this.mainAllView;return Math.floor(t.scrollTop/this.designPXToShowPX(JF))},showLazyAllList:function(){for(var t=this.renderSortedAllList,e=this.mainAllView,n=this.renderAllListIndexStart,i=Math.ceil(e.height/this.designPXToShowPX(JF))+1,r=[],o=Math.min(n+i,t.length);n<o;n++){var a,s,c=t[n];r.push({item:c,key:"".concat(c.id,"-").concat(null!==(a=null===(s=c.artboard)||void 0===s?void 0:s.cid)&&void 0!==a?a:0)})}return r},renderSortedAllList:function(){var t,e,n=this.cloudSubFolders,i=this.hasSearchText,r=this.searchText,o=this.mainAllView,s=[];r=i&&null!==(t=null===(e=r)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"",Object(l["i"])(n)&&n.forEach((function(t){if(i){var e=t.name;if(!e)return;if(-1===e.toLowerCase().indexOf(r))return}s.push(t)})),this.sortData(s,"updateTimes",a["m"].Folder);var c=this.renderSortArtboardList;return c.length>0&&s.push.apply(s,Object(u["a"])(c)),o.boxRealHeight=Math.ceil(this.designPXToShowPX(JF,!0,!0)*s.length),s}},data:function(){return{mainArtboardView:{scrollTop:0,height:0,docWidth:0,boxRealHeight:0,mousewheelTimes:0,handle:0},mainAllView:{scrollTop:0,height:0,docWidth:0,boxRealHeight:0,mousewheelTimes:0,handle:0},inSafariStandalone:l["g"]}},created:function(){window.addEventListener("resize",this.onMainViewResize)},mounted:function(){this.onMainViewResize(),this.onMainArtboardViewScroll(),this.onMainAllViewScroll()},beforeDestroy:function(){window.removeEventListener("resize",this.onMainViewResize),clearTimeout(this.mainArtboardView.handle),clearTimeout(this.mainAllView.handle)}},ZF=QF,tj=(n("7797"),Object(Gr["a"])(ZF,EF,RF,!1,null,"52db80e1",null)),ej=tj.exports,nj=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-info"},[e("ArtboardPanel",{attrs:{renderArtboardList:t.renderDocumentArtboards,curArtboardIndex:t.curArtboardIndex}}),!t.homeListVisible&&t.mobileInteraction.controlVisible?e("div",{staticClass:"control"},[e("div",{staticClass:"btns"},[e("div",{staticClass:"btn btn-control-golist",on:{click:function(e){return t.setCurArtboard(null)}}})]),e("menu",[e("span",{staticClass:"btn btn-homelist",class:{disabled:0===t.homeList.length},on:{click:t.clickHomeList}}),e("span",{staticClass:"line"}),e("span",{staticClass:"btn btn-interaction-rect-always-visible",class:{on:t.interactionRectAlwaysVisible},on:{click:t.clickInteractionRectAlwaysVisible}}),e("span",{staticClass:"line"}),e("span",{staticClass:"btn btn-vertical-align",class:t.verticalAlignCss,on:{click:t.clickVerticalAlign}})])]):t._e(),e("home-list",{attrs:{homeList:t.homeList,visible:t.homeListVisible},on:{hideHomeList:t.hideHomeList}})],1)},ij=[],rj=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-panel",on:{touchstart:t.touchstartPanel}},[e("div",{staticClass:"box",class:{animation:t.animation,moving:t.movingX,out:t.isAnimationOut},style:t.style},t._l(t.showArtboards,(function(t){return e("div",{key:t.key,staticClass:"item"},[t.artboard?e("InteractionArtboardItem",{attrs:{artboard:t.artboard,overlayArtboards:t.overlayArtboards,renderTapInteraction:t.renderTapInteraction,overlayVisible:t.overlayVisible}}):e("artboard-empty")],1)})),0),t.gobackArtboard?e("InteractionArtboardItem",{attrs:{overlayVisible:!1,artboard:t.gobackArtboard.fromArtboard.artboard,overlayArtboards:[],renderTapInteraction:t.gobackArtboard.renderTapInteraction}}):t._e(),t.gotoArtboard?e("InteractionArtboardItem",{attrs:{artboard:t.gotoArtboard.fromArtboard.artboard,overlayArtboards:[],renderTapInteraction:t.gotoArtboard.renderTapInteraction}}):t._e()],1)},oj=[],aj=function(){var t=this;t._self._c;return t._m(0)},sj=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-empty"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v("没有画板了")])])])}],cj=(n("938c"),{}),lj=Object(Gr["a"])(cj,aj,sj,!1,null,"dbda9962",null),uj=lj.exports,dj={components:{InteractionArtboardItem:PA,ArtboardEmpty:uj},methods:{touchmovePanel:function(t){var e=t.changedTouches[0];if(e){var n=this.maxDiffNum,i=this.docWidth,r=e.pageX-this.touchStartX,o=e.pageY-this.touchStartY,a=Math.abs(r),s=Math.abs(o);this.movingX||this.movingY||(s>=n&&a<s&&(this.movingY=!0),!this.movingY&&a>=n&&(this.movingX=!0)),this.movingX&&(t.preventDefault(),r=r>0?Math.min(r,i):Math.max(r,-i),this.mouseDiffX=r)}},touchendPanel:function(t){window.removeEventListener("touchmove",this.touchmovePanel,{passive:!1}),window.removeEventListener("touchend",this.touchendPanel);var e=t.changedTouches[0];if(e)if(this.movingX){var n=e.pageX-this.touchStartX;this.onSlide(n)}else if(this.movingY)this.movingY=!1;else{var i,r=t.target,o=r&&!!r.getAttribute("data-unset-control"),a=this.mobileInteraction,s=Math.abs(Date.now()-this.touchStartTime),c=s<300,l=s>1500,u=a.controlVisible;o&&c?o=!1:(l&&o||c)&&(i=!u),i!==u&&setTimeout((function(){a.controlVisible=i}),10),this.currentArtboardHasRenderInteraction||this.showTextTip("当前画板没有或未提交交互原型热区",1)}},touchstartPanel:function(t){if(!this.animation){window.addEventListener("touchmove",this.touchmovePanel,{passive:!1}),window.addEventListener("touchend",this.touchendPanel);var e=t.touches[0];e&&(this.mouseDiffX=0,this.movingX=this.movingY=!1,this.touchStartX=e.pageX,this.touchStartY=e.pageY,this.touchStartTime=Date.now())}},onSlide:function(t){var e,n=this,i=this.mouseDiffX,r=0;try{if(0===t)return;var o=this.prevArtboard,a=this.nextArtboard,s=this.docWidth;if(null==o&&t>0)return;if(null==a&&t<0)return;if(Math.abs(t)<s/5)return;if(t>0?(e=o,r=s):(e=a,r=-s),!e)return}finally{0!==i&&(this.animation=!0,this.mouseDiffX=r,setTimeout((function(){n.animation=!1,n.mouseDiffX=0,n.movingX=!1,n.movingY=!1,e&&n.setCurArtboard(e)}),200))}}},computed:{isAnimationOut:function(){var t=this.gobackArtboard,e=this.gotoArtboard;return null!=[t,e].find((function(t){var e,n;return!!t&&-1!==(null!==(e=null===(n=t.renderTapInteraction)||void 0===n||null===(n=n.transition)||void 0===n?void 0:n.type)&&void 0!==e?e:"").indexOf("_out")}))},gobackArtboard:function(){return this.interactionSet.gobackArtboard},gotoArtboard:function(){return this.interactionSet.gotoArtboard},currentOverlayVisible:function(){return!this.gobackArtboard},currentRenderTapInteraction:function(){var t,e=this.gobackArtboard,n=this.gotoArtboard,i=null===(t=null!==e&&void 0!==e?e:n)||void 0===t?void 0:t.renderTapInteraction;if(i){var r=i,o=r.transition,a=r.trigger_type,c=r.type,u=r.preserveScrollPosition,d=r.toArtboard;if(!Object(l["k"])(o))return null;switch(o=Object(s["a"])({},o),o.type){case"dissolve":case"autoAnimate":return null;case"push":case"slide":case"slide_out":case"move":case"move_out":o.type="".concat(o.type,"-background");break}i={transition:o,trigger_type:a,type:c,preserveScrollPosition:u,toArtboard:d}}return i},currentArtboardHasRenderInteraction:function(){return null!=this.currentArtboardRenderInteractions},currentArtboardRenderInteractions:function(){var t,e,n=null===(t=this.curArtboard)||void 0===t||null===(t=t.artboard)||void 0===t?void 0:t.interactionInfo;if(!n)return null;if(n.fetchState!==c["a"].Success)return null;var i=null===(e=n.data)||void 0===e?void 0:e.renderInteractions;return Object(l["i"])(i)&&i.length>0?i:null},showArtboards:function(){var t=this.prevArtboard,e=this.nextArtboard,n=this.curArtboard,i=this.overlayArtboards,r=[];t?r.push({key:t.artboard.cid,artboard:t.artboard,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0}):r.push({key:"prevArtboard.null",artboard:null,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0});var o=n.artboard;return r.push({key:o.cid,artboard:o,overlayArtboards:i,renderTapInteraction:this.currentRenderTapInteraction,overlayVisible:this.currentOverlayVisible}),e?r.push({key:e.artboard.cid,artboard:e.artboard,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0}):r.push({key:"nextArtboard.null",artboard:null,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0}),r},moving:function(){return this.movingX||this.movingY},style:function(){var t=this.mouseDiffX;return{transform:"translate3d(".concat(t,"px, 0, 1px)")}},docWidth:function(){return this.mobileInteraction.mobileSize.width},mobileInteraction:function(){return this.$store.state.mobileInteraction},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},overlayArtboards:function(){return this.interactionSet.overlayArtboards},prevArtboard:function(){var t=this.curArtboardIndex,e=this.renderArtboardList;return t<=0?null:e[t-1]},nextArtboard:function(){var t=this.curArtboardIndex,e=this.renderArtboardList,n=e.length;return t>=n-1?null:e[t+1]}},data:function(){return{touchStartTime:0,touchStartX:0,touchStartY:0,movingX:!1,movingY:!1,maxDiffNum:3,animation:!1,mouseDiffX:0}},props:{renderArtboardList:Array,curArtboardIndex:Number}},hj=dj,fj=(n("b623"),Object(Gr["a"])(hj,rj,oj,!1,null,"cd9298dc",null)),mj=fj.exports,vj=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-list",class:{on:t.visible},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickHide.apply(null,arguments)}}},[e("ul",{staticClass:"box"},t._l(t.homeList,(function(n,i){return e("li",{key:i,on:{click:function(e){return t.clickItem(n)}}},[e("span",{staticClass:"text"},[t._v(t._s(n.artboard.name))])])})),0)])},pj=[],bj={methods:{clickItem:function(t){this.setCurArtboard(t),this.clickHide()},clickHide:function(){this.$emit("hideHomeList")}},props:{homeList:Array,visible:Boolean}},gj=bj,wj=(n("b3ac"),Object(Gr["a"])(gj,vj,pj,!1,null,"10774c3a",null)),yj=wj.exports,kj={components:{ArtboardPanel:mj,HomeList:yj},methods:{clickVerticalAlign:function(){var t,e=this.verticalAlign,n=Object(f["a"])(Object(f["a"])(Object(f["a"])({},a["H"].Top,a["H"].Middle),a["H"].Middle,a["H"].Bottom),a["H"].Bottom,a["H"].Top),i=null!==(t=n[e])&&void 0!==t?t:a["H"].Middle;this.$store.commit("setInteractionArtboardVerticalAlign",i),this.showTextTip("已修改画板的对齐方式为「".concat(a["H"].getName(i),"」"))},hideHomeList:function(){this.homeListVisible=!1},clickHomeList:function(){var t=this.homeList;if(0!==t.length)return 1===t.length?(this.setCurArtboard(t[0]),void this.showTextTip("已切换到起始画板")):void(this.homeListVisible=!0);this.showTextTip("当前没有配置起始画板")},clickInteractionRectAlwaysVisible:function(){var t=!this.interactionRectAlwaysVisible;this.showTextTip(t?"已开启原型热区常显":"已关闭原型热区常显"),this.$store.commit("setInteractionRectAlwaysVisible",t)},clickGoArtboardByIndex:function(t){t<0&&(t=0);var e=this.renderDocumentArtboards,n=e.length;t>n-1&&(t=n-1);var i=e[t];this.setCurArtboard(i)}},computed:{verticalAlignCss:function(){switch(this.verticalAlign){case a["H"].Bottom:return"align-bottom";case a["H"].Top:return"align-top";default:return"align-middle"}},verticalAlign:function(){return this.$store.state.artboardDetail.interactionSet.verticalAlign},homeList:function(){var t=this.renderDocumentArtboards;return t.filter((function(t){var e;return null===(e=t.artboard)||void 0===e?void 0:e.flowStart}))},hasPrevArtboard:function(){var t=this.curArtboardIndex;return t>0},hasNextArtboard:function(){var t=this.renderDocumentArtboards,e=this.curArtboardIndex,n=t.length;return e<n-1},curArtboardIndex:function(){var t=this.curArtboard;return this.renderDocumentArtboards.findIndex((function(e){return e===t}))},interactionRectAlwaysVisible:function(){return this.$store.state.artboardDetail.interactionSet.rectAlwaysVisible},mobileInteraction:function(){return this.$store.state.mobileInteraction},hasSearchText:function(){return!!this.searchText},searchText:function(){return this.mobileInteraction.searchText},renderArtboardList:function(){var t,e,n=this.searchText,i=this.renderDocumentArtboards,r=this.hasSearchText,o=[];return n=r&&null!==(t=null===(e=n)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"",i.forEach((function(t){var e=null===t||void 0===t?void 0:t.artboard;if(e){if(r){var i=e.name;if(!i)return;if(-1===i.toLowerCase().indexOf(n))return}var a=e.boundsInParent;a&&o.push(t)}})),o}},watch:{curArtboard:function(t){t||(this.mobileInteraction.controlVisible=!1)}},data:function(){return{homeListVisible:!1}},created:function(){this.mobileInteraction.controlVisible=!1}},Cj=kj,xj=(n("5952"),Object(Gr["a"])(Cj,nj,ij,!1,null,"279744e8",null)),Sj=xj.exports,Tj=function(){var t=this,e=t._self._c;return t.tipVisible?e("div",{staticClass:"pop-tip-text"},[e("p",[t._v(t._s(t.tipText))])]):t._e()},Oj=[],Ij={computed:{tipText:function(){return this.$store.state.textTip.text},tipVisible:function(){return this.$store.state.textTip.visible}}},Aj=Ij,Fj=(n("2ec9"),Object(Gr["a"])(Aj,Tj,Oj,!1,null,"74a7e4ce",null)),jj=Fj.exports,_j=l["f"]&&/MQQBrowser/i.test(navigator.userAgent),Mj={components:{ArtboardList:ej,ArtboardInfo:Sj,TipInMobile:jj,CloudNeedLoginTip:Vd,Authority:Tk,EmptyData:_k,Header:hF,Nav:NF,AutomaticSync:io},methods:{onResize:function(){var t=document.documentElement,e=this.mobileSize;e.width=t.offsetWidth,e.height=t.offsetHeight},fullScreen:function(){var t=this.allArtboardLoadChecked,e=this.cloudIsLogin,n=this.cloudNeedLogin,i=this.cloudFolderNotFound,r=this.permission,o=this.isEmptyArtboardData,a=this.inList;t&&(n&&!e||i||r&&(o||a||this.isQQBrowser||this.isFullscreen||jI.requestFullscreen()))},onFullscreen:function(t){this.isFullscreen=t},setFullscreen:function(t){var e=document.documentElement;t?jI.onChange(this.onFullscreen):jI.offChange(this.onFullscreen);var n=t?"addEventListener":"removeEventListener";e[n]("touchend",this.fullScreen),e[n]("click",this.fullScreen),e=null}},data:function(){return{isFullscreen:jI.isFullscreen()}},computed:{isQQBrowser:function(){return _j},emptyText:function(){return this.inCloudMode?0===this.cloudCurrentFolderId?"私有云下还没有文件夹,请在标记狮中添加":this.inNetDiskFileMode?"文件不存在,可能已经被移动或删除":"当前文件夹没有画板信息":"未检测到数据,请尝试重新导出画板"},artboardLoadProgressText:function(){return Math.floor(1e4*this.artboardLoadProgress.current/this.artboardLoadProgress.count)/100+"%"},artboardLoadProgress:function(){return this.$store.state.artboardLoadProgress},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},isEmptyArtboardData:function(){return 0===this.documentArtboards.length},mobileSize:function(){return this.$store.state.mobileInteraction.mobileSize},inList:function(){return null==this.curArtboard}},created:function(){this.setFullscreen(!0),window.addEventListener("resize",this.onResize),this.onResize()},beforeDestroy:function(){this.setFullscreen(!1),window.removeEventListener("resize",this.onResize)}},Lj=Mj,Pj=(n("d6df"),Object(Gr["a"])(Lj,YA,XA,!1,null,"39ffaee1",null)),Dj=Pj.exports;function Nj(t,e){Object(c["V"])(!0),Object(c["q"])();var n=+Object(c["cb"])("commentid","#"),i="1"===Object(c["cb"])("isreply","#");t().then((function(){var t=Lr.state;Lr.commit("allArtboardLoadChecked",!0),t.cloud.allFoldersBoxVisible="1"===Object(c["M"])(a["f"],!1),je(t.documentArtboards);var r=t.cloud.defaultArtboardGuid,o=null;if(r&&(o=Ii.documentArtboards.find((function(t){return t.artboard.guid===r})),t.curArtboard!==o&&Lr.commit("curArtboard",{artboard:o})),n>0){var s,u,d=t.autoIntoInfo;d.commentArtboardId=null!==(s=null===(u=o)||void 0===u||null===(u=u.artboard)||void 0===u?void 0:u.cid)&&void 0!==s?s:0,d.commentId=n,d.isReply=i,Lr.commit("setRightNavType",a["U"].Comment)}e(),o||l["f"]||(t.renderDocuments.find((function(t){if(o=t.arts.find((function(t){return t.artboard.flowStart})),o)return!0})),o||t.renderDocuments.find((function(t){if(t.arts.length>0)return o=t.arts[0],!0})),o&&t.curArtboard!==o&&Lr.commit("curArtboard",{artboard:o}))}));var r=new o["a"]({store:Lr,render:function(t){return t(l["f"]?Dj:zA)}});Di((function(t){Lr.commit("isSupportWebp",t),r.$mount("#app")}))}var Ej,Rj,Vj=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pop-box confirm",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"box"},[t.showCancel?e("a",{staticClass:"sys-close",attrs:{href:"javascript:;"},on:{click:t.clickCancel}}):t._e(),e("div",{staticClass:"title"},[t._v(t._s(t.title))]),e("div",{staticClass:"text"},[t._v(t._s(t.text))]),e("div",{staticClass:"btns"},[t.noText?e("a",{staticClass:"button btn-no",attrs:{href:"javascript:;"},on:{click:t.clickNo}},[t._v(t._s(t.noText))]):t._e(),e("a",{staticClass:"button btn-yes",class:{light:!t.inMobile},attrs:{href:"javascript:;"},on:{click:t.clickYes}},[t._v(t._s(t.yesText))])])])])},Bj=[],Hj={created:function(){window.addEventListener("keydown",this.onKeyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},methods:{onKeyDown:function(t){var e=t.keyCode||t.which;if(27===e){try{t.preventDefault(),t.stopPropagation()}catch(n){}this.showCancel?this.clickCancel():this.clickNo()}},clickCancel:function(){this.$emit("clickCancel")},clickYes:function(){this.$emit("clickYes")},clickNo:function(){this.$emit("clickNo")}},props:{title:{type:String,default:"提示"},text:{validator:function(){return!0}},yesText:{type:String,default:"确认"},noText:{type:String,default:"取消"},showCancel:{type:Boolean,default:!1}}},Uj=Hj,Gj=(n("567c"),Object(Gr["a"])(Uj,Vj,Bj,!1,null,"8aa1124e",null)),Wj=Gj.exports,$j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pop-box prompt"},[e("form",{on:{submit:t.clickSubmit}},[e("div",{staticClass:"box"},[e("a",{staticClass:"sys-close",attrs:{href:"javascript:;",title:t.noText},on:{click:t.clickNo}}),e("div",{staticClass:"title"},[t._v(t._s(t.title))]),e("div",{staticClass:"text"},[e("UserInput",{ref:"text",attrs:{defaultBorder:!0,placeholder:t.placeholder,target:"text",initValue:t.text,maxLength:t.maxLength},on:{change:t.onChange}})],1),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light btn-yes",attrs:{href:"javascript:;"},on:{click:t.clickYes}},[t._v(t._s(t.yesText))])])])])])},zj=[],Yj={methods:{clickSubmit:function(t){t.preventDefault(),this.clickYes()},onChange:function(t){this.value=t}},components:{UserInput:Xm},props:{title:{type:String,default:"提示"},maxLength:{type:Number,default:256},placeholder:{type:String,default:""},text:String,yesText:{type:String,default:"确认"},noText:{type:String,default:"取消"}},data:function(){return{value:""}},created:function(){var t=this;this.value=this.text,Object(l["j"])(this.value)&&this.$nextTick((function(){var e=t.$refs.text;e&&e.setFocus&&e.setFocus()}))}},Xj=Yj,Kj=(n("0913"),Object(Gr["a"])(Xj,$j,zj,!1,null,"bebbefea",null)),qj=Kj.exports,Jj=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pop-box"},[e("div",{staticClass:"box",class:{"no-padding":t.noPadding}},[t.title?e("h5",[t._v(t._s(t.title))]):t._e(),t.showClose?e("a",{staticClass:"sys-close",attrs:{href:"javascript:;"},on:{click:t.clickCancel}}):t._e(),e("custom-body",t._b({on:{cancel:t.clickCancel,confirm:t.clickConfirm}},"custom-body",t.customBodyPropsData,!1))],1)])},Qj=[],Zj={methods:{clickCancel:function(){this.$emit("cancel")},clickConfirm:function(t){this.$emit("confirm",t)}},props:{showClose:{type:Boolean,default:!0},customBodyPropsData:{type:Object,default:void 0},title:{type:String,default:void 0},noPadding:Boolean}},t_=Zj,e_=(n("d1d9"),Object(Gr["a"])(t_,Jj,Qj,!1,null,"07954a3c",null)),n_=e_.exports,i_=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o,s,u,d=arguments;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return r=!(d.length>2&&void 0!==d[2])||d[2],"string"!==typeof n&&(n=JSON.stringify(n)),o="".concat(c["d"],"/api/").concat(e),t.n=1,fetch(o,{method:"post",body:n,credentials:void 0});case 1:s=t.v,u=s.status,t.n=200===u?2:500===u?7:9;break;case 2:return t.n=3,s.text();case 3:if(n=t.v,Object(l["j"])(n)){t.n=4;break}throw"接口".concat(e,"请求失败,不存在返回值");case 4:if(n=Object(c["ob"])(n),Object(l["k"])(n)){t.n=5;break}throw"接口".concat(e,"请求失败,无法解析返回值");case 5:if(n.success){t.n=6;break}throw n.code===a["cb"].NotLogin&&Object(c["pb"])(2e3).then((function(){window.location.reload(!0)})),n.errMsg;case 6:return t.a(2,r?Object(c["i"])(n.data):n.data);case 7:return t.n=8,s.text();case 8:throw n=t.v,n;case 9:throw"接口".concat(e,"请求失败");case 10:return t.a(2)}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),r_=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n){var r,o,a;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(Object(l["k"])(n)){t.n=1;break}throw"接口「".concat(e,"」返回值格式异常");case 1:if(n.success){t.n=2;break}return t.a(2,n);case 2:if(n=n.data,Object(l["j"])(n)){t.n=3;break}throw"接口「".concat(e,"」返回值格式异常,无法解析data");case 3:return r="".concat(c["d"],"/api/").concat(e),t.n=4,fetch(r,{method:"post",body:n,credentials:void 0});case 4:o=t.v,a=o.status,t.n=200===a?5:500===a?9:11;break;case 5:return t.n=6,o.text();case 6:if(n=t.v,Object(l["j"])(n)){t.n=7;break}throw"接口「".concat(e,"」请求失败,不存在返回值");case 7:if(n=Object(c["ob"])(n),Object(l["k"])(n)){t.n=8;break}throw"接口「".concat(e,"」请求失败,无法解析返回值");case 8:return t.a(2,n);case 9:return t.n=10,o.text();case 10:throw n=t.v,"接口「".concat(e,"」").concat(n);case 11:throw"接口「".concat(e,"」请求失败");case 12:return t.a(2)}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o_=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(e,n){var o,a,s,l,u,d,h,f,m=arguments;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return o=m.length>2&&void 0!==m[2]?m[2]:0,a="pre"+e,t.n=1,i_(a,n,!1);case 1:return s=t.v,l="".concat(c["f"],"router/web/webupdate.ashx"),u=document.createElement("iframe"),d="__postdata_"+Date.now(),u.name=d,u.style.cssText="width:1px;height:1px;position: absolute;top:-10px;left:-10px;overflow:hidden;",h=document.createElement("form"),h.style.cssText="width:1px;height:1px;position: absolute;top:-10px;left:-10px;overflow:hidden;",h.appendChild(u),h.target=d,h.method="POST",h.action=l,h.enctype="multipart/form-data",f=document.createElement("input"),f.name="router",f.value=e,h.appendChild(f),f=document.createElement("input"),f.name="body",f.value=s,h.appendChild(f),f=null,document.body.appendChild(h),t.a(2,new Promise((function(t,n){var a,s=function(){clearTimeout(a),c&&(window.removeEventListener("message",c),document.body.removeChild(h),c=h=u=null)};o>0&&(a=setTimeout((function(){s(),n("「".concat(e,"」操作已超时"))}),o));var c=function(){var o=Object(r["a"])(Object(i["a"])().m((function r(o){var a,c,l,d;return Object(i["a"])().w((function(i){while(1)switch(i.p=i.n){case 0:if(a=o.source,a===u.contentWindow){i.n=1;break}return i.a(2);case 1:if(i.p=1,c=o.data,"string"!==typeof c){i.n=2;break}return i.a(2,n(c));case 2:return i.p=2,l=t,i.n=3,r_(e,c);case 3:l(i.v),i.n=5;break;case 4:i.p=4,d=i.v,n(d);case 5:return i.p=5,s(),i.f(5);case 6:return i.a(2)}}),r,null,[[2,4],[1,,5,6]])})));return function(t){return o.apply(this,arguments)}}();window.addEventListener("message",c),h.submit()})))}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a_={computed:{webViewFocus:function(){return this.$store.state.webViewFocus},webViewHidden:function(){return this.$store.state.webViewHidden},webViewStateTimes:function(){return this.$store.state.webViewStateTimes},allFoldersBoxVisible:function(){return this.$store.state.cloud.allFoldersBoxVisible},inMobile:function(){return l["f"]},inMacOS:function(){return l["e"]},editComment:function(){return this.$store.state.editComment},inCommentDrawing:function(){var t=this.editComment;if(!t.drawing)return!1;var e=t.drawInfo.histories;return e.length>0},numberAutoRound:function(){return this.$store.state.setting.numberAutoRound},exportBoxBackground:function(){return this.$store.state.setting.exportBoxBackground},inCloudMode:function(){return this.$store.state.inCloudMode},artShowInListMode:function(){return this.inCloudMode&&this.$store.state.artShowInListMode},showArtListMap:function(){return this.inCloudViewerMode&&!this.artShowInListMode&&!this.inArtboardMode&&this.$store.state.showArtListMap},permission:function(){return this.$store.state.permission},cloudNeedLogin:function(){return this.inCloudMode&&this.$store.state.cloudNeedLogin},cloudIsLogin:function(){return this.inCloudMode&&this.$store.state.cloudIsLogin},cloudNickName:function(){return this.$store.state.cloudNickName},cloudUserEmail:function(){return this.$store.state.cloudUserEmail},cloudUserId:function(){return this.$store.state.cloudUserId},cloudUserIsDesigner:function(){return this.$store.state.cloudUserIsDesigner},cloudUserIsOwner:function(){return this.$store.state.cloudUserIsOwner},cloudUserKey:function(){return this.$store.state.cloudUserKey},cloudName:function(){return this.$store.state.cloudName},cloudKey:function(){return this.$store.state.cloudKey},cloudVersion:function(){return this.$store.state.cloudVersion},cloudFolderNotFound:function(){return this.$store.state.cloud.folderNotFound},cloudFolderInSpecify:function(){return this.$store.state.cloud.folderInSpecify},cloudFolderErrorText:function(){var t=this.cloudFolderNotFound,e=this.cloudFolderInSpecify;return e?l["f"]?"当前文件夹仅限定人员访问\n请使用有访问权限的账户登录":"当前文件夹仅限定人员访问,请使用有访问权限的账户登录":t?"链接已失效,无法找到对应的文件夹":null},cloudCurrentFolderId:function(){return this.$store.state.cloud.currentFolderId},cloudDefaultArtboardGuid:function(){return this.$store.state.cloud.defaultArtboardGuid},cloudSubFolders:function(){return this.$store.state.cloud.subFolders},cloudSubFiles:function(){return this.$store.state.cloud.subFiles},cloudParentFolder:function(){return this.$store.state.cloud.parentFolder},androidUseMipmap:function(){return this.$store.state.androidUseMipmap},calcPlatformUse:function(){var t=this.calcPlatformType;switch(t){case a["c"].ANDROID:case a["c"].WE_CHAT_MINI_PROGRAM:case a["c"].IOS:return t;case a["c"].CUSTOM:switch(this.calcPlatformCustomUnit){case a["d"].DP:return a["c"].ANDROID;case a["d"].PT:return a["c"].IOS;case a["d"].RPX:return a["c"].WE_CHAT_MINI_PROGRAM;default:return a["c"].WEB}default:return a["c"].WEB}},calcArtScale:function(){var t=this.curArtboard,e=this.inCloudViewerArtboardInfoMode;if(!t)return 1;var n=Ha(t,e);if(!n)return 1;var i=n.mlConfig;if(!i)return 1;var r=i.artScale;return null==r||r<=0?1:r},calcPlatformType:function(){return this.$store.state.platform.type},calcPlatformCustomUnit:function(){return this.$store.state.platform.customUnit},calcPlatformShowType:function(){var t=this.calcPlatformType;switch(t){case a["c"].ANDROID:case a["c"].IOS:case a["c"].WE_CHAT_MINI_PROGRAM:return t;case a["c"].CUSTOM:switch(this.calcPlatformCustomUnit){case a["d"].DP:return a["c"].ANDROID;case a["d"].PT:return a["c"].IOS;case a["d"].RPX:return a["c"].WE_CHAT_MINI_PROGRAM;default:return a["c"].WEB}default:return a["c"].WEB}},calcUnitTemplateValue:function(){if(!this.inArtboardMode)return"";var t=this.$store.state.unitTemplate.template;return t||""},calcPlatformCustomDocWidth:function(){if(!this.inArtboardMode)return 1;var t=this.$store.state.platform.customDocWidth;return(isNaN(t)||!isFinite(t)||t<1)&&(t=0),t},calcPlatformCustomDocWidthShow:function(){var t=this.calcPlatformCustomDocWidth;if(0===t){var e=this.curArtboard,n=this.inCloudViewerArtboardInfoMode;if(e){var i,r,o=Ha(e,n);if(o)t=null!==(i=null===(r=o.boundsInArtboard)||void 0===r?void 0:r.width)&&void 0!==i?i:0}}return t},scaleArtboard:function(){return this.$store.state.scale.artboard},scaleList:function(){return this.$store.state.scale.list},scaleImageViewer:function(){var t=this.$store.state.imageViewer;return t.scale},inArtboardMode:function(){return null!==this.curArtboard},inCloudViewerMode:function(){return this.inCloudMode&&this.$store.state.cloud.renderMode===a["W"].Normal},inCloudViewerArtboardInfoMode:function(){return this.inCloudViewerMode&&this.inArtboardMode},inNetDiskFileMode:function(){return this.inCloudMode&&this.$store.state.cloud.renderMode===a["W"].File},inInteractionMode:function(){return this.inCloudMode&&this.$store.state.cloud.renderMode===a["W"].Interaction},curNetDiskFile:function(){var t,e;return this.inNetDiskFileMode&&null!==(t=null===(e=this.curFileInfo)||void 0===e?void 0:e.renderFile)&&void 0!==t?t:null},curFileViewUrl:function(){return this.getNetDiskFileViewUrl(this.curNetDiskFile,!1)},curFileDownloadUrl:function(){return this.getNetDiskFileViewUrl(this.curNetDiskFile,!0)},curFileInfo:function(){if(!this.inNetDiskFileMode)return null;var t=this.$store.state.cloud.fileInfo;if(!t)return null;var e=t.file,n=t.file,i=n.name,r=n.fileName,o=n.fileExt,a=t.curVerId,s=t.historyFiles,c=a>0&&e.verId!==a;return{name:i,fileName:r,fileExt:o,mainFile:e,curVerId:c?a:e.verId,renderFile:c?null===s||void 0===s?void 0:s.find((function(t){return t.verId===a})):e,inVerData:c}},curArtboard:function(){return this.$store.state.curArtboard},curArtboardLoadedVerData:function(){return Ha(this.curArtboard,this.inCloudViewerArtboardInfoMode)},curArtboardGuid:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.guid)&&void 0!==t?t:""},curArtboardId:function(){var t;return null===(t=this.curArtboard)||void 0===t||null===(t=t.artboard)||void 0===t?void 0:t.cid},curNode:function(){return this.$store.state.curNode},artboardInComment:function(){return this.$store.state.rightNavType===a["U"].Comment},inMultDownMode:function(){return this.inArtboardMode&&this.$store.state.rightNavType===a["U"].Slice},clickedNode:function(){return this.$store.state.clickedNode},enterNode:function(){return this.$store.state.enterNode},documents:function(){return this.$store.state.documents},renderDocuments:function(){return this.$store.state.renderDocuments},filterDocumentGuid:function(){return this.$store.state.filterDocumentGuid},filterDocumentType:function(){var t,e=this.filterDocumentGuid,n=this.$store.state.sortDocumentsWithSketchDocument;if(!Object(l["j"])(e)||"none"===e)return a["K"].None;var i=n.find((function(t){return t.guid===e}));return null!==(t=null===i||void 0===i?void 0:i.type)&&void 0!==t?t:a["K"].None},documentArtboards:function(){return this.$store.state.documentArtboards},renderDocumentArtboards:function(){return this.$store.state.renderDocumentArtboards},documentName:function(){return this.$store.state.documentName},inArtboardMultDownMode:function(){return!this.inArtboardMode&&this.$store.state.inArtboardMultDownMode},userFolderSpecifyMemberAuthority:function(){return this.$store.state.cloud.userFolderSpecifyMemberAuthority}},methods:{combineResourcePath:function(t){return c["O"].combineResourcePath(t)},setUserFavoriteFolder:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function r(){var o,s,c,u,d,h;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:return i.n=1,n.checkLoginThrow(!0);case 1:if(i.v){i.n=2;break}return i.a(2);case 2:if(Object(l["k"])(t)){i.n=3;break}throw new Error("folder is null");case 3:return o=t.id,s=t.name,c="SetFolderFavoriteByWeb",u=new FormData,u.append("folderid",o),u.append("status",e),i.n=4,n.fetchPostCloudApi(c,{body:u,abortKey:"".concat(c,":").concat(o)});case 4:if(d=i.v,Object(l["k"])(d)){i.n=5;break}throw new Error("返回值异常,无法解析数据:".concat(d));case 5:if(d.success){i.n=6;break}throw new Error(d.errMsg);case 6:if(Object(l["k"])(d.data)){i.n=7;break}return i.a(2);case 7:if(h=d.data,Zi(er(a["Y"].FavoriteFolder)),h.id===o){i.n=8;break}return i.a(2);case 8:return n.showTextTip(e===a["q"].Favorite?"已收藏文件夹「".concat(s,"」"):"已取消收藏文件夹「".concat(s,"」")),i.a(2,h)}}),r)})))()},setUserFavoriteArtboard:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function r(){var o,s,c,u,d,h,f,m;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:return i.n=1,n.checkLoginThrow(!0);case 1:if(i.v){i.n=2;break}return i.a(2);case 2:if(Object(l["k"])(t)){i.n=3;break}throw new Error("artboard is null");case 3:return o=t.parentId,s=t.id,c=t.cid,u=t.name,null!==c&&void 0!==c||(c=s),d=new FormData,d.append("folderid",o),d.append("artboardid",c),d.append("status",e),h="SetArtboardStatusByWeb",i.n=4,n.fetchPostCloudApi(h,{body:d,abortKey:"".concat(h,":").concat(c)});case 4:if(f=i.v,Object(l["k"])(f)){i.n=5;break}throw new Error("返回值异常,无法解析数据:".concat(f));case 5:if(f.success){i.n=6;break}throw new Error(f.errMsg);case 6:if(Object(l["k"])(f.data)){i.n=7;break}return i.a(2);case 7:if(m=f.data,Zi(er(a["Y"].FavoriteArtboard)),m.id===c){i.n=8;break}return i.a(2);case 8:return n.showTextTip(e===a["i"].Dev?"已标记画板「".concat(u,"」为待开发"):"已取消画板「".concat(u,"」的待开发状态")),i.a(2,m)}}),r)})))()},getUserFolderRecentsAsync:function(t){var e=arguments,n=this;return Object(r["a"])(Object(i["a"])().m((function r(){var o,s,c,u,d,h,f,m,v,p,b,g,w,y;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:if(o=e.length>1&&void 0!==e[1]&&e[1],s=e.length>2&&void 0!==e[2]?e[2]:null,c=n.cloudVersion,u=!Qr.notSupportRecentData(c),d=!0,!u){i.n=2;break}return i.n=1,n.getUserRecentsAsync(a["Y"].FavoriteArtboard|a["Y"].FavoriteFolder,"",t,{useMini:!0,resultToDict:d,noCache:o,abortKey:s});case 1:return i.a(2,i.v);case 2:return i.n=3,n.checkLoginThrow();case 3:if(i.v){i.n=4;break}return i.a(2);case 4:if(h=function(t){return d?t.reduce((function(t,e){return t[e.id||e.secId]=e,t}),{}):t},f=h([]),m=h([]),v=!0,p=!Qr.notSupportAiPrompt(c),p){i.n=5;break}return i.a(2,{favArtboards:h([]),recentFolders:f,favFolders:m,mini:v});case 5:return b="GetArtboardStatusListByWeb",g=new FormData,g.append("folderid",t),i.n=6,n.fetchPostCloudApi(b,{body:g,abortKey:b});case 6:if(w=i.v,Object(l["k"])(w)){i.n=7;break}throw new Error("返回值异常,无法解析数据:".concat(w));case 7:if(w.success){i.n=8;break}throw new Error(w.errMsg);case 8:if(y=w.data,null!==y&&void 0!==y||(y=[]),Object(l["i"])(y)){i.n=9;break}throw new Error("返回值异常,无法解析数据:".concat(y));case 9:return y=h(y.map((function(t){if(!Object(l["k"])(t))return null;var e=t.id,n=t.updateTimes,i=t.status,r={id:e,recentTimes:n};return null!=i&&(r.status=i),r})).filter((function(t){return null!=t}))),i.a(2,{favArtboards:y,recentFolders:f,favFolders:m,mini:v})}}),r)})))()},getUserRecentsAsync:function(t,e){var n=arguments,o=this;return Object(r["a"])(Object(i["a"])().m((function r(){var a,s,c,l,u,d,h,f,m,v,p,b,g;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:return a=n.length>2&&void 0!==n[2]?n[2]:-1,s=n.length>3&&void 0!==n[3]?n[3]:{},c=s.useMini,l=void 0!==c&&c,u=s.resultToDict,d=void 0!==u&&u,h=s.noCache,f=void 0!==h&&h,m=s.abortKey,v=void 0===m?null:m,i.n=1,o.checkLoginThrow();case 1:if(i.v){i.n=2;break}return i.a(2);case 2:if(p="".concat(a,"/").concat(l?1:0,"/").concat(d?1:0,":").concat(e),b=er(t),g=f?null:tr(b,p),!g){i.n=3;break}return i.a(2,g);case 3:return i.n=4,o._getUserRecentsAsync(t,e,a,l,d,v);case 4:return g=i.v,Qi(b,p,g,5e3),i.a(2,g)}}),r)})))()},_getUserRecentsAsync:function(t,e){var n=arguments,o=this;return Object(r["a"])(Object(i["a"])().m((function r(){var c,u,d,h,f,m,v,p,b,g,w,y,k,C,x,S,T,O,I,A;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:return c=n.length>2&&void 0!==n[2]?n[2]:-1,u=n.length>3&&void 0!==n[3]&&n[3],d=n.length>4&&void 0!==n[4]&&n[4],h=n.length>5&&void 0!==n[5]?n[5]:null,u=c>=0&&u?1:0,f=new FormData,f.append("type",t),f.append("search",null!==e&&void 0!==e?e:""),f.append("folderid",c),f.append("mini",u),i.n=1,o.fetchPostCloudApi("GetUserRecordsByWeb",{body:f,abortKey:h});case 1:if(m=i.v,Object(l["k"])(m)){i.n=2;break}throw new Error("返回值异常,无法解析数据:".concat(m));case 2:if(m.success){i.n=3;break}throw new Error(m.errMsg);case 3:if(v=m.data,Object(l["k"])(v)){i.n=4;break}throw new Error("返回值异常,无法解析数据:".concat(v));case 4:return p=v.recentFolders,b=v.favArtboards,g=v.favArtboardDatas,w=v.mini,y=v.favFolders,k=v.updaterNames,C=v.fromFolders,Object(l["k"])(C)||(C={}),Object(l["k"])(k)||(k={}),Object(l["i"])(p)||(p=[]),Object(l["i"])(y)||(y=[]),Object(l["i"])(b)||(b=[]),Object(l["i"])(g)||(g=[]),x=function(t){return d?t.reduce((function(t,e){return t[e.id||e.secId]=e,t}),{}):t},w?(S=[p,y,b].map((function(t){return x(t.map((function(t){if(!Object(l["k"])(t))return null;var e=t.data,n=t.updateTimes,i=t.status,r={id:e,recentTimes:n};return null!=i&&(r.status=i),r})).filter((function(t){return null!=t})))})),T=Object(_["a"])(S,3),p=T[0],y=T[1],b=T[2]):(O=function(t,e){var n=[];while(t>0){var i=C[t];if(!i)break;n.unshift(i),t=i.parentId}return(0==n.length||e)&&n.unshift({folderId:0,name:"根目录",parentId:0,shareMode:a["v"].Public}),n},I=[p,y].map((function(t,e){return x(t.map((function(t){if(!Object(l["k"])(t))return null;var n=t.data,i=t.updateTimes,r=O(n,!0),o=r.splice(r.length-1,1)[0];return Object(l["k"])(o)?(o=Object(s["a"])(Object(s["a"])({},o),{},{recentTimes:i,parents:r}),o.key="".concat(e,"__folder_").concat(o.id),o.localSearchType=a["Z"].Folder,o):null})).filter((function(t){return null!=t})))})),A=Object(_["a"])(I,2),p=A[0],y=A[1],b=x(g.map((function(t){var e;if(!Object(l["k"])(t))return null;var n=t.data,i=t.updateTimes;return Object(l["k"])(n)?(n.recentTimes=i,n.parents=O(n.parentId),n.updaterName=null!==(e=k[n.updaterId])&&void 0!==e?e:null,n.key="favartboard_".concat(n.id),n.localSearchType=a["Z"].Artboard,n):null})).filter((function(t){return null!=t})))),i.a(2,{recentFolders:p,favFolders:y,favArtboards:b,mini:w})}}),r)})))()},copyNetdiskFileViewUrl:function(t){var e;if(Object(l["k"])(t)){var n=null!==(e=this.getNetdiskFileOnlineViewUrl(t))&&void 0!==e?e:t.viewUrl;0===n.indexOf("/")&&(n=location.origin+n),Object(c["p"])(n)?this.showTextTip("链接已复制到剪切板"):this.showTextTip("链接复制到剪切板失败")}},isNetdiskFileCanOnlineView:function(t){if(!Object(l["k"])(t))return!1;var e=this.cloudVersion;if(Qr.supportPreviewAddTypePage(e))return!0;var n=t.fileType,i=t.fileExt,r=t.name,o=Qr.supportDocxPreview(e);return a["L"].isSupportOnlineViewType(n,null!==i&&void 0!==i?i:r,o.support)},getNetdiskFileOnlineViewUrl:function(t,e){if(!Object(l["k"])(t))return null;var n=t.fileType,i=t.fileExt,r=t.name,o=t.viewUrl,s=this.cloudVersion;if(Qr.supportPreviewAnyFile(s))return o;var u=Qr.supportDocxPreview(s),d=null!==i&&void 0!==i?i:r;return!0===e&&n===a["L"].Url&&Qr.supportPreviewAddTypePage(s)?Object(c["h"])(o,{type:"page"}):a["L"].isSupportOnlineViewType(n,d,u.support)?((a["L"].isDocxFile(n,d)&&u.needAddTypePage||a["L"].isTextFile(n)&&Qr.previewTxtNeedAddTypePage(s))&&(o=Object(c["h"])(o,{type:"page"})),o):!0===e&&Qr.supportPreviewAddTypePage(s)?Object(c["h"])(o,{type:"page"}):null},setBeginnerGuideRect:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a["j"].TopLeft;this.$nextTick((function(){var r=0,o=0,a=0,s=0;if(Object(l["k"])(e))r=e.x,o=e.y,a=e.width,s=e.height,i=e.direction;else if(n._isDestroyed||n._isBeingDestroyed||!n._isMounted||null==e);else{var c=n.$refs[e];if(c){var u=c.getBoundingClientRect();u.width>=0&&u.height>0&&(r=Math.round(u.x),o=Math.round(u.y),a=Math.round(u.width),s=Math.round(u.height))}}n.$store.commit("setBeginnerGuideRect",{step:t,rect:{x:r,y:o,width:a,height:s,direction:i}})}))},removeCloudItem:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(n.p=0,Object(l["k"])(t)){n.n=1;break}throw new Error("参数异常");case 1:return r=new FormData,r.append("parentId",t.parentId),t.fileSecId&&r.append("fileSecId",t.fileSecId),t.artboardGuid&&r.append("artGuid",t.artboardGuid),n.n=2,e.fetchPostCloudApi("ItemRemoveByWeb",{timeout:3e4,body:r});case 2:if(t=n.v,Object(l["k"])(t)){n.n=3;break}throw new Error("返回值异常,无法解析数据:".concat(t));case 3:if(t.success){n.n=4;break}throw new Error(t.errMsg);case 4:return e.showTextTip(t.errMsg),n.a(2,!0);case 5:return n.p=5,o=n.v,e.alert({title:"删除失败",text:o}),n.a(2,!1)}}),n,null,[[0,5]])})))()},goCloudFolderInteractionUrl:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function o(){var a,s,u,d,h,f,m;return Object(i["a"])().w((function(o){while(1)switch(o.p=o.n){case 0:if(a="/interactionviewer/".concat(t,"/").concat(e?"".concat(e,"/"):""),!l["g"]){o.n=7;break}if(s=n.$store,u=t!==s.state.cloud.currentFolderId,o.p=1,s.state.mobileInteraction.listFetchState!==c["a"].Fetching){o.n=2;break}return o.a(2);case 2:return s.state.mobileInteraction.listFetchState=c["a"].Fetching,o.n=3,n.fetchPostCloudApi(a,{timeout:1e4,abortKey:"goCloudFolderInteractionUrl"});case 3:return d=o.v,n.setCurArtboard(null),Ii.dataInit({cloudData:d},s.state.cloudListSort),h=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Ii.allArtboardLoadChecked((function(){}));case 1:s.commit("setDocument",Ii);case 2:return t.a(2)}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){u&&s.commit("setFilterDocumentGuid",null)},o.n=4,h();case 4:je(s.state.documentArtboards),f(),s.state.mobileInteraction.listFetchState=c["a"].Success,o.n=6;break;case 5:o.p=5,m=o.v,s.state.mobileInteraction.listFetchState=c["a"].Error,n.showTextTip(m);case 6:o.n=8;break;case 7:location.href=a;case 8:return o.a(2)}}),o,null,[[1,5]])})))()},checkCloudItem:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function r(){var o,s;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:return o=new FormData,o.append("number"===typeof t?"id":e===a["l"].File?"secid":"id",t),o.append("type",e),i.n=1,n.fetchPostCloudApi("checkitemexistbyweb",{timeout:1e4,body:o});case 1:if(s=i.v,Object(l["k"])(s)){i.n=2;break}throw new Error("返回值异常(checkitemexist):".concat(s));case 2:if(s.success){i.n=3;break}throw new Error(s.errMsg);case 3:if(s.data){i.n=4;break}throw new Error("返回值异常(checkitemexist):".concat(JSON.stringify(s)));case 4:return i.a(2,s.data)}}),r)})))()},clickNetDiskFile:function(t,e){if(t){var n=this.getNetdiskFileOnlineViewUrl(t,e);n?window.open(n):this.clickDownloadNetDiskFile(t)}},clickDownloadNetDiskFile:function(t){var e,n,i=this.getNetDiskFileViewUrl(t,!0);if(i){var r=null!==(e=t.name)&&void 0!==e?e:"".concat(t.fileName).concat(null!==(n=t.fileExt)&&void 0!==n?n:"");Object(c["t"])(r,i)}},getNetDiskFileViewUrl:function(t,e){return t&&Object(l["j"])(t.viewUrl)?Object(c["h"])(t.viewUrl,{type:e?"download":"res",t:t.updateTimeTimes}):null},alert:function(t){var e=t.title,n=t.text,i=t.yesText,r=void 0===i?"确认":i;return this.confirm({title:e,text:n,noText:"",yesText:r})},confirm:function(t){var e=t.title,n=t.text,i=t.noText,r=void 0===i?"取消":i,a=t.yesText,s=void 0===a?"确认":a,c=t.showCancel,l=void 0!==c&&c;return new Promise((function(t){var i=function(){if(a){var t=a.$el;a.$destroy(),a=null,t&&t.parentNode&&(t.parentNode.removeChild(t),t=null)}},a=new(o["a"].extend(Wj))({propsData:{title:e,text:n,noText:r,yesText:s,showCancel:l},methods:{clickCancel:function(){i(),t("cancel")},clickYes:function(){i(),t(!0)},clickNo:function(){i(),t(!1)}}}).$mount();document.body.appendChild(a.$el)}))},prompt:function(t){var e=t.title,n=t.text,i=t.placeholder,r=void 0===i?"":i,a=t.beforeYes,s=t.maxLength,c=void 0===s?256:s,l=t.noText,u=void 0===l?"取消":l,d=t.yesText,h=void 0===d?"确认":d;return new Promise((function(t,i){var s=function(){if(l){var t=l.$el;l.$destroy(),l=null,t&&t.parentNode&&(t.parentNode.removeChild(t),t=null)}},l=new(o["a"].extend(qj))({propsData:{title:e,text:n,noText:u,yesText:h,placeholder:r,maxLength:c},methods:{clickYes:function(){var e=this.value;"function"!==typeof a||!1!==a(e)?(s(),t(e)):this.$refs.text.setFocus()},clickNo:function(){s(),i()}}}).$mount();document.body.appendChild(l.$el)}))},popup:function(t,e){var n,i,r=this;e||(e={});var a=null===(n=e.showClose)||void 0===n||n,s=null!==(i=e.props)&&void 0!==i?i:void 0,c=e,l=c.title,u=c.noPadding,d=void 0!==u&&u;return new Promise((function(e){var n=function(){if(i){var t=i.$el;i.$destroy(),i=null,t&&t.parentNode&&(t.parentNode.removeChild(t),t=null)}},i=new(o["a"].extend(n_))({propsData:{showClose:a,customBodyPropsData:s,title:l,noPadding:d},components:{"custom-body":t}});i.$store=r.$store,i.$on("confirm",(function(t){n(),e({canceled:!1,data:t})})),i.$on("cancel",(function(){n(),e({canceled:!0,data:null})})),i.$mount(),document.body.appendChild(i.$el)}))},cleanFoldersCache:function(t){var e=this,n=function(t){var n="allfoldersbyweb_".concat(e.cloudUserKey,"_").concat(t?1:0);Object(c["fb"])(n),Object(c["fb"])("".concat(n,".t"))};void 0===t||null===t?(n(!0),n(!1)):n(t)},getAllUsers:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r,o,a,s;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(n=t.cloudVersion,r=t.inCloudMode,o=t.cloudIsLogin,r){e.n=1;break}return e.a(2,null);case 1:if(!Qr.notSupportGetFolders(n)){e.n=2;break}throw new Error("无法使用@功能,私有云版本过低(".concat(n,"),请先升级私有云部署包"));case 2:if(o){e.n=3;break}throw new Error("未登录,请先登录");case 3:if(a=tr("cloudusers","all"),!a){e.n=4;break}return e.a(2,a);case 4:return e.n=5,t.fetchPostCloudApi("GetUsersByWeb",{method:"post",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});case 5:if(s=e.v,Object(l["k"])(s)){e.n=6;break}throw new Error("返回值异常,无法解析数据:".concat(s));case 6:if(s.success){e.n=7;break}throw new Error(s.errMsg);case 7:if(a=s.data,Object(l["i"])(a)){e.n=8;break}throw new Error("返回值异常,无法解析数据:".concat(JSON.stringify(s)));case 8:return a.forEach((function(t){var e,n=t.nickName;e=n?n[n.length-1]:"-",t.userFaceText=e})),a.sort((function(t,e){var n=Object(c["Z"])(t.nickName,e.nickName);return 0==n&&(n=Object(c["Z"])(t.email,e.email)),n})),Qi("cloudusers","all",a,3e4),e.a(2,a)}}),e)})))()},searchWebItem:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,s,u,d,h,f,m,v,p,b,g,w;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if(r=e.cloudVersion,o=e.inCloudMode,o){n.n=1;break}return n.a(2,null);case 1:if(!Qr.notSupportWebItemSearch(r)){n.n=2;break}throw new Error("私有云版本过低(".concat(r,"),请先升级私有云部署包"));case 2:if(s="webitemsearch",u="".concat(e.cloudUserKey,"_").concat(t),d=tr(s,u),Object(l["i"])(d)){n.n=7;break}return n.n=3,e.fetchPostCloudApi("webitemsearch",{abortKey:"webitemsearch",timeout:1e4,method:"post",body:"wd=".concat(encodeURIComponent(t)),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});case 3:if(d=n.v,Object(l["k"])(d)){n.n=4;break}throw new Error("返回值异常,无法解析数据:".concat(d));case 4:if(d.success){n.n=5;break}throw new Error(d.errMsg);case 5:if(d=d.data,Object(l["k"])(d)){n.n=6;break}throw new Error("返回值异常,无法解析数据:".concat(JSON.stringify(d)));case 6:h=d,f=h.folders,m=h.artboards,v=h.files,p=h.updaterNames,b=h.fromFolders,g=h.allParents,Object(l["i"])(f)||(f=[]),Object(l["i"])(m)||(m=[]),Object(l["i"])(v)||(v=[]),Object(l["k"])(p)||(p={}),Object(l["k"])(b)||(b={}),d=[],w=function(t){if(g){var e=t.parents=[],n=t.parentId;while(n>0){var i=b[n];if(!i)break;e.unshift(i),n=i.parentId}0==e.length&&e.push({folderId:0,name:"根目录",parentId:0,shareMode:a["v"].Public})}else t.parents=null},f.forEach((function(t){var e=b[t];e&&(e=Object.assign({localSearchType:a["Z"].Folder},e),e.parent=b[e.parentId],w(e),d.push(e))})),m.forEach((function(t){var e;t&&(t.localSearchType=a["Z"].Artboard,t.updaterName=null!==(e=p[t.updaterId])&&void 0!==e?e:"undefined",t.parent=b[t.parentId],w(t),d.push(t))})),v.forEach((function(t){var e;t&&(t.localSearchType=a["Z"].File,t.updaterName=null!==(e=p[t.updaterId])&&void 0!==e?e:"undefined",t.parent=b[t.parentId],w(t),d.push(t))})),d.sort((function(t,e){return Object(c["Z"])(t.name,e.name)})),Qi(s,u,d,5e3);case 7:return n.a(2,d)}}),n)})))()},getAllFolders:function(t,e){var n=arguments,o=this;return Object(r["a"])(Object(i["a"])().m((function r(){var s,u,d,h,f,m,v,p,b,g,w,y,k,C,x,S,T,O,I,A,F;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:if(s=!(n.length>2&&void 0!==n[2])||n[2],u=o.cloudVersion,d=o.inCloudMode,d){i.n=1;break}return i.a(2,null);case 1:if(!Qr.notSupportGetFolders(u)){i.n=2;break}throw new Error("私有云版本过低(".concat(u,"),请先升级私有云部署包"));case 2:if(f=!1,m="allfoldersbyweb_".concat(o.cloudUserKey,"_").concat(t?1:0),v=Object(c["M"])(m+".t",!0),"number"===typeof v&&v>0&&(p=Math.abs(Date.now()-v),f=p<1e4),f&&(h=Object(c["M"])(m,!0)),Object(l["i"])(h)){i.n=7;break}return i.n=3,o.fetchPostCloudApi("getallfoldersbyweb",{method:"post",body:"needPreview=".concat(t?1:0),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});case 3:if(h=i.v,Object(l["k"])(h)){i.n=4;break}throw new Error("返回值异常,无法解析数据:".concat(h));case 4:if(h.success){i.n=5;break}throw new Error(h.errMsg);case 5:if(h=h.data,Object(l["i"])(h)){i.n=6;break}throw new Error("返回值异常,无法解析数据:".concat(JSON.stringify(h)));case 6:Object(c["lb"])(m,h),Object(c["lb"])(m+".t",Date.now());case 7:if(b={},g={},w=null,h.forEach((function(t){if(t){0===t.id&&(w=t),t.childArtboardCount=0,t.childFileCount=0,t.childFolderCount=0,b[t.id]=t;var e=g[t.parentId];e||(e=g[t.parentId]=[]);var n=g[t.id];n||(n=g[t.id]=[]),t.childs=n,0===t.id&&0===t.parentId||e.push(t)}})),y=!1,k=function(t,e){var n=Object(c["Z"])(t.name,e.name);return y?-n:n},Object.keys(g).forEach((function(t){var e=g[t];e.sort(k)})),h.forEach((function(t){t&&(t.parent=0===t.id?null:b[t.parentId],t.childsVisible=0===t.id,t.deepCount=0===t.id?0:1,t.name?t.nameLower=t.name.toLowerCase():t.name=t.nameLower="")})),h.forEach((function(t){var e;if(t&&!((null===(e=t.childs)||void 0===e?void 0:e.length)>0)){var n=t,i=n.parent;while(i)i.updateTimes=Math.max(i.updateTimes,t.updateTimes),t=i,i=i.parent}})),C=Object(c["M"])(a["a"],!0),Object(l["k"])(C)||(C={}),x=Object.keys(C),S=o.cloudCurrentFolderId,s&&S>=0&&x.push(S),x.forEach((function(t){var e=b[t];while(e)(e.id||0!==e.childs.length)&&(e.childsVisible=!0),e=e.parent})),h.forEach((function(t){var e=t;while(null!=(e=e.parent)){var n,i,r;e.childArtboardCount+=null!==(n=t.artboardCount)&&void 0!==n?n:0,e.childFileCount+=null!==(i=t.fileCount)&&void 0!==i?i:0,e.childFolderCount+=null!==(r=t.folderCount)&&void 0!==r?r:0}})),!e){i.n=8;break}return T=[],O=!1,I=function(t,e,n,i,r){if(e){e.deepCount=n,e.rootId=i,(0!==e.id||O)&&t.push(e);var o=e.childs;null!=r&&(o=o.map((function(t){return t})),Jn(o,"updateTimes",a["m"].Folder,r)),o.forEach((function(e){I(t,e,n+1,i,r)}))}},I(T,w,O?0:-1,w.id,null),A=w,F=function(t){var e=[],n=this.root;return I(e,n,O?0:-1,n.id,t),e},i.a(2,{root:A,_folders:null,get folders(){return T=this._folders,T||(T=this._folders=this.sortBy(null)),T},sortBy:F});case 8:return i.a(2,w)}}),r)})))()},goCloudPath:function(t){var e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o,s,u,d,h,f,m,v,p,b,g,w,y,k,C,x,S,T,O,I,A,F,j,_;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if(r=t.folderId,o=void 0===r?0:r,s=t.artboardId,u=void 0===s?0:s,d=t.artboardGuid,h=void 0===d?"":d,f=t.fileSecId,m=void 0===f?null:f,v=t.verId,p=void 0===v?null:v,b=t.commentId,g=void 0===b?0:b,w=t.fileUsePage,y=void 0!==w&&w,k=t.isReply,C=void 0!==k&&k,x=t.newWindow,S=void 0!==x&&x,T=t.checkArtboardExist,O=void 0!==T&&T,!(g>0&&e.cloudCurrentFolderId===o&&e.inCloudViewerMode)){n.n=3;break}if(I=e.documentArtboards,A=e.curArtboardId,F=e.$store.state.autoIntoInfo,A!==u){n.n=1;break}return e.$store.commit("setRightNavType",a["U"].Comment),F.isReply=C,F.commentArtboardId=u,F.commentId=g,n.a(2);case 1:if(!Object(l["i"])(I)){n.n=2;break}if(j=I.find((function(t){var e;return(null===t||void 0===t||null===(e=t.artboard)||void 0===e?void 0:e.cid)===u})),!j){n.n=2;break}return e.$store.commit("setRightNavType",a["U"].Comment),e.setCurArtboard(j),F.commentArtboardId=u,F.commentId=g,F.isReply=C,n.a(2);case 2:throw new Error("未找到画板信息,可能已经被删除");case 3:if(!(O&&u>0)){n.n=4;break}return n.n=4,e.checkCloudItem(u,a["l"].Artboard);case 4:0==u&&Object(l["j"])(m)?_="/fileviewer/".concat(o,"/").concat(m).concat(null!=p?"_".concat(p):"","/").concat(y?"?type=page":""):(_=Object(c["A"])(o),h&&(_+="".concat(h,"/"),g>0&&(_+="#commentid=".concat(g,"&isreply=").concat(C?"1":"0")))),S?window.open(_):window.location.href=_;case 5:return n.a(2)}}),n)})))()},checkUserState:function(){var t=this;return Object(r["a"])(Object(i["a"])().m((function e(){var n,r;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(t.inCloudMode&&t.cloudNeedLogin){e.n=1;break}return e.a(2);case 1:return n=new FormData,n.append("folderid",t.cloudCurrentFolderId),e.n=2,t.fetchPostCloudApi("getmystate",{body:n});case 2:if(r=e.v,Object(l["k"])(r)){e.n=3;break}throw"返回值异常";case 3:return e.a(2,r)}}),e)})))()},cryptoMarklionWeb2:function(t,e){var n=arguments,o=this;return Object(r["a"])(Object(i["a"])().m((function r(){var s,l,u;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:return s=n.length>2&&void 0!==n[2]?n[2]:0,i.n=1,o_(t,e,s);case 1:if(e=i.v,e.success){i.n=7;break}u=e.code,i.n=u===a["cb"].NotLogin?2:6;break;case 2:return o.showTextTip(e.errMsg),i.n=3,fetch("".concat(c["d"],"/api/logout"),{method:"post",body:""});case 3:return l=i.v,i.n=4,l.text();case 4:return i.n=5,Object(c["pb"])(2e3);case 5:return window.location.reload(!0),i.a(3,6);case 6:throw e.errMsg;case 7:return i.a(2,e)}}),r)})))()},goCloudLogout:function(){return Object(r["a"])(Object(i["a"])().m((function t(){var e,n;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(c["d"],"/api/logout"),{method:"post",body:""});case 1:return e=t.v,t.n=2,e.text();case 2:t.n=4;break;case 3:t.p=3,t.v;case 4:return t.p=4,n="".concat(c["f"],"router/web/weblogout.ashx?redirect=").concat(encodeURIComponent(Xi.href)),l["g"]?location.replace(n):window.location.href=n,t.f(4);case 5:return t.a(2)}}),t,null,[[0,3,4,5]])})))()},getCurrentInteractionUrl:function(){if(this.inNetDiskFileMode)return null;var t,e=this.cloudCurrentFolderId,n=this.curArtboard,i=this.filterDocumentGuid,r=window.location;t="".concat(r.protocol,"//").concat(r.host,"/interactionviewer/").concat(e,"/"),n&&(t+="".concat(encodeURIComponent(n.artboard.guid),"/"));var o=!1,a=function(e,n){t+="".concat(o?"&":"?").concat(e,"=").concat(encodeURIComponent(n)),o=!0};return i&&a("filterDoc",i),t},goCloudLogin:function(){var t=location.href;t=t.replace(/https?:\/\/[^/]+\//i,"/"),t="".concat(c["f"],"web/?action=cloud.login&cloudkey=").concat(encodeURIComponent(this.cloudKey),"&ver=").concat(encodeURIComponent(this.cloudVersion),"&redirect=").concat(encodeURIComponent(t)),l["g"]?location.replace(t):location.href=t},getCalcPlatformUnit:function(t){var e;switch(this.calcPlatformType){case a["c"].ANDROID:e=t?"sp":"dp";break;case a["c"].IOS:e="pt";break;case a["c"].WE_CHAT_MINI_PROGRAM:e="rpx";break;case a["c"].CUSTOM:e=this.getCalcPlatformCustomUnitText(t);break;default:e="px";break}return e},getCalcPlatformCustomUnitText:function(t){var e,n=this.calcPlatformCustomUnit;switch(n){case a["d"].DP:e=t?"sp":"dp";break;case a["d"].RPX:e="rpx";break;case a["d"].PT:e="pt";break;default:e="px";break}return e},getCalcRectScale:function(){var t,e,n;if(!this.inArtboardMode)return 1;switch(this.calcPlatformType){case a["c"].CUSTOM:n=this.calcPlatformCustomDocWidthShow;break;case a["c"].WE_CHAT_MINI_PROGRAM:n=a["sb"];break;default:return 1}var i=null!==(t=null===(e=this.curArtboardLoadedVerData.boundsInArtboard)||void 0===e?void 0:e.width)&&void 0!==t?t:0;return 0==i?1:n/i},getCalcValue:function(t,e,n){if(!this.inArtboardMode)return 0;var i;switch(c["O"].inCloudMode&&n&&(t=A(t,this.calcArtScale,e)),this.calcPlatformType){case a["c"].ANDROID:i=t;break;case a["c"].IOS:i=t;break;case a["c"].CUSTOM:var r,o,s=this.calcPlatformCustomDocWidthShow,l=null!==(r=null===(o=this.curArtboardLoadedVerData.boundsInArtboard)||void 0===o?void 0:o.width)&&void 0!==r?r:0;i=0==l?t:s/l*t;break;case a["c"].WE_CHAT_MINI_PROGRAM:var u,d,h=null!==(u=null===(d=this.curArtboardLoadedVerData.boundsInArtboard)||void 0===d?void 0:d.width)&&void 0!==u?u:0;i=0==h?t:a["sb"]/h*t;break;default:i=t;break}return i=Math.round(100*i)/100,this.numberAutoRound&&(i=i>0&&i<1?1:e?Math.ceil(i):Math.round(i)),i},getCalcPlatformValue:function(t,e){if("string"===typeof t)return t;if(null==t)return 0;if(!this.inArtboardMode)return 0;var n,i,r,o,a;e?(n=e.fontSize,i=e.markedForExport,r=e.noUnitTemplate,o=e.needArtScale,a=e.isHorizintal):(n=!1,i=!1,r=!1,o=!1,a=!0);var s=this.getCalcValue(t,i,o);if(r){var c=this.getCalcPlatformUnit(n);return s+c}return this.getCalcUnitTemplateValue(s,n,a)},getCalcUnitTemplateValue:function(t,e,n){var i=this.$store.state.unitTemplate;if(i.enable){var r,o=null===(r=this.curArtboardLoadedVerData)||void 0===r?void 0:r.boundsInArtboard;return i.template.replace(/%[^%]+%/g,(function(e){switch(e){case"%num%":return t.toString();case"%W%":return null===o||void 0===o?void 0:o.width.toString();case"%H%":return null===o||void 0===o?void 0:o.height.toString();case"%VW%":return o?Object(m["a"])(t/o.width*100,2).toString():void 0;case"%VH%":return o?Object(m["a"])(t/o.height*100,2).toString():void 0;case"%sop%":return!1===n?o?Object(m["a"])(t/o.height*100,2).toString():void 0:o?Object(m["a"])(t/o.width*100,2).toString():void 0;default:return e}}))}var a=this.getCalcPlatformUnit(e);return t+a},setInOutput:function(t){this.$store.commit("setInOutput",t)},setInArtboardMultDownMode:function(t){this.$store.commit("setInArtboardMultDownMode",t)},setScaleArtboard:function(t){this.$store.commit("setScale",{artboard:t})},setScaleList:function(t){this.$store.commit("setScale",{list:t})},setScaleImageViewer:function(t){var e=this.$store.state.imageViewer;e.scale=Object(c["w"])(!1,t)},resetImageViewerScale:function(){var t=this.$store.state.imageViewer,e=t.imgList;e&&0!==e.length&&(t.resetScale=Date.now())},setCurArtboard:function(t,e){this.$store.commit("curArtboard",{artboard:t,extral:e}),this.setCurNode(null),this.setEnterNode(null),this.setClickedNode(null)},setCurArtboardVer:function(t,e){this.$store.commit("setCurArtboardVer",{verId:t,noTipWhenCurrentVer:!!e})},setCurNode:function(t){this.$store.commit("curNode",t)},setClickedNode:function(t){this.$store.commit("clickedNode",t)},setEnterNode:function(t){this.$store.commit("enterNode",t)},showTextTip:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;"string"!==typeof t&&null!=t&&(t=t.toString()),this.$store.commit("Tip_showTextTip",{second:e,text:t})},hideTextTip:function(){this.$store.commit("Tip_hideTextTip")},fetchPostCloudApi:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function r(){var o,s;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:return i.n=1,Object(Qt["fetchPostCloudApi"])(t,e);case 1:if(o=i.v,!Object(l["k"])(o)){i.n=3;break}s=o.code,i.n=s===a["F"].WebUser_NotLogin?2:3;break;case 2:return n.$store.commit("setUserLogout"),i.a(3,3);case 3:return i.a(2,o)}}),r)})))()},updateCloudUsersByCloud:function(t){var e=this.cloudKey;if(e){var n=this.$store.state.userNotify.cloudUsersByCloud;this.$set(n,e,t)}},getFolderPrecis:function(t,e){var n=this;return Object(r["a"])(Object(i["a"])().m((function r(){var o,a;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:if(n.inCloudViewerMode){i.n=1;break}return i.a(2);case 1:if(!Qr.notSupportFolderLog(n.cloudVersion)){i.n=2;break}throw new Error("私有云版本过低,不支持获取文件夹信息");case 2:return o=new FormData,o.append("folderId",t),null!=e&&o.append("fut",e),i.n=3,n.fetchPostCloudApi("getfolderprecisbyweb",{body:o,timeout:1e4});case 3:if(a=i.v,Object(l["k"])(a)){i.n=4;break}throw new Error("文件夹摘要返回值异常:".concat(a));case 4:if(a.success){i.n=5;break}throw new Error(a.errMsg);case 5:return a=a.data,n.$store.commit("setFolderPrecis",a),i.a(2,a)}}),r)})))()},getCloudNotifies:function(t,e,n,o){var s=this;return Object(r["a"])(Object(i["a"])().m((function r(){var c,u,d,h,f,m,v,p,b,g,w,y,k,C,x,S,T,O,I,A,F,j,_,M;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:return c=new FormData,c.append("minNotifyId",t),c.append("artboardId",e),null!=n&&c.append("folderId",n),null!=o&&c.append("fut",o),i.n=1,s.fetchPostCloudApi("getnotifiesbyweb",{body:c,timeout:t>0?1e4:3e4});case 1:if(u=i.v,Object(l["k"])(u)){i.n=2;break}throw new Error("消息列表返回值异常:".concat(u));case 2:if(u.success){i.n=3;break}throw new Error(u.errMsg);case 3:if(u=u.data,d=u,h=d.list,f=d.folders,m=d.users,v=d.cloudUserListNeedUpdate,p=d.cloudUserListState,b=d.cloudUserListTimes,g=d.folderUpdateTime,o>0&&g>0&&g!==o&&s.getFolderPrecis(n,o).catch((function(t){})),w=[],Object(l["i"])(h)){i.n=4;break}return i.a(2,w);case 4:if(Object(l["k"])(f)||(f={}),Object(l["k"])(m)||(m={}),h.forEach((function(t){if(t){t.date=new Date(t.date);try{t.dateStr=Object(l["b"])(t.date)}catch(r){t.dateStr=t.date}switch(t.type){case a["X"].Artboard_Comment:case a["X"].Artboard_Reply:case a["X"].Artboard_Comment_At:case a["X"].Artboard_Reply_At:var e=t.msg;if(!e)return;if(e.commentUser=m[e.commentUserId],!e.commentUser)return;e.folder=f[e.folderId];var n=e.commentSummary,i=e.atUserIds;Object(l["i"])(i)&&i.length>0&&Object(l["j"])(n)&&(e.commentSummary=n.replace(/\[@uid:(\d+);\]/g,(function(t,e){var n=m[e];return n?"@"+n.nickName:t})));break}w.push(t)}})),y=s.$store.state.userNotify,k=y.cloudList,C=y.sysTipIds,x=y.commentUpdateStates,S=s.cloudKey,T=k[S],O=C[S]||0,null!=p&&s.updateCloudUsersByCloud({needUpdate:v,userListState:p,times:b}),u.artboardId>0&&s.$set(x,S,{artboardId:u.artboardId,commentUpdateTime:u.commentUpdateTime}),0!==t&&T){for(T.updateTime=Date.now(),j=null!==(A=null===(F=T.list[0])||void 0===F?void 0:F.id)&&void 0!==A?A:0,_=w.length-1;_>=0;_--)M=w[_],M.id>j&&(T.list.unshift(M),O=Math.max(M.id,O));O&&(C[S]=O)}else C[S]=Math.max((null===(I=w[0])||void 0===I?void 0:I.id)||0,O),s.$set(k,S,{updateTime:Date.now(),list:w});return i.a(2,w)}}),r)})))()},checkLoginThrow:function(){var t=arguments,e=this;return Object(r["a"])(Object(i["a"])().m((function n(){var r,o;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if(r=t.length>0&&void 0!==t[0]&&t[0],e.cloudIsLogin){n.n=3;break}if(!0!==r){n.n=2;break}return n.n=1,e.confirm({text:"需要登录才能执行操作",yesText:"前往登录"});case 1:if(!n.v){n.n=2;break}return e.goCloudLogin(),n.a(2,!1);case 2:throw o="未登录,请先登录",o;case 3:return n.a(2,!0)}}),n)})))()}}};o["a"].config.productionTip=!1,o["a"].mixin(a_);var s_=window.__marklionData;s_&&(window.__marklionData=null);var c_=null!==(Ej=null===s_||void 0===s_||null===(Rj=s_.cloudData)||void 0===Rj?void 0:Rj.renderMode)&&void 0!==Ej?Ej:a["W"].Normal,l_=-1!==navigator.userAgent.indexOf("MSIE");if(l_)document.body.innerHTML="很抱歉,不支持在IE浏览器中浏览标注信息,请使用Chrome,Firefox,Edge等浏览器浏览";else{if(Object(l["h"])(),Vi)try{document.documentElement.classList.add("h-firefox")}catch(h_){}Fr(),Ii.dataInit(s_,Lr.state.cloudListSort),Pr();var u_=function(){var t=Object(r["a"])(Object(i["a"])().m((function t(){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Ii.allArtboardLoadChecked((function(t){Lr.commit("artboardLoadProgress",t)}));case 1:Lr.commit("setDocument",Ii);case 2:return t.a(2)}}),t)})));return function(){return t.apply(this,arguments)}}(),d_=function(){var t=Lr.state,e=t.cloud.defaultArtboardGuid,n=Object(c["cb"])("filterDoc");if("none"===n)n=null;else if(n){var i=t.sortDocumentsWithSketchDocument.find((function(t){return t.guid===n}));if(i){var r=yi(n),o=Lr.state.documentArtboards.find((function(t){var n=t.artboard;return n.guid===e&&wi(n,r.filterDocumentGuid,r.onlyNoSectionArtboard)}));e&&!o&&(n=null)}else n=null}n?Lr.commit("setFilterDocumentGuid",n):Lr.commit("setFilterDocumentGuid",null)};switch(c_){case a["W"].Interaction:Nj(u_,d_);break;default:xI(u_,d_);break}}},"56f5":function(t,e,n){"use strict";n("2184")},5781:function(t,e,n){"use strict";n("47ac")},5818:function(t,e,n){},"583d":function(t,e,n){},"5899d":function(t,e,n){},5952:function(t,e,n){"use strict";n("ffe7")},"597f":function(t,e,n){"use strict";n("c4a1")},"5a06":function(t,e,n){"use strict";n("583d")},"5bf2":function(t,e,n){},"5c39":function(t,e,n){},"5c3c":function(t,e,n){"use strict";n("ae2d")},"5ccb":function(t,e,n){"use strict";n("8d74")},"5d60":function(t,e,n){},"5e23":function(t,e,n){"use strict";n("b163")},"5e3d":function(t,e,n){},"5ebd":function(t,e,n){},"5f3f":function(t,e,n){},"5f4b":function(t,e,n){},"617a":function(t,e,n){},"61a7":function(t,e,n){},6333:function(t,e,n){"use strict";n("ecd2")},6394:function(t,e,n){},"65b1":function(t,e,n){},6775:function(t,e,n){},"67a8":function(t,e,n){"use strict";n("2e40")},"67fd":function(t,e,n){},6828:function(t,e,n){"use strict";n("6775")},6834:function(t,e,n){},"6a77":function(t,e,n){"use strict";n("617a")},"6bd2":function(t,e,n){"use strict";n("5818")},"6bdc":function(t,e,n){"use strict";n("5ebd")},"6e1d":function(t,e,n){"use strict";n("5097")},"6e27":function(t,e,n){},"6e92":function(t,e,n){},"6e9b":function(t,e,n){},"6edc":function(t,e,n){"use strict";n("412a")},7026:function(t,e,n){},"710b":function(t,e,n){},7215:function(t,e,n){"use strict";n("bc30")},7226:function(t,e,n){"use strict";n("2ea5")},7261:function(t,e,n){"use strict";n("7e9e")},"72ff":function(t,e,n){},"74ae":function(t,e,n){},"751a":function(t,e,n){"use strict";n.r(e),n.d(e,"createFetch",(function(){return p})),n.d(e,"fetchGetCloudApi",(function(){return g})),n.d(e,"fetchPostCloudApi",(function(){return w})),n.d(e,"fetchTextWithProgress",(function(){return y})),n.d(e,"fetchWithProgress",(function(){return C})),n.d(e,"loadCssFileAsync",(function(){return S})),n.d(e,"createLoadGlobalLibraryFunc",(function(){return T}));var i=n("c14f"),r=n("5530"),o=n("1da1"),a=(n("d9e2"),n("99af"),n("7db0"),n("14d9"),n("a434"),n("e9f5"),n("f665"),n("7d54"),n("e9c4"),n("b680"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("c73d"),n("2b3d"),n("bf19"),n("9861"),n("88a7"),n("271a"),n("5494"),n("80f5")),s=n("8ae6"),c=(n("fb6a"),n("c19f"),n("ace4"),n("2c66"),n("249d"),n("40e9"),n("b0c0"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("986a"),n("1d02"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("6ce5"),n("2834"),n("72f7"),n("4ea1"),n("61ae"),n("0a00"),n("b6f3"),n("4801"),n("1c37")),l=n.n(c);function u(t){return d.apply(this,arguments)}function d(){return d=Object(o["a"])(Object(i["a"])().m((function t(e){var n,r,o,a,s,c,u,d,h,f;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return n=e.size,r=5120,t.n=1,(n>r?e.slice(0,r):e).arrayBuffer();case 1:o=t.v;try{c=l.a.analyse(new Uint8Array(o)),null!==c&&void 0!==c&&null!==(s=c[0])&&void 0!==s&&s.name&&(a=c[0].name.toLowerCase())}catch(i){}if("function"!==typeof TextDecoder){t.n=7;break}if(t.p=2,!(n>r)){t.n=4;break}return t.n=3,e.arrayBuffer();case 3:h=t.v,t.n=5;break;case 4:h=o;case 5:return u=h,d=new TextDecoder(a,{fatal:!1}),t.a(2,d.decode(u));case 6:t.p=6,f=t.v,console.warn("TextDecoder failed, fallback to FileReader:",f);case 7:return t.a(2,new Promise((function(t,n){var i=new FileReader;i.onload=function(){return t(i.result)},i.onerror=function(t){return n(new Error("Failed to read blob: "+t.message))},i.readAsText(e,a)})))}}),t,null,[[2,6]])}))),d.apply(this,arguments)}var h=n("fa7d"),f="function"===typeof AbortController,m={},v=function(t){if(null!=t){var e=m[t];if(e){delete m[t];try{e()}catch(n){}}}};function p(t,e,n,i){return b.apply(this,arguments)}function b(){return b=Object(o["a"])(Object(i["a"])().m((function t(e,n,o,a){var s,c,l,u,d,p,b,g,w;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(e=h["O"].combineResourcePath(e),!(o>0||null!=a)){t.n=12;break}if(v(a),!f){t.n=7;break}return s=new AbortController,c=!1,l=!1,u=0,null!=a&&(m[a]=function(){l=!0,u>0&&clearTimeout(u);try{var t;null===(t=s)||void 0===t||t.abort()}catch(e){}s=null}),o>0&&(u=setTimeout((function(){c=!0,null!=a&&delete m[a];try{var t;null===(t=s)||void 0===t||t.abort()}catch(e){}s=null}),o)),t.p=1,t.n=2,fetch(e,Object(r["a"])(Object(r["a"])({},n),{},{signal:s.signal}));case 2:d=t.v,t.n=5;break;case 3:if(t.p=3,w=t.v,!c){t.n=4;break}throw"Timeout: 接口请求超时了";case 4:throw w;case 5:return t.p=5,u>0&&clearTimeout(u),!l&&delete m[a],t.f(5);case 6:return t.a(2,d);case 7:return p=0,b=[],g=!1,o>0&&b.push(new Promise((function(t,e){p=setTimeout((function(){g||e("Timeout: 接口请求超时了")}),o)}))),b.push(fetch(e,n)),null!=a&&b.push(new Promise((function(t,e){m[a]=function(){g=!0,p>0&&clearTimeout(p),delete m[a],e("Error: The user aborted a request.")}}))),t.p=8,t.n=9,Promise.race(b);case 9:return t.a(2,t.v);case 10:return t.p=10,p>0&&clearTimeout(p),!g&&delete m[a],t.f(10);case 11:t.n=14;break;case 12:return t.n=13,fetch(e,n);case 13:return t.a(2,t.v);case 14:return t.a(2)}}),t,null,[[8,,10,11],[1,3,5,6]])}))),b.apply(this,arguments)}var g=function(){var t=Object(o["a"])(Object(i["a"])().m((function t(e,n){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,w(e,Object(r["a"])(Object(r["a"])({},n),{},{method:"GET"}));case 1:return t.a(2,t.v)}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),w=function(){var t=Object(o["a"])(Object(i["a"])().m((function t(e,n){var o,s,c,l,u,d,f,m,v,b;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return Object(a["k"])(n)||(n={}),o=n,s=o.timeout,c=o.json,l=o.abortKey,u=o.headers,null==s&&(s=0),(Object(a["k"])(n.body)||Object(a["i"])(n.body))&&(n.body=JSON.stringify(n.body)),!0===c&&(delete n.json,u||(n.headers=u={}),u["content-type"]="application/json;charset=UTF-8"),d=e.indexOf("?"),e=-1===d?e.toLowerCase():e.substring(0,d).toLowerCase()+e.substring(d),Object(h["W"])(e)&&"/"!==e[0]&&(e="".concat(h["d"],"/api/").concat(e)),delete n.abortKey,t.n=1,p(e,Object(r["a"])({method:"POST",credentials:void 0},n),s,l);case 1:f=t.v,b=f.status,t.n=200===b?2:500===b||403===b?5:7;break;case 2:return t.n=3,f.text();case 3:if(m=t.v,Object(a["j"])(m)){t.n=4;break}return t.a(2,"");case 4:return t.a(2,Object(h["ob"])(m));case 5:return t.n=6,f.text();case 6:throw v=t.v,"[".concat(f.status,"] ").concat(v);case 7:throw"[".concat(f.status,"] 接口").concat(e,"请求失败");case 8:return t.a(2)}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function y(t,e,n){return k.apply(this,arguments)}function k(){return k=Object(o["a"])(Object(i["a"])().m((function t(e,n,r){var o,a;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,C(e,n,r);case 1:return o=t.v,t.n=2,u(o);case 2:return a=t.v,t.a(2,a)}}),t)}))),k.apply(this,arguments)}function C(t,e){return x.apply(this,arguments)}function x(){return x=Object(o["a"])(Object(i["a"])().m((function t(e,n){var r,o,a,s,c,l,u,d,f,m,v,p,b,g,w,y=arguments;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:-1,null===n||void 0===n||n({percentage:"0%",current:"0B",total:r>0?Object(h["qb"])(r):"-"}),t.n=1,fetch(h["O"].combineResourcePath(e));case 1:if(o=t.v,a=parseInt(o.headers.get("Content-Length")||"0",10),0===a&&r>0&&(a=r),s=0,c=self.TransformStream,c){t.n=6;break}l=[],u=o.body.getReader(),d=!0;case 2:if(!d){t.n=5;break}return t.n=3,u.read();case 3:if(f=t.v,m=f.done,v=f.value,!m){t.n=4;break}return d=!1,t.a(3,5);case 4:l.push(v),s+=v.length,p=(a?s/a*100:0).toFixed(2)+"%",null===n||void 0===n||n({total:Object(h["qb"])(a),current:Object(h["qb"])(s),percentage:p}),t.n=2;break;case 5:return t.a(2,new Blob(l));case 6:return b=new c({transform:function(t,e){s+=t.length,e.enqueue(t);var i=(a?s/a*100:0).toFixed(2)+"%";null===n||void 0===n||n({total:Object(h["qb"])(a),current:Object(h["qb"])(s),percentage:i})}}),g=o.body.pipeThrough(b),w=new Response(g),t.a(2,w.blob())}}),t)}))),x.apply(this,arguments)}function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){var r,o=e.isURL,a=void 0===o||o,c=e.id,l=e.media,u=void 0===l?"all":l;a?(r=document.createElement("link"),r.rel="stylesheet",r.href="".concat(Object(s["a"])()).concat(t)):(r=document.createElement("style"),r.textContent=t),c&&(r.id=c),r.media=u,r.onload=function(){return n(r)},r.onerror=function(){return i(new Error("Failed to load CSS: ".concat(t)))},document.head.appendChild(r)}))}function T(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null,a=h["a"].Normal,c=[];"string"===typeof t&&(t=[t]);var l="".concat(Object(s["a"])()).concat(e),u=function(s,c,l){var u=document.createElement("script"),d=function(t){if(t){var e=t.parentNode;e&&e.removeChild(t)}};u.addEventListener("load",function(){var s=Object(o["a"])(Object(i["a"])().m((function o(s){var u,f,m;return Object(i["a"])().w((function(i){while(1)switch(i.n){case 0:return u=s.target,i.n=1,Object(h["pb"])(0);case 1:if(setTimeout((function(){d(u)}),100),a!==h["a"].Fetching){i.n=3;break}if(null!=t){i.n=2;break}return a=h["a"].Success,r=!0,c(),i.a(2);case 2:f=t.find((function(t){return null!=window[t]})),m=f?window[f]:null,m?(a=h["a"].Success,n&&t.forEach((function(t){window[t]=void 0;try{delete window[t]}catch(e){}})),r=m,c()):(a=h["a"].Error,l("".concat(e," library load but not find the variable")));case 3:return i.a(2)}}),o)})));return function(t){return s.apply(this,arguments)}}()),u.addEventListener("error",(function(t){var n=t.target;setTimeout((function(){d(n)}),100),a===h["a"].Fetching&&(a=h["a"].Error,l("".concat(e," library load failed")))})),u.src=s,document.body.appendChild(u)},d=function(){var t=Object(o["a"])(Object(i["a"])().m((function t(n,r,o){var s,c,d,f,m,v,p,b,g,w,y,k,C,x;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,o(0),t.n=1,fetch(l,{method:"GET"});case 1:if(c=t.v,c.ok){t.n=2;break}throw new Error("".concat(e," library load failed,http-status: ").concat(c.status));case 2:d=parseInt(c.headers.get("content-length")||"0",10),f=0,m=c.body.getReader(),v=[],p=!1,b=null,g=!1;case 3:if(p){t.n=6;break}return t.n=4,m.read();case 4:if(y=t.v,p=y.done,b=y.value,!p){t.n=5;break}return t.a(3,6);case 5:(null===(w=b)||void 0===w?void 0:w.length)>0&&(v.push(b),f+=b.length,d>0&&(k=Math.floor(Math.min(f/d*100,100))/100,o(k),g=1===k)),t.n=3;break;case 6:g||o(1),C=new Blob(v,{type:"application/javascript"}),s=URL.createObjectURL(C),u(s,(function(){setTimeout(n,0)}),(function(t){setTimeout((function(){r(t)}),0)})),t.n=8;break;case 7:t.p=7,x=t.v,a=h["a"].Error,r(x);case 8:return t.p=8,s&&(URL.revokeObjectURL(s),s=null),t.f(8);case 9:return t.a(2)}}),t,null,[[0,7,8,9]])})));return function(e,n,i){return t.apply(this,arguments)}}();function f(t){return new Promise((function(e,n){var i=function(){try{e(r)}catch(t){}c.length>0&&(c.forEach((function(e){try{e.resolve(r)}catch(t){}})),c.splice(0,c.length))},o=function(t){try{n(t)}catch(e){}c.length>0&&(c.forEach((function(n){try{n.reject(t)}catch(e){}})),c.splice(0,c.length))};if(r)return i();if(a!==h["a"].Fetching)try{a=h["a"].Fetching,"function"===typeof t?d(i,o,t):u(l,i,o)}catch(s){a=h["a"].Error,o(s)}else c.push({resolve:e,reject:n})}))}return{loadAsync:f}}},"755b":function(t,e,n){},"758c":function(t,e,n){},"76ec":function(t,e,n){},7797:function(t,e,n){"use strict";n("ac28")},7970:function(t,e,n){"use strict";n("5453")},"799c":function(t,e,n){"use strict";n("bb4f")},"79c5":function(t,e,n){"use strict";n("9609")},"7bff":function(t,e,n){"use strict";n("c67c")},"7ca5":function(t,e,n){},"7d26":function(t,e,n){"use strict";n("f443")},"7e91":function(t,e,n){},"7e9e":function(t,e,n){},"7eae":function(t,e,n){"use strict";n("b36c")},"7eb1":function(t,e,n){"use strict";n("6394")},"7eea":function(t,e,n){"use strict";n("4385")},"80f5":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return f})),n.d(e,"l",(function(){return m})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return p})),n.d(e,"k",(function(){return b})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return w})),n.d(e,"d",(function(){return y})),n.d(e,"h",(function(){return k}));n("99af"),n("14d9"),n("d3b7"),n("ac1f"),n("00b4"),n("25f0"),n("4d90"),n("c73d");var i,r="file:"===location.protocol,o=function(){try{var t,e=null===(t=navigator.userAgentData)||void 0===t?void 0:t.platform;if("macOS"===e)return!0;if("iPadOS"===e)return!0;if("iOS"===e)return!0}catch(i){}var n=navigator.platform;return"Mac68K"==n||"MacPPC"==n||"Macintosh"==n||"MacIntel"==n||"MacAmd"==n||"iPhone"==n||"iPad"==n}(),a=function(t){try{var e,n=null===(e=navigator.userAgentData)||void 0===e?void 0:e.platform;if("Windows"===n)return!0}catch(i){}return/([ ;/)(,]|^)Windows([ ;/)(,]|$)/i.test(null!==(t=navigator.userAgent)&&void 0!==t?t:"")}(),s=/Mobile|Android|Iphone|Ipad/i.test(navigator.userAgent);if(o&&!s){var c,l=null!==(c=self.screen)&&void 0!==c?c:{width:0,height:0},u=l.width,d=l.height;(768===u&&1024===d||1536===u&&2048===d||1668===u&&2224===d||1668===u&&2388===d||2048===u&&2732===d)&&(s=!0)}var h=s,f=h&&navigator.standalone;function m(t){for(var e=[],n={},i=0;i<t.length;i++){var r=t[i];n[r]||(n[r]=1,e.push(r))}return e}var v=null!==(i=Array.isArray)&&void 0!==i?i:function(t){return"[object Array]"===Object.prototype.toString.call(t)},p=function(t){return"string"===typeof t&&0!==t.length},b=function(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)};function g(t){if(!t)return"-";t instanceof Date||(t=new Date(t));var e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0"),r=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(i," ").concat(r,":").concat(o)}function w(t){if(!t)return"-";t instanceof Date||(t=new Date(t));var e=new Date,n=e-t,i=Math.floor(n/1e3),r=Math.floor(i/60),o=Math.floor(r/60),a=Math.floor(o/24),s=Math.floor(a/30),c=Math.floor(s/12);return c>0?"".concat(c,"年前"):s>0?"".concat(s,"月前"):a>0?"".concat(a,"天前"):o>0?"".concat(o,"小时前"):r>0?"".concat(r,"分钟前"):i>=-60?"刚刚":g(t)}function y(t){if(!t)return"-";t instanceof Date||(t=new Date(t));var e=new Date,n=e-t,i=Math.floor(n/1e3),r=Math.floor(i/60),o=Math.floor(r/60),a=Math.floor(o/24),s=Math.floor(a/30),c=Math.floor(s/12);return c>0?"".concat(c,"年前"):s>0?"".concat(s,"月前"):a>0?"".concat(a,"天前"):o>0?"".concat(o,"小时前"):r>0?"".concat(r,"分钟前"):i>=-60?"刚刚":g(t)}function k(){try{var t=document.documentElement.classList;a&&t.add("h-windows"),o&&t.add("h-macos")}catch(e){}}},"813d":function(t,e,n){"use strict";n("f278")},"81ab":function(t,e,n){"use strict";n("72ff")},"836f":function(t,e,n){},8423:function(t,e,n){"use strict";n("c54a")},8449:function(t,e,n){"use strict";n("85b6")},8542:function(t,e,n){},"859c":function(t,e,n){},"85b6":function(t,e,n){},"85df":function(t,e,n){},"866c":function(t,e,n){"use strict";n("6e92")},"86ab":function(t,e,n){},"872e":function(t,e,n){"use strict";n("a247")},8765:function(t,e,n){"use strict";n("b8b3")},8798:function(t,e,n){},"87a7":function(t,e,n){},"87fc":function(t,e,n){"use strict";n("523e")},8932:function(t,e,n){},"8a6e":function(t,e,n){"use strict";n("e670")},"8aa6":function(t,e,n){"use strict";n("d744")},"8ae6":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("ac1f"),n("c73d");var i=n("fa7d");function r(){return"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}var o="un-init";function a(){var t,e=/^.*\/template\/[\w.]+\/js\//i;"un-init"===o&&(o=r()?self.location.href:null===(t=document.currentScript)||void 0===t?void 0:t.src);if(o){var n=e.exec(o);n&&n[0]}for(var a=document.querySelectorAll("script[src]"),s=0;s<a.length;s++){var c=a[s],l=c.src;if(l){var u=e.exec(l);if(u)return u[0]}}return i["O"].inCloudMode?"/template/1.0/js/":"js/"}},"8b69":function(t,e,n){},"8bd9":function(t,e,n){"use strict";n("459a")},"8c0c":function(t,e,n){"use strict";n("755b")},"8c31":function(t,e,n){"use strict";n("b134")},"8d4c":function(t,e,n){},"8d74":function(t,e,n){},"8dcf":function(t,e,n){},"8ed9":function(t,e,n){"use strict";n("76ec")},"8f13":function(t,e,n){},"938c":function(t,e,n){"use strict";n("9a3a")},9429:function(t,e,n){},"94bb":function(t,e,n){},"95b7":function(t,e,n){"use strict";n("adcb")},"95c9":function(t,e,n){"use strict";n("0a6a")},9609:function(t,e,n){},9779:function(t,e,n){"use strict";n("16c9")},"99c2":function(t,e,n){"use strict";n("bc41")},"9a2b":function(t,e,n){"use strict";n("836f")},"9a3a":function(t,e,n){},"9a42":function(t,e,n){"use strict";n("02bc")},"9a51":function(t,e,n){},"9b14":function(t,e,n){},"9b3d":function(t,e,n){"use strict";n("31a2")},"9b64":function(t,e,n){"use strict";n("acd1")},"9d41":function(t,e,n){},"9d92":function(t,e,n){},"9e45":function(t,e,n){"use strict";n("5328")},"9edf":function(t,e,n){"use strict";n("2284")},"9fec":function(t,e,n){"use strict";n("2f9f")},a016:function(t,e,n){},a194:function(t,e,n){},a247:function(t,e,n){},a2b4:function(t,e,n){},a33d:function(t,e,n){},a451:function(t,e,n){},a521:function(t,e,n){},a685:function(t,e,n){"use strict";n("0172")},a7c0:function(t,e,n){},a803:function(t,e,n){"use strict";n("8b69")},a924:function(t,e,n){},a942:function(t,e,n){},a9f1:function(t,e,n){"use strict";n("fa4d")},ac28:function(t,e,n){},acd1:function(t,e,n){},ad48:function(t,e,n){"use strict";n("0a90")},ad84:function(t,e,n){},adcb:function(t,e,n){},ae2d:function(t,e,n){},ae76:function(t,e,n){"use strict";n("0650")},b134:function(t,e,n){},b138:function(t,e,n){},b15c:function(t,e,n){"use strict";n("3b1d")},b163:function(t,e,n){},b31f:function(t,e,n){},b35d:function(t,e,n){"use strict";n("9a51")},b36c:function(t,e,n){},b3ac:function(t,e,n){"use strict";n("e162")},b547:function(t,e,n){"use strict";n("bf5c")},b572:function(t,e,n){},b615:function(t,e,n){},b623:function(t,e,n){"use strict";n("1901")},b746:function(t,e,n){},b7ad:function(t,e,n){},b8b3:function(t,e,n){},b99f:function(t,e,n){"use strict";n("ceb5")},ba17:function(t,e,n){"use strict";n("ef65")},bab9:function(t,e,n){},bb0b:function(t,e,n){},bb4f:function(t,e,n){},bb5a:function(t,e,n){"use strict";n("44e4")},bc30:function(t,e,n){},bc41:function(t,e,n){},bda1:function(t,e,n){"use strict";n("e800")},be67:function(t,e,n){"use strict";n("7ca5")},bf12:function(t,e,n){"use strict";n("c7df")},bf5c:function(t,e,n){},c018:function(t,e,n){},c04a:function(t,e,n){"use strict";n("8d4c")},c1cd:function(t,e,n){"use strict";n("0261")},c2cb:function(t,e,n){"use strict";n("bab9")},c358:function(t,e,n){"use strict";n("30a9")},c3ad:function(t,e,n){"use strict";n("9d92")},c4a1:function(t,e,n){},c54a:function(t,e,n){},c636:function(t,e,n){"use strict";n("05d2")},c67c:function(t,e,n){},c67e:function(t,e,n){"use strict";n("85df")},c768:function(t,e,n){"use strict";n("d457")},c795:function(t,e,n){},c7df:function(t,e,n){},c9e9:function(t,e,n){},cabd:function(t,e,n){"use strict";n("5c39")},cb0e:function(t,e,n){},cb38:function(t,e,n){},cb4d:function(t,e,n){},cb5a:function(t,e,n){"use strict";n("d572")},cc21:function(t,e,n){"use strict";n("f646")},ceb5:function(t,e,n){},cec5:function(t,e,n){"use strict";n("08b7")},cf3d:function(t,e,n){"use strict";n("e47e")},cf87:function(t,e,n){"use strict";n("fbf6")},d1d9:function(t,e,n){"use strict";n("fef7")},d28d:function(t,e,n){"use strict";n("c795")},d2b7:function(t,e,n){},d405:function(t,e,n){},d457:function(t,e,n){},d572:function(t,e,n){},d578:function(t,e,n){},d5dd:function(t,e,n){"use strict";n("ead7")},d6df:function(t,e,n){"use strict";n("67fd")},d744:function(t,e,n){},da5a:function(t,e,n){"use strict";n("a2b4")},db69:function(t,e,n){"use strict";n("9b14")},dbb2:function(t,e,n){"use strict";n("b138")},de0f:function(t,e,n){"use strict";n("2883")},e04a:function(t,e,n){},e162:function(t,e,n){},e2d4:function(t,e,n){"use strict";n("3bb2")},e47e:function(t,e,n){},e55b:function(t,e,n){"use strict";n("710b")},e593:function(t,e,n){"use strict";n("8798")},e670:function(t,e,n){},e6fc:function(t,e,n){"use strict";n("2481")},e78b:function(t,e,n){"use strict";n("1e3f")},e7e5:function(t,e,n){"use strict";n("b746")},e800:function(t,e,n){},e934:function(t,e,n){"use strict";n("2d5b")},ea18:function(t,e,n){"use strict";n("7026")},ea24:function(t,e,n){"use strict";n("ffc8")},ead7:function(t,e,n){},ec86:function(t,e,n){"use strict";n("159c")},ecd2:function(t,e,n){},ed49:function(t,e,n){"use strict";n("758c")},eec1:function(t,e,n){},ef65:function(t,e,n){},f278:function(t,e,n){},f2ac:function(t,e,n){"use strict";n("a451")},f443:function(t,e,n){},f4a2:function(t,e,n){},f504:function(t,e,n){},f5b8:function(t,e,n){"use strict";n("c9e9")},f646:function(t,e,n){},f856:function(t,e,n){"use strict";n("464d")},f870:function(t,e,n){},f8f0:function(t,e,n){},f9c1:function(t,e,n){},fa2f:function(t,e,n){"use strict";n("e04a")},fa4d:function(t,e,n){},fa7d:function(t,e,n){"use strict";n.d(e,"f",(function(){return w})),n.d(e,"c",(function(){return y})),n.d(e,"d",(function(){return k})),n.d(e,"b",(function(){return C})),n.d(e,"g",(function(){return x})),n.d(e,"pb",(function(){return S})),n.d(e,"O",(function(){return T})),n.d(e,"N",(function(){return O})),n.d(e,"B",(function(){return I})),n.d(e,"Z",(function(){return A})),n.d(e,"L",(function(){return F})),n.d(e,"X",(function(){return _})),n.d(e,"j",(function(){return M})),n.d(e,"k",(function(){return L})),n.d(e,"hb",(function(){return P})),n.d(e,"ib",(function(){return D})),n.d(e,"x",(function(){return N})),n.d(e,"R",(function(){return E})),n.d(e,"T",(function(){return R})),n.d(e,"S",(function(){return V})),n.d(e,"Q",(function(){return B})),n.d(e,"t",(function(){return H})),n.d(e,"s",(function(){return U})),n.d(e,"r",(function(){return W})),n.d(e,"l",(function(){return z})),n.d(e,"u",(function(){return Y})),n.d(e,"H",(function(){return Q})),n.d(e,"C",(function(){return Z})),n.d(e,"K",(function(){return et})),n.d(e,"A",(function(){return nt})),n.d(e,"P",(function(){return it})),n.d(e,"kb",(function(){return rt})),n.d(e,"F",(function(){return ot})),n.d(e,"jb",(function(){return at})),n.d(e,"eb",(function(){return st})),n.d(e,"M",(function(){return ct})),n.d(e,"lb",(function(){return lt})),n.d(e,"fb",(function(){return ut})),n.d(e,"cb",(function(){return dt})),n.d(e,"e",(function(){return ht})),n.d(e,"p",(function(){return ft})),n.d(e,"o",(function(){return mt})),n.d(e,"I",(function(){return vt})),n.d(e,"ob",(function(){return pt})),n.d(e,"i",(function(){return bt})),n.d(e,"n",(function(){return wt})),n.d(e,"J",(function(){return yt})),n.d(e,"D",(function(){return kt})),n.d(e,"a",(function(){return Ct})),n.d(e,"qb",(function(){return xt})),n.d(e,"ab",(function(){return St})),n.d(e,"nb",(function(){return Tt})),n.d(e,"m",(function(){return Ot})),n.d(e,"Y",(function(){return Ft})),n.d(e,"U",(function(){return jt})),n.d(e,"mb",(function(){return _t})),n.d(e,"W",(function(){return Lt})),n.d(e,"V",(function(){return Nt})),n.d(e,"q",(function(){return Et})),n.d(e,"E",(function(){return Rt})),n.d(e,"gb",(function(){return Vt})),n.d(e,"bb",(function(){return Bt})),n.d(e,"w",(function(){return Ht})),n.d(e,"y",(function(){return Ut})),n.d(e,"z",(function(){return Gt})),n.d(e,"db",(function(){return Wt})),n.d(e,"v",(function(){return Yt})),n.d(e,"h",(function(){return Xt})),n.d(e,"G",(function(){return Kt}));var i=n("c14f"),r=n("53ca"),o=n("1da1"),a=(n("99af"),n("a15b"),n("d81d"),n("14d9"),n("c19f"),n("ace4"),n("2c66"),n("249d"),n("40e9"),n("b0c0"),n("e9f5"),n("7d54"),n("ab43"),n("e9c4"),n("a9e3"),n("8ba4"),n("b680"),n("b64b"),n("d3b7"),n("ac1f"),n("00b4"),n("25f0"),n("8a79"),n("3ca3"),n("466d"),n("5319"),n("498a"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("986a"),n("1d02"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("6ce5"),n("2834"),n("72f7"),n("4ea1"),n("61ae"),n("0a00"),n("b6f3"),n("4801"),n("81b2"),n("159b"),n("ddb0"),n("0eb6"),n("b7ef"),n("8bd4"),n("c73d"),n("2b3d"),n("bf19"),n("9861"),n("88a7"),n("271a"),n("5494"),n("d4ec")),s=n("bee2"),c=n("d5e4"),l=n("5037"),u=(n("4ec9"),n("2ca0"),n("10d1"),n("80f5")),d=/^\/?(?:resource|template)\//i,h=/^https?:\/\/[^/：*$#&]+\/$/i,f=new WeakMap,m=function(){function t(){Object(a["a"])(this,t),Object(c["a"])(this,f,new Map)}return Object(s["a"])(t,[{key:"useResourceHost",value:function(t){if(null==t)return!1;var e=Object(l["a"])(f,this).get(t);return void 0!==e||(e=Object(u["j"])(t)&&h.test(t),Object(l["a"])(f,this).set(t,e)),e}},{key:"getShortRandom",value:function(t){var e;return"number"===typeof t&&t>0?null===(e=t%864e5)||void 0===e?void 0:e.toString(36):null}},{key:"combineResourcePath",value:function(t,e){if(!Object(u["j"])(e)||!Lt(e))return e;if(!Object(u["k"])(t))return e;var n=t.resourceHost,i=t.cbt,r=t.resourceState,o=this.useResourceHost(n);if(!o||!d.test(e))return e;var a=n;n.length>0&&e.startsWith("/")?a+=e.substring(1):a+=e;var s=o?this.getShortRandom(i):null,c={},l=!1;return s&&(c.oc=s,l=!0),Object(u["j"])(r)&&(c.ru=r,l=!0),l&&(a=Xt(a,c)),a}}])}(),v=new m;function p(t,e){return v.combineResourcePath(t,e)}var b=n("08f3"),g=n("fe80"),w="https://user.marklion.cn/",y="",k="",C=375,x=370,S=function(t){return new Promise((function(e){setTimeout((function(){e()}),t||0)}))},T={cloudKey:null,userKey:null,documentName:"",documentGuid:"",config:null,inCloudMode:!1,_resourceHost:null,get resourceHost(){return this._resourceHost},set resourceHost(t){var e=Object(u["j"])(t);this._resourceHost=e?t:null;var n=null;e&&(n=t.endsWith("/")?t.substring(0,t.length-1):t),this._resourceOrigin=n},_resourceOrigin:null,get resourceOrigin(){return this._resourceOrigin},cloudBaseInfoTime:0,resourceState:null,cloudFolderId:0,initTitle:"",fileType:b["r"].XD,cloudVersion:"",docsMinScale:{},combineResourcePath:function(t){var e=this.resourceHost,n=this.cloudBaseInfoTime,i=this.inCloudMode,r=this.resourceState;return i?p({resourceHost:e,cbt:n,resourceState:r},t):t}};var O=function(t){var e=ot("unittemplate.".concat(t),!0);return Object(u["k"])(e)||(e={enable:!1,template:"rem(%num%)"}),e.fromInited=!0,e.guid=t,e},I=function(t,e){var n=ot("platform.".concat(t),!0);return Object(u["k"])(n)||(n={},n.type=e),n.fromInited=!0,n.guid=t,n},A=function(t,e){return(null!==t&&void 0!==t?t:"").localeCompare(null!==e&&void 0!==e?e:"",["zh"],{numeric:!0,caseFirst:"upper"})},F=function(t){return 1==t?"":"@".concat(t,"x")},j=function(t){if(null==t)return 0;try{return t.replace(/[^\u0020-\u00ff]/g,"aa").length}catch(e){return 0}},_=function(t){var e=j(t);return!!(e>=4&&e<=20&&/^[a-zA-Z\u4e00-\u9fa5][\w\u4e00-\u9fa5-]{1,19}$/.test(t))};function M(t,e){var n=t.x,i=t.y,r=e.x,o=e.y;if(n===r)return i>=o?270:90;if(i===o)return n>=r?0:180;var a=180*Math.atan2(o-i,r-n)/Math.PI;return a=Math.round(100*(180-a))/100,360===a&&(a=0),a}function L(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Math.round(Math.atan2(i-e,n-t)*(180/Math.PI)*100)/100+r}function P(){return Math.random().toString(16).substring(2)}function D(t,e){return Math.floor(Math.random()*(e-t))+t}function N(t,e,n){if(!t)return e+n;var i=t.mlConfig.linked;if(!Object(u["k"])(i))return e+n;var r=i[n.toLowerCase()];return r?T.inCloudMode?r:e+r:e+n}var E=function(t){if(!Object(u["k"])(t))return!1;var e,n=t.mlConfig;return e=Object(u["k"])(n)&&null!=n.resType?n.resType:b["fb"].PNG,(e&b["fb"].PNG)===b["fb"].PNG},R=function(t){if(!Object(u["k"])(t))return!1;var e=t.mlConfig;return!!Object(u["k"])(e)&&(e.resType&b["fb"].WEBP)===b["fb"].WEBP},V=function(t){if(!Object(u["k"])(t))return!1;var e=t.mlConfig;return!!Object(u["k"])(e)&&(e.resType&b["fb"].SVG)===b["fb"].SVG},B=function(t){if(!Object(u["k"])(t))return!1;var e=t.mlConfig;return!!Object(u["k"])(e)&&(e.resType&b["fb"].PDF)===b["fb"].PDF};function H(t,e){var n,i;"string"===typeof e?n=e:(n=URL.createObjectURL(e),i=!0);var r=document.createElement("a");r.href=n,r.style.cssText+="width:0!important;height:0!important;overflow:hidden!important;position: absolute!important;opacity:0!important;top:0!important;left:0!important;",r.download=t,r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r),r=null,i&&URL.revokeObjectURL(n),n=null}function U(t,e,n,i){return G.apply(this,arguments)}function G(){return G=Object(o["a"])(Object(i["a"])().m((function t(e,n,r,o){var a;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Y(n,r);case 1:return a=t.v,"string"===typeof a&&(a="data:application/octet-stream;base64,"+a),t.n=2,o(a);case 2:return a=t.v,H(e,a),t.a(2,"success")}}),t)}))),G.apply(this,arguments)}function W(t,e,n,i){return $.apply(this,arguments)}function $(){return $=Object(o["a"])(Object(i["a"])().m((function t(e,n,r,o){var a,s;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(s="function"===typeof o,n=T.combineResourcePath(n),s||!Object(u["j"])(n)||!/^(\/resource\/)/i.test(n)){t.n=1;break}a=n,t.n=4;break;case 1:return t.n=2,Y(n,r);case 2:if(a=t.v,"string"===typeof a&&(a="data:application/octet-stream;base64,"+a),!s){t.n=4;break}return t.n=3,o(a);case 3:a=t.v;case 4:return H(e,a),t.a(2,"success")}}),t)}))),$.apply(this,arguments)}function z(t){if(u["a"]&&!t.mlConfig.supportFileProtocol)throw"画板(".concat(t.name,")导出时「选择导出包支持范围」选择了「精简版」;需要部署到HTTP服务上才支持下载切图,请自行前往res目录拷贝切图");return!0}function Y(t,e){return X.apply(this,arguments)}function X(){return X=Object(o["a"])(Object(i["a"])().m((function t(e,n){var r,o;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(!u["a"]){t.n=2;break}return t.n=1,J(n);case 1:return t.a(2,t.v);case 2:return r={mode:"cors",credentials:"include"},T.inCloudMode&&(r.cache="no-cache"),t.n=3,fetch(T.combineResourcePath(e),r);case 3:return o=t.v,t.n=4,o.blob();case 4:return t.a(2,t.v)}}),t)}))),X.apply(this,arguments)}var K={},q=1;function J(t){return new Promise((function(e,n){var i=document.createElement("script"),r=function(t){t&&null!=t.parentNode&&setTimeout((function(){t&&null!=t.parentNode&&(t.parentNode.removeChild(t),t=null)}),200)};i._marklionBack=function(t,o){i._marklionBack=null,i._marklionCallId=null,t?e(o):n(o),r(i),i=null},i.addEventListener("error",(function(e){var n=e.target._marklionBack;n&&n(!1,"资源加载失败「".concat(t,"」"))})),i.addEventListener("load",(function(t){r(t.target)}));var o="marklion_".concat(Date.now(),"_").concat(q++);i._marklionCallId=o,i.src=Xt(t,{marklion_res_id:o}),K[o]=i._marklionBack,document.body.appendChild(i)}))}self.marklion_res=function(t,e){if(null!=t){var n=t._marklionBack,i=t._marklionCallId;n&&i&&(t._marklionBack=null,t._marklionCallId=null,K[i]=null,n(!0,e))}},self.addEventListener("error",(function(t){var e=t.filename;if(e){var n=e.match(/marklion_res_id=(\w+)/);if(n&&(n=n[1],n)){e=e.replace(/\\/g,"/");var i=e.indexOf("/res/");-1!==i&&(e=e.substr(i+1)),i=e.indexOf("?"),-1!==i&&(e=e.substr(0,i)),e=decodeURIComponent(e);var r=K[n];r&&r(!1,"资源加载失败「".concat(e,"」"))}}}),!0);var Q=function(t){if(!t)return null;var e=t.mlCustomName;return e||(e=t.name),e},Z=function(t,e,n,i){var r;switch(i){case b["fb"].WEBP:r=".webp";break;case b["fb"].JPG:r=".jpg";break;case b["fb"].PDF:r=".pdf";break;default:r=".png";break}return 1===e||"1"===e||t===b["c"].ANDROID?n+r:"".concat(n,"@").concat(e,"x").concat(r)},tt=/[\s\\/$:*?"'<>|\0]/g,et=function(t){if(Object(u["j"])(t)){t=t.replace(tt,(function(t){return" "===t?t:""})).trim();var e=50;return t.length>e&&(t=t.substr(0,e)),t}return null},nt=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="/viewer/".concat(t,"/");return e&&(n="".concat(location.origin).concat(n)),n},it=function(t){window.location.href=nt(t)},rt=function(t,e,n){if(Object(u["k"])(e)&&e.markedForExport){var i=e.guid;if(i){var r="".concat(T.documentGuid,"_").concat(i);if(n=et(n),e.mlCustomName!==n){if(Object(u["j"])(n)&&n!==e.name)return t.$set(e,"mlCustomName",n),void at(r,n);t.$set(e,"mlCustomName",null),st(r)}}}},ot=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=localStorage.getItem("marklion."+t);if(!Object(u["j"])(n))return n;if(!e)return n;try{n=JSON.parse(n)}catch(i){}return n}catch(r){return null}},at=function(t,e){try{"string"!==typeof e&&(e=JSON.stringify(e)),localStorage.setItem("marklion."+t,e)}catch(n){}},st=function(t){try{return localStorage.removeItem("marklion."+t)}catch(e){}},ct=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=sessionStorage.getItem("marklion."+t);if(!Object(u["j"])(n))return n;if(!e)return n;try{n=JSON.parse(n)}catch(i){}return n}catch(r){return null}},lt=function(t,e){try{"string"!==typeof e&&(e=JSON.stringify(e)),sessionStorage.setItem("marklion."+t,e)}catch(n){}},ut=function(t){try{return sessionStorage.removeItem("marklion."+t)}catch(e){}},dt=function(t,e,n){var i,r,o,a,s="";null==n?(n=window.location.href,r="#"==e?n.split("#"):n.split("#")[0].split("?"),i=1==r.length?"":r[1]):i=n;if(""!=i){o=i.split("&");var c=o.length;a=t+"=";for(var l=0;l<c;l++)if(0==o[l].indexOf(a)){s=o[l].replace(a,"");break}}return decodeURIComponent(s)},ht={NORMAL:"normal",PASSTHROUGH:"pass-through",MULTIPLY:"multiply",DARKEN:"darken",COLOR_BURN:"color-burn",LIGHTEN:"lighten",SCREEN:"screen",COLOR_DODGE:"color-dodge",OVERLAY:"overlay",SOFT_LIGHT:"soft-light",HARD_LIGHT:"hard-light",DIFFERENCE:"difference",EXCLUSION:"exclusion",HUE:"hue",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity",PASS_THROUGH:"pass-through",LINEAR_BURN:"linear-burn",LINEAR_DODGE:"linear-dodge"};function ft(t){try{if(document.execCommand){var e=document.createElement("textarea");e.style.cssText="position:absolute;left:-1000px;top:-1000px;width:50px;height:10px;background:none;border:none;opacity:0.01;z-index:99999;",e.value=t,e.readOnly=!0,document.body.appendChild(e),e.focus(),e.select();var n=document.execCommand("copy");return e.parentNode.removeChild(e),n}if(window.clipboardData)return window.clipboardData.setData("Text",t),!0}catch(i){return!1}return!1}function mt(t){try{if(document.execCommand)return document.execCommand("copy");if(window.clipboardData)return window.clipboardData.setData("Text",t),!0}catch(e){return!1}return!1}var vt=function(t,e){return"number"===typeof t?t:e},pt=function(t){if(void 0!=t){if(null===t)return null;var e=Object(r["a"])(t);switch(e){case"string":var n;try{n=JSON.parse(t)}catch(i){n=t}return n;default:return t}}};function bt(t){for(var e=atob(t),n=e.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.charCodeAt(r);return i}var gt=/^\d{1,7}(\.\d{1,7})*$/i,wt=function(t,e){if("string"!==typeof t)return!1;if("string"!==typeof e)return!0;if(!gt.test(t))return!1;if(!gt.test(e))return!0;t=t.split("."),e=e.split(".");var n=t.length,i=e.length;if(n>i){for(var r=i;r<n;r++)e.push("0");i=n}else if(n<i){for(var o=n;o<i;o++)t.push("0");n=i}for(var a=0;a<n;a++){var s=parseInt(t[a]),c=parseInt(e[a]);if(s>c)return!0;if(s<c)return!1}return!0},yt=function(){var t;return null!==(t=self.devicePixelRatio)&&void 0!==t?t:1};function kt(t){if("string"!==typeof t)return"";var e=t.lastIndexOf(".");return-1===e?"":t.substring(e)}var Ct={Normal:0,Fetching:1,Error:2,Success:3},xt=function(t){return"number"!==typeof t?t:t<1024?"".concat(t,"B"):t<1048576?"".concat((t/1024).toFixed(2),"KB"):t<1073741824?"".concat((t/1048576).toFixed(2),"MB"):t<1099511627776?"".concat((t/1073741824).toFixed(2),"GB"):"".concat((t/1099511627776).toFixed(2),"TB")};function St(t){for(var e=new Uint8Array(4),n=0;n<4;n++){var i=t%256;if(e[n]=i,t-=i,t<=0)break;t/=256}return e}function Tt(t){for(var e,n=new Array,i=0,r=t.length;i<r;i++)e=t.charCodeAt(i),e>=65536&&e<=1114111?(n.push(e>>18&7|240),n.push(e>>12&63|128),n.push(e>>6&63|128),n.push(63&e|128)):e>=2048&&e<=65535?(n.push(e>>12&15|224),n.push(e>>6&63|128),n.push(63&e|128)):e>=128&&e<=2047?(n.push(e>>6&31|192),n.push(63&e|128)):n.push(255&e);return new Uint8Array(n).buffer}function Ot(t){return new Blob(t)}function It(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null}function At(){var t=["webkit","moz","ms","o"];if("visibilityState"in document)return"visibilityState";for(var e=0;e<t.length;e++)if(t[e]+"VisibilityState"in document)return t[e]+"VisibilityState";return null}function Ft(){var t=At();return null!==t?"visible"!=document[t]:(t=It(),!!t&&document[t])}function jt(t){return Object(u["j"])(t)?t:/[<> ]/gi.replace((function(t){switch(t){case" ":return"&nbsp;";case"<":return"&lt;";case">":return"&gt;"}return t}))}function _t(t,e){var n=[];if(Object(u["j"])(t)&&Object(u["j"])(e)){var i=-1,r=t.toLowerCase(),o=e.toLowerCase(),a=[];while(-1!=(i=r.indexOf(o,i+1)))a.push(i);var s=o.length,c=0;a.forEach((function(e){e>c&&n.push({light:!1,text:t.substr(c,e-c)}),n.push({light:!0,text:t.substr(e,s)}),c=e+s})),c<t.length&&n.push({light:!1,text:t.substr(c)})}else n.push({text:t||"",light:!1});return n}var Mt=/^((https?|file):)?\/\//i,Lt=function(t){return"string"===typeof t&&!Mt.test(t)};function Pt(t,e,n){var i="meta",r=document.querySelector("".concat(i,"[name='").concat(e,"']")),o=!r;o&&(r=document.createElement(i),r.setAttribute("name",e)),r.setAttribute("content",n),o&&t.appendChild(r)}function Dt(t,e,n,i){var r,o="link";i?(r=[],Object.keys(i).forEach((function(t){r.push("[".concat(t,"='").concat(i[t],"']"))})),r=r.join("")):r="";var a=document.querySelector("".concat(o,"[rel='").concat(e,"']").concat(r)),s=!a;s&&(a=document.createElement(o),a.setAttribute("rel",e),i&&Object.keys(i).forEach((function(t){a.setAttribute(t,i[t])}))),a.setAttribute("href",n),s&&t.appendChild(a)}function Nt(t){var e=t?"/favicon_interaction.png":"/favicon.ico",n=document.head;if(n||(n=document.querySelector("head")),n||(n=document.body),u["f"]){Pt(n,"viewport","width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,minimal-ui,viewport-fit=cover,user-scalable=no"),Pt(n,"apple-mobile-web-app-capable","yes"),Pt(n,"mobile-web-app-capable","yes"),Pt(n,"apple-mobile-web-app-status-bar-style","black-translucent"),Pt(n,"apple-touch-fullscreen","yes"),Pt(n,"webkit","renderer"),Dt(n,"icon",e),Dt(n,"apple-touch-icon",e,{sizes:"64x64"}),Dt(n,"apple-touch-icon",e,{sizes:"128x128"}),Dt(n,"apple-touch-icon",e,{sizes:"256x256"});var i=document.documentElement;i.classList.add("i-mobile"),u["g"]&&i.classList.add("i-mobile-safari-standalone")}else t&&Dt(n,"icon",e)}function Et(){u["f"]&&document.documentElement.addEventListener("touchstart",(function(t){t.touches.length>1&&t.preventDefault()}),{passive:!1})}function Rt(t){if(!Object(u["j"])(t))return null;var e=/\/fileviewer\/\d+\/([a-f\d]+)(?:_([a-f\d]*))?\//i.exec(t);return e?e[1]:null}function Vt(t,e){return Object(u["j"])(t)?(e=e>0?"_".concat(e):"",t.replace(/(\/fileviewer\/\d+\/[a-f\d]+)(?:_[a-f\d]*)?(\/)/i,"$1".concat(e,"$2"))):t}function Bt(t){return parseFloat(t)/100}function Ht(t,e){var n,i;t?(n=.02,i=8):(n=.1,i=4);var r=e>1?100:1e4;return e=Math.round(e*r),e=g["b"].div(e,r),e=Math.min(i,e),e=Math.max(n,e),e}function Ut(t,e){var n,i,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),o=[];if(e=e||r.length,t)for(n=0;n<t;n++)o[n]=r[0|Math.random()*e];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(i=0|16*Math.random(),o[n]=r[19==n?3&i|8:i]);return o.join("")}function Gt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Object(u["j"])(t))return t;var n=parseFloat(t);return isNaN(n)?t:(n-=90,n<-90&&(n+=360),e&&n>180&&(n-=360),"".concat(Object(g["a"])(n,2),"deg"))}function Wt(){try{var t,e;null===(t=window.getSelection())||void 0===t||null===(e=t.removeAllRanges)||void 0===e||e.call(t)}catch(n){}}function $t(t){var e;if(!((null===(e=t.childs)||void 0===e?void 0:e.length)>0)){var n=t,i=n.parent;while(i)i.updateTimes=Math.max(i.updateTimes,t.updateTimes),t=i,i=i.parent}}function zt(t){var e=t;while(null!=(e=e.parent)){var n,i,r;e.childArtboardCount+=null!==(n=t.artboardCount)&&void 0!==n?n:0,e.childFileCount+=null!==(i=t.fileCount)&&void 0!==i?i:0,e.childFolderCount+=null!==(r=t.folderCount)&&void 0!==r?r:0}}function Yt(t){$t(t),zt(t)}function Xt(t,e){if(!Object(u["k"])(e))return t;if(!Object(u["j"])(t))return t;var n;n=/^https?:\/\//i.test(t)?new URL(t):new URL(t,window.location.href);var i=n,r=i.searchParams;return Object.keys(e).forEach((function(t){r.set(t,e[t])})),n.toString()}function Kt(t,e){var n=Math.floor(t),i=Math.floor(e);return n===i||n===t&&Math.abs(t-e)<=1?e:e>t?n+1:Math.ceil(t)-1}},fb5a:function(t,e,n){},fbf6:function(t,e,n){},fc83:function(t,e,n){"use strict";n("5e3d")},fcb0:function(t,e,n){"use strict";n("3fe1")},fda2:function(t,e,n){},fe6a:function(t,e,n){"use strict";n("fb5a")},fe80:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a9e3"),n("d3b7"),n("ac1f"),n("25f0"),n("5319");e["b"]={add:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=0,i=0,r=1;try{n=t.toString().split(".")[1].length}catch(o){}try{i=e.toString().split(".")[1].length}catch(o){}return r=Math.pow(10,Math.max(n,i)),(this.mul(t,r)+this.mul(e,r))/r},sub:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=0,i=0,r=1;try{n=t.toString().split(".")[1].length}catch(o){}try{i=e.toString().split(".")[1].length}catch(o){}return r=Math.pow(10,Math.max(n,i)),(this.mul(t,r)-this.mul(e,r))/r},mul:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=0,i=t.toString(),r=e.toString();try{n+=i.split(".")[1].length}catch(o){}try{n+=r.split(".")[1].length}catch(o){}return Number(i.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,n)},div:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=1,i=1,r=0,o=0;try{r=t.toString().split(".")[1].length}catch(a){}try{o=e.toString().split(".")[1].length}catch(a){}return n=Number(t.toString().replace(".","")),i=Number(e.toString().replace(".","")),this.mul(n/i,Math.pow(10,o-r))}};var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Math.pow(10,e);return Math.round(t*n)/n}},fe9c:function(t,e,n){"use strict";n("16d8")},fedd:function(t,e,n){},fef2:function(t,e,n){"use strict";n("314b")},fef7:function(t,e,n){},ffc8:function(t,e,n){},ffca:function(t,e,n){"use strict";n("35d0")},ffe7:function(t,e,n){}});